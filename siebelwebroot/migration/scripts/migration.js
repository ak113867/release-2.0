/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
function updateSRN(){window.location.pathname.indexOf("index")!==-1&&(sessionStorage.getItem("SRN")?(sessionNumber=sessionStorage.getItem("SRN"),sessionStorage.removeItem("SRN")):$.ajax({url:baseUrl+"SessionInfo",type:"GET",crossDomain:!0,headers:{"Content-Type":"text/plain"},dataType:"text",async:!1,success:function(e){e?(e=JSON.parse(e),e["status"]=="error"?e["msgKey"]=="INTL_DUPLICATE_SESSION"?sessionWarningMessage():typeof i18n_resources!="undefined"?alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time"):alert('"Server you are trying to access is either busy or experiencing difficulties. Try after some time"'):e.SRN?sessionNumber=e.SRN:e["msgKey"]=="NOT_SSO"?sessionWarningMessage():sessionWarningMessage()):sessionWarningMessage()},error:function(e,t,n){var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),r.msgKey=="INTL_DUPLICATE_SESSION"&&sessionWarningMessage()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}}))}function loadPaging(e){var t=$("#"+currentTab+"pager");t.find(".ui-icon-seek-first").attr("title",i18n_resources.INTL_LABEL_PAGER_FIRST||"First Record Set"),t.find(".ui-icon-seek-prev").attr("title",i18n_resources.INTL_LABEL_PAGER_PREV||"Previous Record Set"),t.find(".ui-icon-seek-next").attr("title",i18n_resources.INTL_LABEL_PAGER_NEXT||"Next Record Set"),t.find(".ui-icon-seek-end").attr("title",i18n_resources.INTL_LABEL_PAGER_LAST||"Last Record Set");var n=[],r=(currentGridPage-1)*paginationRowCount,i=currentGridPage*paginationRowCount-1;for(var r=r;r<=i;r++)e[r]&&n.push(e[r]);currentTab=="history"&&($("#"+currentTab+"-table")[0].addJSONData(n),self.currentGridPage==self.totalGridPage?$("#next_"+currentTab+"pager, #last_"+currentTab+"pager").addClass("ui-state-disabled"):$("#next_"+currentTab+"pager, #last_"+currentTab+"pager").removeClass("ui-state-disabled"),self.currentGridPage<=1?$("#prev_"+currentTab+"pager, #first_"+currentTab+"pager").addClass("ui-state-disabled"):$("#prev_"+currentTab+"pager, #first_"+currentTab+"pager").removeClass("ui-state-disabled"))}function htmlLanguageParse(e){if(e==document)var t=e.querySelectorAll("[data-res]"),n=e.querySelectorAll("[data-title]"),r=e.querySelectorAll("[data-placeholder]");else var t=document.getElementById(e).querySelectorAll("[data-res]"),n=document.getElementById(e).querySelectorAll("[data-title]"),r=document.getElementById(e).querySelectorAll("[data-placeholder]");for(var i=0;i<t.length;i++){var s=t[i],o=s.getAttribute("data-res");o&&i18n_resources[o]&&(s.innerHTML=i18n_resources[o])}for(var i=0;i<n.length;i++){var s=n[i],u=s.getAttribute("data-title");u&&i18n_resources[u]&&s.setAttribute("title",i18n_resources[u])}for(var i=0;i<r.length;i++){var s=r[i],a=s.getAttribute("data-placeholder");a&&i18n_resources[a]&&s.setAttribute("placeholder",i18n_resources[a])}isRTL()?$("html, body").addClass("siebui-rtl"):$("html, body").removeClass("siebui-rtl")}function isRTL(){var e=localStorage.getItem("migration-language")||"enu";return e==="ara"||e==="heb"?!0:!1}function openTabs(e,t){e.preventDefault();var n=!0;if(currentTab=="migration"&&migrationEditScreen){var r=i18n_resources.INTL_MIGRATION_SAVE_CONFIRM||"Migration Plan Changes will be discarded. Do you want to navigate to '%1' tab?";r=r.replace("%1",t),n=confirm(r),n&&(migrationplanViewModel.resetMigrationEdit(),migrationEditScreen=!1)}n&&(currentTab=t,$(".siebui-tabContent").addClass("hide"),$("#tabs-"+t).removeClass("hide"),$(".siebui-sidebar a").removeClass("selected"),$("#tabs-"+t).removeClass("hide"),e.currentTarget.className+=" selected")}function toggleSidebar(){function e(t){t.preventDefault(),$("#container").removeClass("sidebar-open"),document.getElementById("container").removeEventListener("click",e)}$(".siebui-header-menu-sidebar-toggle").css("display")!="none"&&($("#container").toggleClass("sidebar-open"),$("#container").hasClass("sidebar-open")&&document.getElementById("container").addEventListener("click",e))}function escapeHtml(e){return e.indexOf("<")===-1&&e.indexOf(">")===-1?!0:!1}function validateInput(e,t,n,r){if(e){if(!escapeHtml(e)){if(t){var i=i18n_resources.INTL_INVALID_INPUT||"You have entered an invalid input for '%1'. '>' and '<' are restricted characters";i=i.replace("%1",t),alert(i),n&&r&&(n=="window"?setTimeout(function(){$(window).focus(),$("#"+r).focus()},1):setTimeout(function(){$("#"+n).focus(),$("#"+r).focus()},1))}else i=i18n_resources.INTL_INVALID_INPUT_ALERT||"You have entered an invalid input, Enter a valid input to proceed. '>' and '<' are restricted characters",alert(i);return!0}return!1}}function validateInputFields(){for(var e=0;e<$(".siebui-d2p-validate-input").length;e++)if(validateInput($(".siebui-d2p-validate-input")[e].value))return!1;return!0}function sessionWarningMessage(){var e;typeof i18n_resources!="undefined"?e=i18n_resources.INTL_DUPLICATE_SESSION||"Session Warning Message \nYou have initiated a Migration App session while another Migration App session is currently active.\nClick Ok to login to a new session. Click Cancel and close the newly opened session to continue to use the already open session.":e="Session Warning Message \nYou have initiated a Migration App session while another Migration App session is currently active.\nClick Ok to login to a new session. Click Cancel and close the newly opened session to continue to use the already open session.";var t=confirm(e);if(t)signOut();else{var n=window.open("","_self"),r=i18n_resources
.INTL_SESSION_ERROR||"Error : Session Warning Message\n You have initiated a Migration App session while another Migration App session is currently active.";n.document.write(r)}}function signOut(){var e;sessionStorage.removeItem("repoUpgraded"),sessionNumber?e={username:localStorage.getItem("username"),SRN:sessionNumber}:e={username:localStorage.getItem("username"),SRN:""},$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Logout",type:"POST",crossDomain:!0,headers:{"Content-Type":"text/plain"},dataType:"text",data:JSON.stringify(e),async:!1,success:function(e){$("#maskoverlay").addClass("hide"),e=JSON.parse(e),localStorage.rememberUser&&localStorage.rememberUser=="false"&&(localStorage.username="");var t="";e.ssoLogOffURL&&e.ssoLogOffURL!=""?(t=e.ssoLogOffURL,e.returnURLQueryParam&&e.returnURLQueryParam!=""&&(t+="?"+e.returnURLQueryParam+"="+baseUrl),window.location=t):location.href="./login.html"},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage);if(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")location.href="./login.html"}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})}function connectionLoad(){connectionViewModel.getAllConnections(),connectionViewModel.disableDeleteConnection(),connectionSetAccordian()}function connectionSetAccordian(){$(".siebui-accordionButton").click(function(){var e=$(this);e.find(">:first-child").hasClass("siebui-icon-arrow-right")?(e.find(">:first-child").addClass("siebui-icon-arrow-down").removeClass("siebui-icon-arrow-right"),e.nextAll("fieldset").first().slideDown("normal"),e.addClass("on")):(e.find(">:first-child").addClass("siebui-icon-arrow-right").removeClass("siebui-icon-arrow-down"),e.nextAll("fieldset").first().slideUp("normal"),e.removeClass("on"))}),$(".siebui-accordionContentDB").show(),$(".siebui-accordionContentADM").show()}function ConnectionViewModel(){var self=this;self.connections=ko.observableArray([]),self.popupDialog=ko.observableArray(null),self.migrationResourcesDB=ko.observableArray([]),self.migrationResourcesADM=ko.observableArray([]),self.sliderLimit=ko.observable(0),self.slideMove=ko.observable(0),self.connectionStatusMap={},self.planAccosaitedConnections=[],self.addConnection=function(e,t,n,r,i,s,o,u){var a={connectionid:"",name:e,url:t,isFav:!1,SRN:sessionNumber,userName:n,tblspcName:r,tblspcInd:i,tblspcPage16:s,tblspcPage32:o,unicode:u};sessionNumber?($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Connection",type:"POST",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",data:JSON.stringify(a),async:!1,success:function(t){$("#maskoverlay").addClass("hide");if(t&&t.status)if(t["status"]=="error")if(t["msgKey"]=="INTL_CONN_REDIRECT"){if(t.redirectURL){var f=i18n_resources.INTL_CONN_REDIRECT||"REST Endpoint URL that you have provided is redirecting to '%1'. Click Ok to update the REST Endpoint with the redirecting URL. Click Cancel to ignore it";f=f.replace("%1",t.redirectURL);var l=confirm(f);l&&self.addConnection(e,t.redirectURL,n,r,i,s,o,u)}}else if(typeof i18n_resources!="undefined"&&t.msgKey){if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey];if(t.msgParamValueArr)for(var c=0;c<t.msgParamValueArr.length;c++)validationMessage=validationMessage.replace("%"+(c+1),t.msgParamValueArr[c])}else t.msg?validationMessage=t.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")&&signOut()}else t.msg?alert(t.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(t&&t.data){t=t.data;var h=new connection(t.connectionid,a.name,!0,!1,a.url,a.userName,a.tblspcName,a.tblspcInd,a.tblspcPage16,a.tblspcPage32,a.unicode);h.repoUpgraded(sessionStorage.getItem("repoUpgraded")==="true");if(t.resources&&t.resources.length)for(var p=0;p<t.resources.length;p++)h.migrationobject.push(new migrationobject(t.resources[p].resid,t.resources[p].name,!0,!1,null,t.resources[p].type)),t.resources[p].type=="DB Util"?self.migrationResourcesDB.push(new migrationobject(t.resources[p].resid,t.resources[p].name,!0,!1,null,t.resources[p].type)):self.migrationResourcesADM.push(new migrationobject(t.resources[p].resid,t.resources[p].name,!0,!1,null,t.resources[p].type));self.connections.unshift(h),self.connections().length>1&&($(".siebui-d2p-connection-tile-selected")[0].className=$(".siebui-d2p-connection-tile-selected")[0].className.replace(" siebui-d2p-connection-tile-selected","")),$("#connectionTile"+t.connectionid).addClass(" siebui-d2p-connection-tile-selected"),self.setMigrationResources(),$("#connectionTileContainer").css({left:"0px"}),self.resetScroll(),self.connections().length==1&&connectionSetAccordian(),htmlLanguageParse("connectionTile"+t.connectionid)}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];
if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401"?signOut():r.msgKey=="INTL_DUPLICATE_SESSION"&&sessionWarningMessage()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})):sessionWarningMessage()},self.disableDeleteConnection=function(){connectionFirstLoad&&($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Plan",type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!1,success:function(response){$("#maskoverlay").addClass("hide");if(response&&response.status)if(response["status"]=="error")if(typeof i18n_resources!="undefined"&&response.msgKey){if(i18n_resources[response.msgKey]){validationMessage=i18n_resources[response.msgKey];if(response.msgParamValueArr)for(var index=0;index<response.msgParamValueArr.length;index++)validationMessage=validationMessage.replace("%"+(index+1),response.msgParamValueArr[index])}else response.msg?validationMessage=response.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(response["msgKey"]=="INTL_SESSION_EXP"||response["msgKey"]=="INTL_INVL_USR")&&signOut()}else response.msg?alert(response.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(response.data){var jsonData=eval(response.data);if(jsonData.length==0)console.log("No MigrationPlans Present");else{self.planAccosaitedConnections=[];for(var i=0;i<jsonData.length;i++)self.planAccosaitedConnections.indexOf(jsonData[i].sourceConnId)===-1&&self.planAccosaitedConnections.push(jsonData[i].sourceConnId),self.planAccosaitedConnections.indexOf(jsonData[i].targetConnId)===-1&&self.planAccosaitedConnections.push(jsonData[i].targetConnId)}}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage)}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}}));if(self.planAccosaitedConnections)for(var i=0;i<self.connections().length;i++)self.planAccosaitedConnections.indexOf(self.connections()[i].id())>-1?self.connections()[i].deleteEnable(!1):self.connections()[i].deleteEnable(!0)},self.checkAllConnectionStatus=function(){for(var e=0;e<self.connections().length;e++)self.checkAlive(self.connections()[e])},self.deleteConnection=function(e,t){t.stopPropagation();var n=confirm(i18n_resources.INTL_CONNECTION_DELETE_ALERT||"Do you want to delete the Connection?");n&&(sessionNumber?($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Connection?connectionid="+e.id(),type:"DELETE",crossDomain:!0,headers:{"Content-Type":"application/json"},data:JSON.stringify({SRN:sessionNumber}),dataType:"json",async:!1,success:function(t){$("#maskoverlay").addClass("hide");if(t&&t.status)if(t["status"]=="error")if(typeof i18n_resources!="undefined"&&t.msgKey){if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey];if(t.msgParamValueArr)for(var n=0;n<t.msgParamValueArr.length;n++)validationMessage=validationMessage.replace("%"+(n+1),t.msgParamValueArr[n])}else t.msg?validationMessage=t.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")&&signOut()}else t.msg?alert(t.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(t["status"].toLowerCase()=="success"){for(var r=0;r<self.connections().length;r++)if(e.id()==self.connections()[r].id())break;if($("#connectionTile"+e.id()).hasClass("siebui-d2p-connection-tile-selected")){self.migrationResourcesDB.removeAll(),self.migrationResourcesADM.removeAll();if(self.connections()[r-1]){for(var i=0;i<self.connections()[r-1].migrationobject().length;i++)self.connections()[r-1].migrationobject()[i].type()=="DB Util"?self.migrationResourcesDB.push(self.connections()[r-1].migrationobject()[i]):self.migrationResourcesADM.push(self.connections()[r-1].migrationobject()[i]);$("#connection"+self.connections()[r-1].id()).show(),$("#connectionTile"+self.connections()[r-1].id()).addClass(" siebui-d2p-connection-tile-selected"),self.connections.remove(e)}else if(self.connections()[r+1]){for(var i=0;i<self.connections()[r+1].migrationobject().length;i++)self.connections()[r+1].migrationobject()[i].type()=="DB Util"?self.migrationResourcesDB.push(self.connections()[r+1].migrationobject()[i]):self.migrationResourcesADM.push(self.connections()[r+1].migrationobject()[i]);$("#connection"+self.connections()[r+1].id()).show(),$("#connectionTile"+self.connections()[r+1].id()).addClass(" siebui-d2p-connection-tile-selected"
),self.connections.remove(e)}else self.connections.remove(e)}else self.connections.remove(e);isRTL()?self.setLeftArrow():self.setRightArrow()}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey=="INTL_DUPLICATE_SESSION")sessionWarningMessage();else if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})):sessionWarningMessage())},self.addWatermark=function(e,t){if(e){self.popupDialog=!0,$("#watermarkDialog").remove(),$('<div id="watermarkDialog"> </div>').appendTo("#addWaterMark");var n="top",r="top";$("#watermarkDialog").dialog({dialogClass:"no-close",title:i18n_resources.INTL_WATERMARK_CREATE||"Enter the Watermark filename",width:650,height:200,modal:!0,position:{my:n,at:r,of:"#connectionsOuterContainer"},buttons:[{text:i18n_resources.INTL_OK_TEXT||"Ok",click:function(){if($("#nameWatermark").val()!=""){var t=$("#nameWatermark").val();$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"getwatermark?url="+e.restUrl()+"&name="+t,type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!0,success:function(e){$("#maskoverlay").addClass("hide");if(e&&e.status)if(e["status"]=="error")if(e["msgKey"]=="INTL_SESSION_EXP")alert('"Your session has been expired"'),location.href="./login.html";else if(typeof i18n_resources!="undefined"&&e.msgKey){if(i18n_resources[e.msgKey]){validationMessage=i18n_resources[e.msgKey];if(e.msgParamValueArr)for(var t=0;t<e.msgParamValueArr.length;t++)validationMessage=validationMessage.replace("%"+(t+1),e.msgParamValueArr[t])}else e.msg?validationMessage=e.msg:validationMessage="Could not generate watermark";alert(validationMessage)}else e.msg?(validationMessage=e.msg,alert(validationMessage)):alert("Could not generate watermark");else{var n=i18n_resources.INTL_WATERMARK_CREATE_SUCCESS||"Watermark has been generated in file \n '%1'";n=n.replace("%1",e.filePath),alert(n)}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide")}}),$(this).dialog("close"),$("#watermarkDialog").remove()}else alert(i18n_resources.INTL_ERROR_MANDATORY||"Mandatory field cannot be empty")},"class":"btn"},{text:i18n_resources.INTL_CANCEL_TEXT||"Cancel",click:function(){$(this).dialog("close"),$("#watermarkDialog").remove()},"class":"btn"}]});var i='<div><label class="siebui-d2p-popup-label siebui-d2p-required" for="nameWatermark" data-res="INTL_LABEL_NAME"> Name </label><input id="nameWatermark" class="siebui-d2p-popup-item siebui-d2p-validate-input" value="samplewatermark.txt" type="text" autofocus ></div> ';$("#watermarkDialog").html(i),htmlLanguageParse("watermarkDialog")}},self.editConnection=function(e,t){t.preventDefault(),self.popupDialog=!0,$("#editConnectionDialog").remove(),$('<div id="editConnectionDialog"> </div>').appendTo("#editConnectionTile"+e.id());var n=isRTL()?"left bottom":"right bottom",r=isRTL()?"left top":"right top";$("#editConnectionDialog").dialog({dialogClass:"no-close",title:i18n_resources.INTL_CONNECTION_EDIT_HEADER||"Edit Connection",width:650,height:200,modal:!0,position:{my:r,at:n,of:"#addConnection"},buttons:[{text:i18n_resources.INTL_OK_TEXT||"Ok",click:function(){if(validateInputFields())if($("#nameEdit").val()&&$("#end-point-edit").val()&&$.trim($("#nameEdit").val())!=""){var n=$.trim($("#nameEdit").val());$("#nameEdit").val(n),orgUrl=e.restUrl(),newUrl=$("#end-point-edit").val();var r=/^(http|https):\/\/[^ "]+$/;if(!r.test(newUrl)){var i=confirm(i18n_resources.INTL_CONN_INVALID_ENDPOINT||"The Endpoint URL that you have entered does not appear to be valid. Click OK if you are sure, it is valid. Click Cancel to edit it");if(!i){$("#end-point-edit").focus();return}}if(orgUrl!=newUrl){i=confirm(i18n_resources.INTL_EDIT_REST_ENDPOINT_ALERT||"Modifying the REST Endpoint will refresh the Connection Resources and the associated Migration Plans. Do you want to continue?");if(!i)return}$(this).dialog("close"),sessionNumber?($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Connection",type:"PUT",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",data:JSON.stringify({connectionid:e.id(),isFav:e.favourite(),name:n,url:$("#end-point-edit").val(),SRN:sessionNumber,userName:$("#username-edit").val(),tblspcName:$("#ts-data-edit").val(),tblspcInd:$("#ts-index-edit").val(),tblspcPage16:$("#ts-page16-edit").val(),tblspcPage32:$("#ts-page32-edit").val(),unicode:$("input:radio[name=codeFlag]:checked").val()}),async:!1,success:function(n){$("#maskoverlay").addClass("hide");if(n&&n.status)if(n["status"]=="error")if(typeof i18n_resources!="undefined"&&n.msgKey){if(i18n_resources[n.msgKey]){validationMessage=i18n_resources[n.msgKey];if(n.msgParamValueArr)for(var r=0;r<n.msgParamValueArr.length;r++)validationMessage=validationMessage.replace("%"+(r+1),n.msgParamValueArr[r])}else n.msg?validationMessage=n.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage
),(n["msgKey"]=="INTL_SESSION_EXP"||n["msgKey"]=="INTL_INVL_USR")&&signOut()}else n.msg?(alert(n.msg),$(this).dialog("close"),$("#editConnectionDialog").remove()):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes),$(this).dialog("close"),$("#editConnectionDialog").remove());else e.name($("#nameEdit").val()),e.restUrl(newUrl),e.userName($("#username-edit").val()),e.tblspcName($("#ts-data-edit").val()),e.tblspcInd($("#ts-index-edit").val()),e.tblspcPage16($("#ts-page16-edit").val()),e.tblspcPage32($("#ts-page32-edit").val()),e.unicode($("input:radio[name=codeFlag]:checked").val()),$("#editConnectionDialog").remove(),orgUrl!=newUrl&&self.refreshMigrationObjects(e,t,!0);else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time"),$(this).dialog("close"),$("#editConnectionDialog").remove()},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey=="INTL_DUPLICATE_SESSION")sessionWarningMessage(),$(this).dialog("close"),$("#editConnectionDialog").remove();else if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),$(this).dialog("close"),$("#editConnectionDialog").remove(),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?(alert(r.msg),$(this).dialog("close"),$("#editConnectionDialog").remove()):(alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time"),$(this).dialog("close"),$("#editConnectionDialog").remove())}})):(sessionWarningMessage(),$(this).dialog("close"),$("#editConnectionDialog").remove())}else alert(i18n_resources.INTL_CONNECTION_MANDATORY_ERROR||"Name and Endpoint are mandatory fields")},"class":"btn"},{text:i18n_resources.INTL_CANCEL_TEXT||"Cancel",click:function(){$(this).dialog("close"),$("#editConnectionDialog").remove()},mousedown:function(e){e.preventDefault(),E=!0,$(".ui-dialog-content").dialog("close"),$("#editConnectionDialog").remove()},"class":"btn"}]});var i=e.name(),s=e.restUrl(),o=e.userName(),u=e.tblspcName(),a=e.tblspcInd(),f=e.tblspcPage16(),l=e.tblspcPage32(),c=e.unicode(),h=i18n_resources.INTL_LABEL_UNICODE_DB||"UNICODE Database",p=i18n_resources.INTL_LABEL_NON_UNICODE_DB||"Non-UNICODE Database",d=i18n_resources.INTL_PLACEHOLDER_USERNAME||"Database Schema Owner User ID",v=i18n_resources.INTL_APP_DB2LUW||"Applicable only for DB2 LUW",m=i18n_resources.INTL_APP_ORC_DB2LUW||"Applicable only for Oracle and DB2 LUW",g=i18n_resources.INTL_CONN_URI||"REST Endpoint URI of the connection",y=i18n_resources.INTL_CONN_NAME||"Name of the Connection",b=i18n_resources.INTL_APP_DBINFO||"Database Information Applicable for Target Environments Only",w='<div><label class="siebui-d2p-popup-label siebui-d2p-required" for="nameEdit" data-res="INTL_LABEL_NAME"></label><input id="nameEdit" class="siebui-d2p-popup-item siebui-d2p-validate-input" type="text" autofocus title = "'+y+'" placeholder = "'+y+'" ></div>'+'<div><label class="siebui-d2p-popup-label siebui-d2p-required" for="end-point-edit" data-res="INTL_CONNECTION_REST_ENDPOINT"></label>'+'<input id="end-point-edit" type="text" class="siebui-d2p-popup-item" title = "'+g+'" placeholder = "'+g+'" ></div>'+'<div class="siebui-d2p-section-header"><span>'+b+"</span></div>"+'<div><label class="siebui-d2p-popup-label" for="username-edit" data-res="INTL_CONN_SCHEMA_USER"></label>'+'<input id="username-edit" class="siebui-d2p-popup-item siebui-d2p-validate-input" type="text" autofocus title = "'+d+'" placeholder = "'+d+'"></div>'+'<div><label class="siebui-d2p-popup-label" for="ts-data-edit" data-res="INTL_CONN_TBLSPC_DATA"></label>'+'<input id="ts-data-edit" type="text" class="siebui-d2p-popup-item" title = "'+m+'" placeholder = "'+m+'" ></div>'+'<div><label class="siebui-d2p-popup-label" for="ts-index-edit" data-res="INTL_CONN_TBLSPC_INDEX"></label>'+'<input id="ts-index-edit" type="text" class="siebui-d2p-popup-item" title = "'+m+'" placeholder = "'+m+'" ></div>'+'<div><label class="siebui-d2p-popup-label" for="ts-page16-edit" data-res="INTL_CONN_TBLSPC_PAGE16"></label>'+'<input id="ts-page16-edit" type="text" class="siebui-d2p-popup-item" title = "'+v+'" placeholder = "'+v+'"></div>'+'<div><label class="siebui-d2p-popup-label" for="ts-page32-edit" data-res="INTL_CONN_TBLSPC_PAGE32"></label>'+'<input id="ts-page32-edit" type="text" class="siebui-d2p-popup-item" title = "'+v+'" placeholder = "'+v+'" ></div>'+'<div><label class="siebui-d2p-popup-label" data-res="INTL_LABEL_DB_ENCODING"></label>'+'<input type="radio" class="siebui-d2p-popup-radio-dispr" id="unicodeflag" name="codeFlag" value="true" >'+h+"<br/>"+'<input type="radio" class="siebui-d2p-popup-radio-displ siebui-d2p-popup-radio-dispr" id="nonunicodeflag" name="codeFlag" value="false">'+p+"<br/></div>";$("#editConnectionDialog").html(w),$("#nameEdit").val(i),$("#end-point-edit").val(s),$("#username-edit").val(o),$("#ts-data-edit").val(u),$("#ts-index-edit").val(a),$("#ts-page16-edit").val(f),$("#ts-page32-edit").val(l),c=="true"?$("#unicodeflag").attr("checked","Y"):c=="false"&&$("#nonunicodeflag").attr("checked","Y"),$("#nameEdit").blur(function(){E||validateInput(this.value,"Connection Name","editConnectionDialog",this.id)}),$("#end-point-edit").blur(function(){E||validateInput(this.value,"End Point URL","editConnectionDialog",this.id)}),$("#end-point-edit").blur(function(){E||validateInput(this.value,"End Point URL","editConnectionDialog",this.id)}),$("#ts-data-edit").blur(function(
){E||validateInput(this.value,"Tablespace for Data","editConnectionDialog",this.id)}),$("#ts-index-edit").blur(function(){E||validateInput(this.value,"Tablespace for Index","editConnectionDialog",this.id)}),$("#ts-page16-edit").blur(function(){E||validateInput(this.value,"Tablespace for 16k Page","editConnectionDialog",this.id)}),$("#ts-page32-edit").blur(function(){E||validateInput(this.value,"Tablespace for 32k Page","editConnectionDialog",this.id)}),$("#nonunicodeflag").blur(function(){E||validateInput(this.value,"Unicode","editConnectionDialog",this.id)});var E=!1;$("#end-point-edit").val(s),$("#nameEdit").focus(),htmlLanguageParse("editConnectionDialog")},self.toggleFavourite=function(e,t){t.stopPropagation(),sessionNumber?($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Connection",type:"PUT",crossDomain:!0,headers:{"Content-Type":"text/plain"},dataType:"json",data:JSON.stringify({connectionid:e.id(),isFav:!e.favourite(),SRN:sessionNumber}),async:!0,success:function(t){$("#maskoverlay").addClass("hide");if(t&&t.status)if(t["status"]=="error")if(typeof i18n_resources!="undefined"&&t.msgKey){if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey]||t.msg;if(t.msgParamValueArr)for(var n=0;n<t.msgParamValueArr.length;n++)validationMessage=validationMessage.replace("%"+(n+1),t.msgParamValueArr[n])}else t.msg?validationMessage=t.msg:validationMessage=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")&&signOut()}else t.msg?alert(t.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else e.favourite(!e.favourite());else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})):sessionWarningMessage()},self.showMigrationObjects=function(e,t){self.migrationResourcesDB.removeAll(),self.migrationResourcesADM.removeAll();for(var n=0;n<self.connections().length;n++)if(e.id()==self.connections()[n].id()){for(var r=0;r<self.connections()[n].migrationobject().length;r++)self.connections()[n].migrationobject()[r].type()=="DB Util"?self.migrationResourcesDB.push(new migrationobject(self.connections()[n].migrationobject()[r].resid(),self.connections()[n].migrationobject()[r].name(),!0,!1,null,self.connections()[n].migrationobject()[r].type())):self.migrationResourcesADM.push(new migrationobject(self.connections()[n].migrationobject()[r].resid(),self.connections()[n].migrationobject()[r].name(),!0,!1,null,self.connections()[n].migrationobject()[r].type()));break}$(".siebui-d2p-connection-tile-selected")[0].className=$(".siebui-d2p-connection-tile-selected")[0].className.replace(" siebui-d2p-connection-tile-selected"," "),$("#connectionTile"+e.id()).addClass(" siebui-d2p-connection-tile-selected"),self.checkAlive(e),$(".siebui-accordionContentDB").show(),$(".siebui-accordionContentADM").show(),$(".siebui-accordionContentDB").parent().find(".siebui-d2p-accordion").addClass("siebui-icon-arrow-down").removeClass("siebui-icon-arrow-right"),$(".siebui-accordionContentADM").parent().find(".siebui-d2p-accordion").addClass("siebui-icon-arrow-down").removeClass("siebui-icon-arrow-right")},self.refreshMigrationObjects=function(e,t,n){t.stopPropagation();var r=!1;n==1?r=n:r=confirm(i18n_resources.INTL_CONNECTION_REFRESH_ALERT||"Refresh will update the associated Migration Plans with this connection with the latest resources. Do you want to continue?"),r&&($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Connection?connectionid="+e.id()+"&method=refresh",type:"GET",crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},dataType:"json",async:!0,success:function(t){$("#maskoverlay").addClass("hide");if(t&&t.status)if(t["status"]=="error")if(typeof i18n_resources!="undefined"&&t.msgKey){validationMessage=i18n_resources[t.msgKey]||t.msg;if(t.msgParamValueArr)for(var n=0;n<t.msgParamValueArr.length;n++)validationMessage=validationMessage.replace("%"+(n+1),t.msgParamValueArr[n]);alert(validationMessage),(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")&&signOut()}else t.msg?alert(t.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(t.data){if(t.data.resources){t=t.data.resources;for(var r=0;r<self.connections().length;r++)if(e.id()==self.connections()[r].id()){self.migrationResourcesDB.removeAll(),self.migrationResourcesADM.removeAll(),self.connections()[r].migrationobject.removeAll();for(var i=0;i<t.length;i++)self.connections()[r].migrationobject.push(new migrationobject(t[i].resid,t[i].name,!0,!1,null,t[i].type)),t[i].type=="DB Util"?self.migrationResourcesDB.push(new migrationobject(t[i].resid,t[i].name,!0,!1,null,t[i].type)):self.migrationResourcesADM.push(new migrationobject(t[i].resid,t[i].name,!0,!1,null,t[i].type));break}$(".siebui-d2p-connection-tile-selected")[0].className=$(".siebui-d2p-connection-tile-selected")[0].className.replace
(" siebui-d2p-connection-tile-selected"," "),$("#connectionTile"+e.id()).addClass(" siebui-d2p-connection-tile-selected"),self.checkAlive(e)}}else{alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time"),e.status(!1);var s=i18n_resources[$("#connectionStatus"+e.id()).attr("data-title")];s&&$("#connectionStatus"+e.id()).attr("title",s),e.refreshEnable(!1)}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}}))},self.updateCheckAliveStatus=function(){for(var e=0;e<self.connections().length;e++)if(self.connectionStatusMap[self.connections()[e].id()]){self.connections()[e].status(self.connectionStatusMap[self.connections()[e].id()]);var t=i18n_resources[$("#connectionStatus"+self.connections()[e].id()).attr("data-title")];t&&$("#connectionStatus"+self.connections()[e].id()).attr("title",t)}else self.checkAlive(self.connections()[e])},self.checkAlive=function(e){$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Connection?connectionid="+e.id()+"&method=checkalive",type:"GET",crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},dataType:"json",async:!0,success:function(t){$("#maskoverlay").addClass("hide");if(t&&t.status)if(t["status"]=="error")if(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")alert(i18n_resources[t.msgKey]||t.msg),signOut();else{self.connectionStatusMap[e.id()]=!1,e.status(!1);var n=i18n_resources[$("#connectionStatus"+e.id()).attr("data-title")];n&&$("#connectionStatus"+e.id()).attr("title",n),e.refreshEnable(!1),e.watermarkEnable(!1)}else if(t["status"]=="success"){self.connectionStatusMap[e.id()]=!0,e.status(!0);var n=i18n_resources[$("#connectionStatus"+e.id()).attr("data-title")];n&&$("#connectionStatus"+e.id()).attr("title",n),e.refreshEnable(!0);var r=sessionStorage.getItem("repoUpgraded")==="true";r?e.watermarkEnable(!0):e.watermarkEnable(!1)}else{self.connectionStatusMap[e.id()]=!1,e.status(!1);var n=i18n_resources[$("#connectionStatus"+e.id()).attr("data-title")];n&&$("#connectionStatus"+e.id()).attr("title",n),e.refreshEnable(!1),e.watermarkEnable(!1)}else{self.connectionStatusMap[e.id()]=!1,e.status(!1);var n=i18n_resources[$("#connectionStatus"+e.id()).attr("data-title")];n&&$("#connectionStatus"+e.id()).attr("title",n),e.refreshEnable(!1),e.watermarkEnable(!1)}},error:function(t){$("#maskoverlay").addClass("hide"),self.connectionStatusMap[e.id()]=!1,e.status(!1);var n=i18n_resources[$("#connectionStatus"+e.id()).attr("data-title")];n&&$("#connectionStatus"+e.id()).attr("title",n),e.refreshEnable(!1),e.watermarkEnable(!1)}})},self.getAllConnections=function(){$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Connection",type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!1,success:function(e){$("#maskoverlay").addClass("hide");if(e&&e.status)if(e["status"]=="error")if(typeof i18n_resources!="undefined"&&e.msgKey){validationMessage=i18n_resources[e.msgKey]||e.msg;if(e.msgParamValueArr)for(var t=0;t<e.msgParamValueArr.length;t++)validationMessage=validationMessage.replace("%"+(t+1),e.msgParamValueArr[t]);alert(validationMessage),(e["msgKey"]=="INTL_SESSION_EXP"||e["msgKey"]=="INTL_INVL_USR")&&signOut()}else e.msg?alert(e.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(e.data){var n=e.data;self.connections.removeAll();if(n.length==0)console.log("No connections Present");else{for(var r=0;r<n.length;r++){var i=new connection(n[r].connectionid,n[r].name,null,n[r].isFav,n[r].url,n[r].userName,n[r].tblspcName,n[r].tblspcIndex,n[r].tblspcPage16,n[r].tblspcPage32,n[r].unicode);i.repoUpgraded(sessionStorage.getItem("repoUpgraded")==="true");for(var s=0;s<n[r].resources.length;s++)i.migrationobject.push(new migrationobject(n[r].resources[s].resid,n[r].resources[s].name,!0,!1,null,n[r].resources[s].type));self.connections.push(i)}typeof i18n_resources!="undefined"&&htmlLanguageParse("tabs-connection")}self.connections().length>0&&(connectionlist=$(".siebui-d2p-connection-tile"),self.setMigrationResources(),$("#connection"+self.connections()[0].id()).show(),connectionlist[0].className+=" siebui-d2p-connection-tile-selected"),connectionFirstLoad?self.setScroll():self.resetScroll()}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";
alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})},self.setMigrationResources=function(){self.migrationResourcesDB.removeAll(),self.migrationResourcesADM.removeAll();for(var e=0;e<self.connections()[0].migrationobject().length;e++)self.connections()[0].migrationobject()[e].type()=="DB Util"?self.migrationResourcesDB.push(self.connections()[0].migrationobject()[e]):self.migrationResourcesADM.push(self.connections()[0].migrationobject()[e])},self.setRightArrow=function(){var e=$(".siebui-d2p-inner-container").width()/$(".siebui-d2p-connection-tile").width()-1;self.connections().length>0&&(self.connections().length<=Math.round(e)||lastPageClick?$("#connectionRightArrow").hide():$("#connectionRightArrow").show(),self.sliderLimit=$(".siebui-d2p-inner-container").width()-self.connections().length*$(".siebui-d2p-connection-tile").width()-e*20,self.slideMove=($(".siebui-d2p-inner-container").width()/$(".siebui-d2p-connection-tile").width()-1)*$(".siebui-d2p-connection-tile").width())},self.setLeftArrow=function(){var e=$(".siebui-d2p-inner-container").width()/$(".siebui-d2p-connection-tile").width()-1;self.connections().length>0&&(self.connections().length<=Math.round(e)||lastPageClick?$("#connectionLeftArrow").hide():$("#connectionLeftArrow").show(),self.sliderLimit=$(".siebui-d2p-inner-container").width()-self.connections().length*$(".siebui-d2p-connection-tile").width()-e*20,self.slideMove=($(".siebui-d2p-inner-container").width()/$(".siebui-d2p-connection-tile").width()-1)*$(".siebui-d2p-connection-tile").width())};var leftPageCount=0,rightPageCount=0,lastPageRecords,lastPageClick=!1;self.setScroll=function(){var e=$("#connectionTileContainer");isRTL()?self.setLeftArrow():self.setRightArrow();var t=$("#connectionTileContainer").width()/$(".siebui-d2p-inner-container").width();$("#connectionRightArrow").click(function(){var t=$("#connectionTileContainer").width()/$(".siebui-d2p-inner-container").width();$(window).width()>smallScreenMaxWidth?t%1>.3?(isRTL()||(t%1>.3&&t%1<.6?lastPageRecords=1:t%1>.6&&t%1<.9?lastPageRecords=2:lastPageRecords=3),t=Math.ceil(t)):t=Math.floor(t):t%1>.5?(isRTL()||(lastPageRecords=1),t=Math.ceil(t)):(isRTL()||(lastPageRecords=2),t=Math.floor(t)),leftPageCount-=1,$("#connectionLeftArrow").show();if(isRTL()){var n=parseInt(e.css("right")),r=n+$(".siebui-d2p-inner-container").width();e.stop(!1,!0).animate({right:r},{duration:300}),r>=-t&&($("#connectionRightArrow").hide(),e.stop(!1,!0).animate({right:0},{duration:300}))}else{var n=parseInt(e.css("left"));if(leftPageCount-1<=-t){if($(window).width()>smallScreenMaxWidth){if(lastPageRecords)var i=n-$(".siebui-d2p-inner-container").width()*lastPageRecords/3}else if(lastPageRecords)var i=n-$(".siebui-d2p-inner-container").width()*lastPageRecords/2;lastPageClick=!0,e.stop(!1,!0).animate({left:i},{duration:300}),setTimeout(function(){leftPageCount-1<=-t&&$("#connectionRightArrow").hide()},200)}else{var i=n-$(".siebui-d2p-inner-container").width();e.stop(!1,!0).animate({left:i},{duration:300})}}}),$("#connectionLeftArrow").click(function(){var t=$("#connectionTileContainer").width()/$(".siebui-d2p-inner-container").width();$(window).width()>smallScreenMaxWidth?t%1>.3?(isRTL()&&(t%1>.3&&t%1<.6?lastPageRecords=1:t%1>.6&&t%1<.9?lastPageRecords=2:lastPageRecords=3),t=Math.ceil(t)):t=Math.floor(t):t%1>.5?(isRTL()&&(lastPageRecords=1),t=Math.ceil(t)):(isRTL()&&(lastPageRecords=2),t=Math.floor(t)),leftPageCount+=1;var n=$(".siebui-d2p-inner-container").width()/$(".siebui-d2p-connection-tile").width()-1;self.connections().length>0&&(self.connections().length<=Math.round(n)?$("#connectionRightArrow").hide():$("#connectionRightArrow").show());if(isRTL()){var r=parseInt(e.css("right"));if(leftPageCount>=t-1){if($(window).width()>smallScreenMaxWidth){if(lastPageRecords)var i=r-$(".siebui-d2p-inner-container").width()*lastPageRecords/3}else if(lastPageRecords)var i=r-$(".siebui-d2p-inner-container").width()*lastPageRecords/2;e.stop(!1,!0).animate({right:i},{duration:300}),$("#connectionLeftArrow").hide()}else{var i=r-$(".siebui-d2p-inner-container").width();e.stop(!1,!0).animate({right:i},{duration:300})}}else{var r=parseInt(e.css("left"));leftPageCount>=0&&lastPageClick&&lastPageRecords?(lastPageClick=!1,$(window).width()>smallScreenMaxWidth?e.stop(!1,!0).animate({left:"+="+$(".siebui-d2p-inner-container").width()*lastPageRecords/3},{duration:300}):e.stop(!1,!0).animate({left:"+="+$(".siebui-d2p-inner-container").width()*lastPageRecords/2},{duration:300})):e.stop(!1,!0).animate({left:"+="+$(".siebui-d2p-inner-container").width()},{duration:300}),setTimeout(function(){leftPageCount>=0&&$("#connectionLeftArrow").hide()},200)}})},self.resetScroll=function(){leftPageCount=0,rightPageCount=0,lastPageClick=!1,isRTL()?($("#connectionTileContainer").css({right:"0px"}),self.setLeftArrow(),$("#connectionRightArrow").hide()):($("#connectionTileContainer").css({left:"0px"}),self.setRightArrow(),$("#connectionLeftArrow").hide())},self.saveConnection=function(){self.popupDialog=!0,$("#connectionDialog").remove(),$('<div id="connectionDialog"> </div>').appendTo("#addConnection");var e=isRTL()?"left bottom":"right bottom",t=isRTL()?"left top":"right top";$("#connectionDialog").dialog({dialogClass:"no-close",title:i18n_resources.INTL_CONNECTION_CREATE||"New Connection",width:650,height:200,modal:!0,position:{my:t,at:e,of:"#addConnection"},buttons:[{text:i18n_resources.INTL_OK_TEXT||"Ok",click:function(){if(validateInputFields())if($("#name").val()&&$("#end-point").val()&&$.trim($("#name").val())!=""){var e=$.trim($("#name").val());$("#name").val(e);var t=$.trim($("#end-point").val()),n=/^(http|https):\/\/[^ "]+$/;if(!n.test(t)){var r=confirm(i18n_resources.INTL_CONN_INVALID_ENDPOINT||"The Endpoint URL that you have entered does not appear to be valid. Click OK if you are sure, it is valid. Click Cancel to edit it"
);if(!r){$("#end-point").focus();return}}t.endsWith("/")&&(t=t.substr(0,t.length-1),$("#end-point").val(t));var i=$.trim($("#username").val());$("#username").val(i);var s=$.trim($("#ts-data").val());$("#ts-data").val(s);var o=$.trim($("#ts-index").val());$("#ts-index").val(o);var u=$.trim($("#ts-page16").val());$("#ts-page16").val(u);var a=$.trim($("#ts-page32").val());$("#ts-page32").val(a);var f=$("input:radio[name=codeFlag]:checked").val();self.addConnection(e,t,i,s,o,u,a,f),$(this).dialog("close"),$("#connectionDialog").remove()}else alert(i18n_resources.INTL_CONNECTION_MANDATORY_ERROR||"Name and Endpoint are mandatory fields")},"class":"btn"},{text:i18n_resources.INTL_CANCEL_TEXT||"Cancel",click:function(){$(this).dialog("close"),$("#connectionDialog").remove()},mousedown:function(e){e.preventDefault(),l=!0,$(".ui-dialog-content").dialog("close"),$("#connectionDialog").remove()},"class":"btn"}]});var n=i18n_resources.INTL_LABEL_UNICODE_DB||"UNICODE Database",r=i18n_resources.INTL_LABEL_NON_UNICODE_DB||"Non-UNICODE Database",i=i18n_resources.INTL_PLACEHOLDER_USERNAME||"Database Schema Owner User ID",s=i18n_resources.INTL_APP_DB2LUW||"Applicable only for DB2 LUW",o=i18n_resources.INTL_APP_ORC_DB2LUW||"Applicable only for Oracle and DB2 LUW",u=i18n_resources.INTL_CONN_URI||"REST Endpoint URI of the connection",a=i18n_resources.INTL_CONN_NAME||"Name of the Connection",f='<div><label class="siebui-d2p-popup-label siebui-d2p-required" for="name" data-res="INTL_LABEL_NAME"></label><input id="name" class="siebui-d2p-popup-item siebui-d2p-validate-input" type="text" autofocus title = "'+a+'" placeholder = "'+a+'" ></div>'+'<div><label class="siebui-d2p-popup-label siebui-d2p-required" for="end-point" data-res="INTL_CONNECTION_REST_ENDPOINT"></label>'+'<input class="siebui-d2p-popup-item siebui-d2p-validate-input" id="end-point" type="text" title = "'+u+'" placeholder = "'+u+'"></div>'+'<div class="siebui-d2p-section-header"><label data-res="INTL_APP_DBINFO"></label></div>'+'<div><label class="siebui-d2p-popup-label" for="username" data-res="INTL_CONN_SCHEMA_USER"></label>'+'<input id="username" class="siebui-d2p-popup-item siebui-d2p-validate-input" type="text" autofocus title = "'+i+'" placeholder = "'+i+'" ></div>'+'<div><label class="siebui-d2p-popup-label" for="ts-data" data-res="INTL_CONN_TBLSPC_DATA"></label>'+'<input class="siebui-d2p-popup-item siebui-d2p-validate-input" id="ts-data" title = "'+o+'" placeholder = "'+o+'" type="text"></div>'+'<div><label class="siebui-d2p-popup-label" for="ts-index" data-res="INTL_CONN_TBLSPC_INDEX"></label>'+'<input class="siebui-d2p-popup-item siebui-d2p-validate-input" id="ts-index" title = "'+o+'" placeholder = "'+o+'" type="text"></div>'+'<div><label class="siebui-d2p-popup-label" for="ts-page16" data-res="INTL_CONN_TBLSPC_PAGE16"></label>'+'<input class="siebui-d2p-popup-item siebui-d2p-validate-input" id="ts-page16" title = "'+s+'" placeholder ="'+s+'" type="text"></div>'+'<div><label class="siebui-d2p-popup-label" for="ts-page32" data-res="INTL_CONN_TBLSPC_PAGE32"></label>'+'<input class="siebui-d2p-popup-item siebui-d2p-validate-input" id="ts-page32" title = " '+s+'" placeholder = "'+s+'" type="text"></div>'+'<div><label class="siebui-d2p-popup-label" data-res="INTL_LABEL_DB_ENCODING"></label>'+'<input type="radio" class="siebui-d2p-popup-radio-dispr" id="unicodeflag" name="codeFlag" value="true">'+n+"<br/>"+'<input type="radio" class="siebui-d2p-popup-radio-displ siebui-d2p-popup-radio-dispr" id="nonunicodeflag" name="codeFlag" value="false">'+r+"<br/></div>";$("#connectionDialog").html(f),$("#name").blur(function(e){l||validateInput(this.value,"Connection Name","connectionDialog",this.id)}),$("#end-point").blur(function(){l||validateInput(this.value,"End Point URL","connectionDialog",this.id)}),$("#ts-data").blur(function(){l||validateInput(this.value,"Tablespace Data","connectionDialog",this.id)}),$("#ts-index").blur(function(){l||validateInput(this.value,"Tablespace Index","connectionDialog",this.id)}),$("#ts-page16").blur(function(){l||validateInput(this.value,"Tablespace Page16","connectionDialog",this.id)}),$("#ts-page32").blur(function(){l||validateInput(this.value,"Tablespace Page32","connectionDialog",this.id)}),$("input:radio[name=codeFlag]:checked").blur(function(){l||validateInput(this.value,"unicode","connectionDialog",this.name)}),$("#name").focus();var l=!1;htmlLanguageParse("connectionDialog")}}function b64EncodeUnicode(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}function ExecutionViewModel(){var e=this;e.executionList=[],e.execresourceList={},e.serverResponse=[],e.runningMigrationPlan=[],e.fullRRExecList={},e.incrementRRExecList={},e.incrementSeedExecList={},e.DRExecList={},e.fileMigration={},e.IRRWatermark=ko.observable(),e.schemaExecList={},e.getAllExecutionplan=function(){$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Execution",type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!0,success:function(t){$("#maskoverlay").addClass("hide");if(t&&t.status)if(t["status"].toLowerCase()=="error")if(typeof i18n_resources!="undefined"&&t.msgKey){if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey];if(t.msgParamValueArr)for(var n=0;n<t.msgParamValueArr.length;n++)validationMessage=validationMessage.replace("%"+(n+1),t.msgParamValueArr[n])}else t.msg?validationMessage=t.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")&&signOut()}else t.msg?alert(t.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(t.data){t=t.data,t.sort(function(e,t){return e.start&&t.start?new Date(e.start.replace(/-/g,"/"))-new Date(t.start.replace(/-/g,"/"
)):e.start?-1:t.start?1:0}),e.executionList=[],e.execresourceList={},e.runningMigrationPlan=[],e.fullRRExecList={},e.DRExecList={},e.incrementRRExecList={},e.incrementSeedExecList={},e.fileMigration={},e.schemaExecList={};for(var r=0;r<t.length;r++){var i={},s,o;i.id=t[r].planId,t[r].txnId&&t[r].txnId!=""?(s=t[r].status,o="refresh",e.runningMigrationPlan.push(t[r].planId)):(t[r].resources.length>0?o="Run Now":o="No resources",t[r].txnId=t[r].isAuthReq,s=""),i.cell=[t[r].name,t[r].version,s,o,t[r].srcConnName,t[r].trgtConnName,t[r].txnId,t[r].start,t[r].end,t[r].packageName],i.txnId=t[r].txnId,e.runningMigrationPlan.indexOf(i["id"])!=-1?e.executionList.unshift(i):e.executionList.push(i),e.execresourceList[t[r].planId]=[];for(var u=0;u<t[r].resources.length;u++){var a={};t[r].resources[u].rowId&&t[r].resources[u]["rowId"]!=""?a.id=t[r].resources[u].rowId:a.id="unknown",t[r].resources[u].txnResName==="Runtime Repository Data Service"&&(e.fullRRExecList[t[r].planId]={isFullRepository:!0}),t[r].resources[u].txnResName==="Incremental Runtime Repository Data Service"&&(e.incrementRRExecList[t[r].planId]={isIRR:!0}),t[r].resources[u].txnResName==="Schema Service"&&(e.schemaExecList[t[r].planId]={isSchema:!0,tblspcName:t[r].tblspcName,tblspcInd:t[r].tblspcInd,tblspcPage16:t[r].tblspcPage16,tblspcPage32:t[r].tblspcPage32,executionUsername:t[r].schemaUserName,unicode:t[r].unicode}),t[r].resources[u].txnResName==="Design Repository Data Service"&&(e.DRExecList[t[r].planId]={isDR:!0}),t[r].resources[u].txnResName==="Incremental Application Workspace Data Service"&&(e.incrementSeedExecList[t[r].planId]={isSeed:!0}),t[r].resources[u].txnResName==="File Prepare And Deploy"&&(e.fileMigration[t[r].planId]={isFileMig:!0}),a.name=t[r].resources[u].txnResName,a.operation=t[r].resources[u].method,a.status=t[r].resources[u].status,a.action="",a.sequenceNo=t[r].resources[u].sequenceNo,a.start=t[r].resources[u].start,a.end=t[r].resources[u].end,a.log="Get Log",e.execresourceList[t[r].planId].push(a)}}$("#execution-table")[0].addJSONData(e.executionList),e.executionList[0]&&e.runningMigrationPlan.indexOf(e.executionList[0].id)!=-1&&$("#"+e.executionList[0].id).click(),$(".siebui-d2p-runnow").click(function(t){t.stopPropagation();var n=$(this).attr("id").replace("runNow_",""),r=$(this).closest("tr").find("td").eq(1).attr("title")||"this",i=!0,s=$(this).attr("type");s=="importExport"?e.incrementRRExecList[n]&&e.incrementRRExecList[n].isIRR==1?(t.preventDefault(),e.runMigartionPlan(n,s)):e.runExecution(null,null,n,null,null,null,null):(t.preventDefault(),e.runMigartionPlan(n,s))})}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})},e.bindEvents=function(){$(".siebui-d2p-getlog").click(function(t){t.stopPropagation(),resId=$(this).attr("id").replace("getLog_",""),planId=$(this).closest($("table")).attr("id").replace("execution-table_","").replace("_t",""),transId=$(this).closest($("table#execution-table")).find($("tr#"+planId)).find("div.siebui-d2p-stop-exec").attr("id").replace("getExecutionStatus_",""),e.getLogInfo(resId,transId)}),$(".siebui-d2p-stop-exec").click(function(t){t.stopPropagation(),archiveId=$(this).attr("id").replace("getExecutionStatus_",""),strPlanName=$(this).parent().siblings()[1].innerHTML,strStartDate=$(this).parent().siblings()[7].innerHTML,stopCfmMsg=i18n_resources.INTL_EXEC_STOP_CONFIRM_MSG||"Are you sure you want to stop the execution?",resultVal=confirm(stopCfmMsg),resultVal&&e.stopExecution(archiveId,strPlanName,strStartDate)}),$(".siebui-d2p-refresh-resource").click(function(t){t.stopPropagation(),resId=$(this).attr("id").replace("getResorceStatus_",""),planId=$(this).closest($("table")).attr("id").replace("execution-table_","").replace("_t",""),transId=$(this).closest($("table#execution-table")).find($("tr#"+planId)).find("div.siebui-d2p-stop-exec").attr("id").replace("getExecutionStatus_",""),e.refreshStatus(transId,"","migrationPlan")})},e.runMigartionPlan=function(t,n){var r=i18n_resources.INTL_CANCEL_TEXT||"Cancel",i=i18n_resources.INTL_OK_TEXT||"Ok";$("#executionDialog").remove(),$('<div id="executionDialog"> </div>').appendTo("#runNow_"+t);var s=t,o="",u="",a="",f="",l="",c="",h="",p="",d="",v="",m="",g="",y="",b="",w=i18n_resources.INTL_PLACEHOLDER_USERNAME||"Database Schema Owner User ID",E=i18n_resources.INTL_PLACEHOLDER_PASSWORD||"Database Schema Owner Password",S=i18n_resources.INTL_PLACEHOLDER_PACKAGE||"Provide the Package Filename with extension",x=i18n_resources.INTL_PLACEHOLDER_ACTIVATION||"Provide the Activation Date",T=i18n_resources.INTL_PLACEHOLDER_WATERMARK||"Provide the watermark filename with extension",N=i18n_resources.INTL_LABEL_UNICODE_DB||"UNICODE Database",C=i18n_resources.INTL_LABEL_NON_UNICODE_DB||"Non-UNICODE Database",k=i18n_resources.INTL_WORKSPACE_VERSION_NUMBER||"Workspace Version",L=i18n_resources.INTL_VERSION_DISABLED_INPUT_CTRL_TITLE||"Click on Get Workspace Details to choose the Workspace Version. Otherwise LATEST version will be migrated",A=i18n_resources.INTL_APP_DB2LUW||"Applicable only for DB2 LUW"
,O=i18n_resources.INTL_APP_ORC_DB2LUW||"Applicable only for Oracle and DB2 LUW";e.schemaExecList[t]!=null&&(d=e.schemaExecList[t].tblspcName,v=e.schemaExecList[t].tblspcInd,m=e.schemaExecList[t].tblspcPage16,g=e.schemaExecList[t].tblspcPage32,y=e.schemaExecList[t].unicode,u=e.schemaExecList[t].executionUsername);switch(n){case"schemaImport":o='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_LABEL_PACKAGENAME"></label><input class="siebui-d2p-popup-item mandateField" id="packageFilename" value="sampleimport.zip" type="text" placeholder="'+S+'"></div>'+'<div class="siebui-d2p-section-header"><label data-res="INTL_EXEC_DBINFO"></label></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_CONN_SCHEMA_USER"></label>'+'<input id="executionUsername" class="siebui-d2p-popup-item siebui-d2p-validate-input " type="text" autofocus placeholder="'+w+'"></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_CONN_SCHEMA_PASSWORD"></label>'+'<input class="siebui-d2p-popup-item mandateField" id="executionPassword" type="password" placeholder="'+E+'">'+'<button class="control-icon siebui-icon-simulate siebui-icon-unlock" id="togglePasswordBtn" title="Show Password"></button></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label" data-res="INTL_LABEL_PRE_ENCRYPTED_PWD"></label>'+'<input class="siebui-d2p-checkbox" type="checkbox" id="isPwdPreEncrypted" name="PreEncrypted"></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label" data-res ="INTL_CONN_TBLSPC_DATA"></label>'+'<input class="siebui-d2p-popup-item" id="ts-data-edit" type="text" placeholder = "'+O+'" ></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label" data-res="INTL_CONN_TBLSPC_INDEX"></label>'+'<input class="siebui-d2p-popup-item" id="ts-index-edit" type="text" placeholder ="'+O+'" ></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label" data-res="INTL_CONN_TBLSPC_PAGE16"></label>'+'<input class="siebui-d2p-popup-item" id="ts-page16-edit" type="text" placeholder = "'+A+'"  ></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label"  data-res="INTL_CONN_TBLSPC_PAGE32"></label>'+'<input class="siebui-d2p-popup-item" id="ts-page32-edit" type="text" placeholder = "'+A+'" ></div> '+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_LABEL_DB_ENCODING"></label>'+'<div><input type="radio" class="siebui-d2p-popup-radio-dispr" id="unicodeflag" name="codeFlag" value="true">'+N+"<br/>"+'<input type="radio" class="siebui-d2p-popup-radio-dispr" id="nonunicodeflag" name="codeFlag" value="false">'+C+"</div></div>";break;case"import":o='<label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_LABEL_PACKAGENAME"></label><input class="siebui-d2p-popup-item mandateField" id="packageFilename" value="sampleimport.zip" type="text" placeholder="'+S+'"><br/>';break;case"export":o='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_LABEL_PACKAGENAME"></label><input class="siebui-d2p-popup-item mandateField" id="packageFilename" value="sampleexport.zip" type="text" placeholder="'+S+'"></div>';if(e.incrementRRExecList[t]||e.incrementSeedExecList[t]||e.fileMigration[t])e.incrementRRExecList[t]&&e.incrementRRExecList[t].isIRR&&sessionStorage.getItem("repoUpgraded")==="true"?(o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_TITLE_WATERMARK"></label><input class="siebui-d2p-popup-item mandateField siebui-d2p-input-watermark" id="watermarkName" value="samplewatermark.txt" type="text" placeholder="'+T+'">'+'<button id="getVersionNum" class="btn siebui-d2p-getlog" type="button" data-res="INTL_WORKSPACE_DETAILS">Get Workspace Details</button></div>',o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_WORKSPACE_BRANCH_NAME"></label><input class="siebui-d2p-popup-item mandateField" disabled id="watermarkbranchname" type="text"></div>',o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_WORKSPACE_VERSION_NUMBER"></label><input title="'+L+'" disabled class="siebui-d2p-popup-item mandateField" id="versionNumber" type="number" placeholder="'+"LATEST"+'"></div>'):o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_TITLE_WATERMARK"></label><input class="siebui-d2p-popup-item mandateField" id="watermarkName" value="samplewatermark.txt" type="text" placeholder="'+T+'"></div>';e.fullRRExecList[t]&&e.fullRRExecList[t].isFullRepository&&sessionStorage.getItem("repoUpgraded")==="true"&&(o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_WORKSPACE_BRANCH_NAME"></label><select  class="siebui-d2p-popup-item mandateField" id="watermarkbranchnameFullRR" type="text" data-bind="options: workspaces,optionsText: "name",value: wsNameSelected"></select></div>',o+='<div class="siebui-d2p-input-ctrl siebui-d2p-input-ctrl-mar"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_WORKSPACE_VERSION_NUMBER"></label><input class="siebui-d2p-popup-item mandateField" id="versionNumberFullRR" type="number" min="0" data-bind="value: wsVersionSelected, attr: {max: wsMaxVersion}"></div>',o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label" data-res="INTL_WORKSPACE_LANGUAGES"></label><input class="siebui-d2p-workspace-lang" style="border:none"  disabled id="wsLanguagesFullRR"></div>');break;case"importExport":o="",e.incrementRRExecList[t]&&e.incrementRRExecList[t].isIRR&&sessionStorage.getItem("repoUpgraded")==="true"&&(o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_WORKSPACE_BRANCH_NAME"></label><input class="siebui-d2p-popup-item mandateField" disabled id="watermarkbranchname" type="text"></div>'
,o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_WORKSPACE_VERSION_NUMBER"></label><input disabled class="siebui-d2p-popup-item mandateField" id="versionNumber" type="number" placeholder="'+k+'"></div>');break;case"schemaImportExport":e.incrementRRExecList[t]&&e.incrementRRExecList[t].isIRR&&sessionStorage.getItem("repoUpgraded")==="true"&&(o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_WORKSPACE_BRANCH_NAME"></label><input class="siebui-d2p-popup-item mandateField" disabled id="watermarkbranchname" type="text"></div>',o+='<div class="siebui-d2p-input-ctrl siebui-d2p-input-ctrl-mar"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_WORKSPACE_VERSION_NUMBER"></label><input disabled class="siebui-d2p-popup-item mandateField" id="versionNumber" type="number" placeholder="'+k+'"></div>'),e.fullRRExecList[t]&&e.fullRRExecList[t].isFullRepository&&sessionStorage.getItem("repoUpgraded")==="true"&&(o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_WORKSPACE_BRANCH_NAME"></label><select  class="siebui-d2p-popup-item mandateField" id="watermarkbranchnameFullRR" type="text" data-bind="options: workspaces,optionsText: "name",value: wsNameSelected"></select></div>',o+='<div class="siebui-d2p-input-ctrl siebui-d2p-input-ctrl-mar"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_WORKSPACE_VERSION_NUMBER"></label><input class="siebui-d2p-popup-item mandateField" id="versionNumberFullRR" type="number" min="0" data-bind="value: wsVersionSelected, attr: {max: wsMaxVersion}"></div>',o+='<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label" data-res="INTL_WORKSPACE_LANGUAGES"></label><input class="siebui-d2p-workspace-lang" style="border:none"  disabled id="wsLanguagesFullRR"></div>'),o+='<div class="siebui-d2p-section-header"><label data-res="INTL_EXEC_DBINFO"></label></div><div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_CONN_SCHEMA_USER"></label><input id="executionUsername" class="siebui-d2p-popup-item siebui-d2p-validate-input mandateField" type="text" autofocus placeholder="'+w+'"></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_CONN_SCHEMA_PASSWORD"></label>'+'<input class="siebui-d2p-popup-item mandateField" id="executionPassword" type="password" placeholder="'+E+'">'+'<button class="control-icon siebui-icon-simulate siebui-icon-unlock" id="togglePasswordBtn" title="Show Password"></button></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label" data-res="INTL_LABEL_PRE_ENCRYPTED_PWD"></label>'+'<input class="siebui-d2p-checkbox" type="checkbox" id="isPwdPreEncrypted" name="PreEncrypted"></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label" data-res = "INTL_CONN_TBLSPC_DATA"></label>'+'<input class="siebui-d2p-popup-item" id="ts-data-edit"  type="text" placeholder = "'+O+'" ></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label" data-res="INTL_CONN_TBLSPC_INDEX"></label>'+'<input class="siebui-d2p-popup-item" id="ts-index-edit"  type="text" placeholder ="'+O+'"></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label" data-res="INTL_CONN_TBLSPC_PAGE16"></label>'+'<input class="siebui-d2p-popup-item" id="ts-page16-edit"  type="text" placeholder ="'+A+'" ></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label"  data-res="INTL_CONN_TBLSPC_PAGE32"></label>'+'<input class="siebui-d2p-popup-item" id="ts-page32-edit"  type="text" placeholder ="'+A+'" ></div>'+'<div class="siebui-d2p-input-ctrl"><label class="siebui-d2p-popup-label siebui-d2p-required" data-res="INTL_LABEL_DB_ENCODING"></label>'+'<div><input type="radio" class="siebui-d2p-popup-radio-dispr" id="unicodeflag" name="codeFlag" value="true">'+N+"<br/>"+'<input type="radio" class="siebui-d2p-popup-radio-dispr" id="nonunicodeflag" name="codeFlag" value="false">'+C+"</div></div>"}$("#executionDialog").dialog({dialogClass:"no-close",title:i18n_resources.INTL_EXECUTION_DETAILS||"Execution Details",width:650,height:300,modal:!0,position:{my:"middle top",at:"middle top",of:".siebui-d2p-grid-execution"},top:275,buttons:[{text:i,click:function(){if(validateInputFields()){var r=!0;switch(n){case"schemaImport":u=$("#executionUsername").val(),a=$("#executionPassword").val(),f=$("#packageFilename").val(),c=h,p=$("input:radio[name=codeFlag]:checked").val();if(a==""||f==""||u==""||typeof p=="undefined")r=!1;b=$("input:checkbox[name=PreEncrypted]:checked").val(),b==="on"&&(b=!0),typeof b=="undefined"&&(b=!1),d=$("#ts-data-edit").val(),v=$("#ts-index-edit").val(),m=$("#ts-page16-edit").val(),g=$("#ts-page32-edit").val();break;case"import":f=$("#packageFilename").val(),c=h,f==""&&(r=!1);break;case"export":f=$("#packageFilename").val(),l=$("#watermarkName").val(),versionNumber=parseInt($("#versionNumber").val());if(f==""||l=="")r=!1;e.fullRRExecList[t]&&e.fullRRExecList[t].isFullRepository&&(l=$("#watermarkbranchnameFullRR").val()+";"+wsLanguagesFRR,versionNumber=parseInt($("#versionNumberFullRR").val()));if($("#versionNumber")&&versionNumber!=""){var i=parseInt($("#versionNumber").attr("min")),o=parseInt($("#versionNumber").attr("max"));if(versionNumber<i||versionNumber>o){alert(i18n_resources.INTL_WORKSPACE_VERSION_NUMBER_INVALID_MES||"You have chosen an invalid Workspace Version."),$("#versionNumber").focus();return}}break;case"importExport":c=h;break;case"schemaImportExport":u=$("#executionUsername").val(),a=$("#executionPassword").val(),versionNumber=parseInt($("#versionNumber").val()),e.fullRRExecList[t]&&e.fullRRExecList[t].isFullRepository&&(l=$("#watermarkbranchnameFullRR").val()+";"+wsLanguagesFRR,versionNumber=parseInt($("#versionNumberFullRR").val())
),c=h,p=$("input:radio[name=codeFlag]:checked").val(),d=$("#ts-data-edit").val(),v=$("#ts-index-edit").val(),m=$("#ts-page16-edit").val(),g=$("#ts-page32-edit").val();if(a==""||u==""||typeof p=="undefined")r=!1;b=$("input:checkbox[name=PreEncrypted]:checked").val(),b==="on"&&(b=!0),typeof b=="undefined"&&(b=!1);if($("#versionNumber")&&versionNumber!=""){var i=parseInt($("#versionNumber").attr("min")),o=parseInt($("#versionNumber").attr("max"));if(versionNumber<i||versionNumber>o){alert(i18n_resources.INTL_WORKSPACE_VERSION_NUMBER_INVALID_MES||"You have chosen an invalid Workspace Version."),$("#versionNumber").focus();return}}}r?($(".ui-datepicker").hide(),e.runExecution(u,a,s,f,l,c,p,b,d,v,m,g)):alert(i18n_resources.INTL_ERROR_MANDATORY||"Mandatory fields cannot be empty")}},"class":"btn"},{text:r,click:function(){$(this).dialog("close"),$("#executionDialog").remove(),$("#data").show(),$(".ui-datepicker").hide()},mousedown:function(e){e.preventDefault(),M=!0,$(".ui-dialog-content").dialog("close"),$("#executionDialog").remove(),$("#data").show()},"class":"btn"}],create:function(){(n=="schemaImportExport"||n=="importExport")&&e.incrementRRExecList[s]&&e.incrementRRExecList[s].isIRR&&($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Execution?planId="+s+"&method=getIRRVersions",type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!0,success:function(t){$("#maskoverlay").addClass("hide");if(t.status.toLowerCase()=="error"){$("#executionDialog").dialog("close"),$("#executionDialog").remove();if(typeof i18n_resources!="undefined"&&t.msgKey){if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey];if(t.msgParamValueArr)for(var n=0;n<t.msgParamValueArr.length;n++)validationMessage=validationMessage.replace("%"+(n+1),t.msgParamValueArr[n])}else t.msg?validationMessage=t.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")&&signOut()}else if(t.msg)alert(t.msg);else{var r=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(r)}return}$(".siebui-version")&&$(".siebui-version").remove();var i;t.targetVersion===t.sourceVersion?i=i18n_resources.INTL_VERSION_LB_UB_SAME_MES||"There is only one version available to migrate":(i=i18n_resources.INTL_WORKSPACE_VERSION_NUMBER_MES||"Provide the version number between <b>%1</b> \nto <b>%2</b>",i=i.replace("%1",t.targetVersion).replace("%2",t.sourceVersion));var s='<span class="siebui-version">'+i+"</span>";e.IRRWatermark=t.watermark,$("#versionNumber").after(s),$("#versionNumber").removeAttr("disabled"),$("#versionNumber").val(t.sourceVersion),$("#watermarkbranchname").val(t.wsBranchName),$("#versionNumber").attr({min:t.targetVersion,max:t.sourceVersion,title:i18n_resources.INTL_VERSION_ENABLED_INPUT_CTRL_TITLE||"Choose the Workspace Version. Otherwise LATEST version will be migrated"})},error:function(e,t,n){var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");$("#maskoverlay").addClass("hide")}}));if(n=="schemaImportExport"||n=="export"&&e.fullRRExecList[t]&&e.fullRRExecList[t].isFullRepository)$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Plan?sourceConnId="+s+"&targetConnId="+"fullRRExec"+"&method=getWorkspaceInfo",type:"GET",crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},dataType:"json",async:!0,success:function(e){$("#maskoverlay").addClass("hide");if(e&&e.status)if(e["status"].toLowerCase()=="error"){if(typeof i18n_resources=="undefined"||!e.msgKey)return e.msg?(alert(e.msg),!1):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes),!1);if(i18n_resources[e.msgKey]){validationMessage=i18n_resources[e.msgKey];if(e.msgParamValueArr)for(var t=0;t<e.msgParamValueArr.length;t++)validationMessage=validationMessage.replace("%"+(t+1),e.msgParamValueArr[t])}else e.msg?validationMessage=e.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage);if(e["msgKey"]!="INTL_SESSION_EXP"&&e["msgKey"]!="INTL_INVL_USR")return!1;signOut()}else{$(".siebui-version")&&$(".siebui-version").remove(),e.data.languages&&(wsLanguagesFRR=e.data.languages,e.data.languages=e.data.languages.split(",").join(" "));var n,r;e.data.defaultworkspacename&&(r=e.data.defaultworkspacename.defaultworkspacename);var i=Object.keys(e.data.workspace);i.forEach(function(e){var t=document.createElement("option");t.value=e,t.text=e,document.querySelector("select#watermarkbranchnameFullRR").appendChild(t)}),document.querySelector("select#watermarkbranchnameFullRR").addEventListener("change",function(t){t.stopPropagation();var n=document.querySelector("select#watermarkbranchnameFullRR").value;document.querySelector("input#versionNumberFullRR").value=e.data.workspace[n],document.querySelector("span#versionnum").textContent="Provide the version number between 0 to "+e.data.workspace[n],document.querySelector("input#versionNumberFullRR").setAttribute("max",e.data.workspace[n])});var s="0",o=e.data.workspace.MAIN;o===s?n=i18n_resources.INTL_VERSION_LB_UB_SAME_MES||"There is only one version available to migrate"
:(n=i18n_resources.INTL_WORKSPACE_VERSION_NUMBER_MES||"Provide the version number between <b>%1</b> \nto <b>%2</b>",n=n.replace("%1",s).replace("%2",o));var u='<span class="siebui-version" id="versionnum">'+n+"</span>";$("#versionNumberFullRR").after(u),$("#versionNumberFullRR").removeAttr("disabled"),$("#versionNumberFullRR").val(o),$("#watermarkbranchnameFullRR").val(r),$("#wsLanguagesFullRR").val(e.data.languages),$("#versionNumberFullRR").attr({min:s,max:o,title:i18n_resources.INTL_VERSION_ENABLED_INPUT_CTRL_TITLE||"Choose the Workspace Version. Otherwise LATEST version will be migrated"})}},error:function(e,t,n){$("#maskoverlay").addClass("hide"),model.selected(!model.selected());var r=e.responseText?JSON.parse(e.responseText):"";if(!r||!r.msgKey||typeof i18n_resources=="undefined")return r&&r.msg?(alert(r.msg),!1):(alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time"),!1);if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage);if(r.msgKey!="INTL_SESSION_EXP"&&r.msgKey!="INTL_SRVR_401")return!1;signOut()}})}}),$("#executionDialog").html(o),u!==undefined&&u!=""&&($("#executionUsername").val(u),$("#executionUsername").attr("disabled","true")),d!==undefined&&d!=""&&($("#ts-data-edit").val(d),$("#ts-data-edit").attr("disabled","true")),v!==undefined&&v!=""&&($("#ts-index-edit").val(v),$("#ts-index-edit").attr("disabled","true")),m!==undefined&&m!=""&&($("#ts-page16-edit").val(m),$("#ts-page16-edit").attr("disabled","true")),g!==undefined&&g!=""&&($("#ts-page32-edit").val(g),$("#ts-page32-edit").attr("disabled","true")),y=="true"&&$("#unicodeflag").attr("checked","Y"),y=="false"&&$("#nonunicodeflag").attr("checked","Y"),y!==undefined&&y!=null&&y!=""&&($("#unicodeflag").attr("disabled","true"),$("#nonunicodeflag").attr("disabled","true")),$("#getVersionNum").on("click",function(t){$("#maskoverlay").removeClass("hide");var n=$("#watermarkName").val();$.ajax({url:baseUrl+"Execution?planId="+s+"&filename="+n+"&method=getIRRVersions",type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!0,success:function(t){$("#maskoverlay").addClass("hide");if(t.status.toLowerCase()=="error"){$("#executionDialog").dialog("close"),$("#executionDialog").remove();if(typeof i18n_resources!="undefined"&&t.msgKey){if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey];if(t.msgParamValueArr)for(var n=0;n<t.msgParamValueArr.length;n++)validationMessage=validationMessage.replace("%"+(n+1),t.msgParamValueArr[n])}else t.msg?validationMessage=t.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")&&signOut()}else if(t.msg)alert(t.msg);else{var r=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(r)}return}$(".siebui-version")&&$(".siebui-version").remove();var i;t.targetVersion===t.sourceVersion?i=i18n_resources.INTL_VERSION_LB_UB_SAME_MES||"There is only one version available to migrate":(i=i18n_resources.INTL_WORKSPACE_VERSION_NUMBER_MES||"Provide the version number between <b>%1</b> \nto <b>%2</b>",i=i.replace("%1",t.targetVersion).replace("%2",t.sourceVersion));var s='<span class="siebui-version">'+i+"</span>";e.IRRWatermark=t.watermark,$("#versionNumber").after(s),$("#versionNumber").removeAttr("disabled"),$("#versionNumber").val(t.sourceVersion),$("#watermarkbranchname").val(t.wsBranchName),$("#versionNumber").attr({min:t.targetVersion,max:t.sourceVersion,title:i18n_resources.INTL_VERSION_ENABLED_INPUT_CTRL_TITLE||"Choose the Workspace Version. Otherwise LATEST version will be migrated"})},error:function(e,t,n){var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");$("#maskoverlay").addClass("hide")}})}),$("#togglePasswordBtn").on("click",function(e){$("#togglePasswordBtn").hasClass("siebui-icon-unlock")?($("#togglePasswordBtn").removeClass("siebui-icon-unlock"),$("#togglePasswordBtn").addClass("siebui-icon-lock"),$("#togglePasswordBtn").prop("title","Hide Password"),$("#executionPassword").prop("type","text")):($("#togglePasswordBtn").removeClass("siebui-icon-lock"),$("#togglePasswordBtn").addClass("siebui-icon-unlock"),$("#togglePasswordBtn").prop("title","Show Password"),$("#executionPassword").prop("type","password"))}),$("#activationDate").datetimepicker({oneLine:!0,changeMonth:!0,changeYear:!0,minDate:0,onClose:function(e,t){if(e&&e!=""){var n=(new Date(e)).toISOString();h=n.replace("T"," "),h=h.split(".")[0]}$(".ui-button").focus()}}),$(".ui-datepicker").hide(),$("#executionUsername").blur(function(){M||validateInput(this.value,"User Name","executionDialog",this.id)});var M=!1;$("#executionUsername").focus(),htmlLanguageParse("executionDialog")},e.runExecution=function(t,n,r,i,s,o,u,a,f,l,c,h){var p=$("#versionNumber").val()||$("#versionNumberFullRR").val()||"LATEST",d={usrname:t,password:a==1?n:b64EncodeUnicode(n),isPwdPreEncrypted
:a,planid:r,packageFilename:i,watermarkName:s,activationDate:o,isUnicodeDatabase:u,SRN:sessionNumber,selectedVersion:p,watermark:e.IRRWatermark,tblspcName:f,tblspcInd:l,tblspcPage16:c,tblspcPage32:h};sessionNumber?($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Execution",type:"POST",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",data:JSON.stringify(d),async:!0,success:function(t){$("#maskoverlay").addClass("hide");if(t&&t.status)if(t["status"].toLowerCase()=="error")if(typeof i18n_resources!="undefined"&&t.msgKey){if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey];if(t.msgParamValueArr)for(var n=0;n<t.msgParamValueArr.length;n++)validationMessage=validationMessage.replace("%"+(n+1),t.msgParamValueArr[n])}else t.msg?validationMessage=t.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR"?signOut():t["msgKey"]=="INVALID_DATE"&&($("#activationDate").val(""),$("#activationDate").focus())}else t.msg?alert(t.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else{$("#executionDialog").remove(),e.runningMigrationPlan.push(r),$("#execution-table").collapseSubGridRow(r);if(t&&t.data){t=t.data;if(t.txnId&&t.txnId!=""){$("<div id=getExecutionStatus_"+t.txnId+'class="siebui-d2p-stop siebui-icon-stop"></div>').insertAfter("#runNow_"+r),$("#runNow_"+r).remove(),$("#resourcePackage_"+r).text(i);var s=$("#execution-table").jqGrid("getRowData",r);s.txnId=t.txnId,s.status=t.status,s.start=t.start,s.end=t.end,$("#execution-table").jqGrid("setRowData",r,s),e.execresourceList[r]=[];for(var o=0;o<t.resources.length;o++){var u={};u.id=t.resources[o].rowId,u.name=t.resources[o].txnResName,u.operation=t.resources[o].method,u.status=t.resources[o].status,u.action="",u.sequenceNo=t.resources[o].sequenceNo,u.start=t.resources[o].start,u.end=t.resources[o].end,u.log="Get Log",e.execresourceList[r].push(u)}}}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey=="INTL_DUPLICATE_SESSION")sessionWarningMessage();else if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})):sessionWarningMessage()},e.getLogInfo=function(t,n){$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Execution?rowId="+t+"&method=getLog&parentId="+n,type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",data:t,async:!0,success:function(r){$("#maskoverlay").addClass("hide");if(r&&r.status)if(r["status"].toLowerCase()=="error")if(typeof i18n_resources!="undefined"&&r.msgKey){if(i18n_resources[r.msgKey]){validationMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)validationMessage=validationMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?validationMessage=r.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(r["msgKey"]=="INTL_SESSION_EXP"||r["msgKey"]=="INTL_INVL_USR")&&signOut()}else r.msg?alert(r.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else $("#executionLog").show(),r&&r.data?($("#executionLogContent").html(r.data.log),$("#getResorceStatus_"+t).prev().html(r.data.status)):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time"),$(".close").click(function(){$("#executionLogContent").html(""),$("#executionLog").hide()}),$("#logRefresh").unbind("click"),$("#logRefresh").bind("click",function(){e.getLogInfo(t,n)});else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})},e.refreshStatus=function(t,n,r){if(t&&t!="unknown"){$("#maskoverlay").removeClass("hide");if(r=="migrationPlan")var i=baseUrl+"Execution?rowId="+t+"&method=planStatus";else var i=baseUrl+"Execution?rowId="+t+"&method=resourceStatus&parentId="+n;$.ajax({url:i,type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json"
,async:!0,success:function(n){$("#maskoverlay").addClass("hide");if(n&&n.status)if(n["status"].toLowerCase()=="error")if(typeof i18n_resources!="undefined"&&n.msgKey){if(i18n_resources[n.msgKey]){validationMessage=i18n_resources[n.msgKey];if(n.msgParamValueArr)for(var i=0;i<n.msgParamValueArr.length;i++)validationMessage=validationMessage.replace("%"+(i+1),n.msgParamValueArr[i])}else n.msg?validationMessage=n.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),n["msgKey"]=="INTL_EXECUTION_COMPLETE"&&e.getAllExecutionplan(),(n["msgKey"]=="INTL_SESSION_EXP"||n["msgKey"]=="INTL_INVL_USR")&&signOut()}else n.msg?alert(n.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(n&&n.data){n=n.data;if(r=="migrationPlan"){$("#execution-table").collapseSubGridRow(n.planId);var s=$("#execution-table").jqGrid("getRowData",n.planId);s.txnId=n.txnId,s.start=n.start,s.end=n.end,s.status=n.status,$("#execution-table").jqGrid("setRowData",n.planId,s),e.execresourceList[n.planId]=[];for(var o=0;o<n.resources.length;o++){var u={};u.id=n.resources[o].rowId,u.name=n.resources[o].txnResName,u.operation=n.resources[o].method,u.status=n.resources[o].status,u.action="",u.sequenceNo=n.resources[o].sequenceNo,u.start=n.resources[o].start,u.end=n.resources[o].end,u.log="Get Log",e.execresourceList[n.planId].push(u)}$("table#execution-table").find($("tr#"+n.planId)).find("td.sgcollapsed").trigger("click")}else if(n){var a="";n.status=="Running"?a=i18n_resources.INTL_LABEL_RUNNING||n.status:n.status=="Success"?a=i18n_resources.INTL_SUCCESS_STATUS||n.status:n.status=="Error"?a=i18n_resources.INTL_ERROR_STATUS||n.status:n.status=="Not Applicable"?a=i18n_resources.INTL_LABEL_NOTAPPLICABLE||n.status:n.status=="Not Started"?a=i18n_resources.INTL_LABEL_NOTSTARTED||n.status:a=n.status,$("#resorceStatus_"+t).html(a),n.status!="Not Started"&&$("#getLog_"+t).prop("disabled",!1);for(key in e.execresourceList)for(var o=0;o<e.execresourceList[key].length;o++)if(n.txnResId==e.execresourceList[key][o]["id"]){e.execresourceList[key][o].status=i18n_resources[n.status]||n.status,e.execresourceList[key][o].start=n.start,e.execresourceList[key][o].end=n.end;break}}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})}},e.stopExecution=function(e,t,n){var r={action:"stop",archiveId:e,SRN:sessionNumber};sessionNumber?($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Execution",type:"POST",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",data:JSON.stringify(r),async:!0,success:function(e){$("#maskoverlay").addClass("hide");if(e&&e.status)if(e["status"].toLowerCase()=="error")if(typeof i18n_resources!="undefined"&&e.msgKey){if(i18n_resources[e.msgKey]){validationMessage=i18n_resources[e.msgKey];if(e.msgParamValueArr)for(var r=0;r<e.msgParamValueArr.length;r++)validationMessage=validationMessage.replace("%"+(r+1),e.msgParamValueArr[r])}else e.msg?validationMessage=e.msg:validationMessage=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),e["msgKey"]=="INTL_SESSION_EXP"||e["msgKey"]=="INTL_INVL_USR"?signOut():e["msgKey"]=="INVALID_DATE"&&($("#activationDate").val(""),$("#activationDate").focus())}else e.msg?alert(e.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else dispMsg=i18n_resources.INTL_EXEC_STOP_SUCCESS||"The execution for the Migration Plan %1 was successfully stopped.",alertMsg=dispMsg.replace("%1",t+" - "+n),alert(alertMsg),executionViewModel.getAllExecutionplan();else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey=="INTL_DUPLICATE_SESSION")sessionWarningMessage();else if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})):sessionWarningMessage()}}function migrationReadSetAccordian
(){$(".siebui-accordionContentDBRead").show(),$(".siebui-accordionContentADMRead").show(),$(".siebui-accordionButtonRead").click(function(){var e=$(this);e.find(">:first-child").hasClass("siebui-icon-arrow-right")?(e.find(">:first-child").addClass("siebui-icon-arrow-down").removeClass("siebui-icon-arrow-right"),e.nextAll("fieldset").first().slideDown("normal"),e.addClass("on")):(e.find(">:first-child").addClass("siebui-icon-arrow-right").removeClass("siebui-icon-arrow-down"),e.nextAll("fieldset").first().slideUp("normal"),e.removeClass("on"))})}function MigrationplanViewModel(){var self=this;self.loadEditMode=!1,self.wsServiceName=ko.observable(""),self.getRRVersion=ko.observable(),self.migrationplans=ko.observableArray([]),self.connections=ko.observableArray([]),self.migrationplanResourcesDB=ko.observableArray([]),self.migrationplanResourcesADM=ko.observableArray([]),self.newmigrationplanResources=ko.observableArray([]),self.newmigrationplanResourcesDB=ko.observableArray([]),self.newmigrationplanResourcesADM=ko.observableArray([]),self.migrationPlansUpdate=new migrationplan,self.migrationObjectData=ko.observable(new fullRepObject),self.migrationObjectDataRead=ko.observable(new fullRepObject),self.migrationPlansSource=ko.observable(),self.migrationPlansDestination=ko.observable(),self.isSave=ko.observable(!0),self.refreshEnable=ko.observable(!0),self.popupDialog=ko.observableArray(null),self.sliderLimit=ko.observable(null),self.slideMove=ko.observable(null),self.selectedConnection=ko.observable(""),self.versionSubscribe="",self.setRRInfo=ko.observable(!1),self.newMigrationplan={id:ko.observable(0),name:ko.observable(""),objects:ko.observable([]),status:ko.observable(!0)},self.editMigrationPlanDetails={sourceId:"",destId:"",resources:[]};var cancelClicked=!1;self.disableDeleteMigrationPlan=function(){migrationFirstLoad&&($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Execution",type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!1,success:function(e){$("#maskoverlay").addClass("hide");if(e&&e.status)if(e["status"].toLowerCase()=="error")if(typeof i18n_resources!="undefined"&&e.msgKey){if(i18n_resources[e.msgKey]){validationMessage=i18n_resources[e.msgKey];if(e.msgParamValueArr)for(var t=0;t<e.msgParamValueArr.length;t++)validationMessage=validationMessage.replace("%"+(t+1),e.msgParamValueArr[t])}else e.msg?validationMessage=e.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(e["msgKey"]=="INTL_SESSION_EXP"||e["msgKey"]=="INTL_INVL_USR")&&signOut()}else e.msg?alert(e.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(e.data){e=e.data,executionViewModel.runningMigrationPlan=[];for(var n=0;n<e.length;n++)e[n].txnId&&e[n].txnId!=""&&executionViewModel.runningMigrationPlan.push(e[n].planId)}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}}));if(executionViewModel.runningMigrationPlan)for(var e=0;e<self.migrationplans().length;e++)executionViewModel.runningMigrationPlan.indexOf(self.migrationplans()[e].id())>-1?self.migrationplans()[e].deleteEnable(!1):self.migrationplans()[e].deleteEnable(!0)},self.nameDescriptionValidation=function(e){migrationEditScreen&&!cancelClicked?e=="name"?validateInput($("#migrationPlanName").val(),"MigrationPlan Name","window","migrationPlanName"):e=="description"&&validateInput($("#migrationPlanVersion").val(),"MigrationPlan Description","window","migrationPlanVersion"):(cancelClicked=!1,e=="name"?$("#migrationPlanName").focus():e=="description"&&$("#migrationPlanVersion").focus())},self.setDragDrop=function(){var e;ko.bindingHandlers.drag={init:function(t,n,r,i){var s=$(t),o={helper:function(e){var t=e.target.className;if(t.indexOf("siebui-d2p-draggable-tile")===-1){var n=$(e.target.parentNode).clone();n.css({width:$(e.target.parentNode).width()})}else{var n=$(e.target).clone();n.css({width:$(e.target).width()})}return n},revert:!0,scroll:!1,revertDuration:0,opacity:.8,start:function(t){e=ko.utils.unwrapObservable(n().value),drag(t,e)},cursor:"pointer"};s.draggable(o).disableSelection()}},ko.bindingHandlers.dropSource={init:function(t,n,r,i){var s=$(t),o={hoverClass:"ui-drop-hover",drop:function(t,n){console.log("_dragged            "+e)}};s.droppable(o)}},ko.bindingHandlers.dropDest={init:function(t,n,r,i){var s=$(t),o={hoverClass:"ui-drop-hover",drop:function(t,n){console.log("_dragged               "+e)}};s.droppable(o)}}},self.createMigrationPlan=function(){self.isSave(!0),$("#tabs-migrationRead").hide(),$("#tabs-migrationplanedit").show(),self.setDragDrop(),migrationEditScreen=!0,self.migrationPlansSource="",self.migrationPlansDestination="",sourceId="",destId="",self.newmigrationplanResourcesDB.removeAll(),self.newmigrationplanResourcesADM.removeAll(),ko.cleanNode(document.getElementById("tabs-migrationplanedit")),$("#migrationplanedit-template"
).load("templates/migrationplanedit.html",function(){ko.applyBindings(migrationplanViewModel,document.getElementById("tabs-migrationplanedit")),htmlLanguageParse("tabs-migrationplanedit"),$("#migrationPlanName").focus(),$(".siebui-accordionContentDBEdit").show(),$(".siebui-accordionContentADMEdit").show(),$("#resetSource, #resetDest").hide(),self.resetDroppedConnection(),$(".siebui-accordionContentDBEdit").show(),$(".siebui-accordionContentADMEdit").show(),$(".siebui-accordionButtonEdit").click(function(){var e=$(this);e.find(">:first-child").hasClass("siebui-icon-arrow-right")?(e.find(">:first-child").addClass("siebui-icon-arrow-down").removeClass("siebui-icon-arrow-right"),e.nextAll("fieldset").first().slideDown("normal"),e.addClass("on")):(e.find(">:first-child").addClass("siebui-icon-arrow-right").removeClass("siebui-icon-arrow-down"),e.nextAll("fieldset").first().slideUp("normal"),e.removeClass("on"))})}),setTimeout(function(){$("#migrationPlanName")&&($("#migrationPlanName").val(""),$("#migrationPlanVersion").val(""))},100)},self.cancelMigrationPlan=function(e,t){t.preventDefault();var n=confirm(i18n_resources.INTL_MIGRATIONPLAN_CANCEL_CONFIRM||"Do you want to cancel the migration plan changes?");n?(self.resetMigrationEdit(),cancelClicked=!1):cancelClicked=!0},self.resetMigrationEdit=function(){$("#tabs-migrationRead").show(),$("#tabs-migrationplanedit").hide(),migrationEditScreen=!1,self.migrationPlansUpdate=new migrationplan,$("#migrationPlanName").val(""),$("#migrationPlanVersion").val(""),self.setRRInfo(!1),self.migrationObjectData(new fullRepObject),sourceId="",destId="",self.editMigrationPlanDetails={sourceId:"",destId:"",resources:[]},self.newmigrationplanResourcesDB.removeAll(),self.newmigrationplanResourcesADM.removeAll()},self.isResourceSelected=function(e){var t=0;for(var n=0;n<e.length;n++)e[n].selected&&t++;return t>0?!0:!1},self.validateExecutionSequence=function(e){var t=[];for(var n=0;n<e.length;n++)e[n].sequenceNo&&t.push(e[n].sequenceNo);var r=!0;if(t.length>0){t.sort(function(e,t){return e-t});if(t[0]==1){for(var n=0;n<t.length;n++)if(t[n+1]&&parseInt(t[n])+1!=t[n+1]){r=!1;break}}else r=!1}return r},self.saveMigrationPlan=function(){var e=!1,t="",n="";if(validateInputFields()){var r=!0,i=sessionStorage.getItem("repoUpgraded")==="true";if(i)if($("#migrationSource").html()==""&&$("#migrationDest").html()==""||$("#migrationPlanName").val()==""||$("#migrationPlanVersion").val()=="")r=!1,alert(i18n_resources.INTL_MIGRATION_MANDATE_ERROR||"Name, Version, Source, Destination are mandatory fields");else{r=!0;if($("#migrationSource").html()==""||$("#migrationDest").html()=="")$("#migrationSource").html()==""?alert(i18n_resources.INTL_MIGRATION_IMPORT_ONLY_WARNING||"You have chosen only Target which can be used only for Import"):alert(i18n_resources.INTL_MIGRATION_EXPORT_ONLY_WARNING||"You have chosen only Source which can be used only for Export")}else if($("#migrationSource").html()==""||$("#migrationDest").html()==""||$("#migrationPlanName").val()==""||$("#migrationPlanVersion").val()=="")r=!1,alert(i18n_resources.INTL_MIGRATION_MANDATE_ERROR||"Name, Version, Source, Destination are mandatory fields");for(var s=0;s<self.newmigrationplanResourcesDB().length;s++)if(self.newmigrationplanResourcesDB()[s].name()=="Design Repository Data Service"&&self.newmigrationplanResourcesDB()[s].selected()===!0){r=!1,alert(i18n_resources.INTL_MIGRATIONPLAN_DR_UPDATE_ERROR||"Design Repository migration is not supported. You must deselect the Design Repository resource in order to proceed.");break}if(r){var o=[];for(var s=0;s<self.newmigrationplanResourcesDB().length;s++){var u={};u.resid=self.newmigrationplanResourcesDB()[s].resid(),u.name=self.newmigrationplanResourcesDB()[s].name(),u.readonly=!0,u.selected=self.newmigrationplanResourcesDB()[s].selected()||!1,u.type=self.newmigrationplanResourcesDB()[s].type(),u.isFullRepository=self.newmigrationplanResourcesDB()[s].isFullRepository(),self.newmigrationplanResourcesDB()[s].selected()&&self.newmigrationplanResourcesDB()[s].isFullRepository()&&(u.wsVersion=self.newmigrationplanResourcesDB()[s].wsVersion(),u.wsName=self.newmigrationplanResourcesDB()[s].wsName(),u.wsLanguages=self.newmigrationplanResourcesDB()[s].wsLanguages()),o.push(u)}for(var s=0;s<self.newmigrationplanResourcesADM().length;s++){var u={};u.resid=self.newmigrationplanResourcesADM()[s].resid(),u.name=self.newmigrationplanResourcesADM()[s].name(),u.readonly=!0,u.selected=self.newmigrationplanResourcesADM()[s].selected(),u.sequenceNo=self.newmigrationplanResourcesADM()[s].sequenceNo(),u.type=self.newmigrationplanResourcesADM()[s].type(),o.push(u)}if(o.length==0)alert(i18n_resources.INTL_MIGRATION_RESOURCE_ERROR||"Atleast one Resource should be selected for Migration");else if(o.length>0){var a=self.isResourceSelected(o);if(!a)alert(i18n_resources.INTL_MIGRATION_RESOURCE_ERROR||"Atleast one Resource should be selected for Migration");else{var f=self.validateExecutionSequence(o);f?(t={name:$("#migrationPlanName").val(),version:$("#migrationPlanVersion").val(),source:self.migrationPlansSource,destination:self.migrationPlansDestination,sourceConnId:sourceId,targetConnId:destId,planId:n,resources:o,SRN:sessionNumber},self.isSave()?sessionNumber?($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Plan",type:"POST",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",data:JSON.stringify(t),async:!0,success:function(e){$("#maskoverlay").addClass("hide");if(e&&e.status)if(e["status"]=="error")if(typeof i18n_resources!="undefined"&&e.msgKey){if(i18n_resources[e.msgKey]){validationMessage=i18n_resources[e.msgKey];if(e.msgParamValueArr)for(var t=0;t<e.msgParamValueArr.length;t++)validationMessage=validationMessage.replace("%"+(t+1),e.msgParamValueArr[t])}else e.msg?validationMessage=e.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(e["msgKey"]=="INTL_SESSION_EXP"||
e["msgKey"]=="INTL_INVL_USR")&&signOut()}else e.msg?alert(e.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(e&&e.planid){var n=e.planid,r=i18n_resources.INTL_MIGRATION_TYPE_EXPORT_IMPORT||"Export-Import",i="siebui-d2p-migrate",s=self.migrationPlansSource;if(!n.sourceConnId||n.sourceConnId=="")s=i18n_resources.INTL_MIGRATION_NOT_APPLICABLE||"Not Applicable",r=i18n_resources.INTL_MIGRATION_TYPE_IMPORT||"Import",i="siebui-d2p-import";var o=self.migrationPlansDestination;if(!n.targetConnId||n.targetConnId=="")o=i18n_resources.INTL_MIGRATION_NOT_APPLICABLE||"Not Applicable",r=i18n_resources.INTL_MIGRATION_TYPE_EXPORT||"Export",i="siebui-d2p-export";var u=new migrationplan(n.rowId,n.name,s,o,n.version,n.sourceConnId,n.targetConnId,n.wsService,r,i);connectionViewModel.planAccosaitedConnections.indexOf(n.sourceConnId)===-1&&connectionViewModel.planAccosaitedConnections.push(n.sourceConnId),connectionViewModel.planAccosaitedConnections.indexOf(n.targetConnId)===-1&&connectionViewModel.planAccosaitedConnections.push(n.targetConnId);for(var a=0;a<n.resources.length;a++)n.wsService==n.resources[a].name&&(n.resources[a].isFullRepository=!0),u.migrationobjects.push(new migrationobject(n.resources[a].resid,n.resources[a].name,n.resources[a].readonly,n.resources[a].selected,n.resources[a].sequenceNo,n.resources[a].type,n.resources[a].isFullRepository,n.resources[a].wsVersion,n.resources[a].wsName,n.resources[a].wsLanguages));self.migrationplans.unshift(u),$("#tabs-migrationRead").show(),$("#tabs-migrationplanedit").hide(),migrationEditScreen=!1,$("#migrationPlanName").val(""),$("#migrationPlanVersion").val(""),self.setRRInfo(!1),self.migrationObjectData(new fullRepObject),self.migrationPlansUpdate=new migrationplan,self.migrationplanResourcesDB.removeAll(),self.migrationplanResourcesADM.removeAll();for(var f=0;f<self.migrationplans()[0].migrationobjects().length;f++)self.migrationplans()[0].migrationobjects()[f].type()=="DB Util"?self.migrationplanResourcesDB.push(self.migrationplans()[0].migrationobjects()[f]):self.migrationplanResourcesADM.push(self.migrationplans()[0].migrationobjects()[f]);self.connections().forEach(function(e){e.id()==n.sourceConnId&&(self.selectedConnection=self.getHostUrl(e.restUrl()))}),self.migrationplans().length>1&&($(".siebui-d2p-migration-tile-selected")[0].className=$(".siebui-d2p-migration-tile-selected")[0].className.replace(" siebui-d2p-migration-tile-selected","")),$("#migrationTile"+e.planid.rowId).addClass(" siebui-d2p-migration-tile-selected"),self.resetScroll(),htmlLanguageParse("migrationTileContainer"),self.migrationplans().length==1&&migrationReadSetAccordian()}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey=="INTL_DUPLICATE_SESSION")sessionWarningMessage();else if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})):sessionWarningMessage():(t.planId=self.migrationPlansUpdate.id(),t.sourceConnId=sourceId,t.targetConnId=destId,sessionNumber?($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Plan",type:"PUT",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",data:JSON.stringify(t),async:!0,success:function(e){$("#maskoverlay").addClass("hide");if(e&&e.status)if(e["status"]=="error")if(typeof i18n_resources!="undefined"&&e.msgKey){if(i18n_resources[e.msgKey]){validationMessage=i18n_resources[e.msgKey];if(e.msgParamValueArr)for(var t=0;t<e.msgParamValueArr.length;t++)validationMessage=validationMessage.replace("%"+(t+1),e.msgParamValueArr[t])}else e.msg?validationMessage=e.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(e["msgKey"]=="INTL_SESSION_EXP"||e["msgKey"]=="INTL_INVL_USR")&&signOut()}else e.msg?alert(e.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else{for(var n=0;n<self.migrationplans().length;n++)if(self.migrationPlansUpdate.id()==self.migrationplans()[n].id()){e.planid&&self.migrationplans()[n].id(e.planid.rowId),e=e.planid;var r=i18n_resources.INTL_MIGRATION_TYPE_EXPORT_IMPORT||"Export-Import",i="siebui-d2p-migrate",s=e.sourceConnName;if(!e.sourceConnName||e.sourceConnName=="")s=i18n_resources.INTL_MIGRATION_NOT_APPLICABLE||"Not Applicable",r=i18n_resources.INTL_MIGRATION_TYPE_IMPORT||"Import",i="siebui-d2p-import";var o=e.targetConnName;if(!e.targetConnName||e.targetConnName=="")o=i18n_resources.INTL_MIGRATION_NOT_APPLICABLE||"Not Applicable",r=i18n_resources.INTL_MIGRATION_TYPE_EXPORT||"Export",i="siebui-d2p-export";self.migrationplans()[n].name(e.name),self.migrationplans()[n].version(e.version),self.migrationplans()[n].source(s),self.migrationplans()[n].destination(o),self.migrationplans()[n].sourceConnId(e.sourceConnId),self.migrationplans()[n].targetConnId(e.targetConnId),self.migrationplans()[n].type(r),self.migrationplans()[n].typeIconClass(i),connectionViewModel.
planAccosaitedConnections.indexOf(e.sourceConnId)===-1&&connectionViewModel.planAccosaitedConnections.push(e.sourceConnId),connectionViewModel.planAccosaitedConnections.indexOf(e.targetConnId)===-1&&connectionViewModel.planAccosaitedConnections.push(e.targetConnId),self.migrationplanResourcesDB.removeAll(),self.migrationplanResourcesADM.removeAll(),self.migrationplans()[n].migrationobjects.removeAll();for(var u=0;u<e.resources.length;u++)e.wsService==e.resources[u].name&&(e.resources[u].isFullRepository=!0),self.migrationplans()[n].migrationobjects.push(new migrationobject(e.resources[u].resid,e.resources[u].name,e.resources[u].readonly,e.resources[u].selected,e.resources[u].sequenceNo,e.resources[u].type,e.resources[u].isFullRepository,e.resources[u].wsVersion,e.resources[u].wsName,e.resources[u].wsLanguages)),e.resources[u].type=="DB Util"?self.migrationplanResourcesDB.push(new migrationobject(e.resources[u].resid,e.resources[u].name,e.resources[u].readonly,e.resources[u].selected,e.resources[u].sequenceNo,e.resources[u].type,e.resources[u].isFullRepository,e.resources[u].wsVersion,e.resources[u].wsName,e.resources[u].wsLanguages)):self.migrationplanResourcesADM.push(new migrationobject(e.resources[u].resid,e.resources[u].name,e.resources[u].readonly,e.resources[u].selected,e.resources[u].sequenceNo,e.resources[u].type));break}sourceId="",destId="",self.editMigrationPlanDetails={sourceId:"",destId:"",resources:[]},self.newmigrationplanResourcesADM.removeAll(),self.newmigrationplanResourcesDB.removeAll(),$("#tabs-migrationRead").show(),$("#tabs-migrationplanedit").hide(),migrationEditScreen=!1,$("#migrationPlanName").val(""),$("#migrationPlanVersion").val(""),self.setRRInfo(!1),self.migrationObjectData(new fullRepObject),self.migrationPlansUpdate=new migrationplan}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r.msgKey=="INTL_DUPLICATE_SESSION")sessionWarningMessage();else if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})):sessionWarningMessage())):alert(i18n_resources.INTL_MIGRATION_SEQUENCE_ERROR||"Sequence number should start with 1 and be a continuous sequence")}}}}},self.deleteMigrationPlan=function(e,t){var n=confirm(i18n_resources.INTL_MIGRATION_DELETE_ALERT||"Do you want to delete the Migration Plan?");n&&(sessionNumber?($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Plan?planid="+e.id(),type:"DELETE",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",data:JSON.stringify({SRN:sessionNumber}),async:!1,success:function(t){$("#maskoverlay").addClass("hide");if(t&&t.status)if(t["status"]=="error")if(typeof i18n_resources!="undefined"&&t.msgKey){if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey];if(t.msgParamValueArr)for(var n=0;n<t.msgParamValueArr.length;n++)validationMessage=validationMessage.replace("%"+(n+1),t.msgParamValueArr[n])}else t.msg?validationMessage=t.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")&&signOut()}else t.msg?alert(t.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else{if($("#migrationTile"+e.id()).hasClass("siebui-d2p-migration-tile-selected")){for(var r=0;r<self.migrationplans().length;r++)if(e.id()==self.migrationplans()[r].id())break;self.migrationplanResourcesDB.removeAll(),self.migrationplanResourcesADM.removeAll();if(self.migrationplans()[r-1]){for(var i=0;i<self.migrationplans()[r-1].migrationobjects().length;i++)self.migrationplans()[r-1].migrationobjects()[i].type()=="DB Util"?self.migrationplanResourcesDB.push(self.migrationplans()[r-1].migrationobjects()[i]):self.migrationplanResourcesADM.push(self.migrationplans()[r-1].migrationobjects()[i]);$("#migration"+self.migrationplans()[r-1].id()).show(),$("#migrationTile"+self.migrationplans()[r-1].id()).addClass(" siebui-d2p-migration-tile-selected"),self.connections().forEach(function(e){e.id()==self.migrationplans()[r-1].sourceConnId()&&(self.selectedConnection=self.getHostUrl(e.restUrl()))}),self.migrationplans.remove(e)}else if(self.migrationplans()[r+1]){for(var i=0;i<self.migrationplans()[r+1].migrationobjects().length;i++)self.migrationplans()[r+1].migrationobjects()[i].type()=="DB Util"?self.migrationplanResourcesDB.push(self.migrationplans()[r+1].migrationobjects()[i]):self.migrationplanResourcesADM.push(self.migrationplans()[r+1].migrationobjects()[i]);$("#migration"+self.migrationplans()[r+1].id()).show(),$("#migrationTile"+self.migrationplans()[r+1].id()).addClass(" siebui-d2p-migration-tile-selected"),self.connections().forEach(function(e){e.id()==self.migrationplans()[r+1].sourceConnId()&&(self.selectedConnection=self.getHostUrl(e.restUrl()))}),self.migrationplans.remove(e)}else self.migrationplans.remove(e)}else self.migrationplans.remove(e);isRTL()?self.setLeftArrow():self.setRightArrow(),connectionViewModel.planAccosaitedConnections=[];for(var r=0;r<self.migrationplans().length;r++)connectionViewModel.planAccosaitedConnections.indexOf(self.migrationplans()[r].sourceConnId())===-1&&
connectionViewModel.planAccosaitedConnections.push(self.migrationplans()[r].sourceConnId()),connectionViewModel.planAccosaitedConnections.indexOf(self.migrationplans()[r].targetConnId())===-1&&connectionViewModel.planAccosaitedConnections.push(self.migrationplans()[r].targetConnId())}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey=="INTL_DUPLICATE_SESSION")sessionWarningMessage();else if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})):sessionWarningMessage())},self.showMigrationPlanObjects=function(e,t){for(var n=0;n<self.migrationplans().length;n++)if(e.id()==self.migrationplans()[n].id()){self.migrationplanResourcesDB.removeAll(),self.migrationplanResourcesADM.removeAll();for(var r=0;r<self.migrationplans()[n].migrationobjects().length;r++)self.migrationplans()[n].migrationobjects()[r].type()=="DB Util"?self.migrationplanResourcesDB.push(self.migrationplans()[n].migrationobjects()[r]):self.migrationplanResourcesADM.push(self.migrationplans()[n].migrationobjects()[r]);break}$(".siebui-active-plan").hide(),$(".siebui-inactive-plan").show();for(var n=0;n<self.connections().length;n++)if(self.connections()[n].id()==e.sourceConnId()){self.selectedConnection=self.getHostUrl(self.connections()[n].restUrl()),$(".siebui-active-plan").show(),$(".siebui-inactive-plan").hide();break}$(".siebui-d2p-migration-tile-selected")[0].className=$(".siebui-d2p-migration-tile-selected")[0].className.replace(" siebui-d2p-migration-tile-selected"," "),$("#migrationTile"+e.id()).addClass(" siebui-d2p-migration-tile-selected"),$(".siebui-accordionContentDBRead").show(),$(".siebui-accordionContentADMRead").show(),$(".siebui-accordionContentADMRead").parent().find(".siebui-d2p-accordion").addClass("siebui-icon-arrow-down").removeClass("siebui-icon-arrow-right"),$(".siebui-accordionContentDBRead").parent().find(".siebui-d2p-accordion").addClass("siebui-icon-arrow-down").removeClass("siebui-icon-arrow-right")},self.editMigrationPlan=function(e,t){$("#tabs-migrationRead").hide(),$("#tabs-migrationplanedit").show(),self.setDragDrop(),migrationEditScreen=!0,self.isSave(!1),self.newmigrationplanResourcesDB.removeAll(),self.newmigrationplanResourcesADM.removeAll(),sourceId="",destId="";var n=e.source(),r=e.destination();if(!e.targetConnId()||e.targetConnId()=="")r="";if(!e.sourceConnId()||e.sourceConnId()=="")n="";self.editMigrationPlanDetails={sourceId:"",destId:"",resources:[]},ko.cleanNode(document.getElementById("tabs-migrationplanedit")),$("#migrationplanedit-template").load("templates/migrationplanedit.html",function(){ko.applyBindings(migrationplanViewModel,document.getElementById("tabs-migrationplanedit")),htmlLanguageParse("tabs-migrationplanedit"),$("#migrationPlanName").focus(),$(document).ready(function(){$(".siebui-accordionButtonEdit").click(function(){var e=$(this);e.find(">:first-child").hasClass("siebui-icon-arrow-right")?(e.find(">:first-child").addClass("siebui-icon-arrow-down").removeClass("siebui-icon-arrow-right"),e.nextAll("fieldset").first().slideDown("normal"),e.addClass("on")):(e.find(">:first-child").addClass("siebui-icon-arrow-right").removeClass("siebui-icon-arrow-down"),e.nextAll("fieldset").first().slideUp("normal"),e.removeClass("on"))})}),!e.sourceConnId()||e.sourceConnId()==""?($("#migrationDest").parent().addClass("siebui-d2p-dropped"),$(".siebui-d2p-dest-placeholder").hide()):!e.targetConnId()||e.targetConnId()==""?($("#migrationSource").parent().addClass("siebui-d2p-dropped"),$(".siebui-d2p-source-placeholder").hide()):($("#migrationDest").parent().addClass("siebui-d2p-dropped"),$(".siebui-d2p-dest-placeholder").hide(),$("#migrationSource").parent().addClass("siebui-d2p-dropped"),$(".siebui-d2p-source-placeholder").hide()),$(".siebui-accordionContentDBEdit").show(),$(".siebui-accordionContentADMEdit").show(),self.resetDroppedConnection();var t,n,r,i;for(var s=0;s<self.connections().length;s++)self.connections()[s].id()==e.sourceConnId()?(t=self.connections()[s].status(),r=self.connections()[s].restUrl()):self.connections()[s].id()==e.targetConnId()&&(n=self.connections()[s].status(),i=self.connections()[s].restUrl());$("#migrationSource").attr("endpoint",r),$("#migrationDest").attr("endpoint",i),$("#migrationSource").attr("connectionStatus",t),$("#migrationDest").attr("connectionStatus",n),self.statusCheck($("#migrationSource").attr("connectionStatus"),$("#migrationDest").attr("connectionStatus"))}),self.wsServiceName=e.wsService();for(var i=0;i<e.migrationobjects().length;i++){var s={resid:e.migrationobjects()[i].resid(),name:e.migrationobjects()[i].name(),type:e.migrationobjects()[i].type(),isFullRepository:e.migrationobjects()[i].isFullRepository()};self.migrationPlansSource==""&&(s.isFullRepository=!1),self.editMigrationPlanDetails.resources.push(s);if(e.migrationobjects()[i].type()=="DB Util"){e.wsService()==e.migrationobjects()[i].name()&&self.migrationPlansSource!=""&&self.migrationPlansSource&&e.migrationobjects()[i].isFullRepository(!0),self.newmigrationplanResourcesDB.push(new migrationobject(e.migrationobjects()[i].resid(),e.migrationobjects()[i].name(),e.migrationobjects()[i].readonly(),e.migrationobjects()[i].selected(),e.migrationobjects()[i].sequenceNo(),e.migrationobjects()
[i].type(),e.migrationobjects()[i].isFullRepository(),e.migrationobjects()[i].wsVersion(),e.migrationobjects()[i].wsName(),e.migrationobjects()[i].wsLanguages()));var o=self.newmigrationplanResourcesDB().length-1}else self.newmigrationplanResourcesADM.push(new migrationobject(e.migrationobjects()[i].resid(),e.migrationobjects()[i].name(),e.migrationobjects()[i].readonly(),e.migrationobjects()[i].selected(),e.migrationobjects()[i].sequenceNo(),e.migrationobjects()[i].type()))}self.migrationPlansUpdate=new migrationplan(e.id(),e.name(),n,r,e.version(),e.sourceConnId(),e.targetConnId(),e.wsService()),sourceId=e.sourceConnId(),destId=e.targetConnId(),self.editMigrationPlanDetails.sourceId=e.sourceConnId(),self.editMigrationPlanDetails.destId=e.targetConnId(),self.migrationPlansSource=n,self.migrationPlansDestination=r,self.ruleValidation()},self.getAllMigrationplan=function(){$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Plan",type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!1,success:function(response){$("#maskoverlay").addClass("hide");if(response&&response.status)if(response["status"]=="error")if(typeof i18n_resources!="undefined"&&response.msgKey){if(i18n_resources[response.msgKey]){validationMessage=i18n_resources[response.msgKey];if(response.msgParamValueArr)for(var index=0;index<response.msgParamValueArr.length;index++)validationMessage=validationMessage.replace("%"+(index+1),response.msgParamValueArr[index])}else response.msg?validationMessage=response.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(response["msgKey"]=="INTL_SESSION_EXP"||response["msgKey"]=="INTL_INVL_USR")&&signOut()}else response.msg?alert(response.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else{self.migrationplans.removeAll();if(response.data){var jsonData=eval(response.data);if(jsonData.length==0)console.log("No MigrationPlans Present");else{connectionViewModel.planAccosaitedConnections=[];for(var i=0;i<jsonData.length;i++){var migrationType=i18n_resources.INTL_MIGRATION_TYPE_EXPORT_IMPORT||"Export-Import",typeClass="siebui-d2p-migrate",sourceName=jsonData[i].sourceConnName;if(!jsonData[i].sourceConnId||jsonData[i].sourceConnId=="")sourceName=i18n_resources.INTL_MIGRATION_NOT_APPLICABLE||"Not Applicable",migrationType=i18n_resources.INTL_MIGRATION_TYPE_IMPORT||"Import",typeClass="siebui-d2p-import";var targetname=jsonData[i].targetConnName;if(!jsonData[i].targetConnId||jsonData[i].targetConnId=="")targetname=i18n_resources.INTL_MIGRATION_NOT_APPLICABLE||"Not Applicable",migrationType=i18n_resources.INTL_MIGRATION_TYPE_EXPORT||"Export",typeClass="siebui-d2p-export";var migrationObj=new migrationplan(jsonData[i].planId,jsonData[i].name,sourceName,targetname,jsonData[i].version,jsonData[i].sourceConnId,jsonData[i].targetConnId,jsonData[i].wsService,migrationType,typeClass);connectionViewModel.planAccosaitedConnections.indexOf(jsonData[i].sourceConnId)===-1&&connectionViewModel.planAccosaitedConnections.push(jsonData[i].sourceConnId),connectionViewModel.planAccosaitedConnections.indexOf(jsonData[i].targetConnId)===-1&&connectionViewModel.planAccosaitedConnections.push(jsonData[i].targetConnId);for(var j=0;j<jsonData[i].resources.length;j++)jsonData[i].wsService==jsonData[i].resources[j].name&&(jsonData[i].resources[j].isFullRepository=!0),migrationObj.migrationobjects.push(new migrationobject(jsonData[i].resources[j].resid,jsonData[i].resources[j].name,jsonData[i].resources[j].readonly,jsonData[i].resources[j].selected,jsonData[i].resources[j].sequenceNo,jsonData[i].resources[j].type,jsonData[i].resources[j].isFullRepository,jsonData[i].resources[j].wsVersion,jsonData[i].resources[j].wsName,jsonData[i].resources[j].wsLanguages));self.migrationplans.push(migrationObj)}self.migrationplanResourcesDB.removeAll(),self.migrationplanResourcesADM.removeAll();for(var i=0;i<self.migrationplans()[0].migrationobjects().length;i++)self.migrationplans()[0].migrationobjects()[i].type()=="DB Util"?self.migrationplanResourcesDB.push(self.migrationplans()[0].migrationobjects()[i]):self.migrationplanResourcesADM.push(self.migrationplans()[0].migrationobjects()[i]);if(self.migrationplans().length>0){$("#migration"+self.migrationplans()[0].id()).show(),$(".siebui-d2p-migration-tile-selected")&&$(".siebui-d2p-migration-tile-selected")[0]&&($(".siebui-d2p-migration-tile-selected")[0].className=$(".siebui-d2p-migration-tile-selected")[0].className.replace(" siebui-d2p-migration-tile-selected"," "));var migrationplan1=$(".siebui-d2p-migration-tile")[0];migrationplan1.className+=" siebui-d2p-migration-tile-selected",$(".siebui-active-plan").hide(),$(".siebui-inactive-plan").show();for(var i=0;i<self.connections().length;i++)if(self.connections()[i].id().toString()==self.migrationplans()[0].sourceConnId()){self.selectedConnection=self.getHostUrl(self.connections()[i].restUrl()),$(".siebui-active-plan").show(),$(".siebui-inactive-plan").hide();break}}htmlLanguageParse("migrationObjects"),htmlLanguageParse("migrationTileContainer")}migrationFirstLoad?self.setScroll():self.resetScroll()}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time"
;alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})},self.setRightArrow=function(){var e=$("#siebui-d2p-tile-migration-innercontainer").width()/$(".siebui-d2p-migration-tile").width()-1;self.migrationplans().length>0&&(self.migrationplans().length<=Math.round(e)||lastPageClick?$("#migrationRightArrow").hide():$("#migrationRightArrow").show(),self.sliderLimit=$("#siebui-d2p-tile-migration-innercontainer").width()-self.migrationplans().length*$(".siebui-d2p-migration-tile").width()-e*20,self.slideMove=($("#siebui-d2p-tile-migration-innercontainer").width()/$(".siebui-d2p-migration-tile").width()-1)*$(".siebui-d2p-migration-tile").width())},self.setLeftArrow=function(){var e=$("#siebui-d2p-tile-migration-innercontainer").width()/$(".siebui-d2p-migration-tile").width()-1;self.migrationplans().length>0&&(self.migrationplans().length<=Math.round(e)?$("#migrationLeftArrow").hide():$("#migrationLeftArrow").show(),self.sliderLimit=$("#siebui-d2p-tile-migration-innercontainer").width()-self.migrationplans().length*$(".siebui-d2p-migration-tile").width()-e*20,self.slideMove=($("#siebui-d2p-tile-migration-innercontainer").width()/$(".siebui-d2p-migration-tile").width()-1)*$(".siebui-d2p-migration-tile").width())},self.getRRInfo=function(e,t){$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Plan?sourceConnId="+sourceId+"&targetConnId="+destId+"&resid="+e.resid()+"&method=getWorkspaceInfo",type:"GET",crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},dataType:"json",async:!1,success:function(t){$("#maskoverlay").addClass("hide");if(!t||!t.status)return e.selected(!e.selected()),alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time"),!1;if(t["status"].toLowerCase()!="error"){if(t.data){if(t.data.languages){t.data.languages=t.data.languages.split(","),self.migrationObjectData().wsLanguages.removeAll(),self.migrationObjectData().workspaces.removeAll();for(var r=0;r<t.data.languages.length;r++)self.migrationObjectData().wsLanguages.push(t.data.languages[r])}self.migrationObjectData().id(e.resid());var i,s;if(self.setRRInfo()||!self.isSave()){for(var r=0;r<self.newmigrationplanResourcesDB().length;r++)if(e.resid()==self.newmigrationplanResourcesDB()[r].resid()){i=self.newmigrationplanResourcesDB()[r].wsName(),s=self.newmigrationplanResourcesDB()[r].wsVersion();break}}else t.data.defaultworkspacename&&(i=t.data.defaultworkspacename.defaultworkspacename);for(var o in t.data.workspace)if(t.data.workspace.hasOwnProperty(o)){var u=new wsRepVersion(o,t.data.workspace[o]);o==i?self.migrationObjectData().workspaces.unshift(u):self.migrationObjectData().workspaces.push(u)}return self.migrationObjectData().wsNameSelected(self.migrationObjectData().workspaces()[0]),self.migrationObjectData().workspaces()[0].version()>="0"?self.migrationObjectData().wsMaxVersion(self.migrationObjectData().workspaces()[0].version()):self.migrationObjectData().wsMaxVersion("0"),self.setRRInfo()||!self.isSave()?s?s>="0"?self.migrationObjectData().wsVersionSelected(s):self.migrationObjectData().wsVersionSelected("0"):self.migrationObjectData().workspaces()[0].version()>="0"?self.migrationObjectData().wsVersionSelected(self.migrationObjectData().workspaces()[0].version()):self.migrationObjectData().wsVersionSelected("0"):self.migrationObjectData().workspaces()[0].version()>="0"?self.migrationObjectData().wsVersionSelected(self.migrationObjectData().workspaces()[0].version()):self.migrationObjectData().wsVersionSelected("0"),self.versionSubscribe=self.migrationObjectData().wsNameSelected.subscribe(function(e){self.migrationObjectData().wsVersionSelected(e.version()),self.migrationObjectData().wsMaxVersion(e.version())}),self.getRRVersion=$("#workspaceVersion").val(),!0}return e.selected(!e.selected()),alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time"),!1}if(typeof i18n_resources=="undefined"||!t.msgKey)return t.msg?(alert(t.msg),!1):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes),!1);if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey];if(t.msgParamValueArr)for(var n=0;n<t.msgParamValueArr.length;n++)validationMessage=validationMessage.replace("%"+(n+1),t.msgParamValueArr[n])}else t.msg?validationMessage=t.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage);if(t["msgKey"]!="INTL_SESSION_EXP"&&t["msgKey"]!="INTL_INVL_USR")return!1;signOut()},error:function(t,n,r){$("#maskoverlay").addClass("hide"),e.selected(!e.selected());var i=t.responseText?JSON.parse(t.responseText):"";if(!i||!i.msgKey||typeof i18n_resources=="undefined")return i&&i.msg?(alert(i.msg),!1):(alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time"),!1);if(i18n_resources[i.msgKey]){errMessage=i18n_resources[i.msgKey];if(i.msgParamValueArr)for(var s=0;s<i.msgParamValueArr.length;s++)errMessage=errMessage.replace("%"+(s+1),i.msgParamValueArr[s])}else i.msg?errMessage=i.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage);if(i.msgKey!="INTL_SESSION_EXP"&&i.msgKey!="INTL_SRVR_401")return!1;signOut()}})},self.cancelRRInfo=function(e,t){self.versionSubscribe&&self.versionSubscribe.dispose(),$("#migrationObjectRead").addClass("hide")},self.saveRRInfo=function(e,t){for(var n=0;n<self.newmigrationplanResourcesDB().length;n++)if(self.newmigrationplanResourcesDB()[n].resid()==e.id()){var r=parseInt
(self.migrationObjectData().wsVersionSelected()),i=parseInt(self.migrationObjectData().wsMaxVersion());if(r<=i&&r>=0){self.newmigrationplanResourcesDB()[n].isFullRepository(!0),self.newmigrationplanResourcesDB()[n].wsVersion(self.migrationObjectData().wsVersionSelected()),self.newmigrationplanResourcesDB()[n].wsName(self.migrationObjectData().wsNameSelected().name()),self.newmigrationplanResourcesDB()[n].wsLanguages(self.migrationObjectData().wsLanguages().join()),self.setRRInfo(!0),self.versionSubscribe.dispose();break}var s=parseInt(self.getRRVersion);if(s>=1){var o=i18n_resources.INTL_WORKSPACE_VERSION_VALIDATION||"Version number must range between '0' and '%1'";o=o.replace("%1",i)}else var o=i18n_resources.INTL_WORKSPACE_NO_VERSION||"There are no versions created in this branch, Version Number must be '0'";alert(o)}},self.showWSMigrationObjects=function(e,t){self.migrationObjectDataRead(new fullRepObject),self.migrationObjectDataRead().id(e.resid()),self.migrationObjectDataRead().wsNameSelected(e.wsName());if(e.wsLanguages()){var n=e.wsLanguages().split(",");for(var r=0;r<n.length;r++)self.migrationObjectDataRead().wsLanguages.push(n[r])}self.migrationObjectDataRead().wsVersionSelected(e.wsVersion()),htmlLanguageParse("migrationObjectRead"),$("#migrationObjectRead").removeClass("hide")};var leftPageCount=0,rightPageCount=0,lastPageRecords,lastPageClick=!1;self.setScroll=function(){var e=$("#migrationTileContainer");isRTL()?self.setLeftArrow():self.setRightArrow(),$("#migrationLeftArrow").click(function(){var t=$("#migrationTileContainer").width()/$("#siebui-d2p-tile-migration-innercontainer").width();$(window).width()>smallScreenMaxWidth?t%1>.3?(isRTL()&&(t%1>.3&&t%1<.6?lastPageRecords=1:t%1>.6&&t%1<.9?lastPageRecords=2:lastPageRecords=3),t=Math.ceil(t)):t=Math.floor(t):t%1>.5?(isRTL()&&(lastPageRecords=1),t=Math.ceil(t)):(isRTL()&&(lastPageRecords=2),t=Math.floor(t));var n=$("#siebui-d2p-tile-migration-innercontainer").width()/$(".siebui-d2p-migration-tile").width()-1;self.migrationplans().length>0&&(self.migrationplans().length<=Math.round(n)?$("#migrationRightArrow").hide():$("#migrationRightArrow").show()),leftPageCount+=1;if(isRTL()){var r=parseInt(e.css("right"));if(leftPageCount>=t-1){if($(window).width()>smallScreenMaxWidth){if(lastPageRecords)var i=r-$("#siebui-d2p-tile-migration-innercontainer").width()*lastPageRecords/3}else if(lastPageRecords)var i=r-$("#siebui-d2p-tile-migration-innercontainer").width()*lastPageRecords/2;e.stop(!1,!0).animate({right:i},{duration:300}),$("#migrationLeftArrow").hide()}else{var i=r-$("#siebui-d2p-tile-migration-innercontainer").width();e.stop(!1,!0).animate({right:i},{duration:300})}}else{var r=parseInt(e.css("left"));leftPageCount>=0&&lastPageClick&&lastPageRecords?(lastPageClick=!1,$(window).width()>smallScreenMaxWidth?e.stop(!1,!0).animate({left:"+="+$("#siebui-d2p-tile-migration-innercontainer").width()*lastPageRecords/3},{duration:300}):e.stop(!1,!0).animate({left:"+="+$("#siebui-d2p-tile-migration-innercontainer").width()*lastPageRecords/2},{duration:300})):e.stop(!1,!0).animate({left:"+="+$("#siebui-d2p-tile-migration-innercontainer").width()},{duration:300}),setTimeout(function(){var t=e.css("left").replace("px","");leftPageCount>=0&&$("#migrationLeftArrow").hide()},200)}}),$("#migrationRightArrow").click(function(){var t=$("#migrationTileContainer").width()/$("#siebui-d2p-tile-migration-innercontainer").width();$(window).width()>smallScreenMaxWidth?t%1>.3?(isRTL()||(t%1>.3&&t%1<.6?lastPageRecords=1:t%1>.6&&t%1<.9?lastPageRecords=2:lastPageRecords=3),t=Math.ceil(t)):t=Math.floor(t):t%1>.5?(isRTL()||(lastPageRecords=1),t=Math.ceil(t)):(isRTL()||(lastPageRecords=2),t=Math.floor(t)),$("#migrationLeftArrow").show(),leftPageCount-=1;if(isRTL()){var n=parseInt(e.css("right")),r=n+$("#siebui-d2p-tile-migration-innercontainer").width();e.stop(!1,!0).animate({right:r},{duration:300}),r>=-10&&($("#migrationRightArrow").hide(),e.stop(!1,!0).animate({right:0},{duration:300}))}else{var n=parseInt(e.css("left"));if(leftPageCount-1<=-t){if($(window).width()>smallScreenMaxWidth){if(lastPageRecords)var i=n-$("#siebui-d2p-tile-migration-innercontainer").width()*lastPageRecords/3}else if(lastPageRecords)var i=n-$("#siebui-d2p-tile-migration-innercontainer").width()*lastPageRecords/2;lastPageClick=!0,e.stop(!1,!0).animate({left:i},{duration:300})}else{var i=n-$("#siebui-d2p-tile-migration-innercontainer").width();e.stop(!1,!0).animate({left:i},{duration:300})}setTimeout(function(){leftPageCount-1<=-t&&$("#migrationRightArrow").hide()},200)}})},self.resetScroll=function(){leftPageCount=0,rightPageCount=0,lastPageClick=!1,isRTL()?($("#migrationTileContainer").css({right:"0px"}),self.setLeftArrow(),$("#migrationRightArrow").hide()):($("#migrationTileContainer").css({left:"0px"}),self.setRightArrow(),$("#migrationLeftArrow").hide())},self.getAllConnections=function(){self.connections.removeAll();for(var e=0;e<connectionViewModel.connections().length;e++)self.connections.push(connectionViewModel.connections()[e])},self.resetMigrationObjects=function(){self.newmigrationplanResourcesDB.removeAll(),self.newmigrationplanResourcesADM.removeAll()},self.populateMigrationObjects=function(){if($("#migrationSource").html()==""&&$("#migrationDest").html()=="")alert(i18n_resources.INTL_MIGRATION_REFRESH_MANDATE||"You must select both Source and Destination in order to proceed");else{var result=confirm(i18n_resources.INTL_MIGRATION_REFRESH_ALERT||"Refresh action will save your current changes. Do you want to continue ?");if(result){var url;self.isSave()?url=baseUrl+"Plan?sourceConnId="+sourceId+"&targetConnId="+destId:url=baseUrl+"Plan?sourceConnId="+sourceId+"&targetConnId="+destId+"&planId="+self.migrationPlansUpdate.id();var resources=[];for(var i=0;i<self.newmigrationplanResourcesDB().length;i++){var resourceObject={};resourceObject.resid=self.newmigrationplanResourcesDB()[i].resid(),resourceObject.name=self.newmigrationplanResourcesDB()[i].name(),resourceObject.readonly=!0
,resourceObject.selected=self.newmigrationplanResourcesDB()[i].selected()||!1,resourceObject.type=self.newmigrationplanResourcesDB()[i].type(),self.newmigrationplanResourcesDB()[i].selected()&&self.newmigrationplanResourcesDB()[i].isFullRepository()&&(resourceObject.wsVersion=self.newmigrationplanResourcesDB()[i].wsVersion(),resourceObject.wsName=self.newmigrationplanResourcesDB()[i].wsName(),resourceObject.wsLanguages=self.newmigrationplanResourcesDB()[i].wsLanguages()),resources.push(resourceObject)}for(var i=0;i<self.newmigrationplanResourcesADM().length;i++){var resourceObject={};resourceObject.resid=self.newmigrationplanResourcesADM()[i].resid(),resourceObject.name=self.newmigrationplanResourcesADM()[i].name(),resourceObject.readonly=!0,resourceObject.selected=self.newmigrationplanResourcesADM()[i].selected()||!1,resourceObject.sequenceNo=self.newmigrationplanResourcesADM()[i].sequenceNo(),resourceObject.type=self.newmigrationplanResourcesADM()[i].type(),resources.push(resourceObject)}if(self.isSave())var payload={resources:resources,SRN:sessionNumber};else var payload={name:$("#migrationPlanName").val(),version:$("#migrationPlanVersion").val(),source:$("#migrationSource").text(),destination:$("#migrationDest").text(),sourceConnId:sourceId,targetConnId:destId,planId:self.migrationPlansUpdate.id(),resources:resources,SRN:sessionNumber};sessionNumber?($("#maskoverlay").removeClass("hide"),$.ajax({url:url,type:"PUT",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",data:JSON.stringify(payload),async:!1,success:function(response){$("#maskoverlay").addClass("hide");if(response&&response.status)if(response["status"]=="error")if(typeof i18n_resources!="undefined"&&response.msgKey){if(i18n_resources[response.msgKey]){validationMessage=i18n_resources[response.msgKey];if(response.msgParamValueArr)for(var index=0;index<response.msgParamValueArr.length;index++)validationMessage=validationMessage.replace("%"+(index+1),response.msgParamValueArr[index])}else response.msg?validationMessage=response.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(response["msgKey"]=="INTL_SESSION_EXP"||response["msgKey"]=="INTL_INVL_USR")&&signOut()}else response.msg?alert(response.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(response.data){for(var i=0;i<self.migrationplans().length;i++){self.migrationPlansUpdate.id()==self.migrationplans()[i].id()&&response.data.planid&&(self.migrationplans()[i].id(response.data.planid),self.migrationPlansUpdate.id(response.data.planid));break}var jsonData=eval(response.data.resources);self.newmigrationplanResourcesDB.removeAll(),self.newmigrationplanResourcesADM.removeAll();for(var j=0;j<jsonData.length;j++)jsonData[j].type=="DB Util"?(self.wsServiceName==jsonData[j].name&&(jsonData[j].isFullRepository=!0),self.newmigrationplanResourcesDB.push(new migrationobject(jsonData[j].resid,jsonData[j].name,jsonData[j].readonly,jsonData[j].selected,null,jsonData[j].type,jsonData[j].isFullRepository,jsonData[j].wsVersion,jsonData[j].wsName,jsonData[j].wsLanguages))):self.newmigrationplanResourcesADM.push(new migrationobject(jsonData[j].resid,jsonData[j].name,jsonData[j].readonly,jsonData[j].selected,jsonData[j].sequenceNo,jsonData[j].type));jsonData.length>0&&($(".siebui-accordionContentDBEdit").show(),$(".siebui-accordionContentADMEdit").show(),$(".siebui-accordionButtonEdit").click(function(){var e=$(this);e.find(">:first-child").hasClass("siebui-icon-arrow-right")?(e.find(">:first-child").addClass("siebui-icon-arrow-down").removeClass("siebui-icon-arrow-right"),e.nextAll("fieldset").first().slideDown("normal"),e.addClass("on")):(e.find(">:first-child").addClass("siebui-icon-arrow-right").removeClass("siebui-icon-arrow-down"),e.nextAll("fieldset").first().slideUp("normal"),e.removeClass("on"))})),self.ruleValidation()}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey=="INTL_DUPLICATE_SESSION")sessionWarningMessage();else if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})):sessionWarningMessage()}}},self.getMigrationObjects=function(){if($("#migrationSource").html()==""&&$("#migrationDest").html()=="")alert(i18n_resources.INTL_MIGRATION_REFRESH_MANDATE||"You must select both Source and Destination in order to proceed");else{var responseData=[];!self.isSave()&&self.editMigrationPlanDetails.sourceId==sourceId&&self.editMigrationPlanDetails.destId==destId?responseData=self.editMigrationPlanDetails.resources:($("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Plan?sourceConnId="+sourceId+"&targetConnId="+destId,type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!1,success:function(response){$("#maskoverlay").addClass("hide");if(response&&response.status)if(response["status"]=="error")if(typeof i18n_resources!="undefined"&&response.msgKey){if(i18n_resources[response.msgKey]){
validationMessage=i18n_resources[response.msgKey];if(response.msgParamValueArr)for(var index=0;index<response.msgParamValueArr.length;index++)validationMessage=validationMessage.replace("%"+(index+1),response.msgParamValueArr[index])}else response.msg?validationMessage=response.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(response["msgKey"]=="INTL_SESSION_EXP"||response["msgKey"]=="INTL_INVL_USR")&&signOut()}else response.msg?alert(response.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else response.data?responseData=eval(response.data.resources):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}}));if(responseData.length>0){self.newmigrationplanResourcesDB.removeAll(),self.newmigrationplanResourcesADM.removeAll();for(var j=0;j<responseData.length;j++)responseData[j].type=="DB Util"?(self.migrationPlansSource==""&&(responseData[j].isFullRepository=!1),self.newmigrationplanResourcesDB.push(new migrationobject(responseData[j].resid,responseData[j].name,responseData[j].readonly,!1,null,responseData[j].type,responseData[j].isFullRepository,responseData[j].wsVersion,responseData[j].wsName,responseData[j].wsLanguages))):self.newmigrationplanResourcesADM.push(new migrationobject(responseData[j].resid,responseData[j].name,responseData[j].readonly,!1,null,responseData[j].type));responseData.length>0&&($(".siebui-accordionContentDBEdit").show(),$(".siebui-accordionContentADMEdit").show())}}},self.ruleValidation=function(){var e=!1;Object.keys(ruleValidation).forEach(function(t){for(var n=0;n<self.newmigrationplanResourcesDB().length&&!e;n++)if(self.newmigrationplanResourcesDB()[n].name()==t&&!e&&self.newmigrationplanResourcesDB()[n].selected()&&!e){for(var r=0;r<ruleValidation[t].readOnly.length&&!e;r++)for(var i=0;i<self.newmigrationplanResourcesDB().length&&!e;i++)self.newmigrationplanResourcesDB()[i].name()==ruleValidation[t]["readOnly"][r]&&self.newmigrationplanResourcesDB()[i].selected(null);e=!0}})},self.toggleMigrationObjects=function(e,t){t.stopPropagation(),!e.selected()&&e.isFullRepository()&&sourceId!=""&&sourceId!==undefined&&self.getRRInfo(e,t),e.selected(!e.selected()),Object.keys(ruleValidation).forEach(function(n){if(e.name()==n){for(var r=0;r<self.newmigrationplanResourcesDB().length;r++){for(var i=0;i<ruleValidation[n].readOnly.length;i++)if(self.newmigrationplanResourcesDB()[r].name()==ruleValidation[n]["readOnly"][i])if(e.selected())self.newmigrationplanResourcesDB()[r].selected(null);else{self.newmigrationplanResourcesDB()[r].selected(!1);if(ruleValidation[self.newmigrationplanResourcesDB()[r].name()]&&ruleValidation[self.newmigrationplanResourcesDB()[r].name()].readOnly)for(var s=0;s<ruleValidation[self.newmigrationplanResourcesDB()[r].name()].readOnly.length;s++)for(var o=0;o<self.newmigrationplanResourcesDB().length;o++)self.newmigrationplanResourcesDB()[o].name()==ruleValidation[self.newmigrationplanResourcesDB()[r].name()]["readOnly"][s]&&self.newmigrationplanResourcesDB()[o].selected(!1)}var u=sessionStorage.getItem("dbType");for(var i=0;i<ruleValidation[n].defaultSelect.length;i++)if(self.newmigrationplanResourcesDB()[r].name()==ruleValidation[n]["defaultSelect"][i]){if(u=="DB2 390"&&ruleValidation[n]["defaultSelect"][i]=="Schema Service")continue;if(e.selected())if(self.newmigrationplanResourcesDB()[r].isFullRepository())if(self.getRRInfo(self.newmigrationplanResourcesDB()[r],t)==0){self.newmigrationplanResourcesDB()[r].selected(!1);for(var o=0;o<self.newmigrationplanResourcesDB().length;o++){for(var a=0;a<ruleValidation[n].readOnly.length;a++)self.newmigrationplanResourcesDB()[o].name()==ruleValidation[n]["readOnly"][a]&&self.newmigrationplanResourcesDB()[o].selected(!1);for(var f=0;f<ruleValidation[n].defaultSelect.length;f++)self.newmigrationplanResourcesDB()[o].name()==ruleValidation[n]["defaultSelect"][f]&&self.newmigrationplanResourcesDB()[o].selected(!1)}e.selected(!1)}else self.newmigrationplanResourcesDB()[r].selected(!0);else self.newmigrationplanResourcesDB()[r].selected(!0);else self.newmigrationplanResourcesDB()[r].selected(!1)}if(!e.selected())for(var i=0;i<ruleValidation[n].unSelect.length;i++){if(u=="DB2 390")break;self.newmigrationplanResourcesDB()[r].name()==ruleValidation[n]["unSelect"][i]&&self.newmigrationplanResourcesDB()[r].selected(!1)}}return}})},self.resetDroppedConnection=function(e){$("#resetSource").click(function(){var e=confirm(i18n_resources.INTL_REMOVE_SOURCE_CONFIRM||"Are you sure you want to remove the source connection?");e&&($("#migrationSource").empty(),$("#resetSource").hide(),sourceId="",$("#migrationSource").parent().removeClass("siebui-d2p-dropped"),$(".siebui-d2p-source-placeholder").show(),self.migrationPlansSource="",$("#migrationSource").html()==""&&$("#migrationDest").html()==""&&self.resetMigrationObjects(),$("#migrationDest").html()!=""&&self.getMigrationObjects
(),$("#migrationSource").removeAttr("connectionStatus"),migrationplanViewModel.statusCheck($("#migrationSource").attr("connectionStatus"),$("#migrationDest").attr("connectionStatus")))}),$("#resetDest").click(function(){var e=confirm(i18n_resources.INTL_REMOVE_DEST_CONFIRM||"Are you sure you want to remove the target connection?");e&&($("#migrationDest").empty(),$("#resetDest").hide(),destId="",$("#migrationDest").parent().removeClass("siebui-d2p-dropped"),$(".siebui-d2p-dest-placeholder").show(),self.migrationPlansDestination="",$("#migrationSource").html()==""&&$("#migrationDest").html()==""&&self.resetMigrationObjects(),$("#migrationSource").html()!=""&&self.getMigrationObjects(),$("#migrationDest").removeAttr("connectionStatus"),migrationplanViewModel.statusCheck($("#migrationSource").attr("connectionStatus"),$("#migrationDest").attr("connectionStatus")))})},self.statusCheck=function(e,t){e=="true"||t=="true"?($(".siebui-d2p-arrow").removeClass("siebui-d2p-inactive-plan").addClass("siebui-d2p-active-plan"),self.refreshEnable(!0)):($(".siebui-d2p-arrow").removeClass("siebui-d2p-active-plan"),self.refreshEnable(!1))},self.openSiebelApplication=function(e,t){t.stopPropagation();if(!migrationFirstLoad){var n="";$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"Plan?method=getApplicationInfo",type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!1,success:function(e){$("#maskoverlay").addClass("hide");if(e&&e.status)if(e["status"]=="error")if(typeof i18n_resources!="undefined"&&e.msgKey){if(i18n_resources[e.msgKey]){validationMessage=i18n_resources[e.msgKey];if(e.msgParamValueArr)for(var t=0;t<e.msgParamValueArr.length;t++)validationMessage=validationMessage.replace("%"+(t+1),e.msgParamValueArr[t])}else e.msg?validationMessage=e.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(e["msgKey"]=="INTL_SESSION_EXP"||e["msgKey"]=="INTL_INVL_USR")&&signOut()}else e.msg?alert(e.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else e.data?n=e.data:alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}});if(n&&n!=""&&n.indexOf("null")===-1){var r=self.selectedConnection+"/app/"+n;e=="DBUtils"?r+="?SWECmd=GotoView&SWEView=Application+Data+Rule+Expression+View":r+="?SWECmd=GotoView&SWEView=UDA+Project+Administration+View";var i=window.screen.width*.8,s=window.screen.height*.7,o=window.screen.height*.1,u=window.screen.width*.1;n!=""&&window.open(r,"_blank","height="+s+",width="+i+",resizable=yes,left="+u+",top="+o+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no")}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}},self.getHostUrl=function(e){var e=e,t=e.charAt(e.length-1),n;return t==="/"&&(e=e.slice(0,e.length-1)),n=e.slice(0,e.lastIndexOf("/")),n}}function allowDrop(e){e.preventDefault()}function drag(e,t){draggedConnectionName=e.target.lastElementChild.innerHTML,draggedConnectionId=e.target.lastElementChild.id,draggedConnectionEndpoint=$("#"+e.target.lastElementChild.id).attr("endpoint"),draggedConnectionStatus=$("#"+e.target.lastElementChild.id).attr("connectionStatus")}function dropDest(e){e.preventDefault(),document.getElementById("migrationSource").innerHTML!=draggedConnectionName?$("#migrationSource").attr("endpoint")!=draggedConnectionEndpoint?($("#migrationDest").attr("endpoint",draggedConnectionEndpoint),$("#migrationDest").attr("connectionStatus",draggedConnectionStatus),migrationplanViewModel.migrationPlansDestination=document.getElementById("migrationDest").innerHTML=draggedConnectionName,destId=draggedConnectionId,$("#resetDest").show(),$("#migrationDest").parent().addClass("siebui-d2p-dropped"),$(".siebui-d2p-dest-placeholder").hide(),(document.getElementById("migrationSource").innerHTML||document.getElementById("migrationDest").innerHTML)&&migrationplanViewModel.getMigrationObjects(),migrationplanViewModel.statusCheck($("#migrationSource").attr("connectionStatus"),$("#migrationDest").attr("connectionStatus"))):alert(i18n_resources.INTL_ENDPOINT_ERROR||"Source and Destination can not be same Endpoint"):alert(i18n_resources.INTL_ADD_SOURCE_ERROR||"Can not add connnection same as source")}function dropSource(e){e.preventDefault(),document.getElementById("migrationDest").innerHTML!=draggedConnectionName?$("#migrationDest").attr("endpoint")!=draggedConnectionEndpoint?($("#migrationSource").attr("endpoint",draggedConnectionEndpoint),$("#migrationSource").attr("connectionStatus",draggedConnectionStatus),migrationplanViewModel.migrationPlansSource=document.getElementById("migrationSource").innerHTML=draggedConnectionName,sourceId=draggedConnectionId,$("#resetSource").show(),$("#migrationSource").parent().addClass("siebui-d2p-dropped"),$(".siebui-d2p-source-placeholder").hide(),(document
.getElementById("migrationSource").innerHTML||document.getElementById("migrationDest").innerHTML)&&migrationplanViewModel.getMigrationObjects(),migrationplanViewModel.statusCheck($("#migrationSource").attr("connectionStatus"),$("#migrationDest").attr("connectionStatus"))):alert(i18n_resources.INTL_ENDPOINT_ERROR||"Source and Destination can not be same Endpoint"):alert(i18n_resources.INTL_ADD_DEST_ERROR||"Can not add connnection same as target")}function HistoryViewModel(){var e=this;e.historyList=[],e.historyListAll=[],e.execresourceList={},e.serverResponse=[],e.headerCBValArr=[],e.headerCBIndetArr=[],e.getAllHistoryplan=function(){$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"History",type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",async:!0,success:function(t){$("#maskoverlay").addClass("hide");if(t&&t.status)if(t["status"].toLowerCase()=="error")if(typeof i18n_resources!="undefined"&&t.msgKey){if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey];if(t.msgParamValueArr)for(var n=0;n<t.msgParamValueArr.length;n++)validationMessage=validationMessage.replace("%"+(n+1),t.msgParamValueArr[n])}else t.msg?validationMessage=t.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")&&signOut()}else t.msg?alert(t.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else if(t.data){t=t.data,historyResponse=t,e.gridDataLoad(t,!0),currentGridPage=1;var r=$("#history-table").jqGrid("getGridParam","rowNum");totalGridPage=Math.ceil(e.historyList.length/r),$("#cb_history_header").prop("checked",!1),$("#cb_history_header").prop("indeterminate",!1),historyPaginationFlag&&($(".ui-icon-seek-next").click(function(){currentGridPage<totalGridPage&&(currentGridPage+=1,loadPaging(e.historyList),$("#cb_history_header").prop("checked",e.headerCBValArr[currentGridPage-1]),$("#cb_history_header").prop("indeterminate",e.headerCBIndetArr[currentGridPage-1]))}),$(".ui-icon-seek-end").click(function(){currentGridPage<totalGridPage&&(currentGridPage=totalGridPage,loadPaging(e.historyList),$("#cb_history_header").prop("checked",e.headerCBValArr[currentGridPage-1]),$("#cb_history_header").prop("indeterminate",e.headerCBIndetArr[currentGridPage-1]))}),$(".ui-icon-seek-prev").click(function(){currentGridPage>1&&(currentGridPage-=1,loadPaging(e.historyList),$("#cb_history_header").prop("checked",e.headerCBValArr[currentGridPage-1]),$("#cb_history_header").prop("indeterminate",e.headerCBIndetArr[currentGridPage-1]))}),$(".ui-icon-seek-first").click(function(){currentGridPage>1&&(currentGridPage=1,loadPaging(e.historyList),$("#cb_history_header").prop("checked",e.headerCBValArr[currentGridPage-1]),$("#cb_history_header").prop("indeterminate",e.headerCBIndetArr[currentGridPage-1]))}),historyPaginationFlag=!1),loadPaging(e.historyList),historyViewModel.sorting("desc","endDate");for(nCBIndex=0;nCBIndex<totalGridPage;nCBIndex++)e.headerCBValArr[nCBIndex]=!1,e.headerCBIndetArr[nCBIndex]=!1}else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}}),$("#cb_history_header").on("click",function(t){checkboxVal=$(this).is(":checked"),currPageIds=$("#history-table").getDataIDs(),currPageIds.forEach(function(e){$("#cb_"+e).prop("checked",checkboxVal)}),e.headerCBValArr[currentGridPage-1]=checkboxVal,e.headerCBIndetArr[currentGridPage-1]=!1;var n=(currentGridPage-1)*paginationRowCount,r=currentGridPage*paginationRowCount;r>e.historyList.length&&(r=e.historyList.length);for(nRowIndex=n;nRowIndex<r;nRowIndex++)e.historyList[nRowIndex].cell[0]=checkboxVal;e.headerCBValArr.some(Boolean)||e.headerCBIndetArr.some(Boolean)?($(".siebui-d2p-history-delete").show(),$(".siebui-d2p-history-delete-disabled").hide()):($(".siebui-d2p-history-delete").hide(),$(".siebui-d2p-history-delete-disabled").show())}),$("#history-table").on("click",".siebui-d2p-checkbox > input",function(t){var n=(currentGridPage-1)*paginationRowCount,r=currentGridPage*paginationRowCount,i=[];r>e.historyList.length&&(r=e.historyList.length);var s=this.id.substring(3);for(nRowIndex=n;nRowIndex<r;nRowIndex++)e.historyList[nRowIndex]["id"]==s&&(e.historyList[nRowIndex].cell[0]=$(this).is(":checked")),i[nRowIndex]=e.historyList[nRowIndex].cell[0];isAllChecked=i.every(Boolean),isSomeChecked=i.some(Boolean),isIndeterminate=!isAllChecked&&isAllChecked!==isSomeChecked,$("#cb_history_header").prop("checked",isAllChecked),$("#cb_history_header").prop("indeterminate",isIndeterminate),e.headerCBValArr[currentGridPage-1]=isAllChecked,e.headerCBIndetArr[currentGridPage-1]=isIndeterminate,e.headerCBValArr.some(Boolean)||e.headerCBIndetArr.some(Boolean)?($(".siebui-d2p-history-delete").show(),$(".siebui-d2p-history-delete-disabled").hide()):($(".siebui-d2p-history-delete").hide(),$(".siebui-d2p-history-delete-disabled")
.show())})},e.sorting=function(t,n){t=="asc"?n=="stDate"||n=="endDate"?historyResponse.sort(function(e,t){var r=+(new Date(e[n].replace(/-/g,"/")))||Number.MAX_SAFE_INTEGER,i=+(new Date(t[n].replace(/-/g,"/")))||Number.MAX_SAFE_INTEGER;return r-i}):historyResponse.sort(function(e,t){return e[n]?e[n].localeCompare(t[n]):(e[n]="",e[n].localeCompare(t[n]))}):n=="stDate"||n=="endDate"?historyResponse.sort(function(e,t){var r=+(new Date(e[n].replace(/-/g,"/")))||Number.MAX_SAFE_INTEGER,i=+(new Date(t[n].replace(/-/g,"/")))||Number.MAX_SAFE_INTEGER;return i-r}):historyResponse.sort(function(e,t){return t[n]?t[n].localeCompare(e[n]):(t[n]="",t[n].localeCompare(e[n]))}),e.gridDataLoad(historyResponse,!1)},e.gridDataLoad=function(t,n){e.historyList=[],e.historyListAll=[],e.execresourceList={};for(var r=0;r<t.length;r++){var i={},s=t[r].status;i.id=t[r].rowId,i.cell=[!1,t[r].PlanName,t[r].description,s,t[r].srcConnName,t[r].trgtConnName,t[r].rowId,t[r].stDate,t[r].endDate,t[r].packageName],i.txnId=t[r].rowId,e.historyList.push(i),n&&(restURI={},restURI.source=t[r].sourceURI,restURI.target=t[r].targetURI,connURIMap.set(t[r].rowId,restURI)),e.execresourceList[t[r].rowId]=[];for(var o=0;o<t[r].resources.length;o++){var u={};u.id=t[r].resources[o].rowId,u.name=t[r].resources[o].resName,u.operation=t[r].resources[o].method,u.status=t[r].resources[o].status,u.sequenceNo=t[r].resources[o].seqNum,u.start=t[r].resources[o].stDate,u.end=t[r].resources[o].endDate,u.log="Get Log",e.execresourceList[t[r].rowId].push(u)}}e.historyListAll=e.historyList;var a=e.historyList.length;a>paginationRowCount&&$("#historypager").show(),loadPaging(e.historyList)},e.bindEvents=function(){$(".siebui-d2p-getlog").click(function(t){t.stopPropagation(),resId=$(this).attr("id").replace("getLog_",""),histId=$(this).closest($("table")).attr("id").replace("history-table_","").replace("_t",""),e.getLogInfo(resId,histId)})},e.getLogInfo=function(e,t){$("#maskoverlay").removeClass("hide"),$.ajax({url:baseUrl+"History?rowId="+e+"&method=log&parentId="+t,type:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},dataType:"json",data:e,async:!0,success:function(e){$("#maskoverlay").addClass("hide");if(e&&e.status)if(e["status"].toLowerCase()=="error")if(typeof i18n_resources!="undefined"&&e.msgKey){if(i18n_resources[e.msgKey]){validationMessage=i18n_resources[e.msgKey];if(e.msgParamValueArr)for(var t=0;t<e.msgParamValueArr.length;t++)validationMessage=validationMessage.replace("%"+(t+1),e.msgParamValueArr[t])}else e.msg?validationMessage=e.msg:validationMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(e["msgKey"]=="INTL_SESSION_EXP"||e["msgKey"]=="INTL_INVL_USR")&&signOut()}else e.msg?alert(e.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else e.data?($("#historyLog").removeClass("hide"),$("#historyLogContent").html(e.data.log),$(".close").click(function(){$("#historyLog").addClass("hide")})):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage="Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})},e.queryHistoryRecords=function(e,t){t.stopPropagation(),$(".ui-search-toolbar").show(),$(".ui-jqgrid-hbox").css("overflow-x","scroll"),$(".siebui-d2p-history-query").hide(),$("#history-table").hide(),$("#cb_history_header").hide(),$(".ui-jqgrid-pager").hide(),$(".siebui-icon-query-go").show(),$(".siebui-icon-query-cancel").show(),$(".siebui-d2p-history-delete").hide(),$(".siebui-d2p-history-delete-disabled").hide()},e.executeQueryHistoryRecords=function(t,n){n.stopPropagation(),$(".ui-search-toolbar").hide(),$(".ui-jqgrid-hbox").css("overflow-x","unset"),$(".siebui-d2p-history-query").show(),$("#history-table").show(),$("#cb_history_header").show(),$(".ui-jqgrid-pager").show(),$(".siebui-icon-query-go").hide(),$(".siebui-icon-query-cancel").hide(),e.headerCBValArr.some(Boolean)||e.headerCBIndetArr.some(Boolean)?$(".siebui-d2p-history-delete").show():$(".siebui-d2p-history-delete-disabled").show();var r=$("#history-table"),i=r.jqGrid("getGridParam","postData");if(i.filters!==undefined){var s=JSON.parse(i.filters),o=[];if(s.rules.length>0){var u=!1;e.historyList=e.historyListAll;for(nDataIdx=0;nDataIdx<e.historyList.length;nDataIdx++){for(nRulesIdx=0;nRulesIdx<s.rules.length;nRulesIdx++){nFldIdx=fieldMap.get(s.rules[nRulesIdx].field),listData=e.historyList[nDataIdx].cell[nFldIdx],strOper=s.rules[nRulesIdx].op,strData=s.rules[nRulesIdx].data;switch(strOper){case"eq":listData==strData?u=!0:u=!1;break;case"ne":listData!=strData?u=!0:u=!1;break;case"bw":listData.startsWith(strData)?u=!0:u=!1;break;case"bn":listData.startsWith(strData)?u=!1:u=!0;break;case"ew":listData.endsWith(strData)?u=!0:u=!1;break;case"en":listData.endsWith(strData)?u=!1:u=!0;break;case"cn":listData.includes(strData)?u=!0:u=!1;break;case"nc":listData.includes(strData)?u=!1:u=!0;break;case"ge":listData>=strData?u=!0:u=!1;break;case"le":listData<=strData?u=!0:u=!1;break;case"lt"
:listData<strData?u=!0:u=!1;break;case"gt":listData>strData?u=!0:u=!1;break;default:u=!1,console.log("ERROR: Unrecognized operator "+strOper+" found for field "+strField)}if(!u)break}u&&o.push(e.historyList[nDataIdx]),u=!1}currentGridPage=1;var a=$("#history-table").jqGrid("getGridParam","rowNum");totalGridPage=Math.ceil(o.length/a),e.historyList=[],e.historyList=o,loadPaging(e.historyList),r[0].clearToolbar()}else if(e.historyList!=e.historyListAll){e.historyList=[],e.historyList=e.historyListAll,currentGridPage=1;var a=$("#history-table").jqGrid("getGridParam","rowNum");totalGridPage=Math.ceil(e.historyList.length/a),loadPaging(e.historyList)}}else if(e.historyList!=e.historyListAll){e.historyList=[],e.historyList=e.historyListAll,currentGridPage=1;var a=$("#history-table").jqGrid("getGridParam","rowNum");totalGridPage=Math.ceil(e.historyList.length/a),loadPaging(e.historyList)}},e.undoQueryHistoryRecords=function(t,n){n.stopPropagation(),$(".ui-search-toolbar").hide(),$(".ui-jqgrid-hbox").css("overflow-x","unset"),$(".siebui-d2p-history-query").show(),$("#history-table").show(),$("#cb_history_header").show(),$(".ui-jqgrid-pager").show(),$(".siebui-icon-query-go").hide(),$(".siebui-icon-query-cancel").hide(),e.headerCBValArr.some(Boolean)||e.headerCBIndetArr.some(Boolean)?$(".siebui-d2p-history-delete").show():$(".siebui-d2p-history-delete-disabled").show()},e.deleteHistoryRecords=function(t,n){function f(t){e.histRecord=t;var n=JSON.stringify(t);$.ajax({url:baseUrl+"History?data="+n,type:"DELETE",crossDomain:!0,headers:{"Content-Type":"application/json"},data:JSON.stringify({SRN:sessionNumber,data:n}),dataType:"json",async:!1,success:function(t){$("#maskoverlay").addClass("hide");if(t&&t.status)if(t["ignoreFile"]=="Y"){confirmDiaglogMsg=i18n_resources.INTL_DELETE_LOG_CONFIRM_MSG||"Unable to delete the migration data/log files for '%1'. Do you want to delete the history record?\nIf you select 'OK', you will need to clean up the Migration data and log files manually.",alertMsg=confirmDiaglogMsg.replace("%1",e.histRecord.planName);var n=confirm(alertMsg);n&&(e.histRecord.deleteFile=!1,f(e.histRecord))}else if(t["status"]=="error")if(typeof i18n_resources!="undefined"&&t.msgKey){if(i18n_resources[t.msgKey]){validationMessage=i18n_resources[t.msgKey];if(t.msgParamValueArr)for(var r=0;r<t.msgParamValueArr.length;r++)validationMessage=validationMessage.replace("%"+(r+1),t.msgParamValueArr[r])}else t.msg?validationMessage=t.msg:validationMessage=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(validationMessage),(t["msgKey"]=="INTL_SESSION_EXP"||t["msgKey"]=="INTL_INVL_USR")&&signOut()}else t.msg?alert(t.msg):(mes=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time",alert(mes));else t["status"].toLowerCase()=="success"?e.arrDelRecRowId.push(e.histRecord.id):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time");else alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")},error:function(e,t,n){$("#maskoverlay").addClass("hide");var r=e.responseText?JSON.parse(e.responseText):"";if(r&&r.msgKey=="INTL_DUPLICATE_SESSION")sessionWarningMessage();else if(r&&r.msgKey&&typeof i18n_resources!="undefined"){if(i18n_resources[r.msgKey]){errMessage=i18n_resources[r.msgKey];if(r.msgParamValueArr)for(var i=0;i<r.msgParamValueArr.length;i++)errMessage=errMessage.replace("%"+(i+1),r.msgParamValueArr[i])}else r.msg?errMessage=r.msg:errMessage=i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time";alert(errMessage),(r.msgKey=="INTL_SESSION_EXP"||r.msgKey=="INTL_SRVR_401")&&signOut()}else r&&r.msg?alert(r.msg):alert(i18n_resources.INTL_SRVR_GENERIC||"Server you are trying to access is either busy or experiencing difficulties. Try after some time")}})}n.stopPropagation();var r="",i="",s=[],o,u=[];for(nIndex=0;nIndex<e.historyList.length;nIndex++)e.historyList[nIndex].cell[0]&&(histRec={},histRec.id=e.historyList[nIndex].id,histRec.planName=e.historyList[nIndex].cell[1],histRec.sourceName=e.historyList[nIndex].cell[4],histRec.targetName=e.historyList[nIndex].cell[5],histRec.fileName=e.historyList[nIndex].cell[9],histRec.sourceURI=connURIMap.get(e.historyList[nIndex].id).source,histRec.targetURI=connURIMap.get(e.historyList[nIndex].id).target,histRec.deleteFile=!0,u.push(histRec),s.push(e.historyList[nIndex].id),r+=e.historyList[nIndex].id+"\n",i+=e.historyList[nIndex].cell[1]+" - "+e.historyList[nIndex].cell[7]+"\n");jsonData='{"rowIds": '+JSON.stringify(s)+"}",confirmDelMsg=i18n_resources.INTL_DELETE_CONFIRM_MSG||"You have selected the below records. Do you want to delete them?",confirmDelMsg+="\n"+i;var a=confirm(confirmDelMsg);a&&(sessionNumber?(e.arrDelRecRowId=[],$("#maskoverlay").removeClass("hide"),u.forEach(f),historyViewModel.getAllHistoryplan()):sessionWarningMessage())}}function connection(e,t,n,r,i,s,o,u,a,f,l){return{id:ko.observable(e),name:ko.observable(t),migrationobject:ko.observableArray([]),status:ko.observable(n),favourite:ko.observable(r),restUrl:ko.observable(i),deleteEnable:ko.observable(!0),refreshEnable:ko.observable(!0),repoUpgraded:ko.observable(!1),watermarkEnable:ko.observable(!0),userName:ko.observable(s),tblspcName:ko.observable(o),tblspcInd:ko.observable(u),tblspcPage16:ko.observable(a),tblspcPage32:ko.observable(f),unicode:ko.observable(l)}}function migrationobject(e,t,n,r,i,s,o,u,a,f){return{resid:ko.observable(e),name:ko.observable(t),readonly:ko.observable(n),selected:ko.observable(r),sequenceNo:ko.observable(i),type:ko.observable(s),isFullRepository:ko.observable(o),wsVersion:ko.observable(u),wsName:ko.observable(a),wsLanguages:ko.observable(f)}}function fullRepObject(
e){return{id:ko.observable(e),workspaces:ko.observableArray([]),wsLanguages:ko.observableArray([]),wsNameSelected:ko.observable(),wsVersionSelected:ko.observable(),wsMaxVersion:ko.observable()}}function wsRepVersion(e,t){return{name:ko.observable(e),version:ko.observable(t)}}function migrationplan(e,t,n,r,i,s,o,u,a,f){return{id:ko.observable(e),name:ko.observable(t),source:ko.observable(n),destination:ko.observable(r),migrationobjects:ko.observableArray([]),status:ko.observable(!0),version:ko.observable(i),sourceConnId:ko.observable(s),targetConnId:ko.observable(o),wsService:ko.observable(u),type:ko.observable(a),typeIconClass:ko.observable(f),deleteEnable:ko.observable(!0)}}function execution(e,t,n,r,i,s,o){return{id:ko.observable(e),planName:ko.observable(t),status:ko.observable(n),version:ko.observable(r),trackingId:ko.observable(i),startDate:ko.observable(s),endDate:ko.observable(o)}}function migrationObjectStatus(e,t,n,r,i,s){return{id:ko.observable(e),name:ko.observable(t),status:ko.observable(n),sequenceNo:ko.observable(r),startDate:ko.observable(i),endDate:ko.observable(s)}}var ruleValidation={"Design Repository Data Service":{readOnly:["Runtime Repository Data Service","Incremental Runtime Repository Data Service","Incremental Application Workspace Data Service"],defaultSelect:["Schema Service","Application Workspace Data Service"],unSelect:[]},"Runtime Repository Data Service":{readOnly:["Design Repository Data Service","Incremental Runtime Repository Data Service","Incremental Application Workspace Data Service"],defaultSelect:["Schema Service","Application Workspace Data Service"],unSelect:[]},"Incremental Runtime Repository Data Service":{readOnly:["Design Repository Data Service","Runtime Repository Data Service","Application Workspace Data Service"],defaultSelect:["Schema Service"],unSelect:[]},"Application Workspace Data Service":{readOnly:["Incremental Runtime Repository Data Service","Design Repository Data Service","Incremental Application Workspace Data Service"],defaultSelect:["Schema Service","Runtime Repository Data Service"],unSelect:[]},"Incremental Application Workspace Data Service":{readOnly:["Application Workspace Data Service","Design Repository Data Service","Runtime Repository Data Service"],defaultSelect:[],unSelect:[]},"Schema Service":{readOnly:[],defaultSelect:[],unSelect:["Design Repository Data Service","Runtime Repository Data Service","Incremental Runtime Repository Data Service","Application Workspace Data Service","Incremental Application Workspace Data Service"]}},paginationRowCount=10,currentTab="connection",sessionNumber;ko.options.foreachHidesDestroyed=!0,function(){var e=localStorage.getItem("migration-language")||"enu",t="locale/message_"+e+".js",n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("script");r.addEventListener("load",function(){htmlLanguageParse(document)}),r.type="text/javascript",r.src=t,r.async=!1,n.appendChild(r)}(),$(document).ready(function(){function e(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}$("#signOut").click(function(){signOut()}),$(".close").click(function(){console.log("error close"),$("#errPopup").hide(),$("#executionLog").hide()}),$("#container").undelegate().delegate("","click",function(e){var t=$(this),n=$(e.target);t.find(".siebui-action-area").removeClass("active-area"),n.parents(".siebui-action-area").addClass("active-area")}),$("#maskoverlay").addClass("hide")}),$(window).bind("beforeunload",function(){window.location.pathname.indexOf("index")!==-1&&sessionNumber&&sessionStorage.setItem("SRN",sessionNumber)});var connectionViewModel=new ConnectionViewModel,connectionFirstLoad=!0,smallScreenMaxWidth=991;$("#connection-template").load("templates/connections.html",function(){ko.applyBindings(connectionViewModel,document.getElementById("tabs-connection")),updateSRN(),connectionFirstLoad&&sessionNumber&&$(document).ready(function(){connectionLoad(),connectionViewModel.checkAllConnectionStatus(),connectionFirstLoad=!1,typeof i18n_resources!="undefined"&&htmlLanguageParse("connectionTitle")})}),$("#connectionTabs").click(function(){connectionLoad(),connectionViewModel.updateCheckAliveStatus()}),$(window).on("resize",function(e){currentTab=="connection"?connectionViewModel&&connectionViewModel.resetScroll():currentTab=="migration"&&migrationplanViewModel&&migrationplanViewModel.resetScroll()}),$("#loggedUser").text(localStorage.username);var executionViewModel=new ExecutionViewModel,executionFirstLoad=!0,tblspcName="",tblspcInd="",tblspcPage16="",tblspcPage32="",executionUsername="",unicode="",wsLanguagesFRR="";$("#executionTabs").click(function(){if(executionFirstLoad){$("#maskoverlay").removeClass("hide");var e=i18n_resources.INTL_LABEL_NAME||"Name",t=i18n_resources.INTL_LABEL_VERSION||"Version",n=i18n_resources.INTL_LABEL_STATUS||"Status",r=i18n_resources.INTL_LABEL_ACTION||"Action",i=i18n_resources.INTL_LABEL_STARTDATE||"Start Date",s=i18n_resources.INTL_LABEL_ENDDATE||"End Date",o=i18n_resources.INTL_LABEL_PACKAGENAME||"Package Name",u=i18n_resources.INTL_LABEL_SOURCE||"Source",a=i18n_resources.INTL_LABEL_TARGET||"Target",f=i18n_resources.INTL_LABEL_ARCHIVE_ID||"Archive ID",l=i18n_resources.INTL_LABEL_LOG||"Log",c=i18n_resources.INTL_LABEL_RESOURCE_NAME||"Resource Name",h=i18n_resources.INTL_LABEL_OPERATION||"Operation",p=i18n_resources.INTL_LABEL_SEQUENCE||"Seq No",d=i18n_resources.INTL_LABEL_NOTAPPLICABLE||"Not Applicable",v=i18n_resources.INTL_LABEL_RUNNING||"Running",m=i18n_resources.INTL_SUCCESS_STATUS||"Success",g=i18n_resources.INTL_ERROR_STATUS||"Error",y=i18n_resources.INTL_LABEL_NOTSTARTED||"Not Started";executionFirstLoad=!1;var b=32,w=isRTL()?"rtl":"ltr",E=sessionStorage.getItem("repoUpgraded")==="true";function S(e,t,n){return n["name"]=="ActivateWorkflowsTasks"||n["name"]=="InvalidateSeedCaches"?"":t["rowId"]=="unknown"||n["status"]=="Not Started"||n["status"]=="Not Applicable"?"<button disabled id=getLog_"+
t.rowId+' class="btn btn-alt siebui-d2p-getlog" type="button">'+l+"</button>":"<button id=getLog_"+t.rowId+' class="btn btn-alt siebui-d2p-getlog" type="button">'+l+"</button>"}function x(e,t,n){if(e=="Running")return v;if(e=="Success")return m;if(e=="Error")return g;if(e.indexOf("<span>")===-1)return e}function T(e,t,n){var r=i18n_resources.INTL_LABEL_STOP||"Stop";if(e!="Run Now"){if(e=="No resources"){var i="No Resources for Run";return'<div disabled="true" id=runNow_'+t.rowId+' class="siebui-d2p-runnow siebui-icon-start" '+"title="+i+"></div>"}return n instanceof Array?"<div id=getExecutionStatus_"+n[6]+' class="siebui-d2p-stop-exec siebui-icon-stop" '+"title="+r+"></div>":"<div id=getExecutionStatus_"+n.txnId+' class="siebui-d2p-stop-exec siebui-icon-stop" '+"title="+r+"></div>"}var i=i18n_resources.INTL_LABEL_RUN_NOW||"Run";if(n[6]==1){if(!n[4]||n[4]=="")return"<div id=runNow_"+t.rowId+' class="siebui-d2p-runnow siebui-icon-start siebui-d2p-prompt-true" type="schemaImport" '+"title="+i+"></div>";if(!n[5]||n[5]=="")return"<div id=runNow_"+t.rowId+' class="siebui-d2p-runnow siebui-icon-start siebui-d2p-prompt-true" type="export" '+"title="+i+"></div>";if(n[5]&&n[5]!=""&&n[4]&&n[4]!="")return"<div id=runNow_"+t.rowId+' class="siebui-d2p-runnow siebui-icon-start siebui-d2p-prompt-true" type="schemaImportExport" '+"title="+i+"></div>"}else{if(!n[4]||n[4]=="")return"<div id=runNow_"+t.rowId+' class="siebui-d2p-runnow siebui-icon-start siebui-d2p-prompt-watermark-false" type="import" '+"title="+i+"></div>";if(!n[5]||n[5]=="")return"<div id=runNow_"+t.rowId+' class="siebui-d2p-runnow siebui-icon-start siebui-d2p-prompt-watermark" type="export" '+"title="+i+"></div>";if(n[5]&&n[5]!=""&&n[4]&&n[4]!="")return"<div id=runNow_"+t.rowId+' class="siebui-d2p-runnow siebui-icon-start siebui-d2p-prompt-false" type="importExport" '+"title="+i+"></div>"}}function N(e,t,n){return e=="Running"?"<span id=resorceStatus_"+t.rowId+" >"+v+" </span>":e=="Success"?"<span id=resorceStatus_"+t.rowId+" >"+m+" </span>":e=="Error"?"<span id=resorceStatus_"+t.rowId+" >"+g+" </span>":e=="Not Applicable"?"<span id=resorceStatus_"+t.rowId+" >"+d+" </span>":e=="Not Started"?"<span id=resorceStatus_"+t.rowId+" >"+y+" </span>":"<span id=resorceStatus_"+t.rowId+" >"+e+" </span>"}function C(e,t,n){if(t["rowId"]=="unknown")return'<div disabled="true" id=getResorceStatus_'+t.rowId+' class="siebui-d2p-refresh-resource siebui-icon-in-progress disabled"></div>';if(e=="Not Started")return"<div id=getResorceStatus_"+t.rowId+' class="siebui-d2p-refresh-resource siebui-icon-in-progress"></div>';if(e.indexOf("<div>")===-1)return"<div id=getResorceStatus_"+t.rowId+' class="siebui-d2p-refresh-resource siebui-icon-in-progress"></div>'}function k(e,t,n){return e==1||e==0?"":e}function L(e,t,n){var r=n[4]==""?"'siebui-d2p-import'":n[5]==""?"'siebui-d2p-export'":"'siebui-d2p-migrate'";return" class="+r}function A(e,t,n){return e?"<span id=resourcePackage_"+t.rowId+" >"+e+" </span>":"<span id=resourcePackage_"+t.rowId+" > </span>"}$("#execution-table").jqGrid({datatype:"local",width:null,direction:w,height:b*19,shrinkToFit:!1,jsonReader:{page:"pageIndex",total:"pageCount",records:"recordCount",root:"rows",repeatitems:!0},rowNum:1e3,colNames:[e,t,n,r,u,a,f,i,s,o],colModel:[{name:"name",index:"name",sortable:!1,cellattr:L,width:170},{name:"version",index:"version",sortable:!1,width:160},{name:"status",index:"status",sortable:!1,formatter:x,width:90},{name:"action",index:"action",sortable:!1,formatter:T,width:50},{name:"source",index:"source",width:135},{name:"target",index:"target",width:135},{name:"txnId",index:"txnId",sortable:!1,formatter:k,width:90},{name:"start",index:"start",sortable:!1,width:150},{name:"end",index:"end",sortable:!1,width:150},{name:"packageName",index:"packageName",formatter:A,sortable:!1,width:150}],multiselect:!1,subGrid:!0,subGridRowExpanded:function(e,t){var o=$("#execution-table").jqGrid("getRowData",t),u=e+"_t";$("#"+e).html("<table id='"+u+"'></table>"),$("#"+u).jqGrid({datatype:"local",shrinkToFit:!1,direction:w,width:null,rowNum:1e3,data:executionViewModel.execresourceList[t],colNames:[c,h,p,n,r,l,i,s],colModel:[{name:"name",sortable:!1,width:180},{name:"operation",sortable:!1,width:150},{name:"sequenceNo",sortable:!1,width:50},{name:"status",sortable:!1,formatter:N,width:100},{name:"action",sortable:!1,formatter:C,width:50},{name:"log",sortable:!1,formatter:S,width:80},{name:"start",sortable:!1,width:180},{name:"end",sortable:!1,width:180}],loadComplete:function(){executionViewModel.bindEvents(),console.log("subgridDivId ======"+e)}})},loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css("text-align","left")},onSelectRow:function(e){$("#execution-table").jqGrid("toggleSubGridRow",e);var t=$("#execution-table").getDataIDs();$.each(t,function(t,n){e!=n&&$("#execution-table").collapseSubGridRow(n)})}}),$("#execution-table").jqGrid("setGridParam",{datatype:"json"}),E||$("#execution-table").jqGrid("hideCol","packageName")}executionViewModel.getAllExecutionplan()}),$("#execution-template").load("templates/execution.html",function(){ko.applyBindings(executionViewModel,document.getElementById("tabs-execution"))});var migrationplanViewModel=new MigrationplanViewModel,sourceId="",destId="",migrationFirstLoad=!0,draggedConnectionName="",draggedConnectionId="",draggedConnectionEndpoint="",draggedConnectionStatus="",migrationEditScreen=!1;$("#migrationTabs").click(function(){migrationplanViewModel.getAllConnections(),migrationplanViewModel.getAllMigrationplan(),migrationplanViewModel.disableDeleteMigrationPlan(),migrationFirstLoad&&(migrationFirstLoad=!1,typeof i18n_resources!="undefined"&&htmlLanguageParse("migrationTitle")),migrationReadSetAccordian()}),$("#migrationplan-template").load("templates/migrationplan.html",function(){ko.applyBindings(migrationplanViewModel,document.getElementById("tabs-migrationRead"))});var historyViewModel=new HistoryViewModel,historyFirstLoad=!0
,currentGridPage=0,totalGridPage=0,historyResponse=[],historyPaginationFlag=!0,connURIMap=new Map;const fieldMap=new Map;fieldMap.set("PlanName",1),fieldMap.set("description",2),fieldMap.set("status",3),fieldMap.set("srcConnName",4),fieldMap.set("trgtConnName",5),fieldMap.set("rowId",6),fieldMap.set("stDate",7),fieldMap.set("endDate",8),fieldMap.set("packageName",9),$("#historyTabs").click(function(){$(".ui-icon-asc").hide(),$(".ui-icon-desc").hide(),$("#historypager").hide();if(historyFirstLoad){$("#maskoverlay").removeClass("hide");var e=32,t=i18n_resources.INTL_LABEL_NAME||"Name",n=i18n_resources.INTL_LABEL_VERSION||"Description",r=i18n_resources.INTL_LABEL_STATUS||"Status",i=i18n_resources.INTL_LABEL_STARTDATE||"Start Date",s=i18n_resources.INTL_LABEL_ENDDATE||"End Date",o=i18n_resources.INTL_LABEL_PACKAGENAME||"Package Name",u=i18n_resources.INTL_LABEL_SOURCE||"Source",a=i18n_resources.INTL_LABEL_TARGET||"Target",f=i18n_resources.INTL_LABEL_ARCHIVE_ID||"Archive ID",l=i18n_resources.INTL_LABEL_LOG||"Log",c=i18n_resources.INTL_LABEL_RESOURCE_NAME||"Resource Name",h=i18n_resources.INTL_LABEL_OPERATION||"Operation",p=i18n_resources.INTL_LABEL_SEQUENCE||"Seq No",d=i18n_resources.INTL_LABEL_RUNNING||"Running",v=i18n_resources.INTL_SUCCESS_STATUS||"Success",m=i18n_resources.INTL_ERROR_STATUS||"Error",g=i18n_resources.INTL_LABEL_NOTAPPLICABLE||"Not Applicable",y=i18n_resources.INTL_LABEL_NOTSTARTED||"Not Started",b=i18n_resources.INTL_ABORTED_STATUS||"Aborted",w=i18n_resources.INTL_ABORTED_TOOLTIP||"Migration was aborted because the Application Interface or Siebel Server was shut down.",E=i18n_resources.INTL_STOPPED_STATUS||"Stopped",S=i18n_resources.INTL_STOPPED_TOOLTIP||"Migration was stopped by an administrator.",x=isRTL()?"rtl":"ltr";historyFirstLoad=!1;var T=sessionStorage.getItem("repoUpgraded")==="true";function N(e,t,n,r){return n["name"]=="ActivateWorkflowsTasks"||n["name"]=="InvalidateSeedCaches"?"":n["status"]=="Not Started"||n["status"]=="Not Applicable"?"<button disabled id=getLog_"+t.rowId+' class="btn btn-alt siebui-d2p-getlog" type="button">'+l+"</button>":"<button id=getLog_"+t.rowId+' class="btn btn-alt siebui-d2p-getlog" type="button">'+l+"</button>"}function C(e,t,n){return e=="Success"?"<span>"+v+"</span>":e=="Error"?"<span>"+m+"</span>":e=="Aborted"?'<span title="'+w+'">'+b+"</span>":e=="Stopped"?'<span title="'+S+'">'+E+"</span>":"<span>"+e+"</span>"}function k(e,t,n){return e=="Not Started"?"<span>"+y+"</span>":e=="Running"?"<span>"+d+"</span>":e=="Success"?"<span>"+v+"</span>":e=="Error"?"<span>"+m+"</span>":e=="Not Applicable"?"<span>"+g+"</span>":e=="Aborted"?'<span title="'+w+'">'+b+"</span>":e=="Stopped"?'<span title="'+S+'">'+E+"</span>":"<span>"+e+"</span>"}function L(e,t,n){var r=n[4]==""?"'siebui-d2p-import'":n[5]==""?"'siebui-d2p-export'":"'siebui-d2p-migrate'";return" class="+r}function A(e,t,n){var r="";return e&&(r="checked"),'<span class="siebui-d2p-checkbox"><input type="checkbox" name="cb_name" id="cb_'+t.rowId+'" '+r+"></span>"}cbLabel='<input type="checkbox" name="cb_header" id="cb_history_header">',strStatusLOV=":;Success:"+v+";Aborted:"+b,strStatusLOV+=";Error:"+m+";Stopped:"+E,$("#history-table").jqGrid({datatype:"local",width:null,direction:x,shrinkToFit:!1,jsonReader:{page:"pageIndex",total:"pageCount",records:"recordCount",root:"rows",repeatitems:!0},pager:"#historypager",rowNum:paginationRowCount,loadui:"disable",colNames:[cbLabel,t,n,r,u,a,f,i,s,o],colModel:[{name:"CbHeader",index:"Checkbox",formatter:A,width:30,sortable:!1,resizable:!1,search:!1},{name:"PlanName",index:"PlanName",cellattr:L,width:180,searchoptions:{sopt:["eq","bw","bn","ew","en","cn","nc"]}},{name:"description",index:"description",width:160,searchoptions:{sopt:["eq","bw","bn","ew","en","cn","nc"]}},{name:"status",index:"status",formatter:C,width:135,stype:"select",searchoptions:{value:strStatusLOV,sopt:["eq","ne"]}},{name:"source",index:"srcConnName",width:135,searchoptions:{sopt:["eq","bw","bn","ew","en","cn","nc"]}},{name:"target",index:"trgtConnName",width:135,searchoptions:{sopt:["eq","bw","bn","ew","en","cn","nc"]}},{name:"txnId",index:"rowId",width:100,searchoptions:{sopt:["eq","bw","bn","ew","en","cn","nc"]}},{name:"stDate",index:"stDate",width:150,searchoptions:{sopt:["eq","lt","le","gt","ge"]}},{name:"endDate",index:"endDate",width:150,searchoptions:{sopt:["eq","lt","le","gt","ge"]}},{name:"packageName",index:"packageName",width:150,searchoptions:{sopt:["eq","bw","bn","ew","en","cn","nc"]}}],multiselect:!1,subGrid:!0,subGridRowExpanded:function(e,t){var n=$("#history-table").jqGrid("getRowData",t),o=e+"_t";$("#"+e).html("<table id='"+o+"'></table>"),$("#"+o).jqGrid({datatype:"local",width:null,direction:x,rowNum:1e3,shrinkToFit:!1,data:historyViewModel.execresourceList[t],colNames:[c,h,p,r,l,i,s],colModel:[{name:"name",sortable:!1,width:180},{name:"operation",sortable:!1,width:150},{name:"sequenceNo",sortable:!1,width:50},{name:"status",sortable:!1,formatter:k,width:180},{name:"log",sortable:!1,formatter:N,width:80},{name:"start",sortable:!1,width:180},{name:"end",sortable:!1,width:180}],loadComplete:function(){historyViewModel.bindEvents()}})},loadBeforeSend:function(){$(this).closest("div.ui-jqgrid-view").find("table.ui-jqgrid-htable>thead>tr>th").css("text-align","left")},viewsortcols:[!0,"vertical",!0],sortname:"endDate",sortorder:"desc",onSortCol:function(e,t,n){var r=O.jqGrid("getGridParam","colModel");$("#gbox_"+$.jgrid.jqID($("#history-table")[0].id)+" tr.ui-jqgrid-labels th.ui-th-column").each(function(e){var t=r[e];t&&t.sortable!==!1&&($(this).find(">div.ui-jqgrid-sortable>span.s-ico>span.ui-icon-desc").hide(),$(this).find(">div.ui-jqgrid-sortable>span.s-ico>span.ui-icon-asc").hide())});var i=$(this.grid.headers[t].el).find(">div.ui-jqgrid-sortable>span.s-ico");this.p.sortorder==="asc"?(i.find(">span.ui-icon-asc")[0].style.display="",i.find(">span.ui-icon-asc")[0].style.textIndent="0px",i.find(">span.ui-icon-desc").hide()):(i.find(">span.ui-icon-desc")[0].
style.display="",i.find(">span.ui-icon-desc")[0].style.textIndent="0px",i.find(">span.ui-icon-asc").hide()),historyViewModel.sorting(n,e)},onSelectRow:function(e){$("#history-table").jqGrid("toggleSubGridRow",e);var t=$("#history-table").getDataIDs();$.each(t,function(t,n){e!=n&&$("#history-table").collapseSubGridRow(n)})}}),$("#history-table").jqGrid("filterToolbar",{stringResult:!0,searchOnEnter:!1,searchOperators:!0}),$(".ui-pg-input").parent().hide(),$("#history-table").jqGrid("setGridParam",{datatype:"json"}),$("#history-table").jqGrid("navGrid","#historypager",{add:!1,edit:!1,del:!1,search:!1,refresh:!1}),T||$("#history-table").jqGrid("hideCol","packageName")}$("#history-table").is(":hidden")&&$("#history-table").show(),$("#cb_history_header").is(":hidden")&&$("#cb_history_header").show();var O=$("#history-table"),M,_;M=O.jqGrid("getGridParam","colModel"),_="endDate",$("#gbox_"+$.jgrid.jqID(O[0].id)+" tr.ui-jqgrid-labels th.ui-th-column").each(function(e){if(e>M.length-1)return;var t=M[e],n=t.name;t.sortable!==!1?$(this).find(">div.ui-jqgrid-sortable>span.s-ico").show():n!=="subgrid"&&$(this).find(">div.ui-jqgrid-sortable").css({cursor:"default"}),t.name===_&&($(this).find(">div.ui-jqgrid-sortable>span.s-ico").show(),$(this).find(">div.ui-jqgrid-sortable>span.s-ico>span.ui-icon-desc")[0].style.textIndent="0px",$(this).find(">div.ui-jqgrid-sortable>span.s-ico>span.ui-icon-desc")[0].style.display="",$(this).find(">div.ui-jqgrid-sortable>span.s-ico>span.ui-icon-desc").removeClass("ui-state-disabled"))}),$("#jqgh_history-table_CbHeader").removeClass("ui-jqgrid-sortable"),$(".ui-search-toolbar").hide(),$(".siebui-d2p-history-query").show(),$(".siebui-d2p-history-delete-disabled").show(),$(".siebui-icon-query-go").hide(),$(".siebui-icon-query-cancel").hide(),$(".siebui-d2p-history-delete").hide(),historyViewModel.getAllHistoryplan()}),$("#history-template").load("templates/history.html",function(){ko.applyBindings(historyViewModel,document.getElementById("tabs-history"))});

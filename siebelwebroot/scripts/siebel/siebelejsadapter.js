/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.EJSAdapter=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.EJSAdapter"),define("siebel/siebelejsadapter",["3rdParty/ejs/ejs_production.js"],function(){SiebelAppFacade.EJSAdapter=function(){function i(e){var t=[],n;typeof SiebelApp.S_App.GetActiveView()!="undefined"&&(t=SiebelApp.S_App.GetActiveView().GetAppletMap());for(var r in t){var i=t[r];if(typeof i.GetBusComp().GetParentBusComp()=="undefined"||i.GetBusComp().GetParentBusComp()===null){n=i;break}}if(typeof n!="undefined"&&typeof e!="undefined"){var s=n.GetControls();e.transltn=[];for(var o in s)s[o].GetUIType()==="Label"&&(e.transltn[o]=s[o].GetDisplayName())}}function s(n){var r=e.get("SWE_PST_CLIENT_DESCRIPTOR_THEMEFILES"),i=n.GetProperty(r);if(!t.IsEmpty(i)){var s=[];CCFMiscUtil_StringToArray(i,s);for(var o=0,u=s.length;o<u;o++)s[o]=s[o].split(".css"),s[o][s[o].length-1]===""&&s[o].pop(),s[o]=s[o].join(".css");return i=null,s}}function o(n){var r=e.get("SWE_PST_CLIENT_DESCRIPTOR_INFO"),i=[];if(!t.IsEmpty(n)){n.GetType()===r&&(i=i.concat(s.call(this,n)));var o=n.EnumChildren(!0);do if(!t.IsEmpty(o)){o.GetType()===r&&(i=i.concat(s.call(this,o)));var u=o.EnumChildren(!0);do!t.IsEmpty(u)&&u.GetType()===r&&(i=i.concat(s(this,u)));while(u=o.EnumChildren(!1))}while(o=n.EnumChildren(!1))}return i}function u(e,t){var n=[],r,i;n=o.call(this,t),typeof SiebelApp.S_App.GetActiveView()!="undefined"&&(r=SiebelApp.S_App.GetActiveView(),i=r.GetName(),i=i.split(" ").join("_")),typeof e!="undefined"&&(e.styles=n);if(typeof i!="undefined"){var s="[id*='"+i+"']";$("head").children(s).each(function(){$(this).remove()})}n=null}function a(e){var t,n=!1;typeof localStorage!="undefined"&&(n=localStorage.getItem("isAdfmContainer"));if(typeof e!="undefined"){if(n){SiebelAppFacade.EJSAdapter.OpenMAFPreview(e);return}t=window.open("about:blank","_blank","status=0,toolbar=0,location=0,menubar=1,resizable=1,scrollbars=1"),t.document.write(e);if($("head #PLATFORM_DEPENDENT_Application0").length>0){var r=$("head #PLATFORM_DEPENDENT_Application0")[0].outerHTML,i=$(t.document.body).find("[align=left]"),s=$(t.document.body).find("[align=right]");$(t.document.head).append(r),i.each(function(){$(this).removeAttr("align"),$(this).closest("table").length>0&&!$(this).closest("table").hasClass("siebui-report-spacing")&&$(this).closest("table").addClass("siebui-report-spacing")}),s.each(function(){$(this).removeAttr("align"),$(this).closest("table").length>0&&!$(this).closest("table").hasClass("siebui-report-spacing")&&$(this).closest("table").addClass("siebui-report-spacing"),$(this).addClass("siebui-report-last-cell")}),SiebelApp.S_App.GetDirection()&&$(t.document.body).addClass("siebui-rtl")}}}function f(e,t){var n,r,i;if(typeof e!="undefined"||e!=="")n=SiebelApp.S_App.GetVirtualDir()+e,i=c.call(this,n),i=ejs.render(i,t,{});return r=null,i}function l(e){var t;typeof SiebelApp.S_App.GetActiveView()!="undefined"&&(t=SiebelApp.S_App.GetActiveView().GetAppletMap());for(var n in t){var r=t[n],i=[],s=r.GetControls();for(var o in s){var u=s[o],a=u.GetDisplayName(),f=u.GetFieldName();if(typeof f=="undefined"||f===""||typeof a=="undefined"||a==="")continue;var l={title:a,column:f};i.push(l)}var c={title:r.GetAppletLabel(),columnheader:i};if(typeof r.GetBusComp()=="undefined")continue;e[r.GetBusComp().GetName()]=c}}function c(e){var t=new XMLHttpRequest;try{t.open("GET",e,!1),t.send(null)}catch(n){return null}return t.status==404||t.status==2||t.status==0&&t.responseText==""?null:t.responseText}function h(e,t,n,r){var i=e.GetChildCount(),s=0;for(var o=0;o<i;o++){var u=e.GetChild(o),a=u.GetType(),f,l;if(a!="bcr"){l=t[a];if(typeof l=="undefined")return!1;var c=[],p=[],d=!0;for(var v in n)d=!1;if(d)n.parent={title:l.title,columnheader:l.columnheader,child:p,row:c,type:a},h(u,t,n.parent,n.parent.row);else{var m=-1;for(var g=0;g<n.child.length;g++)if(n.child[g].title===l.title){m=g;break}m===-1&&(n.child.push({title:l.title,columnheader:l.columnheader,child:p,type:a}),m=n.child.length-1),Array.isArray(r.child)||(r.child=[]),r.child.push({row:[]}),h(u,t,n.child[m],r.child[r.child.length-1].row)}}else if(typeof r!="undefined"){s++;var y=[];for(var b=0;b<n.columnheader.length;b++){var w=n.columnheader[b].column,E=u.GetProperty(w),S={name:w,value:E};y.push(S)}var x={column:y,title:n.title};r.push(x),h(u,t,n,r[s-1])}}}var e=SiebelApp.Constants,t=SiebelApp.Utils,n=e.get("SWE_OUI_PRINT_EJS"),r=e.get("SWE_OUI_PRINT_DATA");return EJSAdapter=function(){},EJSAdapter.prototype.GenerareEJSPrint=function(e,t){var s={},o={},c={},p,d,v=[],m=e.GetChildCount();if(m>0&&e.GetType()===r){p=t.GetProperty(n),CCFMiscUtil_StringToArray(p,v);for(var g=0;g<v.length;g++){p=v[g];break}l.call(this,s),h.call(this,e,s,o,c),u.call(this,o,t),i.call(this,o),d=f.call(this,p,o),a.call(this,d)}o=null,s=null,c=null,v=null},EJSAdapter.prototype.OpenMAFPreview=function(e){var t,n,r,i,s,o,u,a=new Date($.now());e.indexOf("<title>")>-1?(t=e.indexOf("<title>"),n=e.indexOf("</title>",t),u=e.substring(t+7,n)):u="Untitled",r=u+".html",e=e.split("align=left").join(""),e=e.split("charset=iso-8859-1").join("charset=utf-8"),e.indexOf("<button")>-1&&(t=e.indexOf("<button"),n=e.indexOf("</button>"),s=e.substring(t,n+9),e=e.split(s).join("")),SiebelApp.S_App.GetDirection()&&(e=e.split("align=right").join("align=left"),e=e.split("<body>").join("<body dir='rtl'>")),i=window.btoa(unescape(encodeURIComponent(e))),SiebelApp.MobileFileMgr.WriteTempWithFlag({filename:r,content:i,isEncodeFileName:!1,success:function(){SiebelApp.MobileFileMgr.OpenTempFile({filename:r,displayFileName:u,isEncodeFileName:!1})},error:function(){SiebelJS.Log("error saving file :"+r)}})},new EJSAdapter}()}));

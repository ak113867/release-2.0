/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.FlowchartRenderer=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.FlowchartRenderer"),define("siebel/flowchartrenderer",[],function(){return SiebelAppFacade.FlowchartRenderer=function(){function e(e){SiebelAppFacade.FlowchartRenderer.superclass.constructor.call(this,e)}function t(){$("#canvas-content").empty(),$("#paletteitems").empty(),f.call(this),l.call(this,"gfcObjectsMap")}function n(e,t){var n=parseInt(e.data("x1"),10),r=parseInt(e.data("y1"),10),i=parseInt(e.data("x2"),10),s=parseInt(e.data("y2"),10),o=e.data("clr"),u=10,a=5,f=Math.sqrt((i-n)*(i-n)+(s-r)*(s-r));e.css("position","absolute"),e.css("top",r+"px"),e.css("left",n+"px"),e.css("height",f+"px"),e.css("background-color",o);if(!$.support.cssFloat){e.css("top",s>r?r+"px":s+"px"),e.css("left",n+"px");var l=(i-n)/f,c=(s-r)/f;e.css("filter","progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11="+l+", M12="+ -1*c+", M21="+c+", M22="+l+")")}else{var h=Math.acos((s-r)/f);i>n&&(h*=-1),e.css("WebkitTransformOrigin","top left"),e.css("transform","rotate("+h+"rad)"),e.css("MozTransform","rotate("+h+"rad)"),e.css("WebkitTransform","rotate("+h+"rad)"),e.css("OTransform","rotate("+h+"rad)"),h+=1.57,a=10*Math.sin(h)+5*Math.cos(h),u=10*Math.cos(h)-5*Math.sin(h),t.attr("title","angle: "+h),t.css("top",s-a+"px"),t.css("left",i-u+"px"),t.css("WebkitTransformOrigin","top left"),t.css("transform","rotate("+h+"rad)"),t.css("MozTransform","rotate("+h+"rad)"),t.css("WebkitTransform","rotate("+h+"rad)"),t.css("OTransform","rotate("+h+"rad)")}return e}function r(e,t,r,i,s,o,u,a){var f=$("<div></div>"),l=parseInt(a,10);l&&(a="rgb("+(l&255)+","+((l&65280)>>8)+","+((l&16711680)>>16)+")"),r&&$(f).data("toId",r),$(f).addClass("connector").attr("id",e).data("x1",i).data("y1",s).data("x2",o).data("y2",u).data("clr",a).data("frId",t);var c=$("<div></div>");$(c).addClass("endpoint").attr("id","to-end-"+e).attr("title","left:"+(o-5)+" top:"+(u-5)).css("position","absolute").css("top",u+"px").css("left",o+"px").css("border-left","20px solid "+a).data("ConId",e);var h=$("<div></div>");$(h).addClass("startpoint").attr("id","from-end-"+e).attr("title","left:"+i+" top:"+s).css("position","absolute").css("top",s-5+"px").css("left",i-5+"px").css("background-color",a).data("ConId",e),$("#canvas-content").append(n.call(this,$(f),$(c))).append($(c).draggable()).append($(h).draggable().on("dragstart",{ctx:this},function(e,n){$("#"+t).css("WebkitBorderImage","url(images/loy_fc_border.png) 5 5 5 5 stretch").css("OBorderImage","url(images/loy_fc_border.png) 5 5 5 5 stretch").css("BorderImage","url(images/loy_fc_border.png) 5 5 5 5 stretch")}).on("dragstop",{ctx:this},function(e,n){$("#"+t).css("WebkitBorderImage","").css("OBorderImage","").css("BorderImage","")}))}function i(e,t,r,i,s,o,u,a){var f=$("#canvas-content #"+e),l=parseInt(a,10);l&&(a="rgb("+(l&255)+","+((l&65280)>>8)+","+((l&16711680)>>16)+")"),r&&$(f).data("toId",r),$(f).data("x1",i).data("y1",s).data("x2",o).data("y2",u).data("clr",a).data("frId",t);var c=$("#canvas-content #to-end-"+e);$(c).attr("title","left:"+(o-5)+" top:"+(u-5)).css("position","absolute").css("top",u+"px").css("left",o+"px").css("border-left","20px solid "+a);var h=$("#canvas-content #from-end-"+e);$(h).attr("title","left:"+i+" top:"+s).css("top",s-5+"px").css("left",i-5+"px"),n.call(this,$(f),$(c)).append($(h))}function s(e,t,n,r,i,s,o,u){var a='<div id="'+n+'"> <img src="'+t+'" width="'+(o-4)+'" height="'+(u-4)+'"/>'+e+"</div>";$(a).find("img").attr("width",o-4).attr("height",u-4);var f=r+":"+i+":"+s+":"+o+":"+u;$("#canvas-content").data(n,f),$("#canvas-content").append($(a).addClass("node").attr("id",n).attr("title",i+" "+s+" "+o+" "+u).attr("tabindex",1101+$("#canvas-content .node").length).draggable({containment:"parent"}).css("position","absolute").css("top",s+"px").css("left",i+"px").css("width",o).css("height",u))}function o(e,t,n,r,i,s,o){var u=$("#canvas-content #"+t),a=u.children();u.empty(),u.append(a).append(e),u.attr("title",r+" "+i+" "+s+" "+o),u.find("img").attr("width",s-4).attr("height",o-4);var f=$("#canvas-content").data(t).split(":");f[0]=n,f[1]=r,f[2]=i,f[3]=s,f[4]=o,$("#canvas-content").data(t,f.join(":")),u.css("position","absolute").css("top",i+"px").css("left",r+"px").css("width",s).css("height",o)}function u(e,t){var n;return $("#canvas-content .node").each(function(r,i){var s=parseInt($(i).position().left,10),o=parseInt($(i).position().top,10),u=parseInt($(i).width()+s,10),a=parseInt($(i).height()+o,10);e>=s&&e<=u&&t>=o&&t<=a&&(n=i)}),n}function a(){$("#FCToolBar #delete").button({text:!1,icons:{primary:"ui-icon-closethick"}}).on("click",{ctx:this},function(e){var t=$("#canvas-content .ui-selected.node,.ui-selected.connector").attr("id");return e.data.ctx.GetPM().OnControlEvent("eventBtnClick","delete",t),!1}),$("#FCToolBar #options").button({text:!1,icons:{primary:"ui-icon-gear",secondary:"ui-icon-triangle-1-s"}}).on("click",{ctx:this},function(e){var t,n,r=[],i="#canvas-content .ui-selected.node,.ui-selected.connector";$(i).each(function(e,t){r.push($(t).attr("id"))});var s=r.length;s===1&&(t=r[0],t&&(n=$("#canvas-content").data(t).split(":")[0]));var o=$("#FCToolBar #menu").show().position({my:"left top",at:"left bottom",of:this});return e.data.ctx.GetPM().OnControlEvent("eventMenuSelect",s,n),!1}),$("#FCToolBar #menu").menu().hide().on("menuselect",{ctx:this},function(e,t){var n=t.item.attr("id"),r=[];return $("#canvas-content .ui-selected.node,.ui-selected.connector").each(function(e,t){r.push($(t).attr("id"))}),$("#FCToolBar #menu").hide(),e.data.ctx.GetPM().OnControlEvent("eventMenuClick",n,r),!1})}function f(){var e=$("#paletteitems"),t=this.GetPM().Get("paletteItems"),n=t.length;if(n>0){for(var r=0;r<n;r++)e.append(t[r]);$("#paletteitems div").draggable({appendTo:"body",helper:"clone"})}}function l(e){var t=this.GetPM().Get(e),n;for(var u in t){var a=t[u];if(u==="Selected"){n=a;continue}if(a){if(a.action==="Deleted"){var f=$("#canvas-content").find("#"+a.id);if(
f){if(f.hasClass("connector")){var l=$("#canvas-content").find("#to-end-"+a.id);l&&l.remove()}f.remove()}continue}if(a.shpId!=="0"&&a.shpId!=="2"){var c=a.r;if(c){var h=c.split(" "),p=h[2]-h[0],d=h[3]-h[1];$("#"+a.id).length===0?s.call(this,a.txt,a.imgSrc,a.id,a.shpId,h[0],h[1],p,d):o.call(this,a.txt,a.id,a.shpId,h[0],h[1],p,d)}}else{var v=a.P0.split(" "),m=a.P1.split(" ");$("#"+a.id).length===0?r.call(this,a.id,a.FromID,a.ToID,v[0],v[1],m[0],m[1],a.LineColor):i.call(this,a.id,a.FromID,a.ToID,v[0],v[1],m[0],m[1],a.LineColor)}}}if(n){var g=this.GetPM().Get("SelectedId");if(n!==""&&n!==g){$("#canvas-content div").removeClass("ui-selected"),$("#canvas-content #"+n).addClass("ui-selected");var y=CCFMiscUtil_CreatePropSet();y.SetProperty("sel",n),this.GetPM().ExecuteMethod("NotifyServer","selChanged",y)}}}function c(){var e=this.GetPM().Get("menuMarkup"),t=$("#FCToolBar #menu").empty();t.append(e);var n=this.GetPM().Get("disabledMenuList");if(n!==""){var r=n.split("|");h.call(this,r)}t.menu().show(),$(document).one("click",function(){t.hide()})}function h(e){var t=$("#FCToolBar #menu"),n,r=e.length;for(var i=0;i<r;i++)n=t.find("#"+e[i]),n&&(n.addClass("ui-state-disabled ui-corner-all"),n.parent("li").find("ul").remove())}function p(e){var t=$("#FCToolBar #menu").find("#"+e);t.removeClass("ui-state-disabled"),t.addClass("siebui-appmenu-item ui-menu-item")}function d(){a.call(this),$("#palette").accordion({header:"#paletteHeader",heightStyle:"content"}),$("#actionsWindow").accordion({header:"#actionHeader",heightStyle:"content"}),$("#canvas-content").selectable({filter:"div",distance:0,stop:function(e,t){}}).droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",accept:":not(.ui-sortable-helper)"}).on("drop",{ctx:this},function(e,t){var n=Math.round(e.pageX-$("#canvas-content").offset().left),r=Math.round(e.pageY-$("#canvas-content").offset().top),i=t.draggable.eq(0),s=i.attr("id"),o=i.parent().attr("id"),a=i.data("ConId"),f=u.call(this,n,r),l="",c="";f&&(l=$(f).attr("id"),c=$(f).attr("title"));var h=$("#canvas-content").data(s);return e.data.ctx.GetPM().OnControlEvent("eventDrop",n,r,s,o,a,l,c,h),!1}).on("mouseup",{ctx:this},function(e){var t=e.target;$(t).attr("id")||(t=$(t).parent()),$("#canvas-content div").removeClass("ui-selected");var n=$(t).attr("id");n&&n.indexOf("-end-")!==-1&&(n=$(t).data("ConId")),n&&n!=="canvas-content"&&$(t).addClass("ui-selected"),e.data.ctx.GetPM().OnControlEvent("eventMouseup",n)}).on("keyup",{ctx:this},function(e){var t=e.target;$(t).attr("id")||(t=$(t).parent());var n=t.attr("id");e.data.ctx.GetPM().OnControlEvent("eventKeyup",n,e.which,e.ctrlKey,e.shiftKey)}).on("dblclick","div",{ctx:this},function(e){var t=e.target;$(t).attr("id")||(t=$(t).parent());var n=t.attr("id");e.data.ctx.GetPM().OnControlEvent("eventDblClick",n)})}function v(){var e=this.GetPM(),t=$("#"+e.Get("GetFullId")).parent().width();$("#control").width(t);var n=$("#palette").outerWidth(!0),r=$("#palette").width(),i=$("#canvas").outerWidth(!0),s=$("#canvas").width(),o=i-s;s=t-n-o,$("#canvas").width(s),$("#FCToolBar").width(r+s)}function m(){var e=0,t=0,n=$(window).height(),r=$("#control").offset().top;$("#_swecontent").find("table.AppletBackTable").each(function(){e+=$(this).height(),t+=$(this).outerHeight(!0)});var i=t-e,s=n-(r+i);$("#control").height(s);var o=$("#FCToolBar").outerHeight(!0),u=$("#canvas").outerHeight(!0),a=$("#canvas").height(),f=u-a;a=s-o-f,$("#canvas").height(a);var l=$("#paletteHeader").outerHeight(!0),c=a-l;$("#paletteitems").height(c)}return SiebelJS.Extend(e,SiebelAppFacade.PhysicalRenderer),e.prototype.Init=function(){SiebelAppFacade.FlowchartRenderer.superclass.Init.call(this),this.AttachPMBinding("drawFlowchart",function(){var e=this.GetPM().Get("drawFlowchart");e==="full"?t.call(this):l.call(this,"gfcDeltaMap")},{scope:this}),this.AttachPMBinding("menuMarkup",function(){c.call(this)},{scope:this})},e.prototype.resize=function(){},e.prototype.ShowUI=function(){SiebelAppFacade.FlowchartRenderer.superclass.ShowUI.call(this),d.call(this);var e=CCFMiscUtil_CreatePropSet();this.GetPM().ExecuteMethod("NotifyServer","populate",e)},e.prototype.BindData=function(){SiebelAppFacade.FlowchartRenderer.superclass.BindData.apply(this,arguments)},e.prototype.BindEvents=function(){SiebelAppFacade.FlowchartRenderer.superclass.BindEvents.call(this),$(window).bind("resize.SiebelAppFacade.FlowchartRenderer",{ctx:this},function(e){e.target===window&&e.data.ctx.resize()})},e.prototype.EndLife=function(){$(window).unbind("resize.SiebelAppFacade.FlowchartRenderer"),SiebelAppFacade.FlowchartRenderer.superclass.EndLife.call(this),$("#canvas-content").empty(),$("#paletteitems").empty()},e}(),"SiebelAppFacade.FlowchartRenderer"}));

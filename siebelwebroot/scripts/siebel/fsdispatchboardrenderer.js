/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.fsDispatchBoardRenderer=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.fsDispatchBoardRenderer"),define("siebel/fsdispatchboardrenderer",["siebel/ganttrenderer"],function(){return SiebelAppFacade.fsDispatchBoardRenderer=function(){function _(){SiebelAppFacade.fsDispatchBoardRenderer.superclass.constructor.apply(this,arguments)}function D(){var e=this.GetPM().Get("PanesToRefresh");this.GetPM().SetProperty("IsShowMoreBtnClicked","true"),$("#db_resize").html("");var t='<a href="javascript:void()"><img src="images/btn_more.gif" border="0" space="0" hspace="0" alt="'+v+'"'+"title="+'"'+v+'"'+"></a>";$("#db_resize").append(t),$("#db_resize").attr("class","siebui-link-icon-e siebui-fs-db-common siebui-showmore"),e|=8,this.GetPM().SetProperty("PanesToRefresh",e)}function P(){var e=this.GetPM().Get("PanesToRefresh");$("#db_resize").html(""),pgcn="pager_"+this.GetPM().Get("GetFullId");var t="<div id='"+pgcn+"' class='ui-state-default ui-jqgrid-pager ui-corner-bottom siebui-applet-footer siebui-gantt-db-footer' dir='ltr'></div>";$(".siebui-customControls").append(t),H.call(this)}function H(){var e=this.GetPM().Get("PanesToRefresh"),n=SiebelApp.S_App.IsAutoOn();$("#db_resize").html(""),pgcnt="pg_pager_"+this.GetPM().Get("GetFullId"),lft="pager_"+this.GetPM().Get("GetFullId")+"_left",cent="pager_"+this.GetPM().Get("GetFullId")+"_center",rgt="pager_"+this.GetPM().Get("GetFullId")+"_right";var r="<div id='"+pgcnt+"' class='ui-pager-control siebui-gantt-db-ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+lft+"' align='left'></td><td id='"+cent+"' align='center' style='white-space:pre;'></td><td id='"+rgt+"' align='right'></td></tr></tbody></table></div>";$("#pager_"+this.GetPM().Get("GetFullId")).append(r);var i="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",s="pager_"+this.GetPM().Get("GetFullId"),o="";o+="_"+s;var u=["first"+o,"prev"+o,"next"+o,"last"+o];i+="<td id='"+u[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first' title='"+t.GetLocalString("FirstRecSetToolTip")+"'",n==="true"&&(i+=' ot="button" rn="DispBrd_FirstPg" un="DispBrd_FirstPg"'),i+="></span></td>",i+="<td id='"+u[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev' title='"+t.GetLocalString("PrevRecSetToolTip")+"'",n==="true"&&(i+=' ot="button" rn="DispBrd_PrevPg" un="DispBrd_PrevPg"'),i+="></span></td>",i+="<td id='"+u[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next' title='"+t.GetLocalString("NextRecSetToolTip")+"'",n==="true"&&(i+=' ot="button" rn="DispBrd_NextPg" un="DispBrd_NextPg"'),i+="></span></td>",i+="<td id='"+u[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end' title='"+t.GetLocalString("LastRecSetToolTip")+"'",n==="true"&&(i+=' ot="button" rn="DispBrd_LastPg" un="DispBrd_LastPg"'),i+="></span></td>",i+="</tr></tbody></table>",$("#"+cent).append(i)}function B(){var e=c.GetPM(),t,n=c.getGanttCtrlHeight();t=$("#"+c.GetCustCtrlName()).addClass("siebui-ganttControl"),t.css({height:parseInt(n,10)})}function j(){var e=this,t=e.GetPM(),n=$(window).height(),r=$("#_sweappmenu").height(),i=$(".siebui-button-toolbar").height(),s=$("#_swethreadbar").height(),o=$("#_swescrnbar").height(),u=60,a;t.Get("DefaultNavCtrl")==="Tree"&&(o=0),a=n-(r+i+s+o+u),e.setGanttCtrlHeight(parseInt(a/2,10))}function F(){var e=this.GetPM(),t=e.Get("GetPlaceholder");pgCtrls=[{ctrlElem:$("#first_pager_"+t),methodName:"GotoFirstSet"},{ctrlElem:$("#prev_pager_"+t),methodName:"GotoPreviousSet"},{ctrlElem:$("#next_pager_"+t),methodName:"GotoNextSet"},{ctrlElem:$("#last_pager_"+t),methodName:"GotoLastSet"}],len=pgCtrls.length,i;var n=this.get_current_start_ind(),r=this.get_current_end_ind(),s=this.get_total_records();n==0&&s<=10?(pgCtrls[2].ctrlElem.addClass("ui-state-disabled"),pgCtrls[3].ctrlElem.addClass("ui-state-disabled"),pgCtrls[0].ctrlElem.addClass("ui-state-disabled"),pgCtrls[1].ctrlElem.addClass("ui-state-disabled")):n==0?(pgCtrls[2].ctrlElem.removeClass("ui-state-disabled"),pgCtrls[3].ctrlElem.removeClass("ui-state-disabled"),pgCtrls[0].ctrlElem.addClass("ui-state-disabled"),pgCtrls[1].ctrlElem.addClass("ui-state-disabled")):r==s?(pgCtrls[2].ctrlElem.addClass("ui-state-disabled"),pgCtrls[3].ctrlElem.addClass("ui-state-disabled"),pgCtrls[0].ctrlElem.removeClass("ui-state-disabled"),pgCtrls[1].ctrlElem.removeClass("ui-state-disabled")):n>0&&r<s&&(pgCtrls[2].ctrlElem.removeClass("ui-state-disabled"),pgCtrls[3].ctrlElem.removeClass("ui-state-disabled"),pgCtrls[0].ctrlElem.removeClass("ui-state-disabled"),pgCtrls[1].ctrlElem.removeClass("ui-state-disabled"))}function I(e){var t=e.data.ctx,n=t.GetPM();if(t&&t.GetPM()){var r=t.GetPM(),i=r.Get("enableWorkSetSizeEmpPerPage");if(i&&i.toLowerCase()=="true"){var s=e.data.ctx;s.set_activity_drag()}}$(this).draggable({containment:$("#s_"+n.Get("GetFullId")+"_div").find("#UGrid"),zIndex:9999,drag:function(e,t){},start:function(e,t){var r=$(this).closest("div.siebui-gdfRow").attr("taskid"),i=$(this).closest("div.siebui-gdfRow").attr("Id"),s=$(this).attr("taskid"),o=0;console.log("In Drag"),$(this).draggable("option","sResId",r),$(this).draggable("option","resindex",i),$(this).draggable("option","dragType",o),$(this).draggable({cursor:"crosshair"}),n.SetProperty("InEvent",!0),console.log(r,i,s)}})}function q(e){}function R(e){var t=e.data.ctx,n=t.GetPM();if(t&&t.GetPM()){var i=t.GetPM(),u=i.Get("enableWorkSetSizeEmpPerPage");if(u&&u.toLowerCase()=="true"){var a=e.data.ctx;a.set_activity_drop()}}var f=n.Get(r),l=n.Get("Enable Earliest/Latest Start Violation Check"),c=!1;l?l.toLowerCase()=="true"&&(c=!0):f&&f=="1"&&(c=!0),$("#s_"+n.Get("GetFullId")+"_div").find(".siebui-taskEditUtility").droppable({drop:function(e,i){if(c){var u,a;dropPos=$(this).scrollLeft()+e.clientX-$(this).offset(
).left,H=$(i.draggable).draggable("option","dragType"),H===0?n.Get("EndTime")?u=new Date(t.calcNonContiguousTime(i.position.left)):u=new Date(Math.round(i.position.left/n.Get("fx")+n.Get("startMillis"))):n.Get("EndTime")?u=new Date(t.calcNonContiguousTime(dropPos)):(x=Math.round(dropPos/n.Get("fx")+n.Get("startMillis")),u=new Date(x));var f=parseInt((u.getMinutes()+7.5)/15,10)*15,l=n.Get("endMillis")-n.Get("startMillis");u=t.computeDSTTime(l,u);var h=u.format("MM/dd/yyyy HH:mm:ss");if(i.draggable.attr("taskId")){var p=i.position.left*1+i.draggable.innerWidth()*1,d=new Date(t.calcNonContiguousTime(p)),v=parseInt((d.getMinutes()+7.5)/15,10)*15;d=t.computeDSTTime(l,d),a=d.format("MM/dd/yyyy HH:mm:ss")}else{for(var m=0;m<i.draggable.children().length;m++)if(i.draggable.children()[m].id.indexOf("Duration_Minutes")!=-1){var g=parseInt(i.draggable.children()[m].innerText);a=(new Date((new Date(h)).getTime()+g*6e4)).format("MM/dd/yyyy HH:mm:ss")}a||(a=(new Date((new Date(h)).getTime()+36e5)).format("MM/dd/yyyy HH:mm:ss"))}var y=0;for(var m=0;m<A.length;m++)A[m].rowID==$(this).attr("taskId")&&Object.keys(A[m].events).forEach(function(e){var t=A[m].events[e].ST,n=A[m].events[e].ET;(t<h&&n>h||t<a&&n>a)&&e!=i.draggable.attr("taskId")&&(y+=1)})}if(y>=M&&c)n.ExecuteMethod("InvokeServer"),utils.Alert("Cannot add multiple activities in same time slot");else{A=[];var b=null,w=$(this).attr("taskId"),E=i.draggable.attr("taskId"),S=$(this).scrollLeft()+e.clientX-$(this).offset().left,x,T,N,C,k,L,_,D,P=0,H,B,j,F;drop_y=i.position.top,drop_x=i.position.left,B=n.Get(r),j=n.Get(s),F=n.Get(o),H=$(i.draggable).draggable("option","dragType"),H===0?n.Get("EndTime")?b=new Date(t.calcNonContiguousTime(i.position.left)):b=new Date(Math.round(i.position.left/n.Get("fx")+n.Get("startMillis"))):n.Get("EndTime")?b=new Date(t.calcNonContiguousTime(S)):(x=Math.round(S/n.Get("fx")+n.Get("startMillis")),b=new Date(x)),T=parseInt((b.getMinutes()+7.5)/15,10)*15,b=new Date(b.setMinutes(T,0));var l=n.Get("endMillis")-n.Get("startMillis");b=t.computeDSTTime(l,b),N=b.format("MM/dd/yyyy"),C=b.format("HH:mm:ss"),k=b.format("MM/dd/yyyy HH:mm:ss"),L=SiebelApp.S_App.NewPropertySet(),n.SetProperty("InEvent",!0);var I=[];for(var q in SiebelApp.S_App.GetActiveView().GetAppletMap())I.push(q);if(H===0)console.log("Within Gantt"),E=i.draggable.attr("taskId"),_=$(i.draggable).draggable("option","sResId"),$(i.draggable).draggable({cursor:"crosshair"}),L.SetProperty("DropSrcApplet",I[1]);else{console.log("Applet to Gantt Drag");var R=i.draggable.attr("id"),U=i.draggable.parent().parent().jqGrid("getRowData",R);L.SetProperty("DropSrcApplet",I[0]),E=U.Activity_UID,_=""}L.SetProperty("DropSrcYId",_),L.SetProperty("DropObjId",E),L.SetProperty("DropTrgtYId",w),L.SetProperty("Start Date",N),L.SetProperty("Start Time",C),L.SetProperty("DropTime",k),L.SetProperty("EnableEarlyLatestStartViolation",B),L.SetProperty("LoadActivityIntoABS",j),L.SetProperty("Gantt Chart Service Region Id",F),L.SetProperty("operation","DragnDrop");var z=8;if(H!=0){if(O==1)var W=$(".siebui-utilityGrid").height();else var W=$(".page0").height();var X=$(".page0").offset().top+$(".siebui-splitBox3").scrollTop()-z,V=X+W+2*z,J=$(".siebui-vSplitBar").offset().left;drop_y<X||drop_y>V||drop_x<J?L.SetProperty("DragDropCancel","true"):L.SetProperty("DragDropCancel","false")}P=0,P|=2,P|=4,P|=16,L.SetProperty("PanesToRefresh",P),n.SetProperty("PanesToRefresh",P),console.log("New ",b,E,_,w),n.ExecuteMethod("InvokeOperation",L),$("body").attr("style")!="undefined"&&$("body").attr("style")==="cursor: crosshair;"&&$("body").attr("style","cursor: auto;")}}})}function U(e,t){var n=e.getMinutes(),r;return r=parseInt((n+t/2)/t,10)*t,e=new Date(e.setMinutes(r,0)),e}function z(e){var t="",n=this.GetPM(),r="",i=n.Get("Scale_factor")*100*n.Get("TotalHPages"),s=n.Get("enableVerticalGrid");if(e)for(var o in e){t="";var u="",a="";for(var f in e[o].EVENTS){var l=""+(parseInt(e[o].EVENTS[f].height)-1);t='<div class="siebui-taskBox '+e[o].EVENTS[f].BCLS+'"'+' id="'+e[o].EVENTS[f].ID+'"'+' style="width:'+e[o].EVENTS[f].width+"%;height:"+l+"px;left:"+e[o].EVENTS[f].left+"%;margin-top:"+e[o].EVENTS[f].top+"px;"+'"></div>',u=e[o].EVENTS[f].Zyid,a='div[taskid="'+u+'"]',$(a).children(".siebui-eventContainer").append(t),$("#"+e[o].EVENTS[f].ID).bind("click",{ctx:this},function(e){$(this).parent().click()})}}s&&s.toLowerCase()=="true"&&(r=W(n),t='<div class="siebui-taskBox" style="width:'+i+"%;"+'">'+r+"</div>",a="div",$(a).children(".siebui-eventContainer").append(t))}function W(e){var t=e.Get("EndTime"),n=e.Get("StartTime"),r=(t-n)/36e5*e.Get("TotalHPages"),i="",s=0,o=1,u=e.Get("TST"),a=e.Get("startMillis"),l=e.Get("endMillis"),c=new Date(a),h="#c24839",p=0;switch(Number(u)){case m:r=r;break;case g:r/=2;break;case y:r/=4;break;case b,E:r/=4;break;case w:r/=4;break;case S:r=2*r;break;case x:r=4*r;break;case T:var d=0;c.getDate()>1&&(d=1),r=12+d;break;case N:var v=0;if(c.getDate()<3&&c.getMonth()==0||c.getDate()>29&&c.getMonth()==11)v=1;r=52+v;break;case L:var A=(l-c.getTime())/864e5,O=A/7;r=O;break;case k:r=31;break;case C:r=Number(e.Get(f))*e.Get("TotalHPages");break;default:r=r}s=100/r;for(var M=0;M+o<=r>0;M++)i+='<div class="siebui-taskBox" style="border-right:1px solid '+h+";z-index:1;left:"+p+"%;width:"+s+'%"> </div>',p+=s;return i}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=SiebelJS.Dependency("SiebelApp.S_App.LocaleObject"),n=e.get("SWE_GANTT_ACTIVITY_LABEL"),r=e.get("SWE_GANTT_ACTIVITY_EARLIEST_LATEST_VIOLATION"),s=e.get("SWE_GANTT_LOAD_ACTIVITY_INTO_ABS"),o=e.get("SWE_GANTT_SERVICE_REGION_ID"),u=e.get("SWE_GANTT_DRILLDOWN_CLS"),a=e.get("SWE_GANTT_RENDER_INFO"),f=e.get("SWE_GANTT_ACTIVITY_NO_DAYS_IN_WEEK"),l=e.get("SWE_GANTT_ACTIVITY_WEEK_DAY_START"),c,h=e.get("SWE_GANTT_TIME_SCALE"),p=e.get("SWE_GANTT_STARTMILLIS"),d=$("[id^='Show_Less_Label']").html(),v=$("[id^='Show_More_Label']").html(),m=e.get("SWE_GANTT_DAY_HOUR"),g=e.get("SWE_GANTT_DAY_TWOHOUR"),y=e.get("SWE_GANTT_DAY_DAY_FOURHOUR"),b=e.get("SWE_GANTT_DAY_DAY_SIXHOUR"
),w=e.get("SWE_GANTT_DAY_DAY_SEVENHOUR"),E=e.get("SWE_GANTT_DAY_DAY_EIGHTHOUR"),S=e.get("SWE_GANTT_DAY_DAY_HALFHOUR"),x=e.get("SWE_GANTT_DAY_DAY_QUARTERHOUR"),T=e.get("SWE_GANTT_YEAR_MONTH"),N=e.get("SWE_GANTT_YEAR_WEEK"),C=e.get("SWE_GANTT_WEEK_DAY"),k=e.get("SWE_GANTT_MONTH_DAY"),L=e.get("SWE_GANTT_MONTH_WEEK"),A=[],O=0,M=1;return SiebelJS.Extend(_,SiebelAppFacade.GanttRenderer),_.prototype.ShowUI=function(){var e=this.GetPM(),t,n=this.GetPM().Get(a);n.AppName=SiebelApp.S_App.GetName(),j.call(this),D.call(this),$("html").hasClass("siebui-landing")&&$("html").removeClass("siebui-landing"),SiebelAppFacade.fsDispatchBoardRenderer.superclass.ShowUI.call(this);if(this&&e){var r=e.Get("enableWorkSetSizeEmpPerPage");r&&r.toLowerCase()=="true"&&P.call(this)}t=new Date,console.log("endDispatchShowUi in Dispatch ShowUI is  "+t)},_.prototype.BindEvents=function(){SiebelAppFacade.fsDispatchBoardRenderer.superclass.BindEvents.call(this),c=this;var e=this,t=e.GetPM(),n,r,i,s,o,u,a,f=0;$("#s_"+this.GetAppletId()+"_div").unbind("dblclick"),$("#s_"+t.Get("GetFullId")+"_div").on("mouseup",".siebui-splitBox3",{ctx:this},R).on("mousedown",".siebui-taskBox.Dragpble",{ctx:this},I).on("dblclick",".siebui-taskBox.Dragpble",{ctx:this},q),n=t.Get("GetControls"),r=n["Time Scale"],r&&(i=r.GetInputName(),$("#s_"+t.Get("GetFullId")+"_div").find("[Name="+i+"]").bind("autocompleteclose",{ctx:this},function(e){f=0,f|=2,f|=8,f|=16,t.SetProperty("PanesToRefresh",f),t.ExecuteMethod("InvokeServer"),$("#s_"+t.Get("GetFullId")+"_div").find("#ganttdatePicker").removeClass("siebui-dateInput").addClass("siebui-dateRange").val(t.ExecuteMethod("getDateRange",""))}));if(this&&this.GetPM()){var l=this.GetPM();placeHolder=l.Get("GetPlaceholder"),displayWorkSetSizeEmpPerPage=l.Get("enableWorkSetSizeEmpPerPage"),displayWorkSetSizeEmpPerPage&&displayWorkSetSizeEmpPerPage.toLowerCase()=="true"&&($("#prev_pager_"+placeHolder).bind("click",{ctx:this},function(e){var t=e.data.ctx;total=t.get_total_records(this),current_prev_start_ind=t.get_current_start_ind(this),current_prev_start_ind-=10,t.set_current_start_ind(current_prev_start_ind),current_prev_end_ind=t.get_current_end_ind(this),last_set_rows=parseInt(current_prev_end_ind%10),last_set_rows==0?current_prev_end_ind-=10:current_prev_end_ind-=last_set_rows,t.set_current_end_ind(current_prev_end_ind),t.set_navigation_flag(),lpcsa={mask:!0},l.ExecuteMethod("PaginationBackwardRefreshGantt",lpcsa)}),$("#next_pager_"+placeHolder).bind("click",{ctx:this},function(e){var t=e.data.ctx;total=t.get_total_records(this),current_next_start_ind=t.get_current_start_ind(this),current_next_start_ind+=10,t.set_current_start_ind(current_next_start_ind),current_next_end_ind=t.get_current_end_ind(this),current_next_end_ind+=10,current_next_end_ind>total&&(current_next_end_ind=total),t.set_current_end_ind(current_next_end_ind),t.set_navigation_flag(),lpcsa={mask:!0},l.ExecuteMethod("PaginationForwardRefreshGantt",lpcsa)}),$("#first_pager_"+placeHolder).bind("click",{ctx:this},function(e){var t=e.data.ctx;total=t.get_total_records(this),current_first_start_ind=0,t.set_current_start_ind(current_first_start_ind),total<10?current_first_end_ind=total:current_first_end_ind=10,t.set_current_end_ind(current_first_end_ind),t.set_navigation_flag(),lpcsa={mask:!0},l.ExecuteMethod("PaginationFirstPageRefreshGantt",lpcsa)}),$("#last_pager_"+placeHolder).bind("click",{ctx:this},function(e){var t=e.data.ctx;total=t.get_total_records(this),last_set_rows=parseInt(total%10),last_set_rows==0?current_last_start_ind=total-10:current_last_start_ind=total-last_set_rows,t.set_current_start_ind(current_last_start_ind),current_last_end_ind=total,t.set_current_end_ind(current_last_end_ind),t.set_navigation_flag(),lpcsa={mask:!0},l.ExecuteMethod("PaginationLastPageRefreshGantt",lpcsa)}))}$("#db_resize").bind("click",{ctx:this},function(e){if($("#db_resize").hasClass("siebui-showmore")){$("#db_resize").html("");var t='<a href="javascript:void()"><img src="images/btn_less.gif" border="0" space="0" hspace="0" alt="'+d+'"'+"title="+'"'+d+'"'+"></a>";$("#db_resize").append(t),$("#db_resize").attr("class","siebui-link-icon-e siebui-fs-db-common siebui-showless");var n=c.getGanttCtrlHeight();c.setGanttCtrlHeight(parseInt(n*2,10)),O=1,B()}else if($("#db_resize").hasClass("siebui-showless")){$("#db_resize").html("");var t='<a href="javascript:void()"><img src="images/btn_more.gif" border="0" space="0" hspace="0" alt="'+v+'"'+"title="+'"'+v+'"'+"></a>";$("#db_resize").append(t),$("#db_resize").attr("class","siebui-link-icon-e siebui-fs-db-common siebui-showmore");var n=c.getGanttCtrlHeight();c.setGanttCtrlHeight(parseInt(n/2,10)),O=0,B()}})},_.prototype.BindData=function(){var e=this.GetPM(),t,n;t=new Date,console.log("startDispatchBindDataTime in Dispatch BindData is  "+t),SiebelAppFacade.fsDispatchBoardRenderer.superclass.BindData.call(this);var r=this.GetPM().Get("Schedulerecordset");z.call(this,r),$("body").find("tr.ui-draggable").draggable({start:function(e,t){$("body").find("tr.ui-draggable-dragging").addClass("siebui-fs-db-draggable-helper"),$("body").find("tr.ui-draggable-dragging .siebui-list-textareactrl-nofocus").parent().addClass("siebui-fs-db-draggable")}}),e.Get("IsShowMoreBtnClicked")==="true"&&(e.Get(h)===g.toString()?$(".siebui-utilityGrid").width($(".siebui-utilityGrid").width()/2):e.Get(h)===y.toString()?$(".siebui-utilityGrid").width($(".siebui-utilityGrid").width()/4):e.Get(h)===b.toString()||e.Get(h)===E.toString()?$(".siebui-utilityGrid").width($(".siebui-utilityGrid").width()/4):e.Get(h)===w.toString()&&$(".siebui-utilityGrid").width($(".siebui-utilityGrid").width()/4),e.SetProperty("IsShowMoreBtnClicked","false"));if(this&&this.GetPM()){var i=e.Get("enableWorkSetSizeEmpPerPage");i&&i.toLowerCase()=="true"&&F.call(this)}n=new Date,console.log("endDispatchBindDataTime in Dispatch BindData is  "+n)},_.prototype.SetHScrollPos=function(){var e=this.GetPM();if(e.Get(h)==m.toString()||e.Get(h)==g.toString()||e.Get(h)==y.toString
()||e.Get(h)==S.toString()||e.Get(h)==x.toString()||e.Get(h)==C.toString()||e.Get(h)==k.toString()||e.Get(h)==b.toString()||e.Get(h)==w.toString()||e.Get(h)==E.toString())if(e.Get("EndTime")){var t=new Date(e.Get("StartDate")),n=String(e.Get("StartTime")),r=new Date(e.Get("paddingMiddleDayMillis")),i=e.Get("DayLoc"),s=0;e.ExecuteMethod("setHoursFrom",t,n),e.Get("IsShowMoreBtnClicked")==="true"&&(e.Get(h)===g.toString()?e.SetProperty("MinGanttsize",e.Get("MinGanttsize")/2):e.Get(h)===y.toString()?e.SetProperty("MinGanttsize",e.Get("MinGanttsize")/4):e.Get(h)===b.toString()||e.Get(h)===E.toString()?e.SetProperty("MinGanttsize",e.Get("MinGanttsize")/4):e.Get(h)===w.toString()&&e.SetProperty("MinGanttsize",e.Get("MinGanttsize")/4)),s=i[r.format("MM/dd/yyyy")],s*=e.Get("MinGanttsize"),e.Get(h)=="1024"&&(s/=8);if(e.Get(h)=="131072"||e.Get(h)=="262144"||e.Get(h)=="524288")s/=8;$(".siebui-splitBox3").scrollLeft(s)}else SiebelAppFacade.fsDispatchBoardRenderer.superclass.SetHScrollPos.call(this);else SiebelAppFacade.fsDispatchBoardRenderer.superclass.SetHScrollPos.call(this)},_.prototype.calcNonContiguousTime=function(e){var t=this.GetPM();if(t.Get(h)==C.toString()||t.Get(h)==k.toString()||t.Get(h)==m.toString()||t.Get(h)==g.toString()||t.Get(h)==y.toString()||t.Get(h)==b.toString()||t.Get(h)==w.toString()||t.Get(h)==E.toString()||t.Get(h)==S.toString()||t.Get(h)==x.toString()){var n=t.Get("PixelsPerUnit"),r=t.Get("TDays"),s=t.Get("StartTime"),o=t.Get("EndTime"),u=0,a=new Date(t.Get(p)),f=t.Get("FinalWeekDays");pixels=n*$("#UGrid").width(),pixels&&(noOfUnits=parseInt(e/pixels));for(i=0;i<noOfUnits;)f.indexOf(a.getDay())!==-1&&i++,u++,a.setDate(a.getDate()+1);while(f.indexOf(a.getDay())==-1)u++,a.setDate(a.getDate()+1);return timePixels=e%pixels,startDay=t.Get(p)+u*r,pixels&&(startTime=parseInt(t.Get("StartTime")+timePixels/pixels*t.Get("AxisDuration"),10)),startDay+=startTime,parseInt(startDay,10)}return SiebelAppFacade.fsDispatchBoardRenderer.superclass.calcNonContiguousTime.call(this,e)},_.prototype.preparerowtasks=function(e,t,r,i){var s="",o=this.GetPM(),a=o.Get("Color Display By"),f=o.Get("Status Abbreviations"),l=o.Get("Booking Colors"),c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;f&&(c=f.substring(f.indexOf(a)+a.length+1,f.indexOf(";",f.indexOf(a))));if(e)for(E in e){var O={};O.rowID=i,O.events=e;var M=A.some(function(e){return e.rowID===O.rowID});M||A.push(O);if(e.hasOwnProperty(E)){h=e[E][c],p=c+"_"+h,g="BGRCLR_"+e[E].BGRCLR,y="BDRCLR_"+e[E].BDRCLR,b="TXTCLR_"+e[E].LBL,d=l[p],d=l[g],v=l[y],m=l[b],d||(d=o.Get("EventDefaultColor")),x=e[E].width;if(typeof x=="undefined"||x==0)continue;T="",N=e[E].OLPCNT,typeof v!="undefined"&&typeof N=="undefined"&&(T="border-color:#"+v+";border-width:2px;"),S=e[E][n];if(!m||!S)m="";S||(S=""),C=e[E].DDID,C?L=u:(C="",L=""),SiebelApp.S_App.IsAutoOn()==="true"?(s=s+'<div class="siebui-taskBox '+e[E].CLS+'" taskId="'+e[E].ID+'" id= "'+t.toString()+'" style="width:'+e[E].width+"%;height:"+e[E].height+"px;left:"+e[E].left+"%;margin-top:"+e[E].top+"px;"+T+";",s=s+'ot = "div gantt" rn ="'+e[E].ID+"-event "+e[E].LBL+e[E].ST+e[E].ET+'" un ="'+e[E].LBL+e[E].ST+e[E].ET+'"',s=s+">"+'<div class="siebui-layout" style="background-color:#'+d+';">'+'<div class="taskStatus" status="'+e[E].GS+'">'+'<a class="'+L+'" data-drilldown-type= "UGrid" data-drilldown-id="'+C+'" style="color:#'+m+';">'+S+"</a>"+"</div></div>"):s=s+'<div class="siebui-taskBox '+e[E].CLS+'" taskId="'+e[E].ID+'" id= "'+t.toString()+'" style="width:'+e[E].width+"%;height:"+e[E].height+"px;left:"+e[E].left+"%;margin-top:"+e[E].top+"px;"+T+'">'+'<div class="siebui-layout" style="background-color:#'+d+';">'+'<div class="taskStatus" status="'+e[E].GS+'">'+'<a class="'+L+'" data-drilldown-type= "UGrid" data-drilldown-id="'+C+'" style="color:#'+m+';">'+S+"</a>"+"</div></div>";if(e[E]["ACTTT"]!=""&&l.ACTTT_TTD==="Y"){var _=new Date(e[E].ST),D=new Date(e[E].ET),P=e[E].top-e[E].height+4,H=e[E].ACTTT*6e6/(D-_);s=s+'<div class="siebui-layout" style="width:'+H+"%;margin-top:"+P+"px;background-color:#"+l.ACTTT_HPC+';"></div>'}s+="</div>"}}return k=new Date,console.log("endDispatchPrepareRowTime in Dispatch PrepareRowTasks is  "+k),s},_}(),"SiebelAppFacade.fsDispatchBoardRenderer"}));

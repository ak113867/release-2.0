/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.GanttRenderer=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.GanttRenderer"),define("siebel/ganttrenderer",["siebel/phyrenderer","3rdParty/team-jq-gantt/Libs/date.js","3rdParty/team-jq-gantt/Libs/platform.js","3rdParty/team-jq-gantt/ganttUtilities.js","3rdParty/team-jq-gantt/ganttGridEditor.js","3rdParty/team-jq-gantt/ganttMaster.js","siebel/ganttDateBar","siebel/ganttLegendBar"],function(){return SiebelAppFacade.GanttRenderer=function(){function st(){SiebelAppFacade.GanttRenderer.superclass.constructor.apply(this,arguments);var e=this.GetPM();e.AttachPMBinding("IsRefreshNeeded",this.BindData,{scope:this}),e.AttachPMBinding("RevertBooking",pt,{scope:this}),e.AttachPMBinding(f,Pt,{scope:this}),e.AttachPMBinding(g,Pt,{scope:this}),e.AttachPMBinding("ShowLegend",Ht,{scope:this}),e.AttachPMBinding("expcolpse",Bt,{scope:this});var t=null,n=null,r=0,i=0,s={},o=0,u=0,a=0,l=600,c=e.Get("GetFullId"),h=e.Get("CustCtlrName"),p=0,d=e.Get("IsPharma"),v=1;e.SetProperty("InEvent",!1),this.GetPharmaCall=function(){return d},this.GetAppletId=function(){return c},this.GetCustCtrlName=function(){return h},this.getGanttLegendBar=function(){return n},this.setGanttLegendBar=function(e){n=e},this.getRowsPerPage=function(){return i},this.setRowsPerPage=function(e){i=e},this.getTotalPages=function(){return u},this.setTotalPages=function(e){u=e},this.getRemainingRows=function(){return a},this.setRemainingRows=function(e){a=e},this.getGanttDateBar=function(){return t},this.setGanttDateBar=function(e){t=e},this.setMapResIndex=function(e){s=e},this.getMapResIndex=function(e){return s},this.setResColCount=function(e){o=e},this.getResColCount=function(){return o},this.setGanttCtrlHeight=function(e){l=e},this.getGanttCtrlHeight=function(){return l},this.setHasWidthbuffer=function(e){p=e},this.getHasWidthbuffer=function(){return p},this.setFirstLoad=function(e){v=e},this.getFirstLoad=function(){return v}}function ot(e){var t=this.GetPM(),n=this.GetUIWrapper(e);ctrlResEl=n.GetEl(),name="",dataArray=[],mapResIndex={},resSet=t.Get("RecordSet"),reslen=0,value="",reslen=resSet?resSet.length:0;for(var r=0;r<reslen;r+=1)name=resSet[r]["Resource Name"],mapResIndex[name.toLowerCase()]=r,dataArray.push(name);this.setMapResIndex(mapResIndex),ctrlResEl.length!==0&&ctrlResEl.autocomplete("option","source",dataArray)}function ut(e){var t=this.GetPM(),n=$(".siebui-taskEditRow").height(),r=0,i,s=this.getMapResIndex();if(e){r=s[e.toLowerCase()];if(r>=0)return i=parseInt(r*n,10),$(".siebui-splitBox3").scrollTop(i),$("#"+t.Get("RecordSet")[r][t.Get("RJoinFld")]).click(),!0}return!1}function at(e){var t=this.GetPM(),n,r,i,s,o=t.Get("RecordSet"),u=o.length,a=t.Get("RJoinFld");for(var f=0;f<u;f+=1){r=$("#"+o[f][a]).attr("pid");if(r===""||r==="ORPHANED")n=$("#"+o[f][a]).attr("id"),i=$("#"+n).children()[0],s=$(i.lastChild).children()[0],e?$(s).hasClass("ui-icon-triangle-1-e")&&($(s).removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-se"),$('*[pid="'+n+'"]').slideToggle(30)):$(s).hasClass("ui-icon-triangle-1-se")&&($(s).removeClass("ui-icon-triangle-1-se").addClass("ui-icon-triangle-1-e"),$('*[pid="'+n+'"]').slideToggle(30))}}function ft(e){var t=e.data.ctx,n=t.GetPM(),r=e.data.ctx,i=$(".siebui-splitBox3").scrollLeft(),s=0,o=$(".siebui-splitBox3").width(),u=$("#s_"+t.GetAppletId()+"_div").find("#s_ganttleft"),a=$("#s_"+t.GetAppletId()+"_div").find("#s_ganttRight"),f=0;a.hasClass("siebui-shrinkRight")?(a.removeClass("siebui-shrinkRight"),u.hide()):(u.show(),a.addClass("siebui-shrinkRight"));var l=$("#"+r.GetCustCtrlName()),c=l.innerWidth();s=$(".siebui-splitBox3").width();if(r.getHasWidthbuffer()==1){var h=n.Get("ScrollbarWidth");f=(s-h)/c*100}else f=s/c*100;$(".siebui-splitBox2").width(f+"%"),$(".siebui-splitBox3").scrollLeft(i*s/o),At.call(t)}function lt(e){var t=e.data.ctx.GetPM(),n=t.Get("GetControls"),r=t.Get("TST"),i=t.Get("datePaddingMap"),s=0,o=e.currentTarget.id.replace("_Ctrl",""),u="",a=0,f=t.Get("TotalHPages"),l=f;SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0}),a|=2,a|=4,a|=8,a|=16,t.SetProperty("PanesToRefresh",a);for(var c in n)if(n[c].GetInputName()===o){u=n[c].GetName(),t.SetProperty("NotifyTSButtonClk","TRUE");if(r!=u){t.SetProperty("TST",u),t.SetProperty("InEvent",!1),i[u]&&(s=i[u]),l=1+s*2,l!==f&&(t.SetProperty("TotalHPages",l),t.SetProperty("IsTotalHPagesChanged","Y")),i[u]&&(s=i[u]),l=1+s*2,l!==f&&(t.SetProperty("TotalHPages",l),t.SetProperty("IsTotalHPagesChanged","Y")),jt.call(e.data.ctx),e.data.ctx.getGanttDateBar().setNavigationValues();break}}n=null}function ct(e){var t,n=this.GetPM(),r,i,s,o,u,a,f,l,c,h,p,d,v,m;r=n.Get("LIC Field")[e],i=n.Get("Status Abbreviations"),s=i.substring(i.indexOf(r)+r.length+1,i.indexOf(";",i.indexOf(r))),o=n.Get("Booking Colors"),u=n.Get("RecordSet"),m=u?u.length:0;for(var g=0;g<m;g+=1){var y=u[g][n.Get("RJoinFld")];t=n.ExecuteMethod("gettaskSeqEvents",y);if(t)for(v=0;v<t.length;v++)d=$('*[taskId="'+t[v]+'"]').find(".siebui-layout"),l=n.ExecuteMethod("getEvent",y,t[v]),c=l[s],h=s+"_"+c,p=o[h],p||(p=n.Get("EventDefaultColor")),d.css({"background-color":p})}n.SetProperty("Color Display By",r),this.getGanttLegendBar().createLegends(n.ExecuteMethod("prepareLegendMap"),n.Get("ShowLegend"))}function ht(e,t){var n=e.getMinutes(),r;return r=parseInt((n+t/2)/t,10)*t,e=new Date(e.setMinutes(r,0)),e}function pt(){var e=this.GetPM(),t=e.Get("RevertDate"),n=e.Get("RevertInfo"),r=this.GetPM(),i,s,o,u,a,f,l=t?t.FROMRESINDEX:-1,c=t?t.TORESINDEX:-1,h=e.Get("Color Display By"),p=e.Get("Status Abbreviations"),d;p&&h&&(d=p.substring(p.indexOf(h)+h.length+1,p.indexOf(";",p.indexOf(h))));var v={Statabb:d,EventColor:e.Get("Booking Colors"),TST:e.Get("TST"),configSpacePatternFlag:e.Get("ConfigSpacePattern"),EventDefaultColor:e.Get("EventDefaultColor")};if(l&&l!==-1){a="",$("#UGrid").find("#"+l.toString()+" div.siebui-eventContainer").remove();if(this&&r){var m=r.Get("enableWorkSetSizeEmpPerPage");m&&m.toLowerCase()=="true"?(f=e.Get("RecordSet"
)[l],f&&typeof f!="undefined"&&(f=e.Get("RecordSet")[l].EVENTS,a='<div class="siebui-eventContainer">'+this.preparerowtasks(f,l,v)+"</div></div>")):(f=e.Get("RecordSet")[l].EVENTS,a='<div class="siebui-eventContainer">'+this.preparerowtasks(f,l,v)+"</div></div>")}$("#UGrid").find("#"+l.toString()).append(a)}c&&c!==-1&&(a="",$("#UGrid").find("#"+c.toString()+" div.siebui-eventContainer").remove(),f=e.Get("RecordSet")[c].EVENTS,a='<div class="siebui-eventContainer">'+this.preparerowtasks(f,c,v)+"</div></div>",$("#UGrid").find("#"+c.toString()).append(a)),e.SetProperty("RevertDate",""),v=null}function dt(e){var t='<div id="gantEditorTemplates" class="siebui-gantEditorTemplates">'+vt.call(this)+"</div>";return t}function vt(){var e=this.GetPM().Get("RESOURCEHEADER"),t=e.length,n=parseFloat(100/t,10),r='<span class="appletButton siebui-ganttFilterPane"><span class="siebui-ganttFilter" ot="span" rn="gearIcon" un="gearIcon" title="Filter Panel"></span></span>',i='<div class="siebui-gdfHeaderRow">',s=this.GetPM().Get(l),o="",u=SiebelApp.S_App.IsAutoOn();this.setResColCount(t),s&&(o=utils.TokenizeString(s,":"));for(var a=0,f="";a<t;a++)f+="<div ",o!==""&&(f=f+'style = "width:'+o[a]+'px;"'),a===t-1?(f=f+' class="siebui-gdfColHeader  gdfied siebui-lastColumn" id="siebui-gdfColHeader'+a+'" data-idd-name="'+e[a].IDD+'" ColNum ="'+a+'"><div class = "siebui-headerData"',u==="true"&&(f+='ot = "span" rn = "'+e[a].NM+'" un = "RH'+e[a].NM+'"'),f+=">"+e[a].NM+"</div></div>"):(f=f+' class="siebui-gdfColHeader  gdfied" id="siebui-gdfColHeader'+a+'" data-idd-name="'+e[a].IDD+'" ColNum ="'+a+'"><div class = "siebui-headerData"',u==="true"&&(f+='ot = "span" rn = "'+e[a].NM+'" un = "RH'+e[a].NM+'"'),f+=">"+e[a].NM+"</div></div>");return i=i+f+"</div></div>",i}function mt(t,n,r,i,s){var o=this.GetPM(),u=s.RHeaderMap,f=u.length,c=parseFloat(100/f,10),h=this.getRowsPerPage(),p=i?i.length:0,d=p>h?h:p,v="",m="",g=o.Get(l),y="";appletId=this.GetAppletId(),fld=s.RJoinFld,parentfld=s.RParentFld,Icons="Icons",strAutoOn=SiebelApp.S_App.IsAutoOn(),attr="",g&&(y=utils.TokenizeString(g,":"));for(var b=t,w="";b<n;b+=1){if(this&&o){var E=o.Get("enableWorkSetSizeEmpPerPage");E&&E.toLowerCase()=="true"?w=w+'<div  class="siebui-gdfRow siebui-gdfRowRes siebui-taskEditRow row'+b.toString()+' siebui-resourcecolor-a"  index="'+b.toString()+'"  taskId="'+i[b][fld]+'"    pid="'+i[b][parentfld]+'"  id="'+i[b][fld]:w=w+'<div  class="siebui-gdfRow siebui-gdfRowRes siebui-taskEditRow row'+b.toString()+""+i[b].STCLS+'"  index="'+b.toString()+'"  taskId="'+i[b][fld]+'"    pid="'+i[b][parentfld]+'"  id="'+i[b][fld]}strAutoOn==="true"&&(w+='"ot = "row" rn = "RR'+i[b][fld]+'" un = "RR'+i[b][fld]+'"'),w+='" >';for(var S=0,x="";S<f;S++){var T=u[S].DDFLD?a:"";if(S===0){x=x+'<div class="siebui-gdfCell ui-resizable'+appletId+S+'" ',y!==""&&(x=x+'style = "width:'+y[S]+'px;"');if(this&&o){var E=o.Get("enableWorkSetSizeEmpPerPage");E&&E.toLowerCase()=="true"?x=x+'> <div class = "siebui-defaultIndent" style=padding-left:'+i[b].LEVEL*5+"px;>"+'<div class="siebui-noIcon" taskId = "'+i[b][fld]+'"></div>':x=x+'> <div class = "siebui-defaultIndent" style=padding-left:'+i[b].LEVEL*5+"px;>"+i[b][Icons]+'<div class="'+i[b].CLS+'" taskId = "'+i[b][fld]+'"></div>'}}else S===f-1?(x=x+'<div class="siebui-gdfCell ui-resizable siebui-lastColumn'+appletId+S+'" ',y!==""&&(x=x+'" style = "width:'+y[S]+'px;"'),x+='><div class="siebui-resIndent siebui-defaultIndent">'):(x=x+'<div class="siebui-gdfCell ui-resizable'+appletId+S+'" ',y!==""&&(x=x+'" style = "width:'+y[S]+'px;"'),x+='><div class="siebui-resIndent siebui-defaultIndent">');attr="data-drilldown-type='RGrid' data-drilldown-id='"+i[b][u[S].DDFLD]+"'",strAutoOn==="true"&&(attr+=" ot = 'drilldown' rn = 'RR "+i[b][u[S].FLD]+"' un = 'RR"+i[b][fld]+"'"),x+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_LINK"),className:"siebui-showResTooltip "+T,value:HtmlEncode(i[b][u[S].FLD]),attrs:attr}),x+="</div></div>"}w=w+x+"</div>"}return m=m+w+"</div>",m}function gt(e,t,n,r,i){var s='<div class="'+n+'">';fld=i.RJoinFld,parentFld=i.RParentFld,ResPaneRefresh=(this.GetPM().Get("PanesToRefresh")&4)===0,strAutoOn=SiebelApp.S_App.IsAutoOn();for(var o=e,u="";o<t;o+=1){var a=o.toString(),f=ResPaneRefresh&&r[o][parentFld]!=="ORPHANED"?$("#"+r[o][fld]).css("display"):"block",u=u+'<div  style="display:'+f+'" class="siebui-gdfRow siebui-taskEditUtility row'+a+'"  pid="'+r[o][parentFld]+'"   taskId="'+r[o][fld]+'"  id="'+o.toString()+'" ';strAutoOn==="true"&&(u+='ot = "row" rn = "'+r[o][fld]+'UR" un = "UR'+r[o][fld]+'"'),u+='><div class="siebui-eventContainer">'+this.preparerowtasks(r[o].EVENTS,o,i,r[o].Id)+"</div></div>"}return s=s+u+"</div>",s}function yt(e){var t=$(this).closest(".siebui-gdfRow").attr("taskid");t!==""&&t!="ORPHANED"&&$('*[pid="'+t+'"]').slideToggle(30),$(this).hasClass("ui-icon-triangle-1-e")?$(this).removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-se"):$(this).removeClass("ui-icon-triangle-1-se").addClass("ui-icon-triangle-1-e")}function bt(e){if(!$(this).attr("aria-label")){var t=e.data.ctx.GetPM(),n="",r="",i,s="",o=SiebelApp.S_App.NewPropertySet();e.data.attr==="Id"?s=$(this).closest(".siebui-taskEditRow").attr("Id"):e.data.attr==="DateVal"&&(s=$(this).attr("DateVal"));if(s){o.SetProperty(e.data.Input,s),o.SetProperty("Pane",e.data.Pane),t.ExecuteMethod("getTooltip",o),r=t.Get("tooltipMap");if(r){i=r.EnumProperties(!0);while(i)n!==""?n=n+"\n"+String(r.GetProperty(i)):n=String(r.GetProperty(i)),i=r.EnumProperties(!1)}$(this).attr("aria-label",n),$(this).attr("title",n)}}}function wt(e){if(!$(this).attr("aria-label")){var t=e.data.ctx.GetPM(),n="",r,i="",s,o=SiebelApp.S_App.NewPropertySet(),u=$(this).attr("taskId"),a=t.Get("RecordSet")[$(this).closest(".siebui-gdfRow").attr("id")][t.Get("RJoinFld")],f,l,c;if(u&&a){i=t.ExecuteMethod("getEvent",a,u);if(i){i.FI?o.SetProperty("FunId",i.FI):o.SetProperty("ResourceId",a),t.Get("isDispatchBoard")==="TRUE"&&(f=new Date(i.ST),l=new Date(
i.ET),c=t.Get("GetRawRecordSet")[0]["Service Region Id"],o.SetProperty("StartDate",f.format("MM/dd/yyyy")),o.SetProperty("EndDate",l.format("MM/dd/yyyy")),o.SetProperty("ServiceRegionId",c)),o.SetProperty("BookingId",u),o.SetProperty("Pane","Pane 2"),t.ExecuteMethod("getTooltip",o),r=t.Get("tooltipMap");if(r){s=r.EnumProperties(!0);while(s)n!==""?n=n+"\n"+String(r.GetProperty(s)):n=String(r.GetProperty(s)),s=r.EnumProperties(!1)}}$(this).attr("aria-label",n),$(this).attr("title",n)}}}function Et(e){var t=e.data.ctx,n=0,r=t.GetPM(),i=e.currentTarget.offsetLeft;if(r.ExecuteMethod("CanExtendShrinkEvents")){var s,o=r.Get("fx")*r.Get("Round Minutes Events")*6e4;o||(o=10),$(this).removeClass("Rsizable"),$(this).resizable({containment:$("#s_"+t.GetAppletId()+"_div").find("#UGrid"),handles:"e,w",minWidth:o,start:function(e,t){},stop:function(e,i){var o,u,a,f,l=null,c,h,p=null,d,v,m,g,y,b,w,E=null,S=null,x={};v=$(this).closest("div.siebui-gdfRow").attr("Id"),b=r.Get("RecordSet")[v][r.Get("RESOURCEHEADER")[0].FLD],v=r.Get("RecordSet")[v][r.Get("RJoinFld")],m=$(this).attr("taskId"),g=r.ExecuteMethod("getEvent",v,m),y=g.FI,o=i.position.left,s=i.originalPosition.left,h=new Date(g.ET),c=new Date(g.ST),aendDate=new Date(g.AET),astDate=new Date(g.AST),l=c.getTime(),E=h.getTime()-c.getTime(),S=aendDate.getTime()-astDate.getTime();var T=r.Get("endMillis")-r.Get("startMillis"),N=r.Get("TurnTime"),C;N==="Y"?i.size.width>i.originalSize.width?u=i.size.width-i.originalSize.width-(i.size.width-i.originalSize.width)*(S-E)/(S*2):u=i.size.width-i.originalSize.width-(i.size.width-i.originalSize.width)*(S-E)/(E*2):u=i.size.width-i.originalSize.width,parseInt(o,10)!==parseInt(s,10)?(r.Get("EndTime")?l=t.calcNonContiguousTime(o):r.Get("fx")!==0&&(p=Math.round(u/r.Get("fx"))),l-=p,c=new Date(l),c=t.computeDSTTime(T,c),c=ht(c,r.Get("Round Minutes Events"))):(r.Get("EndTime")?(a=o*1+i.size.width*1,f=t.calcNonContiguousTime(a)):(r.Get("fx")!==0&&(p=Math.round(u/r.Get("fx"))),f=l+E+p),h=new Date(f),h=t.computeDSTTime(T,h),h=ht(h,r.Get("Round Minutes Events"))),f=h.format("HH:mm:ss"),l=c.format("HH:mm:ss"),r.Get("isDispatchBoard")==="TRUE"&&(C=r.Get("GetRawRecordSet")[0]["Service Region Id"]),w=$(this).closest("div.siebui-taskEditUtility"),x.FROMRESINDEX=$(w).attr("id"),r.SetProperty("RevertDate",x),d=SiebelApp.S_App.NewPropertySet(),d.SetProperty("Resource Id",v),d.SetProperty("Resource",b),d.SetProperty("Function Id",y),d.SetProperty("booking Id",m),d.SetProperty("Start Date",c.format("MM/dd/yyyy")),d.SetProperty("Start Time",l),d.SetProperty("End Time",f),d.SetProperty("End Date",h.format("MM/dd/yyyy")),d.SetProperty("End DTTM",h.format("MM/dd/yyyy HH:mm:ss")),d.SetProperty("Start DTTM",c.format("MM/dd/yyyy HH:mm:ss")),d.SetProperty("operation","ExtendShrink"),d.SetProperty("ServiceRegionId",C),n=0,n|=2,n|=16,d.SetProperty("PanesToRefresh",n),r.SetProperty("PanesToRefresh",n),r.SetProperty("InEvent",!0),r.ExecuteMethod("InvokeOperation",d)}})}}function St(e){var t=e?e.data.ctx:this,n=t.GetPM(),r=n.Get("Resource Id"),i=n.Get("ResIDtoIndex")[r];if(e){var s=$(this).attr("taskid"),o=n.Get("ResIDtoIndex")[s];$("#s_"+t.GetAppletId()+"_div").find(".row"+i).removeClass("siebui-rowSelected"),$("#s_"+t.GetAppletId()+"_div").find(".row"+o).addClass("siebui-rowSelected"),n.SetProperty("Resource Id",s)}else i!=="undefined"&&$("#s_"+t.GetAppletId()+"_div").find(".row"+i).addClass("siebui-rowSelected")}function xt(e){var t=e.data.ctx,n=t.GetPM(),r=$(this).scrollLeft()+e.clientX-$(this).offset().left,o=$(e.target).closest(".siebui-gdfRow").attr("id"),u="",a,f,l,c,h,p,d,v,m,g=0;o&&(u=n.Get("RecordSet")[o][n.Get("RESOURCEHEADER")[0].FLD],m=n.Get("RecordSet")[o][n.Get("RJoinFld")]),n.Get("EndTime")?a=new Date(t.calcNonContiguousTime(r)):a=r*(n.Get(s)-n.Get(i))/$("#UGrid").width()+n.Get(i),f=new Date(a),l=f.getMinutes(),c=parseInt((l+7.5)/15,10)*15,f=new Date(f.setMinutes(c,0)),h=f.format("MM/dd/yyyy"),p=f.format("HH:mm:ss"),d=f.format("MM/dd/yyyy HH:mm:ss"),v=SiebelApp.S_App.NewPropertySet(),v.SetProperty("Resource Id",m),v.SetProperty("Resource",u),v.SetProperty("Start Date",h),v.SetProperty("Start Time",p),v.SetProperty("Start DTTM",d),v.SetProperty("operation","Create Task"),g=0,g|=2,g|=16,v.SetProperty("PanesToRefresh",g),n.SetProperty("PanesToRefresh",g),n.SetProperty("InEvent",!0);var y=SiebelApp.S_App.GetName();y!=="Siebel eDealer"&&n.ExecuteMethod("InvokeOperation",v)}function Tt(e){var t=e.data.ctx,n=t.GetPM(),r=$("#s_"+n.Get("GetFullId")+"_div").find(".siebui-splitBox3"),i=r.offset(),s=i.top+r.height(),o=null,u=null,a=10,f=100,l=20;$(this).draggable({containment:$("#s_"+n.Get("GetFullId")+"_div").find("#UGrid"),scrollSensitivity:1,zIndex:9999,drag:function(e,t){var c=!1;e.pageY-i.top<=a&&(c=!0,clearInterval(o),clearInterval(u),o=setInterval(function(){n.Get("InEvent")===!1&&(clearInterval(o),clearInterval(u)),r.scrollTop(r.scrollTop()-l)},f)),e.pageY>=s-a&&(c=!0,clearInterval(o),clearInterval(u),u=setInterval(function(){n.Get("InEvent")===!1&&(clearInterval(o),clearInterval(u)),r.scrollTop(r.scrollTop()+l)},f)),c||(clearInterval(o),clearInterval(u))},start:function(e,t){var r=$(this).closest("div.siebui-gdfRow").attr("taskId"),i=$(this).closest("div.siebui-gdfRow").attr("Id");$(this).draggable("option","sResId",r),$(this).draggable("option","resindex",i),$(this).draggable().css({"margin-top":0}),n.SetProperty("InEvent",!0)}})}function Nt(e){var t=e.data.ctx,n=t.GetPM();it={mask:!0},n.SetProperty("FLD_NAME",this.textContent),n.Get("SORT_ORDER")?n.SetProperty("SORT_ORDER",0):n.SetProperty("SORT_ORDER",1),n.ExecuteMethod("SortRefreshGantt",it)}function Ct(e){e.stopPropagation();var t=SiebelApp.S_App.GetName();if(t==="Siebel eDealer")return;if($(this).hasClass("Dragpble")||$(this).hasClass("DClickable")){var n=e.data.ctx,r=n.GetPM(),i=$(this).attr("taskId"),s=$(e.target).closest(".siebui-gdfRow").attr("id"),o=s,u=0;if(i&&s){s=r.Get("RecordSet")[s][r.Get("RJoinFld")];var a=r.ExecuteMethod("getEvent",s,i),f=a.FI,l=a.GS,c=a.FSTP,h=r.Get("RecordSet"
)[o][r.Get("RESOURCEHEADER")[0].FLD],p=SiebelApp.S_App.NewPropertySet(),d=SiebelApp.S_App.NewPropertySet();p.SetProperty("booking Id",i),p.SetProperty("Function Id",f),p.SetProperty("Resource Id",s),p.SetProperty("Resource",h),p.SetProperty("Inventory Status",l),p.SetProperty("Function Space Type",c),p.SetProperty("operation","Show Task Details"),u=0,u|=2,u|=16,p.SetProperty("PanesToRefresh",u),r.SetProperty("PanesToRefresh",u),r.SetProperty("InEvent",!0),r.ExecuteMethod("InvokeOperation",p)}}}function kt(t){var n=t.data.ctx,r=n.GetPM(),o=r.Get(e.get("SWE_GANTT_ACTIVITY_EARLIEST_LATEST_VIOLATION")),u=r.Get("Enable Earliest/Latest Start Violation Check"),a=!1;u?u.toLowerCase()=="true"&&(a=!0):o&&o=="1"&&(a=!0),a||$("#s_"+n.GetAppletId()+"_div").find(".siebui-taskEditUtility").droppable({drop:function(e,t){var o=null,u=$(this).attr("Id"),a=t.draggable.attr("taskId"),f,l,c,h,p,d,v,m,g,y,b=r.Get("RecordSet")[u][r.Get("RESOURCEHEADER")[0].FLD],w=0,E=r.Get(i),S={},x,T,N=$(this).attr("taskid");if(r.Get("EndTime"))o=new Date(n.calcNonContiguousTime(t.position.left));else{o=new Date(Math.round(t.position.left*(r.Get(s)-E)/$("#UGrid").width()+E));var C=r.Get("TurnTime");C==="Y"&&(OResId=$(t.draggable).draggable("option","sResId"),v=r.ExecuteMethod("getEvent",OResId,a),o=new Date(o.getTime()+((new Date(v.ST)).getTime()-(new Date(v.AST)).getTime())))}f=parseInt((o.getMinutes()+7.5)/15,10)*15,o=new Date(o.setMinutes(f,0));var k=r.Get("endMillis")-r.Get("startMillis");o=n.computeDSTTime(k,o),l=o.format("MM/dd/yyyy"),c=o.format("HH:mm:ss"),h=o.format("MM/dd/yyyy HH:mm:ss"),p=SiebelApp.S_App.NewPropertySet(),r.SetProperty("InEvent",!0),d=$(t.draggable).draggable("option","sResId"),x=$(t.draggable).draggable("option","resindex"),v=r.ExecuteMethod("getEvent",d,a),S.FROMRESINDEX=x,S.TORESINDEX=u,r.SetProperty("RevertDate",S),m=v.FI,g=v.DDID,y=new Date(o.getTime()+((new Date(v.ET)).getTime()-(new Date(v.ST)).getTime())),p.SetProperty("Resource Id",N),p.SetProperty("booking Id",a),p.SetProperty("Resource",b),p.SetProperty("Start Date",l),p.SetProperty("Start Time",c),p.SetProperty("Start DTTM",h),p.SetProperty("End Time",y.format("HH:mm:ss")),p.SetProperty("End DTTM",y.format("MM/dd/yyyy HH:mm:ss")),p.SetProperty("End Date",y.format("MM/dd/yyyy")),p.SetProperty("Function Id",m),p.SetProperty("Quote Id",g),p.SetProperty("Pre Resource Id",d),p.SetProperty("operation","DragnDrop"),w=0,w|=2,w|=16,p.SetProperty("PanesToRefresh",w),r.SetProperty("PanesToRefresh",w),r.ExecuteMethod("InvokeOperation",p),r.SetProperty("InEvent",!1)}})}function Lt(e){var t=20,n=Number(e.Get("TotalHPages"),10)>0?15:0;return Math.floor(($("#s_"+this.GetAppletId()+"_div").find(".siebui-splitBox1").height()-n)/t,10)}function At(){var e=0,t=this.GetPM(),n=0,r=$("#"+this.GetCustCtrlName()),o=$(".siebui-vSplitBar"),u=21;o.length>0&&(e=$("#UGrid").width(),n=e/(t.Get(s)-t.Get(i)),t.SetProperty("MinGanttsize",e),t.SetProperty("fx",n))}function Ot(e){$.splittify.splitterBar=$(this);var t=0,n=SiebelApp.S_App.NewPropertySet(),r=e.data.ctx,i=r.GetPM(),s=$("#s_"+r.GetAppletId()+"_div"),o,u=$(".siebui-splitBox3").scrollLeft(),a=0,f=$(".siebui-splitBox3").width();reclen=i.Get("RecordSet")?i.Get("RecordSet").length:0,$("body").unselectable().bind("mousemove",function(e){var n=$.splittify.splitterBar,o=e.pageX-n.parent().offset().left,l=n.parent().width(),c=i.Get("ScrollbarWidth"),h=parseInt($(".siebui-resourceContainer").css("width"));if(o>0&&o<h){t=l;var p=parseFloat(o/l*100,2),d=parseFloat((o+n.width())/l*100,2),v=parseFloat((l-(o+n.width()))/l*100,2),m=c/l*100;n.css({left:p+"%"}),s.find(".siebui-resourceContainer").css({width:p+"%"}),r.getHasWidthbuffer()==1?s.find(".siebui-splitBox2").css({left:d+"%",width:v-m+"%"}):s.find(".siebui-splitBox2").css({left:d+"%",width:v+"%"}),s.find(".siebui-splitBox3").css({left:d+"%",width:v+"%"}),a=$(".siebui-splitBox3").width(),$(".siebui-splitBox3").scrollLeft(u*a/f)}}).bind("mouseup",function(e){$(this).unbind("mousemove").unbind("mouseup").clearUnselectable();var s=t;At.call(r),o=$.splittify.splitterBar.offset().left-$("#"+r.GetCustCtrlName()).offset().left,i.SetProperty(c,o),n.SetProperty("splPos",o),i.ExecuteMethod("saveUserPref",n),delete $.splittify.splitterBar})}function Mt(e){var t=this.GetPM(),n=$("#"+this.GetCustCtrlName()),r=n.innerWidth(),i=t.Get("Splitter Position"),s=t.Get("ScrollbarWidth"),o=$("#s_"+this.GetAppletId()+"_div"),u=parseInt($(".siebui-resourceContainer").css("width")),a=o.find(".siebui-vSplitBar"),f=a.width(),l=o.find(".siebui-gdfCell");i===""?l.length>0?i=l.css("width"):i=h:i=Math.min(i,u),i=parseInt(i,10)+"px";var c=parseFloat(parseInt(i,10)/r*100,2),p=parseFloat((parseInt(i,10)+f)/r*100,2),d=s/r*100,v=$("#RGrid");a.css({left:c+"%"}),v.get(0).scrollHeight>v.get(0).offsetHeight?(o.find(".siebui-splitBox2").css({left:p+"%",width:100-p-d+"%"}),this.setHasWidthbuffer(1)):(o.find(".siebui-splitBox2").css({left:p+"%",width:100-p+"%"}),this.setHasWidthbuffer(0)),o.find(".siebui-splitBox3").css({left:p+"%",width:100-p+"%"})}function _t(e){var t=e.data.ctx,n=t.GetPM(),r=SiebelApp.S_App.NewPropertySet(),i=".siebui-ResCol"+t.GetAppletId()+$(this).attr("ColNum"),s=$("#s_"+t.GetAppletId()+"_div"),o=e.data.ctx.getResColCount(),u="",a=$(".siebui-gdfColHeader").css("min-width"),f=$(".siebui-gdfColHeader").css("max-width");$(this).resizable({alsoResize:i,handles:"e",minWidth:a,maxWidth:f,start:function(e,t){},stop:function(e,t){$(i).css("height","");for(var a=0;a<o;a++)u=u+s.find("#siebui-gdfColHeader"+a).width()+":";n.SetProperty(l,u),r.SetProperty("colWidth",u),n.ExecuteMethod("saveUserPref",r)}})}function Dt(){$(".siebui-splitBox3").scrollTop(this.GetPM().Get("VScrollPos"))}function Pt(){if(this.getGanttDateBar()!=null){var e=this.GetPM();$("#s_"+this.GetAppletId()+"_div").find("#ganttDateLbl").html(e.ExecuteMethod("getDateRange","")),$("#s_"+this.GetAppletId()+"_div").find("#ganttdatePicker").val(e.Get(f))}}function Ht(){var e=this.GetPM(),t,n,r=e.Get("ShowLegend"),i=$("#"+this.GetCustCtrlName()),
s=$("#"+this.GetAppletId()+"_colorcodelegend");this.getGanttLegendBar().ShowLegends(r),t=i.css("height"),n=s.css("height"),t=t?Number(t.substr(0,t.length-2)):0,n=n?Number(n.substr(0,n.length-2)):0,r?i.css("height",t-n):i.css("height",t+n)}function Bt(){var e=this.GetPM(),t=e.Get("expcolpse");at.call(this,t)}function jt(){var e=this.GetPM(),t=e.Get("GetControls"),n=e.Get("TST"),r=t[n];r&&($("#s_"+this.GetAppletId()+"_div").find(".siebui-buttonPressed").removeClass("siebui-buttonPressed"),$("#s_"+this.GetAppletId()+"_div").find("#"+r.GetInputName()+"_Ctrl").addClass("siebui-buttonPressed")),t=null}function Ft(e){var t=e.data.ctx,n=t.pm;e.srcElement?value=e.srcElement.innerHTML:value=e.target.value,at.call(t,!0),ut.call(t,value)&&(e.srcElement?e.srcElement.innerHTML="":e.target.value="")}function It(e){e.which===$.ui.keyCode.ENTER&&$(this).autocomplete("close")}function qt(e){var t=$(this),n=e.data.iScroll,r=e.data.ctx.GetPM(),i=t.scrollLeft(),s=e.data.prevScroll;$(".siebui-splitBox2").scrollLeft(i);if(r.Get("InEvent")===!1)if(s<i||n===1){if(t[0].scrollWidth<t[0].scrollLeft+t[0].offsetWidth+1){r.SetProperty("NotifyTSButtonClk","TRUE"),sDate=new Date(r.Get(f)),isNaN(sDate.getDate())||(sDate.setDate(sDate.getDate()+r.ExecuteMethod("getTimeScaleUnits")),s=0,r.ExecuteMethod("RefreshGanttChart",sDate.format(d)),n=1,t.scrollLeft(t[0].scrollLeft-10));return}$(e.data.el).data("SCROLL_BUTTON")===!0&&n===1?t.scrollLeft(t[0].scrollLeft+5):n=0}else if(s>i||n===2){if($(this)[0].scrollLeft===0&&r.Get("TotalHPages")>1){r.SetProperty("NotifyTSButtonClk","TRUE"),sDate=new Date(r.Get(f)),isNaN(sDate.getDate())||(sDate.setDate(sDate.getDate()-r.ExecuteMethod("getTimeScaleUnits")),s=t[0].scrollWidth,r.ExecuteMethod("RefreshGanttChart",sDate.format(d)),n=2,t.scrollLeft(t[0].scrollLeft+10));return}$(e.data.el).data("SCROLL_BUTTON")===!0&&n===2?t.scrollLeft(t[0].scrollLeft-5):n=0}n=0,e.data.iScroll=0,s=$(".siebui-splitBox3").scrollLeft(),e.data.prevScroll=s}function Rt(e){$(".siebui-resTable").scrollTop($(".siebui-VScroll").scrollTop())}function Ut(e){var t=0,n=e.data.ctx.GetPM();t|=2,t|=16,n.SetProperty("PanesToRefresh",t),n.SetProperty("Display Toggle",e.data.CW.GetValue()),n.ExecuteMethod("InvokeServer")}function zt(e){var t=e.data.ctx.GetPM(),n=SiebelApp.S_App.NewPropertySet(),r=e.data.CW.GetValue();t.SetProperty("Color Display Toggle",r),n.SetProperty("Color Display Toggle",r),t.ExecuteMethod("saveControlValues",n),ct.call(that,r)}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=e.get("SWE_GANTT_DRILLDOWN_ID"),n=e.get("SWE_GANTT_ACTIVITY_LABEL"),r=e.get("SWE_GANTT_RENDER_INFO"),i=e.get("SWE_GANTT_STARTMILLIS"),s=e.get("SWE_GANTT_ENDMILLIS"),o=e.get("SWE_GANTT_DRILLDOWN_CLS"),u="ICON_INFO",a=e.get("SWE_GANTT_DRILLDOWN_CLS"),f=e.get("SWE_GANTT_START_DATE"),l="Column Width",c="Splitter Position",h="170",p=30,d="MM/dd/yyyy",v=e.get("SWE_GANTT_ACTIVITY_START_TIME"),m=e.get("SWE_GANTT_DAYINFO"),g=e.get("SWE_GANTT_TIME_SCALE"),y=e.get("SWE_GANTT_COLOR"),b=e.get("SWE_GANTT_ACTIVITY_END_TIME"),w=e.get("SWE_GANTT_ACTIVITY_NO_DAYS_IN_WEEK"),E=e.get("SWE_GANTT_ACTIVITY_WEEK_DAY_START"),S=e.get("SWE_GANTT_BOTTOMAXIS"),x=e.get("SWE_GANTT_NOOFHRS"),T=e.get("SWE_GANTT_SPL_DATE"),N=e.get("SWE_GANTT_DAY_HOUR"),C=e.get("SWE_GANTT_DAY_TWOHOUR"),k=e.get("SWE_GANTT_DAY_DAY_FOURHOUR"),L=e.get("SWE_GANTT_DAY_DAY_SIXHOUR"),A=e.get("SWE_GANTT_DAY_DAY_SEVENHOUR"),O=e.get("SWE_GANTT_DAY_DAY_EIGHTHOUR"),M=e.get("SWE_GANTT_DAY_DAYPART"),_=e.get("SWE_GANTT_WEEK_DAY_DAYPART"),D=e.get("SWE_GANTT_MONTH_DOW_DAYPART"),P=e.get("SWE_GANTT_WEEK_DAY"),H=e.get("SWE_GANTT_MONTH_DAY"),B=e.get("SWE_GANTT_MONTH_DOW"),j=e.get("SWE_GANTT_3MONTH_DOW"),F=e.get("SWE_GANTT_DAY_DAY_HALFHOUR"),I=e.get("SWE_GANTT_DAY_DAY_QUARTERHOUR"),q=e.get("SWE_GANTT_YEAR_MONTH"),R=e.get("SWE_GANTT_YEAR_WEEK"),U=e.get("SWE_GANTT_MONTH_WEEK"),z=SiebelApp.S_App.LocaleObject,W="Weekends",X="TS COLOR",V="Hour Axis Color",J="MM/dd/yyyy HH:mm:ss",K="MM/DD/YYYY HH:MM:SS",Q="",G=1,Y=0,Z=10,et=0,tt=0,nt=0,rt=0,it={mask:!0};return SiebelJS.Extend(st,SiebelAppFacade.PhysicalRenderer),st.prototype.ShowUI=function(){var e,t=this.GetPM(),n="",i,s,o,u,a,f=this.getGanttCtrlHeight(),l=SiebelApp.S_App.IsAutoOn(),c,h="";SiebelAppFacade.GanttRenderer.superclass.ShowUI.call(this),i=$("#s_"+this.GetAppletId()+"_div").find("#s_ganttleft"),i&&(i.hide(),a=SiebelApp.S_App.GetName(),a==="Siebel Loyalty"||a==="Siebel Consumer Sector"||a==="Siebel eDealer"?n="":(n='<span class="appletButton siebui-ganttFilterPane"><span class="siebui-ganttFilter" title="Filter Panel"',l==="true"&&(n+=' ot="span" rn="gearIcon" un="gearIcon"'),n+="></span></span>"),t.SetProperty("FilterGantt_CLS",n)),$("#s_"+this.GetAppletId()+"_div").find("#siebui-iconSection").append(n),t.Get("DateBarControl")&&(o=$("#"+t.Get("DateBarControl")),o&&(this.setGanttDateBar(new SiebelAppFacade.GanttDateBar),this.getGanttDateBar().ShowUI(t,o),this.getGanttDateBar().BindEvents(),l==="true"&&$("#s_"+this.GetAppletId()+"_div").find(".siebui-ganttDate .ui-datepicker-trigger").attr("rn","Choose a Date").attr("un","Choose a Date").attr("ot","ImageControl"),this.getGanttDateBar().setNavigationValues()));var p=new GanttMaster;t.Get("LegendControl")?(u=$("#"+t.Get("LegendControl")),u&&(this.setGanttLegendBar(new SiebelAppFacade.GanttLegendBar),this.getGanttLegendBar().init(u,this.GetAppletId()+"_colorcodelegend"),this.getGanttLegendBar().createLegends(t.ExecuteMethod("prepareLegendMap"),t.Get("ShowLegend")),f-=u.height(),ganttLeftHeight=parseInt(f,10)+u.height()+8)):ganttLeftHeight=parseInt(f,10)+8,$("#s_"+this.GetAppletId()+"_div").find("#s_ganttFilterPane").addClass("siebui-ganttReportPane siebui-inrGanttFilterPane"),e=$("#"+this.GetCustCtrlName()).addClass("siebui-ganttControl"),e.css({height:parseInt(f,10)}),p.init(e,t.Get(r)),this.setRowsPerPage(Lt.call(this,t)),$(".siebui-splitBox3").addClass("siebui-VScroll"),l==="true"&&($(".siebui-splitBox2").attr({rn:"Disp_Brd_TimeScale_Contnr",ot:"TimeScalePane"}),$(".siebui-splitBox3").attr({rn:"Disp_Brd_Utility_Grid"
,ot:"UtilityGrid"})),$("#s_ganttleft").css({height:ganttLeftHeight}),jt.call(this),c=new Date,console.log("endGanttShowUi in Gantt ShowUI is  "+c)},st.prototype.BindData=function(){SiebelAppFacade.GanttRenderer.superclass.BindData.call(this);var e=this.GetPM(),t,n,r=this.getRowsPerPage(),i=0,s=0,o=0,u=0,a={},f="",l="",c=1,h=e.Get("PanesToRefresh"),p=0,d=0,v=e.Get("GetControls"),m=v.GoToResource,g=0,y="",b="",w=e.Get("Scale_factor")*100*e.Get("TotalHPages"),E=e.Get("Color Display By"),S=e.Get("Status Abbreviations"),x,T=this.GetPM().Get("RESOURCEHEADER").length,N,C,k;S&&E?x=S.substring(S.indexOf(E)+E.length+1,S.indexOf(";",S.indexOf(E))):S?x=S.substring(S.indexOf(",")+1,S.length-1):x="GS";var L={RJoinFld:e.Get("RJoinFld"),RParentFld:e.Get("RParentFld"),Statabb:x,EventColor:e.Get("Booking Colors"),TST:e.Get("TST"),EventDefaultColor:e.Get("EventDefaultColor"),RHeaderMap:e.Get("RESOURCEHEADER"),configSpacePatternFlag:e.Get("ConfigSpacePattern")};e.Get("IsTotalHPagesChanged")==="Y"&&(e.SetProperty("IsTotalHPagesChanged","N"),$("#TGrid").width(w.toString()+"%"),$("#UGrid").width(w.toString()+"%")),C=new Date,console.log("startGanttBindDataTime in Gantt BinData is  "+C),t=e.Get("RecordSet");if(this&&e){var A=e.Get("enableWorkSetSizeEmpPerPage");if(A&&A.toLowerCase()=="true"){var O=t.length;et=O}}n=t?t.length:0,r=n>r?r:n,i=parseInt(n/r,10),g=n-i*r,this.setTotalPages(i),this.setRemainingRows(g);if(this&&e){var A=e.Get("enableWorkSetSizeEmpPerPage");if(A&&A.toLowerCase()=="true"){var M=this.get_navigation_flag(),_=this.get_activity_drop(),D=this.get_activity_drag();M==0&&_==0&&D==0&&h!=18&&(O<10?Z=O:Z=10,Y=0),M==1&&this.unset_navigation_flag(),_==1&&this.unset_activity_drop(),D==1&&this.unset_activity_drag(),h==18&&(h=22)}}p=h&1,h>>=1,d=h&1;while(h){h>>=1,c+=1;if(h&1)switch(c){case 2:if(d){$("#HGrid").empty().append(vt.call(this)),SiebelJS.Log("RGrid Dynamic"),s=0,$("#RGrid").empty();if(this&&e){var A=e.Get("enableWorkSetSizeEmpPerPage");if(A&&A.toLowerCase()=="true")e.ExecuteMethod("prepareRespage",Y,Z),b=mt.call(this,Y,Z,"page"+s.toString(),t,L);else{while(s<i)o=s*r,u=o+r,e.ExecuteMethod("prepareRespage",o,u),b+=mt.call(this,o,u,"page"+s.toString(),t,L),s+=1;g>0&&(o=i*r,u=o+g,e.ExecuteMethod("prepareRespage",o,u),b+=mt.call(this,o,u,"page"+s.toString(),t,L))}}$("#RGrid").append(b),Mt.call(this,n)}break;case 3:p,d&&(SiebelJS.Log("TGrid Dynamic"),$("#TGrid").empty().append(this.renderTimeScale()));break;case 4:p;if(d){s=0,SiebelJS.Log("UGrid Dynamic"),$("#UGrid").empty();if(this&&e){var A=e.Get("enableWorkSetSizeEmpPerPage");if(A&&A.toLowerCase()=="true")e.prepareUtillpage(Y,Z),y=gt.call(this,Y,Z,"page"+s.toString(),t,L);else{while(s<i)o=s*r,u=o+r,e.prepareUtillpage(o,u),y+=gt.call(this,o,u,"page"+s.toString(),t,L),s+=1;g>0&&(o=i*r,u=o+g,e.prepareUtillpage(o,u),y+=gt.call(this,o,u,"page"+s.toString(),t,L))}}$("#UGrid").append(y)}}}N=parseInt($(".siebui-gdfColHeader").css("max-width"))*T,$(".siebui-splitBox0").width(N),$(".siebui-splitBox1").width(N),m&&e.Get("PanesToRefresh")&4&&ot.call(this,m),At.call(this),e.Get("InEvent")===!1?this.SetHScrollPos():e.SetProperty("InEvent",!1),jt.call(this);var P=e.Get("Resource Id"),H=e.Get("ResIDtoIndex"),B=H?H[P]:0,j=t?t[B]:0;j&&(this.getFirstLoad()===1&&ut.call(this,j["Resource Name"]),St.call(this)),this.setFirstLoad(0),L=null,v=null,SiebelApp.S_App.uiStatus.Free(),k=new Date,console.log("endGanttBindDataTime in Gantt BinData is  "+k);var F=k-C;console.log("Time for BindData to load all Employees with Activities in GanttRenderer"+F)},st.prototype.get_current_start_ind=function(){return Y},st.prototype.get_current_end_ind=function(){return Z},st.prototype.get_total_records=function(){return et},st.prototype.set_current_start_ind=function(e){Y=e},st.prototype.set_current_end_ind=function(e){Z=e},st.prototype.get_navigation_flag=function(){return tt},st.prototype.set_navigation_flag=function(){tt=1},st.prototype.unset_navigation_flag=function(){tt=0},st.prototype.get_activity_drop=function(){return nt},st.prototype.set_activity_drop=function(){nt=1},st.prototype.unset_activity_drop=function(){nt=0},st.prototype.get_activity_drag=function(){return rt},st.prototype.set_activity_drag=function(){rt=1},st.prototype.unset_activity_drag=function(){rt=0},st.prototype.BindEvents=function(){SiebelAppFacade.GanttRenderer.superclass.BindEvents.call(this);var e=this,t=e.GetPM(),n,r,i,s,o,u,a,f,l=0,c=0,h=0,p=0,d=null,v,m,g,y,b,w,E,S,x,T=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper"),N=$("#s_"+this.GetAppletId()+"_div");n=t.Get("GetControls"),r=n["Display Toggle"],r&&(i=this.GetUIWrapper(r),w=i.GetEl(),T&&w.length&&T.Manage(w,"autocompleteclose",{ctx:this,CW:i},Ut)),s=n["Color Display Toggle"],s&&(o=this.GetUIWrapper(s),E=o.GetEl(),T&&E.length&&T.Manage(E,"autocompleteclose",{ctx:this,CW:o},zt)),u=n.GoToResource,u&&(a=this.GetUIWrapper(u),f=a.GetEl(),f.autocomplete({source:[]}).autocomplete("option","position",{my:"center top",at:"center bottom",of:$(f),collision:"flip flip"}),T&&f.length&&(T.Manage(f,"autocompleteclose",{ctx:this},Ft),T.Manage(f,"keypress",{ctx:this},It))),x=N.find(".siebui-option-bar"),T&&x.length&&T.Manage(x,"click",{ctx:this},lt,"button"),T&&N.length&&(T.Manage(N,"mouseenter",{ctx:this},function(e){SiebelApp.S_App.IsRwd()||(viewTarget="_sweview",m=$("#_sweview")[0].title,$("#_sweview")[0].title=""),g=e.currentTarget.title,e.currentTarget.title=""}),T.Manage(N,"mouseleave",{ctx:this},function(e){e.currentTarget.title=g,SiebelApp.S_App.IsRwd()||($("#_sweview")[0].title=m)}),T.Manage(N,"mouseover",{ctx:this,attr:"Id",Input:"ResId",Pane:"Pane 0"},bt,".siebui-showResTooltip"),T.Manage(N,"mouseover",{ctx:this},wt,".siebui-taskBox"),T.Manage(N,"mouseover",{ctx:this,attr:"DateVal",Input:"DateVal",Pane:"Pane 1"},bt,".siebui-showTSTooltip"),T.Manage(N,"mouseover",{ctx:this},Et,".siebui-taskBox.Rsizable"),T.Manage(N,"click",{ctx:this},yt,".siebui-expcoll"),T.Manage(N,"click",{ctx:this},e.drillDownHandler,".siebui-ganttDrilldown"),T.Manage(N,"click",{ctx:this
},St,".siebui-taskEditUtility"),T.Manage(N,"click",{ctx:this},St,".siebui-taskEditRow"),T.Manage(N,"dblclick",{ctx:this},xt,".siebui-taskEditUtility"),T.Manage(N,"dblclick",{ctx:this},Ct,".siebui-taskBox"),T.Manage(N,"click",{ctx:this},Nt,".siebui-gdfColHeader"),T.Manage(N,"mouseover",{ctx:this},Tt,".siebui-taskBox.Dragpble"),T.Manage(N,"mouseup",{ctx:this},kt,".siebui-taskEditUtility"),T.Manage(N,"click",{ctx:this},ft,".siebui-ganttFilterPane"),T.Manage(N,"mousedown",{ctx:this},Ot,".siebui-vSplitBar"),T.Manage(N,"mouseover",{ctx:this},_t,".siebui-gdfColHeader"),T.Manage(N.find(".siebui-VScroll"),"scroll",{ctx:this},Rt)),S=N.find(".siebui-splitBox3"),T&&S.length&&(T.Manage(S,"mousedown",{ctx:this,el:N},function(e){$(e.data.el).data("SCROLL_BUTTON",!0)}),T.Manage(S,"mouseup",{ctx:this,el:N},function(e){$(e.data.el).data("SCROLL_BUTTON",!1),h=0}),T.Manage(S,"scroll",{ctx:this,iScroll:h,el:N,prevScroll:c},qt)),N=null,n=null},st.prototype.EndLife=function(){ganttDateBar=null,ganttLegendBar=null,m_mapResIndex=null,SiebelAppFacade.GanttRenderer.superclass.EndLife.call(this)},st.prototype.preparerowtasks=function(t,r,i){var s="",u=i.EventColor,a=i.Statabb,f=i.configSpacePatternFlag,l,c,h,p,d,v,m,g,y,b="siebui-layout",w=98,E=SiebelApp.S_App.IsAutoOn(),S=this.GetPM(),x=S.Get("Border Color"),T,N,C,k="";i.TST==="64"&&(b+=" siebui-taskBoxMonthDay");if(t)for(p in t)y=t[p],t.hasOwnProperty(p)&&(l=y[a],c=a+"_"+l,y.BT&&(y.BT==="Out of Order"||y.BT==="Unavailable Instance"||y.BT==="Ineffective UNCHANGED")&&(c=a+"_"+y.BT),u&&(h=u[c]),h||(h=i.EventDefaultColor),T="",N="",x&&typeof x!="undefined"&&(y.BT&&y.BT==="Backup"&&(T=x[S.Get("BBC")]),y.BT&&y.BT==="Active"&&(T=x[S.Get("ABC")]),T&&typeof T!="undefined"&&(N="border-width:1px;border-style:solid;border-color:"+T)),d=t[p][n],y.OLPCNT&&y.OLPCNT>2&&(d="",y.Icon&&(y.Icon="")),d||(d=""),v=y.DDID,v?m=o:(v="",m=""),g=100-(t[p].SW?parseInt(t[p].SW,10):0)-(t[p].TW?parseInt(t[p].TW,10):0)-5,s=s+'<div class="siebui-taskBox '+t[p].CLS+'" taskId='+t[p].ID+"  id= "+r.toString()+" style=width:"+t[p].width+"%;height:"+t[p].height+"px!important;left:"+t[p].left+"%;margin-top:"+t[p].top+"px;z-index:"+w+";"+N+";",E==="true"&&(autoST_strFirstPart=t[p].ST.split(":")[0],autoST_date=autoST_strFirstPart.split(" ")[0],autoST_date.split("/")[0]<10?date0=autoST_date.split("/")[0].substr(1):date0=autoST_date.split("/")[0],autoST_date.split("/")[1]<10?date1=autoST_date.split("/")[1].substr(1):date1=autoST_date.split("/")[1],autoST_dateFormatted=date0+"/"+date1+"/"+autoST_date.split("/")[2],autoST_time=autoST_strFirstPart.split(" ")[1],autoST_ampmTime=autoST_strFirstPart.split(" ")[1]<12?"AM":"PM",autoST_time=autoST_strFirstPart.split(" ")[1]<12?autoST_time:autoST_time-12<10?"0"+(autoST_time-12):autoST_time-12,autoST=autoST_dateFormatted+autoST_time+":"+t[p].ST.split(":")[1]+" "+autoST_ampmTime,autoST_evt=t[p].LBL,typeof autoST_evt!="undefined"&&(autoST_evt=autoST_evt.trim()),s=s+'ot = "div gantt" rn ="'+t[p].ID+"-event"+autoST_evt+autoST+t[p].GS+'" un ="'+t[p].LBL+t[p].ST+t[p].ET+'"'),s=s+">"+'<div class="'+b+'" style=background-color:'+h+";>",t[p].SW&&(s=s+'<div class = "siebui-turnTime siebui-setupTime" style = width:'+t[p].SW+"%;></div>"),t[p].TW&&(s=s+'<div class = "siebui-turnTime siebui-teardownTime" style = width:'+t[p].TW+"%;></div>"),f==="Y"&&t[p].CFST&&t[p].CFST==="Y"&&(s+='<div class = "siebui-configSpacePattern">'),s=s+'<span class="siebui-taskStatus" style = width:'+g+"%; status="+t[p].GS+">"+this.createIconInfo(t[p]),k=" data-drilldown-type= 'UGrid' data-drilldown-id='"+v+"'",E==="true"&&(k+="ot = 'drilldown' rn = '"+d+"' un = '"+d+"'"),s+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_LINK"),className:"siebui-activityLabel "+m,value:HtmlEncode(d),attrs:k}),s+="</span></div></div>",f==="Y"&&t[p].CFST&&t[p].CFST==="Y"&&(s+="</div>"));return C=new Date,console.log("endGanttPrepareRowTime in Gantt PrepareRowTasks is  "+C),s},st.prototype.drillDownHandler=function(e){var t=e.data.ctx,n=t.GetPM(),r=$(this).attr("data-drilldown-type"),i=null,s=null,o,u,a,f,l,c;switch(r){case"UGrid":SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0}),o=n.Get("Activity_DDInfo"),o&&(i=o["Item Drilldown Name"],s=$(this).attr("data-drilldown-id")),n.ExecuteMethod("CustomDrillDown",t.GetDrilldownPropSet(this,i,s)),SiebelApp.S_App.uiStatus.Free();break;case"RGrid":SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0}),a=$("#s_"+t.GetAppletId()+"_div").find(".siebui-gdfColHeader").eq($(this).parent().parent().index()),i=a.attr("data-idd-name"),s=$(this).attr("data-drilldown-id"),n.ExecuteMethod("CustomDrillDown",t.GetDrilldownPropSet(this,i,s)),SiebelApp.S_App.uiStatus.Free();break;case"BAxis":l=n.Get("TSDDInfo"),l&&(i=l["Item Drilldown Name"],s=l["Item Drilldown Field"],n.ExecuteMethod("CustomDrillDown",t.GetDrilldownPropSet(this,i,s)));break;case"TAxis":l=n.Get("TSDDInfo");var h=$(this).attr("dateval");l&&(i=l["Item Drilldown Name"],s=l["Item Drilldown Field"],n.ExecuteMethod("CustomDrillDown",t.GetDrilldownPropSet(this,i,s,h)));break;default:var p=n.Get("DateDrilldown"),d=n.Get("TST")+":",v;p&&(v=p.substring(p.indexOf(d)+d.length,p.indexOf(";",p.indexOf(d))));if(v){var h=$(this).attr("dateval");n.ExecuteMethod("RefreshGanttChart",h,v,it),t.getGanttDateBar().setNavigationValues()}}},st.prototype.GetDrilldownPropSet=function(e,t,n,r){if(t&&n)return propset=CCFMiscUtil_CreatePropSet(),propset.SetProperty("DrillDownName",t),propset.SetProperty("DestFieldValue",n),r&&propset.SetProperty("DestDateValue",r),propset},st.prototype.calcNonContiguousTime=function(e){var t=this.GetPM(),n=t.Get("PixelsPerUnit"),r=t.Get("TDays"),s=t.Get("StartTime"),o=t.Get("EndTime");return absPixels=n*$("#UGrid").width(),absPixels&&(noOfUnits=parseInt(e/absPixels)),timePixels=e%absPixels,startDay=t.Get(i)+noOfUnits*r,absPixels&&(startTime=parseInt(t.Get("StartTime")+timePixels/absPixels*t.Get("AxisDuration"),10)),startDay+=startTime
,parseInt(startDay,10)},st.prototype.createIconInfo=function(e){var t="",n=this.GetPM().Get(r)[u],i;if(e.Icon){var s=e.Icon.split(",");for(var o=0;o<s.length;o++)n&&n[s[o]]&&(i=n[s[o]],t=t+"<span class='"+i+"'></span>")}return t},st.prototype.SetHScrollPos=function(){var e=this.GetPM(),t=new Date(e.Get(f)),n=String(e.Get(v)),r=0;e.ExecuteMethod("setHoursFrom",t,n),r=(t.getTime()-e.Get(i))/(e.Get(s)-e.Get(i)),r*=e.Get("MinGanttsize"),$(".siebui-splitBox3").scrollLeft(r)},st.prototype.renderTimeScale=function(){var e=this.GetPM(),t,n,r,u,a,f,l,c,h=0,p,d,v,y,b,E,W,X,$,Q,G,Y,Z,et,tt,nt,rt,it,st,ot=0,ut='<div class = "siebui-ganttTable">',at='<div class = "siebui-ganttHead1',ft='<div class = "siebui-ganttHead2',lt,ct,ht=36e5,pt=e.Get(S),dt=pt?1:0,vt=e.Get(m),mt=e.Get(T),gt,yt=60,bt="",wt,Et=e.Get(w),St=e.Get("StartTime")/36e5,xt=e.Get("EndTime")/36e5,Tt=e.Get("FinalWeekDays"),Nt=e.Get(i),Ct=e.Get(s),kt=e.Get("UserPrefWDS"),Lt,At=0,Ot="",Mt,_t,Dt,Pt,Ht,Bt,jt,Ft=0,It=0,qt=e.Get("TotalHPages"),Rt=e.Get("isDispatchBoard");dt?(lt='<div class = "siebui-ganttHead3 siebui-threeAxis">',at+=' siebui-threeAxis">',ft+=' siebui-threeAxis">',rt=100/3+"%"):(at+=' siebui-twoAxis">',ft+=' siebui-twoAxis">',rt="50%");switch(Number(e.Get(g))){case D:t=new Date(Nt),At=5*e.Get("TotalHPages");if(!vt)break;d=vt.length;while(t.getTime()<=Ct&&h<At){a=t.getTime(),tt=t.format("MM/dd/yyyy"),gt=mt[tt],Lt=this.IsWeekend(t),n=1/At*100,at+=this.createTimeScaleCell(new Date(a),"DDD, MMM D",0,n+"%",0,o,gt,Lt,0,tt);if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,n+"%",0,o,tt)}Z=0,W="",Ft==0&&(it=parseInt(vt[Z].ST.substr(0,2))*60*60+parseInt(vt[Z].ST.substr(3,2))*60+parseInt(vt[Z].ST.substr(6,2)),ot=it/86400*100),W+='<div style="width: '+n*qt+"% ; left:"+Ft+"% ; position: absolute; height:"+rt+';" class="siebui-ganttInnerTbl">',Ft+=n*qt,it!=0&&(W+=this.createTimeScaleCell(vt[d-1].NM.substr(0,1),"",0,ot+"%","0%")),st=ot;while(Z<d)ct=vt[Z].DUR/3600,it!=0&&Z==d-1?ct=(vt[Z].DUR-it)/3600:ct=vt[Z].DUR/3600,u=ct/24*100,W+=this.createTimeScaleCell(vt[Z].NM.substr(0,1),"",0,u+"%",st+"%"),Z+=1,st+=u;W+="</div>",ft+=W,h++,t.setDate(t.getDate()+7)}break;case H:var Ut=0;t=new Date(Nt),a=t.getTime(),Bt=new Date(t),noOfCells=31*qt,h=0,u=100/31;while(h<noOfCells){Tt&&Tt.indexOf(t.getDay())!==-1&&(Lt=this.IsWeekend(t),tt=t.format("MM/dd/yyyy"),gt=mt[tt],ft+=this.createTimeScaleCell(t,"D",0,u+"%",Ft+"%",o,gt,Lt,0,tt),dt&&(lt+=this.createBAxisCell(pt[tt]?pt[tt].FLD1:"",u+"%",Ft+"%",o,tt)),Ft+=u,h++,Ut++),Bt.setDate(t.getDate()+e.Get(x));if(t.getMonth()!=Bt.getMonth()||h===noOfCells)at+=this.createTimeScaleCell(t,"MMMM",0,u*Ut+"%",It+"%"),Ut=0,It=Ft;t.setDate(t.getDate()+e.Get(x))}break;case F:t=new Date(Nt);var zt=0,Wt=0,Xt,Vt,$t;Xt=new Date(t.getTime()),$t=new Date,$t.setDate(Xt.getDate()+1),St<xt?Wt=xt-St:Wt=24-(St-xt);if(Wt===0||isNaN(Wt))Wt=24;while(t.getTime()<Ct){a=t.getTime(),tt=t.format("MM/dd/yyyy"),Lt=this.IsWeekend(t),t.setDate(t.getDate()+1),$=new Date(a),n=200,t.getTime()<Ct?X=t.getTime():X=Ct,gt=mt[tt];if(Tt.indexOf((new Date(a)).getDay())===-1)continue;at+=this.createTimeScaleCell(new Date(a),"DDDD, MMMM D",0,n+"%",It+"%",o,gt,Lt);if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,n+"%",It+"%",o,tt)}It+=n,u=.5*n/Wt,W="";while($.getTime()<X){Dt=$.getHours(),Pt=$.getMinutes(),Q=Dt*yt+Pt,G=X-$.getTime(),e.Get(V)&&(nt=e.Get(V)[Dt]);if(Q%(.5*yt)!==0||G<.5*ht)Q%(.5*yt)!==0?et=.5*yt-Q%(.5*yt):et=G/6e4,Y=et/(.5*yt)*u,W+=this.createTimeScaleCell($,"h:mmp",0,Y+"%",0,0,0,0,nt),$.setTime($.getTime()+et*yt*1e3);else{Rt==="TRUE"?St!=""&&xt!=""?$.getHours()>=St&&$.getHours()<xt&&(W+=this.createTimeScaleCell($.format("h:mm a"),"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u):St!=""&&xt===""?$.getHours()>=St&&(W+=this.createTimeScaleCell($.format("h:mm a"),"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u):(W+=this.createTimeScaleCell($.format("h:mm a"),"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u):(W+=this.createTimeScaleCell($.format("h:mm a"),"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u);if(zt===0)$.setMinutes(30),zt++;else{Vt=$.getHours(),$.setHours($.getHours()+1);if($.getHours()-Vt>1){var Jt=!0,Kt=Vt>=12?"PM":"AM";Vt=$.getHours()-1,Rt==="TRUE"&&(Jt=!1,St!=""&&xt!=""?Vt>=St&&Vt<xt&&(Jt=!0):St!=""&&xt===""?Vt>=St&&(Jt=!0):Jt=!0),Jt&&(W+=this.createTimeScaleCell(Vt+":00 "+Kt,"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u,W+=this.createTimeScaleCell(Vt+":30 "+Kt,"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u)}$.setMinutes(0),zt=0}}}ft+=W}break;case I:t=new Date(Nt);var zt=1,Wt=0,Xt,Vt,$t;Xt=new Date(t.getTime()),$t=new Date,$t.setDate(Xt.getDate()+1),St<xt?Wt=xt-St:Wt=24-(St-xt);if(Wt===0||isNaN(Wt))Wt=24;while(t.getTime()<Ct){a=t.getTime(),tt=t.format("MM/dd/yyyy"),Lt=this.IsWeekend(t),t.setDate(t.getDate()+1),$=new Date(a),n=400,t.getTime()<Ct?X=t.getTime():X=Ct,gt=mt[tt];if(Tt.indexOf((new Date(a)).getDay())===-1)continue;at+=this.createTimeScaleCell(new Date(a),"DDDD, MMMM D",0,n+"%",It+"%",o,gt,Lt);if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,n+"%",It+"%",o,tt)}It+=n,u=.25*n/Wt,W="";while($.getTime()<X){Dt=$.getHours(),Pt=$.getMinutes(),Q=Dt*yt+Pt,G=X-$.getTime(),e.Get(V)&&(nt=e.Get(V)[Dt]);if(Q%(.25*yt)!==0||G<.25*ht)Q%(.25*yt)!==0?et=.25*yt-Q%(.25*yt):et=G/6e4,Y=et/(.25*yt)*u,W+=this.createTimeScaleCell($,"h:mmp",0,Y+"%",0,0,0,0,nt),$.setTime($.getTime()+et*yt*1e3);else{Rt==="TRUE"?St!=""&&xt!=""?$.getHours()>=St&&$.getHours()<xt&&(W+=this.createTimeScaleCell($.format("h:mm a"),"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u):St!=""&&xt===""?$.getHours()>=St&&(W+=this.createTimeScaleCell($.format("h:mm a"),"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u):(W+=this.createTimeScaleCell($.format("h:mm a"),"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u):(W+=this.createTimeScaleCell($.format("h:mm a"),"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u);if(zt<4)$.setMinutes(15*zt),zt++;else{Vt=$.getHours(),$.setHours($.getHours()+1);if($.getHours()-Vt>1){var Kt=Vt>=12?"PM":"AM",Jt=!0;Vt=$.getHours()-1,Rt==="TRUE"&&(Jt=!1,St!=""&&xt!=""?Vt>=
St&&Vt<xt&&(Jt=!0):St!=""&&xt===""?Vt>=St&&(Jt=!0):Jt=!0),Jt&&(W+=this.createTimeScaleCell(Vt+":00 "+Kt,"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u,W+=this.createTimeScaleCell(Vt+":15 "+Kt,"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u,Vt=$.getHours()-1,W+=this.createTimeScaleCell(Vt+":30 "+Kt,"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u,W+=this.createTimeScaleCell(Vt+":45 "+Kt,"",0,u+"%",Ft+"%",0,0,0,nt),Ft+=u)}$.setMinutes(0),zt=1}}}ft+=W}break;case q:t=new Date(Nt);var Qt=new Date(Nt),Gt=new Date(Qt),Yt,Zt=0;Qt.setDate(1),Gt.setDate(Qt.getDate()-1),Gt.setHours(23,59,59,999),Gt.setFullYear(Gt.getFullYear()+1),t.getDate()>1&&(Zt=1),u=100/(12+Zt)*e.Get("TotalHPages");while(t.getTime()<Ct)ft+=this.createTimeScaleCell(t,"MMMM",0,u+"%"),t.getMonth()==11?t=new Date(t.getFullYear()+1,0,1):t=new Date(t.getFullYear(),t.getMonth()+1,1),Qt.getMonth()==t.getMonth()&&(Yt=new Date(t),Yt.setDate(Yt.getDate()-1),Mt=z.GetStringFromDateTime(Qt.format(J),K,"MMMM D YYYY")+" - "+z.GetStringFromDateTime(Yt.format(J),K,"MMMM D YYYY"),at+=this.createTimeScaleCell(Mt,"",0,12*u+"%"),Qt=new Date(t));break;case R:var en=1,tn=0,Qt,Yt,nn,rn=new Date(Nt);t=new Date(Nt);if(t.getDate()<3&&t.getMonth()==0||t.getDate()>29&&t.getMonth()==11)tn=1;u=100/(52*e.Get("TotalHPages")+tn),Qt=new Date(Nt);while(t.getTime()<Ct){Lt=this.IsWeekend(t),rn.setDate(t.getDate()+6),ft+=this.createTimeScaleCell(en,"",0,u+"%",0,o,gt,Lt);if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,4*u+"%",0,o,tt)}t.setDate(t.getDate()+7),en++,en>52&&(en=1,nn=t.getDate(),nn<30&&t.setDate(t.getDate()+1),Yt=new Date(t),Yt.setDate(Yt.getDate()-1),Mt=z.GetStringFromDateTime(Qt.format(J),K,"MMMM D YYYY")+" - "+z.GetStringFromDateTime(Yt.format(J),K,"MMMM D YYYY"),at+=this.createTimeScaleCell(Mt,"",0,52*u+"%"),Qt=new Date(t),Qt.setDate(Qt.getDate()+1))}break;case B:t=new Date(Nt),a=t.getTime(),noOfCells=5*e.Get("TotalHPages"),u=100/noOfCells;while(t.getTime()<Ct&&h<noOfCells){t.setDate(1),t.setMonth(t.getMonth()+1),t.getTime()<Ct?(r=Math.ceil((t.getTime()-a)/(ht*24*e.Get(x))),h+=r):r=noOfCells-h,at+=this.createTimeScaleCell(new Date(a),"MMMM",0,r*u+"%");if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,r*u+"%",0,o,tt)}a+=r*ht*24*7}p="DDD DD",t=new Date(Nt),h=0;while(++h<=noOfCells)Lt=this.IsWeekend(t),tt=t.format("MM/dd/yyyy"),gt=mt[tt],ft+=this.createTimeScaleCell(t,p,0,u+"%",0,o,gt,Lt,0,tt),t.setDate(t.getDate()+e.Get(x));break;case j:t=new Date(Nt),a=t.getTime(),noOfCells=14*e.Get("TotalHPages"),u=100/noOfCells;while(t.getTime()<Ct&&h<noOfCells)t.setDate(1),t.setMonth(t.getMonth()+1),t.getTime()<Ct?(r=Math.ceil((t.getTime()-a)/(ht*24*e.Get(x))),h+=r):r=noOfCells-h,at+=this.createTimeScaleCell(new Date(a),"MMMM",0,r*u+"%"),a+=r*ht*24*7;p="DDD DD",t=new Date(Nt),h=0;while(++h<=noOfCells){Lt=this.IsWeekend(t),tt=t.format("MM/dd/yyyy"),gt=mt[tt],ft+=this.createTimeScaleCell(t,p,0,u+"%",0,o,gt,Lt,0,tt);if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,r*u+"%",0,o,tt)}t.setDate(t.getDate()+e.Get(x))}break;case N:case C:case k:case L:case A:case O:var Wt=0,Xt,$t,Kt,sn,Vt;t=new Date(Nt),Xt=new Date(t.getTime()),$t=new Date,$t.setDate(Xt.getDate()+1),St<xt?Wt=xt-St:Wt=24-(St-xt);if(Wt===0||isNaN(Wt))Wt=24;while(t.getTime()<Ct){a=t.getTime(),tt=t.format("MM/dd/yyyy"),Lt=this.IsWeekend(t),t.setDate(t.getDate()+1),$=new Date(a),t.getTime()<Ct?X=t.getTime():X=Ct,this.GetPharmaCall()===undefined?Number(e.Get(g))==C?n=50:Number(e.Get(g))==k?n=25:Number(e.Get(g))==L||Number(e.Get(g))==O?n=25:Number(e.Get(g))==A?n=25:n=100:n=100,gt=mt[tt];if(Tt.indexOf($.getDay())===-1)continue;at+=this.createTimeScaleCell(new Date(a),"DDDD, MMMM D",0,n+"%",It+"%",o,gt,Lt,0,tt);if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,n+"%",Ft+"%",o,tt)}It+=n,u=e.Get(x)*n/Wt,W='<div style="width:'+n/qt+'%;" class="siebui-ganttInnerTblDH">';if(Rt==="TRUE")while($.getTime()<X)(St==""||$.getHours()>=St)&&(xt==""||$.getHours()<xt)&&($.getHours()-Vt>e.Get(x)?(sn=1,Vt=$.getHours()-1,W+=this.createTimeScaleCell(Vt+":00 "+Kt,!1,0,u+"%",Ft+"%",0,0,0,nt),Ft+=u,$.setUTCHours($.getUTCHours()+(e.Get(x)-1))):$.getHours()-Vt==e.Get(x)-1&&sn!=1?(Vt=$.getHours(),$.setUTCHours($.getUTCHours()+1),sn=1):(W+=this.createTimeScaleCell($,"h:mmp",0,u+"%",Ft+"%",0,0,0,nt),Vt=$.getHours(),Ft+=u,Kt=Vt>=12?"PM":"AM",sn=0)),sn!=1&&$.setUTCHours($.getUTCHours()+e.Get(x));else while($.getTime()<X)if($.getHours()-Vt>e.Get(x))Vt=$.getHours()-1,W+=this.createTimeScaleCell(Vt+Kt,!1,0,u+"%",Ft+"%",0,0,0,nt),Ft+=u,$.setUTCHours($.getUTCHours()+(e.Get(x)-1));else if($.getHours()-Vt==e.Get(x)-1)Vt=$.getHours(),$.setUTCHours($.getUTCHours()+1);else{W+=this.createTimeScaleCell($,"hp",0,u+"%",Ft+"%",0,0,0,nt),Vt=$.getHours(),$.setUTCHours($.getUTCHours()+e.Get(x)),Ft+=u;var Kt=Vt>=12?"PM":"AM"}W+="</div>",ft+=W}break;case M:t=new Date(e.Get(i));if(!vt)break;d=vt.length;while(t.getTime()<Ct){a=t.getTime(),tt=t.format("MM/dd/yyyy"),$=new Date(a),Lt=this.IsWeekend(t),t.setDate(t.getDate()+1),X=t.getTime(),n=(t.getTime()-a)/(Ct-e.Get(i))*100,gt=mt[tt],at+=this.createTimeScaleCell(new Date(a),"DDDD, MMMM D",0,n+"%",0,o,gt,Lt,0,tt);if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,n+"%",0,o,tt)}Z=0,W="",Ft==0&&(it=parseInt(vt[Z].ST.substr(0,2))*60*60+parseInt(vt[Z].ST.substr(3,2))*60+parseInt(vt[Z].ST.substr(6,2)),it!=0&&(Ft=it/(Ct-e.Get(i))*100*1e3,W='<div style="width:'+Ft*100/n+"% ; left: 0% ; position: absolute; height:"+rt+';" class="siebui-ganttInnerTbl">',W+=this.createTimeScaleCell(vt[d-1].NM,"",0,"100%","0%"),W+="</div>")),W+='<div style="width:'+n*qt+"% ; left:"+Ft*100/n+"% ; position: absolute; height:"+rt+';" class="siebui-ganttInnerTbl">',st=0;while($.getTime()<X)ct=vt[Z].DUR/3600,t.getTime()>=Ct&&it!=0&&Z==d-1?u=(vt[Z].DUR-it)/(Ct-e.Get(i))*100*1e3:u=vt[Z].DUR/(Ct-e.Get(i))*100*1e3,W+=this.createTimeScaleCell(vt[Z].NM,"",0,u*100/n+"%",st*100/
n+"%"),Z=(Z+1)%d,$.setHours($.getHours()+ct),Ft+=u,st+=u;W+="</div>",ft+=W}break;case _:t=new Date(e.Get(i));if(!vt)break;d=vt.length;while(t.getTime()<Ct){a=t.getTime(),tt=t.format("MM/dd/yyyy"),Lt=this.IsWeekend(t),t.setDate(t.getDate()+1),n=(t.getTime()-a)/(Ct-e.Get(i))*100,gt=mt[tt],at+=this.createTimeScaleCell(new Date(a),"DDD, MMM D",0,n+"%",0,o,gt,Lt,0,tt);if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,n+"%",0,o,tt)}Z=0,W="",Ft==0&&(it=parseInt(vt[Z].ST.substr(0,2))*60*60+parseInt(vt[Z].ST.substr(3,2))*60+parseInt(vt[Z].ST.substr(6,2)),it!=0&&(Ft=it/86400*100,Ft=Ft*n*qt/100,W='<div style="width:'+Ft+"% ; left: 0% ; position: absolute; height:"+rt+';" class="siebui-ganttInnerTbl">',W+=this.createTimeScaleCell(vt[d-1].NM.substr(0,1),"",0,"100%","0%"),W+="</div>")),W+='<div style="width: '+n*qt+"% ; left:"+Ft+"% ; position: absolute; height:"+rt+';" class="siebui-ganttInnerTbl">',st=0,Ft+=n*qt;while(Z<d)ct=vt[Z].DUR/3600,t.getTime()>=Ct&&it!=0&&Z==d-1?ct=(vt[Z].DUR-it)/3600:ct=vt[Z].DUR/3600,u=ct/24*100,W+=this.createTimeScaleCell(vt[Z].NM.substr(0,1),"",0,u+"%",st+"%"),Z+=1,st+=u;W+="</div>",ft+=W}break;case U:var on=0;t=new Date(e.Get(i)),h=0,firsttimeWeekSet=!0,createMajorAxis=!1,_t=new Date(e.Get(i));while(_t.getTime()<Ct)_t.setDate(_t.getDate()+7),h++;t=new Date(e.Get(i)),_t=new Date(e.Get(i)),Ht=(Ct-t.getTime())/(24*ht),u=7/Ht*100,n=5*u;while(t.getTime()<Ct){Lt=this.IsWeekend(t),tt=t.format("MM/dd/yyyy"),gt=mt[tt],firsttimeWeekSet==1?(_t.setDate(t.getDate()+6),firsttimeWeekSet=!1):_t.setDate(_t.getDate()+7),Mt=z.GetStringFromDateTime(t.format(J),K,"MMMM D")+"-"+z.GetStringFromDateTime(_t.format(J),K,"MMMM D"),ft+=this.createTimeScaleCell(Mt,"",0,u+"%",0,o,gt,Lt),on++;if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,on*mnrAxiswidth+"%",0,o,tt)}if(_t.getDate()==30){var un=new Date(_t);createMajorAxis=!0,un.setDate(un.getDate()+1),un.getDate()==31&&un.getMonth()==_t.getMonth()&&(createMajorAxis=!1)}else _t.getDate()==31&&(createMajorAxis=!0);if(t.getMonth()!=_t.getMonth()||createMajorAxis==1)at+=this.createTimeScaleCell(t,"MMMM",0,on*u+"%"),on=0,createMajorAxis=!1;t.setDate(t.getDate()+7)}break;case P:if(Rt==="TRUE"){var an=0,fn;t=new Date(e.Get(i)),noOfCells=Et*qt,u=qt/noOfCells*100,n=u*Et;while(t.getTime()<Ct){if(Tt.indexOf(t.getDay())!==-1){Lt=this.IsWeekend(t),tt=t.format("MM/dd/yyyy"),gt=mt[tt],ft+=this.createTimeScaleCell(t,"D DDDD",0,u+"%",Ft+"%",o,gt,Lt,0,tt);if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,u+"%",Ft+"%",o,tt)}an===0&&(fn=new Date(t)),an++,Ft+=u}an===Number(Et)&&(Mt=z.GetStringFromDateTime(fn.format(J),K,"MMMM D")+" - "+z.GetStringFromDateTime(t.format(J),K,"MMMM D"),an=0,at+=this.createTimeScaleCell(Mt,"",0,n+"%",It+"%"),It+=n),t.setDate(t.getDate()+1)}}else{var ln=!1,cn=1,hn=0;noOfCells=Et*qt,u=qt/noOfCells*100,t=new Date(e.Get(i)),f=new Date(Ct);while(t.getTime()<Ct){ln=!1;if(Tt.indexOf(t.getDay())!==-1){ln=!0;break}t.setDate(t.getDate()+1)}while(t.getTime()<=Ct){cn=1,hn=0,Bt=new Date(t);for(wt=1;wt<Et;wt++)Bt.setDate(Bt.getDate()+1),t.getMonth()===Bt.getMonth()?cn++:hn++;c=new Date(Bt),t.getMonth()===c.getMonth()?(at+=this.createTimeScaleCell(t,"MMMM",0,cn*u+"%",It+"%"),It+=u*cn):(at+=this.createTimeScaleCell(t,"MMMM",0,cn*u+"%",It+"%"),It+=u*cn,at+=this.createTimeScaleCell(c,"MMMM",0,hn*u+"%",It+"%"),It+=u*hn),t.setDate(t.getDate()+7)}t=new Date(e.Get(i));while(t.getTime()<Ct){if(Tt.indexOf(t.getDay())!==-1){Lt=this.IsWeekend(t),tt=t.format("MM/dd/yyyy"),gt=mt[tt],ft+=this.createTimeScaleCell(t,"D DDDD",0,u+"%",Ft+"%",o,gt,Lt,0,tt);if(dt){Ot="";for(wt in pt[tt])Ot?Ot=Ot+"/"+pt[tt][wt]:Ot=pt[tt][wt];lt+=this.createBAxisCell(Ot,u+"%",Ft+"%",o,tt)}Ft+=u}t.setDate(t.getDate()+1)}}}return at+="</div>",ft+="</div>",dt?(lt+="</div>",ut+=at+ft+lt+"</div>"):ut+=at+ft+"</div>",$=null,ut},st.prototype.createTimeScaleCell=function(t,n,r,i,s,o,a,f,l,c){var h=this.GetPM(),p=h.Get(X),d=h.Get(u),v="../images/",m=[],y,b="",w,E='<div style=" ',x,T=h.Get(S),C=T?1:0,k=h.Get("Special Days Class"),L=SiebelApp.S_App.IsAutoOn(),A=h.Get("TSDDInfo"),O=A["Custom DrillDown"],P="";cls='class = "siebui-ganttHeadCell',n?x=z.GetStringFromDateTime(t.format(J),K,n):x=t,i&&i!==0&&(E+="width:"+i+";"),s&&s!==0&&(E+="left:"+s+"; position: absolute;",h.Get(g)!=M&&h.Get(g)!=_&&h.Get(g)!=D&&(C?E+="height:"+100/3+"%;":E+="height: 50%;")),f&&(p&&(y=p.Weekends),y&&(E+="background-color:"+y+";",cls+=" siebui-Weekends"));if(a){k&&(o=o+" siebui-"+k);for(var B in a)a.hasOwnProperty(B)&&m.push(B);m.sort();for(var j=0;j<m.length;j++)B=m[j],d&&d[B]&&h.Get(g)!=H&&(w=d[B],b+='<span class="'+w+'"></span>'),!y&&p&&p[B]&&(y=p[B],y&&(E+="background-color:"+y+";",y=""))}return E+='"'+cls,l&&h.Get(g)===N&&(E+=" siebui-"+l),E+='">',c?(O==="Y"&&(P='data-drilldown-type="TAxis"'),P+="DateVal = '"+c+"'",L==="true"&&(P+=" ot = 'drilldown' rn = 'TSA"+c+"' un = 'TSA"+c+"'"),E+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_LINK"),className:"siebui-showTSTooltip "+(o?o:""),value:HtmlEncode(x),attrs:P})):(L==="true"&&(P+=" ot = 'drilldown' rn = 'TSA"+x+"' un = 'TSA"+x+"'"),typeof x=="number"&&(x=x.toString()),E+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_LINK"),className:o?o:"",value:HtmlEncode(x),attrs:P}),o&&O==="Y"&&(E+='data-drilldown-type="TAxis"')),E+=b,E+="</div>",E},st.prototype.createBAxisCell=function(t,n,r,i,s){var o=this.GetPM(),u="",a=o.Get(S),f=a?1:0,l='<div class="siebui-ganttHeadCell" style="',t,c="";return n&&n!==0&&(l+="width:"+n+";"),r&&r!==0&&(l+="left:"+r+"; position: absolute;",f?l+="height:"+100/3+"%;":l+="height: 50%;"),l+='">',i&&(u=i,c="data-drilldown-type='BAxis'"),SiebelApp.S_App.IsAutoOn()==="true"&&s&&(c+=" ot = 'drilldown' rn = 'BA"+t+"' un = 'BA"+s+"-"+t+"'"),l+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_LINK"),className:i?i:"",value:HtmlEncode(t),attrs:c}),l+="</div>"
,l},st.prototype.IsWeekend=function(e){if(e instanceof Date){var t=e.getDay(),n=this.GetPM();t===0&&(t=7);if(n.Get(W))return n.Get(W).indexOf(t)!==-1}},st.prototype.computeDSTTime=function(e,t){var n=36e5,r=864e5;return e%r===n&&!moment(t).isDST()?t.setHours(t.getHours()+1):e%r===r-n&&moment(t).isDST()&&t.setHours(t.getHours()-1),t},st}(),"SiebelAppFacade.GanttRenderer"}));

/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.BasePW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.BasePW"),define("siebel/basepw",[],function(){return SiebelAppFacade.BasePW=function(){function e(e){var t=null,n=!1,r=!1,i={},s=0;this.control=e,this.SetElementCaching=function(e){n=e,n||(t=null,r=!1)},this.IsElementCachingEnabled=function(){return n},this.CacheElement=function(e){n&&(t=e,r=!0)},this.GetCachedElement=function(){return t},this.IsCached=function(){return r},this.GetNoOfEl=function(){return s},this.SetNoOfEl=function(e){s=e},this.CacheState=function(e,n){n=n||{},this.GetNoOfEl()===1?(n.index=0,n.OneEl=!0):n.OneEl=!1;var r=n.index||0;i.OneEl=n.OneEl,i[r]||(i[r]={}),i[r][e]=n.stateValue,n.ctrlName=this.control.GetName(),this.ExecuteMethod("UpdateUIState",e,n),e==="CtrlEndLife"&&(i={},t=null)},this.GetStateValue=function(e,t){return i[i.OneEl?0:t]?i[i.OneEl?0:t][e]:undefined}}return e.prototype={Init:function(){},GetEl:function(){},ShowUI:function(){},BindEvents:function(){},BindData:function(){},SetValue:function(){},GetValue:function(){},BeginQuery:function(){},EndQuery:function(){},IsInLeaveField:function(){},OpenPopup:function(){},ClosePopup:function(){},GetIconMap:function(e){},GetTextHtml:function(e){},HandleKey:function(e){},SetState:function(e,t){},InjectAutomationAttr:function(e){},UpdateAccessibilityTag:function(e){},EndLife:function(){this.CacheState("CtrlEndLife"),this.control=null}},e}(),SiebelAppFacade.BasePW})),typeof SiebelAppFacade.FieldPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.FieldPW"),define("siebel/FieldPW",["siebel/basepw"],function(){return SiebelAppFacade.FieldPW=function(){function c(){SiebelAppFacade.FieldPW.superclass.constructor.apply(this,arguments)}function h(e){return d(e),x.call(this,e)}function p(e){return m(e.target),E.call(this,e)}function d(e){if(e&&e.target&&e.target.value){var t=e.target,n=t.maxLength,r=t.value.length,i=e.key.length;if(i===1){if(r===n){$(t).addClass("siebui-field-maxlength");var s=$(t).attr("aria-describedby");s!=="maxLengthErrInfo"&&$(t).data("aria-describedby",s),v(t),$(t).attr("aria-describedby","maxLengthErrInfo"),setTimeout(function(){$(t).removeClass("siebui-field-maxlength")},500)}}else(e.keyCode===$.ui.keyCode.BACKSPACE||e.keyCode===$.ui.keyCode.DELETE)&&m(t)}}function v(e){var t=e.parentNode.childNodes;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(r.id==="maxLengthErrInfo"){$(e).removeAttr("aria-describedby"),$(e).attr("aria-describedby","maxLengthErrInfo");return}}var i=document.createElement("span");i.style.display="none",$(i).attr({"aria-live":"polite",id:"maxLengthErrInfo"}),i.innerHTML="You have reached maximum limit of characters allowed",e.parentNode.appendChild(i)}function m(e){$(e).removeClass("siebui-field-maxlength");var t=$(e).attr("aria-describedby");if(t==="maxLengthErrInfo"){var n=$(e).data("aria-describedby");n?$(e).attr("aria-describedby",n):$(e).removeAttr("aria-describedby")}var r=e.parentNode.childNodes;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];if(s.id==="maxLengthErrInfo"){e.parentNode.removeChild(s);return}}}function g(e,t,n){if(!n||n.length===0)e.nextAll('[id^="'+this.control.GetInputName()+'"]').addBack().last().after('<span id="'+t+'" ><span>'),n=e.nextAll("#"+t);return n}function y(){var t=SiebelAppFacade.ComponentMgr.FindComponent({id:e.get("SWE_PST_COMM_TOOLBAR")});return t&&t.ExecuteMethod("CallContactFromUIEnabled")?t:null}function b(e){var t=y.call(this),n="applet-form-phone siebui-icon-phone-outbound",r,i=SiebelApp.S_App.GetAccessibilityEnhanced(),s=e.attr("id")||this.control.GetInputName(),o=s+"_icon";t?r=$("<span  class='"+(n||"")+"' id='"+o+"'></span>"):SiebelAppFacade.DecisionManager.IsTouch()&&(r=$("<a href='tel:"+e.val()+"'  class='"+(n||"")+"' id='"+o+"'></a>")),e.addClass("siebui-align-"+this.control.GetJustification());var u=e.not(".siebui-ctrl-phone");i&&(!u.attr("aria-describedby")||u.attr("aria-describedby").indexOf(o)===-1)&&u.attr("aria-describedby",(e.attr("aria-describedby")||"")+o);if(t||SiebelAppFacade.DecisionManager.IsTouch())u.addClass("siebui-ctrl-phone siebui-input-popup").after(r),e.attr("aria-label",SiebelApp.S_App.LocaleObject.GetLocalString("IDS_CTI_PHONE_NUMBER_FIELD"));u=null}function w(t){var n=t.data.ctx?t.data.ctx:this,r=n.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"),n.control,$(this).val());if(r===!1)return t.preventDefault(),t.stopPropagation(),!1}function E(n){var i=n.data.ctx?n.data.ctx:this,s=i.control,o=$(this).val();if(i.IsInLeaveField(this))return;if(s.GetUIType()===r){var u=i.ExecuteMethod("GetFormattedFieldValue",s,!1),f=t.NormalizeTextVal(u);f==o&&(o=u)}s.GetUIType()===a&&(o=$(this).is("input,select")?$(this).val():$(this).text()?$(this).text().trim():"",o=i.ExecuteMethod("CanUpdate",s.GetName())?o:i.ExecuteMethod("GetUIFieldValue",s,i.Get("GetSelection"))),i.OnControlEvent(e.get("PHYEVENT_CONTROL_BLUR"),i.control,o)}function S(t){var n=t.data.ctx?t.data.ctx:this,r=n.control,o=!0;SiebelAppFacade.DecisionManager.PauseVKeyboard($(this));if(r.GetUIType()===i||r.GetUIType()===s)var o=n.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"),n.control,$(this).val());o&&n.OnControlEvent(l[n.control.GetUIType()],r,$(this).val()),SiebelAppFacade.DecisionManager.ResumeVKeyboard($(this))}function x(e){var t=e.data.ctx;e.data.ctrl=t.control,t.OnKey($(this),e,$(this).val())}function T(e,t,n,r){var i=e.GetName(),s=e.GetInputName(),o='<a  id ="'+s+'_mb" '+' class = "siebui-ctrl-drilldown" '+' name = "'+i+'" '+' tabindex="-1"'+' rowId = "'+(r+1)+'" '+' href="javascript:void(0)" '+">"+HtmlEncode(t)+"</a>",u="siebui-drilldown-input siebui-align-"+e.GetJustification(),a=s+"_IPEField",f=n.attr("data-seq"),l=n.attr("style"),c='<div data-seq= "'+f+'"'+'tabindex= "'+"0"+'"'+' id = "'+a+'"'+' style = "'+l+'"'+' class= "'+u+'"'+">"+o+"<div>",h=document.activeElement===n[0];h||(h=document.activeElement===n.nextAll("#"+s+"_span").children("div#"+a)[0]);var p=n.nextAll("#"+s+"_span").find("a"),d=p.html(),v=p.attr("rowId");if(HtmlDecode(d)!==t||v!==(r+1).toString()){var m=
n.nextAll("#"+s+"_span");m.html(c),m.attr({"aria-labelledby":i+"_Label "+s+"_mb","aria-label":i,"aria-readonly":!0,"aria-describedby":s+"_icon"}),k(this,e,n,!0)}h&&n.nextAll("#"+e.GetInputName()+"_span").children("div#"+a).focus(),p=null}function N(e,t,n,r){var i=this.Get("GridFormContent")?e.GetSeq():"0",s=e.GetName(),o=e.GetInputName(),u=o+"_NONIPEField",a=this.Get("AppletType"),f="siebui-anchor-readonly"+(a===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_FORM_APPLET")?" siebui-drilldown-input":"")+" siebui-align-"+e.GetJustification(),l=n.attr("style"),c='<div class = "'+f+'"'+' id="'+u+'"'+' style="'+l+'"'+' tabindex="0" data-seq='+i+">"+' <a id ="'+o+'_mb" '+' class = "siebui-ctrl-drilldown" '+' name = "'+s+'" '+' rowId = "'+(r+1)+'" '+' href="javascript:void(0)" >'+HtmlEncode(t)+"</a></div>",h=n.nextAll("#"+o+"_span").find("a"),p=h.html(),d=h.attr("rowId");(HtmlDecode(p)!==t||d!==(r+1).toString())&&n.nextAll("#"+o+"_span").html(c),k(this,e,n,!1),this.InjectAutomationAttr($("#"+e.GetInputName()+"_mb"),e),h=null}function C(e,n,r,i){var s=n.nextAll("#"+this.control.GetInputName()+"_span"),o=i.GetScriptProperty("Visible"),u=n.attr("name"),a;e?(a=s.children("div#"+u+"_IPEField").text(),s.styleHide(),t.DecideVisibility(n.nextAll("img#"+u+"_icon").add(n),o),n.val(a)):(a=n.val(),t.DecideVisibility(s,o),n.nextAll("img#"+u+"_icon").styleHide(),n.styleHide(),s.children("div#"+u+"_IPEField").children().val(a)),r!==!0&&n.focus()}function k(t,n,r,i){i?function(t,n,r){t.nextAll("#"+r.GetInputName()+"_span").children("div#"+r.GetInputName()+"_IPEField").unbind("click.ipeField").unbind("keypress.ipeField").unbind("focus.ipeField").bind("click.ipeField",function(e){C.call(n,!0,t,!1,r)}).bind("keypress.ipeField",function(e){e.keyCode===13&&C.call(n,!0,t,!1,r)}).bind("focus.ipeField",{elem:t,ctx:n,ctrl:r},function(t){var n=t.data.ctx.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"),t.data.ctrl,t.data.elem.val());if(n===!1)return t.preventDefault(),t.stopPropagation(),!1}),t.unbind("blur.ipeField"),t.bind("blur.ipeField",function(e){L.call(n,e,r)})}(r,t,n):function(t,n,r){t.nextAll("#"+r.GetInputName()+"_span").children("div#"+r.GetInputName()+"_NONIPEField").unbind("focus.ipeField").bind("focus.ipeField",{elem:t,ctx:n,ctrl:r},function(t){var n=t.data.ctx.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"),t.data.ctrl,t.data.elem.val());if(n===!1)return t.preventDefault(),t.stopPropagation(),!1})}(r,t,n)}function L(e,t){if(!this.Get("IsInQueryMode")){var n=$("#s_"+this.Get("GetFullId")+"_div").find("div[id$='_IPEField']").filter(":hidden"),r=n.attr("id");if(r){var i=n.parent().prevAll("[name="+r.substring(0,r.indexOf("_IPEField"))+"]").eq(0);(n.length&&e&&e.keyCode===$.ui.keyCode.TAB||i.length&&document.activeElement!==i[0])&&C.call(this,!1,i,!0,t)}}}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=SiebelJS.Dependency("SiebelApp.Utils"),n=e.get("SWE_CTRL_TEXT"),r=e.get("SWE_CTRL_TEXTAREA"),i=e.get("SWE_CTRL_PICK"),s=e.get("SWE_CTRL_MVG"),o=e.get("SWE_CTRL_PHONE"),u=e.get("CTRLVALUE"),a=e.get("SWE_CTRL_PLAINTEXT"),f=e.get("SWE_CTRL_CURRENCY_CALC"),l={};return l[e.get("SWE_CTRL_MVG")]=e.get("PHYEVENT_INVOKE_MVG"),l[e.get("SWE_CTRL_PICK")]=e.get("PHYEVENT_INVOKE_PICK"),l[e.get("SWE_CTRL_EFFDAT")]=e.get("PHYEVENT_INVOKE_EFFDAT"),l[e.get("SWE_CTRL_CURRENCY_CALC")]=e.get("PHYEVENT_INVOKE_CURRENCY"),l[e.get("SWE_CTRL_TEXT")]=e.get("PHYEVENT_INVOKE_DETAIL_POPUP"),SiebelJS.Extend(c,SiebelAppFacade.BasePW),c.prototype.GetEl=function(e,t){var n=null;if(this.control&&typeof this.control.GetInputName=="function")if(this.IsElementCachingEnabled()&&this.IsCached())n=this.GetCachedElement();else{var r=$($("#s_"+this.Get("GetFullId")+"_div")[0]||document);t||(n=r.find("."+this.control.GetInputName()));if(!n||!n.length)n=r.find('[name="'+this.control.GetInputName()+'"]');n.length||(n=$("#"+this.control.GetInputName())),n.length||(n=this.GetUIContext(this.control)),this.SetNoOfEl(n?n.length:0),n&&!isNaN(parseInt(e,10))&&n.length&&(n=n.eq(n.length>e?e:0)),this.CacheElement(n),r=null}return n},c.prototype.ShowUI=function(){SiebelAppFacade.FieldPW.superclass.ShowUI.call(this);var e=this.GetEl(undefined,!0),t=this.control.GetPopupType();e&&(SiebelAppFacade.HTMLTemplateManager.EnhanceMarkup({type:this.control.GetUIType(),el:e,id:this.control.GetInputName(),className:"siebui-align-"+this.control.GetJustification(),addIcon:t}),e.attr({maxlength:this.control.GetMaxSize()||256,tabindex:this.Get("GridFormContent")?this.control.GetSeq():"0"}),this.control.GetUIType()===n&&this.ExecuteMethod("GetFieldDataType",this.control.GetFieldName())===o.toLowerCase()&&!this.control.GetPopupType()&&b.call(this,e),(this.control.GetUIType()===i||this.control.GetUIType()===s||this.control.GetUIType()===f)&&e.attr("aria-haspopup","true"),this.UpdateAccessibilityTag(e),this.InjectAutomationAttr(e),e.addClass(this.control.GetInputName()))},c.prototype.BindEvents=function(){var e=this.GetEl(),t=this.Helper("EventHelper"),n=e&&e.next('span[id^="'+this.control.GetInputName()+'"]');SiebelAppFacade.FieldPW.superclass.BindEvents.call(this),e&&t&&(t.Manage(e,"focus",{ctx:this},w).Manage(e,"blur",{ctx:this},p).Manage(e,"keydown",{ctx:this},h),n&&n.length!==0&&t.Manage(n,"click",{ctx:this},S))},c.prototype.BindData=function(){SiebelAppFacade.FieldPW.superclass.BindData.call(this)},c.prototype.SetValue=function(i,s){s=s||0;var a=this.GetEl(s),f=null,l,c,h,p,d=!1,v=this.control.GetScriptProperty("Visible"),m=(this.control.GetUIType()===n||this.control.GetUIType()===r)&&!t.IsTrue(this.control.IsEncode()),y={};y.index=s,y.stateValue=i,this.CacheState(u,y);if(a&&a.length){if(this.Get("IsTaggedApplet"))a.replaceWith('<div role="document" tabindex="0" title="'+i+'" name="'+a.attr("name")+'" ot="'+a.attr("ot")+'" rn="'+a.attr("rn")+'" un="'+a.attr("un")+'" aria-label="'+this.control.GetDisplayName()+'">'+i+"</div>");else{l=this.control.GetInputName()+"_span",h=this.ExecuteMethod("CanUpdate",this.control.GetName()),p=this.ExecuteMethod("CanNavigate",this.control.GetName
(),s),y.stateValue=p,this.CacheState("CanNavigate",y),c=a.nextAll("#"+l),y.stateValue=v;if((this.control.GetShowBase()||m)&&!h)m&&(d=!0),i=this.GetTextHtml(i,d),i.hasOwnProperty("text")?(c.html("").styleHide(),t.DecideVisibility(a.val(i.text),v)):(t.DecideVisibility(g.call(this,a,l,c).html(i.html),v),a.val(i).styleHide(),y.stateValue=!1);else if(p&&i&&(i+"").trim().length>0)t.DecideVisibility(a.val(i),v),c=g.call(this,a,l,c),h?T.call(this,this.control,i,a,s):N.call(this,this.control,i,a,s),a.styleHide(),t.DecideVisibility(c,v);else{c.html("").styleHide();var b=a.nextAll("#"+this.control.GetInputName()+"_icon");t.DecideVisibility(a.val(i||"").add(b),v),b.removeClass("siebui-invisible")}SiebelAppFacade.DecisionManager.IsTouch()&&this.control.GetUIType()===n&&this.ExecuteMethod("GetFieldDataType",this.control.GetFieldName())===o.toLowerCase()&&(f=SiebelAppFacade.ComponentMgr.FindComponent({id:e.get("SWE_PST_COMM_TOOLBAR")}),f||$(a).nextAll("a.siebui-icon-phone-outbound").eq(0).attr("href","tel:"+a.val())),this.CacheState(e.get("SHOW"),y)}h||a.trigger("input.responsive")}},c.prototype.GetValue=function(e){return(this.GetEl(e)||$()).val()},c.prototype.SetState=function(n,r,i){var s=this.GetStateValue(n,i?i:0);if(s===undefined||s!==r){var o=this.GetEl(i),u=this.control.GetScriptProperty("Visible");r=r===undefined?!0:r;if(o&&o.length)switch(n){case e.get("EDITABLE"):o.attr({readOnly:!r,"aria-readonly":!r}),this.CacheState(n,{stateValue:r,index:i});var a=this.ExecuteMethod("CanNavigate",this.control.GetName(),i);a&&(r?($("#"+this.control.GetInputName()+"_NONIPEField").removeClass("siebui-anchor-readonly"),$("#"+this.control.GetInputName()+"_NONIPEField").attr("id",this.control.GetInputName()+"_IPEField")):($("#"+this.control.GetInputName()+"_IPEField").addClass("siebui-anchor-readonly"),$("#"+this.control.GetInputName()+"_IPEField").attr("id",this.control.GetInputName()+"_NONIPEField")),k(this,this.control,o,r));break;case e.get("ENABLE"):o.attr("disabled",!r),this.CacheState(n,{stateValue:r,index:i,methodName:this.control.GetMethodName()});break;case e.get("SHOW"):r=r?u:!1,t.DecideVisibility(o,r),this.CacheState(n,{stateValue:r,index:i});break;case e.get("FOCUS"):r?o.focus():o.blur()}}},c.prototype.BeginQuery=function(){SiebelAppFacade.FieldPW.superclass.BeginQuery.call(this);var e=this.GetEl();e&&(e.removeAttr("maxlength"),this.control.GetCaseSensitive()&&this.ExecuteMethod("CanUpdate",this.control.GetName())&&(e.data("old_placeholder",e.attr("placeholder")||""),e.attr("placeholder",SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK"))))},c.prototype.EndQuery=function(){var e=this.GetEl();SiebelAppFacade.FieldPW.superclass.EndQuery.call(this),e&&(e.attr("maxlength",this.control.GetMaxSize()||256),this.control.GetCaseSensitive()&&(e.data("old_placeholder")!==""?e.attr("placeholder",e.data("old_placeholder")):e.removeAttr("placeholder")))},c.prototype.IsInLeaveField=function(e){return!!$(e).data("inLeaveField")},c.prototype.InjectAutomationAttr=function(e){if(e&&e.length&&this.control){typeof this.control.GetObjectType=="function"&&!e.attr("ot")&&e.attr("ot",this.control.GetObjectType()),typeof this.control.GetRepstrName=="function"&&!e.attr("rn")&&e.attr("rn",this.control.GetRepstrName()),typeof this.control.GetUIName=="function"&&!e.attr("un")&&e.attr("un",this.control.GetUIName());if(SiebelApp.Utils.IsTrue(SiebelApp.S_App.IsAutoOn())){var t=e.attr("aria-describedby");if(t){var n=t.split(" "),r=n[n.length-1];e.siblings("[id ="+r+"]").attr("data-autom","siblings:[aria-describedby~='"+r+"']")}}}},c.prototype.UpdateAccessibilityTag=function(e){var n=e.attr("aria-labelledby"),r;if(e&&n){var i=e.closest(".siebui-applet");n=n.split(" "),i.length>0&&(r=n,n.forEach(function(e){var t=$.escapeSelector(e);t.length!==0&&i.find("#"+t).length==0&&(r=r.filter(function(t){return t!==e}))}),t.IsEmpty(r)?e.removeAttr("aria-labelledby"):(n=r.join(" "),e.attr("aria-labelledby",n)))}},c.prototype.PrepareConfigAttrInfo=function(e){if(e&&e.length)var t=e.attr("orn"),n=e.attr("ort"),r=e.attr("irt"),i=e.attr("irn");var s='ort="'+n+'" '+'orn="'+t+'" '+'irn="'+i+'" '+'irt="'+r+'" ';return s},c.prototype.GetTextHtml=function(e,n){var r=e,i=!1,s=$.parseHTML(e.trim())||[],o,u;e="";if(n)for(var a=0;s&&a<s.length;a++)u=$("<span></span>").append(s[a]).find("*").addBack(),o=u.filter("a"),o.length?(u.find("a[href]").attr("target","_blank"),e=(t.IsEmpty(e)?"":e)+u[0].outerHTML,i=!0):s[a].outerHTML?(e=(t.IsEmpty(e)?"":e)+s[a].outerHTML,i=!0):e=(t.IsEmpty(e)?"":e)+s[a].textContent;else for(var a=0;s&&a<s.length;a++)u=$("<span></span>").append(s[a]).find("*").addBack(),o=u.filter("a"),o.length?(u.find("a[href]").attr("target","_blank"),u.html(u.html().replace(/<\/?([a-z]+)[^>]*>/ig,function(e,t){return t.toLowerCase()==="a"?e:""})),e=(t.IsEmpty(e)?"":e)+u[0].outerHTML,i=!0):e=(t.IsEmpty(e)?"":e)+s[a].textContent;var f;if(i){var l=$("span[id='"+this.control.GetInputName()+"_HTML']");l.length===0&&(e="<span id='"+this.control.GetInputName()+"_HTML'>"+e+"</span>"),f={html:e}}else e===""&&(e=r),f={text:e};return f},c.prototype.GetIconMap=function(e){var n="",r=SiebelApp.S_App.GetIconMap(),i=SiebelApp.S_App.LookupStringCache(this.control.GetIconMap()),s,o;if(i){var u=r?r[i]:[];s=u.length;for(var a=0;a<s;a++){o=$(u[a].iconImage),this.control.GetDisplayName()?(o.attr("alt",o.attr("alt")?this.control.GetDisplayName()+":"+o.attr("alt"):o.attr("alt")).attr("title",o.attr("title")?this.control.GetDisplayName()+":"+o.attr("title"):o.attr("title")),o=o[0].outerHTML):o=u[a].iconImage;if(!t.IsEmpty(e)&&u[a].iconName===e){n=o;break}u[a].iconName==="Default"&&(n=o)}}return n},c.prototype.HandleKey=function(t,n,r){n.which===e.get("SWE_F2_KEY")&&(t.next('span[id^="'+this.control.GetInputName()+'"]').click(),n.stopImmediatePropagation())},c}(),SiebelAppFacade.FieldPW})),typeof SiebelAppFacade.NullControlPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.NullControlPW"),define("siebel/NullControlPW",["siebel/basepw"],function(){return SiebelAppFacade
.NullControlPW=function(){function e(){SiebelAppFacade.NullControlPW.superclass.constructor.apply(this,arguments)}return SiebelJS.Extend(e,SiebelAppFacade.BasePW),e.prototype.SetValue=function(e,t){var n=$("#"+this.control.GetInputName());n.length>0&&(n.empty().append(e),this.CacheState(SiebelJS.Dependency("SiebelApp.Constants").get("CTRLVALUE"),{stateValue:e,index:0,OneEl:!0}))},e}(),SiebelAppFacade.NullControlPW})),typeof SiebelAppFacade.ButtonPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.ButtonPW"),define("siebel/ButtonPW",["siebel/FieldPW"],function(){return SiebelAppFacade.ButtonPW=function(){function i(){SiebelAppFacade.ButtonPW.superclass.constructor.apply(this,arguments)}function s(e){var n=e.data.ctx,r=$(this);if(typeof n.OnControlEvent=="function"&&!r.data("mouseDown")){var i=n.OnControlEvent(t.get("PHYEVENT_APPLET_FOCUS"));i||r.blur()}}function o(e){var t=e.data.ctx,n=$(this);n.data("mouseDown",!0)}function u(n){var r=n.data.ctx,i=$(this),s=r.control.GetPMPropSet(t.get("SWE_CTRL_PM_PS")),o=s?e.IsTrue(s.GetProperty("EnableProgressBar")):!1;i.data("mouseDown")&&i.removeData("mouseDown");if((i.prop("tagName")||"").toLowerCase()==="button"&&!i.is(":disabled")||i.hasClass("siebui-btn-icon-e")){SiebelApp.S_App.uiStatus.Busy({mask:!0,EnableProgressBar:o});var u=i.data("timeoutId");u&&clearTimeout(u),u=setTimeout(function(){var e=r.Get("GetControls"),t=r.control.GetPMPropSet(),n=null,i=null,s=!1;t&&t.GetProperty("FileUploadControl")&&(n=e[t.GetProperty("FileUploadControl")],n&&(i=r.GetUIWrapper(n),i&&i.SubmitFile&&(s=i.SubmitFile(r.control))));if(!s){var o=a.call(r,r.control),u=r.GetEl();!o&&u&&u[0]===document.activeElement&&!r.Get("IsActive")&&u.blur()}else SiebelApp.S_App.uiStatus.Free()},0),i.data("timeoutId",u),n.preventDefault()}i=null}function a(e){var n={};n.async=!0,n.cb=function(){var e=Array.prototype.slice.call(arguments),n="";if(e){var r=e.length;n=e[r-1],n instanceof JSSPropertySet||(n=r>1?e[r-2]:""),n instanceof JSSPropertySet&&(n=n.GetPropertyAsStr("Status"))}n!==t.get("SWE_RPC_PROP_NEW_LAYOUT")&&n!==t.get("SWE_RPC_PROP_REFRESH_LAYOUT")&&n!==t.get("SWE_RPC_PROP_NEW_PAGE")&&SiebelApp.S_App.uiStatus.Free()};var r=e.GetMethodPropSet(),i=r.Clone(),s=this.OnControlEvent(t.get("PHYEVENT_INVOKE_CONTROL"),e.GetMethodName(),i,n);if(s===!1)return SiebelApp.S_App.uiStatus.Free(),!1}var e=SiebelJS.Dependency("SiebelApp.Utils"),t=SiebelJS.Dependency("SiebelApp.Constants"),n=t.get("SWE_PST_BUTTON_CTRL"),r=t.get("SWE_CTRL_LINK");return SiebelJS.Extend(i,SiebelAppFacade.FieldPW),i.prototype.ShowUI=function(){var e=this.GetEl(undefined,!0),i=null,s=null,o=null,u=null,a=null;if(e&&e.length){i=this.ExecuteMethod("CanInvokeMethod",this.control.GetMethodName()),s=this.Get("GetAppletLabel"),o=i?this.control.GetEnabledBmp():this.control.GetDisabledBmp(),u=this.Get("GridFormContent")?this.control.GetSeq():"0",a=this.control.GetDisplayName(),appletType=this.Get("AppletType");if(SiebelApp.S_App.IsConfigMode()===!0)var f=this.PrepareConfigAttrInfo(e);s!==""&&(s&&appletType&&s.toUpperCase().indexOf(appletType.split(" ")[0].toUpperCase())==-1?s+=" "+appletType+":":s+=":");if(o)altText="",$(o).attr("alt")?altText=s+$(o).attr("alt"):$(o).find("img").attr("alt")&&(altText=$(o).find("img").attr("alt"),altText.split(":").length==2&&(altText=s+altText.split(":")[1])),e.addClass(i?"siebui-btn-icon-e":"siebui-btn-icon-d").append(SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:r,value:o})).children("a").attr("tabindex",i?u:"-1").find("img").attr({alt:altText,title:$(o).attr("title")?s+$(o).attr("title"):$(o).find("img").attr("title"),"data-autom":"closest:[rn]"});else{var l=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:n,id:this.control.GetInputName()+"_Ctrl",className:(i?"appletButton":"appletButtonDis")+" siebui-icon-"+(this.control.GetMethodName()||"").toLowerCase(),value:"<span>"+a+"</span>",attrs:'name="'+this.control.GetInputName()+'" data-display="'+a+'" tabindex="'+u+'" title="'+s+a+'" '+'aria-label="'+s+a+'" '+(i===!0?" ":'disabled="disabled"')+(SiebelApp.S_App.IsConfigMode()===!0?f:"")});e.replaceWith(l)}e=this.GetEl(),e&&e.length&&(this.InjectAutomationAttr(e),e.addClass(this.control.GetInputName())),this.CacheState(t.get("ENABLE"),{stateValue:i})}},i.prototype.BindEvents=function(){var e=this.GetEl(),t=this.Helper("EventHelper");e&&t.Manage(e,"focus",{ctx:this},s).Manage(e,"click",{ctx:this},u).Manage(e,"mousedown",{ctx:this},o)},i.prototype.SetState=function(e,n,r){var i=this.GetEl(r);n=n===undefined?!0:n;if(i&&i.length)if(e===t.get("ENABLE")){var s=this.control.GetEnabledBmp(),o=this.control.GetDisabledBmp();if(s||o){var u=n?s:o;if(u){u=$(u);var a=u.find("img").eq(0),f=a.length&&(a.attr("alt")||a.attr("title")),l=n?this.control.GetSeq()||0:"-1";f?u.attr("title",f):!1,a.attr("data-autom","closest:[rn]"),i.removeClass("siebui-btn-icon-e siebui-btn-icon-d").addClass(n?"siebui-btn-icon-e":"siebui-btn-icon-d").find("a").attr({tabindex:l,"data-seq":l}).html(u)}}else i.attr("disabled",!n).removeClass("appletButton appletButtonDis").addClass(n?"appletButton":"appletButtonDis");this.CacheState(e,{stateValue:n})}else SiebelAppFacade.ButtonPW.superclass.SetState.apply(this,arguments);return},i.prototype.SetValue=function(e,t){},i.prototype.GetEl=function(e,t){var n=null;return n=SiebelAppFacade.ButtonPW.superclass.GetEl.call(this,e,t),(!n||!n.length)&&this.control&&typeof this.control.GetInputName=="function"&&(n=$("#"+this.control.GetInputName()+"_Ctrl"),this.CacheElement(n)),n},i}(),SiebelAppFacade.ButtonPW})),typeof SiebelAppFacade.CalculatorPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.CalculatorPW"),define("siebel/calculatorpw",["siebel/FieldPW"],function(){return SiebelAppFacade.CalculatorPW=function(){function t(e){SiebelAppFacade.CalculatorPW.superclass.constructor.call(this,e)}function n(t){var n=t.data.ctx;n.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"),n.control,$(this).val())}function r(t){var n=t.data.ctx;if(n.IsInLeaveField(this))return;n.Get("isControlPopupOpen"
)==0&&n.OnControlEvent(e.get("PHYEVENT_CONTROL_BLUR"),n.control,$(this).val())}function i(e){var t=e.data.ctx;e.data.ctrl=t.control,t.OnKey($(this),e,$(this).val())}function s(t){var n=t.data.ctx,r=n.GetEl(),i=null;SiebelAppFacade.DecisionManager.PauseVKeyboard(r);if(!n.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"),n.control)){SiebelAppFacade.DecisionManager.ResumeVKeyboard(r);return}if(r&&n.ExecuteMethod("CanUpdate",n.control.GetName())){r.length>1&&(i=r.next("span.siebui-icon-calc").index($(this)),r=r.eq(i>=0?i:0)),n.SetProperty("isControlPopupOpen",!0);var s=SiebelApp.S_App.LocaleObject.GetDispNumberDecimal()||e.get("SWE_DECIMAL_CONST"),u=s[0].toLowerCase(),a=["a","b","c","d","e","f","A","B","C","D","E","F"],f="",l=a.length;for(var c=0;c<l;c++)if(a[c]===s[0]){f=s[0].replace(a[c],"["+a[c]+"]");break}s=f?f+s.substring(1,s.length):s,$.calculator.addKeyDef("dc",s,$.calculator.digit,null,"mykey","DC",u);var h=["_%BSCECA","_1_2_3_+@X","_4_5_6_-@U","_7_8_9_*@E","dc_0_=_/"];r.calculator({layout:h,onClose:function(e,t){o.call(this,n,e,t),SiebelAppFacade.DecisionManager.ResumeVKeyboard(r)},decimalChar:s}),r.val(SiebelApp.S_App.LocaleObject.FormattedToString(n.ExecuteMethod("GetFieldDataType",n.control.GetFieldName()),r.val(),n.control.GetDisplayFormat())),r.calculator("show"),$.calculator._getInst(r)._mainDiv.attr({"aria-label":"Calculator Popup",role:"application","aria-atomic":"true","aria-live":"assertive","aria-relevant":"all"})}}function o(e,t,n){if($(this).parents("body").length){var r=(""+t).replace(/\[/g,"").replace(/\]/g,"");$(this).calculator("destroy").val(r).focus(),e.SetProperty("isControlPopupOpen",!1)}}var e=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(t,SiebelAppFacade.FieldPW),t.prototype.ShowUI=function(e){var t=this.GetEl();if(t){SiebelAppFacade.HTMLTemplateManager.EnhanceMarkup({el:t,type:this.control.GetUIType(),id:this.control.GetInputName(),className:"siebui-align-"+this.control.GetJustification()});var n=this.Get("GridFormContent")?this.control.GetSeq():"0";t.attr({maxlength:this.control.GetMaxSize()||256,tabindex:n,"aria-haspopup":"true"}),this.InjectAutomationAttr(t)}},t.prototype.BindEvents=function(e){var t=this.GetEl(),o=this.Helper("EventHelper");t&&t.length&&o.Manage(t,"focus",{ctx:this},n).Manage(t,"blur",{ctx:this},r).Manage(t,"keydown",{ctx:this},i).Manage(t.next("span.siebui-icon-calc"),"click",{ctx:this},s)},t.prototype.OpenPopup=function(){var e=this.GetEl();if(e&&e.length>1){var t=e.index($(document.activeElement));e=t>=0?e.eq(t):$()}e.next(".siebui-icon-calc").click()},t.prototype.HandleKey=function(e,t){switch(t.which){case $.ui.keyCode.ENTER:var n=e.data("calculator");n&&(n._pendingOp(n),e.val(n.curValue));break;default:}},t}(),"SiebelAppFacade.CalculatorPW"})),typeof SiebelAppFacade.CheckBoxPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.CheckBoxPW"),define("siebel/checkboxpw",["siebel/FieldPW"],function(){return SiebelAppFacade.CheckBoxPW=function(){function n(){SiebelAppFacade.CheckBoxPW.superclass.constructor.apply(this,arguments)}function r(t){var n=t.data.ctx,r=n.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"),n.control,$(this).val());if(r===!1)return t.preventDefault(),t.stopPropagation(),!1}function i(t){var n=t.data.ctx,r=$(this);if(n.IsInLeaveField(this))return;if(r.data("webkit-mousedown")){r.removeData("webkit-mousedown");return}n.OnControlEvent(e.get("PHYEVENT_CONTROL_BLUR"),n.control,$(this).val())}function s(e){$(this).data("webkit-mousedown",!0),$(this).data("readonly-value",$(this).prop("checked"))}function o(e){var t=e.data.ctx;e.data.ctrl=t.control,t.OnKey($(this),e,$(this).val())}function u(e){var t=$(this),n=t.val(),r=t.attr("readonly");typeof r!="undefined"&&r!==!1&&(t.prop("checked",t.data("readonly-value")!==undefined?t.data("readonly-value"):!t.prop("checked")),t.removeData("readonly-value")),e.data.ctx.Get("IsInQueryMode")?(typeof r!="undefined"&&r!==!1?(t.prop("indeterminate",n===""),t.prop("checked",n==="Y")):(t.prop("indeterminate",n==="N"),t.prop("checked",n===""),t.val(n==="N"?"":n===""?"Y":"N")),t.attr("aria-checked",t.val()===""?"mixed":t.val()==="Y"?"true":"false")):(t.val(t.prop("checked")?"Y":"N"),t.attr("aria-checked",t.val()==="Y"?"true":"false"),t.prop("indeterminate",!1)),t.data("webkit-mousedown")&&t.removeData("webkit-mousedown");var i=$(document.activeElement);((t.attr("id")||"")!==(i.attr("id")||"")||(t.attr("name")||"")!==(i.attr("name")||""))&&t.focus()}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=SiebelJS.Dependency("SiebelApp.Utils");return SiebelJS.Extend(n,SiebelAppFacade.FieldPW),n.prototype.BindEvents=function(){var e=this.GetEl(),t=this.Helper("EventHelper");e&&t&&t.Manage(e,"down",{ctx:this},s).Manage(e,"blur",{ctx:this},i).Manage(e,"focus",{ctx:this},r).Manage(e,"click",{ctx:this},u).Manage(e,"keydown",{ctx:this},o)},n.prototype.SetState=function(t,n,r){t!==e.get("ENABLE")&&SiebelAppFacade.CheckBoxPW.superclass.SetState.apply(this,arguments)},n.prototype.SetValue=function(n,r){var i=this.GetEl(r);i&&(i.val(n),this.Get("IsInQueryMode")?(i.prop("indeterminate",n===""),i.attr("aria-checked",n===""?"mixed":n==="Y"?"true":"false")):(i.prop("checked")!==t.IsTrue(n)&&i.prop("checked",t.IsTrue(n)),i.prop("indeterminate",!1),i.attr("aria-checked",n==="Y"?"true":"false"))),this.CacheState(e.get("CTRLVALUE"),{stateValue:n,index:r})},n}(),SiebelAppFacade.CheckBoxPW})),typeof SiebelAppFacade.RadioPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.RadioPW"),define("siebel/radiopw",["siebel/FieldPW"],function(){return SiebelAppFacade.RadioPW=function(){function t(){SiebelAppFacade.RadioPW.superclass.constructor.apply(this,arguments)}function n(t){var n=t.data.ctx,r=$(this).is(":checked")?$(this).val():"";n.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"),n.control,r),t.stopPropagation()}function r(t){var n=t.data.ctx,r=$(this),i=n.GetEl(Number(n.Get("GetSelection"))),s=i.filter(":checked").length;if(n.IsInLeaveField(this))return;t.stopPropagation();if(r.data("webkit-mousedown")){r.removeData
("webkit-mousedown");return}r=s?i.filter(":checked"):$(this),n.OnControlEvent(e.get("PHYEVENT_CONTROL_BLUR"),n.control,s?r.val():"")}function i(e){var t=e.data.ctx;e.stopPropagation();if(e.type!==jQuery.event.triggered){var n=$(this),r=$(document.activeElement);((n.attr("id")||"")!==(r.attr("id")||"")||(n.attr("name")||"")!==(r.attr("name")||""))&&n.focus()}t.ExecuteMethod("LeaveField",t.control,$(this).val(),!0)}function s(e){$(this).data("webkit-mousedown",!0),e.stopPropagation()}function o(e){var t=$(this),n=t.attr("readonly");e.stopPropagation(),typeof n!="undefined"&&n!==!1&&t.prop("checked",!t.prop("checked")),t.data("webkit-mousedown")&&t.removeData("webkit-mousedown");var r=$(document.activeElement);((t.attr("id")||"")!==(r.attr("id")||"")||(t.attr("name")||"")!==(r.attr("name")||""))&&t.focus()}var e=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(t,SiebelAppFacade.FieldPW),t.prototype.GetEl=function(e,t){var n=SiebelAppFacade.RadioPW.superclass.GetEl.call(this,null,t);if(n&&!isNaN(parseInt(e,10))&&n.length){var r=this.control.GetRadioGroupPropSet(),i,s;if(!r.IsEmpty()){i=r.GetChildCount(),n.length<=e*i&&(e=0),this.SetNoOfEl(e+1),s=n.eq(e*i);for(var o=1;o<i;o++)s=s.add(n.eq(e*i+o));n=s}}return n},t.prototype.ShowUI=function(){var t=this.GetEl(),n=this.control.GetRadioGroupPropSet(),r=this.control.GetDisplayName(),i=$(t).attr("aria-labelledby"),s="",o=this.control.GetInputName(),u=this.Get("GridFormContent")?this.control.GetSeq():"0";isPopup=$("#s_"+this.Get("GetFullId")+"_div").closest("div[name=popup]");if(SiebelApp.S_App.IsConfigMode()===!0)var a=this.PrepareConfigAttrInfo(el);if(!n.IsEmpty()&&t){var f=t.parent();t.remove();for(var l=0,c=n.GetChildCount();l<c;l++){var h=n.GetChild(l),p=h.GetProperty("DisplayName"),d=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_RADIO"),attrs:'name="'+o+'" tabindex="'+u+'"'+(SiebelApp.S_App.IsConfigMode()===!0?a:"")});s=o+"_"+p;var v={"aria-labelledby":i+" "+s,value:h.GetProperty("FieldValue"),"aria-label":p};if(utils.IsTrue(SiebelApp.S_App.IsAutoOn())){v[e.get("SWE_PROP_AUTOM_OT")]=this.control.GetObjectType(),v[e.get("SWE_PROP_AUTOM_RN")]=this.control.GetRepstrName(),v[e.get("SWE_PROP_AUTOM_UN")]=p;var m=this.control.GetLovType();m=m||this.Get("GetName")+":"+this.control.GetName(),m&&SiebelApp.S_App.TranslationTable&&(LICVal=SiebelApp.S_App.TranslationTable.LookupLIC(m,p),v["data-licval"]=LICVal)}d=$(d).attr(v)[0].outerHTML,d+='<span id="'+s+'" >'+p+"</span><br/>",f.append(d);if(isPopup.length&&f.hasClass("scField")){var g=f.parent().closest(".scField").length?f.parent().closest(".scField"):f,y=g.siblings(".scLabelRight"),b=y.find("span").attr("id")||"";f.attr({"aria-labelledby":b,role:"radiogroup"})}}var w=f.children("input");for(var l=0;l<w.length;l++)this.UpdateAccessibilityTag($(w[l]));f=null}},t.prototype.BindEvents=function(){var e=this.GetEl(),t=this.Helper("EventHelper");e&&t&&(t.Manage(e,"focus",{ctx:this},n).Manage(e,"down",{ctx:this},s).Manage(e,"blur",{ctx:this},r).Manage(e,"change",{ctx:this},i).Manage(e,"click",{ctx:this},o),SiebelAppFacade.RadioPW.superclass.BindEvents.call(this))},t.prototype.BindData=function(e){SiebelAppFacade.RadioPW.superclass.BindData.call(this),this.SetValue(e)},t.prototype.SetValue=function(t,n){n=n!=="undefined"||n!==null?n:Number(this.Get("GetSelection"));var r=this.GetEl(n),i=this.GetIconMap(t),s=this.control.GetScriptProperty("Visible"),o={};stateArgs={},stateArgs.index=n,r&&(t?o=r.filter(function(){return $(this).val()===t}).prop("checked",!0):o=r.prop("checked",!1),o.length>0&&(r=o),this.control.GetShowBase()&&!this.ExecuteMethod("CanUpdate",this.control.GetName())&&r.parent().children("#"+r.attr("name")+"_s").length>0&&(i?(r.nextAll("span").eq(0).remove(),utils.DecideVisibility(r.after(i),s),r.styleHide()):(r.nextAll("span").eq(0).remove(),utils.DecideVisibility(r,s)))),stateArgs.stateValue=s,this.CacheState(e.get("SHOW"),stateArgs),stateArgs.stateValue=t,this.CacheState(e.get("CTRLVALUE"),stateArgs)},t.prototype.SetState=function(t,n,r){var i=this.GetStateValue(t,r?r:0);if(i===undefined||i!==n){var s=this.GetEl(r),o=this.control.GetScriptProperty("Visible");n=n===undefined?!0:n;if(s&&s.length)switch(t){case e.get("EDITABLE"):n?s.removeAttr("readOnly").attr("aria-readonly",!1):s.attr({readOnly:"readOnly","aria-readonly":!0}),this.CacheState(t,{stateValue:n,index:r});break;case e.get("ENABLE"):s.attr("disabled",!n),this.CacheState(t,{stateValue:n,index:r,methodName:this.control.GetMethodName()});break;case e.get("SHOW"):n?utils.DecideVisibility(s,o):s.styleHide(),this.CacheState(t,{stateValue:n,index:r});break;case e.get("FOCUS"):s=s.filter(":checked").length?s.filter(":checked"):$(s[0]),n?s.focus():s.blur()}}},t.prototype.GetValue=function(e){return this.GetEl(e).filter(":checked").val()||""},t}(),SiebelAppFacade.RadioPW})),typeof SiebelAppFacade.DatePW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.DatePW"),define("siebel/datepw",["siebel/FieldPW"],function(){return SiebelAppFacade.DatePW=function(){function o(){SiebelAppFacade.DatePW.superclass.constructor.apply(this,arguments),i||(u(),i=!0)}function u(){var e=SiebelApp.S_App.LocaleObject.GetDispTimeAM(),t=SiebelApp.S_App.LocaleObject.GetDispTimePM();if($.datepicker.regional.SWE.amNames[0]!==e||$.datepicker.regional.SWE.pmNames[0]!==t)$.datepicker.regional.SWE.amNames=[e,e],$.datepicker.regional.SWE.pmNames=[t,t],$.datepicker.setDefaults($.datepicker.regional.SWE),$.timepicker&&$.timepicker.setDefaults&&$.timepicker.setDefaults($.datepicker.regional.SWE)}function a(e){var i=e.data.ctx,o=i.control.GetUIType(),u=null;if(i.Get("isControlPopupOpen"))return;var a=i.GetEl();a&&a.length>1&&e&&(u=a.next("span"+(i.control.GetUIType()===n?".siebui-icon-date":".siebui-icon-datetime")).index($(this)),a=a.eq(u>=0?u:0)),SiebelAppFacade.DecisionManager.PauseVKeyboard(a);if(!i.OnControlEvent(t.get("PHYEVENT_CONTROL_FOCUS"),i.control)){SiebelAppFacade.DecisionManager.ResumeVKeyboard(a);return}if(!i.ExecuteMethod("CanUpdate"
,i.control.GetName())){e.stopPropagation();return}a.attr("data",a.val()),i.SetProperty("isControlPopupOpen",!0);var c={changeMonth:!0,changeYear:!0,showTime:!1,showTimepicker:!1,dateFormat:"yy-mm-dd",yearRange:"c-100:c+100",isRTL:SiebelApp.S_App.GetDirection()?!0:!1,onClose:function(e,t){f.call(i,$(this),e,t.isEscapeKey),SiebelAppFacade.DecisionManager.ResumeVKeyboard($(this))},firstDay:SiebelApp.S_App.LocaleObject.GetWeekStartDay()},o=i.control.GetUIType(),h=a.val();if(o===r||o===s){var p=SiebelApp.S_App.LocaleObject.GetTimeFormat(),d=p.indexOf("p ")===-1&&p.indexOf(" p")===-1,v=(d?"HH":"hh")+":mm:ss"+(d?"":" TT");$.extend(c,{showTime:!0,showTimepicker:!0,timeFormat:v,separator:" "});var m=SiebelApp.S_App.LocaleObject.GetUtcOffset();o===s&&$.extend(c,{timeZoneList:SiebelApp.S_App.LocaleObject.GetTimeZoneList(),timeZoneName:SiebelApp.S_App.LocaleObject.GetTimeZoneName(),timezone:m===""?null:SiebelApp.S_App.LocaleObject.GetUtcOffset()})}a.datetimepicker(c);var g=l.call(i,a.val(),!0);g&&g!==t.get("JS_INVALID_DATE")&&(g=g.replace(/-/g,"/"),a.datetimepicker("setDate",g));var y=a.datepicker("widget"),b=a.closest(".ui-dialog"),w=Number(b.css("z-index"));a.datetimepicker("show");if(b.length>0&&Number(y.css("z-index"))<w){var E=y.attr("style")+"z-index: "+(w+1)+" !important;";y.attr("style",E)}a.datepicker("widget").find(".ui-datepicker-calendar").attr("tabindex","0").focus(),a=null,e.stopPropagation()}function f(t,n,i){var o=this.control,u=o.GetUIType(),a,f=SiebelApp.S_App.LocaleObject.GetDateFormat(),c=!1,h=!1,p;switch(u){case s:var d=$.datepicker.dpDiv.find(".ui_tpicker_timezone").find("select"),v=d.val();SiebelApp.S_App.LocaleObject.GetTimeZoneName()!==v&&(v="["+v+"]",n+=" "+v,p=n,p+=" "+v,c=!0);case r:h=!0,f+=" "+SiebelApp.S_App.LocaleObject.GetTimeFormat();default:a=o.GetDisplayFormat()?SiebelApp.S_App.LocaleObject.GetStringFromDateTime(n,f,o.GetDisplayFormat())||n:n,n=e.ToISOFormat(c?p:n,h,f,c)||n}t.val(a===""?n:a),t.datetimepicker("destroy");var m=this;setTimeout(function(){m.Get("isControlPopupOpen")||t.focus()},10),this.SetProperty("isControlPopupOpen",!1);var g=t.attr("data");i===!0?t.val(g):(t.val(l.call(this,n,!1)),this.ExecuteMethod("LeaveField",o,n,!0)),t.removeAttr("data")}function l(e,r){var i=this.control,o=i.GetUIType()===n,u=t.get("ISO_DATE_FORMAT"),a=i.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat(),f;o||(u=t.get("ISO8601_DATETIME_FORMAT"),a=i.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat()+" "+SiebelApp.S_App.LocaleObject.GetTimeFormat());if(r){var l=SiebelApp.S_App.LocaleObject.GetUtcOffset();if(i.GetUIType()===s&&l!==""){var c=new SiebelApp.S_App.DatumDateTimeObject;c.SetAsFormattedString(e,a);var h=(new Date(c.GetYear(),c.GetMonth()-1,c.GetDay(),c.GetHour(),c.GetMinute())).getTimezoneOffset();c.AddTime(0,-l-h,0),h=(new Date(c.GetYear(),c.GetMonth()-1,c.GetDay(),c.GetHour(),c.GetMinute())).getTimezoneOffset()-h,c.AddTime(0,-h,0),f=c.GetAsFormattedString(u,!0)}else f=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(e,a,u,!0)}else f=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(e,u,a);return f}function c(r){var i=r.data.ctx,s,o=i.control;s=$(this).val(),i.Get("IsInQueryMode")===!1&&(s=e.ToISOFormat(s,o.GetUIType()!==n,o.GetDisplayFormat())||s),i.OnControlEvent(t.get("PHYEVENT_CONTROL_FOCUS"),o,s)}function h(r){var i=r.data.ctx,s,o=i.control;s=$(this).val();if(i.IsInLeaveField(this))return;if(i.Get("isControlPopupOpen")==0)i.OnControlEvent(t.get("PHYEVENT_CONTROL_BLUR"),o,s);else{var u=o.GetUIType()===n,a=SiebelApp.S_App.LocaleObject.GetDateFormat(),f=t.get("ISO_DATE_FORMAT");u||(a+=" "+SiebelApp.S_App.LocaleObject.GetTimeFormat(),f=t.get("ISO8601_DATETIME_FORMAT")),s=e.ToISOFormat(s,o.GetUIType()!==n,o.GetDisplayFormat())||s;var l=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(s,f,a);$(this).val(l===""?s:l)}}function p(e){var t=e.data.ctx;e.data.ctrl=t.control,t.OnKey($(this),e,$(this).val())}var e=SiebelJS.Dependency("SiebelApp.Utils"),t=SiebelJS.Dependency("SiebelApp.Constants"),n=t.get("SWE_CTRL_DATE_PICK"),r=t.get("SWE_CTRL_DATE_TIME_PICK"),i=!1,s=t.get("SWE_CTRL_DATE_TZ_PICK");return SiebelJS.Extend(o,SiebelAppFacade.FieldPW),o.prototype.ShowUI=function(){var e=this.GetEl();if(e){SiebelAppFacade.HTMLTemplateManager.EnhanceMarkup({type:this.control.GetUIType(),el:e,id:this.control.GetInputName(),className:"siebui-align-"+this.control.GetJustification()});var t=this.Get("GridFormContent")?this.control.GetSeq():"0";e.attr({maxlength:this.control.GetMaxSize()||256,tabindex:t,"aria-haspopup":"true"}),this.InjectAutomationAttr(e)}},o.prototype.BindEvents=function(){var e=this.GetEl(),t=this.Helper("EventHelper"),r=this.control.GetUIType()===n?"siebui-icon-date":"siebui-icon-datetime";e&&t&&t.Manage(e,"focus",{ctx:this},c).Manage(e,"blur",{ctx:this},h).Manage(e,"keydown",{ctx:this},p).Manage(e.next("span."+r),"click",{ctx:this},a)},o.prototype.OpenPopup=function(){if(!this.Get("isControlPopupOpen")){var e=this.GetEl();if(e&&e.length>1){var t=e.index($(document.activeElement));e=t>=0?e.eq(t):$()}e.next(this.control.GetUIType()===n?".siebui-icon-date":".siebui-icon-datetime").click()}},o.prototype.HandleKey=function(e,n,r){n.which===t.get("SWE_F2_KEY")&&(e.next('span[id^="'+this.control.GetInputName()+'"]').click(),n.stopImmediatePropagation())},o}(),SiebelAppFacade.DatePW})),typeof SiebelAppFacade.DropDownPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.DropDownPW"),define("siebel/dropdownpw",["siebel/FieldPW"],function(){return SiebelAppFacade.DropDownPW=function(){function t(){SiebelAppFacade.DropDownPW.superclass.constructor.apply(this,arguments)}function n(){var t=this.control,n=null,r=t.GetHTMLAttr(),i=e.get("SWE_NATIVE_COMBO_ATTR"),s=r?r.toLowerCase().replace(/ /g,""):"";if(s.indexOf(i)>=0){n=s.substring(s.indexOf(i)+i.length,s.length),n=n.replace(/"/g,"");var o=0;for(o=1;o<=n.length;o++)if(isNaN(Number(n.substring(0,o))))break;n=n.substring(0,o-1)}return n}function r(t){var n=t.data.ctx;n.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"
),n.control,$(this).val())}function i(t){var r=t.data.ctx,i=$(this);if(i.data("mouseClick"))return;if(r.IsInLeaveField(this))return;if($(document.activeElement).parents(".ui-autocomplete").length>0||i.data("ui-autocomplete")&&i.data("ui-autocomplete").menu.active)return;var s=c.call(r,i.val());$(this).data("filterValue",$(this).val()),r.OnControlEvent(e.get("PHYEVENT_CONTROL_BLUR"),r.control,s),$(this).removeData("filterValue");var o=n.call(r);o||i.autocomplete("option","source",[])}function s(e,t){var n=e.data.ctx;SiebelAppFacade.DecisionManager.PauseVKeyboard($(this));var r=t?t.item.value:$(this).val();e.keyCode===9&&!n.control.IsBoundedPick()?(r=$(this).val(),e.stopPropagation(),e.preventDefault()):$(this).data("pendingSelect",r),n.Get("IsInQueryMode")&&n.SetProperty("DDUserSelected",{ctrl:n.control,value:r}),$(this).removeData("pendingTouchEnd")}function o(e){e.data.ctx.SetProperty("isControlPopupOpen",!0);var t=$(this),n=t.autocomplete("widget"),r=t.closest(".ui-dialog"),i=Number(r.css("z-index"));if(r.length>0&&Number(n.css("z-index"))<i){var s=n.attr("style")+"z-index: "+i+1+" !important;";n.attr("style",s)}if(n.length){utils.IsSmallScreen()&&setTimeout(function(){var e=$(".siebui-nav-tabs");e.length&&e.addClass("siebui-disable-navtab")},10),setTimeout(function(){var e=parseInt(n.css("top"),10);e<0&&n.css("top",0)},0);var o=(this.value||"").trim();if(o){var u=n.find(":contains('"+o+"')").filter(function(){return $(this).text()===o}).first();u.length&&u.text()===o&&t.data("ui-autocomplete")&&t.data("ui-autocomplete").menu.focus(null,u),u=null}}$(this).removeData("pendingTouchEnd")}function u(e){$(this).removeData("pendingTouchEnd");var t=e.data.ctx;$(this).autocomplete("widget").css("z-index","");var n=$(this).data("pendingSelect");t.SetProperty("CloseCtrlPopupInProgress",!0),utils.IsSmallScreen()&&setTimeout(function(){var e=$(".siebui-nav-tabs");e.length&&e.removeClass("siebui-disable-navtab")},10);if(n){$(this).removeData("pendingSelect"),$(this).data("filterValue",$(this).val());if(t.control.IsPostChanges()||$(this).data("resetOffset")){var r=t.ExecuteMethod("LeaveField",t.control,n,!0);$(this).removeData("filterValue"),$(this).data("resetOffset")&&t.ExecuteMethod("SetActiveControl",null);if(r===!1)return SiebelAppFacade.DecisionManager.ResumeVKeyboard($(this)),t.SetProperty("isControlPopupOpen",!1),t.SetProperty("CloseCtrlPopupInProgress",!1),r}else SiebelAppFacade.DecisionManager.IsTouch()&&document.activeElement!==this&&this.focus();$(this).removeData("filterValue")}SiebelAppFacade.DecisionManager.ResumeVKeyboard($(this)),t.SetProperty("isControlPopupOpen",!1),t.SetProperty("CloseCtrlPopupInProgress",!1)}function a(t,n){var r=n?n.data.ctx||this:this;t.data("iscache","true"),r.OnControlEvent(e.get("PHYEVENT_INVOKE_COMBO"),r.control),t.removeData("iscache")}function f(e){var t=e.data.prevElem;t.length>1&&(t=$(this).prev()),$(t).data("mouseClick",!0)}function l(t,n){if(t&&t.data.prevElem){var r=t.data.prevElem;r.length>1&&(r=$(this).prev()),$(r).removeData("mouseClick")}var i=t?t.data.ctx||this:this,s=i.GetEl()||$();if(s.data("iscache")){s.autocomplete("option","source",n);return}var o,u=i.control.GetRadioGroupPropSet(),a;s&&s.length>1&&(t?(o=s.next("span.siebui-icon-dropdown").index($(this)),s=s.eq(o>=0?o:0),s.focus()):(o=s.index($(document.activeElement)),s=o>=0?s.eq(o):$()));if(i.control)if(!i.ExecuteMethod("CanUpdate",i.control.GetName())||s.is(":disabled"))return s.focus(),!1;if(!u.IsEmpty()&&i.control.IsStaticBounded()){SiebelAppFacade.DecisionManager.PauseVKeyboard(s),n=n||[];for(var f=0,l=u.GetChildCount();f<l;f++)a=u.GetChild(f),n[f]=a.GetProperty(e.get("SWE_DISPLAY_NAME_STR"))}if(n===undefined){s.autocomplete("option","source",[]),SiebelAppFacade.DecisionManager.PauseVKeyboard(s),i.OnControlEvent(e.get("PHYEVENT_INVOKE_COMBO"),i.control),SiebelAppFacade.DecisionManager.ResumeVKeyboard(s),SiebelApp.S_App.uiStatus.Free();return}if(s.length!==0){var c=null;if(s.length&&s.is(":hidden")){var h=s.siblings().find("div#"+s.attr("name")+"_IPEField");c=s.autocomplete("option","position"),h.length&&c&&(s.autocomplete("option","position",$.extend(c,{of:h})),i.ExecuteMethod("SetActiveControl",i.control),s.data("resetOffset",!0))}else s.data("resetOffset")&&(c=s.autocomplete("option","position"),s.autocomplete("option","position",$.extend(c,{of:s})),s.removeData("resetOffset"));s.autocomplete("option","source",n);var p=s.data("filterValue")||s.parent().data("filterValue")||"";utils.IsEmpty(p)&&s.autocomplete("option","autoFocus",!1),setTimeout(function(){var e=p||"";s.autocomplete("option","minLength",0).autocomplete("search",e),s.autocomplete("widget").not(":hidden").length===0&&(e="",s.autocomplete("search",e)),s.autocomplete("close"),s.autocomplete("search",e),s.autocomplete("option","autoFocus",!0).autocomplete("option","minLength",1);var t=t=$(s.autocomplete("widget")).children();if(utils.IsTrue(SiebelApp.S_App.IsAutoOn())){var n,r;n=i.control.GetLovType()||i.Get("GetName")+":"+i.control.GetName();if(n&&SiebelApp.S_App.TranslationTable)for(var o=0,u=t.length;o<u;o++)r=SiebelApp.S_App.TranslationTable.LookupLIC(n,$(t[o]).text()),$(t[o]).attr({"data-lovtype":n,"data-licval":r})}for(var o=0,u=t.length;o<u;o++)$(t[o]).attr("aria-label","  ");s.focus();var a=s.autocomplete("widget");a&&a.position(s.autocomplete("option").position||{}),i.control.IsStaticBounded()&&SiebelAppFacade.DecisionManager.ResumeVKeyboard(s),s=null},0),s.autocomplete("widget").attr("role","combobox").children().find("a").attr("role","option")}}function c(e){if(this.Get("IsInQueryMode")){var t=this.Get("DDUserSelected");t&&e&&e.charAt(0)!=='"'&&e.charAt(e.length-1)!=='"'&&t.ctrl===this.control&&t.value===e&&(e='"'+e+'"',this.SetProperty("DDUserSelected",undefined))}return e}var e=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(t,SiebelAppFacade.FieldPW),t.prototype.ShowUI=function(){var e=this.GetEl(),t=n.call(this);if(e&&e.length){for(var r=0,i=e.length;r<i;r++){var s=(e.eq(r).prop("tagName")||""
).toLowerCase();!t&&s==="select"&&e.eq(r).replaceWith((e.eq(r).empty()[0].outerHTML||"").replace(/select/ig,"input")),t&&s==="input"&&e.eq(r).replaceWith((e.eq(r).empty()[0].outerHTML||"").replace(/input/ig,"select"))}e=this.GetEl()}!t&&e&&SiebelAppFacade.HTMLTemplateManager.EnhanceMarkup({type:this.control.GetUIType(),el:e,id:this.control.GetInputName(),className:"siebui-align-"+this.control.GetJustification()});if(e){var o=this.Get("GridFormContent")?this.control.GetSeq():"0";this.Helper("EventHelper").Manage(e,"keydown",{ctx:this,ctrl:this.control},function(e){return e.data.ctx.OnKey($(this),e,$(this).val())}).Manage(e,"keypress",{ctx:this},function(e){$(this).prop("readonly")&&e.stopImmediatePropagation()}).Manage(e,"blur",{ctx:this},function(e){this===document.activeElement&&e.stopImmediatePropagation()}),e.attr({maxlength:this.control.GetMaxSize()||256,tabindex:o}),Number(this.control.GetWidth())!==0&&e.css("width",Number(this.control.GetWidth())),Number(this.control.GetHeight())!==0&&e.css("height",Number(this.control.GetHeight())),t?e.attr({role:"listbox",title:this.control.GetDisplayName()}):e.attr("role","combobox");var u=SiebelApp.S_App.GetDirection();if(!t){e.autocomplete({source:[],appendTo:e.parents("#_sweview").length?"#_sweview":e.closest(".ui-dialog").length?"body":null,autoFocus:!0,delay:0}).bind("autocompletefocus",{ctx:this},function(t,n){if(SiebelAppFacade.DecisionManager.IsTouch()&&t.originalEvent&&t.originalEvent.originalEvent&&(t.originalEvent.originalEvent.type||"").indexOf("mouse")!==-1){if(e.data("pendingTouchEnd")){var r=t.data.ctx,i=n&&n.item?n.item.value:$(this).val();$(this).data("pendingSelect",i),r.Get("IsInQueryMode")&&r.SetProperty("DDUserSelected",{ctrl:r.control,value:i})}e.removeData("pendingTouchEnd")}$(this).attr("aria-activedescendant",$(this).autocomplete("widget").attr("aria-activedescendant"))}),SiebelAppFacade.DecisionManager.IsTouch()&&e.data("ui-autocomplete")&&e.data("ui-autocomplete").menu&&e.data("ui-autocomplete").menu.element.unbind("touchstart").bind("touchstart",function(){e.data("pendingTouchEnd",!0)});for(var a=0,i=e.length;a<i;a++)e.eq(a).autocomplete("option","position",{my:u?"right top":"left top",at:u?"right bottom":"left bottom",of:e.eq(a),collision:"flipfit flipfit"}),e.eq(a).autocomplete("widget").menu("instance")._isDivider=function(){return!1}}this.UpdateAccessibilityTag(e),this.InjectAutomationAttr(e);var f=this.control.GetWaterMarkValue();f&&e.attr("placeholder",f)}},t.prototype.InjectAutomationAttr=function(e){SiebelAppFacade.DropDownPW.superclass.InjectAutomationAttr.apply(this,arguments),e&&e.length&&this.control&&SiebelApp.Utils.IsTrue(SiebelApp.S_App.IsAutoOn())&&this.control.IsBoundedPick()&&e.attr("data-bounded",!0)},t.prototype.BindEvents=function(e){var t=this.GetEl(),a=this.control.GetHTMLAttr(),c=this.Helper("EventHelper");if(t&&c){c.Manage(t,"focus",{ctx:this},r).Manage(t,"blur",{ctx:this},i);var h=n.call(this);h?c.Manage(t,"change",{ctx:this},function(e){e.data.ctx.ExecuteMethod("LeaveField",e.data.ctx.control,$(this).val(),!0)}):c.Manage(t,"autocompleteselect",{ctx:this},s).Manage(t,"autocompleteopen",{ctx:this},o).Manage(t,"autocompleteclose",{ctx:this},u).Manage(t.next("span.siebui-icon-dropdown"),"mousedown",{ctx:this,prevElem:t},f).Manage(t.next("span.siebui-icon-dropdown"),"click",{ctx:this,prevElem:t},l)}},t.prototype.SetValue=function(e,t){var r=this.control.GetRadioGroupPropSet(),i=n.call(this),s=this.GetEl(t),o;if(i&&s&&s.length){s.html("");var u="";for(var a=0;a<r.GetChildCount();a++){var f=r.GetChild(a),l=f.GetProperty("DisplayName");l===e?u+='<option selected="selected" value = "'+HtmlEncode(l)+'">'+HtmlEncode(l)+" </option> <br>":(o=f.GetProperty("FieldValue"),u+='<option value = "'+HtmlEncode(l)+'">'+HtmlEncode(l)+" </option> <br>")}setTimeout(function(){s.attr("size",i)},0),s.html(u)}SiebelAppFacade.DropDownPW.superclass.SetValue.call(this,e,t)},t.prototype.HandleKey=function(e,t){var n=!1,r=SiebelJS.Dependency("SiebelApp.Constants").get("SWE_CTRL_COMBOBOX");switch(t.which){case $.ui.keyCode.UP:if(t.ctrlKey||t.altKey||t.shiftKey)e.autocomplete("option","source",[]);else if(this.control.GetUIType()==r&&e.attr("autocomplete")&&!e.autocomplete("widget").is(":visible"))return e.next("span.siebui-icon-dropdown").click(),!0;break;case $.ui.keyCode.DOWN:t.ctrlKey||t.altKey||t.shiftKey?e.autocomplete("option","source",[]):this.control.GetUIType()==r&&e.attr("autocomplete")&&!e.autocomplete("widget").is(":visible")&&(l.call(this,t),n=!0);break;case $.ui.keyCode.ENTER:e.autocomplete("widget").is(":visible")&&e.trigger("autocompleteselect");break;default:a.call(this,e,t)}return n},t.prototype.UpdatePickList=function(e){l.call(this,null,e)},t.prototype.OpenPopup=function(){var e=this.GetEl();if(e&&e.length>1){var t=e.index($(document.activeElement));e=t>=0?e.eq(t):$()}e.next(".siebui-icon-dropdown").click()},t}(),SiebelAppFacade.DropDownPW})),typeof SiebelAppFacade.FilePW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.FilePW"),define("siebel/filepw",["siebel/FieldPW"],function(){return SiebelAppFacade.FilePW=function(){function i(){SiebelAppFacade.FilePW.superclass.constructor.apply(this,arguments)}function s(){return this.control&&this.control.GetUIType()===t.get("SWE_PST_BUTTON_CTRL")&&this.control.GetMethodName()==="NewFileAttachment"}function o(e){var n=e.data.ctx?e.data.ctx:this,r=n.OnControlEvent(t.get("PHYEVENT_APPLET_FOCUS"));if(r===!1)return e.preventDefault(),e.stopPropagation(),!1}function u(n,r,i){if(r.files.length>0){var s=n.data.ctx;if(!s.Get("IsActive")&&!s.OnControlEvent(t.get("PHYEVENT_APPLET_FOCUS")))return!1;var o=$(this),u=s.ExecuteMethod("NewFileAttachment",null,i),a=t.get("SWE_PROP_SESSION_RANDOM_NUMBER")+"="+SiebelApp.S_App.GetSRN(),f=SiebelApp.S_App.GetPageURL()+t.get("SWE_ARG_START")+a;e.IsEmpty(SiebelApp.S_App.GetTabId())||(f+=t.get("SWE_ARG_DELIM")+t.get("SWE_PROP_BROWSER_TAB_ID")+t.get("SWE_ARG_EQUAL")+SiebelApp.S_App.GetTabId()),SiebelApp.S_App.uiStatus.Busy({target:SiebelApp
.S_App.GetTargetViewContainer(),mask:!0,timeOut:!1,message:""}),o.fileupload("option","remainingFilesToUpload",r.files.length),o.fileupload("option","formData",u),o.fileupload("option","url",f),o=null}}function a(n,r){var i=$(this),s=t.get("SWE_PROP_SESSION_RANDOM_NUMBER")+"="+SiebelApp.S_App.GetSRN(),o=SiebelApp.S_App.GetPageURL()+t.get("SWE_ARG_START")+s;e.IsEmpty(SiebelApp.S_App.GetTabId())||(o+=t.get("SWE_ARG_DELIM")+t.get("SWE_PROP_BROWSER_TAB_ID")+t.get("SWE_ARG_EQUAL")+SiebelApp.S_App.GetTabId()),i.fileupload("option","importfiles",r.files),i.fileupload("option","url",o),i=null}function f(t,n){var r=$(this),i=null,s=0;r.data("blueimp-fileupload")&&(s=r.fileupload("option","remainingFilesToUpload"),r.fileupload("option","remainingFilesToUpload",--s)),n.dataType==="iframe "?i=$(n.result).find("body").html():i=n.result,e.IsEmpty(i)||SiebelApp.S_App.ProcessResponse(i).done(function(){SiebelApp.S_App.ProcessError()}),s<=0&&(r.val(""),SiebelApp.S_App.uiStatus.IsBusy()&&SiebelApp.S_App.uiStatus.Free())}function l(e,t){var n=$(this),r=null,i=e.data.ctx,s=CCFMiscUtil_CreatePropSet(),o=n.fileupload("option","remainingFilesToUpload");n.fileupload("option","remainingFilesToUpload",--o),t.dataType==="iframe "?r=$(t.result).find("body").html():r=t.result;for(var u in t.formData)t.formData.hasOwnProperty(u)&&s.SetProperty(u,t.formData[u]);i.ExecuteMethod("ForceProcessResponse",t.formData.SWEMethod,s,r),SiebelApp.S_App.uiStatus.IsBusy()&&o<=0&&SiebelApp.S_App.uiStatus.Free();return}function c(e,t){SiebelApp.S_App.uiStatus.IsBusy()&&SiebelApp.S_App.uiStatus.Free()}var e=SiebelJS.Dependency("SiebelApp.Utils"),t=SiebelJS.Dependency("SiebelApp.Constants"),n=t.get("SWE_CTRL_FILE"),r=null;return SiebelJS.Extend(i,SiebelAppFacade.FieldPW),i.prototype.ShowUI=function(){var i=this.GetEl();if(i){if(SiebelApp.S_App.IsConfigMode()===!0)var o=this.PrepareConfigAttrInfo(i);var u=this.Get("GridFormContent")?this.control.GetSeq():"0",a=this.control.GetPMPropSet(),f=a?a.GetProperty("UploadTriggerControl"):!1,l=$("#s_"+this.Get("GetFullId")+"_div"),c=null,h={},p=null,d=' tabindex="'+u+'"',v=null,m=s.call(this),g=this.ExecuteMethod("CanInvokeMethod",this.control.GetMethodName());appURL=SiebelApp.S_App.GetPageURL(),h={type:"POST",replaceFileInput:!1,forceIframeTransport:!1,multipart:!0,url:appURL,dropZone:l,formData:{},scope:this},c=f&&this.control.GetName()!==t.get("SWE_FILE_NAME_STR")?this.control.GetInputName():t.get("SWE_FILE_NAME_STR"),r=this.control.GetInputName();if(m){c=t.get("SWE_FILE_NAME_STR"),r+=t.get("SWE_FILE_NAME_STR");var y=this.Get("GetAppletLabel"),b=this.Get("AppletType");y!==""&&(y&&b&&y.toUpperCase().indexOf(b.split(" ")[0].toUpperCase())==-1?y+=" "+b+":":y+=":"),d+=' name="'+c+'" title="'+y+this.control.GetDisplayName()+'" aria-label="'+y+this.control.GetDisplayName()+'"',SiebelAppFacade.DecisionManager.IsTouch()||(d+=" multiple"),g||(d+=' disabled="disabled"')}else d+=' name="'+c+'" ';var w=this.control.GetFileTypeFilterValue();e.IsEmpty(w)||(d+=' accept="'+w+'" '),p=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({id:r,type:n,attrs:d+(SiebelApp.S_App.IsConfigMode()===!0?o:"")}),m?(i.addClass("siebui-label-btn").addClass(g?"appletButton":"appletButtonDis").html(this.control.GetDisplayName()+p),v&&i.prepend('<a role="button">'+v+"</a>"),i=i.find("#"+r)):(i.replaceWith(p),i=this.GetEl()),h.fileInput=i,i.fileupload(h),this.InjectAutomationAttr(i),i=l=null}},i.prototype.BindEvents=function(e){var t=this.control.GetPMPropSet(),n=t?t.GetProperty("UploadTriggerControl"):!1,i=this.GetEl(),s=this.Helper("EventHelper"),h;if(i){i=i.find("#"+r),i=i.length===0?i.end():i,s.Manage(i,"click",{ctx:this},o);if(n)i.bind("fileuploadadd",{ctx:this},a).bind("fileuploaddrop",{ctx:this},a).bind("fileuploadfail",{ctx:this},c).bind("fileuploaddone",{ctx:this},l),i.fileupload("option","autoUpload",!1);else{i.bind("fileuploadchange",{ctx:this},function(t,n){return u.call(this,t,n,e)}).bind("fileuploaddrop",{ctx:this},function(t,n){return u.call(this,t,n,e)});var p={};p.fail=c,p.done=f,i.fileupload(p)}h=i.parent(),i.bind("focus",function(){h.addClass("siebui-file-focus")}),i.bind("blur",function(){h.removeClass("siebui-file-focus")}),i.closest(".ui-dialog").length&&i.one("touchstart",function(){$(this).blur()})}i=null},i.prototype.SetState=function(e,n,r){if(s.call(this)&&e===t.get("ENABLE")){var i=this.GetStateValue(e,r?r:0);if(i===undefined||i!==n){var o=this.GetEl(r);o&&(o.removeClass("appletButton appletButtonDis").addClass(n?"appletButton":"appletButtonDis"),o=o.children("input.siebui-ctrl-file"),o.removeAttr("disabled"),n||o.attr("disabled","disabled")),this.CacheState(e,{stateValue:n,index:r,methodName:this.control.GetMethodName()})}}else SiebelAppFacade.FilePW.superclass.SetState.apply(this,arguments)},i.prototype.SubmitFile=function(e){var t=this.GetEl(),n=!1;if(t){var r=t.fileupload("option","importfiles");if(r){var i=this.ExecuteMethod("NewFileAttachment",e,!0),r=t.fileupload("option","importfiles");t.fileupload("option","formData",i);var s={files:r};SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0,timeOut:!1,message:""}),t.fileupload("send",s),n=!0}}return n},i}(),SiebelApp.S_App.PluginBuilder.AttachPW(consts.get("SWE_PST_BUTTON_CTRL"),SiebelAppFacade.FilePW,function(e){return e&&e.GetMethodName()==="NewFileAttachment"}),SiebelAppFacade.FilePW})),typeof SiebelAppFacade.FlipSwitchPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.FlipSwitchPW"),define("siebel/flipswitchpw",["siebel/FieldPW"],function(){return SiebelAppFacade.FlipSwitchPW=function(){function i(){SiebelAppFacade.FlipSwitchPW.superclass.constructor.apply(this,arguments)}function s(e){var t=$(this);e.data.ctx.Get("IsInQueryMode")&&!t.data("switchEvent")&&t.siblings("select").prop("selectedIndex",-1),t.siblings("select").triggerHandler(e),t=null}function o(e){var t=e.data.ctx;document.activeElement!==this&&$(this).focus(),e.type==="touchstart"&&e.stopPropagation()}function u(t){var n=t.data.ctx;n.OnControlEvent
(e.get("PHYEVENT_CONTROL_FOCUS"),n.control,$(this).data("select").val())}function a(t){var n=t.data.ctx;!n.Get("IsInQueryMode")||$(this).data("switchEvent")?n.OnControlEvent(e.get("PHYEVENT_CONTROL_BLUR"),n.control,$(this).data("select").val()):$(this).data("select").prop("selectedIndex",-1)}function f(e,t){var n=e.data.ctx,r=$(this),i=r.data("controls");document.activeElement!==this&&$(this).focus(),r.hasClass("disabled")?setTimeout(function(){i[t==="on"?"off":"on"]({silent:!0})},1):(r.data("select").val(t==="on"?"Y":"N"),r.attr("aria-checked",t==="on"?"true":"false")),SiebelApp.Utils.IsTrue(SiebelApp.S_App.IsAutoOn())&&SiebelApp.EventManager.fireEvent("CustomControlEvent:Change",e)}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=SiebelJS.Dependency("SiebelApp.S_App.LocaleObject"),n=t.GetLocalString("IDS_CLIENT_YES"),r=t.GetLocalString("IDS_CLIENT_NO");return SiebelJS.Extend(i,SiebelAppFacade.FieldPW),i.prototype.ShowUI=function(e){var i=this.GetEl(),s="";if(i){var o=this.Get("SwitchOnOffLabels");o?(n=o[0],r=o[1]):(n=t.GetLocalString("IDS_CLIENT_YES"),r=t.GetLocalString("IDS_CLIENT_NO"));if(SiebelApp.S_App.IsConfigMode()===!0)var u=this.PrepareConfigAttrInfo(el);i.each(function(){var e=$(this),t=e.prop("checked");s=e.eq(0).clone().html("").wrap("<p></p>").parent().html()||"",s.indexOf("input")>=0&&(s=s.replace(/input/ig,"select").replace(/type="checkbox"/ig,""),e.replaceWith($(s).addClass("siebui-ctrl-flipswitch").removeAttr("style").append(SiebelApp.S_App.IsConfigMode()===!0?u:"").append("<option value='Y' "+(t?"selected='selected'":"")+">"+n+"</option>"+"<option value='N' "+(t?"":"selected='selected'")+">"+r+"</option>")))});var a=$(s).attr("aria-label");this.GetEl().switchify().data("switch").attr({tabindex:this.Get("GridFormContent")?this.control.GetSeq():"0","aria-label":a,role:"switch"}),this.InjectAutomationAttr(this.GetEl())}},i.prototype.InjectAutomationAttr=function(e){SiebelAppFacade.FlipSwitchPW.superclass.InjectAutomationAttr.apply(this,arguments),e&&e.length&&SiebelApp.Utils.IsTrue(SiebelApp.S_App.IsAutoOn())&&e.next().attr("data-autom","prev")},i.prototype.BindEvents=function(){var e=this.GetEl(),t=this.Helper("EventHelper");if(e&&e.length)for(var n=0,r=e.length;n<r;n++)e.eq(n).data("switch").bind("focus",{ctx:this},u).bind("switch:slide",{ctx:this},f).bind("blur",{ctx:this},a).bind("touchstart",{ctx:this},o).bind("click",{ctx:this},o).bind("keydown",{ctx:this},s);SiebelAppFacade.FlipSwitchPW.superclass.BindEvents.call(this)},i.prototype.GetValue=function(e){return this.Get("IsInQueryMode")?this.ExecuteMethod("GetFormattedFieldValue",this.control):(this.GetEl(e)||$()).val()},i.prototype.SetValue=function(t,n){var r=this.GetEl(n);if(r&&r.length){var i=r.data("switch"),s=i.data("controls");t==="Y"?s.on({silent:!0}):s.off({silent:!0}),this.Get("IsInQueryMode")&&t===""&&r.prop("selectedIndex",-1),r.val(t),i.attr("aria-checked",t==="Y"?"true":"false")}this.CacheState(e.get("CTRLVALUE"),{stateValue:t,index:n})},i.prototype.SetState=function(t,n,r){var i=this.GetStateValue(t,r?r:0);if(i===undefined||i!==n){var s=this.GetEl(r);n=n===undefined?!0:n;if(s&&s.length){var o=s.data("switch");switch(t){case e.get("EDITABLE"):case e.get("ENABLE"):s.attr("disabled",!n),n?o.removeClass("disabled"):o.addClass("disabled");break;case e.get("SHOW"):n?o.show():o.hide();break;case e.get("FOCUS"):n?o.focus():o.blur()}}}},i}(),SiebelApp.S_App.PluginBuilder.AttachPW(consts.get("SWE_CTRL_CHECKBOX"),SiebelAppFacade.FlipSwitchPW,function(e){return SiebelAppFacade.DecisionManager.IsTabOrPhone()||e.GetHTMLAttr()==="flipswitch"}),SiebelAppFacade.FlipSwitchPW})),typeof SiebelAppFacade.LinkPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.LinkPW"),define("siebel/linkpw",["siebel/FieldPW"],function(){return SiebelAppFacade.LinkPW=function(){function n(){SiebelAppFacade.LinkPW.superclass.constructor.apply(this,arguments)}function r(t){t.stopPropagation();if($(this).hasClass("siebui-link-icon-d")||$(this).hasClass("siebui-ctrl-link-disabled"))return;SiebelApp.S_App.uiStatus.Busy({});var n={};n.async=!0,n.cb=function(){var t=Array.prototype.slice.call(arguments),n=t?t[t.length-1]:"";n!==e.get("SWE_RPC_PROP_NEW_LAYOUT")&&n!==e.get("SWE_RPC_PROP_REFRESH_LAYOUT")&&n!==e.get("SWE_RPC_PROP_NEW_PAGE")&&SiebelApp.S_App.uiStatus.Free()};var r=t.data.ctx.control.GetMethodPropSet(),i=r.Clone();t.data.ctx.OnControlEvent(e.get("PHYEVENT_INVOKE_CONTROL"),t.data.ctx.control.GetMethodName(),i,n)}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=SiebelJS.Dependency("SiebelApp.Utils");return urlcontrol=e.get("SWE_CTRL_URL"),email=e.get("SWE_CTRL_MAILTO"),label=e.get("SWE_CTRL_LABEL"),link=e.get("SWE_CTRL_LINK"),SiebelJS.Extend(n,SiebelAppFacade.FieldPW),n.prototype.ShowUI=function(){var e=this.GetEl(),t,n,r="",i,s=this.control.GetUIType(),o;if(e){s===link?(n=this.ExecuteMethod("CanInvokeMethod",this.control.GetMethodName()),t=n?this.control.GetEnabledBmp():this.control.GetDisabledBmp()||this.control.GetEnabledBmp(),r=t?n?"siebui-link-icon-e ":"siebui-link-icon-d ":"",t=t?t:this.control.GetDisplayName(),t=t&&t.replace?t.replace(/\\\"/g,'"'):t):s===label&&(this.control.GetMethodName()?t=this.control.GetDisplayName():SiebelApp.S_App.IsRwd()&&(o=this.control.GetDisplayName()||this.control.GetValue())),SiebelAppFacade.HTMLTemplateManager.EnhanceMarkup({type:s,el:e,id:this.control.GetInputName(),className:r+"siebui-align-"+this.control.GetJustification(),value:t}),i=this.Get("GridFormContent")?this.control.GetSeq():"0",o&&e.text(o),s!==link&&s!==label&&e.attr({maxlength:this.control.GetMaxSize()||256,tabindex:i}),s===link?t?e.children("a").attr("tabindex",n?i:"-1"):e.children("a").attr("tabindex",this.control.GetSeq()):s===label&&this.control.GetMethodName()&&e.children("a").attr("tabindex",this.control.GetSeq());var u=e.children("a").find("span");if(u){u=$(u);var a=u.find("img").eq(0),f=a.length&&(a.attr("alt")||a.attr("title"));appletType=this.Get("AppletType"),f?u.attr("title",f):!1,f&&f.split(":").length==2&&(f=f.split(":"
)[0]+" "+appletType+":"+f.split(":")[1],u.closest("span").attr({title:f,"aria-label":f}),$(a).attr("alt",f))}this.InjectAutomationAttr(e)}},n.prototype.BindEvents=function(){var e=this.GetEl(),t=this.Helper("EventHelper");if(e&&t){switch(this.control.GetUIType()){case link:case label:this.control.GetMethodName()&&t.Manage(e,"click",{ctx:this},r)}SiebelAppFacade.LinkPW.superclass.BindEvents.call(this)}},n.prototype.SetState=function(t,n,r){var i=this.GetEl(r);n=n===undefined?!0:n;if(i&&i.length)if(t===e.get("ENABLE")){var s=this.control.GetEnabledBmp(),o=this.control.GetDisabledBmp()||s;if(s||o){var u=n?s:o;if(u){u=$(u);var a=u.find("img").eq(0),f=a.length&&(a.attr("alt")||a.attr("title")),l=n?this.control.GetSeq()||0:"-1";f?u.attr("title",f):!1,appletType=this.Get("AppletType"),f&&f.split(":").length==2&&(f=f.split(":")[0]+" "+appletType+":"+f.split(":")[1],u.closest("span").attr({title:f,"aria-label":f}),u.attr("title",f)),i.removeClass("siebui-link-icon-e siebui-link-icon-d").addClass(n?"siebui-link-icon-e":"siebui-link-icon-d").find("a").attr({tabindex:l,"data-seq":l}).html(u)}this.CacheState(t,{stateValue:n,index:r,methodName:this.control.GetMethodName()})}}else SiebelAppFacade.LinkPW.superclass.SetState.apply(this,arguments);return},n.prototype.SetValue=function(n,r){var i=this.ExecuteMethod("CanUpdate",this.control.GetName()),s="",o=t.IsTrue(this.control.IsEncode())?HtmlEncode(n):n,u=HtmlEncode(n),a=this.control.GetScriptProperty("Visible"),f=this.GetIconMap(n),l=this.GetEl(r),c,h=!0;if(l){switch(this.control.GetUIType()){case e.get("SWE_CTRL_URL"):typeof n=="string"&&o.indexOf("http://")===-1&&o.indexOf("https://")===-1&&(o=window.location.protocol+"//"+o),f&&(f="<a href='"+o+"' target='_blank' >"+f+"</a>");var p=this.control.GetWidth();s='<a class="siebui-ctrl-url-ro" id="'+this.control.GetInputName()+'_url_link"'+(p&&p!=="0"?' style="width: '+p+"px":"")+"\" href='"+o+"' target='_blank' >"+o+"</a>";break;case e.get("SWE_CTRL_MAILTO"):f&&(f='<a class="siebui-ctrl-mailto-ro" href="mailto:'+u+'">'+f+"</a>");var p=l.outerWidth();s='<a class="siebui-ctrl-mailto-ro" id="'+this.control.GetInputName()+'_mailto_link" href="mailto:'+u+'"'+(p&&p!=="0"?' style="width: '+p+"px":"")+'">'+u+"</a>";break;default:}c=this.control.GetInputName()+"_span",f?(l.nextAll('[id^="'+this.control.GetInputName()+'"]').not(".siebui-icon-mailto").remove(),l.nextAll("#"+c).length===0&&l.nextAll('[id^="'+this.control.GetInputName()+'"]').addBack().last().after('<span id="'+c+'" ><span>'),c=l.nextAll("#"+c),t.DecideVisibility(c.html(f),a),l.val(n).styleHide(),l.nextAll(".siebui-icon-mailto").addClass("siebui-invisible"),h=a):(!i&&!t.IsEmpty(n)&&s?(l.nextAll('[id^="'+this.control.GetInputName()+'"]').not(".siebui-icon-mailto").remove(),l.after(s),l.val(n).styleHide()):(l.nextAll('[id^="'+this.control.GetInputName()+'"]').not(".siebui-icon-mailto").remove(),t.DecideVisibility(l.val(n),a),h=a),(this.control.GetUIType()===link||this.control.GetUIType()===label)&&this.control.GetMethodName()&&l.removeClass("siebui-ctrl-link-disabled siebui-ctrl-link").addClass(this.ExecuteMethod("CanInvokeMethod",this.control.GetMethodName())?"siebui-ctrl-link":"siebui-ctrl-link-disabled"),l.nextAll(".siebui-icon-mailto").removeClass("siebui-invisible"),t.DecideVisibility(l.nextAll(".siebui-icon-mailto"),a),c=l.nextAll("#"+c),c.styleHide()),this.control.GetUIType()===e.get("SWE_CTRL_MAILTO")&&l.nextAll(".siebui-icon-mailto").eq("0").attr({href:l.val()?"mailto:"+l.val():"mailto:",id:this.control.GetInputName()+"_icon"})}this.CacheState(e.get("SHOW"),{stateValue:h,index:r}),this.CacheState(e.get("CTRLVALUE"),{stateValue:n,index:r})},n}(),SiebelAppFacade.LinkPW})),typeof SiebelAppFacade.PlainTextPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.PlainTextPW"),define("siebel/plaintxtpw",["siebel/FieldPW"],function(){return SiebelAppFacade.PlainTextPW=function(){function n(){SiebelAppFacade.PlainTextPW.superclass.constructor.apply(this,arguments)}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=SiebelJS.Dependency("SiebelApp.Utils");return SiebelJS.Extend(n,SiebelAppFacade.FieldPW),n.prototype.ShowUI=function(){var e=this.GetEl(),n,r,i;if(e){n=this.control.GetHTMLAttr().split(";");var s=n.length;for(var o=0;o<s;o++)n[o]&&(r=n[o].replace(/"/g,""),i=r.split("="),!t.IsEmpty(i)&&i.length===2&&(name=i[0],value=i[1],attrvalue=e.attr(name),t.IsEmpty(attrvalue)?e.attr(name,value):e.attr(name,attrvalue+" "+value)));SiebelAppFacade.HTMLTemplateManager.EnhanceMarkup({type:this.control.GetUIType(),el:e,id:this.control.GetInputName(),className:"siebui-input-align-"+this.control.GetJustification()});if(t.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){var u=this.control.GetName()+"_Label_"+this.control.GetApplet().GetId();u=u.trim().replace(/\s+/g,"_");var a=$.escapeSelector(u);u=$("#"+a).length>0?u:"",e.attr({tabindex:this.Get("GridFormContent")?this.control.GetSeq():"0",role:"label","aria-labelledby":u+"  "+e.find("Label").attr("id")})}this.InjectAutomationAttr(e)}},n.prototype.SetValue=function(n,r){var i=this.GetEl(r),s=this.GetIconMap(n),o=t.IsTrue(this.control.IsEncode())?HtmlEncode(n):n,u=this.control.GetScriptProperty("Visible"),a;i&&(t.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())&&(i=i.children("#"+this.control.GetInputName()+"_Label")),a=this.control.GetInputName()+"_span",s?(i.nextAll().remove(),i.nextAll("#"+a).length===0&&i.nextAll('[id^="'+this.control.GetInputName()+'"]').addBack().last().after('<span id="'+a+'" ><span>'),a=i.nextAll("#"+a),t.DecideVisibility(a.html(s),u),i.html(o).styleHide()):(i.nextAll().remove(),t.DecideVisibility(i.html(o),u),a=i.nextAll("#"+a),a.styleHide())),this.CacheState(e.get("SHOW"),{stateValue:u,index:r}),this.CacheState(e.get("CTRLVALUE"),{stateValue:n,index:r}),this.CacheState("CanNavigate",{stateValue:!1,index:r})},n}(),SiebelAppFacade.PlainTextPW})),typeof SiebelAppFacade.ImgCtrlPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.ImgCtrlPW"),define("siebel/imgctrlpw",["siebel/FieldPW"],function(
){return SiebelAppFacade.ImgCtrlPW=function(){function t(){SiebelAppFacade.ImgCtrlPW.superclass.constructor.apply(this,arguments)}var e=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(t,SiebelAppFacade.FieldPW),t.prototype.ShowUI=function(){var e=this.GetEl();e&&(e.addClass("siebui-align-"+this.control.GetJustification()),this.InjectAutomationAttr(e))},t.prototype.BindEvents=function(){},t.prototype.SetValue=function(t,n){var r=this.GetEl(n),i="",s=this.Get("GridFormContent")?this.control.GetSeq():"0";if(r){var o=t.toLowerCase(),u="";o.indexOf("<img")>=0?(i=t,u=$(i).children("img").attr("alt")):/siebui/.test(o)?i='<i class="'+t+'"></i>':(i='<img src="'+t+'" alt="'+this.control.GetDisplayName()+'" title="'+this.control.GetDisplayName()+'"></img>',u=this.control.GetDisplayName());var a="";this.ExecuteMethod("CanNavigate",this.control.GetName())&&(a="id='"+this.control.GetInputName()+"_mb'   class='siebui-ctrl-drilldown'  name='"+this.control.GetName()+"' "),utils.IsEmpty(t)?r.html(""):r.html("<a "+a+'aria-label="'+u+'" role="img" tabindex="0" data-seq="'+s+'">'+i+"<a>")}this.CacheState(e.get("CTRLVALUE"),{stateValue:t,index:n})},t}(),SiebelAppFacade.ImgCtrlPW})),typeof SiebelAppFacade.RTCEditorPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.RTCEditorPW"),define("siebel/rtceditorpw",["siebel/FieldPW"],function(){return SiebelAppFacade.RTCEditorPW=function(){function t(e){SiebelAppFacade.RTCEditorPW.superclass.constructor.call(this,e)}function n(e,t){var n=$(t.container.$).find(".siebui-rtc-count"),r=t.getData().length,i;n.length&&(i=r+"/"+e.GetMaxSize(),n.html(i),r>e.GetMaxSize()?n.addClass("siebui-rtc-errormsg"):n.hasClass("siebui-rtc-errormsg")&&n.removeClass("siebui-rtc-errormsg"))}function r(t,n){if(this.IsInLeaveField(this.GetEl()))return;this.Get("IsInQueryMode")&&t.GetCaseSensitive()&&n===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK")&&(n=""),this.OnControlEvent(e.get("PHYEVENT_CONTROL_BLUR"),t,n);if(this.Get("IsInQueryMode")&&t.GetCaseSensitive()&&n===""){n=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK");var r=this.GetEl();r.ckeditor(function(e){var t=this;setTimeout(function(e){t.setData(e)},2)})}}function i(t,n){if(this.Get("IsInQueryMode")&&t.GetCaseSensitive()&&n===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK")){n="";var r=this.GetEl();r.ckeditor(function(e){var t=this;setTimeout(function(e){t.setData(e)},2)})}this.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"),t,n)}var e=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(t,SiebelAppFacade.FieldPW),t.prototype.Init=function(){CKEDITOR.focusManager._.blurDelay=0;var e=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_RTC_GREETING_TEMPLATE"),t=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_RTC_BODY_TEMPLATE"),n=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_RTC_CLOSING_TEMPLATE");CKEDITOR.addCss("div.siebui-emr-tmpl {border: 1px dotted white;}"),CKEDITOR.addCss("div.siebui-emr-tmpl:hover{border: 1px dotted #1474bf;position: relative;}"),CKEDITOR.addCss("div.siebui-emr-tmpl:before{position:absolute; top:0; right:0; padding:1px 3px; font-size:12px; color:white; background:#1474bf;}"),CKEDITOR.addCss('div.siebui-emr-greeting:hover:before {content: "'+e+'";}'),CKEDITOR.addCss('div.siebui-emr-body:hover:before {content: "'+t+'";}'),CKEDITOR.addCss('div.siebui-emr-closing:hover:before {content: "'+n+'";}'),CKEDITOR.addCss("body {word-break: normal;}")},t.prototype.ShowUI=function(){var e=this.GetEl();if(e){e.ckeditor(function(){},{skin:"moono-lisa",width:Number(this.control.GetWidth()),height:Number(this.control.GetHeight()),startupFocus:!1,resize_enabled:!0,contentsLangDirection:SiebelApp.S_App.GetDirection(),autoParagraph:!1,ignoreEmptyParagraph:!0,disableNativeSpellChecker:!1,pasteFromWordRemoveFontStyles:!1,pasteFromWordRemoveStyles:!1,allowedContent:!0,extraAllowedContent:"div(siebui-emr-greeting,siebui-emr-body,siebui-emr-closing,siebui-emr-tmpl)"});var t=this.Get("GridFormContent")?this.control.GetSeq():"0";e.attr("tabindex",t),this.InjectAutomationAttr(e)}},t.prototype.BindEvents=function(){var e=this.GetEl();if(e){var t=e.ckeditorGet();t.config.protectedSource.push(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK"));var s=this;t.on("blur",function(e){r.call(s,s.control,this.getData())}),t.on("focus",function(e){var t=this;setTimeout(function(){e.editor.focusManager.hasFocus&&i.call(s,s.control,t.getData())},100)}),t.on("contentDom",function(e){if(s.control.GetMaxSize()){s.control.GetApplet()&&s.control.GetApplet().IsInQueryMode()?$(this.container.$).find(".siebui-rtc-count").hide():$(this.container.$).find(".siebui-rtc-count").show();var t=e.editor.editable();t.attachListener(t,"keyup",function(){var t=$(e.editor.document.$).find("div.siebui-emr-tmpl");t.each(function(e){$(this).text().length==0&&$(this).find("img").length==0&&$(this).remove()}),n.call(s,s.control,e.editor)})}}),t.on("instanceReady",function(e){var r=CKEDITOR.dtd;for(var i in CKEDITOR.tools.extend({},r.$nonBodyContent,r.$block,r.$listItem,r.$tableContent))this.dataProcessor.writer.setRules(i,{indent:!1,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1});var o=$(e.editor.container.$).find(".cke_inner").parent(),u=s.Get("GridFormContent")?s.control.GetSeq():"0";o.attr("data-seq",u),o.attr("tabindex","0"),s.control.GetMaxSize()&&($(e.editor.container.$).find(".cke_bottom").prepend('<div class="siebui-rtc-count"></div>'),t.on("afterCommandExec",function(e){n.call(s,s.control,this)}),t.on("saveSnapshot",function(e){n.call(s,s.control,this)}),t.on("updateData",function(e){var t=$(this.document.$).find("div.siebui-emr-tmpl"),r=this.readOnly;r&&t.removeClass(),n.call(s,s.control,this)}))}),t.on("key",function(e){var n=t.name,r=$("#cke_"+n);if(e.data.keyCode===$.ui.keyCode.TAB||e.data.keyCode===CKEDITOR.SHIFT+$.ui.keyCode.TAB){var i=e.data.domEvent.$;i.data={ctrl:s.control};var o="";s.OnKey(r,i,o)}})}},t.prototype.SetState=
function(t,n){var r=this.GetEl();n=n===undefined?!0:n,r&&(t===e.get("EDITABLE")?CKEDITOR.instances[this.control.GetInputName()]&&(CKEDITOR.instances[this.control.GetInputName()].instanceReady===!0?CKEDITOR.instances[this.control.GetInputName()].setReadOnly(!n):CKEDITOR.instances[this.control.GetInputName()].on("instanceReady",function(e){var t=e.editor;t.setReadOnly(!n)})):SiebelAppFacade.RTCEditorPW.superclass.SetState.apply(this,arguments))},t.prototype.SetValue=function(e,n){var r=this.GetEl(n);r&&(r.data("pendingAction")?r.data("nextAction",[this,e,n]):r.data("pendingAction","updateData").ckeditor(function(){var n=e,i=$(this.element.$),s=this;if(this.getData()!==n)s.setData(n,function(){this.fire("updateData");var e=i.data("pendingAction");i.removeData("pendingAction");if(e==="destroy")r.ckeditor.destroy(!0),i.removeData("nextAction");else{var n=i.data("nextAction");n&&(i.removeData("nextAction"),t.prototype.SetValue.call(n[0],n[1],n[2]))}});else{var o=i.data("pendingAction");i.removeData("pendingAction");if(o==="destroy")r.ckeditor.destroy(!0),i.removeData("nextAction");else{var u=i.data("nextAction");u&&(i.removeData("nextAction"),t.prototype.SetValue.call(u[0],u[1],u[2]))}}}))},t}(),SiebelAppFacade.RTCEditorPW})),typeof SiebelAppFacade.RatingPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.RatingPW"),define("siebel/ratingpw",["siebel/FieldPW","3rdParty/jquery.raty.min.js"],function(){return SiebelAppFacade.RatingPW=function(){function t(){SiebelAppFacade.RatingPW.superclass.constructor.apply(this,arguments)}function n(t){var n=$(this).attr("title"),r=t.data.ctx;r.OnControlEvent(e.get("PHYEVENT_CONTROL_BLUR"),r.control,n)}function r(t){var n=t.data.ctx,r=$(this).attr("title");n.OnControlEvent(e.get("PHYEVENT_CONTROL_FOCUS"),n.control,r)}function i(t){var n=t.data.ctx,r=$(this).attr("title");n.OnControlEvent(e.get("PHYEVENT_CONTROL_BLUR"),n.control,r)}var e=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(t,SiebelAppFacade.FieldPW),t.prototype.ShowUI=function(){var t,n=this.control.GetFieldName();if(!this.Get(n)){var r=this.Get("GetActiveControl");this.OnControlEvent(e.get("PHYEVENT_INVOKE_COMBO"),this.control),this.ExecuteMethod("SetActiveControl",r)}if(this.GetEl()){var i=this.Get(n);if(i){var s=i.length;for(var o=0,t=this.GetEl().length;o<t;o++)this.GetEl().eq(o).next("div.siebui-ctrl-rating").length===0&&this.GetEl().eq(o).after("<div class='siebui-ctrl-rating' tabindex=\"-1\"></div>").addClass("forcehide").next("div.siebui-ctrl-rating").raty({path:"images",hints:i,number:i.length})}}this.GetEl()&&this.InjectAutomationAttr(this.GetEl())},t.prototype.BindEvents=function(e){var t=this.GetEl(),s=this.Helper("EventHelper");if(t)var o=t.nextAll("div.siebui-ctrl-rating");t&&s&&s.Manage(o,"focus",{ctx:this},r,"img ").Manage(o,"blur",{ctx:this},i,"img ").Manage(o,"click",{ctx:this},n,"img ")},t.prototype.UpdatePickList=function(e){var t,n=this.control.GetFieldName();this.SetProperty(n,e);if(this.GetEl()){var r=this.Get(n);if(r){var i=r.length;for(var s=0,t=this.GetEl().length;s<t;s++)this.GetEl().eq(s).next("div.siebui-ctrl-rating").length===0&&this.GetEl().eq(s).after("<div class='siebui-ctrl-rating' tabindex=\"-1\"></div>").addClass("forcehide").next("div.siebui-ctrl-rating").raty({path:"images",hints:r,number:r.length})}}},t.prototype.SetValue=function(e,t){var n=this.control.GetFieldName(),r=this.Get(n),i=$(".siebui-ctrl-rating img").length,s=SiebelApp.S_App.IsAutoOn();if(r){var o=r.length,u=r.indexOf(e)+1,a=this.GetEl(t).next("div.siebui-ctrl-rating");a.data("raty").score(u)}if(s&&i>0){$(".siebui-ctrl-rating img").attr("rn",""),$(".siebui-ctrl-rating img").attr("ot",""),$(".siebui-ctrl-rating img").attr("un","");for(var f=0;f<i;f++){var l=$(".siebui-ctrl-rating").eq(f).children(0).length;for(var c=0;c<l-1;c++)$(".siebui-ctrl-rating").eq(f).children(0).eq(c)[0].attributes.rn.value=$(".siebui-ctrl-rating").eq(f).children(0).eq(c)[0].title,$(".siebui-ctrl-rating").eq(f).children(0).eq(c)[0].attributes.ot.value="Image",$(".siebui-ctrl-rating").eq(f).children(0).eq(c)[0].attributes.un.value=$(".siebui-ctrl-rating").eq(f).children(0).eq(c)[0].title}}},t}(),SiebelApp.S_App.PluginBuilder.AttachPW(consts.get("SWE_CTRL_COMBOBOX"),SiebelAppFacade.RatingPW,function(e){return e&&e.GetUIType()==="JComboBox"&&e.GetHTMLAttr()==="Rating"}),SiebelAppFacade.RatingPW}));if(typeof SiebelAppFacade.SignPW=="undefined"){SiebelJS.Namespace("SiebelAppFacade.SignPW");var ink=SiebelJS.Dependency("SiebelApp.Constants").get("SWE_CTRL_INKDATA");define("siebel/signpw",["siebel/FieldPW","3rdParty/jquery.signaturepad.min.js"],function(){return SiebelAppFacade.SignPW=function(){function n(){SiebelAppFacade.SignPW.superclass.constructor.apply(this,arguments)}function r(e){var n=e.data.ctx;n.ExecuteMethod("SetActiveControl",n.control),$("#sign_"+n.control.GetInputName()).signaturePad().getSignatureString()!=="[]"?n.OnControlEvent(t.get("PHYEVENT_CONTROL_BLUR"),n.control,$("#sign_"+n.control.GetInputName()).signaturePad().getSignatureString()):n.OnControlEvent(t.get("PHYEVENT_CONTROL_BLUR"),n.control,$("#"+n.control.GetInputName()).val())}var e=SiebelJS.Dependency("SiebelApp.Utils"),t=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(n,SiebelAppFacade.FieldPW),n.prototype.ShowUI=function(){var t=this.control.GetInputName(),n=$("[name="+t+"]"),r=n.data("value"),i=n.parent();if(n&&SiebelApp.S_App.IsConfigMode()===!0)var s=this.PrepareConfigAttrInfo(el);n.remove();var o="<div id =sign_"+t+' name ="'+t+'" class = "siebui-ctrl-sigpad"'+(SiebelApp.S_App.IsConfigMode()===!0?s:"")+"><canvas id = sign_canvas_"+t+' class="siebui-ctrl-pad" width="632" height="144"></canvas><p id=siebui-ctrl'+t+'-clearButton style="display:none;"></p><input id ='+t+"></input></div>";i.append(o),$("#"+t).addClass("forcehide");var u=$("#sign_"+t);if(this.ExecuteMethod("CanUpdate",this.control.GetName()))u.signaturePad({output:$("#"+t),clear:"#siebui-ctrl"+t+"-clearButton",lineTop:100,drawOnly:!0});else try{r&&e.IsEmpty
(r)&&(r=this.ExecuteMethod("GetFieldValue",this.control)),$.type(r)==="array"||r===""||r===undefined||r.match("Cancelled*")||!r.match("base64*")?u.signaturePad({displayOnly:!0,lineTop:100,drawOnly:!0}).regenerate(r):(u.find("canvas").remove(),u.append('<img style="float:left" src= "data:image/jpg;'+r+'">'))}catch(a){a.name==="SyntaxError"?r===""||r.match("Cancelled*")?u.signaturePad({displayOnly:!0,lineTop:100,drawOnly:!0}).regenerate("[]"):u.empty().append("<span>"+SiebelApp.S_App.LocaleObject.GetLocalString("IDS_WRONG_FORMAT")+"</span>"):SiebelJS.Log(a)}this.InjectAutomationAttr($("[name='"+t+"']"),this.control),n=i=null},n.prototype.GetValue=function(e){return this.GetEl(e).signaturePad().getSignatureString()||""},n.prototype.SetValue=function(t,n){n=n||0;var r=this.GetEl(n),i=this.control.GetInputName(),s=this.control.GetApplet().GetBusComp();try{if(t===""){t=this.ExecuteMethod("GetFieldValue",this.control);var o=this.control.GetFieldName();t===""&&!e.IsEmpty(o)&&(r.signaturePad().clearCanvas(),s&&(s.IsInsertPending()||s.IsInQueryState())&&r.signaturePad({output:$("#"+i),clear:"#siebui-ctrl"+i+"-clearButton",lineTop:100,drawOnly:!0}))}else this.ExecuteMethod("CanUpdate",this.control.GetName())?$.type(t)==="array"||t===""||t==="undefined"||t.match("Cancelled*")||!t.match("base64*")?r.signaturePad({displayOnly:!1,lineTop:100,drawOnly:!0}).regenerate(t):(r.find("canvas").remove(),$(".siebui-migrated-sign",r).remove(),r.append('<img style="float:left" class="siebui-migrated-sign" src= "data:image/jpg;'+t+'">')):$.type(t)==="array"||t===""||t==="undefined"||t.match("Cancelled*")||!t.match("base64*")?r.signaturePad({displayOnly:!0,lineTop:100,drawOnly:!0}).regenerate(t):(r.find("canvas").remove(),$(".siebui-migrated-sign",r).remove(),r.append('<img style="float:left" class="siebui-migrated-sign" src= "data:image/jpg;'+t+'">'))}catch(u){u.name==="SyntaxError"?t===""||t.match("Cancelled*")?r.signaturePad({displayOnly:!0,lineTop:100,drawOnly:!0}).regenerate("[]"):r.empty().append("<span>"+SiebelApp.S_App.LocaleObject.GetLocalString("IDS_WRONG_FORMAT")+"</span>"):SiebelJS.Log(u)}},n.prototype.BindEvents=function(e){var t=this.GetEl(),n=this.Helper("EventHelper"),i=t.find("canvas");t&&n&&n.Manage(i,"mouseup touchend",{ctx:this},r)},n}(),SiebelApp.S_App.PluginBuilder.AttachPW(ink,SiebelAppFacade.SignPW,function(e){return e&&e.GetUIType()===ink}),SiebelAppFacade.SignPW})}typeof SiebelAppFacade.FunnelChart=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.FunnelChart"),define("siebel/funnelchart",["3rdParty/d3.min.js"],function(){return SiebelAppFacade.FunnelChart=function(){function r(t){var n=parseInt(this.width,10),r=parseInt(this.height,10),i=t.width(),s=t.height();i*s===0||s<e?$(t).height(this.height):(this._oldWidth=this.width,this._oldHeight=this.height,this.width=i,this.height=s,this._slope=Number(parseFloat(2*this.height/(this.width-this.bottomPct*this.width)).toFixed(2)),this._totalArea=Number(parseFloat((this.width+this.bottomPct*this.width)*this.height/2).toFixed(2)))}var e=300,t=600,n=1/3;return FunnelChart=function(r){SiebelAppFacade.FunnelChart.superclass.constructor.apply(this,arguments),this.data=r.data,this.totalEngagement=0,this.legendColors=r.legendColors,this.legendText=r.legendText,this.label=r.label,this.colors=r.colors,this.appTitle=r.appTitle,this.title=r.title,this.revenue=r.revenue,this.quota=r.quota,this.OutOfString=r.OutOfString,this.catname=r.catname,this.type=r.type||"2dFunnel";for(var i=0,s=this.data.length;i<s;i++)this.totalEngagement+=this.data[i][1];this.width=typeof r.width!="undefined"?r.width:t,this.height=typeof r.height!="undefined"?r.height:e,this.bottomPct=typeof r.bottomPct!="undefined"?r.bottomPct:n,this._slope=Number(parseFloat(2*this.height/(this.width-this.bottomPct*this.width)).toFixed(2)),this._totalArea=Number(parseFloat((this.width+this.bottomPct*this.width)*this.height/2).toFixed(2)),this.fillClassName="siebui-barchart-bar",this.GetType=function(){return"funnel"}},SiebelJS.Extend(FunnelChart,SiebelAppFacade.BaseChart),FunnelChart.prototype._getLabel=function(e){return this.label[e]},FunnelChart.prototype._getTitle=function(e){return this.title},FunnelChart.prototype._catName=function(e){return this.catname[e]},FunnelChart.prototype._createPaths=function(){function n(r,i,s,o,u){function f(e,t,n,r,i){var s=e+(n-e)/2,o=t+(r-t)/2,u=n-e,a=u<0?-1:1,f=r-t,l=f<0?-1:1,c=Math.atan(f/u),h=a*Math.cos(c),p=a*Math.sin(c),d=i*p,v=i*h,m=s-d,g=o+v;return"M"+e+","+t+"Q"+m+","+g+" "+n+","+r}if(u>=r.data.length)return;area=r.data[u][1]*r._totalArea/r.totalEngagement,prevBaseLength=s-i,nextBaseLength=Number(parseFloat(Math.sqrt((r._slope*prevBaseLength*prevBaseLength-4*area)/r._slope)).toFixed(2)),nextLeftX=Number(parseFloat((prevBaseLength-nextBaseLength)/2+i).toFixed(2)),nextRightX=Number(parseFloat(s-(prevBaseLength-nextBaseLength)/2).toFixed(2)),nextHeight=Number(parseFloat(r._slope*(prevBaseLength-nextBaseLength)/2+o).toFixed(2));if(t==="3dFunnel"){var a=f(i,o,s,o,30);points=[[nextRightX,nextHeight+1.5]],points.push([s,o]),points.push([i,o]),points.push([nextLeftX,nextHeight+1.5]),points.push([nextRightX,nextHeight+1.5]),points.push(a),u+1===r.data.length&&points.push(f(nextLeftX,nextHeight,nextRightX,nextHeight,30))}else points=[[nextRightX,nextHeight-2]],points.push([s,o]),points.push([i,o]),points.push([nextLeftX,nextHeight-2]),points.push([nextRightX,nextHeight-2]);e.push(points),n(r,nextLeftX,nextRightX,nextHeight,u+1)}var e=[],t=this.type;return n(this,0,this.width,0,0),e},FunnelChart.prototype.draw=function(e,t){function v(){if(p){var t=d3.select(e+" .chart-box").node().getBBox();u.transition().duration(750).call(d.transform,d3.zoomIdentity.translate(Math.abs(t.x),Math.abs(t.y)).scale(1)),p=!1}}function m(e){var t=e.match(/rgba?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)?(?:, ?(\d(?:\.\d?))\))?/);return t?{red:t[1],green:t[2],blue:t[3]}:{}}function g(e,t){var n=e.type;nextHeight=h[t][[h[t].length]-1];var r=u.append("g").attr("class","siebui-trapezoid-container"
);r.append("path").attr("d",function(e,n){return l(h[t])}).attr("fill",function(e){return c[t]}).on("mouseover",function(e,t){var n=window.getComputedStyle(this,null).getPropertyValue("fill"),r=Number(m(n).red)-50,i="rgb("+r+","+m(n).green+","+m(n).blue+")";$(this).attr("fill",i),$($(this).parent().next().next().next().next().children()[1]).attr("fill",i),$($(this).next().next()).attr("fill",i)}).on("mouseout",function(e){var t=window.getComputedStyle(this,null).getPropertyValue("fill"),n=Number(m(t).red)+50,r="rgb("+n+","+m(t).green+","+m(t).blue+")";$(this).attr("fill",r),$($(this).parent().next().next().next().next().children()[1]).attr("fill",r),$($(this).next().next()).attr("fill",r)});var i="";e.revenue[t]=Math.floor(parseFloat(e.revenue[t])*100)/100,i=e.revenue[t],e.revenue[t]!==0&&(i=SiebelApp.S_App.LocaleObject.StringToFormatted("number",e.revenue[t],""));var s=SiebelApp.S_App.LocaleObject.StringToFormatted("number",e.quota[t],"");r.append("title").append(function(n,r){var o=document.createElement("span"),u=e.appTitle+":"+e.catname[t]+"\n"+e.title+":"+e.label[t]+"\n("+i+" "+e.OutOfString+" "+s+")";return navigator.userAgent.indexOf("Trident")>=0&&(u=u.replace(/\n/gi,"<br/> \n")),o.innerHTML=u,o}),n==="3dFunnel"&&(r.append("svg:path").attr("class","curvedpath").attr("d",function(e,n){return h[t][5]}).attr("fill",function(e){return c[t]}).attr("stroke-width",2).attr("stroke",function(){return t!==0?"white":"none"}),t+1===e.data.length&&r.append("svg:path").attr("class","curvedpath").attr("d",function(e,n){return h[t][6]}).attr("fill",function(e){return c[t]}));var o=u.append("g");o.append("svg:text").text(e._getLabel(t)).attr("class","siebui-funnel-label").attr("x",function(t){return e.width/2}).attr("y",function(e){return(h[t][0][1]+h[t][1][1])/2}).attr("text-anchor","middle").attr("dominant-baseline","middle");var a=u.append("g");a.append("svg:text").text(e._catName(t).substr(0,3)).attr("class","siebui-funnel-category").attr("x",function(e){return h[t][2][0]}).attr("y",function(e){return(h[t][0][1]+h[t][1][1])/2}).attr("text-anchor","middle").attr("dominant-baseline","middle"),setTimeout(function(){if(t===0&&n==="3dFunnel"){var r=Number(h[0][5].split(",")[1].split("Q")[1]);u.append("ellipse").attr("cx",r).attr("cy",0).attr("rx",r).attr("ry",25)}o.attr("transform",function(n){return"rotate(90 "+e.width/2+" "+(h[t][0][1]+h[t][1][1])/2+")"}),a.attr("transform",function(e){return"rotate(90 "+h[t][2][0]+" "+(h[t][0][1]+h[t][1][1])/2+")"})},0),t+1<h.length&&g(e,t+1)}var n=2.5;t=typeof t!="undefined"?t:n;var i=this,s=$(e),o={top:60,right:80,bottom:60,left:80},u=d3.select(e).append("svg").attr("class","chart-containers siebui-chart-"+this.GetType()+"-container"+" siebui-chart-"+this.GetType());r.call(this,s),u=u.attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Number(parseFloat((this.width-o.left-o.right)*1).toFixed(2))+" "+Number(parseFloat((this.height-o.top-o.bottom)*1).toFixed(2))).attr("perserveAspectRatio","xMinYMin").append("g").attr("class","chart-box").attr("outline","0"),s.css("width","95%"),s.css("outline","1px solid red;");var a=d3.scaleOrdinal().range(this.legendColors).domain(this.legendColors),f=u.append("g").attr("class","siebui-legend").attr("preserveAspectRatio","xMaxYMin meet").selectAll(".siebui-legend").data(a.domain()).enter().append("g").attr("class","legend").attr("transform",function(e,t){var n=-1*(t*20+10);return"translate("+n+","+(i.width+10-o.right)+") rotate(90)"});f.append("rect").attr("width",12).attr("height",12).style("fill",a),f.append("text").attr("x",20).attr("y",10).text(function(e,t){return this.legendText[t]}.bind(this));var l=d3.line().x(function(e){return e[0]}).y(function(e){return e[1]}),c=this.colors,h=this._createPaths(),p=!1,d=d3.zoom().scaleExtent([1,2]).on("zoom",function(e){u.attr("transform",e.transform),p=!0});d3.select(e).on("click",v),u.call(d),d3.select(e+" .chart-container").call(d).on("mousedown.zoom",null).on("touchmove.zoom",null),g(this,0);var y=this;u.append("text").attr("class","title").text(this._getTitle()).attr("x",function(e){return y.width/2}).attr("y",-30).attr("text-anchor","middle").attr("dominant-baseline","middle"),setTimeout(function(){var t=d3.select(e+" .chart-box").node().getBBox();d3.select(e+" .chart-box").attr("transform","translate("+Math.abs(t.x)+","+Math.abs(t.y)+")"),d3.select(e+" .chart-containers").attr("viewBox","0 0 "+t.width+" "+t.height)},0)},FunnelChart}(),SiebelAppFacade.FunnelChart})),typeof SiebelAppFacade.BaseChart=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.BaseChart"),define("siebel/basechart",[],function(){return SiebelAppFacade.BaseChart=function(){function e(e){for(var t in e)this[t]=e[t];this.legendRatio=.2,this.chartRatio=.8,this.margin={top:60,right:80,bottom:60,left:80},this.legendwidth=8,this.legendheight=8,this.fillClassName="",this.rotCount=20,this.HasZAxis=function(){return this.zAxisTitle||this.zAxisData&&this.zAxisData[0]&&this.zAxisData[0].label},this.GetLegendData=function(){return[]},this.IsStacked=function(){return!1},this.GetFillClassName=function(e){var t=(e+1)%this.rotCount;return t=t?t:this.rotCount,this.fillClassName+t}}return e.prototype={draw:function(e){var t=this,n;t.ProcessData(),n=t.SetUpChartContainer(e),t.BuildAxis(n,e),t.BuildTitle(n,e),t.BuildChart(n),t.BuildChartLegend(e),t.AdjustChartBox(e),t.HandleZoom(e)},DetermineSize:function(e){var t=this,n=parseInt(t.width,10),r=parseInt(t.height,10),i=e.width(),s=e.height(),o=t.margin;t.width=n||i||350,t.height=r||s||350;if(i*s!==0)t._oldWidth=t.width,t._oldHeight=t.height,t.width=i,t.height=s;else{var u=$(e);i?(u.height(t.height),t.width=i):s?(u.width(t.width),t.height=s):(u.height(t.height),u.width(t.width)),u=null}if(t.width<350||t.height<350)t.width<350&&(t.margin.left=10),t.height<350&&(t.margin.top=10,t.margin.bottom=0),o=t.margin,$(e).addClass("siebui-chart-reduced");t.height<350?t.effheight=t.height:t.effheight=t.height-o.top-o.bottom;if(t.HasZAxis())o.right=0,t.effwidth=t.chartRatio*t.width-
o.left;else{o.right=0;if(t.width>350){var a=t.legendRatio*t.width;o.left=a/2,t.effwidth=t.width-a}else t.effwidth=t.width}},GetToolTipData:function(){},GetYAxisData:function(){},GetXAxisData:function(){},GetFillColor:function(e){return this.color(e)},SetUpChartContainer:function(e){var t=$("#"+e),n=this,r,i,s;return this.DetermineSize.call(this,t),r=d3.select("#"+e).append("svg").attr("class","chart-container siebui-chart-"+this.GetType()+"-container"+" siebui-chart-"+this.GetType()).attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+(n.width-10)+" "+(n.height-10)).attr("preserveAspectRatio","xMinYMin meet"),i=r.append("svg"),s=i.append("g").attr("class","chart-box").attr("outline","0"),t.css("outline","none"),n.tooltip=d3.select(".siebui-chart-toolTip"),n.tooltip.length===0&&(n.tooltip=d3.select("body").append("div").attr("class","siebui-chart-toolTip")),n.color=d3.scaleOrdinal(d3.schemeCategory10),t=null,s},SetupAxisScale:function(){},BuildAxis:function(){},BuildChartLegend:function(e){if(this.HasZAxis()){var t=this.GetLegendData(),n=this,r=d3.select("#"+e+" .chart-box").selectAll(".legend").data(t).enter().append("g").attr("transform",function(e,t){return"translate("+(n.chartRatio*n.width-n.margin.left/2)+","+t*15+")"}).attr("class","legend siebui-"+n.GetType()+"-legend");r.append("rect").attr("width",function(e){return e?n.legendwidth:0}).attr("height",function(e){return e?n.legendheight:0}).attr("class",function(e,t){return"rectfill"+(t?t:"")+" "+n.GetFillClassName.call(n,t)}),r.append("text").text(function(e){return e}).attr("y",n.legendheight).attr("x",n.legendwidth+5),n.height<n.margin.top/2+15*t.length&&(d3.select("#"+e+" .chart-container").attr("viewBox","0 0 "+(n.width-10)+" "+(n.margin.top/2+15*t.length)).attr("height",n.margin.top/2+15*t.length+"px"),d3.select("#"+e).attr("class","allow-auto-scroll"))}},BuildChartItem:function(){},BuildTitle:function(e,t){var n=this,r,i,s;e.append("text").attr("class","siebui-chart-title siebui-"+n.GetType()+"-title").attr("y",0-n.margin.top).attr("text-anchor","middle").text(n.chartTitle),r=d3.select("#"+t).select(".chart-container"),i=r.select(".siebui-chart-title"),s=i.node().getComputedTextLength(),i.attr("x",n.width/2-s/2),i=null},BuildChart:function(){},HandleZoom:function(e){function i(){if(n){var i=d3.select("#"+e+" .chart-box"),s=i.node().getBBox();t.transition().duration(750).call(r.transform,d3.zoomIdentity.translate(Math.abs(s.x),Math.abs(s.y))),n=!1}}var t=d3.select("#"+e).select("svg"),n=!1,r=d3.zoom().scaleExtent([1,2]).on("zoom",function(t){d3.select("#"+e+" .chart-box").attr("transform",t.transform),n=!0});t.call(r),d3.select("#"+e+" .chart-container").call(r).on("mousedown.zoom",null).on("touchmove.zoom",null),t.on("click",i)},ProcessData:function(){},HandleGraphicObject:function(e,t){var n=this;if(e&&e.length>0)for(var r=0;r<e.length;r++){var i=e[r];for(var s in i)switch(s){case"line":break;case"horizontalLine":case"dashedHorizontalLine":var o=t.selectAll(".grid").append("g").classed(s==="horizontalLine"?"siebui-chart-horizontal-line":"siebui-chart-horizontal-dashedline",!0).attr("transform","translate(0, "+n.GetYAxisPosition(i[s].y)+")").append("line").attr("x2",n.effwidth).style("stroke-width","3px").attr("stroke","lightgrey").attr("shape-rendering","crispEdges");s==="horizontalLine"?o.style("stroke","solid"):o.style("stroke-dasharray","5, 5");break;case"verticalLine":case"dashedVerticalLine":var o=t.selectAll(".grid").append("g").classed(s==="verticalLine"?"siebui-chart-vertical-line":"siebui-chart-vertical-dashedline",!0).attr("transform","translate("+n.scaleX(i[s].x)+", 0)").append("line").attr("y2",n.effheight-$(".x.label").height()-10-n.margin.bottom).style("stroke-width","3px").attr("stroke","lightgrey").attr("shape-rendering","crispEdges");s==="verticalLine"?o.style("stroke","solid"):o.style("stroke-dasharray","5, 5")}}},AdjustChartBox:function(){},EndLife:function(){}},e}(),SiebelAppFacade.BaseChart})),typeof SiebelAppFacade.BarChart=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.BarChart"),define("siebel/barchart",["siebel/basechart","3rdParty/d3.min.js"],function(){return SiebelAppFacade.BarChart=function(){function n(n){n=n?n:{},n.xAxisData=n.xAxisData||e,n.yAxisData=n.yAxisData||t,SiebelAppFacade.BarChart.superclass.constructor.apply(this,arguments),this.fillClassName="siebui-barchart-bar",this.GetType=function(){return"barchart"},this.GetEachWidth=function(){var e=Math.min(this.effwidth/this.xAxisData.length/this.yAxisData.length,54)-4;return e>2?e:2},this.GetLegendData=function(){return this.origZAxis}}function r(e){var t={};for(var n=0,r=e.length;n<r;n++){while(t[e[n]]&&n<r)e[n]=e[n]+" ";t[e[n]]=!0}return e}var e=[],t=[[100]];return SiebelJS.Extend(n,SiebelAppFacade.BaseChart),n.prototype.GetYAxisData=function(e,t){var n=e,r=t?this.y2AxisDataType:this.yAxisDataType,i,s,o;return r&&(i=SiebelApp.S_App.LocaleObject.GetCurrency(SiebelApp.S_App.LocaleObject.GetFuncCurrCode()),r==="Currency"?(o=new SiebelApp.S_App.DatumCurrencyObject,o.SetAsString(e),i!==null&&typeof i!="undefined"&&(s=i.m_sSymbol,o.m_sDispCurrSymbol=s,o.m_bNull=!1)):(o=new SiebelApp.S_App.DatumNumberObject,o.SetAsString(e)),n=o.GetAsFormattedString(t?this.y2AxisDispFormat:this.yAxisDispFormat),!n&&e===0&&(n="0"),i=null),n},n.prototype.GetXAxisData=function(e){var t=e,n,r,i;return this.xAxisDataType!==null&&this.xAxisDataType==="Currency"&&(n=SiebelApp.S_App.LocaleObject.GetCurrency(SiebelApp.S_App.LocaleObject.GetFuncCurrCode),i=new SiebelApp.S_App.DatumCurrencyObject,i.SetAsString(e),n!==null&&typeof n!="undefined"&&(r=n.m_sSymbol,i.m_sDispCurrSymbol=r,i.m_bNull=!1),t=i.GetAsFormattedString(""),n=null),this.xAxisDisplayFormat&&(t+=this.xAxisDisplayFormat),t},n.prototype.GetToolTipData=function(e,t,n,r){var i=this,s=i.xAxisTitle+" : "+i.GetXAxisData(i.xAxisData[t])+"\n";return s=s+(r?i.y2AxisTitle:i.yAxisTitle)+" : "+i.GetYAxisData(e,r),i.zAxisTitle&&i.zAxisData[n].label&&(s+="\n"+i.zAxisTitle+" : "+i.zAxisData[n].label),s},n.prototype
.SetupAxisScale=function(){var e=this,t=d3.scaleLinear(),n,r,i=d3.max(e.yAxisData,function(e){return d3.max(e,function(e){return e})||10});i=Math.max(i,0),e.yAxisMax?i=Math.max(i,e.yAxisMax):i+=10,n=d3.min(e.yAxisData,function(e){return d3.min(e,function(e){return e})||0}),n=Math.min(n,0),e.yAxisMin?n=Math.min(n,e.yAxisMin):n!==0&&(n-=10);var s=e.effheight-$(".x.label").height()-10-e.margin.bottom;t.domain([n,i]).range([s,0]),e.scaleY=t,e.yAxisDiv?e.tickSize=e.yAxisDiv+1:(e.tickSize=10,s/13<10&&(e.tickSize=Math.ceil(s/13))),e.yAxis=d3.axisLeft().scale(e.scaleY).ticks(e.tickSize).tickFormat(function(t){return e.GetYAxisData.call(e,t)});if(e.yAxisDiv){var o=[],u=(i-n)/e.yAxisDiv;u=u.toFixed(2);for(var a=0;a<=e.yAxisDiv;a++)o.push(n+a*u);e.yAxis.tickValues(o),e.tickVals=o}r=d3.scaleBand(),r.domain(e.xAxisData).range([0,e.effwidth]),e.scaleX=r,e.xAxis=d3.axisBottom().scale(e.scaleX).tickFormat(function(t){return e.GetXAxisData.call(e,t)})},n.prototype.BuildAxis=function(e){var t=this,n,r;e.append("text").attr("class","x label siebui-axis-label siebui-barchart-xaxis-title").attr("text-anchor","end").attr("x",(t.margin.left+t.effwidth)/2).attr("y",t.margin.bottom/2).attr("dx",".75em").text(t.xAxisTitle),e.append("text").attr("class","y label siebui-axis-label siebui-barchart-yaxis-title").attr("text-anchor","end").attr("text-anchor","middle").attr("transform","rotate(-90)").text(t.yAxisTitle),this.SetupAxisScale(),n=e.append("g").attr("class","y axis").call(t.yAxis),n.selectAll("text").attr("class","siebui-barchart-yaxis-label");var i=t.GetEachWidth();t.type&&t.type.search("3d")!=-1&&e.append("rect").attr("class","y1 axis1").attr("height",t.effheight-$(".x.label").height()-10-t.margin.bottom).attr("width",i/2).attr("fill","none").attr("stoke","black").attr("transform","skewY(45)"),r=e.append("g").attr("class","x axis").attr("transform","translate(0,"+(t.effheight-$(".x.label").height()-10-t.margin.bottom)+")").call(t.xAxis).attr("font-family","");var s="rotate("+t.xAxisAngle+")";t.xAxisAngle===90&&(s=s+" translate(10,-"+i/4+")"),r.selectAll("text").style("text-anchor","start").attr("showGridline",!1).attr("class","siebui-barchart-xaxis-label").attr("transform",s),t.MakeGridLines.call(t,e)},n.prototype.MakeGridLines=function(e){var t=this,n=d3.axisLeft().scale(t.scaleY).ticks(t.tickSize).tickSize(-t.effwidth).tickFormat("");t.tickVals&&n.tickValues(t.tickVals);var r=e.append("g").attr("class","grid").call(n);r.selectAll("line,.domain").attr("stroke","lightgrey").attr("shape-rendering","crispEdges");var i;if(t.type&&t.type.search("3d")!=-1){var s=t.GetEachWidth();n.tickSize(-s/2),i=e.append("g").attr("class","xgrid").call(n),i.attr("transform","skewY(-45)"),i.selectAll(".domain").attr("stroke","lightgrey").attr("shape-rendering","crispEdges"),i.selectAll("line").attr("stroke","black").attr("shape-rendering","crispEdges"),r.attr("transform","translate("+s/2+",-"+s/2+")")}t.GraphicObject!=null&&(r.selectAll("line").style("opacity",0),i&&i.selectAll("line").style("opacity",0),t.HandleGraphicObject(t.GraphicObject,e))},n.prototype.GetXAxisPosition=function(e,t,n,r,i){var s=this,o,u=s.scaleX.bandwidth(),a=u/r,f,l;return a>i?(f=u-r*i,l=f/r,o=n*u+(t*a+l/2)):o=n*u+t*a,o},n.prototype.GetYAxisPosition=function(e){var t=this,n=t.scaleY(0),r=t.scaleY(e);return r>n&&(r=n),r},n.prototype.BuildBarElement=function(e,t,n,r,i){var s=this,o=s.processedData[n].zData,u=t.selectAll("."+e+"x_"+n).data(s.processedData[n].yData).enter().append("rect").attr("class",function(t,r){var i=s.origZAxis.indexOf(o[r]);return e+(i?i:"")+" "+e+"x_"+n+(" rectfill"+(i?i:""))+" "+s.GetFillClassName.call(s,s.origZAxis.indexOf(o[r]))}).attr("xindex",function(){return n}).attr("yindex",function(e,t){return s.origZAxis.indexOf(o[t])}).attr("x",function(e,t){return s.GetXAxisPosition.call(s,e,t,n,r,i)}).attr("width",function(e){return e?i:0}).on("touchstart",function(e,t){var r=d3.event.touches?d3.event.touches[0]:null;r&&s.tooltip.style("left",r.pageX-50+"px").style("top",r.pageY-70+"px").style("display","inline-block").html(s.GetToolTipData(e,n,s.origZAxis.indexOf(o[t])))}).on("touchend",function(){s.tooltip.style("display","none")}).attr("height",function(e){var t=s.effheight-$(".x.label").height()-10-s.margin.bottom,n=t-Math.abs(s.scaleY(0)),r=t-s.scaleY(e),i=r-n;return Math.abs(i)}).attr("y",function(e,t){return s.GetYAxisPosition(e,t)}).style("stroke","white");return u.append("title").append(function(e,t){var r=document.createElement("span"),i=s.GetToolTipData(e,n,s.origZAxis.indexOf(o[t]));return navigator.userAgent.indexOf("Trident")>=0&&(i=i.replace(/\n/gi,"<br/> \n")),r.innerHTML=i,r}),u},n.prototype.BuildChartItem=function(e,t,n,r){var i=this,s=45;i.type&&i.type.search("3d")!=-1&&(i.IsStacked()?(i.BuildBarElement.call(this,"recttop",e,t,n,r).attr("transform",function(e,t){return"translate(0,"+i.GetYAxisPosition(e,t)+") skewX(-"+s+")"}).attr("height",function(e){return e?r/2:0}).attr("y",function(e){return e?-r/2:0}),i.BuildBarElement.call(this,"rectz",e,t,n,r).attr("x",0).attr("width",function(e){return e?r/2:0}).attr("transform",function(e,o){var u=i.GetXAxisPosition.call(i,e,o,t,n,r)+r;return"translate ("+u+","+"0) skewY(-"+s+")"})):(i.BuildBarElement.call(this,"rectz",e,t,n,r).attr("x",0).attr("width",function(e){return e?r/2:0}).attr("transform",function(e,o){var u=i.GetXAxisPosition.call(i,e,o,t,n,r)+r;return"translate ("+u+","+"0) skewY(-"+s+")"}),i.BuildBarElement.call(this,"recttop",e,t,n,r).attr("transform",function(e,t){return"translate(0,"+i.GetYAxisPosition(e,t)+") skewX(-"+s+")"}).attr("height",function(e){return e?r/2:0}).attr("y",function(e){return e?-r/2:0}))),i.BuildBarElement.call(this,"rectfill",e,t,n,r)},n.prototype.AdjustChartBox=function(e){var t=Math.random();$("#"+e).data("eleId",t);var n=this;setTimeout(function(){if($("#"+e).data("eleId")!==t)return;var r=d3.select("#"+e),i=r.select(".y.axis").node(),s=r.select(".y.label").node(),o=s.getBBox(),u=i.getBBox(),a=i.getBoundingClientRect(),f=r.select(".siebui-chart-data"
).node().getBoundingClientRect(),l=u.width+o.height,c=Math.abs(o.x-u.y)+(u.height-o.width)/2,h,p,d;d3.select(s).attr("y",-l).attr("x",-c),r.select(".y2.label").attr("x",-c),p=r.select(".chart-box"),d=p.node().getBBox(),r.select(".x.label").attr("y",r.select(".grid").node().getBBox().height+r.select(".x.axis").node().getBBox().height+n.margin.top),d=p.node().getBBox();var v=Math.abs(d.x)+n.margin.left/2-n.margin.right,m=Math.abs(d.y);p.attr("transform","translate("+v+","+m+")"),r.select(".chart-container").attr("viewBox","0 0 "+Math.max(n.width,d.width)+" "+Math.max(n.height,d.height));var g=r.select(".siebui-chart-title");titleEleWidth=g.node().getComputedTextLength(),g.attr("x",l+Math.max(n.width,d.width)/2-titleEleWidth/2);if(d3.select(".grid").node()){var y=d3.select(".grid").node().getBoundingClientRect(),b=d3.select(".siebui-chart-title").node().getBoundingClientRect();if(y.top<b.top+b.height){var w=-y.top+b.top+b.height+5;g.attr("y",Number(g.attr("y"))-w),m+=w,p.attr("transform","translate("+v+","+m+")"),r.select(".chart-container").attr("viewBox","0 0 "+Math.max(n.width,d.width)+" "+(Math.max(n.height,d.height)+w))}}r=null},1)},n.prototype.HandleZoom=function(e){function s(){if(n){var s=d3.select("#"+e+" .chart-box"),o=s.node().getBBox();t.transition().duration(750).call(r.transform,d3.zoomIdentity.translate(Math.abs(o.x)+i.margin.left/2-i.margin.right,Math.abs(o.y))),n=!1}}var t=d3.select("#"+e).select("svg"),n=!1,r=d3.zoom().scaleExtent([1,2]).on("zoom",function(t){d3.select("#"+e+" .chart-box").attr("transform",t.transform),n=!0});t.call(r),d3.select("#"+e+" .chart-container").call(r).on("mousedown.zoom",null).on("touchmove.zoom",null);var i=this;t.on("click",s)},n.prototype.AppendChartElement=function(e){return e.append("g").classed("bars siebui-chart-data ",!0)},n.prototype.BuildChart=function(e){var t=this,n=t.AppendChartElement(e),r=t.yAxisData.length,i=t.effwidth,s=this.GetEachWidth(),o=this.processedData.length,u;for(u=0;u<o;u++)t.BuildChartItem(n,u,r,s)},n.prototype.ProcessData=function(e){if(!this.processedData){var t=this.xAxisData,n=this.yAxisData,i=this.zAxisData,s=[],o=this.HasZAxis(),u=n.length,a,f=t.length,l,c;this.xAxisData=r.call(this,this.xAxisData),o?this.origZAxis=i.map(function(e){return e.label}):this.origZAxis=["val"];for(a=0,f=t.length;a<f;a++){s[a]||(s[a]={yData:[],zData:[],combined:[]});for(l=0;l<u;l++)s[a].yData.push(n[l][a]),o?s[a].zData.push(i[l].label):s[a].zData.push("val")}if(e&&o)for(a=0,f=t.length;a<f;a++){c=[];for(l=0;l<u;l++)c.push({y:s[a].yData[l],z:s[a].zData[l]});c.sort(function(e,t){return e.y<t.y?-1:e.y==t.y?0:1}),s[a].yData=[],s[a].zData=[];for(l=0;l<u;l++)s[a].yData.push(c[l].y),s[a].zData.push(c[l].z)}this.processedData=s}},n}(),SiebelAppFacade.BarChart})),typeof SiebelAppFacade.HorizontalBarChart=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.HorizontalBarChart"),define("siebel/horizontalbarchart",["3rdParty/d3.min.js","siebel/barchart"],function(){return SiebelAppFacade.HorizontalBarChart=function(){function t(e){return Math.abs(this.scaleX(e)-this.scaleX(0))}var e=function(){SiebelAppFacade.HorizontalBarChart.superclass.constructor.apply(this,arguments),this.GetType=function(){return"horizontalbar"}};return SiebelJS.Extend(e,SiebelAppFacade.BarChart),e.prototype.GetToolTipData=function(e,t,n){var r=this,i=r.xAxisTitle+" : "+r.GetXAxisData(e)+"\n";return i+=r.yAxisTitle+" : "+r.GetYAxisData(r.yAxisData[r.yAxisData.length-1-t]),r.zAxisTitle&&r.zAxisData[n].label&&(i+="\n"+r.zAxisTitle+" : "+r.zAxisData[n].label),i},e.prototype.GetYAxisData=function(e,t){return SiebelAppFacade.HorizontalBarChart.superclass.GetXAxisData.apply(this,arguments)},e.prototype.GetXAxisData=function(e){return SiebelAppFacade.HorizontalBarChart.superclass.GetYAxisData.apply(this,arguments)},e.prototype.SetupAxisScale=function(){var e=this,t,n=d3.max(e.xAxisData,function(e){return d3.max(e,function(e){return e})||10});n=Math.max(n,0),e.xAxisMax?n=Math.max(n,e.xAxisMax):n+=10,t=d3.min(e.xAxisData,function(e){return d3.min(e,function(e){return e})||0}),t=Math.min(t,0),e.xAxisMin?t=Math.min(t,e.xAxisMin):t!==0&&(t-=10),e.xAxisDiv?e.xtickSize=e.xAxisDiv+1:(e.xtickSize=10,e.effwidth/13<e.xtickSize&&(e.xtickSize=Math.floor(e.effwidth/13))),e.scaleX=d3.scaleLinear().domain([t,n]).range([0,e.effwidth]),e.scaleY=d3.scaleBand().domain(e.yAxisData.reverse()).range([e.effheight,0]).padding(.2),e.yAxis=d3.axisLeft().scale(e.scaleY).tickFormat(function(t){return e.GetYAxisData.call(e,t)}),e.xAxis=d3.axisBottom().scale(e.scaleX).ticks(e.xtickSize).tickFormat(function(t){return e.GetXAxisData.call(e,t)});if(e.xAxisDiv){var r=[],i=(n-t)/e.xAxisDiv;i=i.toFixed(2);for(var s=0;s<=e.xAxisDiv;s++)r.push(t+s*i);e.xAxis.tickValues(r),e.tickVals=r}},e.prototype.MakeGridLines=function(e){var t=this;e.append("g").attr("class","grid").call(d3.axisBottom(t.scaleX).ticks().tickSize(t.effheight).tickFormat("")),d3.selectAll(".grid line,.grid .domain").attr("stroke","lightgrey").attr("shape-rendering","crispEdges")},e.prototype.AdjustChartBox=function(e){var t=Math.random(),n=this;$("#"+e).data("eleId",t),setTimeout(function(){if($("#"+e).data("eleId")!==t)return;var r=d3.select("#"+e),i=r.select(".y.axis").node(),s=r.select(".y.label").node(),o=s.getBBox(),u=i.getBBox(),a=i.getBoundingClientRect(),f=r.select(".siebui-chart-data").node().getBoundingClientRect(),l=u.width+o.height,c=Math.abs(o.x-u.y)+(u.height-o.width)/2,h,p,d;d3.select(s).attr("y",-l).attr("x",-c),r.select(".y2.label").attr("x",-c),h=0,a.right>f.left&&(h=a.right-f.left,r.select(".siebui-chart-data").attr("transform","translate("+h+",0)")),r.select(".x.axis").attr("transform","translate("+h+","+n.effheight+")"),d=r.select(".chart-box"),p=d.node().getBBox(),r.select(".x.label").attr("y",p.height),p=d.node().getBBox(),r.select(".chart-box").attr("transform","translate("+Math.abs(p.x)+","+Math.abs(p.y)+")"),r.select(".chart-container").attr("viewBox","0 0 "+p.width+" "+p.height),r=null},1)},e.prototype.GetYAxisPosition=function(
e,t,n,r,i){var s,o=this,u=o.effheight/o.yAxisData.length,a=u/r,f,l;return a>i?(f=u-r*i,l=f/r,s=n*u+(t*a+l/2)):s=n*u+t*a,s},e.prototype.GetXAxisPosition=function(e){var n=this,r=n.scaleX(0),i=n.scaleX(e);return i<r?i=r-t.call(n,e):i=r,i},e.prototype.BuildBarElement=function(e,n,r,i,s){var o=this,u=o.processedData[r].zData;n.selectAll("."+e+"y_"+r).data(o.processedData[r].xData).enter().append("rect").attr("class",function(t,n){var i=o.origZAxis.indexOf(u[n]);return e+(n?n:"")+" "+e+"y_"+r+(" "+o.GetFillClassName(o.origZAxis.indexOf(u[n])))+" siebui-charts-"+o.GetType()}).attr("yindex",function(e,t){return o.origZAxis.indexOf(u[t])}).attr("xindex",r).attr("y",function(e,t){return o.GetYAxisPosition.call(o,e,t,r,i,s)}).attr("height",function(e){return e?s:0}).on("touchstart",function(e,t){var n=d3.event.touches?d3.event.touches[0]:null;n&&o.tooltip.style("left",n.pageX-50+"px").style("top",n.pageY-70+"px").style("display","inline-block").html(o.GetToolTipData(e,r,o.origZAxis.indexOf(u[t])))}).on("touchend",function(){o.tooltip.style("display","none")}).attr("width",function(e,n){return t.call(o,e,n)}).attr("x",function(e,t){return o.GetXAxisPosition(e,t)}).style("stroke","white").append("title").append(function(e,t){var n=document.createElement("span"),i=o.GetToolTipData(e,r,o.origZAxis.indexOf(u[t]));return navigator.userAgent.indexOf("Trident")>=0&&(i=i.replace(/\n/gi,"<br/> \n")),n.innerHTML=i,n})},e.prototype.ProcessData=function(){if(!this.processedData){var e=this.xAxisData,t=this.yAxisData,n=this.zAxisData,r=[],i=e.length,s,o=0,u=t.length,a=this.HasZAxis();a?this.origZAxis=n.map(function(e){return e.label}):this.origZAxis=["val"];for(o=0;o<u;o++){r[o]||(r[o]={xData:[],zData:[]});for(s=0;s<i;s++)r[o].xData.push(e[s][o]),a?r[o].zData.push(n[s].label):r[o].zData.push("val")}this.processedData=r}},e.prototype.BuildChart=function(e){var t=this,n=t.AppendChartElement(e),r=t.xAxisData.length,i=t.effheight,s=Math.min(i/t.yAxisData.length/r,54)-4,o=t.processedData.length,u;s=s>2?s:2;for(u=0;u<o;u++)t.BuildChartItem(n,u,r,s)},e}(),SiebelAppFacade.HorizontalBarChart})),typeof SiebelAppFacade.PieChart=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.ComboChart"),define("siebel/piechart",["3rdParty/d3.min.js","siebel/barchart"],function(){return SiebelAppFacade.PieChart=function(){function t(e,t,n){var r=this.xAxisTitle,i=this.yAxisTitle,s=this.zAxisTitle,o=this.xAxisData,u=this.zAxisData,a="";n=n||0,r&&o&&o.length>t&&(a+=r+" : "+o[t]+"\n");if(i&&e&&e.length>0){var f=e[1];if(this.yAxisDataType!==null||this.y2AxisDataType!==null){var l=SiebelApp.S_App.LocaleObject.GetCurrency(SiebelApp.S_App.LocaleObject.GetFuncCurrCode()),c,h;this.yAxisDataType==="Currency"||this.y2AxisDataType==="Currency"?h=new SiebelApp.S_App.DatumCurrencyObject:h=new SiebelApp.S_App.DatumNumberObject,h.SetAsString(e[1]),l!==null&&typeof l!="undefined"&&(c=l.m_sSymbol,h.m_sDispCurrSymbol=c,h.m_bNull=!1),f=h.GetAsFormattedString(this.yAxisDispFormat);if(this.plotSum){var p=" out of ",d=new SiebelApp.S_App.DatumNumberObject,v=""+e[1]*100/this.plotSum;h.SetAsString(""+this.plotSum),p+=h.GetAsFormattedString(""),d.SetAsString(""+v),v=d.GetAsFormattedString(""),v+="%",f=f+p+"\n                    "+v}l=null}a=a+i+" : "+f+"\n"}return s&&u!==null&&u.length>n&&(a=a+s+" : "+u[n].label),a||(a=this.yAxisData[0][t][0]+" : "+this.yAxisData[0][t][1]),a}var e=function(e){SiebelAppFacade.PieChart.superclass.constructor.apply(this,arguments),this.width=Number(e.width),this.height=Number(e.height),this.fillClassName="siebui-piechart-pie";var t=this.type==="2dPie"?"pie":"doughnut";this.GetType=function(){return t},this.GetLegendData=function(){return this.xAxisData},this.HasZAxis=function(){return!0};if(this.yAxisData&&this.yAxisData[0]){this.sortedYAxisData=this.yAxisData[0].slice(0).sort(function(e,t){return t[1]-e[1]}),this.plotSum=0;for(var n=0,r=this.yAxisData[0].length;n<r;n++)this.plotSum+=this.yAxisData[0][n][1]}};return SiebelJS.Extend(e,SiebelAppFacade.BaseChart),e.prototype.SetUpChartContainer=function(){var e=SiebelAppFacade.PieChart.superclass.SetUpChartContainer.apply(this,arguments);return d3.select(".chart-container").attr("preserveAspectRatio","xMinYMid"),this.radius=Math.min(.75*this.width,this.height)/2,e},e.prototype.BuildTitle=function(e,t){var n=this,r=d3.select("#"+t+" .chart-container").append("text").attr("class","siebui-chart-title siebui-"+this.GetType()+"chart-title").attr("text-anchor","middle").attr("x",n.width/2).text(n.chartTitle);r.attr("y",n.margin.top-r.node().getBBox().height-2)},e.prototype.BuildAxis=function(e,t){var n=this;d3.select("#"+t+" .chart-container").append("text").attr("class","x  siebui-axis-label label siebui-"+this.GetType()+"chart-xlabel").attr("y",n.height-n.margin.bottom/4).attr("text-anchor","middle").attr("x",n.width/2).text(n.xAxisTitle)},e.prototype.AppendChartElement=function(e){var t=e.append("g").classed("pies siebui-chart-data ",!0);return this.height<.75*this.width?.75*this.width/2+this.radius<.75*this.width?this.pieCenter=this.width/2:this.pieCenter=.75*this.width/2:this.pieCenter=this.width/2,t.attr("transform","translate("+this.pieCenter+","+this.height/2+") "),t},e.prototype.BuildChart=function(e){var n=this,r=n.effwidth,i=n.effheight,s=n.AppendChartElement(e),o=n.radius,u=d3.pie().sort(null).value(function(e){return e[1]}),a=d3.arc().outerRadius(o*.8);n.type==="2dDoughnut"?a.innerRadius(o*.6).cornerRadius(3).padAngle(.015):a.innerRadius(0),d3.arc().outerRadius(o-40).innerRadius(o-40);var f=s.selectAll(".siebui-charts-arc").data(u(n.yAxisData[0])).enter().append("g").attr("class","siebui-charts-arc");f.append("path").attr("d",a).attr("class",function(e,t){return n.GetFillClassName.call(n,t)}).attr("xindex",function(e,t){return t}).on("touchstart",function(e,r){var i=d3.event.touches?d3.event.touches[0]:null;i&&(n.tooltip.style("left",i.pageX+10+"px"),n.tooltip.style("top",i.pageY-25+"px"),n.tooltip.style("display","inline-block"),n.tooltip.html(t.call(n,e.data,r)))}).on("touchend"
,function(){n.tooltip.style("display","none")}).transition().duration(function(e,t){return t*800}),f.append("title").append(function(e,r){var i=document.createElement("span"),s=t.call(n,e.data,r);return navigator.userAgent.indexOf("Trident")>=0&&(s=s.replace(/\n/gi,"<br/> \n")),i.innerHTML=s,i})},e.prototype.BuildChartLegend=function(e){if(this.HasZAxis()){var t=this.GetLegendData(),n=this,r=d3.select("#"+e+" .chart-box").selectAll(".legend").data(t).enter().append("g").attr("transform",function(e,t){return"translate("+.75*n.width+","+(n.margin.top+t*15)+")"}).attr("class","legend siebui-"+n.GetType()+"-legend");r.append("rect").attr("width",function(e){return e?n.legendwidth:0}).attr("height",function(e){return e?n.legendheight:0}).attr("class",function(e,t){return"rectfill"+(t?t:"")+" "+n.GetFillClassName.call(n,t)}),r.append("text").text(function(e){return e}).attr("y",n.legendheight).attr("x",n.legendwidth+5),n.height<n.margin.top+15*t.length&&(d3.select("#"+e+" .chart-container").attr("viewBox","0 0 "+(n.width-10)+" "+(60+15*t.length)).attr("height",60+15*t.length+"px"),d3.select("#"+e).attr("class","allow-auto-scroll"))}},e.prototype.HandleZoom=function(e){function s(){r&&(n.transition().duration(750).call(i.transform,d3.zoomIdentity.translate(0,0).scale(1)),r=!1)}var t=this,n=d3.select("#"+e).select("svg"),r=!1,i=d3.zoom().scaleExtent([1,2]).on("zoom",function(t){d3.select("#"+e+" .chart-container").attr("transform",t.transform),r=!0});n.call(i),d3.select("#"+e+" .chart-container").call(i).on("mousedown.zoom",null).on("touchmove.zoom",null),n.on("click",s)},e}(),SiebelAppFacade.PieChart})),typeof SiebelAppFacade.StackedBarChart=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.LineChart"),define("siebel/linechart",["3rdParty/d3.min.js","siebel/barchart"],function(){return SiebelAppFacade.LineChart=function(){var e=function(e){SiebelAppFacade.LineChart.superclass.constructor.apply(this,arguments);var t=this.type?this.type.search("2dSpline")!==-1?"splinechart":this.type.search("Combo")!==-1?"combo":"linechart":"linechart";this.GetType=function(){return t},this.radius=8};return SiebelJS.Extend(e,SiebelAppFacade.BarChart),e.prototype.AppendChartElement=function(e){return e},e.prototype.BuildChart=function(e){var t=this,n=t.AppendChartElement(e),r=t.yAxisData.length,i=t.effwidth,s=Math.min(i/t.xAxisData.length,50),o=Math.min(i/t.xAxisData.length/r,50);for(var u=0;u<r;u++)t.BuildChartItem(n,u,r,o)},e.prototype.SetupAxisScale=function(){SiebelAppFacade.LineChart.superclass.SetupAxisScale.apply(this,arguments);var e=this;if(e.type.search("2dScatter")!=-1){var t=!0,n=e.xAxisData.map(function(e){var n=parseFloat(e,10);return t=!isNaN(n),n});if(t){e.xAxisData=n;var r=d3.scaleLinear(),i,s=d3.max(e.xAxisData,function(e){return d3.max([e],function(e){return e})||10});s=Math.max(s,0),e.xAxisMax?s=Math.max(s,e.xAxisMax):s+=10,i=d3.min(e.xAxisData,function(e){return d3.min([e],function(e){return e})||0}),e.xAxisMin?i=Math.min(i,e.xAxisMin):(i=Math.min(i,0),i!==0&&(i-=10));var o=e.effwidth;r.domain([i,s]).range([0,e.effwidth]).nice(),e.scaleX=r,e.xAxisDiv?e.xtickSize=e.xAxisDiv+1:(e.xtickSize=10,o/13<e.xtickSize&&(e.xtickSize=Math.floor(o/13))),e.xAxis=d3.axisBottom().scale(e.scaleX).ticks(e.xtickSize).tickFormat(function(t){return e.GetXAxisData.call(e,t)});if(e.xAxisDiv){var u=[],a=(s-i)/e.xAxisDiv;a=a.toFixed(2);for(var f=0;f<=e.xAxisDiv;f++)u.push(Number((i+f*a).toFixed(2)));e.xAxis.tickValues(u),e.xtickVals=u}}}},e.prototype.draw=function(e){this.type!=="Combo"?SiebelAppFacade.LineChart.superclass.draw.apply(this,arguments):this.BuildChart(d3.select("#"+e+" .chart-box"))},e.prototype.BuildChartItem=function(e,t,n,r){var i=this,s=i.yAxisData[t],o=i.radius,u=i.GetType(),a=i.yAxisData.length,f=(o-1)/a;if(i.type.search("3dLine")!==-1){var l=d3.area();l.x(function(e,t){return i.scaleX(i.xAxisData[t])+i.scaleX.bandwidth()/2}).y0(function(e,t){return i.scaleY(s[t])}).y1(function(e,t){return i.scaleY(s[t]+10)}),e.append("path").data([s]).attr("class",function(e,n){return"siebui-charts-3dline siebui-chart-data "+i.GetFillClassName.call(i,t)}).attr("d",l).style("stroke",function(e,n){return i.GetFillColor(t)})}else{if(i.type.search("2dLine")!==-1||i.type.search("2dSpline")!==-1){var c=d3.line().x(function(e,t){return i.scaleX(i.xAxisData[t])+i.scaleX.bandwidth()/2}).y(function(e,t){return i.scaleY(s[t])});i.type.search("2dSpline")!==-1?c.curve(d3.curveMonotoneX):"",e.append("path").data([s]).attr("class",function(e,n){return"siebui-charts-line siebui-chart-data "+i.GetFillClassName.call(i,t)}).attr("d",c).style("stroke",function(e,n){return i.GetFillColor(t)})}else u="scatterplot";var h=!1;for(var p=t-1;p>-1;p--){for(var d=0;d<s.length;d++)if(i.yAxisData[t][d]===i.yAxisData[p][d]){h=!0;break}if(h)break}h&&(o-=f,i.radius=o),e.selectAll("dot").data(s).enter().append("circle").attr("r",o).attr("class","circleplot"+t+" siebui-charts-"+u+"-circle"+" siebui-chart-data"+" "+i.GetFillClassName.call(i,t)).attr("xindex",function(e,n){return i.type.search("2dScatter")!=-1?t:n}).attr("yindex",function(e,n){return t}).attr("cx",function(e,n){return i.type.search("2dScatter")!=-1?i.scaleX(i.xAxisData[t]):i.scaleX(i.xAxisData[n])+i.scaleX.bandwidth()/2}).attr("cy",function(e,t){return i.scaleY(s[t])}).on("touchstart",function(e,n){var r=d3.event.touches?d3.event.touches[0]:null;r&&(i.tooltip.style("left",r.pageX-50+"px").style("top",r.pageY-70+"px").style("display","inline-block").html(function(){return i.type.search("2dScatter")!=-1?i.GetToolTipData(e,t,t,i.type==="Combo"):i.GetToolTipData(e,n,t,i.type==="Combo")}),event=null)}.bind(s)).on("touchend",function(e){i.tooltip.style("display","none")}).append("title").append(function(e,n){var r=document.createElement("span"),s="";return i.type.search("2dScatter")!=-1?s=i.GetToolTipData(e,t,t,i.type==="Combo"):s=i.GetToolTipData(e,n,t,i.type==="Combo"),navigator.userAgent.indexOf("Trident")>=0&&(s=s.replace(/\n/gi,"<br/> \n")),r.innerHTML=s,r}.bind(s))}},e}(),SiebelAppFacade
.LineChart})),typeof SiebelAppFacade.StackedBarChart=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.StackedBarChart"),define("siebel/stackedbarchart",["3rdParty/d3.min.js","siebel/barchart"],function(){return SiebelAppFacade.StackedBarChart=function(){var e=function(){SiebelAppFacade.StackedBarChart.superclass.constructor.apply(this,arguments);var e={};this.SetSum=function(t,n){e[t]=n},this.GetSum=function(t){return e[t]?e[t]:0},this.GetType=function(){return"stackedbar"},this.GetEachWidth=function(){var e=Math.min(this.effwidth/this.xAxisData.length,54)-4;return e>0?e:2},this.IsStacked=function(){return!0}};return SiebelJS.Extend(e,SiebelAppFacade.BarChart),e.prototype.GetXAxisPosition=function(e,t,n,r,i){return SiebelAppFacade.StackedBarChart.superclass.GetXAxisPosition.call(this,e,0,n,1,i)},e.prototype.GetToolTipData=function(e,t,n,r){var i=this,s=i.xAxisTitle+" : "+i.GetXAxisData(i.xAxisData[t])+"\n";s=s+(r?i.y2AxisTitle:i.yAxisTitle)+" : "+i.GetYAxisData(e,r),s=s+" out of "+i.GetYAxisData(i.GetSum(t),r);var o=new SiebelApp.S_App.DatumNumberObject;return o.SetAsString(""+e*100/i.GetSum(t)),s=s+"\n                  "+o.GetAsFormattedString("")+"%",i.zAxisTitle&&i.zAxisData[n].label&&(s+="\n"+i.zAxisTitle+" : "+i.zAxisData[n].label),s},e.prototype.GetYAxisPosition=function(e,t,n){var r;return n?(r=SiebelAppFacade.StackedBarChart.superclass.GetYAxisPosition.apply(this,arguments),e<0&&n[t+1]&&n[t+1]<0&&(r=this.scaleY(e-n[t]))):r=SiebelAppFacade.StackedBarChart.superclass.GetYAxisPosition.apply(this,arguments),r},e.prototype.SetupAxisScale=function(){SiebelAppFacade.StackedBarChart.superclass.SetupAxisScale.apply(this,arguments);var e=this,t=d3.scaleLinear(),n,r=d3.max(e.processedData,function(e){return d3.max(e.modifiedYAxisData,function(e){return e})||10});r=Math.max(r,0),n=d3.min(e.processedData,function(e){return d3.min(e.modifiedYAxisData,function(e){return e})||0}),n=Math.min(n,0),n!==0&&(n-=10);var i=e.effheight-$(".x.label").height()-10-e.margin.bottom;t.domain([n,r+10]).range([i,0]).nice(),this.domainMin_Y=n,this.scaleY=t,e.yAxisDiv?e.tickSize=e.yAxisDiv+1:(e.tickSize=10,i/13<10&&(e.tickSize=Math.ceil(i/13))),e.yAxis=d3.axisLeft().scale(e.scaleY).ticks(e.tickSize).tickFormat(function(t){return e.GetYAxisData.call(e,t)});if(e.yAxisDiv){var s=[],o=(r-n)/e.yAxisDiv;for(var u=0;u<=e.yAxisDiv;u++)s.push(n+u*o);e.yAxis.tickValues(s),e.tickVals=s}},e.prototype.BuildBarElement=function(e,t,n){var r=this,i=SiebelAppFacade.StackedBarChart.superclass.BuildBarElement.apply(this,arguments);return i.data(r.processedData[n].modifiedYAxisData).attr("y",function(e,t){return r.GetYAxisPosition(e,t,r.processedData[n].yData)}),i},e.prototype.BuildChartItem=function(e,t,n,r){var i=this;r=this.GetEachWidth(),SiebelAppFacade.StackedBarChart.superclass.BuildChartItem.apply(this,arguments),i.type.search("3d")!=-1&&e.selectAll(".recttopx_"+t).data(i.processedData[t].modifiedYAxisData).attr("transform",function(e,n){return"translate(0,"+i.GetYAxisPosition(e,n,i.processedData[t].yData)+") skewX("+ -45+")"})},e.prototype.draw=function(){this.ProcessData(!0);var e=this,t=0,n=0,r=0,i=e.xAxisData.length,s=e.yAxisData.length,o=[],u=!1,a;for(t=0;t<i;t++){u=!1,a=e.processedData[t],o=[],o[0]=a.yData[0],a.yData[0]<0&&(u=!0);for(n=1;n<s;n++)if(a.yData[n]<0){for(r=n;r>0;r--)o[r-1]=a.yData[n]+o[r-1];o[n]=a.yData[n],u=!0}else u?o[n]=a.yData[n]:o[n]=a.yData[n]+o[n-1],u=!1;a.modifiedYAxisData=o,e.SetSum(t,a.yData.reduce(function(e,t){return e+Math.abs(t)}))}SiebelAppFacade.StackedBarChart.superclass.draw.apply(this,arguments)},e}(),SiebelAppFacade.StackedBarChart})),typeof SiebelAppFacade.ComboChart=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.ComboChart"),define("siebel/combochart",["3rdParty/d3.min.js","siebel/barchart","siebel/linechart"],function(){return SiebelAppFacade.ComboChart=function(){var e=function(e){SiebelAppFacade.ComboChart.superclass.constructor.apply(this,arguments),this.options=e};return SiebelJS.Extend(e,SiebelAppFacade.BarChart),e.prototype.GetFillColor=function(e){return this.color(this.mode)},e.prototype.BuildChartLegend=function(e){var t=this,n=[];n.push(this.yAxisTitle),n.push(this.y2AxisTitle);var r=d3.select("#"+e+" .chart-box").node().getBBox(),i=$("#"+e+" .chart-container")[0].getBoundingClientRect();setTimeout(function(){var i=d3.select("#"+e+" .chart-box").selectAll(".legend").data(n).enter().append("g").attr("transform",function(e,n){return"translate("+(t.chartRatio*t.width-t.margin.left/2)+","+n*15+")"}).attr("class","legend siebui-combo-legend");i.append("rect").attr("width",function(e,n){return t.legendwidth}).attr("height",function(e,n){return t.legendheight}).style("fill",function(e,n){return t.mode=n,t.GetFillColor()}),i.append("text").text(function(e,t){return n[t]}).attr("y",t.legendheight).attr("x",t.legendwidth+5).attr("font-size",13),d3.selectAll(".chart-box .bars rect").classed("rectfill",!1),d3.selectAll(".chart-box .siebui-charts-scatterplot-circle").classed(t.GetFillClassName(0),!1).classed(t.GetFillClassName(1),!0),r=d3.select("#"+e+" .chart-box").node().getBBox()},0)},e.prototype.DetermineSize=function(){SiebelAppFacade.ComboChart.superclass.DetermineSize.apply(this,arguments);var e=this;this.y2AxisTitle&&(e.effwidth=e.effwidth-e.margin.left)},e.prototype.BuildAxis=function(e,t){SiebelAppFacade.ComboChart.superclass.BuildAxis.apply(this,arguments);if(this.y2AxisTitle){var n=this,r=d3.scaleLinear();n.scaleY2=r;var i;i=Math.max.apply(Math,this.yAxisData_orig[1]),r.domain([0,i+10]).range([n.effheight-$(".x.label").height()-10-n.margin.bottom,0]).nice();var s=d3.axisRight().scale(r).tickFormat(function(e){return n.GetYAxisData.call(n,e,!0)}),o=e.append("g").attr("class","y2 axis").attr("transform","translate( "+n.effwidth+", 0 )").call(s);o.selectAll("text").attr("class","siebui-barchart-y2axis-label"),e.append("text").attr("class","y2 label  siebui-axis-label siebui-barchart-yaxis-title").attr("text-anchor","end").attr("text-anchor","middle").attr("transform","rotate(-90)"
).text(n.y2AxisTitle);var u=d3.select("#"+t+" .y2.label").node().getBBox(),a=d3.select("#"+t+" .y2.axis").node().getBBox(),f=a.width+u.height;d3.select("#"+t+" .y2.label").attr("y",n.effwidth+f+10)}},e.prototype.draw=function(e){var t=this;this.yAxisData_orig=this.yAxisData,this.yAxisData=t.yAxisData.slice(0,1),this.mode=0,SiebelAppFacade.ComboChart.superclass.draw.apply(this,arguments),this.mode=1,this.options.yAxisData=t.yAxisData_orig.slice(1),this.options.scaleY=this.scaleY2,this.options.scaleX=this.scaleX,this.options.color=this.color;var n=new SiebelAppFacade.LineChart(this.options);n.draw(e),t=this},e}(),SiebelAppFacade.ComboChart})),typeof SiebelAppFacade.ChartBuilderPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.ChartBuilderPW"),define("siebel/ChartBuilderPW",["siebel/FieldPW","siebel/combochart","siebel/stackedbarchart","siebel/linechart","siebel/piechart","siebel/barchart","siebel/horizontalbarchart"],function(){return SiebelAppFacade.ChartBuilderPW=function(){function e(){SiebelAppFacade.ChartBuilderPW.superclass.constructor.apply(this,arguments)}function n(e,t){var n={seriesIndex:0,pointIndex:0,data:[]},r="",i=$(t.target);return n.pointIndex=Number(i.attr("xindex")),n.seriesIndex=Number(i.attr("yindex")),n.seriesIndex=n.seriesIndex?n.seriesIndex:0,i=null,n}function r(){var e=this.Get("Type"),t={};if(!this.Get("XAxisData")&&!this.Get("YAxisData")&&!this.Get("ZAxisData"))return;i.call(this,t);var n=this.GetEl();if(!this.control==0&&!this.control.GetApplet()==0){var r="#"+this.control.GetApplet().GetFullId()+" .siebui-funnel-chart";$(r).hide()}n.parent().addClass("siebui-charts-container"),n.addClass("siebui-charts"),!e==0&&e.search("Bar")!=-1?(n.unbind(),a.call(this,t)):!e!=0||e.search("2dPie")==-1&&e.search("2dDoughnut")==-1?e.search("2dLine")!=-1?(n.unbind(),u.call(this,t)):e.search("2dScatter")!=-1?(n.unbind(),u.call(this,t)):e.search("2dSpline")!=-1?(n.unbind(),u.call(this,t)):e.search("Combo")!=-1&&(n.unbind(),s.call(this,t)):(n.unbind(),o.call(this,t));var f=n.parents("table");for(var l=0;l<f.length;l++)if(f.eq(l).find(".siebui-funnel-chart").length===1){f.eq(l).find(".siebui-funnel-chart").eq(0).hide();break}f=null,n=null}function i(e){e.chartele=this.GetEl(),e.chartele.html(""),e.ChartDivId=e.chartele.attr("id"),e.invertxz=!this.Get("InvertXZ?")||this.Get("InvertXZ?")==="0"?!1:!0,e.width=this.Get("Width"),e.height=this.Get("Height");var t=this.Get("XAxisData")?$.parseJSON(this.Get("XAxisData")):{},n=this.Get("YAxisData")?$.parseJSON(this.Get("YAxisData")):{},r=this.Get("ZAxisData")?$.parseJSON(this.Get("ZAxisData")):{};return e.objxaxis=e.invertxz?l.call(this,r):t,e.objzaxis=e.invertxz?c.call(this,t):r,e.objyaxis=e.invertxz?f.call(this,e.objxaxis,e.objzaxis,n):n,e.defaultChartFont=this.Get("DefaultChartFont"),e.font=!this.Get("Font")||this.Get("Font")===""?e.defaultChartFont:this.Get("Font"),e.fontSize=!this.Get("FontSize")||this.Get("FontSize")===""?"15pt":this.Get("FontSize")+"pt",e.fontColor=!this.Get("TitleColor")||this.Get("TitleColor")===""?h.call(this,"0 0 0"):h.call(this,this.Get("TitleColor")),e.fontWeight=!this.Get("FontStyle")||this.Get("FontStyle")===""||this.Get("FontStyle")==="BoldItalic"||this.Get("FontStyle")==="Bold"?"bold":"initial",e.fontStyle=!this.Get("FontStyle")==0&&this.Get("FontStyle")==="BoldItalic"||this.Get("FontStyle")==="Italic"?"italic":"initial",e.fontEffect=!this.Get("FontEffect")||this.Get("FontEffect")===""?"":this.Get("FontEffect"),e.title=this.Get("Title"),e.stacked=this.Get("Type")==="2dStackedBar"||this.Get("Type")==="3dStackedBar"?!0:!1,e.xAxisShowLegend=e.invertxz?!this.Get("ZAxisShowLegend?")||this.Get("ZAxisShowLegend?")==="1":!this.Get("XAxisShowLegend?")||this.Get("XAxisShowLegend?")==="1",e.xAxisSort=this.Get("XAxisSort"),e.xAxisSortField=this.Get("XAxisSortField"),e.xAxisTitle=e.invertxz?this.Get("ZAxisTitle"):this.Get("XAxisTitle"),e.xAxisTitleColor=h.call(this,this.Get("XAxisTitleColor")),e.xAxisTitleFont=!this.Get("XAxisTitleFont")||this.Get("XAxisTitleFont")===""?e.font:this.Get("XAxisTitleFont"),e.xAxisTitleSize=!this.Get("XAxisTitleSize")||this.Get("XAxisTitleSize")===""?e.fontSize:this.Get("XAxisTitleSize")+"pt",e.xAxisTitleStyle=!this.Get("XAxisTitleStyle")==0&&this.Get("XAxisTitleStyle")==="BoldItalic"||this.Get("XAxisTitleStyle")==="Italic"?"italic":"initial",e.xAxisTitleWeight=!this.Get("XAxisTitleStyle")||this.Get("XAxisTitleStyle")===""||this.Get("XAxisTitleStyle")==="BoldItalic"||this.Get("XAxisTitleStyle")==="Bold"?"bold":"initial",e.xAxisTitleEffect=!this.Get("XAxisTitleEffect")||this.Get("XAxisTitleEffect")===""?"":this.Get("XAxisTitleEffect"),e.xAxisAngle=this.Get("XAxisVerticalText?")==="1"?90:45,e.xAxisLabelFont=!this.Get("XAxisLabelFont")||this.Get("XAxisLabelFont")===""?"Trebuchet MS, Arial, Helvetica, sans-serif":this.Get("XAxisLabelFont"),e.xAxisLabelSize=!this.Get("XAxisLabelSize")||this.Get("XAxisLabelSize")===""?"10pt":this.Get("XAxisLabelSize")+"pt",e.xAxisLabelColor=!this.Get("XAxisLabelColor")||this.Get("XAxisLabelColor")===""?h.call(this,"102 102 102"):h.call(this,this.Get("XAxisLabelColor")),e.xAxisLabelWeight=!this.Get("XAxisLabelStyle")==0&&this.Get("XAxisLabelStyle")==="BoldItalic"||this.Get("XAxisLabelStyle")==="Bold"?"bold":"initial",e.xAxisLabelStyle=!this.Get("XAxisLabelStyle")==0&&this.Get("XAxisLabelStyle")==="BoldItalic"||this.Get("XAxisLabelStyle")==="Italic"?"italic":"initial",e.xAxisLabelEffect=!this.Get("XAxisLabelEffect")||this.Get("XAxisLabelEffect")===""?"":this.Get("XAxisLabelEffect"),e.xAxisDisplayFormat=!this.Get("XAxisDisplayFormat")||this.Get("XAxisDisplayFormat")===""?"":"%",e.xAxisDataType=!this.Get("XAxisDataType")||this.Get("XAxisDataType")===""?"Number":this.Get("XAxisDataType"),e.xAxisMax=!this.Get("XAxisMaximum")||this.Get("XAxisMaximum")===""?null:parseInt(this.Get("XAxisMaximum")),e.xAxisMin=!this.Get("XAxisMinimum")||this.Get("XAxisMinimum")===""?null:parseInt(this.Get("XAxisMinimum")),e.xAxisDiv=!this.Get("XAxisNumDivisions")||this.Get("XAxisNumDivisions"
)===""?10:parseInt(this.Get("XAxisNumDivisions")),e.y2AxisTitleColor=h.call(this,this.Get("Y2AxisTitleColor")),e.yAxisGridColor=this.Get("YAxisGridColor"),e.yAxisTitle=this.Get("YAxisTitle"),e.yAxisTitleFont=!this.Get("YAxisTitleFont")||this.Get("YAxisTitleFont")===""?e.font:this.Get("YAxisTitleFont"),e.yAxisTitleSize=!this.Get("YAxisTitleSize")||this.Get("YAxisTitleSize")===""?e.fontSize:this.Get("YAxisTitleSize")+"pt",e.yAxisTitleColor=h.call(this,this.Get("YAxisTitleColor")),e.yAxisTitleWeight=!this.Get("YAxisTitleStyle")||this.Get("YAxisTitleStyle")===""||this.Get("YAxisTitleStyle")==="BoldItalic"||this.Get("YAxisTitleStyle")==="Bold"?"bold":"initial",e.yAxisTitleStyle=!this.Get("YAxisTitleStyle")==0&&this.Get("YAxisTitleStyle")==="BoldItalic"||this.Get("YAxisTitleStyle")==="Italic"?"italic":"initial",e.yAxisTitleEffect=!this.Get("YAxisTitleEffect")||this.Get("YAxisTitleEffect")===""?"":this.Get("YAxisTitleEffect"),e.yAxisLabelFont=!this.Get("YAxisLabelFont")||this.Get("YAxisLabelFont")===""?"Trebuchet MS, Arial, Helvetica, sans-serif":this.Get("YAxisLabelFont"),e.yAxisLabelSize=!this.Get("YAxisLabelSize")||this.Get("YAxisLabelSize")===""?"10pt":this.Get("YAxisLabelSize")+"pt",e.yAxisLabelColor=!this.Get("YAxisLabelColor")||this.Get("YAxisLabelColor")===""?h.call(this,"102 102 102"):h.call(this,this.Get("YAxisLabelColor")),e.yAxisLabelWeight=!this.Get("YAxisLabelStyle")==0&&this.Get("YAxisLabelStyle")==="BoldItalic"||this.Get("YAxisLabelStyle")==="Bold"?"bold":"initial",e.yAxisLabelStyle=!this.Get("YAxisLabelStyle")==0&&this.Get("YAxisLabelStyle")==="BoldItalic"||this.Get("YAxisLabelStyle")==="Italic"?"italic":"initial",e.yAxisLabelEffect=!this.Get("YAxisLabelEffect")||this.Get("YAxisLabelEffect")===""?"":this.Get("YAxisLabelEffect"),e.yAxisMax=!this.Get("YAxisMaximum")||this.Get("YAxisMaximum")===""?null:parseInt(this.Get("YAxisMaximum")),e.yAxisMin=!this.Get("YAxisMinimum")||this.Get("YAxisMinimum")===""?null:parseInt(this.Get("YAxisMinimum")),e.yAxisDiv=!this.Get("YAxisNumDivisions")||this.Get("YAxisNumDivisions")===""?this.Get("YAxisNumDivisions"):parseInt(this.Get("YAxisNumDivisions")),e.yAxisDataType=!this.Get("YAxisDataType")||this.Get("YAxisDataType")===""?this.Get("Y2AxisDataType"):this.Get("YAxisDataType"),e.yAxisDispFormat=!this.Get("YAxisDisplayFormat")||this.Get("YAxisDisplayFormat")===""?"":this.Get("YAxisDisplayFormat"),e.zAxisBarColours=!this.Get("ZAxisBarColours")||this.Get("ZAxisBarColours")===""?this.Get("ZAxisBarColours"):p.call(this,this.Get("ZAxisBarColours")),e.zAxisDisplayFormat=this.Get("ZAxisDisplayFormat"),e.zAxisShowLegend=this.Get("ZAxisShowLegend?"),e.zAxisSort=this.Get("ZAxisSort"),e.zAxisTitle=e.invertxz?this.Get("XAxisTitle"):this.Get("ZAxisTitle"),e.zAxisTitleColor=h.call(this,this.Get("ZAxisTitleColor")),e.zAxisVerticalText=this.Get("ZAxisVerticalText"),e.showlegend=!e.objzaxis==0&&e.objzaxis.length>0&&e.objzaxis[0].label!==""?!0:!1,e.legendFont=!this.Get("LegendFont")||this.Get("LegendFont")===""?"Trebuchet MS, Arial, Helvetica, sans-serif":this.Get("LegendFont"),e.legendFontSize=!this.Get("LegendFontSize")||this.Get("LegendFontSize")===""?"10pt":this.Get("LegendFontSize")+"pt",e.legendFontWeight=!this.Get("LegendFontStyle")==0&&this.Get("LegendFontStyle")==="Bold"||this.Get("LegendFontStyle")==="BoldItalic"?"bold":"initial",e.legendFontStyle=!this.Get("LegendFontStyle")==0&&this.Get("LegendFontStyle")==="Italic"||this.Get("LegendFontStyle")==="BoldItalic"?"italic":"initial",e.legendFontEffect=!this.Get("LegendFontEffect")==0?this.Get("LegendFontEffect"):"",e.legendColor=!this.Get("LegendTextColor")||this.Get("LegendTextColor")===""?h.call(this,"102 102 102"):h.call(this,this.Get("LegendTextColor")),e.type=this.Get("Type"),e.showShadow=!1,e.shadowang=135,e.shadowshift=1,e.xoffset,e.yoffset,e.defaultBarPadding=20,e.defaultBarMargin=40,e.defaultBarWidth=120,e.customBarWidth=(e.width-(e.objxaxis.length*e.defaultBarMargin+e.objzaxis.length*e.defaultBarPadding)-150)/(e.objxaxis.length*e.objzaxis.length),e.varxaxis="",e.varyaxis="",e.y2AxisTitle=this.Get("Y2AxisTitle"),e.GraphicObject=!this.Get("GraphicObject")||this.Get("GraphicObject")===""?null:$.parseJSON(this.Get("GraphicObject")),e}function s(e){var t=this.GetEl();t.html("");var n=t.attr("id"),r=new SiebelAppFacade.ComboChart($.extend(e,{xAxisData:e.objxaxis,yAxisData:e.objyaxis,zAxisData:e.objzaxis,chartTitle:e.title}));r.draw(n),this.BindEvents()}function o(e){var t=this.GetEl();t.html("");var n=t.attr("id"),r=new SiebelAppFacade.PieChart($.extend(e,{xAxisData:e.objxaxis,yAxisData:e.objyaxis,zAxisData:e.objzaxis,chartTitle:e.title,yAxisDataType:this.Get("YAxisDataType"),y2AxisDataType:this.Get("Y2AxisDataType")}));r.draw(n),this.BindEvents()}function u(e){var t=this.GetEl();t.html("");var n=t.attr("id");if(e.type=="2dScatter"){var r=[],i=[],s=[],o=[],u=[];for(var a=0;a<e.objyaxis.length;a++)for(var f=0;f<e.objyaxis[a].length;f++)isNaN(parseFloat(e.objyaxis[a][f][0],10))?u.push(e.objzaxis[a]):o.push([a].concat(e.objyaxis[a][f],e.objzaxis[a]));for(var a=0;a<o.length;a++)r.push(o[a][1]),i.push([o[a][2]]),s.push(o[a][3]);u.length>0&&(s=s.concat(u)),e.objxaxis=r,e.objyaxis=i,e.objzaxis=s,this.SetProperty("XAxisData",JSON.stringify(r)),this.SetProperty("ModifiedZAxisData",JSON.stringify(e.objzaxis))}var l=new SiebelAppFacade.LineChart($.extend(e,{xAxisData:e.objxaxis,yAxisData:e.objyaxis,zAxisData:e.objzaxis,chartTitle:e.title}));l.draw(n),this.BindEvents()}function a(e){var t=this.GetEl();t.html("");var n=t.attr("id"),r=$.extend(e,{xAxisData:e.objxaxis,yAxisData:e.objyaxis,zAxisData:e.objzaxis,chartTitle:e.title}),i;if(e.type=="2dHorizBar"){r.xAxisData=e.objyaxis,r.yAxisData=e.objxaxis;var s=e.xAxisTitle;r.xAxisTitle=e.yAxisTitle,r.yAxisTitle=s,r.xAxisMax=e.yAxisMax,r.xAxisMin=e.yAxisMin,r.xAxisDiv=e.yAxisDiv,r.width=this.Get("Width"),r.height=this.Get("Height"),i=new SiebelAppFacade.HorizontalBarChart(r)}else e.type=="2dStackedBar"||e.type==="3dStackedBar"?i=new SiebelAppFacade.StackedBarChart(r):i=new 
SiebelAppFacade.BarChart(r);i.draw(n),this.BindEvents()}function f(e,t,n){var r=[];for(var i=0;i<t.length;i++){var s=[];r.push(s)}for(var o=0;o<e.length;o++)for(var i=0;i<r.length;i++)r[i].push(n[o][i]);return r}function l(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n].label);return t}function c(e){var t=[];for(var n=0;n<e.length;n++){var r={};r.label=e[n],t.push(r)}return t}function h(e){var t=[];return t=e.split(" "),"#"+d(t[0])+d(t[1])+d(t[2])}function p(e){var t=[],n=[];t=e.split(",");for(var r=0;r<t.length;r++){var i=[];i=t[r].split(" "),n.push("#"+d(i[0])+d(i[1])+d(i[2]))}return n}function d(e){var t=parseInt(e).toString(16);return t.length==1?"0"+t:t}var t="";return SiebelJS.Extend(e,SiebelAppFacade.FieldPW),e.prototype.SetValue=function(e,t){r.call(this)},e.prototype.Init=function(){var e=$(this.GetEl());e.empty(),SiebelAppFacade.ChartBuilderPW.superclass.Init.apply(this)},e.prototype.BindEvents=function(){var e=$(this.GetEl()),t=this.Get("XAxisTitle"),r=this.Get("YAxisTitle"),i=this.Get("ZAxisTitle"),s=!this.Get("XAxisDisplayFormat")||this.Get("XAxisDisplayFormat")===""?"":"%",o=this.Get("XAxisData")?$.parseJSON(this.Get("XAxisData")):[],u=this.Get("ZAxisData")?this.Get("Type").search("2dScatter")!=-1&&this.Get("ModifiedZAxisData")?$.parseJSON(this.Get("ModifiedZAxisData")):$.parseJSON(this.Get("ZAxisData")):[];e.off("click.dataclick",".siebui-chart-data"),e.on("click.dataclick",".siebui-chart-data",{ctx:this},function(e,t,r,i,s){var a=e.data.ctx.Get("Type"),f=!1;f=e.data.ctx.Get("InvertXZ?");var l=n.call(this,a,e);t=l.seriesIndex,r=l.pointIndex,i=l.data;if(a.search("2dScatter")!=-1){var c="";i[0]=o[r];if(u&&t<u.length){c=u[r].label;var h=JSON.parse(e.data.ctx.Get("ZAxisData"))||[];for(var p=0,d=h.length;p<d;p++)if(h[p].label===c){t=p;break}}f?e.data.ctx.ExecuteMethod("ScatterDrillDown",r,t,i,c):e.data.ctx.ExecuteMethod("ScatterDrillDown",t,r,i,c)}else a.search("Combo")!=-1?$(this).attr("DuplicateEvent")!=="true"?($(this).attr("DuplicateEvent","true"),e.data.ctx.ExecuteMethod("BarDrillDown",0,r,i)):$(this).attr("DuplicateEvent",""):f?e.data.ctx.ExecuteMethod("BarDrillDown",r,t,i):e.data.ctx.ExecuteMethod("BarDrillDown",t,r,i)})},e}(),SiebelApp.S_App.PluginBuilder.AttachPW(consts.get("SWE_CTRL_CHARTCONTROL"),SiebelAppFacade.ChartBuilderPW,function(e){var t=e.GetApplet().GetPModel();return t.Get("EnableClientChart")==="TRUE"&&t.Get("CustomFormat")==="TRUE"&&(t.Get("Type")==="2dPie"||t.Get("Type")==="2dLine"||t.Get("Type")==="2dSpline"||t.Get("Type")==="2dScatter"||t.Get("Type")==="2dDoughnut"||t.Get("Type")==="Combo"||t.Get("Type").search("Bar")!=-1&&t.Get("Type")!="3dHorizBar")}),SiebelAppFacade.ChartBuilderPW})),typeof SiebelAppFacade.ChartImagePW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.ChartImagePW"),define("siebel/ChartImagePW",["siebel/FieldPW"],function(){return SiebelAppFacade.ChartImagePW=function(){function e(){SiebelAppFacade.ChartImagePW.superclass.constructor.apply(this,arguments)}return SiebelJS.Extend(e,SiebelAppFacade.FieldPW),e.prototype.SetValue=function(e,t){var n=this.GetEl();if(!this.control==0&&!this.control.GetApplet()==0){var r="#"+this.control.GetApplet().GetFullId()+" .siebui-funnel-chart";$(r).hide()}n.parent().hasClass("siebui-charts-container")||n.parent().addClass("siebui-charts-container"),n.hasClass("siebui-charts")||n.addClass("siebui-charts"),n.html(e||"");for(var i=0;i<this.GetEl().parents("table").length;i++)if($(this.GetEl().parents("table")[i]).find(".siebui-funnel-chart").length===1){$($(this.GetEl().parents("table")[i]).find(".siebui-funnel-chart")[0]).hide();break}},e}(),SiebelApp.S_App.PluginBuilder.AttachPW(consts.get("SWE_CTRL_CHARTCONTROL"),SiebelAppFacade.ChartImagePW,function(e){var t=e.GetApplet().GetPModel();return t.Get("EnableClientChart")!=="TRUE"}),SiebelAppFacade.ChartImagePW})),typeof SiebelAppFacade.ComboButtonPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.ComboButtonPW"),define("siebel/combobuttonpw",["siebel/dropdownpw"],function(){var e;return SiebelAppFacade.ComboButtonPW=function(){function r(){SiebelAppFacade.ComboButtonPW.superclass.constructor.apply(this,arguments)}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=SiebelJS.Dependency("SiebelAppFacade.HTMLTemplateManager"),n="Button";return SiebelJS.Extend(r,SiebelAppFacade.DropDownPW),r.prototype.ShowUI=function(){var e=this.Get("ChartTypeLov"),r=$.parseJSON(e),i=!0,s=SiebelApp.Utils.IsTrue(SiebelApp.S_App.IsAutoOn()),o="",u,a,f="",l="",c="",h=!0,p=this.Get("Type"),d="";this.GetEl()&&this.GetEl().attr("name")&&this.SetProperty("ChartTypePrefix",this.GetEl().attr("name"));for(var v=0,m=r.length;v<m;v++){if(r[v][1]==="3dSpline"||r[v][1]==="3dLine"||r[v][1]==="3dPie"||r[v][1]==="3dHorizBar")continue;p===r[v][1]?h=!0:h=!1,this.GetEl()&&this.GetEl().attr("name")?d=this.GetEl().attr("name")+r[v][1]:d=r[v][1],o=s?' rn="'+r[v][1]+'" un="'+r[v][0]+'" ot="Button"':" ",a=t.GenerateMarkup({type:n,id:d,className:(h===!0?" ":"siebui-chart-icon-shadow ")+this.Get(r[v][1]),value:this.Get(r[v][1])==="siebui-chart-icon-spline"?r[v][0]:"",attrs:'data-display="'+r[v][0]+'" tabindex="'+"0"+'" title="'+r[v][0]+'" '+'aria-label="'+r[v][0]+'" '+o+(i===!0?" ":'disabled="disabled"')+(h===!0?" chartselected='true'":"")}),r[v][1].charAt(0)==="2"?f+=a:l+=a}c="<div style='display: inline-block;'><span class='mceGridLabel siebui-label mceLabel'>2D:</span>"+f+"</div><div style='display: inline-block;'><span class='mceGridLabel siebui-label mceLabel'>3D:</span>"+l+"</div>",this.GetEl()&&this.GetEl().replaceWith(c),SiebelAppFacade.ComboButtonPW.superclass.ShowUI.call(this)},r.prototype.BindEvents=function(t){var n=this.Get("ChartTypeLov"),r=$.parseJSON(n);for(var i=0,s=r.length;i<s;i++){var o="",u=r[i][0];this.Get("ChartTypePrefix")?o="#"+this.Get("ChartTypePrefix")+r[i][1]:o="#"+r[i][1],$(o).bind("click",{ctx:this},function(t,n){return function(){n.ExecuteMethod("SetActiveControl",n.control),n.ExecuteMethod("LeaveField",n.control,t,!0),$("html").find("[chartselected='true']").length===1&&!
$("html").find("[chartselected='true']").hasClass("siebui-chart-icon-shadow")&&($("html").find("[chartselected='true']").addClass("siebui-chart-icon-shadow"),$("html").find("[chartselected='true']").removeAttr("chartselected")),$(this).attr("chartselected","true"),$(this).removeClass("siebui-chart-icon-shadow"),n.OnControlEvent(e.get("PHYEVENT_CONTROL_BLUR"),n.control,t);var r=n.Get("GetControls").Go;if(!r){var i=n.Get("GetControls");for(var s in i)if(i.hasOwnProperty(s)&&i[s].GetMethodName&&i[s].GetMethodName()==="GetChart"){r=i[s];break}}var o=r.GetMethodPropSet(),u=o.Clone(),a={};n.OnControlEvent(e.get("PHYEVENT_INVOKE_CONTROL"),r.GetMethodName(),u,a)}}(u,this))}SiebelAppFacade.ComboButtonPW.superclass.BindEvents.call(this)},r}(),SiebelApp.S_App.PluginBuilder.AttachPW(consts.get("SWE_CTRL_COMBOBOX"),SiebelAppFacade.ComboButtonPW,function(t){return e=t.GetApplet().GetPModel(),t&&t.GetMethodName()==="PickChartType"&&e.Get("ShowAsButton")==="TRUE"}),SiebelAppFacade.ComboButtonPW})),typeof SiebelAppFacade.RoutePW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.RoutePW"),define("siebel/RoutePW",["siebel/FieldPW"],function(){return SiebelAppFacade.RoutePW=function(){function s(){i===0&&(i=1,require([r+"//elocation.oracle.com/elocation/jslib/oracleelocation.js",r+"//elocation.oracle.com/mapviewer/fsmc/jslib/oraclemaps.js"],function(){i=2,typeof window.MVMapView=="undefined"&&(i=3,SiebelJS.Log("Error while loading Oracle ELocation API... "))}))}function o(){SiebelAppFacade.RoutePW.superclass.constructor.apply(this,arguments);var e,t,n;this.SetMapView=function(t){e=t},this.GetMapView=function(){return e},this.SetContainerId=function(e){t=e},this.GetContainerId=function(){return t},this.SetDestAddressField=function(e){n=e},this.GetDestAddressField=function(){return n},setTimeout(s,0)}function u(e){var t=r+"//elocation.oracle.com/mapviewer",n=this;return typeof window.MVMapView=="undefined"?(SiebelJS.Log("Unable to load the Oracle Spatial Map APIs. Please revisit the view"),!1):(n.SetMapView(new MVMapView(document.getElementById(e),t)),n.GetMapView().addBaseMapLayer(new MVBaseMap("elocation_mercator.world_map"),a(this)),!0)}function a(){var e=20,t=0,n=1,r=arguments[0];r||(r=this);var i=MVSdoGeometry.createPoint(t,e,8307);r.GetMapView().setCenter(i),r.GetMapView().setZoomLevel(n),r.GetMapView().addNavigationPanel("EAST"),r.GetMapView().setLoadingIconVisible()}function f(e){var t=/^\s*lon lat:\s*-?((\d\d*\.\d*)|(\d\d*)|(\.\d\d*))\s*-?((\d\d*\.\d*)|(\d\d*)|(\.\d\d*))\s*$/;if(e&&t.test(e)){var n=e.indexOf("lon lat:");return e=e.substr(n+"lon/lat:".length).replace(/^\s+|\s+$/,""),n=e.indexOf(" "),{lon:e.substr(0,n),lat:e.substr(n)}}return e}function l(e,t){}function c(e){return e?e.replace("'","\\'"):e}function h(e,t){var n="<font class=OraHeaderSubSub>";n+=e.streetLine&&e.streetLine!="null"&&e.streetLine.length>0?e.streetLine+"<BR>"+e.localityLine:e.localityLine,e.country!=undefined&&e.country!="undefined"&&(n+=", "+e.country);var r=c((e.streetLine&&e.streetLine!="null"&&e.streetLine.length>0?e.streetLine+", "+e.localityLine:e.localityLine)+", "+e.country);return n+="</font>",n}function p(e){function o(n){var r=t.GetContainerId()+"_status";i.html(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_LOCATION_SERVICE_ERROR")),v.call(t,e)}function a(n){m.call(t,n,e)}var t=this,n=t.GetContainerId(),r=$("#"+n+"_dialog"),i=$("#"+n+"_status");r.dialog("open"),i.html(" ");if(!u.call(t,n))return;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(a,o,{timeout:3e4});else{var s=t.GetContainerId()+"_status";i.html(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_LOCATION_SERVICE_ERROR")),v.call(t,e)}}function d(e){var t=e.geom;e.accuracy<3?this.GetMapView().setCenterAndZoomLevel(t,10):e.accuracy==3?this.GetMapView().setCenterAndZoomLevel(t,7):e.accuracy==4?this.GetMapView().setCenterAndZoomLevel(t,6):e.accuracy==5?this.GetMapView().setCenterAndZoomLevel(t,5):this.GetMapView().setCenterAndZoomLevel(t,4)}function v(t){var r=this;a.call(this),this.GetMapView().display(),e.geocode(t,function(e,t){if(e.length==0)SiebelJS.Log("No address is found! "+t);else if(e.length==1){var i=e[0];if(i.accuracy<1)SiebelJS.Log("No address is found! "+t);else{var s="<span class='"+n.get("DEFAULT_SELECTED_MAP_ROW_IMAGE")+"' ></span>",o=MVSdoGeometry.createPoint(i.x,i.y,8307),u=MVFOI.createHTMLFOI("1",o,s);r.GetMapView().addFOI(u),d.call(r,u)}}else SiebelJS.Log("Multiple addresses are found! "+t)})}function m(e,t){var n=this;a.call(n),this.GetMapView().display();var r=[],i=[];e.lon=e.coords.longitude,e.lat=e.coords.latitude,r[0]=e,r[1]=f.call(n,t),g.call(n,r)}function g(t){var n=this,r=new Array;r[0]=t;var i="#CC00CC",s=n.GetContainerId()+"_status";e.getDirections(r,l,function(t,n,r,i,o,u){switch(t){case OracleELocation.ERROR_GEOCODE_FAILED:$("#"+s).html(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_ERROR_GEOCODE_FAILED"));break;case OracleELocation.ERROR_ROUTE_ADDR_INVALID:$("#"+s).html(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_ERROR_ROUTE_ADDR_INVALID"));break;case OracleELocation.ERROR_ROUTE_FAILED:$("#"+s).html(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_ERROR_ROUTE_FAILED"));break;case OracleELocation.ERROR_ROUTE_NOT_FOUND:$("#"+s).html(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_ERROR_ROUTE_NOT_FOUND"));break;default:}},{ignoreGeocodeErrorsForBatchRequests:!1},{mapview:n.GetMapView(),zoomToFit:!0,removePreviousRoutes:!0,drawMarkers:!0,getMarkerInfoStr:h,routeStyles:[[{render_style:{color:i,opacity:127,width:5},typeName:"Customer",label:"{time}. {distance}."}]]})}function y(n){var s=n.data.ctx,o=null;if(s.Get("IsInQueryMode")||i!==2)return;o=$(this);if((o.prop("tagName")||"").toLowerCase()==="a"&&!o.is(":disabled")){var u=s.GetDestAddressField();if(!t.IsEmpty(u)){var a=s.Get("GetRawRecordSet"),f=s.Get("GetSelection");if(f<0)return;var l=a[f][u];e||(e=new OracleELocation(r+"//elocation.oracle.com/elocation")),p.call(s,l)}SiebelApp.S_App.uiStatus.Free(),n.preventDefault()}o=null
}var e,t=SiebelJS.Dependency("SiebelApp.Utils"),n=SiebelJS.Dependency("SiebelApp.Constants"),r=window.location.protocol,i=0;return SiebelJS.Extend(o,SiebelAppFacade.FieldPW),o.prototype.Init=function(){var e=this,t=this.Get("GetFullId");this.SetContainerId("RouteMap_"+t);var n=e.control.GetPMPropSet();n&&n.GetProperty("MapDestAddress")&&e.SetDestAddressField(n.GetProperty("MapDestAddress"));var r,i=$("#"+t),s=this.GetContainerId();i.append("<div class='siebui-map' id='"+s+"_dialog"+"'> <div style='width: 100%; height: 95%' id='"+s+"' >  </div><div id='"+s+"_status' ></div> </div> "),r=$("#"+s+"_dialog"),r.dialog({modal:!0,autoOpen:!1,appendTo:"#s_"+e.Get("GetFullId")+"_div",title:e.control.GetDisplayName,height:500,width:800,close:function(){$(this).hide(),e.EndLife()}})},o.prototype.ShowUI=function(){var e=n.get("SWE_CTRL_LINK"),t=this,r=this.GetEl(),i=this.ExecuteMethod("CanInvokeMethod",this.control.GetMethodName()),s=this.Get("GetAppletLabel"),o=i?this.control.GetEnabledBmp():this.control.GetDisabledBmp(),u=this.Get("GridFormContent")?this.control.GetSeq():"0",a=this.control.GetDisplayName();s!==""&&(s+=":");if(r){if(SiebelApp.S_App.IsConfigMode()===!0)var f=this.PrepareConfigAttrInfo(r);var l=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e,id:this.control.GetInputName(),className:" siebui-icon-"+(this.control.GetMethodName()||"").toLowerCase(),attrs:'name="'+this.control.GetInputName()+'" data-display="'+a+'" tabindex="'+u+'" title="'+s+a+'" '+'aria-label="'+s+a+'" '+(i===!0?" ":'disabled="disabled"')+(SiebelApp.S_App.IsConfigMode()===!0?f:"")});r.replaceWith(l),this.InjectAutomationAttr(this.GetEl())}},o.prototype.BeginQuery=function(){var e=this.GetEl();e&&e.hide()},o.prototype.EndQuery=function(){var e=this.GetEl();e&&e.show()},o.prototype.SetState=function(e,n,r){var i=this.GetEl(r);if(i){if(this.Get("IsInQueryMode")){i.hide();return}var s=this.GetDestAddressField();if(!t.IsEmpty(s)){var o=this.Get("GetRawRecordSet");if(o.length==0){i.hide();return}var u=this.Get("GetSelection");if(u<0){i.hide();return}var a=o[u][s];t.IsEmpty(a)?i.hide():i.show()}else i.hide()}},o.prototype.BindEvents=function(){var e=this.GetEl(),t=this.Helper("EventHelper");e&&t.Manage(e,"click",{ctx:this},y)},o.prototype.EndLife=function(){delete this.GetMapView(),delete e},o}(),SiebelApp.S_App.PluginBuilder.AttachPW(consts.get("SWE_PST_BUTTON_CTRL"),SiebelAppFacade.RoutePW,function(e){return e&&e.GetMethodName()==="ShowRoute"}),SiebelAppFacade.RoutePW})),typeof SiebelAppFacade.JSTreePW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.JSTreePW"),define("siebel/jstreepw",["siebel/plaintxtpw","3rdParty/jstree/jquery.jstree.js"],function(){return SiebelAppFacade.JSTreePW=function(){function t(){SiebelAppFacade.JSTreePW.superclass.constructor.apply(this,arguments)}var e=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(t,SiebelAppFacade.PlainTextPW),t.prototype.BindEvents=function(){SiebelAppFacade.JSTreePW.superclass.BindEvents.apply(this,arguments);var e=this.GetEl();e&&e.length&&e.bind("after_close.jstree after_open.jstree",function(){$(window).trigger("resizeTile")})},t.prototype.SetValue=function(e,t){var n=this.GetEl(t),r=$.parseJSON(e),i=SiebelApp.S_App.GetDirection();$(n).jstree("destroy"),$(n).jstree({core:{data:[r],rtl:i?!0:!1,themes:{url:!0,dir:SIEBEL_BUILD+"3rdParty/jstree/themes",name:"default",icons:!1,dots:!1},check_callback:!0,worker:!1},plugins:["ui","themes","html_data","hotkeys","crrm"]})},t}(),SiebelApp.S_App.PluginBuilder.AttachPW(consts.get("SWE_CTRL_PLAINTEXT"),SiebelAppFacade.JSTreePW,function(e){return e&&e.GetUIType()==="PlainText"&&e.GetHTMLAttr()==="JSTree"}),SiebelAppFacade.JSTreePW})),typeof SiebelAppFacade.JSrelhierPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.JSrelhierPW"),define("siebel/JSrelhierPW",["siebel/plaintxtpw"],function(){return SiebelAppFacade.JSrelhierPW=function(){function t(){SiebelAppFacade.JSrelhierPW.superclass.constructor.apply(this,arguments)}function n(e,t,n){var r="",i=!1,s=e.length,o;i=utils.IsTrue(SiebelApp.S_App.IsAutoOn())?!0:!1;for(o=0;o<s;o++)o==0?n==4?i?r+="<div class='siebui-header siebui-ctrl-link siebui-hier-link' ot='Link' rn='morelink' un='morelink'> <a role='link' id='levelfour_"+t+"_mb'href='javascript:void(0)' tabindex='0'>"+e[o]+"</a></div>":r+="<div class='siebui-header siebui-ctrl-link siebui-hier-link'> <a role='link' id='levelfour_"+t+"_mb'href='javascript:void(0)' tabindex='0'>"+e[o]+"</a></div>":i?r+="<div class='siebui-header siebui-ctrl-link' ot='Link' rn='levelfourheader' un='levelfourheader'> <a role='link' id='levelfour_"+t+"_mb'href='javascript:void(0)' tabindex='0'>"+e[o]+"</a></div>":r+="<div class='siebui-header siebui-ctrl-link'> <a role='link' id='levelfour_"+t+"_mb'href='javascript:void(0)' tabindex='0'>"+e[o]+"</a></div>":(e[o]==""&&(e[o]="--"),e[o]=="currency"?(SiebelApp.S_App.LocaleObject.SetCurrencyCode(e[++o]),e[++o]=SiebelApp.S_App.LocaleObject.StringToFormatted("currency",e[o],"")):e[o]=="utcdatetime"&&(e[++o]=SiebelApp.S_App.LocaleObject.StringToFormatted("utcdatetime",e[o],SiebelApp.S_App.LocaleObject.GetDatum("datetime").GetFormat())),i?r+="<div class='siebui-label siebui-value' ot='PlainText' rn='levelfourlabel' un='levelfourlabel' tabindex='0'>"+e[o]+"</div>":r+="<div class='siebui-label siebui-value' tabindex='0'>"+e[o]+"</div>");return r}var e=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(t,SiebelAppFacade.PlainTextPW),t.prototype.SetValue=function(e,t){var r,i="",s,o,u=[],a=0,f=0,l=this.GetEl(t);if(l){var c=l.parent();if(this.Get("Isdataready")==1){var h=this.Get("level1_1_1"),p=this.Get("level1_1_2");if(h.child!=undefined&&h.child.length>0){r=h.child[t].child[0];var d=r.child.length;for(a=0;a<d;a++)f++,r.child[a].type==2&&f<4?(s=r.child[a].caption.split("| "),u[a]=r.child[a].position,i+=n(s,a,2)):r.child[a].type==4?(s=r.child[a].caption.split("| "),u[a]=r.child[a].position,s[0][0]!="0"&&(i+=n(s,a,4))):u[a]=r.child[a].position}else{var v=this.Get("level1_value"
);r=v.child[1];var d=r.child.length;for(a=0;a<d;a++)f++,r.child[a].type==2&&f<4?(s=r.child[a].caption.split("| "),u[a]=r.child[a].position,i+=n(s,a,2)):r.child[a].type==4?(s=r.child[a].caption.split("| "),u[a]=r.child[a].position,s[0][0]!="0"&&(i+=n(s,a,4))):u[a]=r.child[a].position}i!==""&&(c.children().not(l).remove(),c.append(i)),this.SetProperty("L3position"+t,u)}}SiebelAppFacade.JSrelhierPW.superclass.SetValue.call(this,e,t)},t}(),SiebelApp.S_App.PluginBuilder.AttachPW(consts.get("SWE_CTRL_PLAINTEXT"),SiebelAppFacade.JSrelhierPW,function(e){var t=e.GetApplet().GetName();return e.GetName()=="levelfourlabel"}),SiebelAppFacade.JSrelhierPW})),typeof SiebelAppFacade.RelationshipHierLinkPW=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.RelationshipHierLinkPW"),define("siebel/RelationshipHierLinkPW",["siebel/linkpw"],function(){return SiebelAppFacade.RelationshipHierLinkPW=function(){function t(){SiebelAppFacade.RelationshipHierLinkPW.superclass.constructor.apply(this,arguments)}var e=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(t,SiebelAppFacade.LinkPW),t.prototype.SetValue=function(e,t){SiebelAppFacade.RelationshipHierLinkPW.superclass.SetValue.call(this,e,t);var n=this.ExecuteMethod("CanUpdate",this.control.GetName()),r=this.control.GetScriptProperty("Visible"),i=this.GetEl(t);i&&!n&&!utils.IsEmpty(e)&&utils.DecideVisibility(i.children("#"+this.control.GetInputName()+"_mb").html(e),r)},t}(),SiebelApp.S_App.PluginBuilder.AttachPW(consts.get("SWE_CTRL_LINK"),SiebelAppFacade.RelationshipHierLinkPW,function(e){return(e.GetName()==="leveloneValue1"||e.GetName()==="levelthreeValue1")&&e.IsClientCtrl()===!0}),SiebelAppFacade.RelationshipHierLinkPW}));

/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.EditUIRenderer=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.EditUIRenderer"),define("siebel/epuidetailrenderer",["siebel/phyrenderer"],function(){return SiebelAppFacade.EditUIRenderer=function(){function s(){SiebelAppFacade.EditUIRenderer.superclass.constructor.apply(this,arguments)}function o(t,n){var r=t.GetMethodPropSet(),i=r.Clone();i.SetProperty(e.get("SWE_REQ_ROW_ID_STR"),"1"),i.SetProperty(e.get("SWE_ROW_STR"),n),this.GetPM().OnControlEvent(e.get("PHYEVENT_INVOKE_CONTROL"),t.GetMethodName(),i)}function u(e){var t=$(this),n=t.attr("recordindex"),r=t.parents(".siebui-epui-accordion-header").length?t.parents(".siebui-epui-accordion-header"):t.parents(".siebui-epui-accordion-detail").prev(),i=r.attr("accordionheaderindex");e.preventDefault(),e.stopImmediatePropagation(),c(i),o.call(e.data.ctx,e.data.ctrl,n)}function a(e){var r=this.GetUIWrapper(e),i=r.Helper("EventHelper"),s=r.GetEl();switch(e.GetUIType()){case t:case n:i.Manage(s,"click",{ctx:this,ctrl:e},u)}}function f(t){var n=$(this),r=t.data.ctx.GetPM(),i="#"+r.Get("GetFullId"),s=n.attr("myrecordindex"),o=s||s===0?s:n.find('[data-role="EPUIRec"]').attr("myrecordindex");$(i).find('[data-role="EPUIRec"]').removeClass("siebui-epui-rec-selected"),n.attr("myrecordindex")?n.addClass("siebui-epui-rec-selected"):n.find('[data-role="EPUIRec"]').addClass("siebui-epui-rec-selected"),t.target.tagName!=="BUTTON"&&t.target.tagName!=="A"&&(n.hasClass("siebui-epui-delete")||r.OnControlEvent(e.get("PHYEVENT_SELECT_ROW"),o))}function l(){var e=$(this),t=e.attr("accordionheaderindex");i[t]?(h.call(this,t),e.removeClass("siebui-epui-active-section").next(".siebui-epui-accordion-detail").removeClass("siebui-epui-active-section")):(c.call(this,t),e.addClass("siebui-epui-active-section").next(".siebui-epui-accordion-detail").addClass("siebui-epui-active-section"))}function c(e){var t=$(this);t.addClass("siebui-epui-accordion-expanded").removeClass("siebui-epui-accordion-collapsed").next(".siebui-epui-accordion-detail").show(),i[e]=!0}function h(e){var t=$(this);t.addClass("siebui-epui-accordion-collapsed").removeClass("siebui-epui-accordion-expanded").next(".siebui-epui-accordion-detail").hide(),i[e]=!1}function p(e){$(this).find('[name="EPUITitleRow"]').addClass("siebui-epui-title-selected"),$(this).addClass("siebui-epui-selected")}function d(e){$(this).find('[name="EPUITitleRow"]').removeClass("siebui-epui-title-selected"),$(this).removeClass("siebui-epui-selected")}function v(){var e=this.GetPM(),t=e.Get("GetRecordSet"),n=e.Get("GetBeginRow")||0,r=i.activeIndex?i.activeIndex:[],s=$('[data-role="EPUIRec"]'),o=Number(e.Get("GetRowListRowCount"))+Number(n),u;s.wrapAll('<div id="siebui-epui-accordionWrapper"></div>');for(var a=0,f=0;a<o&&a<t.length;a++){recObj=s.filter('[myrecordindex="'+a+'"]');if(e.ExecuteMethod("IsRuleRow",a)){if(!recObj.parent().hasClass("siebui-epui-accordion-header")){var l=a-f;recObj.wrap('<div class="siebui-epui-accordion-header"></div>'),recObj.parent().attr("accordionHeaderIndex",l).after('<div class="siebui-epui-accordion-detail"></div>')}}else recObj.parent().hasClass("siebui-epui-accordion-detail")||(f+=1,recObj.prev(".siebui-epui-accordion-detail").append(recObj))}$(".siebui-epui-accordion-header").each(function(){var e=$(this),t=parseInt(e.attr("accordionHeaderIndex"));i[t]===undefined||i[t]===!0?c.call(this,t):h.call(this,t)})}function m(){var e=$('[data-role="EPUIRec"]');(e.parent().hasClass("siebui-epui-accordion-header")||e.parent().hasClass("siebui-epui-accordion-detail"))&&$('.siebui-epui-accordion-header > [data-role="EPUIRec"] ,.siebui-epui-accordion-detail > [data-role="EPUIRec"]').unwrap(),$('#siebui-epui-accordionWrapper > [data-role="EPUIRec"] ').unwrap()}function g(){var e=this.GetPM(),t=e.Get("GetRecordSet"),n=e.Get("LastBoundData"),r=!1;if(n.length!==t.length)r=!0;else for(var i=0;i<n.length;i++)for(var s in n[i])if(n[i].hasOwnProperty(s)&&n[i][s]!==t[i][s]){this.ShowSelectionCustom.call(this,i);break}return e.SetProperty("LastBoundData",t),r}function y(){var e=this.GetPM();if(e.Get("isDeleteInProgress")){if(e.Get("GetSelection")==e.Get("GetRecordSet").length-1){var t=$("#s_"+e.Get("GetFullId")+"_div").find(".siebui-epui-rec-selected");t.addClass("siebui-epui-delete")}e.SetProperty("isDeleteInProgress",!1)}}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=e.get("SWE_PST_BUTTON_CTRL"),n=e.get("SWE_CTRL_LINK"),r=e.get("SWE_PST_COL"),i={};return SiebelJS.Extend(s,SiebelAppFacade.PhysicalRenderer),s.prototype.Init=function(){SiebelAppFacade.EditUIRenderer.superclass.Init.call(this),this.AttachPMBinding("ShowSelection",this.ShowSelectionCustom),this.AttachPMBinding("UpdateUI",function(){this.ShowSelectionCustom()}),this.AttachPMBinding("isDeleteInProgress",y)},s.prototype.EndLife=function(){$("#"+this.GetPM().Get("placeholder")).find(".jstree").jstree("destroy"),SiebelAppFacade.EditUIRenderer.superclass.EndLife.call(this)},s.prototype.ShowUI=function(){var e=this.GetPM(),t="#s_"+e.Get("GetFullId")+"_div",n=$(t).find('div[id="EPUIRecordTemplate"]').html(),r=$(t).find('div[id="EPUIRecordTemplate"]').empty(),i=e.Get("GetRowListRowCount"),s="",o;for(o=0;o<i;o++)s=s+'<div myRecordIndex="'+o+'" data-role="EPUIRec" class="siebui-epui-tr" >'+n+"</div>";consolidatedJQObj=$(s),r.replaceWith(consolidatedJQObj),SiebelAppFacade.EditUIRenderer.superclass.ShowUI.call(this);if(SiebelApp.S_App.IsAutoOn())for(var u=0,a=consolidatedJQObj.length;u<a;u++)consolidatedJQObj.eq(u).attr("id",u+1),consolidatedJQObj.eq(u).attr("data-rowid",u+1)},s.prototype.BindEvents=function(e){var t=this.GetPM(),n="#"+t.Get("GetFullId"),r=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper");e=e||this.GetPM().Get("GetControls");for(var i in e)if(e.hasOwnProperty(i)){var s=e[i];a.call(this,s)}r.Manage($(n),"focusin",{ctx:this},f,'[data-role="EPUIRec"]'),r.Manage($(n),"click",{ctx:this},f,".siebui-epui-accordion-header"),r.Manage($(n),"click",{ctx:this},f,'[data-role="EPUIRec"]'),utils.IsTrue(SiebelApp.S_App.IsAutoOn())||
r.Manage($(n),"click",{ctx:this},l,".siebui-epui-accordion-header");var o=$(n).parent().parent().filter('[name="EPUIIntegratedApplet"]');$(o).length>0&&(r.Manage($('[name="EPUIIntegratedApplet"]'),"focusin",{ctx:this},p),r.Manage($('[name="EPUIIntegratedApplet"]'),"focusout",{ctx:this},d)),SiebelAppFacade.EditUIRenderer.superclass.BindEvents.call(this,e)},s.prototype.BindData=function(e){if(this.inProgress)return!1;if(e){var t=g.call(this);if(!t)return}SiebelAppFacade.EditUIRenderer.superclass.BindData.call(this,e);var n=this.GetPM(),r=n.Get("GetRecordSet"),i=n.Get("GetBeginRow")||0,s=Number(this.GetPM().Get("GetRowListRowCount"))+Number(i);$("#s_"+n.Get("GetFullId")+"_div").find(".siebui-epui-delete").removeClass("siebui-epui-delete"),m.call(this),$('[data-role="EPUIRec"]').show();for(var o=0;o<s&&o<r.length;o++)this.ShowSelectionCustom.call(this,o);$('[data-role="EPUIRec"]').slice(r.length).hide(),n.SetProperty("LastBoundData",r),v.call(this)},s.prototype.ShowSelectionCustom=function(t){if(this.inProgress)return!1;var n=this.GetPM(),i=n.Get("GetControls"),s=typeof t;if(s==="undefined"||s==="boolean"||isNaN(t))t=n.Get("GetSelection");this.ShowSelection.call(this,t);for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];pwC=this.GetUIWrapper(u),element=pwC.GetEl(t),element&&$(element).attr("recordindex",t);if(n.ExecuteMethod("IsRowLevelControl",u.GetName())||u.GetControlType()===r){var a=n.ExecuteMethod("CanShowRowLevelControl",u.GetName(),t);pwC.SetState(e.get("SHOW"),a,t)}if(u.GetControlType()===r){var f=!n.ExecuteMethod("IsControlReadOnly",o,t);pwC.SetState(e.get("EDITABLE"),f,t)}}var l=$('[data-role="EPUIRec"]').filter('[myrecordindex="'+t+'"]');l.find("[data-role]").each(function(e,r){var i=$(r).attr("data-role");n.ExecuteMethod("CanShowRowLevelControl",i,t)?$(r).show():$(r).hide()})},s}(),SiebelAppFacade.EditUIRenderer}));

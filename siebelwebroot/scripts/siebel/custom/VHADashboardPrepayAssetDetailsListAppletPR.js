if(typeof(SiebelAppFacade.VHADashboardPrepayAssetDetailsListAppletPR)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.VHADashboardPrepayAssetDetailsListAppletPR");define("siebel/custom/VHADashboardPrepayAssetDetailsListAppletPR",["siebel/phyrenderer"],function(){SiebelAppFacade.VHADashboardPrepayAssetDetailsListAppletPR=(function(){function VHADashboardPrepayAssetDetailsListAppletPR(pm){SiebelAppFacade.VHADashboardPrepayAssetDetailsListAppletPR.superclass.constructor.call(this,pm)}SiebelJS.Extend(VHADashboardPrepayAssetDetailsListAppletPR,SiebelAppFacade.PhysicalRenderer);VHADashboardPrepayAssetDetailsListAppletPR.prototype.ShowUI=function(){SiebelAppFacade.VHADashboardPrepayAssetDetailsListAppletPR.superclass.ShowUI.call(this);$(".VHAAstDBNBNdiv").hide();$("#VHANBNDiv").hide();var ParentIC=VHAAppUtilities.GetConstants("VHADashboardParentIC");if(!ParentIC){VHADashboardCommon.VHADasboardGetICProp("AssetHeader");ParentIC=VHAAppUtilities.GetConstants("VHADashboardParentIC")}if(ParentIC.GetProperty("Payment Method")=="Prepay"){var BalanceIC=ParentIC.GetChildByType("ListOfAccount Balance");if(BalanceIC.GetChildCount()>0){var AccountbalanceIC=BalanceIC.GetChildByType("Account Balance");const monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(AccountbalanceIC.GetProperty("CallCreditExpiry")!=""&&AccountbalanceIC.GetProperty("CallCreditExpiry")!=null){var sCredExp=new Date(AccountbalanceIC.GetProperty("CallCreditExpiry"));sCredExp=("0"+sCredExp.getDate()).slice(-2)+" "+monthNames[sCredExp.getMonth()]+" "+sCredExp.getFullYear();$("#VHAAssetPPRow1Col1Val").html(sCredExp)}$("#VHAAssetPPRow1Col2Val").html(AccountbalanceIC.GetProperty("RechargeNotOKCounter"));if(AccountbalanceIC.GetProperty("AccessExpiry")!=""&&AccountbalanceIC.GetProperty("AccessExpiry")!=null){var sAcsExp=new Date(AccountbalanceIC.GetProperty("AccessExpiry"));sAcsExp=("0"+sAcsExp.getDate()).slice(-2)+" "+monthNames[sAcsExp.getMonth()]+" "+sAcsExp.getFullYear();$("#VHAAssetPPRow2Col1Val").html(sAcsExp)}$("#VHAAssetPPRow2Col2Val").html(AccountbalanceIC.GetProperty("RechargeStatus"));$("#VHAAssetPPRow3Col1Val").html(AccountbalanceIC.GetProperty("ServiceStatus"));if(AccountbalanceIC.GetProperty("ServiceStatus")=="Active"){$("#VHAAssetPPRow3Col1Val").addClass("VHADashGreencolor")}else{$("#VHAAssetPPRow3Col1Val").addClass("VHADashRedFontColor")}}$("#VHACommOfferFlgVal").html(ParentIC.GetProperty("Commercial Offer"));var RelationMgmtIC=ParentIC.GetChildByType("ListOfRelationship Mgmt");if(RelationMgmtIC.GetChildCount()>0){var childProp=RelationMgmtIC.GetChild(0);var prodtype=childProp.GetProperty("Product Type");var Assetnum=childProp.GetProperty("Asset Number");if(prodtype=="SIM"){$("#VHAAssetPPRow3Col2Val").html(Assetnum)}}}};VHADashboardPrepayAssetDetailsListAppletPR.prototype.BindEvents=function(){SiebelAppFacade.VHADashboardPrepayAssetDetailsListAppletPR.superclass.BindEvents.call(this);$("#VHAAssetDetailsbuttons").on("click","#VHAAssetDetExpandCollapse",function(){if($(this).hasClass("VHADashBoardAppExp")){$("#VHAAssetDetailsDiv").siblings().addClass("VHADisplayNone");$(this).addClass("VHADashBoardAppColl").removeClass("VHADashBoardAppExp")}else{$("#VHAAssetDetailsDiv").siblings().removeClass("VHADisplayNone");$(this).addClass("VHADashBoardAppExp").removeClass("VHADashBoardAppColl")}});$("#VHAAssetDetailsbuttons").on("click","#VHAGotoAssetDetailsView",{ctx:this},function(t){var Inputs=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();var ser=SiebelApp.S_App.GetService("VF BS Process Manager");Inputs.SetProperty("Service Name","VHA MSISDN GotoView BS");Inputs.SetProperty("Method Name","GotoView");Inputs.SetProperty("BusObjName","VF Asset");Inputs.SetProperty("BusCompName","Asset Mgmt - Asset - Header");var ParentIC=VHAAppUtilities.GetConstants("VHADashboardParentIC");var RecordId=ParentIC.GetProperty("Installed Asset Id");Inputs.SetProperty("RowId",RecordId);Inputs.SetProperty("ViewName","VF Asset Summary View - with extra IN fields");var Output=ser.InvokeMethod("Run Process",Inputs)})};return VHADashboardPrepayAssetDetailsListAppletPR}());return"SiebelAppFacade.VHADashboardPrepayAssetDetailsListAppletPR"})};
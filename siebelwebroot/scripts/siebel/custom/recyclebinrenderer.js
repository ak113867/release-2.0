if(typeof(SiebelAppFacade.RecycleBinRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.RecycleBinRenderer");define("siebel/custom/recyclebinrenderer",["3rdParty/jcarousel/lib/jquery.jcarousel.min","siebel/jqgridrenderer"],function(){SiebelAppFacade.RecycleBinRenderer=(function(){var siebConsts=SiebelJS.Dependency("SiebelApp.Constants");function RecycleBinRenderer(pm){SiebelAppFacade.RecycleBinRenderer.superclass.constructor.call(this,pm);this.listOfCols=["Name","Location"]}SiebelJS.Extend(RecycleBinRenderer,SiebelAppFacade.JQGridRenderer);RecycleBinRenderer.prototype.Init=function(){SiebelAppFacade.RecycleBinRenderer.superclass.Init.call(this);this.AttachPMBinding("RefreshList",RefreshCarousel)};RecycleBinRenderer.prototype.EndLife=function(){$("#s_"+this.GetPM().Get("GetFullId")+"_div").parent().undelegate();this.listOfCols=null;SiebelAppFacade.RecycleBinRenderer.superclass.EndLife.call(this)};RecycleBinRenderer.prototype.ShowUI=function(){SiebelAppFacade.RecycleBinRenderer.superclass.ShowUI.call(this);var pm=this.GetPM();var placeHolder="s_"+pm.Get("GetFullId")+"_div";$("#"+placeHolder).addClass("siebui-list-recyclebin").after('<ul id="'+placeHolder+"_recycle\" class='siebui-list-carousel jcarousel-skin-tango'></ul>").nextAll("#"+placeHolder+"_recycle").jcarousel({scroll:10,size:0,vertical:true,itemFallbackDimension:150}).data("jcarousel").setup()};RecycleBinRenderer.prototype.BindEvents=function(){SiebelAppFacade.RecycleBinRenderer.superclass.BindEvents.call(this);$("#s_"+this.GetPM().Get("GetFullId")+"_div").parent().delegate("div.siebui-carousel-item","mouseenter",{ctx:this},ShowRestoreButton).delegate("div.siebui-carousel-item","mouseleave",{ctx:this},HideRestoreButton).delegate("a.siebui-citem-add","click",{ctx:this},AddFromRecycleBin)};RecycleBinRenderer.prototype.BindData=function(){SiebelAppFacade.RecycleBinRenderer.superclass.BindData.apply(this,arguments)};function RefreshCarousel(){var pm=this.GetPM(),recordSet=pm.Get("DeletionCompleteSet"),el=$("#s_"+pm.Get("GetFullId")+"_div"+"_recycle"),carousel=el.data("jcarousel"),count=0;carousel.reset();for(var i=0,len=recordSet.length;i<len;i++){if(recordSet[i]){carousel.add(count,"<li>"+GetCurrentCarouselItems.call(this,recordSet[i],this.listOfCols,i)+"</li>");count++}}carousel.size(count);el.find("a.siebui-citem-add").hide();el=carousel=null}function GetCurrentCarouselItems(record,listOfCols,index){var itemMarkup="<div class='siebui-carousel-item' data-index=\""+index+'" ><a class="siebui-citem-add" href="#"></a>';for(var i=0;i<listOfCols.length;i++){if(typeof listOfCols[i]==="string"&&record[listOfCols[i]]){itemMarkup+="<span class='siebui-carousel-col'>"+record[listOfCols[i]]+"</span>"}}itemMarkup+="</div>";return itemMarkup}function ShowRestoreButton(evt){if(evt&&evt.currentTarget){$(evt.currentTarget).children("a.siebui-citem-add").show()}}function HideRestoreButton(evt){if(evt&&evt.currentTarget){$(evt.currentTarget).children("a.siebui-citem-add").hide()}}function AddFromRecycleBin(evt){var pm=evt.data.ctx.GetPM();if(evt&&evt.currentTarget){pm.OnControlEvent("RESTORE",$(evt.currentTarget).parent().data("index"))}}return RecycleBinRenderer}());return"SiebelAppFacade.RecycleBinRenderer"})};
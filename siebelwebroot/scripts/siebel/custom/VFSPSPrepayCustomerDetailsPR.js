if(typeof(SiebelAppFacade.VFSPSPrepayCustomerDetailsPR)==="undefined"){var placeholder="";var controls;SiebelJS.Namespace("SiebelAppFacade.VFSPSPrepayCustomerDetailsPR");define("siebel/custom/VFSPSPrepayCustomerDetailsPR",["order!siebel/phyrenderer"],function(){SiebelAppFacade.VFSPSPrepayCustomerDetailsPR=(function(){var siebConsts=SiebelJS.Dependency("SiebelApp.Constants");function VFSPSPrepayCustomerDetailsPR(pm){SiebelAppFacade.VFSPSPrepayCustomerDetailsPR.superclass.constructor.call(this,pm);this.GetPM().AttachPMBinding("FieldChanged",VFSPSEnableNextButton,{scope:this});this.InputList=["Title","First Name","Last Name","Date of Birth","Address","Home Phone"];this.InputListMA=["Title","First Name","Last Name","Date of Birth","Type","Street Type","Street","Street Address","Suburb","State","Postal Code","Country","Home Phone"];this.InputListLRC=["Title","First Name","Last Name","Date of Birth","Address","Home Phone","ABN/ACN","Industry Type","Account Name"];this.InputListLRCMA=["Title","First Name","Last Name","Date of Birth","Type","Street Type","Street Number","Street Address","Suburb","State","Postal Code","Country","Home Phone","ABN/ACN","Industry Type"];this.NextBtn="";SiebelApp.EventManager.cleanListners("VFSPSEnableNextButton");SiebelApp.EventManager.addListner("VFSPSEnableNextButton",VFSPSEnableNextButton,this);SiebelApp.EventManager.cleanListners("VFSPSPrepayCustomerSubrub");SiebelApp.EventManager.addListner("VFSPSPrepayCustomerSubrub",VFSPSPrepayCustomerSubrub,this)}SiebelJS.Extend(VFSPSPrepayCustomerDetailsPR,SiebelAppFacade.PhysicalRenderer);VFSPSPrepayCustomerDetailsPR.prototype.ShowUI=function(){SiebelAppFacade.VFSPSPrepayCustomerDetailsPR.superclass.ShowUI.call(this);VFTabletIntegrationConstants.SetConstants("VFSPSCAFFormSigned","N");var InputOptionalList,InputList;controls=this.GetPM().Get("GetControls");var pm=this.GetPM();var sActiveView=SiebelApp.S_App.GetActiveView();var bo=SiebelApp.S_App.GetActiveBusObj();var bc=bo.GetBusCompByName("VF SPS New Account Contact PrePay TBC");var sView=sActiveView.GetName();var playbarapplet=sActiveView.GetApplet("VF SPS Prepay Task Playbar Applet - Top");var ctrls=playbarapplet.GetControls();var NextBtn=ctrls.ButtonNext.GetInputName();this.NextBtn=NextBtn;var ExplictCall;VFTabletIntegrationConstants.SetConstants("VFSPSAllowScanFlag","true");var CustIdCapture1=sActiveView.GetApplet("VFSPS PrePay CustomerIDCapture Applet1");var CustIdCapture2=sActiveView.GetApplet("VFSPS PrePay CustomerIDCapture Applet2");var custId1=CustIdCapture1.GetPModel().Get("GetFullId");var custId2=CustIdCapture2.GetPModel().Get("GetFullId");$("#"+custId1).hide();$("#"+custId2).hide();if(sActiveView.GetApplet("VF SPS New Account Contact PrePay Applet - TBUI")){InputList=this.InputList;InputOptionalList=["Middle Name","Email Address"];$("input[name='"+controls["Address Status Display"].GetInputName()+"'],input[name='"+controls["ActivationKey"].GetInputName()+"'],					input[name='"+controls["Address Status"].GetInputName()+"'],input[name='"+controls["Scenario"].GetInputName()+"'],input[name='"+controls["Manual Address Entry"].GetInputName()+"'],input[name='"+controls["Address Selected"].GetInputName()+"']").parent().hide().prev().hide();ExplictCall=true;var AddressStatus=controls["Address Status Display"];var scenarioCtrl=controls["Scenario"];var AddrStatus=this.GetPM().ExecuteMethod("GetFieldValue",AddressStatus);var scenario=this.GetPM().ExecuteMethod("GetFieldValue",scenarioCtrl);setTimeout(function(){VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall)},50);VFSPSSetProfileAttr("VFSPSManualEntryApplet","N")}else{if(sActiveView.GetApplet("VF SPS New Account Corporate Contact PrePay Applet - TBUI")){InputList=this.InputListLRC;InputOptionalList=["Middle Name","Email Address"];$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["Address Status"].GetInputName()+"'],input[name='"+controls["Scenario"].GetInputName()+"'],input[name='"+controls["Address Status Display"].GetInputName()+"'],input[name='"+controls["Manual Address Entry"].GetInputName()+"']").parent().hide().prev().hide();$("input[name='"+controls["Industry Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerIndustryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");ExplictCall=true;var scenarioCtrl=controls["Scenario"];var AddressStatus=controls["Address Status Display"];var AddrStatus=this.GetPM().ExecuteMethod("GetFieldValue",AddressStatus);var scenario=this.GetPM().ExecuteMethod("GetFieldValue",scenarioCtrl);setTimeout(function(){VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall)},50);VFSPSSetProfileAttr("VFSPSManualEntryApplet","N")}else{if(sActiveView.GetApplet("VF SPS New Account Corporate Contact Prepay Manual Address Applet - TBUI")){InputList=this.InputListLRCMA;InputOptionalList=["Addr Floor Type","Addr Apt Floor Flats","Addr Building Name","Middle Name","Email Address"];$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["Manual Address Entry"].GetInputName()+"'],input[name='"+controls["Scenario"].GetInputName()+"'],input[name='"+controls["Address Status Display"].GetInputName()+"'],input[name='"+controls["Address Status"].GetInputName()+"']").parent().hide().prev().hide();$("input[name='"+controls["Industry Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerIndustryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Addr Floor Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerFloorDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Street Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerStreetDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["State"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerStateDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Country"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerCountryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Postal Code"].GetInputName()+"']").attr("type","number").attr("type","number").addClass("VFSPSCustomerPostCode");if($('[aria-labelledby="Suburb_Label"]').val()==""){$('[aria-labelledby="Suburb_Label"]').removeAttr("readonly")}if($('[aria-labelledby="State_Label"]').val()==""){$('[aria-labelledby="State_Label"]').removeAttr("readonly")}ExplictCall=true;var scenarioCtrl=controls["Scenario"];var AddressStatus=controls["Address Status Display"];var AddrStatus=this.GetPM().ExecuteMethod("GetFieldValue",AddressStatus);var scenario=this.GetPM().ExecuteMethod("GetFieldValue",scenarioCtrl);setTimeout(function(){VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall)},50);VFSPSSetProfileAttr("VFSPSManualEntryApplet","Y")}else{InputList=this.InputListMA;InputOptionalList=["Addr Floor Type","Addr Apt Floor","Addr Bulding Name","Middle Name","Email Address"];$("input[name='"+controls["Manual Address Entry"].GetInputName()+"'],input[name='"+controls["Scenario"].GetInputName()+"'],input[name='"+controls["Addr Primary"].GetInputName()+"'],input[name='"+controls["Address Status"].GetInputName()+"'],input[name='"+controls["Address Status Display"].GetInputName()+"']").parent().hide().prev().hide();$("input[name='"+controls["Addr Floor Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerFloorDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Street Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerStreetDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["State"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerStateDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Country"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerCountryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Postal Code"].GetInputName()+"']").attr("type","number").addClass("VFSPSCustomerPostCode");if($('[aria-labelledby="Suburb_Label"]').val()==""){$('[aria-labelledby="Suburb_Label"]').removeAttr("readonly")}if($('[aria-labelledby="State_Label"]').val()==""){$('[aria-labelledby="State_Label"]').removeAttr("readonly")}ExplictCall=true;var scenarioCtrl=controls["Scenario"];var scenario=this.GetPM().ExecuteMethod("GetFieldValue",scenarioCtrl);setTimeout(function(){VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall)},50);VFSPSSetProfileAttr("VFSPSManualEntryApplet","Y")}}}$("input[name='"+controls["Title"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrepayCustomerTitleDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Date of Birth"].GetInputName()+"']").attr("placeholder","--DD/MM/YYYY--").after('<img id="VFSPSPrepayCustomerDetailsCalender" class="VFSPSCustomerDetailsCalIcon" src="images/VFSPScalendar-icon.png">');$("input[name='"+controls["Home Phone"].GetInputName()+"']").attr("type","number");var InputOptionalLength=InputOptionalList.length;for(var i=0;i<InputOptionalLength;i++){$("input[name='"+controls[InputOptionalList[i]].GetInputName()+"']").closest("tr").append('<td><div class="VFSPSOptionaldiv">Optional</div></td>')}setTimeout(function(){if(sActiveView.GetApplet("VF SPS New Account Contact PrePay Applet - TBUI")||sActiveView.GetApplet("VF SPS New Account Corporate Contact PrePay Applet - TBUI")){if(!$("img").hasClass("VFSSPSAddressvalidationicon")&&AddrStatus=="Valid"){$("input[name='"+controls["Address"].GetInputName()+"']").after('<img class="VFSSPSAddressvalidationicon" src="images/VFSPStick.png"></img>')}}$(".applet-form-date").remove();$(".applet-form-combo").remove();var PlaybarAppletId=sActiveView.GetApplet("VF SPS Prepay Task Playbar Applet - Top").GetFullId();$("#s_"+PlaybarAppletId+"_div").addClass("VFSPSBottomAppletMargin");if(scenario!="New Customer"){$(".VFSPSContactDetailsScanbtn").hide();$(".VFSPSContactDetailsheadersubdiv").hide()}},50);setTimeout(function(){$('[aria-labelledby="Address_Label"]').parent().find("img").remove();$('[aria-labelledby="Address_Label"]').parent().find("img").remove()},1);if(sView=="VF SPS Prepay Customer and Address info View - TBUI"){var bo=SiebelApp.S_App.GetActiveBusObj();var bc=bo.GetBusCompByName("VF SPS New Account Contact PrePay TBC");$('[aria-labelledby="Address_Label"]').autocomplete({source:function(request,response){$(".VFSSPSAddressvalidationicon").remove();$("input[name='"+controls["Address"].GetInputName()+"']").after('<img class="VFSSPSAddressvalidationicon" src="images/VFSPSaddress-loader.gif"></img>');var service=SiebelApp.S_App.GetService("QAS WSDL");var inPS=SiebelApp.S_App.NewPropertySet();var sValue=$('[aria-labelledby="Address_Label"]').val();inPS.SetProperty("SearchString",sValue);setTimeout(function(){if(service){var outPS=service.InvokeMethod("DoSearchProxy",inPS);var resultSet=outPS.GetChild(0);var addrCount=resultSet.GetChildCount();var addrArray=[];if(resultSet){for(var i=0;i<=addrCount;i++){if(i==addrCount){addrArray.push("Address Not Found? Click Here"+"~^"+"404")}else{addrArray.push(resultSet.GetChild(i).GetProperty("QAS Wsdl Address")+"~^"+resultSet.GetChild(i).GetProperty("QAS Wsdl Moniker"))}}}$(".VFSSPSAddressvalidationicon").remove()}response($.map(addrArray,function(item,id){var res=item.split("~^");return{value:res[0],id:res[1]}}))},50)},minLength:10,appendTo:$('[aria-labelledby="Address_Label"]').parent(),select:function(event,ui){var sPickAddr=ui.item.value;var sMonikerval=ui.item.id;var service=SiebelApp.S_App.GetService("QAS WSDL");var inPS=SiebelApp.S_App.NewPropertySet();inPS.SetProperty("PickMoniker",sMonikerval);inPS.SetProperty("PickFullAddr",sPickAddr);var AppletName=GetActiveCreditAppletName();var App=SiebelApp.S_App.GetActiveView().GetApplet(AppletName);BC=App.GetBusComp();var pm=App.GetPModel();var controls1=pm.Get("GetControls");if(sMonikerval=="404"){VFSPSSetFieldValue("VF SPS New Account Contact PrePay TBC","Manual Address Entry","Y");$('[aria-labelledby="Suburb_Label"]').removeAttr("readonly");$('[aria-labelledby="State_Label"]').removeAttr("readonly");var manualAdrs=controls1["Manual Address Entry"];var manAdrVal=BC.GetFieldValue("Manual Address Entry");var i=SiebelJS.Dependency("SiebelApp.Constants");pm.OnControlEvent(i.get("PHYEVENT_INVOKE_TOGGLE"),manualAdrs,manAdrVal)}else{if(!$("img").hasClass("VFSSPSAddressvalidationicon")){$("input[name='"+controls1["Address"].GetInputName()+"']").after('<img class="VFSSPSAddressvalidationicon" src="images/VFSPStick.png"></img>')}var outPS=service.InvokeMethod("GetAddressPrepayOUI",inPS);VFSPSSetFieldValue("VF SPS New Account Contact PrePay TBC","Address Selected",sPickAddr);VFSPSSetFieldValue("VF SPS New Account Contact PrePay TBC","Address Status","1")}}}).focus(function(e){$(this).autocomplete("search")})}};VFSPSPrepayCustomerDetailsPR.prototype.BindEvents=function(){SiebelAppFacade.VFSPSPrepayCustomerDetailsPR.superclass.BindEvents.call(this);var pm=this.GetPM();$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSScanId","click",function(){var CheckIDCaptureTBC=VFCustomSiebelInterface.VFSPSPrepayGetAvailableIDCaptureBC();if(!CheckIDCaptureTBC){alert("You cannot scan more than 2 documents")}else{VFTabletIntegrationConstants.SetConstants("VFSPSUpdateIDCaptureTBC",CheckIDCaptureTBC);VFTabletIntegrationConstants.SetConstants("VFSPSScanKeyName","OCRPrimaryIdScan");VFSPSShowIDList()}});$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrepayCustomerTitleDropDown","click",{ctx:this},VFSPSPrepayCustomerTitleDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrepayCustomerFloorDropDown","click",{ctx:this},VFSPSPrepayCustomerFloorDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrepayCustomerStreetDropDown","click",{ctx:this},VFSPSPrepayCustomerStreetDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrepayCustomerStateDropDown","click",{ctx:this},VFSPSPrepayCustomerStateDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrepayCustomerCountryDropDown","click",{ctx:this},VFSPSPrepayCustomerCountryDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrepayCustomerTypeDropDown","click",{ctx:this},VFSPSPrepayCustomerTypeDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrepayCustomerIndustryDropDown","click",{ctx:this},VFSPSPrepayCustomerIndustryDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrepayCustomerDetailsCalender","click",{ctx:this},VFSPSPrepayCustomerDetailsCalender);$("#s_"+pm.Get("GetFullId")+"_div").delegate(".VFSPSCustomerPostCode","keydown",{ctx:this},VFSPSCustomerPostCodeCheckLength);$("#s_"+pm.Get("GetFullId")+"_div").delegate(".VFSPSCustomerPostCode","input",{ctx:this},VFSPSCustomerPostCodeDropDown)};VFSPSPrepayCustomerDetailsPR.prototype.EndLife=function(){SiebelAppFacade.VFSPSPrepayCustomerDetailsPR.superclass.EndLife.call(this);$("#openModal").remove()};function VFSPSCustomerPostCodeCheckLength(e){if((event.which!=8)&&(event.which!=46)){var val=$(this).val();if(val.length==4){event.preventDefault();event.stopPropagation()}}}function VFSPSCustomerPostCodeDropDown(e){var val=$(this).val();if(val.length==4){$('[aria-labelledby="Suburb_Label"]').removeAttr("readonly");$('[aria-labelledby="State_Label"]').removeAttr("readonly");var BO=SiebelApp.S_App.GetActiveBusObj();var BC=BO.GetBusCompByName("VF SPS New Account Contact PrePay TBC");var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("Business Component Name","VF Postcode Validated VBC");VFCustomSiebelInterface.SetProfileAttr("PostcodeAttr",$(this).val());VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){Output=VFCustomSiebelInterface.CallBS("VF Generic VBC Service","Query",Input,{});var PicklistValues=new Array();var ArrayList=VFCustomSiebelInterface.SiebelMessageToArray(Output);var ArrayListLen=ArrayList.length;for(var i=0;i<ArrayListLen;i++){PicklistValues[PicklistValues.length]=ArrayList[i]["VFSPSSuburb"]}VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF SPS New Account Contact PrePay TBC","Address SuburbTown",PicklistValues,"","","Siebel","VFSPSPrepayCustomerSubrub");VFSPSUdateUIFrameWork.VFSPSUnblockUI()},100)}}function VFSPSPrepayCustomerSubrub(e){var BO=SiebelApp.S_App.GetActiveBusObj();var BC=BO.GetBusCompByName("VF SPS New Account Contact PrePay TBC");var subrub=BC.GetFieldValue("Address SuburbTown");var arrayOfStrings=subrub.split(",");VFSPSSetFieldValue("VF SPS New Account Contact PrePay TBC","State",arrayOfStrings[1]);VFSPSSetFieldValue("VF SPS New Account Contact PrePay TBC","Address SuburbTown",arrayOfStrings[0]);$('[aria-labelledby="Suburb_Label"]').attr("readonly","true");$('[aria-labelledby="State_Label"]').attr("readonly","true")}function VFSPSSetProfileAttr(profileName,profileVal){var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("Profile Attribute Name",profileName);Input.SetProperty("Profile Attribute Value",profileVal);Output=VFCustomSiebelInterface.CallBS("SIS OM PMT Service","Set Profile Attribute",Input,{})}function VFSPSPrepayCustomerDetailsCalender(e){var currentVal=$("input[name='"+controls["Date of Birth"].GetInputName()+"']").val();VFSPSUdateUIFrameWork.ShowDatePicker("VF SPS New Account Contact PrePay TBC","DOB","Siebel",currentVal,"100:0","VFSPSEnableNextButton")}function VFSPSSetFieldValue(BCName,FieldName,FieldValue){var BS="VF SPS IDCaputre BS";var Method="SetDateFieldValues";var Inputs=SiebelApp.S_App.NewPropertySet();Inputs.SetProperty("BCName",BCName);Inputs.SetProperty("FieldName",FieldName);Inputs.SetProperty("FieldValue",FieldValue);Outputs=VFCustomSiebelInterface.CallBS(BS,Method,Inputs,{})}function VFSPSPrepayCustomerTitleDropDown(e){var SearchString="[List Of Values.Type] = 'MR_MS_TBUI' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF SPS New Account Contact PrePay TBC","Title","LOV","",SearchString,"Siebel","")}function VFSPSPrepayCustomerIndustryDropDown(e){var SearchString="[List Of Values.Type] = 'VF_INDUSTRY_TYPE' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF SPS New Account Contact PrePay TBC","Industry Type","LOV","",SearchString,"Siebel","")}function VFSPSPrepayCustomerFloorDropDown(e){var SearchString="[List Of Values.Type] = 'VF_ADDRESS_FLOOR_TYPE' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF SPS New Account Contact PrePay TBC","Address Floor Type","LOV","",SearchString,"Siebel","")}function VFSPSPrepayCustomerStreetDropDown(e){var SearchString="[List Of Values.Type] = 'VF_ADDRESS_STREET_TYPE' AND [List Of Values.Active] = 'Y' AND [List Of Values.High] = 'Australia'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF SPS New Account Contact PrePay TBC","Address Street Type","LOV","",SearchString,"Siebel","")}function VFSPSPrepayCustomerStateDropDown(e){var SearchString="[List Of Values.Type] = 'VF_ADDRESS_STATE' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF SPS New Account Contact PrePay TBC","State","LOV","",SearchString,"Siebel","")}function VFSPSPrepayCustomerCountryDropDown(e){var SearchString="[List Of Values.Type] = 'COUNTRY' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF SPS New Account Contact PrePay TBC","Country","LOV","",SearchString,"Siebel","")}function VFSPSPrepayCustomerTypeDropDown(e){var SearchString="[List Of Values.Type] = 'FIN_CON_ADDRESS_TYPE' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF SPS New Account Contact PrePay TBC","Address Type","LOV","",SearchString,"Siebel","")}function VFSPSShowIDList(e){var PriLength=VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo.length;if(PriLength==0){VFCustomSiebelInterface.GetIdList();PriLength=VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo.length}$("#openModal").remove();if(!$("#openModal").length){$("body").append(GetIDTemplate())}$("#openModal #VFSPSPrimaryIDTypes").html("");$("#openModal .VFSPSIDPopUpHeader").html("Choose 1 of the following ID");$("#VFSPSPrimaryIDTypes").append("<div class='VFSPSTopLineSpace'></div>");for(var i=0;i<PriLength;i++){var Template='<div class="VFSPSIDTypeLine VFSPSIDTypeLineSelect" category="'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].Description+'"  Type="'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].Type+'" Points="'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].Points+'" IsPrimary="'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].Primary+'" ProofOFAddress="'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].ProofOfAddress+'">																																																																																									<div class="VFSPSIDType">'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].Type+'</div>																																																																																									<div class="VFSPSIDTypeChevron"></div>																																																																																									<div class="VFSPSLineSpace"></div>																																																																																									</div>';$("#VFSPSPrimaryIDTypes").append(Template)}$("#openModal").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$("#openModal").undelegate();$("#openModal").delegate(".VFSPSDialogClose","click",{},function(e){$("#openModal").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone")});$("#openModal").delegate(".VFSPSIDTypeLineSelect","click",{},VFSPSScanID)}function GetIDTemplate(){return(' <div id = "openModal" class = "modalDialog VFSPSDisplayNone">  																																																																										 <div>  																																																																										 <span  title = "Close" class = "VFSPSDialogClose" ><img src="images/vfspsclose.jpg"></span>  																																																																										 <h2 class="VFSPSIDPopUpHeader"> Choose 1 of the following ID </h2>  																																																																										 <div id = "VFSPSPrimaryIDTypes">  																																																																										 </div>  																																																																										 </div>  																																																																										 </div> ')}function VFSPSScanID(e){var cardType=$(this).attr("type");var points=$(this).attr("Points");var IsPrimary=$(this).attr("IsPrimary");var ProofOAddress=$(this).attr("ProofOfAddress");var category=$(this).attr("category");VFTabletIntegrationConstants.SetConstants("VFSPSCardType",cardType);if(cardType=="Driver's Licence"||cardType=="Boating Licence"||cardType=="Proof of Age Card"){var stateShortArray=VFCustomSiebelInterface.GetPickListValues("VF_ID_ISSUER","");$("#openModal").remove();if(!$("#openModal").length){$("body").append(GetIDTemplate())}$("#openModal").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$("#openModal .VFSPSIDPopUpHeader").html("Choose 1 of the following State");$("#VFSPSPrimaryIDTypes").append("<div class='VFSPSTopLineSpace'></div>");for(var i=0;i<stateShortArray.length;i++){var Template='<div class="VFSPSIDTypeLine VFSPSStateLineSelect" Type="'+stateShortArray[i]+'">																																																																																																								<div class="VFSPSIDType">'+stateShortArray[i]+'</div>																																																																																																								<div class="VFSPSIDTypeChevron"></div>																																																																																																								<div class="VFSPSLineSpace"></div>																																																																																																								</div>';$("#VFSPSPrimaryIDTypes").append(Template)}$("#openModal").undelegate();$("#openModal").delegate(".VFSPSDialogClose","click",{},function(e){$("#openModal").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone")});$("#openModal").delegate(".VFSPSStateLineSelect","click",{cardType:cardType,points:points,IsPrimary:IsPrimary,ProofOAddress:ProofOAddress,category:category},VFSPSGetState)}else{VFSPSStartScanID(cardType,points,IsPrimary,ProofOAddress,"",category)}}function VFSPSGetState(e){var state=$(this).attr("type");VFSPSStartScanID(e.data.cardType,e.data.points,e.data.IsPrimary,e.data.ProofOAddress,state,e.data.category)}function VFSPSMapCardType(CardType,State){var sCardMap="";switch(CardType){case ("Driver's Licence"):sCardMap=State.toUpperCase()+"_"+"LICENCE";break;case ("Passport"):sCardMap="PASSPORT";break;case ("Armed Forces ID"):sCardMap="Armed Forces ID";break;case ("Police ID"):sCardMap="Police ID";break;default:}return sCardMap}function VFSPSStartScanID(cardType,points,IsPrimary,ProofOAddress,State,category){var bo1=SiebelApp.S_App.GetActiveBusObj();var bc1=bo1.GetBusCompByName("VF SPS New Account Contact PrePay TBC");var sessionId=bc1.GetFieldValue("Session Id");var OCRCardMap=VFSPSMapCardType(cardType,State);ProofOAddress=typeof(ProofOAddress)=="undefined"?"N":ProofOAddress;IsPrimary=typeof(IsPrimary)=="undefined"?"N":IsPrimary;var requestData={"Key":"OCRPrepayPrimaryIdScan","SettingsData":"","MetaData":"","RequestParam":{"CardType":OCRCardMap,"SessionID":sessionId,"IsImageReq":"True","ReturnData":[{"cardType":cardType,"state":State,"points":points,"ProofOAddress":ProofOAddress,"IsPrimary":IsPrimary,"category":category}]}};$("#openModal").remove();if(typeof(VHAWrapper)=="undefined"){var retVal=VHAWrapperSTUB?VHAWrapperSTUB.scanIDUsingOCR(JSON.stringify(requestData),"VFTabletIntegration.Success","VFTabletIntegration.Failure"):0;retVal="1"}else{var retVal=VHAWrapper?VHAWrapper.scanIDUsingOCR(JSON.stringify(requestData),"VFTabletIntegration.Success","VFTabletIntegration.Failure"):0}if(retVal){}else{responseData={"Key":"OCRPrepayPrimaryIdScan","Data":[{"Accuracy":[],"Value":[{"cardType":cardType,"state":State,"points":points,"ProofOAddress":ProofOAddress,"IsPrimary":IsPrimary,"category":category}],"Key":"ReturnData"}],"StatusCode":"200","StatusMessage":"Success message"};VFTabletIntegration.Success(JSON.stringify(responseData));alert("Could not initiate Bar code scanning. Please go ahead with manual entry.")}}function GetActiveCreditAppletName(){var AppletMap=SiebelApp.S_App.GetActiveView().GetAppletMap();var AppletList=["VF SPS New Account Contact PrePay Applet - TBUI","VF SPS New Account Contact Prepay Manual Address Applet - TBUI","VF SPS New Account Corporate Contact PrePay Applet - TBUI","VF SPS New Account Corporate Contact Prepay Manual Address Applet - TBUI"];var AppletName="";for(var i=0;i<AppletList.length;i++){if(AppletMap[AppletList[i]]){AppletName=AppletList[i];break}}return AppletName}function VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall){if(pm==null||pm==""||typeof(pm)=="undefined"){var App=SiebelApp.S_App.GetActiveView().GetApplet(GetActiveCreditAppletName());var pm=App.GetPModel()}if(!ExplictCall){if(typeof(ExplictCall)=="undefined"){var App=SiebelApp.S_App.GetActiveView().GetApplet(GetActiveCreditAppletName());var pm=App.GetPModel();var pr=pm.GetRenderer()}else{var pr=this}if(SiebelApp.S_App.GetActiveView().GetApplet("VF SPS New Account Contact PrePay Applet - TBUI")){InputList=pr.InputList}else{if(SiebelApp.S_App.GetActiveView().GetApplet("VF SPS New Account Corporate Contact PrePay Applet - TBUI")){InputList=pr.InputListLRC}else{if(SiebelApp.S_App.GetActiveView().GetApplet("VF SPS New Account Corporate Contact Prepay Manual Address Applet - TBUI")){InputList=pr.InputListLRCMA}else{InputList=pr.InputListMA}}}NextBtn=pr.NextBtn}var controls=pm.Get("GetControls");var InputListLength=InputList.length;var CustomerFormFieldsEmpty=false;for(var i=0;i<InputListLength;i++){var input=$("input[name='"+controls[InputList[i]].GetInputName()+"']");if(input.val()==""){CustomerFormFieldsEmpty=true;VFTabletIntegrationConstants.SetConstants("VFSPSCustomerFieldempty","True")}else{VFTabletIntegrationConstants.SetConstants("VFSPSCustomerFieldempty","False")}}if(CustomerFormFieldsEmpty==false){$("#"+NextBtn+"_Ctrl").removeClass("VFSPSPlaybarNextBtnDisabled").addClass("VFSPSPlaybarNextBtnEnabled");var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("Profile Attribute Name","VFSPSEnableWR");Input.SetProperty("Profile Attribute Value","Y");Output=VFCustomSiebelInterface.CallBS("SIS OM PMT Service","Set Profile Attribute",Input,{})}else{$("#"+NextBtn+"_Ctrl").addClass("VFSPSPlaybarNextBtnDisabled").removeClass("VFSPSPlaybarNextBtnEnabled");var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("Profile Attribute Name","VFSPSEnableWR");Input.SetProperty("Profile Attribute Value","N");Output=VFCustomSiebelInterface.CallBS("SIS OM PMT Service","Set Profile Attribute",Input,{})}var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("Profile Attribute Name","EAI_FLAG");Input.SetProperty("Profile Attribute Value","Y");Output=VFCustomSiebelInterface.CallBS("SIS OM PMT Service","Set Profile Attribute",Input,{});var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("Profile Attribute Name","VFQASIsInbound");Input.SetProperty("Profile Attribute Value","Y");Output=VFCustomSiebelInterface.CallBS("SIS OM PMT Service","Set Profile Attribute",Input,{});var applet=SiebelApp.S_App.GetActiveView().GetApplet("VF SPS Prepay Task Playbar Applet - Top");applet.DoExecuteUIUpdate()}return VFSPSPrepayCustomerDetailsPR}());return"SiebelAppFacade.VFSPSPrepayCustomerDetailsPR"})};
if(typeof(SiebelAppFacade.VFSUISalesButtonPR)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.VFSUISalesButtonPR");define("siebel/custom/VFSUISalesButtonPR",["order!siebel/phyrenderer"],function(){SiebelAppFacade.VFSUISalesButtonPR=(function(){function VFSUISalesButtonPR(pm){SiebelAppFacade.VFSUISalesButtonPR.superclass.constructor.call(this,pm)}SiebelJS.Extend(VFSUISalesButtonPR,SiebelAppFacade.PhysicalRenderer);VFSUISalesButtonPR.prototype.ShowUI=function(){SiebelAppFacade.VFSUISalesButtonPR.superclass.ShowUI.call(this);var sView=SiebelApp.S_App.GetActiveView().GetName();var sURL;setTimeout(function(){$('div[title="VFSUIButtons Form Applet"]').find(".appletButton").closest("td").css("padding-top","6px");$('div[title="VFSUIButtons Form Applet"]').find(".appletButton").closest("td").css("padding-left","4px");$('div[title="VFSUIButtons Form Applet"]').find(".appletButtonDis").closest("td").css("padding-left","4px");$('div[title="VFSUIButtons Form Applet"]').find(".appletButtonDis").closest("td").css("padding-top","6px")},5);var pm=this.GetPM();var recordSet=pm.Get("GetRecordSet");var sAssetId=recordSet[0].Id;$('button[title="VFSUIButtons:Latest Invoice"]').click(function(){console.log(sURL);var svc=SiebelApp.S_App.GetService("VF Damon Service");var Input1=SiebelApp.S_App.NewPropertySet();var Output1=SiebelApp.S_App.NewPropertySet();Input1.SetProperty("AssetId",sAssetId);Input1.SetProperty("Source","SUIdash");var Output1=svc.InvokeMethod("getLastInvoiceId",Input1);var resultSet=Output1.GetChild(0);var sInvoiceId=resultSet.GetProperty("Last_InvoiceId");var sBillAccntId=resultSet.GetProperty("BillingId");var InvLoaded=SiebelApp.S_App.GetProfileAttr("sInvLoaded");var sARII=SiebelApp.S_App.GetProfileAttr("ARII");SiebelApp.S_App.SetProfileAttr("ARII","");var sInvoiceBO="FS Invoice";var sInvoiceBC="FS Invoice";if(sInvoiceId==""){console.log("Last Invoice URL can not be opened as there is no Invoice present for this billing account")}if(sARII=="Australia"&&sInvoiceId!=""){var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("ARII",sARII);Input.SetProperty("RowId",sInvoiceId);Input.SetProperty("BOName",sInvoiceBO);Input.SetProperty("BCName",sInvoiceBC);Input.SetProperty("SymbolicURLName","LastInvoiceAU");Input.SetProperty("Encrypt","VF AU Encrypt");Input.SetProperty("Password","VF AU Encryption Password");var Output=svc.InvokeMethod("getURL",Input);var resultSet1=Output.GetChild(0);sURL=resultSet1.GetProperty("Results");window.open(sURL,"Invoice"+sAssetId);var sSVC=SiebelApp.S_App.GetService("SIS OM PMT Service");var LoadedInput=SiebelApp.S_App.NewPropertySet();var LoadedOutput=SiebelApp.S_App.NewPropertySet();LoadedInput.SetProperty("Profile Attribute Name","sInvLoaded");LoadedInput.SetProperty("Profile Attribute Value",sBillAccntId);var LoadedOutput=sSVC.InvokeMethod("Set Profile Attribute",LoadedInput)}else{console.log("Unknown ARII value:"+sARII)}if(typeof sURL==="undefined"){alert("There is no Open or Closed invoice for this Billing Account")}else{window.open(sURL,"Invoice"+sAssetId)}});var sbuttonclick;var url;$('button[title="VFSUIButtons:MyBill"]').click(function(){sbuttonclick="My Bill Portal";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Red Source Customer Hub"]').click(function(){sbuttonclick="Red Source Customer Hub";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:LSHS Tool"]').click(function(){sbuttonclick="Lost / Stolen Handset Tool";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Webadmin Reset"]').click(function(){sbuttonclick="CSR Tool";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Oracle"]').click(function(){sbuttonclick="Oracle (handset orders) â€“ Track & Trace";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:EOL & Supply"]').click(function(){sbuttonclick="EOL & Supply Updates";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Data Calculator"]').click(function(){sbuttonclick="Data Calculator";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Coverage Checker"]').click(function(){var svc=SiebelApp.S_App.GetService("VF SUI GetPrimary Billing Address BS");var sInput=SiebelApp.S_App.NewPropertySet();var sOutput=SiebelApp.S_App.NewPropertySet();sInput.SetProperty("AssetId",sAssetId);var OutputRes=svc.InvokeMethod("GetPrimaryBAAddress",sInput);var resultSet=OutputRes.GetChild(0);var sStreetNum=resultSet.GetProperty("StreetNum");var sStreetName=resultSet.GetProperty("StreetName");var sStreetType=resultSet.GetProperty("StreetType");var sSuburb=resultSet.GetProperty("Suburb");var sState=resultSet.GetProperty("State");var sPostcode=resultSet.GetProperty("Postcode");sbtnclick="Mapshed";if(sbtnclick!=""){var svc=SiebelApp.S_App.GetService("VF SUI Get Button Link BS");var pInput=SiebelApp.S_App.NewPropertySet();var pOutput=SiebelApp.S_App.NewPropertySet();pInput.SetProperty("sbuttonclicked",sbtnclick);var pOutput=svc.InvokeMethod("GetButtonLink",pInput);var resultSet=pOutput.GetChild(0);url=resultSet.GetProperty("sUrl");url=url+"VHAMap/apps/contact-vf?"+"streetNumber="+sStreetNum+"&streetName="+sStreetName+"&streetType="+sStreetType+"&locality="+sSuburb+"&state="+sState+"&postcode="+sPostcode;var encURL=encodeURI(url);console.log(encURL);window.open(encURL,sbtnclick);url="";sbtnclick=""}});function openExtLink(sbuttonclick){var sbtnclick=sbuttonclick;if(sbtnclick!=""){var svc=SiebelApp.S_App.GetService("VF SUI Get Button Link BS");var pInput=SiebelApp.S_App.NewPropertySet();var pOutput=SiebelApp.S_App.NewPropertySet();pInput.SetProperty("sbuttonclicked",sbtnclick);var pOutput=svc.InvokeMethod("GetButtonLink",pInput);var resultSet=pOutput.GetChild(0);url=resultSet.GetProperty("sUrl");console.log(url);window.open(url,sbtnclick);url="";sbuttonclick=""}}};return VFSUISalesButtonPR}());return"SiebelAppFacade.VFSUISalesButtonPR"})};
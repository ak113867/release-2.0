if(typeof(SiebelAppFacade.VFSPSExistingCustomerDetailsPR)==="undefined"){var placeholder="";var controls;SiebelJS.Namespace("SiebelAppFacade.VFSPSExistingCustomerDetailsPR");define("siebel/custom/VFSPSExistingCustomerDetailsPR",["order!siebel/phyrenderer"],function(){SiebelAppFacade.VFSPSExistingCustomerDetailsPR=(function(){var siebConsts=SiebelJS.Dependency("SiebelApp.Constants");function VFSPSExistingCustomerDetailsPR(pm){SiebelAppFacade.VFSPSExistingCustomerDetailsPR.superclass.constructor.call(this,pm);this.GetPM().AttachPMBinding("FieldChanged",VFSPSEnableNextButton,{scope:this});this.InputList=["Title","First Name","Last Name","Date of Birth","WSDL Address","Home Phone","Email Address","DOM","Coverage Check Required"];this.InputListMA=["Title","First Name","Last Name","Date of Birth","Type","Street Type","Street","Street Address","Suburb","State","Postal Code","Country","Home Phone","Email Address","DOM","Coverage Check Required"];this.InputListLRC=["Title","First Name","Last Name","Date of Birth","WSDL Address","Home Phone","Email Address","ABN/ACN","Company Name","Trading As","Industry Type","DOM","Coverage Check Required","VF SPS Decision Maker"];this.InputListLRCMA=["Title","First Name","Last Name","Date of Birth","Type","Street Type","Street","Street Address","Suburb","State","Postal Code","Country","Home Phone","Email Address","ABN/ACN","Company Name","Trading As","Industry Type","DOM","Coverage Check Required","VF SPS Decision Maker"];this.InputListSTMA=["Title","First Name","Last Name","Date of Birth","Type","Street Type","Street","Street Address","Suburb","State","Postal Code","Country","WSDL Address","Home Phone","Email Address","ABN/ACN","Company Name","Trading As","DOM","Coverage Check Required","VF SPS Decision Maker"];this.InputListST=["Title","First Name","Last Name","Date of Birth","WSDL Address","Home Phone","Email Address","ABN/ACN","Company Name","Trading As","DOM","Coverage Check Required","VF SPS Decision Maker"];this.NextBtn="";SiebelApp.EventManager.cleanListners("VFSPSExistingTradingDate");SiebelApp.EventManager.addListner("VFSPSExistingTradingDate",VFSPSTradingDate,this);SiebelApp.EventManager.cleanListners("VFSPSExistingCustomerSubrub");SiebelApp.EventManager.addListner("VFSPSExistingCustomerSubrub",VFSPSExistingCustomerSubrub,this)}SiebelJS.Extend(VFSPSExistingCustomerDetailsPR,SiebelAppFacade.PhysicalRenderer);VFSPSExistingCustomerDetailsPR.prototype.Init=function(){SiebelAppFacade.VFSPSExistingCustomerDetailsPR.superclass.Init.call(this);this.GetPM().AttachPMBinding("ShowSelection",function(){var sActiveView=SiebelApp.S_App.GetActiveView();if(!sActiveView.GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile Person")){SetABNSearchIcon()}})};VFSPSExistingCustomerDetailsPR.prototype.ShowUI=function(){SiebelAppFacade.VFSPSExistingCustomerDetailsPR.superclass.ShowUI.call(this);var InputOptionalList,InputList;controls=this.GetPM().Get("GetControls");var pm=this.GetPM();var sActiveView=SiebelApp.S_App.GetActiveView();var bo=SiebelApp.S_App.GetActiveBusObj();var bc=bo.GetBusCompByName("VF Capture Customer Details TBC");var sView=sActiveView.GetName();var playbarapplet=sActiveView.GetApplet("VF SPS Task Playbar Applet - Top");var ctrls=playbarapplet.GetControls();var NextBtn=ctrls.ButtonNext.GetInputName();this.NextBtn=NextBtn;var ExplictCall;VFTabletIntegrationConstants.SetConstants("VFSPSAllowScanFlag","true");$(".VFSPSAppletHIFormBorderCustomer").find("div").hide();if(sActiveView.GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile Person")){InputList=this.InputList;InputOptionalList=["Middle Name"];$("input[name='"+controls["Address Status"].GetInputName()+"'],input[name='"+controls["Manual Address Entry"].GetInputName()+"']").parent().hide().prev().hide();ExplictCall=true;var AddressStatus=controls["Address Status"];var AddrStatus=this.GetPM().ExecuteMethod("GetFieldValue",AddressStatus);if(!$('input[type="text"]').parent().find(".VFSSPSAddressvalidationicon").hasClass("VFSSPSAddressvalidationicon")){$("input[name='"+controls["WSDL Address"].GetInputName()+"']").after('<img class="VFSSPSAddressvalidationicon" src="images/VFSPStick.png"></img>')}setTimeout(function(){VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall)},50)}else{if(sActiveView.GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile LRC")){InputList=this.InputListLRC;InputOptionalList=["Middle Name"];var CompanyName=bc.GetFieldValue("Company Name");var Tradingas=bc.GetFieldValue("Trading As");$("input[name='"+controls["VF SPS Decision Maker"].GetInputName()+"']").addClass("VFSPSBusinessTypeRadio").parent().addClass("VFRadioButtonLabel").removeClass("VFSPSCustomerDetailsField").addClass("VFSPSExistingServiceField");$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").attr("type","number");SetABNSearchIcon();$("input[name='"+controls["Address Status"].GetInputName()+"'],input[name='"+controls["Manual Address Entry"].GetInputName()+"']").parent().hide().prev().hide();$("input[name='"+controls["Industry Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerIndustryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["CustomerType"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSVFCustomerTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Trading As"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSVFTradingAsDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");ExplictCall=true;var AddressStatus=controls["Address Status"];var AddrStatus=this.GetPM().ExecuteMethod("GetFieldValue",AddressStatus);if(!$('input[type="text"]').parent().find(".VFSSPSAddressvalidationicon").hasClass("VFSSPSAddressvalidationicon")){$("input[name='"+controls["WSDL Address"].GetInputName()+"']").after('<img class="VFSSPSAddressvalidationicon" src="images/VFSPStick.png"></img>')}setTimeout(function(){VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall)},50)}else{if(sActiveView.GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile ST")){InputList=this.InputListST;InputOptionalList=["Middle Name"];var CompanyName=bc.GetFieldValue("Company Name");var Tradingas=bc.GetFieldValue("Trading As");$("input[name='"+controls["VF SPS Decision Maker"].GetInputName()+"']").addClass("VFSPSBusinessTypeRadio").parent().addClass("VFRadioButtonLabel").removeClass("VFSPSCustomerDetailsField").addClass("VFSPSExistingServiceField");$("input[name='"+controls["CustomerType"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSVFCustomerTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Trading As"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSVFTradingAsDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").attr("type","number");SetABNSearchIcon();$("input[name='"+controls["Address Status"].GetInputName()+"'],input[name='"+controls["Manual Address Entry"].GetInputName()+"']").parent().hide().prev().hide();ExplictCall=true;var AddressStatus=controls["Address Status"];var AddrStatus=this.GetPM().ExecuteMethod("GetFieldValue",AddressStatus);if(!$('input[type="text"]').parent().find(".VFSSPSAddressvalidationicon").hasClass("VFSSPSAddressvalidationicon")){$("input[name='"+controls["WSDL Address"].GetInputName()+"']").after('<img class="VFSSPSAddressvalidationicon" src="images/VFSPStick.png"></img>')}setTimeout(function(){VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall)},50)}else{if(sActiveView.GetApplet("VF SPS Exst Capture Customer Manual Address Detail Form Applet Mobile ST")){InputList=this.InputListSTMA;InputOptionalList=["Floor Type","Address Floor","Address Building","Middle Name"];var CompanyName=bc.GetFieldValue("Company Name");var Tradingas=bc.GetFieldValue("Trading As");$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").attr("type","number");SetABNSearchIcon();$("input[name='"+controls["Address Status"].GetInputName()+"'],input[name='"+controls["Manual Address Entry"].GetInputName()+"']").parent().hide().prev().hide();$("input[name='"+controls["Floor Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerFloorDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Street Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerStreetDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["State"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerStateDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Country"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerCountryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Postal Code"].GetInputName()+"']").attr("type","number").addClass("VFSPSCustomerPostCode");if($('[aria-labelledby="Suburb_Label"]').val()==""){$('[aria-labelledby="Suburb_Label"]').removeAttr("readonly")}if($('[aria-labelledby="State_Label"]').val()==""){$('[aria-labelledby="State_Label"]').removeAttr("readonly")}$("input[name='"+controls["VF SPS Decision Maker"].GetInputName()+"']").addClass("VFSPSBusinessTypeRadio").parent().addClass("VFRadioButtonLabel").removeClass("VFSPSCustomerDetailsField").addClass("VFSPSExistingServiceField");$("input[name='"+controls["CustomerType"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSVFCustomerTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Trading As"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSVFTradingAsDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");ExplictCall=true;var AddressStatus=controls["Address Status"];var AddrStatus=this.GetPM().ExecuteMethod("GetFieldValue",AddressStatus);setTimeout(function(){VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall)},50)}else{if(sActiveView.GetApplet("VF SPS Exst Capture Customer Manual Address Detail Form Applet Mobile LRC")){InputList=this.InputListLRCMA;InputOptionalList=["Floor Type","Address Floor","Address Building","Middle Name"];var CompanyName=bc.GetFieldValue("Company Name");var Tradingas=bc.GetFieldValue("Trading As");$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").attr("type","number");SetABNSearchIcon();$("input[name='"+controls["Address Status"].GetInputName()+"'],input[name='"+controls["Manual Address Entry"].GetInputName()+"']").parent().hide().prev().hide();$("input[name='"+controls["Industry Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerIndustryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Floor Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerFloorDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Street Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerStreetDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["State"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerStateDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Country"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerCountryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Postal Code"].GetInputName()+"']").attr("type","number").addClass("VFSPSCustomerPostCode");if($('[aria-labelledby="Suburb_Label"]').val()==""){$('[aria-labelledby="Suburb_Label"]').removeAttr("readonly")}if($('[aria-labelledby="State_Label"]').val()==""){$('[aria-labelledby="State_Label"]').removeAttr("readonly")}$("input[name='"+controls["VF SPS Decision Maker"].GetInputName()+"']").addClass("VFSPSBusinessTypeRadio").parent().addClass("VFRadioButtonLabel").removeClass("VFSPSCustomerDetailsField").addClass("VFSPSExistingServiceField");$("input[name='"+controls["CustomerType"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSVFCustomerTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Trading As"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSVFTradingAsDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");ExplictCall=true;var AddressStatus=controls["Address Status"];var AddrStatus=this.GetPM().ExecuteMethod("GetFieldValue",AddressStatus);setTimeout(function(){VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall)},50)}else{InputList=this.InputListMA;InputOptionalList=["Floor Type","Address Floor","Address Building","Middle Name"];$("input[name='"+controls["Floor Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerFloorDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Street Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerStreetDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["State"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerStateDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Country"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerCountryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Postal Code"].GetInputName()+"']").attr("type","number").addClass("VFSPSCustomerPostCode");if($('[aria-labelledby="Suburb_Label"]').val()==""){$('[aria-labelledby="Suburb_Label"]').removeAttr("readonly")}if($('[aria-labelledby="State_Label"]').val()==""){$('[aria-labelledby="State_Label"]').removeAttr("readonly")}ExplictCall=true;setTimeout(function(){VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall)},50)}}}}}$("input[name='"+controls["DOM"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCustomerBillCycleDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">');$("input[name='"+controls["Title"].GetInputName()+"']").attr("placeholder","--Select--");$("input[name='"+controls["Date of Birth"].GetInputName()+"']").attr("placeholder","--DD/MM/YYYY--");$("input[name='"+controls["Home Phone"].GetInputName()+"']").attr("type","number");var InputOptionalLength=InputOptionalList.length;for(var i=0;i<InputOptionalLength;i++){$("input[name='"+controls[InputOptionalList[i]].GetInputName()+"']").closest("tr").append('<td><div class="VFSPSOptionaldiv">Optional</div></td>')}setTimeout(function(){if(sActiveView.GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile LRC")||sActiveView.GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile Person")||sActiveView.GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile ST")){if(!$("img").hasClass("VFSSPSAddressvalidationicon")&&AddrStatus=="Valid"){console.log("showtick");$("input[name='"+controls["WSDL Address"].GetInputName()+"']").after('<img class="VFSSPSAddressvalidationicon" src="images/VFSPStick.png"></img>')}}$(".applet-form-date").attr("src","images/VFSPScalendar-icon.png").addClass("VFSPSCustomerDetailsCalIcon");$(".applet-form-combo").remove();var PlaybarAppletId=sActiveView.GetApplet("VF SPS Task Playbar Applet - Top").GetFullId();$("#s_"+PlaybarAppletId+"_div").addClass("VFSPSBottomAppletMargin")},50);setTimeout(function(){$('[aria-labelledby*="WSDL_"]').not('[aria-labelledby="WSDL_Address_Label"]').closest("td").parent().css("display","none");$('[aria-labelledby="WSDL_Address_Label"]').parent().find("img").remove();$('[aria-labelledby="Address_Label"]').parent().find("img").remove();$('[aria-labelledby="Cal_Full_Address_Label"]').parent().parent().parent().hide()},1);if(sView=="VF SPS Existing Capture Customer Details Postpay Mobile View"){var bo=SiebelApp.S_App.GetActiveBusObj();var bc=bo.GetBusCompByName("VF Capture Customer Details TBC");$('[aria-labelledby="WSDL_Address_Label"]').autocomplete({source:function(request,response){$('input[type="text"]').parent().find(".VFSSPSAddressvalidationicon").remove();$("input[name='"+controls["WSDL Address"].GetInputName()+"']").after('<img class="VFSSPSAddressvalidationicon" src="images/VFSPSaddress-loader.gif"></img>');var service=SiebelApp.S_App.GetService("QAS WSDL");var inPS=SiebelApp.S_App.NewPropertySet();var sValue=$('[aria-labelledby="WSDL_Address_Label"]').val();inPS.SetProperty("SearchString",sValue);setTimeout(function(){if(service){var outPS=service.InvokeMethod("DoSearchProxy",inPS);var resultSet=outPS.GetChild(0);var addrCount=resultSet.GetChildCount();var addrArray=[];if(resultSet){for(var i=0;i<=addrCount;i++){if(i==addrCount){addrArray.push("Address Not Found? Click Here"+"~^"+"404")}else{addrArray.push(resultSet.GetChild(i).GetProperty("QAS Wsdl Address")+"~^"+resultSet.GetChild(i).GetProperty("QAS Wsdl Moniker"))}}}$('input[type="text"]').parent().find(".VFSSPSAddressvalidationicon").remove();VFCustomSiebelInterface.SetProfileAttr("QAS Query Executed","Y")}response($.map(addrArray,function(item,id){var res=item.split("~^");return{value:res[0],id:res[1]}}))},50)},minLength:10,appendTo:$('[aria-labelledby="WSDL_Address_Label"]').parent(),select:function(event,ui){var sPickAddr=ui.item.value;var sMonikerval=ui.item.id;var service=SiebelApp.S_App.GetService("QAS WSDL");var inPS=SiebelApp.S_App.NewPropertySet();inPS.SetProperty("PickMoniker",sMonikerval);inPS.SetProperty("PickFullAddr",sPickAddr);var AppletName=GetActiveCreditAppletName();var App=SiebelApp.S_App.GetActiveView().GetApplet(AppletName);BC=App.GetBusComp();var pm=App.GetPModel();var controls1=pm.Get("GetControls");if(sMonikerval=="404"){VFSPSSetFieldValue("VF Capture Customer Details TBC","VF Postcode Validate Flag","Y");bc.SetFieldValue("Manual Address Entry","Y");$('[aria-labelledby="Suburb_Label"]').removeAttr("readonly");$('[aria-labelledby="State_Label"]').removeAttr("readonly");$("#_sweview div").trigger("click");var manualAdrs=controls1["Manual Address Entry"];var manAdrVal=BC.GetFieldValue("Manual Address Entry");var i=SiebelJS.Dependency("SiebelApp.Constants");pm.OnControlEvent(i.get("PHYEVENT_INVOKE_TOGGLE"),manualAdrs,manAdrVal)}else{if(!$('input[type="text"]').parent().find(".VFSSPSAddressvalidationicon").hasClass("VFSSPSAddressvalidationicon")){$("input[name='"+controls["WSDL Address"].GetInputName()+"']").after('<img class="VFSSPSAddressvalidationicon" src="images/VFSPStick.png"></img>')}var outPS=service.InvokeMethod("GetAddressPostpayOUI",inPS);var resultSet=outPS.GetChild(0).GetChild(0);var sPickFullAddr=resultSet.GetProperty("QAS Wsdl Address");var sUnitType=resultSet.GetProperty("Floor Type");var sUnitNumber=resultSet.GetProperty("Floor");var sBuildingName=resultSet.GetProperty("Address Building");var sBuildingNumber=resultSet.GetProperty("Street Number");var sStreetName=resultSet.GetProperty("Street Name");var sStreetType=resultSet.GetProperty("Street Type");var sSuburb=resultSet.GetProperty("Suburb");var sState=resultSet.GetProperty("State");var sPostcode=resultSet.GetProperty("Post Code");var sCountry=resultSet.GetProperty("Country");var sDPID=resultSet.GetProperty("DPID");var WSDLValidationStatus=resultSet.GetProperty("Validation Status");var WSDLAddressType=resultSet.GetProperty("Address Type");var WSDLPOBox=resultSet.GetProperty("PO Box");var WSDLPrivateBag=resultSet.GetProperty("Private Bag");VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Floor Type",sUnitType);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Floor",sUnitNumber);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Address Building",sBuildingName);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Street Number",sBuildingNumber);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Street Name",sStreetName);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Street Type",sStreetType);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Suburb",sSuburb);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL State",sState);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Post Code",sPostcode);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Country",sCountry);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL DPID",sDPID);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Validation Status","1");VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Address Type",WSDLAddressType);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL PO Box",WSDLPOBox);VFSPSSetFieldValue("VF Capture Customer Details TBC","WSDL Private Bag",WSDLPrivateBag);VFSPSSetFieldValue("VF Capture Customer Details TBC","Address Selected",sPickFullAddr);VFSPSSetFieldValue("VF Capture Customer Details TBC","Address Status","1")}}})}};VFSPSExistingCustomerDetailsPR.prototype.BindEvents=function(){SiebelAppFacade.VFSPSExistingCustomerDetailsPR.superclass.BindEvents.call(this);var pm=this.GetPM();$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSScanId","click",function(){var CheckIDCaptureTBC=VFCustomSiebelInterface.VFSPSGetAvailableIDCaptureBC();console.log(CheckIDCaptureTBC);if(!CheckIDCaptureTBC){alert("You cannot scan more than 4 documents")}else{VFTabletIntegrationConstants.SetConstants("VFSPSUpdateIDCaptureTBC",CheckIDCaptureTBC);VFTabletIntegrationConstants.SetConstants("VFSPSScanKeyName","OCRPrimaryIdScan");VFSPSShowIDList();console.log("scan allowed")}});$("#s_"+pm.Get("GetFullId")+"_div").delegate(".VFSPSCheckbox > input","click",{ctx:this},VFSPSEnableNextButton);$("#s_"+pm.Get("GetFullId")+"_div").delegate(".VFSPSBusinessTypeRadio","click",{ctx:this},VFSPSEnableNextButton);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCustomerTitleDropDown","click",{ctx:this},VFSPSCustomerTitleDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCustomerFloorDropDown","click",{ctx:this},VFSPSCustomerFloorDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCustomerStreetDropDown","click",{ctx:this},VFSPSCustomerStreetDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCustomerStateDropDown","click",{ctx:this},VFSPSCustomerStateDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCustomerCountryDropDown","click",{ctx:this},VFSPSCustomerCountryDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCustomerTypeDropDown","click",{ctx:this},VFSPSCustomerTypeDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCustomerIndustryDropDown","click",{ctx:this},VFSPSCustomerIndustryDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCustomerBillCycleDropDown","click",{ctx:this},VFSPSCustomerBillCycleDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSSPSSearchABNACN","click",{ctx:this},VFSSPSSearchABNACN);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSVFCustomerTypeDropDown","click",{ctx:this},VFSPSVFCustomerTypeDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSVFTradingAsDropDown","click",{ctx:this},VFSPSVFTradingAsDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate(".VFSPSCustomerPostCode","keydown",{ctx:this},VFSPSCustomerPostCodeCheckLength);$("#s_"+pm.Get("GetFullId")+"_div").delegate(".VFSPSCustomerPostCode","input",{ctx:this},VFSPSCustomerPostCodeDropDown)};VFSPSExistingCustomerDetailsPR.prototype.EndLife=function(){SiebelAppFacade.VFSPSExistingCustomerDetailsPR.superclass.EndLife.call(this);$("#openModal").remove()};function VFSPSCustomerPostCodeCheckLength(e){if((event.which!=8)&&(event.which!=46)){var val=$(this).val();if(val.length==4){event.preventDefault();event.stopPropagation()}}}function VFSPSCustomerPostCodeDropDown(e){var val=$(this).val();if(val.length==4){$('[aria-labelledby="Suburb_Label"]').removeAttr("readonly");$('[aria-labelledby="State_Label"]').removeAttr("readonly");var BO=SiebelApp.S_App.GetActiveBusObj();var BC=BO.GetBusCompByName("VF Capture Customer Details TBC");var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("Business Component Name","VF Postcode Validated VBC");VFCustomSiebelInterface.SetProfileAttr("PostcodeAttr",$(this).val());VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){Output=VFCustomSiebelInterface.CallBS("VF Generic VBC Service","Query",Input,{});var PicklistValues=new Array();var ArrayList=VFCustomSiebelInterface.SiebelMessageToArray(Output);var ArrayListLen=ArrayList.length;for(var i=0;i<ArrayListLen;i++){PicklistValues[PicklistValues.length]=ArrayList[i]["VFSPSSuburb"]}VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","City",PicklistValues,"","","Siebel","VFSPSExistingCustomerSubrub");VFSPSUdateUIFrameWork.VFSPSUnblockUI()},100)}}function VFSPSExistingCustomerSubrub(e){var BO=SiebelApp.S_App.GetActiveBusObj();var BC=BO.GetBusCompByName("VF Capture Customer Details TBC");var subrub=BC.GetFieldValue("City");var arrayOfStrings=subrub.split(",");VFSPSSetFieldValue("VF Capture Customer Details TBC","State",arrayOfStrings[1]);VFSPSSetFieldValue("VF Capture Customer Details TBC","City",arrayOfStrings[0]);$('[aria-labelledby="Suburb_Label"]').attr("readonly","true");$('[aria-labelledby="State_Label"]').attr("readonly","true")}function VFSPSVFCustomerTypeDropDown(e){var SearchString="[List Of Values.Type] = 'VF_CUST_TYPE' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","VF Customer Type","LOV","",SearchString,"Siebel","")}function GetActiveCreditAppletName(){var AppletMap=SiebelApp.S_App.GetActiveView().GetAppletMap();var AppletList=["VF SPS Exst Capture Customer Details Toggle Form Applet Mobile Person","VF SPS Exst Capture Customer Details Toggle Form Applet Mobile LRC","VF SPS Exst Capture Customer Details Toggle Form Applet Mobile ST","VF SPS Exst Capture Customer Manual Address Detail Form Applet Mobile Perso","VF SPS Exst Capture Customer Manual Address Detail Form Applet Mobile LRC","VF SPS Exst Capture Customer Manual Address Detail Form Applet Mobile ST"];var AppletName="";for(var i=0;i<AppletList.length;i++){if(AppletMap[AppletList[i]]){AppletName=AppletList[i];break}}return AppletName}function SetABNSearchIcon(){var bo=SiebelApp.S_App.GetActiveBusObj();var bc=bo.GetBusCompByName("VF Capture Customer Details TBC");var CompanyName=bc.GetFieldValue("Company Name");var Tradingas=bc.GetFieldValue("Trading As");var ABN=bc.GetFieldValue("ABN/ACN");var sEditable=bc.GetFieldValue("Account Status and LOV");$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").attr("type","number");if(CompanyName!=""&&Tradingas!=""&&ABN!=""){setTimeout(function(){$("input[name='"+controls["Company Name"].GetInputName()+"']").attr("readonly","readonly");$("input[name='"+controls["Trading As"].GetInputName()+"']").attr("readonly","readonly")},50);if(!$("#VFSSPSSearchABNACN").hasClass("VFSPSClearSearch")==true){$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").after('<img id = "VFSSPSSearchABNACN" class="VFSPSClearSearch VFSPSExistingABNCross" src="images/VFSPSCrossMark.png"></img>')}}else{if(!$("#VFSSPSSearchABNACN").hasClass("VFSPSAddSearch")==true){$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").after('<img id = "VFSSPSSearchABNACN" class="VFSPSAddSearch VFSPSExistingABNSearchImg" src="images/VFSPSSearchICON.png"></img>')}}if(sEditable=="FALSE"){$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").attr("readonly","readonly");$("input[name='"+controls["Company Name"].GetInputName()+"']").attr("readonly","readonly");$("input[name='"+controls["Trading As"].GetInputName()+"']").attr("readonly","readonly")}}function VFSSPSSearchABNACN(e){var WFName="VF ABR Enquiry",Options="";var sActiveView=SiebelApp.S_App.GetActiveView();var bo=SiebelApp.S_App.GetActiveBusObj();var bc=bo.GetBusCompByName("VF Capture Customer Details TBC");var sEditable=bc.GetFieldValue("Account Status and LOV");if($(this).hasClass("VFSPSClearSearch")==true&&sEditable=="TRUE"){$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").val("");$("input[name='"+controls["Company Name"].GetInputName()+"']").val("").removeAttr("readonly");VFSPSSetFieldValue("VF Capture Customer Details TBC","Company Name","");VFSPSSetFieldValue("VF Capture Customer Details TBC","ABN/ACN","");VFSPSSetFieldValue("VF Capture Customer Details TBC","Trading As","");VFSPSSetFieldValue("VF Capture Customer Details TBC","VF Customer Type","");if(sActiveView.GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile LRC")){$("input[name='"+controls["Industry Type"].GetInputName()+"']").val("");VFSPSSetFieldValue("VF Capture Customer Details TBC","Industry Type","")}$(this).attr("src","images/VFSPSSearchICON.png").removeClass("VFSPSClearSearch").addClass("VFSPSAddSearch");$(this).removeClass("VFSPSExistingABNCross").addClass("VFSPSExistingABNSearchImg")}else{if(sEditable=="TRUE"){var ABNCtrlVal=$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").val();ABNCtrLen=ABNCtrlVal.length;var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Output=VFCustomSiebelInterface.CallBS("VF SPS Postpay Customer Utilities","InvokeABNACN",Input,{});var EnableSearch=Output.GetProperty("EnableSearch");if(isNaN(ABNCtrlVal)){alert("ABN/ACN should be Numeric")}else{if(ABNCtrlVal=="00000000000"||ABNCtrlVal=="00000000001"){alert("Please enter a valid ABN/ACN number")}else{if((ABNCtrLen==9||ABNCtrLen==11)&&EnableSearch=="true"){var bo=SiebelApp.S_App.GetActiveBusObj();var bc=bo.GetBusCompByName("VF Capture Customer Details TBC");var ABN=bc.GetFieldValue("ABN/ACN");var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("Business Component Name","VF ABR Enquiry VBC");Input.SetProperty("ABN_ACN_Num",ABN);Output=VFCustomSiebelInterface.CallBS("VF Generic VBC Service","Query",Input,{});var sCompanyName=Output.GetProperty("Company_Name");var abnstatus=Output.GetProperty("abnstatus");var Entity_Type=Output.GetProperty("Entity_Type");var sRecord=Output.GetProperty("RecordFound");var sABNNumber=Output.GetProperty("ABN_Number");var sLOVEntityType=Output.GetProperty("sLOVEntityType");var boActive1=SiebelApp.S_App.GetActiveBusObj();var bcActive1=boActive1.GetBusCompByName("VF Capture Customer Details TBC");var VFSPSTradingSession=bcActive1.GetFieldValue("Session Id");var VFSPSTradingArray=VFSPSTradingSession+"Array";Picklist=new Array();var ArrayList=VFCustomSiebelInterface.SiebelMessageToArray(Output);VFTabletIntegrationConstants.SetConstants(VFSPSTradingArray,ArrayList);var ArrayListLen=ArrayList.length;for(var i=0;i<ArrayListLen;i++){Picklist[Picklist.length]=ArrayList[i]["TradingName"];VFTabletIntegrationConstants.SetConstants(VFSPSTradingSession,Picklist)}if(sLOVEntityType==""){alert("Unfortunately the ABN/ACN provided does not have an acceptable entity type.")}else{if(sRecord=="Y"){if(abnstatus=="Active"||abnstatus==""){if(sCompanyName!=""){VFSPSSetFieldValue("VF Capture Customer Details TBC","Company Name",sCompanyName);$("input[name='"+controls["Company Name"].GetInputName()+"']").attr("readonly","readonly")}VFSPSSetFieldValue("VF Capture Customer Details TBC","VF ABN Status",abnstatus);VFSPSSetFieldValue("VF Capture Customer Details TBC","ABN/ACN",sABNNumber);VFSPSSetFieldValue("VF Capture Customer Details TBC","VF ABN Entity Type",Entity_Type);var SearchString="[List Of Values.Type] = 'VF_ENTITY_TYPE' AND [List Of Values.Active] = 'Y' AND [List Of Values.Name] = '"+Entity_Type+"'";var sLOVCustTypeAry=VFCustomSiebelInterface.GetPickListValues("",SearchString);if(sLOVCustTypeAry.length>0){var sLOVCustType=sLOVCustTypeAry[0];if(sLOVCustType=="Sole Trader"||sLOVCustType=="Local Registered Company"||sLOVCustType=="Government"){VFSPSSetFieldValue("VF Capture Customer Details TBC","VF Customer Type",sLOVCustType)}}$(this).attr("src","images/VFSPSCrossMark.png").addClass("VFSPSClearSearch").removeClass("VFSPSAddSearch");$(this).addClass("VFSPSExistingABNCross").removeClass("VFSPSExistingABNSearchImg")}else{alert("Your ABN/ACN doesn't appear to be active.Please check the number and try again.")}}else{alert("The ABN provided does not match a valid Business Type in our systems. To proceed with the connection, please cancel this application and submit a new application as a Consumer customer")}}}else{alert("Your ABN/ACN Number is invalid. Please Enter Valid 9 or 11 Digit ACN Number")}}}}}}function VFSPSSetFieldValue(BCName,FieldName,FieldValue){var BS="VF SPS IDCaputre BS";var Method="SetDateFieldValues";var Inputs=SiebelApp.S_App.NewPropertySet();Inputs.SetProperty("BCName",BCName);Inputs.SetProperty("FieldName",FieldName);Inputs.SetProperty("FieldValue",FieldValue);Outputs=VFCustomSiebelInterface.CallBS(BS,Method,Inputs,{})}function VFSPSCustomerBillCycleDropDown(e){var BS="VF Check Responsibilities";var Method="Check Responsibilities";var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("Responsibility","VF Function Access - Billing Operations");var outs=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});var Exist=outs.GetProperty("Exists");if(Exist=="Y"){Exist="[List Of Values.Low] IS NULL"}else{Exist="[List Of Values.High] = 'Open'"}BS="VF TBUI Utilities";Method="SetCustomerBillSegmentDefault";inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("Organization",SiebelApp.S_App.GetProfileAttr("gOrgName"));outs=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});var BillSegment="[List Of Values.Parent]='"+outs.GetProperty("BillSegment")+"'";var SearchString="[List Of Values.Type] = 'BILL_CYCLE' AND [List Of Values.Active] = 'Y' AND "+Exist+" AND "+BillSegment;VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","DOM","LOV","",SearchString,"Siebel","")}function VFSPSCustomerTitleDropDown(e){var SearchString="[List Of Values.Type] = 'MR_MS_TBUI' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","Title","LOV","",SearchString,"Siebel","")}function VFSPSVFTradingAsDropDown(e){var boActive1=SiebelApp.S_App.GetActiveBusObj();var bcActive1=boActive1.GetBusCompByName("VF Capture Customer Details TBC");var VFSPSTradingSession=bcActive1.GetFieldValue("Session Id");var sEditable=bcActive1.GetFieldValue("Account Status and LOV");var PicklistValues=VFTabletIntegrationConstants.GetConstants(VFSPSTradingSession);var pm=e.data.ctx.GetPM();var controls=pm.Get("GetControls");if(sEditable=="TRUE"){if(!PicklistValues){var bo=SiebelApp.S_App.GetActiveBusObj();var bc=bo.GetBusCompByName("VF Capture Customer Details TBC");var ABNCtrlVal=$("input[name='"+controls["ABN/ACN"].GetInputName()+"']").val();ABNCtrLen=ABNCtrlVal.length;var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Output=VFCustomSiebelInterface.CallBS("VF SPS Postpay Customer Utilities","InvokeABNACN",Input,{});var EnableSearch=Output.GetProperty("EnableSearch");if((ABNCtrLen==9||ABNCtrLen==11)&&EnableSearch=="true"){var ABN=bc.GetFieldValue("ABN/ACN");var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("Business Component Name","VF ABR Enquiry VBC");Input.SetProperty("ABN_ACN_Num",ABN);Output=VFCustomSiebelInterface.CallBS("VF Generic VBC Service","Query",Input,{});var sCompanyName=Output.GetProperty("Company_Name");var abnstatus=Output.GetProperty("abnstatus");var boActive1=SiebelApp.S_App.GetActiveBusObj();var bcActive1=boActive1.GetBusCompByName("VF Capture Customer Details TBC");var VFSPSTradingSession=bcActive1.GetFieldValue("Session Id");var VFSPSTradingArray=VFSPSTradingSession+"Array";PicklistValues=new Array();var ArrayList=VFCustomSiebelInterface.SiebelMessageToArray(Output);VFTabletIntegrationConstants.SetConstants(VFSPSTradingArray,ArrayList);var ArrayListLen=ArrayList.length;for(var i=0;i<ArrayListLen;i++){PicklistValues[PicklistValues.length]=ArrayList[i]["TradingName"];VFTabletIntegrationConstants.SetConstants(VFSPSTradingSession,PicklistValues)}}}VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","Trading As",PicklistValues,"","","Siebel","VFSPSExistingTradingDate")}}function VFSPSTradingDate(e){var boActive1=SiebelApp.S_App.GetActiveBusObj();var bcActive1=boActive1.GetBusCompByName("VF Capture Customer Details TBC");var VFTradingAs=bcActive1.GetFieldValue("Trading As");var VFTradingArray=bcActive1.GetFieldValue("Session Id");var VFSPSTradingArray=VFTradingArray+"Array";var sValues=VFTabletIntegrationConstants.GetConstants(VFSPSTradingArray);var sValuesLen=sValues.length;for(var i=0;i<sValuesLen;i++){if(VFTradingAs==sValues[i]["TradingName"]){VFSPSSetFieldValue("VF Capture Customer Details TBC","VF Trading Date",sValues[i]["TradingDate"]);break}}}function VFSPSCustomerIndustryDropDown(e){var SearchString="[List Of Values.Type] = 'VF_INDUSTRY_TYPE' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","Industry Type","LOV","",SearchString,"Siebel","")}function VFSPSCustomerFloorDropDown(e){var SearchString="[List Of Values.Type] = 'VF_ADDRESS_FLOOR_TYPE' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","Address Floor Type","LOV","",SearchString,"Siebel","")}function VFSPSCustomerStreetDropDown(e){var SearchString="[List Of Values.Type] = 'VF_ADDRESS_STREET_TYPE' AND [List Of Values.Active] = 'Y' AND [List Of Values.High] = 'Australia'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","Address Street Type","LOV","",SearchString,"Siebel","")}function VFSPSCustomerStateDropDown(e){var SearchString="[List Of Values.Type] = 'VF_ADDRESS_STATE' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","State","LOV","",SearchString,"Siebel","")}function VFSPSCustomerCountryDropDown(e){var SearchString="[List Of Values.Type] = 'COUNTRY' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","Country","LOV","",SearchString,"Siebel","")}function VFSPSCustomerTypeDropDown(e){var SearchString="[List Of Values.Type] = 'FIN_CON_ADDRESS_TYPE' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","Address Format","LOV","",SearchString,"Siebel","")}function VFSPSVFCustomerTypeDropDown(e){var SearchString="[List Of Values.Type] = 'VF_CUST_TYPE' AND [List Of Values.Active] = 'Y' AND [List Of Values.Value] <> 'Person' AND [List Of Values.Value] <> 'Government'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Capture Customer Details TBC","VF Customer Type","LOV","",SearchString,"Siebel","")}function VFSPSShowIDList(e){var PriLength=VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo.length;if(PriLength==0){VFCustomSiebelInterface.GetIdList();PriLength=VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo.length}if(!$("#openModal").length){$("body").append(GetIDTemplate())}$("#openModal #VFSPSPrimaryIDTypes").html("");$("#openModal .VFSPSIDPopUpHeader").html("Choose 1 of the following ID");$("#VFSPSPrimaryIDTypes").append("<div class='VFSPSTopLineSpace'></div>");for(var i=0;i<PriLength;i++){console.log("high:"+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].Primary+"low:"+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].ProofOfAddress);var Template='<div class="VFSPSIDTypeLine VFSPSIDTypeLineSelect" Type="'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].Type+'" Points="'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].Points+'" IsPrimary="'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].Primary+'" ProofOFAddress="'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].ProofOfAddress+'">																																																																																															<div class="VFSPSIDType">'+VFCustomSiebelInterface.PrimaryIDListCustomerCaptureVodlo[i].Type+'</div>																																																																																															<div class="VFSPSIDTypeChevron"></div>																																																																																															<div class="VFSPSLineSpace"></div>																																																																																															</div>';$("#VFSPSPrimaryIDTypes").append(Template)}$("#openModal").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$("#openModal").undelegate();$("#openModal").delegate(".VFSPSDialogClose","click",{},function(e){$("#openModal").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone")});$("#openModal").delegate(".VFSPSIDTypeLineSelect","click",{},VFSPSScanID)}function GetIDTemplate(){return(' <div id = "openModal" class = "modalDialog VFSPSDisplayNone">  																																																																															 <div>  																																																																															 <span  title = "Close" class = "VFSPSDialogClose" ><img src="images/vfspsclose.jpg"></span>  																																																																															 <h2 class="VFSPSIDPopUpHeader"> Choose 1 of the following ID </h2>  																																																																															 <div id = "VFSPSPrimaryIDTypes">  																																																																															 </div>  																																																																															 </div>  																																																																															 </div> ')}function VFSPSScanID(e){var cardType=$(this).attr("type");var points=$(this).attr("Points");var IsPrimary=$(this).attr("IsPrimary");var ProofOAddress=$(this).attr("ProofOfAddress");VFTabletIntegrationConstants.SetConstants("VFSPSCardType",cardType);if(cardType=="Driver's Licence"||cardType=="Boating Licence"||cardType=="Police ID"){var stateShortArray=VFCustomSiebelInterface.GetPickListValues("VF_ID_ISSUER","");$("#openModal").remove();if(!$("#openModal").length){$("body").append(GetIDTemplate())}$("#openModal").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$("#openModal .VFSPSIDPopUpHeader").html("Choose 1 of the following State");$("#VFSPSPrimaryIDTypes").append("<div class='VFSPSTopLineSpace'></div>");for(var i=0;i<stateShortArray.length;i++){var Template='<div class="VFSPSIDTypeLine VFSPSStateLineSelect" Type="'+stateShortArray[i]+'">																																																																																																															<div class="VFSPSIDType">'+stateShortArray[i]+'</div>																																																																																																															<div class="VFSPSIDTypeChevron"></div>																																																																																																															<div class="VFSPSLineSpace"></div>																																																																																																															</div>';$("#VFSPSPrimaryIDTypes").append(Template)}$("#openModal").undelegate();$("#openModal").delegate(".VFSPSDialogClose","click",{},function(e){$("#openModal").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone")});$("#openModal").delegate(".VFSPSStateLineSelect","click",{cardType:cardType,points:points,IsPrimary:IsPrimary,ProofOAddress:ProofOAddress},VFSPSGetState)}else{VFSPSStartScanID(cardType,points,IsPrimary,ProofOAddress,"")}}function VFSPSGetState(e){var state=$(this).attr("type");VFSPSStartScanID(e.data.cardType,e.data.points,e.data.IsPrimary,e.data.ProofOAddress,state)}function VFSPSMapCardType(CardType,State){var sCardMap="";switch(CardType){case ("Driver's Licence"):sCardMap=State.toUpperCase()+"_"+"LICENCE";break;case ("Passport"):sCardMap="PASSPORT";break;case ("Armed Forces ID"):sCardMap="Armed Forces ID";break;case ("Police ID"):sCardMap="Police ID";break;default:}return sCardMap}function VFSPSStartScanID(cardType,points,IsPrimary,ProofOAddress,State){var bo1=SiebelApp.S_App.GetActiveBusObj();var bc1=bo1.GetBusCompByName("VF Capture Customer Details TBC");var sessionId=bc1.GetFieldValue("Session Id");var OCRCardMap=VFSPSMapCardType(cardType,State);ProofOAddress=typeof(ProofOAddress)=="undefined"?"N":ProofOAddress;IsPrimary=typeof(IsPrimary)=="undefined"?"N":IsPrimary;var requestData={"Key":"OCRPrimaryIdScan","SettingsData":"","MetaData":"","RequestParam":{"CardType":OCRCardMap,"SessionID":sessionId,"IsImageReq":"True","ReturnData":[{"cardType":cardType,"state":State,"points":points,"ProofOAddress":ProofOAddress,"IsPrimary":IsPrimary}]}};$("#openModal").remove();if(typeof(VHAWrapper)=="undefined"){var retVal=VHAWrapperSTUB?VHAWrapperSTUB.scanIDUsingOCR(JSON.stringify(requestData),"VFTabletIntegration.Success","VFTabletIntegration.Failure"):0;retVal="1"}else{var retVal=VHAWrapper?VHAWrapper.scanIDUsingOCR(JSON.stringify(requestData),"VFTabletIntegration.Success","VFTabletIntegration.Failure"):0}if(retVal){}else{responseData={"Key":"OCRPrimaryIdScan","Data":{"ReturnData":[{"cardType":cardType,"state":State,"points":points,"ProofOAddress":ProofOAddress,"IsPrimary":IsPrimary}]},"StatusCode":"200","StatusMessage":"Success message"};VFTabletIntegration.Success(JSON.stringify(responseData));alert("Could not initiate Bar code scaning. Please go ahead with manual entry.")}}function VFSPSEnableNextButton(pm,InputList,NextBtn,ExplictCall){if(pm==null||pm==""||typeof(pm)=="undefined"){var App=SiebelApp.S_App.GetActiveView().GetApplet(GetActiveCreditAppletName());var pm=App.GetPModel()}var bBuisness=false;if(!ExplictCall){if(typeof(ExplictCall)=="undefined"){var App=SiebelApp.S_App.GetActiveView().GetApplet(GetActiveCreditAppletName());var pm=App.GetPModel();var pr=pm.GetRenderer()}else{var pr=this}if(SiebelApp.S_App.GetActiveView().GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile Person")){InputList=pr.InputList}else{if(SiebelApp.S_App.GetActiveView().GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile LRC")){InputList=pr.InputListLRC;bBuisness=true}else{if(SiebelApp.S_App.GetActiveView().GetApplet("VF SPS Exst Capture Customer Details Toggle Form Applet Mobile ST")){InputList=pr.InputListST;bBuisness=true}else{if(SiebelApp.S_App.GetActiveView().GetApplet("VF SPS Exst Capture Customer Manual Address Detail Form Applet Mobile LRC")){InputList=pr.InputListLRCMA;bBuisness=true}else{if(SiebelApp.S_App.GetActiveView().GetApplet("VF SPS Exst Capture Customer Manual Address Detail Form Applet Mobile ST")){InputList=pr.InputListSTMA;bBuisness=true}else{InputList=pr.InputListMA}}}}}NextBtn=pr.NextBtn}var controls=pm.Get("GetControls");var InputListLength=InputList.length;var CustomerFormFieldsEmpty=false;for(var i=0;i<InputListLength;i++){var input=$("input[name='"+controls[InputList[i]].GetInputName()+"']");if(input.val()==""||$('.VFSPSCheckbox > input[type="checkbox"]').is(":checked")==false){CustomerFormFieldsEmpty=true;VFTabletIntegrationConstants.SetConstants("VFSPSCustomerFieldempty","True");break}else{if(!$(".VFSPSBusinessTypeRadio").is(":checked")&&bBuisness){CustomerFormFieldsEmpty=true;VFTabletIntegrationConstants.SetConstants("VFSPSCustomerFieldempty","True")}else{VFTabletIntegrationConstants.SetConstants("VFSPSCustomerFieldempty","False")}}}if(CustomerFormFieldsEmpty==false){$("#"+NextBtn+"_Ctrl").removeClass("VFSPSPlaybarNextBtnDisabled").addClass("VFSPSPlaybarNextBtnEnabled")}else{$("#"+NextBtn+"_Ctrl").addClass("VFSPSPlaybarNextBtnDisabled").removeClass("VFSPSPlaybarNextBtnEnabled")}var applet=SiebelApp.S_App.GetActiveView().GetApplet("VF SPS Task Playbar Applet - Top");applet.DoExecuteUIUpdate()}return VFSPSExistingCustomerDetailsPR}());return"SiebelAppFacade.VFSPSExistingCustomerDetailsPR"})};
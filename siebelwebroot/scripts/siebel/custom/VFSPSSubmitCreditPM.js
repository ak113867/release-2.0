if(typeof(SiebelAppFacade.VFSPSSubmitCreditPM)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.VFSPSSubmitCreditPM");define("siebel/custom/VFSPSSubmitCreditPM",[],function(){SiebelAppFacade.VFSPSSubmitCreditPM=(function(){function VFSPSSubmitCreditPM(proxy){SiebelAppFacade.VFSPSSubmitCreditPM.superclass.constructor.call(this,proxy)}SiebelJS.Extend(VFSPSSubmitCreditPM,SiebelAppFacade.PresentationModel);VFSPSSubmitCreditPM.prototype.Init=function(){SiebelAppFacade.VFSPSSubmitCreditPM.superclass.Init.call(this);this.AddMethod("PostExecute",PreInvokeMethod,{sequence:false,scope:this});this.AddMethod("CanInvokeMethod",CanInvokeMethod,{sequence:true,scope:this})};function CanInvokeMethod(MethodName,returnStructure){switch(MethodName){case"EventMethodTriggerCreditCheck":var ActiveView=SiebelApp.S_App.GetActiveView();if($(".VFSPSSubmitButtons > button").hasClass("VFSPSPlaybarNextBtnEnabled")==true){returnStructure["ContinueOperation"]=true}else{returnStructure["CancelOperation"]=true}}}function PreInvokeMethod(MethodName,returnStructure){switch(MethodName){case"SetDealership":$(".VFSPSSetDealerCodeButton > button").addClass("VFSPSPlaybarNextBtnDisabled");break;case"EventMethodTriggerCreditCheck":var sActiveView=SiebelApp.S_App.GetActiveView();var sapplet=sActiveView.GetApplet("VF SPS Withdraw Credit Check Applet");var sBO=SiebelApp.S_App.GetActiveBusObj();var sBC=sBO.GetBusCompByName("VF Com Financial Profile");var sCreditid=sBC.GetFieldValue("Id");var sStatus=sBC.GetFieldValue("VF Credit Check Status");$(".VFSPSCCStatus").html(sStatus);if(sStatus=="Pending"||sStatus=="Approved"||sStatus=="APPROVE"||sStatus=="CONDAPPRVE"){$(".VFSPSSubmitAppletButtons").hide();$("#VFSPSdivclass").removeClass("VFSPSDisplayNone");$(".VFSPSResetButtons").removeClass("VFSPSDisplayNone");$("#s_"+sapplet.GetFullId()+"_div").show();$(".VFSPSAdd").addClass("VFSPSDisableClick");$(".VFSPSHandsetListDivParent").find('input[type="checkbox"]').attr("disabled","disabled");$(".VFSPSHandsetListDivParent").find('input[type="number"]').attr("disabled","disabled");$(".VFSPSHandsetListDivParent").find('input[type="text"],input[type="number"],.VFSPSDelete,.VFSPSCreditDetailPickIconNew,.VFSPSCustomerDetailPickIconNew').addClass("VFSPSDisableClick");if(sStatus=="CONDAPPRVE"){$(".VFSPSAcceptButtons").removeClass("VFSPSDisplayNone")}}if(sStatus=="APPROVE"||sStatus=="CONDAPPRVE"||sStatus=="ACCEPT"){$(".VFSPSWithdrawCreditCheck").addClass("VFSPSWithdrawCreditCheckDone").removeClass("VFSPSWithdrawCreditCheckUndone")}else{$(".VFSPSWithdrawCreditCheck").addClass("VFSPSWithdrawCreditCheckUndone").removeClass("VFSPSWithdrawCreditCheckDone")}var applet=sActiveView.GetApplet("VF SPS Task Playbar Applet - Top");VFTabletIntegrationConstants.SetConstants("VFSPSCreditFieldempty","true");applet.CanInvokeMethod("NavigateNext");break;case"ResetCreditCheck":var sActiveView=SiebelApp.S_App.GetActiveView();var sapplet=sActiveView.GetApplet("VF SPS Withdraw Credit Check Applet");var sBO=SiebelApp.S_App.GetActiveBusObj();var sBC=sBO.GetBusCompByName("VF Com Financial Profile");var sCreditid=sBC.GetFieldValue("Id");var sStatus=sBC.GetFieldValue("VF Credit Check Status");if(sStatus=="New"){$(".VFSPSSubmitAppletButtons").hide();$(".VFSPSSubmitButtons button").removeClass("VFSPSPlaybarNextBtnEnabled").addClass("VFSPSPlaybarNextBtnDisabled");$("#VFSPSdivclass").addClass("VFSPSDisplayNone");$(".VFSPSResetButtons").removeClass("VFSPSDisplayNone");$("#s_"+sapplet.GetFullId()+"_div").show();$(".VFSPSAdd").removeClass("VFSPSDisableClick");$(".VFSPSHandsetListDivParent").find('input[type="checkbox"]').removeAttr("disabled");$(".VFSPSHandsetListDivParent").find('input[type="text"],input[type="number"],.VFSPSDelete,.VFSPSCreditDetailPickIconNew,.VFSPSCustomerDetailPickIconNew').removeClass("VFSPSDisableClick");$(".VFSPSAcceptButtons").addClass("VFSPSDisplayNone")}var applet=sActiveView.GetApplet("VF SPS Task Playbar Applet - Top");VFTabletIntegrationConstants.SetConstants("VFSPSCreditFieldempty","false");applet.CanInvokeMethod("NavigateNext");$(".VFSPSHandsetListDivParent").remove();SiebelApp.EventManager.fireEvent("VFSPSAdd");break;case"EventMethodTriggerWithdrawCreditCheck":var sActiveView=SiebelApp.S_App.GetActiveView();var sapplet=sActiveView.GetApplet("VF SPS Withdraw Credit Check Applet");var sBO=SiebelApp.S_App.GetActiveBusObj();var sBC=sBO.GetBusCompByName("VF Com Financial Profile");var sCreditid=sBC.GetFieldValue("Id");var sStatus=sBC.GetFieldValue("VF Credit Check Status");$(".VFSPSCCStatus").html("withdrawn");if(sStatus=="New"){$(".VFSPSSubmitAppletButtons").hide();$("#VFSPSdivclass").removeClass("VFSPSDisplayNone");$("#s_"+sapplet.GetFullId()+"_div").show();$(".VFSPSAdd").removeClass("VFSPSDisableClick");$(".VFSPSHandsetListDivParent").find('input[type="checkbox"]').removeAttr("disabled");$(".VFSPSHandsetListDivParent").find('input[type="text"],input[type="number"],.VFSPSDelete,.VFSPSCreditDetailPickIconNew,.VFSPSCustomerDetailPickIconNew').removeClass("VFSPSDisableClick");$(".VFSPSAcceptButtons").addClass("VFSPSDisplayNone")}$("#VFSPSWithdrawCreditCheckButton").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone VFSPSWithdrawCreditCheckUndone");var applet=sActiveView.GetApplet("VF SPS Task Playbar Applet - Top");VFTabletIntegrationConstants.SetConstants("VFSPSCreditFieldempty","false");applet.CanInvokeMethod("NavigateNext");break;default:}}return VFSPSSubmitCreditPM}());return"SiebelAppFacade.VFSPSSubmitCreditPM"})};
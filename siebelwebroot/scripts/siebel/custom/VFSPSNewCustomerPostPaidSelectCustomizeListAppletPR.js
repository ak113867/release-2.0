if(typeof(SiebelAppFacade.VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR");define("siebel/custom/VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR",["siebel/jqgridrenderer"],function(){SiebelAppFacade.VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR=(function(){VFTabletIntegrationConstants.SetConstants("CurrentOrderLineItemId","");function VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR(pm){SiebelAppFacade.VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR.superclass.constructor.apply(this,arguments)}SiebelJS.Extend(VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR,SiebelAppFacade.JQGridRenderer);VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR.prototype.Init=function(){SiebelAppFacade.VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR.superclass.Init.apply(this,arguments);this.gPlanList=new Array();this.UniqueBrand=new Array();this.BrandModel=new Array();this.Data={"gPlanList":this.gPlanList,"UniqueBrand":this.UniqueBrand,"BrandModel":this.BrandMod,"ExistData":""};this.SetData=function(Category,data){this.Data[Category]=data};this.GetData=function(Category){return this.Data[Category]};SiebelApp.EventManager.cleanListners("VFSPSSetDevice");SiebelApp.EventManager.cleanListners("VFSPSHandleModel");SiebelApp.EventManager.cleanListners("EnableSaveButton");SiebelApp.EventManager.addListner("VFSPSSetDevice",VFSPSSetDeviceForOutOfStock,this);SiebelApp.EventManager.addListner("VFSPSHandleModel",VFSPSSetModelForBrand,this);SiebelApp.EventManager.addListner("EnableSaveButton",VFSPSCheckEnableSavePlanButton,this)};VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR.prototype.ShowUI=function(){SiebelAppFacade.VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR.superclass.ShowUI.apply(this,arguments);$(".VFSPSTaskViewMain").addClass("VFSPSPlanSummaryViewMain");VFSPSUdateUIFrameWork.VFSPSUnblockUI();var PRObject=this;var Type=SiebelApp.S_App.GetProfileAttr("VFSPSPlSumTaskPath");VFTabletIntegrationConstants.SetConstants("VFSPSPlSumTaskPath",Type);switch(Type){case ("EditExistingPlan"):var OLIId=SiebelApp.S_App.GetProfileAttr("VFSPSPlSumCurrentOrderItemId");VFTabletIntegrationConstants.SetConstants("CurrentOrderLineItemId",OLIId);SetOrderLineItemContext(OLIId);VFSPSLoadExistingPlan(PRObject);break;case ("AddNewPlan"):VFTabletIntegrationConstants.SetConstants("CurrentOrderLineItemId","");VFSPSLoadNewPlan(PRObject);break;default:}};VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR.prototype.BindEvents=function(){SiebelAppFacade.VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR.superclass.BindEvents.apply(this,arguments);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusOpenPlan","click",{ctx:this},VFSPSOpenAccordDetails);$(".VFSPSSelCusParDiv").delegate(".VFSPSSelCusChooseServiceRadio","click",{typeClass:"VFSPSSelCusChooseServiceRadio",ctx:this},VFSPSRadioButtonSelect);$(".VFSPSSelCusParDiv").delegate(".VFSPSSelCusChoosePlanRadio","click",{typeClass:"VFSPSSelCusChoosePlanRadio",ctx:this},VFSPSRadioButtonSelect);$(".VFSPSSelCusParDiv").delegate(".VFSPSSelCusChooseDurationRadio","click",{typeClass:"VFSPSSelCusChooseDurationRadio",ctx:this},VFSPSRadioButtonSelect);$(".VFSPSSelCusParDiv").delegate(".VFSPSSelCusChooseMobileRadio","click",{typeClass:"VFSPSSelCusChooseMobileRadio",ctx:this},VFSPSRadioButtonSelect);$(".VFSPSSelCusParDiv").delegate(".VFSPSSelCusOldMobilePlanTypeRadio","click",{typeClass:"VFSPSSelCusOldMobilePlanTypeRadio",ctx:this},VFSPSRadioButtonSelect);$(".VFSPSSelCusParDiv").delegate(".VFSPSSelCusChooseDeviceRadio","click",{typeClass:"VFSPSSelCusChooseDeviceRadio",ctx:this},VFSPSRadioButtonSelect);$(".VFSPSSelCusParDiv").delegate(".VFSPSSelCusSIMODeviceRadio","click",{typeClass:"VFSPSSelCusSIMODeviceRadio",ctx:this},VFSPSRadioButtonSelect);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusPickMobileNumFromResultDiv","click",{ctx:this},VFSPSAllocateMobileNumber);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusPickMobileImg","click",{ctx:this},VFSPSSearchMobileNumber);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusSavePlanButtonActive","click",{ctx:this},VFSPSCreatePlanProposition);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusPickIMEIImg","click",{ctx:this},VFSPSAllocateIMEI);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusChooseSIMImg","click",{ctx:this},VFSPSAllocateSIM);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusChoosePlanDurImg","click",{ctx:this},VFSPSChoosePlanDuration);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusChoosePlanImg ","click",{ctx:this},VFSPSQueryPlanList);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusScanIMEIButton","click",{ctx:this},VFSPSScanIMEI);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusScanSIMButton","click",{ctx:this},VFSPSScanSIM);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusResetPlanButton","click",{ctx:this},VFSPSResetPlanDetails);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusCustomizeBtn","click",{ctx:this},VFSPSInvokeCustomize);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusPortIn","click",{ctx:this},VFSPSInvokePortIn);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusChooseDeviceBrandImg","click",{ctx:this},VFSPSChooseBrand);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusChooseDeviceModelImg","click",{ctx:this},VFSPSChooseModel);$(".VFSPSPlSumNavigation").delegate(".VFSPSSelCusTaskNavCancelOrderBtn","click",{ctx:this},VFSPSSelCusCancelOrder);$(".VFSPSPlSumNavigation").delegate(".VFSPSSelCusTaskNavNextBtn","click",{ctx:this},VFSPSSelCusNavNext);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusContextHelp","click",{ctx:this},VFSPSSleCusContextHelp);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusPickOldMobileNumDOBValueImg","click",{ctx:this},VFSPSShowPortInDOB);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusOldNumNotificationMSISDN,.VFSPSSleCusNewNumNotificationMSISDN","click",{ctx:this},VFSPSSleCusNotificationMSISDN);$(".VFSPSSelCusParDiv").delegate(".VFSPSSleCusPickPromoCodeImg","click",{ctx:this},VFSPSSleCusPickPromoCode)};VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR.prototype.EndLife=function(){SiebelAppFacade.VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR.superclass.EndLife.apply(this,arguments);SiebelApp.EventManager.cleanListners("VFSPSSetDevice");SiebelApp.EventManager.cleanListners("VFSPSHandleModel")};function VFSPSGetDataFromValidationBC(){var BS="VF SPS TBUI Utilities";var Method="GetPlanDetailsFromValidationTable";var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("OrderId",VFSPSGetOrderId());inps.SetProperty("OrderLineItemId",SiebelApp.S_App.GetProfileAttr("VFSPSPlSumCurrentOrderItemId"));var outs=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});var ExistData={};ExistData["PlanDuration"]=outs.GetProperty("VF SPS Plan Duration");ExistData["PlanName"]=outs.GetProperty("VF SPS Plan Name");ExistData["PlanType"]=outs.GetProperty("VF SPS Plan Type");ExistData["PlanID"]=outs.GetProperty("VF SPS Plan Id");ExistData["ServiceType"]=outs.GetProperty("VF SPS Service Type");ExistData["Device"]=outs.GetProperty("VF SPS Device");ExistData["IMEI"]=outs.GetProperty("VF IMEI TBUI");ExistData["EnableNext"]=outs.GetProperty("Initialised");ExistData["OrderId"]=outs.GetProperty("Order Header Id");ExistData["OrderItemId"]=outs.GetProperty("Order Item Id");ExistData["MSISDN"]=outs.GetProperty("VF MSISDN TBUI");ExistData["ProtIn"]=outs.GetProperty("VF Port In TBUI");ExistData["PortInAcctNum"]=outs.GetProperty("VF Port In - Service Account TBUI");ExistData["ProtInDOB"]=outs.GetProperty("VF Port In - DOB TBUI");ExistData["ProtInMSISDN"]=outs.GetProperty("VF Port In - Service Number TBUI");ExistData["StockIndicator"]=outs.GetProperty("VF Stock Indicator TBUI");ExistData["InStockModel"]=outs.GetProperty("VF SPS Model");ExistData["InStockBrand"]=outs.GetProperty("VF SPS Brand");ExistData["SIM"]=outs.GetProperty("VF SIM TBUI");ExistData["CustomerId"]=outs.GetProperty("Customer Account Id");ExistData["CustomerDOB"]=outs.GetProperty("VF SPS DOB");ExistData["SIMODevice"]=outs.GetProperty("VF SPS SIMO Device");ExistData["NotifyMSISDN"]=outs.GetProperty("Notification MSISDN");ExistData["Sharing"]=outs.GetProperty("VF SPS SharingFlag");ExistData["PromoCode"]=outs.GetProperty("VF SPS Promo Code");return ExistData}function VFSPSLoadExistingPlan(PRObject){var ExistData=VFSPSGetDataFromValidationBC();PRObject.SetData("ExistData",ExistData);if(ExistData["PlanType"]=="Plan and Device"||(ExistData["PlanType"]=="SIM Only"&&ExistData["SIMODevice"]=="Yes")){$(".VFSPSSelChooseDevice").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");VFSPSPopulateDeviceDetails(ExistData)}else{$(".VFSPSSelChooseDevice").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock")}if(ExistData["StockIndicator"]=="In Stock"){$(".VFSPSSelAddSimNumber").removeClass("VFSPSDisplayNone");VFSPSPopulateSIMDetails(ExistData)}else{$(".VFSPSSelAddSimNumber").addClass("VFSPSDisplayNone")}if(ExistData["EnableNext"]=="Yes"){$(".VFSPSSelCusTaskNavNextBtn").addClass("VFSPSTaskNavActive").removeClass("VFSPSTaskNavInActive")}else{$(".VFSPSSelCusTaskNavNextBtn").removeClass("VFSPSTaskNavActive").addClass("VFSPSTaskNavInActive")}$(".VFSPSSleCusCustomizeBtn").addClass("VFSPSSleCusScanButtonActive").removeClass("VFSPSSleCusScanButtonInActive");VFSPSPopulateChoosePlan(ExistData);VFSPSPopulateMobileNumber(ExistData);$(".VFSPSSleCusNewPlan").addClass("VFSPSSleCusOpenPlan").removeClass("VFSPSSleCusNewPlan");$(".VFSPSSelCusChoosePlanBody").addClass("VFSPSSelCusChoosePlanBodyReadOnly").removeClass("VFSPSSelCusChoosePlanBodyEditable");$(".VFSPSSleCusChoosePromoCodeDiv").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock")}function VFSPSLoadNewPlan(PRObject){$(".VFSPSSleCusCustomizeBtn").addClass("VFSPSSleCusScanButtonInActive").removeClass("VFSPSSleCusScanButtonActive")}function VFSPSOpenAccordDetails(e){var parent=$(this).parent().parent();var ImgChild=$(this);if(parent.hasClass("VFSPSSelCusInactive")){VFSPSSwapImage(e,"Active",ImgChild);parent.addClass("VFSPSSelCusActive").removeClass("VFSPSSelCusInactive")}else{VFSPSSwapImage(e,"Inactive",ImgChild);parent.addClass("VFSPSSelCusInactive").removeClass("VFSPSSelCusActive")}}function VFSPSSwapImage(e,State,ImgChild){var img="";if(State=="Active"){var ExistData=VFSPSGetDataFromValidationBC();e.data.ctx.SetData("ExistData",ExistData);if(ImgChild.hasClass("VFSPSSelCusChoosePlanTitle")){img="images/VFSPSSelCusChoosePlan_White.png";if(VFTabletIntegrationConstants.GetConstants("VFSPSPlSumTaskPath")=="EditExistingPlan"){setTimeout(function(){VFSPSPopulateChoosePlan(ExistData)},500)}}else{if(ImgChild.hasClass("VFSPSSelCusChooseDeviceTitle")){img="images/VFSPSSelCusSelectDevice_White.png";if(VFTabletIntegrationConstants.GetConstants("VFSPSPlSumTaskPath")=="EditExistingPlan"){setTimeout(function(){VFSPSPopulateDeviceDetails(ExistData)},500)}}else{if(ImgChild.hasClass("VFSPSSelCusChooseSimTitle")){img="images/VFSPSSelCusSelectSim_White.png";if(VFTabletIntegrationConstants.GetConstants("VFSPSPlSumTaskPath")=="EditExistingPlan"){setTimeout(function(){VFSPSPopulateSIMDetails(ExistData)},500)}}else{if(ImgChild.hasClass("VFSPSSelCusChooseMobileTitle")){img="images/VFSPSSelCusChooseMobileNumpng_White.png";if(VFTabletIntegrationConstants.GetConstants("VFSPSPlSumTaskPath")=="EditExistingPlan"){setTimeout(function(){VFSPSPopulateMobileNumber(ExistData)},500)}}}}}}else{if(ImgChild.hasClass("VFSPSSelCusChoosePlanTitle")){img="images/VFSPSSelCusChoosePlan.png"}else{if(ImgChild.hasClass("VFSPSSelCusChooseDeviceTitle")){img="images/VFSPSSelCusSelectDevice.png"}else{if(ImgChild.hasClass("VFSPSSelCusChooseSimTitle")){img="images/VFSPSSelCusSelectSim.png"}else{if(ImgChild.hasClass("VFSPSSelCusChooseMobileTitle")){img="images/VFSPSSelCusChooseMobileNumpng.png"}}}}}ImgChild.children().children().children().attr("src",img)}function VFSPSRadioButtonSelect(e){var typeClass=e.data.typeClass;$("."+typeClass).prop("checked",false);$(this).prop("checked",true);switch(typeClass){case ("VFSPSSelCusChooseServiceRadio"):VFSPSSelCusChooseServiceRadio(e);VFSPSCheckEnableSavePlanButton();break;case ("VFSPSSelCusChoosePlanRadio"):VFSPSSelCusChoosePlanRadio(e);VFSPSCheckEnableSavePlanButton();break;case ("VFSPSSelCusChooseDurationRadio"):VFSPSSelCusChooseDurationRadio(e);VFSPSCheckEnableSavePlanButton();break;case ("VFSPSSelCusChooseMobileRadio"):VFSPSSelCusChooseMobileRadio(e);break;case ("VFSPSSelCusOldMobilePlanTypeRadio"):VFSPSSelCusOldMobilePlanTypeRadio(e);break;case ("VFSPSSelCusChooseDeviceRadio"):VFSPSSelCusChooseDeviceRadio(e);break;case ("VFSPSSelCusSIMODeviceRadio"):VFSPSSelCusSIMODeviceRadio(e);VFSPSCheckEnableSavePlanButton();break;default:}}function VFSPSGetCustomerType(){var BS="VF SPS TBUI Utilities";var Method="GetCustomerType";var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("OrderId",VFSPSGetOrderId());var outs=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});var CustomerType=outs.GetProperty("CustomerType");var SoleTrader=outs.GetProperty("CustomerSOHOType");var retVal="Business";if(SoleTrader=="N"&&CustomerType=="Person"){retVal="Consumer"}return retVal}function VFSPSQueryPlanList(e){var that=e.data.ctx;var ChoosePlanData=VFSPSGetChooseYourPlanData();if(ChoosePlanData.F_ChooseServiceType&&ChoosePlanData.F_ChoosePlanType&&ChoosePlanData.F_ChoosePlanDuration){console.log("Service Type : "+ChoosePlanData.ChooseServiceType+" ## Plan Type : "+ChoosePlanData.ChoosePlanType+" ## Plan Duration : "+ChoosePlanData.ChoosePlanDuration);var BSName="VF SPS TBUI Utilities";var Method="GetPlanList";var Inputs=SiebelApp.S_App.NewPropertySet();Inputs.SetProperty("PlanType",ChoosePlanData.ChoosePlanType);Inputs.SetProperty("ServiceType",ChoosePlanData.ChooseServiceType);Inputs.SetProperty("SharingFlag",ChoosePlanData.Sharing);if(ChoosePlanData.ChoosePlanType=="Plan and Device"){Inputs.SetProperty("Duration",ChoosePlanData.ChoosePlanDuration+" Months")}else{Inputs.SetProperty("Duration",ChoosePlanData.ChoosePlanDuration)}Inputs.SetProperty("CustomerType",VFSPSGetCustomerType());VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){var outs=VFCustomSiebelInterface.CallBS(BSName,Method,Inputs,{});var NumCount=outs.GetChildCount();if(NumCount){var planList={};var LOVList=new Array();for(var i=0;i<NumCount;i++){var Plan={};var CurrChild=outs.GetChild(i);Plan.PlanId=CurrChild.GetProperty("PlanId");Plan.PlanName=CurrChild.GetProperty("PlanName");Plan.PropositionName=CurrChild.GetProperty("PropositionName");Plan.PropositionId=CurrChild.GetProperty("PropositionId");planList[Plan.PlanName]=Plan;LOVList[LOVList.length]=CurrChild.GetProperty("PlanName")}that.SetData("gPlanList",planList);var selector=".VFSPSSleCusChoosePlanValue";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues(selector,"",LOVList,"","","HTML","EnableSaveButton");VFSPSUdateUIFrameWork.VFSPSUnblockUI()}else{$(".VFSPSSleCusMobileNumSearchResultDivPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock")}VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}}function VFSPSGetChooseYourPlanData(){var F_ChooseServiceType=false;var F_ChoosePlanType=false;var F_ChoosePlanDuration=false;var F_ChoosePlan=false;var F_ChooseSIMODevice=false;var ChooseServiceType="";var ChoosePlanType="";var ChoosePlanDuration="";var ChoosePlan="";var ChooseSIMODevice="";var Sharing="";$(".VFSPSSelCusChooseServiceRadio").each(function(index){if($(this).is(":checked")){F_ChooseServiceType=true;ChooseServiceType=$(this).val()}});if(ChooseServiceType=="Mobile Broadband"){ChooseServiceType="Data"}$(".VFSPSSelCusChoosePlanRadio").each(function(index){if($(this).is(":checked")){F_ChoosePlanType=true;ChoosePlanType=$(this).val()}});if(ChoosePlanType=="Plan and Device"){$(".VFSPSSelCusChooseDurationRadio").each(function(index){if($(this).is(":checked")){F_ChoosePlanDuration=true;ChoosePlanDuration=$(this).val();if(ChoosePlanDuration=="12 Months"){ChoosePlanDuration="12"}else{if(ChoosePlanDuration=="24 Months"){ChoosePlanDuration="24"}}}})}else{if(ChoosePlanType=="SIM only"){ChoosePlanType="SIM Only";ChoosePlanDuration=$(".VFSPSSleCusChoosePlanDurValue").val();F_ChoosePlanDuration=ChoosePlanDuration==""?false:true;$(".VFSPSSelCusSIMODeviceRadio").each(function(index){if($(this).is(":checked")){F_ChooseSIMODevice=true;ChooseSIMODevice=$(this).val()}})}}ChoosePlan=$(".VFSPSSleCusChoosePlanValue").val();if(ChoosePlan!=""){F_ChoosePlan=true}if($(".VFSPSSleCusSharingFlag").is(":checked")){Sharing="Yes"}else{Sharing="No"}return{"F_ChooseServiceType":F_ChooseServiceType,"F_ChoosePlanType":F_ChoosePlanType,"F_ChoosePlanDuration":F_ChoosePlanDuration,"F_ChoosePlan":F_ChoosePlan,"F_ChooseSIMODevice":F_ChooseSIMODevice,"ChooseServiceType":ChooseServiceType,"ChoosePlanType":ChoosePlanType,"ChoosePlanDuration":ChoosePlanDuration,"ChoosePlan":ChoosePlan,"ChooseSIMODevice":ChooseSIMODevice,"Sharing":Sharing,"PromoCode":""}}function VFSPSCheckEnableSavePlanButton(){var ChoosePlanData=VFSPSGetChooseYourPlanData();if(ChoosePlanData.F_ChooseServiceType&&ChoosePlanData.F_ChoosePlanType&&ChoosePlanData.F_ChoosePlanDuration&&ChoosePlanData.F_ChoosePlan){if(ChoosePlanData.ChoosePlanType=="Plan and Device"||(ChoosePlanData.ChoosePlanType=="SIM Only"&&ChoosePlanData.F_ChooseSIMODevice)){$(".VFSPSSleCusSavePlanClick").addClass("VFSPSSleCusSavePlanButtonActive").removeClass("VFSPSSleCusSavePlanButtonInactive")}else{$(".VFSPSSleCusSavePlanClick").addClass("VFSPSSleCusSavePlanButtonInactive").removeClass("VFSPSSleCusSavePlanButtonActive")}}else{$(".VFSPSSleCusSavePlanClick").addClass("VFSPSSleCusSavePlanButtonInactive").removeClass("VFSPSSleCusSavePlanButtonActive")}}function VFSPSSelCusChooseServiceRadio(e){VFSPSShowPlanAndPlanDuration()}function VFSPSSelCusChoosePlanRadio(e){VFSPSShowPlanAndPlanDuration()}function VFSPSSelCusChooseDurationRadio(e){$(".VFSPSSleCusChoosePlanValue").val("")}function VFSPSSelCusSIMODeviceRadio(e){}function VFSPSShowPlanAndPlanDuration(){var ChooseServiceType=false;var ChoosePlanType=false;var PlanType="";$(".VFSPSSelCusChooseServiceRadio").each(function(index){if($(this).is(":checked")){ChooseServiceType=true}});$(".VFSPSSelCusChoosePlanRadio").each(function(index){if($(this).is(":checked")){ChoosePlanType=true;PlanType=$(this).val()}});if(ChooseServiceType&&ChoosePlanType&&PlanType!=""){$(".VFSPSSleCusSavePlanDiv").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusPlanPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusPlanDurationPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusSharingFlagParDiv").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusChoosePromoCodeDiv").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusChoosePlanValue").val("");switch(PlanType){case ("Plan and Device"):$(".VFSPSSleCusChoosePlanDurFldInp").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusChoosePlanDurFldRadio").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusChoosePlanDurValue").val("");$(".VFSPSSleCusSIMODevice").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");break;case ("SIM only"):$(".VFSPSSleCusChoosePlanDurFldInp").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusChoosePlanDurFldRadio").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSelCusChooseDurationRadio").prop("checked",false);$(".VFSPSSleCusSIMODevice").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");break;default:}}}function VFSPSSelCusChooseMobileRadio(e){var OLI_Id=VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId");var PickNewMob=false;var PickType="";var ExistData=VFSPSGetDataFromValidationBC();e.data.ctx.SetData("ExistData",ExistData);$(".VFSPSSelCusChooseMobileRadio").each(function(index){if($(this).is(":checked")){PickNewMob=true;PickType=$(this).val();switch(PickType){case ("I want to get a new number"):PickType="New";break;case ("I want to keep my current number"):PickType="Old";break;default:}}});if(PickNewMob&&PickType=="New"){$(".VFSPSSleCusPickNewMobileNumberParDiv").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusPickOldMobileNumberParDiv").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");if(ExistData["ProtIn"]=="No"){}else{var app=SiebelApp.S_App.GetActiveView().GetApplet("VF Order Entry - Line Item List Applet TBUI");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(OLI_Id);if(app.CanInvokeMethod("DeallocateNewMSISDN")){app.InvokeMethod("DeallocateNewMSISDN")}else{console.log("Deallocate MSISDN cannot be called.")}SetFocusToControl("VF Port In TBUI");SetFieldValueOrderEntryLineItem("VF Port In TBUI","No");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId"));$(".VFSPSSelAddSimNumber").removeClass("VFSPSDisplayNone");$(".VFSPSSelPickMobileNumber").removeClass("VFSPSDisplayNone");VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000);VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}}else{$(".VFSPSSleCusPickNewMobileNumberParDiv").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusPickOldMobileNumberParDiv").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");if(ExistData["ProtIn"]!="No"){var app=SiebelApp.S_App.GetActiveView().GetApplet("VF Order Entry - Line Item List Applet TBUI");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(OLI_Id);if(app.CanInvokeMethod("DeallocateNewMSISDN")){app.InvokeMethod("DeallocateNewMSISDN")}else{console.log("Deallocate MSISDN cannot be called.")}VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}}}function VFSPSSelCusOldMobilePlanTypeRadio(e){var PickOldMob=false;var PickType="";$(".VFSPSSelCusOldMobilePlanTypeRadio").each(function(index){if($(this).is(":checked")){PickOldMob=true;PickType=$(this).val();switch(PickType){case ("Postpaid number"):PickType="PostPaid";break;case ("Prepaid number"):PickType="PrePaid";break;default:}}});if(PickOldMob&&PickType=="PostPaid"){$(".VFSPSSleCusPickOldMobileNumAcctNumPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusPickOldMobileNumDOBPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");SetFocusToControl("VF Port In TBUI");SetFieldValueOrderEntryLineItem("VF Port In TBUI","Yes - Postpay");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId"));$(".VFSPSSelAddSimNumber").removeClass("VFSPSDisplayNone");$(".VFSPSSelPickMobileNumber").removeClass("VFSPSDisplayNone");VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}else{$(".VFSPSSleCusPickOldMobileNumAcctNumPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusPickOldMobileNumDOBPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");SetFocusToControl("VF Port In TBUI");SetFieldValueOrderEntryLineItem("VF Port In TBUI","Yes - Prepay");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId"));$(".VFSPSSelAddSimNumber").removeClass("VFSPSDisplayNone");$(".VFSPSSelPickMobileNumber").removeClass("VFSPSDisplayNone");var ExistData=VFSPSGetDataFromValidationBC();if(ExistData["ProtInDOB"]==""){$(".VFSPSSleCusPickOldMobileNumDOBValue").val(VFTabletNavigation.VFSPSGetVHADateFormat(ExistData["CustomerDOB"]))}else{$(".VFSPSSleCusPickOldMobileNumDOBValue").val(VFTabletNavigation.VFSPSGetVHADateFormat(ExistData["ProtInDOB"]))}VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}}function VFSPSSelCusChooseDeviceRadio(e){var PickDevice=false;var PickType="";$(".VFSPSSelCusChooseDeviceRadio").each(function(index){if($(this).is(":checked")){PickDevice=true;PickType=$(this).val();switch(PickType){case ("Yes"):PickType="Yes";break;case ("No, the device needs to be shipped to the customer"):PickType="No";break;default:}}});if(PickDevice&&PickType=="Yes"){$(".VFSPSSleCusChooseDeviceInStockPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusChooseDeviceOutofStockPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");SetFocusToControl("VF Stock Indicator TBUI");SetFieldValueOrderEntryLineItem("VF Stock Indicator TBUI","In Stock");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId"));$(".VFSPSSelAddSimNumber").removeClass("VFSPSDisplayNone");VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}else{$(".VFSPSSleCusChooseDeviceInStockPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusChooseDeviceOutofStockPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");SetFieldValueOrderEntryLineItem("VF Stock Indicator TBUI","Out of Stock - Connect Later");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId"));$(".VFSPSSelAddSimNumber").addClass("VFSPSDisplayNone");VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}}function VFSPSChoosePlanDuration(e){var LOVList=VFCustomSiebelInterface.GetPickListValues("VF_SPS_DURATION","");var selector=".VFSPSSleCusChoosePlanDurValue";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues(selector,"",LOVList,"","","HTML","EnableSaveButton")}function VFSPSChoosePlanFromList(e){var LOVList=VFSPSQueryPlanList(e)}function VFSPSAllocateMobileNumber(e){var ExistData=VFSPSGetDataFromValidationBC();e.data.ctx.SetData("ExistData",ExistData);var OLI_Id=VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId");var MobPickVal=$(this).children().html();$(".VFSPSSleCusPickMobileValue").val(MobPickVal).attr("disabled","true");$(".VFSPSSleCusPickMobileImg").attr("action","Deallocate");$(".VFSPSSleCusPickMobileImg").children("img").attr("src","images/VFSPSCrossMark.png");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){var ExistData=VFSPSGetDataFromValidationBC();var BSName="VF Allocate MSISDN TBUI";var Method="SPSAllocationMSIDNTBUI";var Inputs=SiebelApp.S_App.NewPropertySet();Inputs.SetProperty("OrderId",VFSPSGetOrderId());Inputs.SetProperty("RootLineItemId",OLI_Id);Inputs.SetProperty("MSISDN",$(".VFSPSSleCusPickMobileValue").val());Inputs.SetProperty("ServiceProvider","Vodafone Au");Inputs.SetProperty("ARII","Australia");Inputs.SetProperty("OrderSubType","Connect");Inputs.SetProperty("ReservationId",ExistData["CustomerId"]);Inputs.SetProperty("Product Group","General");var outs=VFCustomSiebelInterface.CallBS(BSName,Method,Inputs,{});var AllocMSISDN=outs.GetProperty("MSISDN");if(AllocMSISDN==MobPickVal){var BSName="VF SPS TBUI Utilities";var Method="AddMSISDNTpTaskValdn";var Inputs=SiebelApp.S_App.NewPropertySet();Inputs.SetProperty("OrderLineItemId",OLI_Id);Inputs.SetProperty("MSISDN",AllocMSISDN);var outs=VFCustomSiebelInterface.CallBS(BSName,Method,Inputs,{})}$(".VFSPSSleCusMobileNumSearchResultDivPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");SetOrderLineItemContext(OLI_Id);VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}function VFSPSSearchMobileNumber(e){var OLI_Id=VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId");if($(this).attr("action")=="Search"){var BSName="VF SPS TBUI Utilities";var Method="GetMSISDN";var Inputs=SiebelApp.S_App.NewPropertySet();var SearchMSISDN=$(".VFSPSSleCusPickMobileValue").val();if(SearchMSISDN.length){if(SearchMSISDN.length>2&&SearchMSISDN.length<6){SearchMSISDN="*"+SearchMSISDN+"*"}}Inputs.SetProperty("MSISDN",SearchMSISDN);VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){try{var outs=VFCustomSiebelInterface.CallBS(BSName,Method,Inputs,{});var NumCount=outs.GetChildCount();if(NumCount){for(var i=0;i<NumCount&&i<4;i++){var CurrChild=outs.GetChild(i);var MSISDN=CurrChild.GetProperty("MSISDN");$("#VFSPSSleCusMobileNum"+Number(i+1)+" span").html(MSISDN)}$(".VFSPSSleCusMobileNumSearchResultDivPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock")}else{$(".VFSPSSleCusMobileNumSearchResultDivPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock")}VFSPSUdateUIFrameWork.VFSPSUnblockUI()}catch(e){console.log(e.message)}finally{}},1000)}else{$(this).attr("action","Search");$(this).children("img").attr("src","images/VFSPSSearchICON.png");$(".VFSPSSleCusPickMobileValue").val("").removeAttr("disabled");var app=SiebelApp.S_App.GetActiveView().GetApplet("VF Order Entry - Line Item List Applet TBUI");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(OLI_Id);if(app.CanInvokeMethod("DeallocateNewMSISDN")){app.InvokeMethod("DeallocateNewMSISDN");var BSName="VF SPS TBUI Utilities";var Method="AddMSISDNTpTaskValdn";var Inputs=SiebelApp.S_App.NewPropertySet();Inputs.SetProperty("OrderLineItemId",OLI_Id);Inputs.SetProperty("MSISDN","");var outs=VFCustomSiebelInterface.CallBS(BSName,Method,Inputs,{})}else{console.log("Deallocate MSISDN cannot be called.")}VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}}function SetOrderLineItemContext(OrderLineItemId){if(OrderLineItemId!=""){var app=SiebelApp.S_App.GetActiveView().GetApplet("VF Order Entry - Line Item List Applet TBUI");if(app.CanInvokeMethod("NewQuery")){}else{var BS="VF SPS TBUI Utilities";var Method="RefreshOrderHeader";var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("OrderId",VFSPSGetOrderId());var outs=VFCustomSiebelInterface.CallBS(BS,Method,inps,{})}app.InvokeMethod("NewQuery");app.InvokeMethod("ExecuteQuery");var BC=app.GetBusComp();var TotalRecords=app.GetNumRows();var RecordsPerPage=app.GetRowListRowCount();for(i=0;i<TotalRecords;i++){if(BC.GetIdValue()==OrderLineItemId){break}BC.InvokeMethod("NextRecord")}}else{console.log("Order Line Item Context not set")}}function SetFieldValueOrderEntryLineItem(FieldName,Value){var app=SiebelApp.S_App.GetActiveView().GetApplet("VF Order Entry - Line Item List Applet TBUI");var BC=app.GetBusComp();BC.SetFieldValue(FieldName,Value)}function SetFocusToControl(ControlName){var app=SiebelApp.S_App.GetActiveView().GetApplet("VF Order Entry - Line Item List Applet TBUI");var controls=app.GetControls();app.SetFocusToCtrl(controls[ControlName].GetName(),true)}function SetChooseAServiceReadonlyFields(ChoosePlanData){$(".VFSPSSelCusChooseServiceRadioText span").html(ChoosePlanData.ChooseServiceType);$(".VFSPSSelCusChoosePlanRadioText span").html(ChoosePlanData.ChoosePlanType);$(".VFSPSSelCusChooseDurationRadioText span").html(ChoosePlanData.ChoosePlanDuration);$(".VFSPSSleCusChoosePlanValueText span").html(ChoosePlanData.ChoosePlan);$(".VFSPSSelCusChooseSIMODeviceText span").html(ChoosePlanData.ChooseSIMODevice);if(ChoosePlanData.ChooseSIMODevice=="Yes"){$(".VFSPSSelCusChoosePlanRadioText span").html("SIM Only");$(".VFSPSSleCusSIMODevice").addClass("VFSPSDisplayBlock").removeClass("VFSPSDisplayNone");$(".VFSPSSleCusChooseSIMODeviceTitleReadOnly").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSelCusChooseSIMODeviceText").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock")}else{$(".VFSPSSleCusSIMODevice").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone");$(".VFSPSSleCusChooseSIMODeviceTitleReadOnly").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSelCusChooseSIMODeviceText").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock")}if(ChoosePlanData.Sharing=="No"){$(".VFSPSSleCusSharingFlagParDiv").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSelCusSharingText").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock")}else{$(".VFSPSSleCusSharingFlagParDiv").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSelCusSharingText").addClass("VFSPSDisplayBlock").removeClass("VFSPSDisplayNone")}if(ChoosePlanData.PromoCode==""){$(".VFSPSSleCusPickPromoCodeImg").attr("action","Search");$(".VFSPSSleCusPickPromoCodeImg").children("img").attr("src","images/VFSPSSearchICON.png");$(".VFSPSSleCusChoosePromoCodeValue").val("");$(".VFSPSSleCusChoosePromoCodeValue").removeAttr("disabled")}else{$(".VFSPSSleCusPickPromoCodeImg").attr("action","Deallocate");$(".VFSPSSleCusPickPromoCodeImg").children("img").attr("src","images/VFSPSCrossMark.png");$(".VFSPSSleCusChoosePromoCodeValue").val(ChoosePlanData.PromoCode);$(".VFSPSSleCusChoosePromoCodeValue").attr("disabled","true")}}function VFSPSGetOrderMetaData(){var BS="VF SPS TBUI Utilities";var Method="GetOrderDetails";var inps=SiebelApp.S_App.NewPropertySet();var OrderId=VFSPSGetOrderId();inps.SetProperty("OrderId",OrderId);var outs=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});var data={};if(outs.GetProperty("RecordFound")=="Yes"){data.OrderAcctId=outs.GetProperty("OrderAcctId");data.BillingAcctId=outs.GetProperty("BillingAcctId");data.OrderId=OrderId}return data}function VFSPSCreatePlanProposition(e){var ChoosePlanData=VFSPSGetChooseYourPlanData();var PlanDetails=e.data.ctx.GetData("gPlanList");PlanDetail=PlanDetails[ChoosePlanData.ChoosePlan];var WF="VF SPS Save Plan Workflow";var inps=SiebelApp.S_App.NewPropertySet();var Order_Data=VFSPSGetOrderMetaData();inps.SetProperty("BillingAccountId",Order_Data.BillingAcctId);inps.SetProperty("CustomerAccountId",Order_Data.OrderAcctId);inps.SetProperty("OrderId",Order_Data.OrderId);inps.SetProperty("ProductId",PlanDetail.PropositionId);inps.SetProperty("ProductName",PlanDetail.PropositionName);inps.SetProperty("Object Id",VFSPSGetOrderId());inps.SetProperty("Plan Id",PlanDetail.PlanId);inps.SetProperty("Proposition Id",PlanDetail.PropositionId);inps.SetProperty("Plan Name",PlanDetail.PlanName);if(ChoosePlanData.ChoosePlanType=="SIM Only"&&ChoosePlanData.ChooseSIMODevice=="Yes"){inps.SetProperty("Connection Type","Plan and Device");inps.SetProperty("SIMODevice","Yes")}else{inps.SetProperty("Connection Type",ChoosePlanData.ChoosePlanType);inps.SetProperty("SIMODevice","No")}inps.SetProperty("SercviceType",ChoosePlanData.ChooseServiceType);inps.SetProperty("PlanDuration",ChoosePlanData.ChoosePlanDuration);inps.SetProperty("SharingFlag",ChoosePlanData.Sharing);VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){try{var outs=VFCustomSiebelInterface.CallWorkflow(WF,inps,{});$(".VFSPSSleCusCustomizeBtn").addClass("VFSPSSleCusScanButtonActive").removeClass("VFSPSSleCusScanButtonInActive");VFSPSUdateUIFrameWork.VFSPSUnblockUI();var RoodOrderLineItemId=outs.GetProperty("Root Order Item Id");var ErrCode=outs.GetProperty("Error Code");var ErrMess=outs.GetProperty("Error Message");if(ErrCode!=""&&ErrMess!=""){alert(ErrMess)}else{if(RoodOrderLineItemId!=""){var inp=SiebelApp.S_App.NewPropertySet();inp.SetProperty("Profile Attribute Name","VFSPSPlSumCurrentOrderItemId");inp.SetProperty("Profile Attribute Value",RoodOrderLineItemId);var outs=VFCustomSiebelInterface.CallBS("SIS OM PMT Service","Set Profile Attribute",inp,{});VFTabletIntegrationConstants.SetConstants("CurrentOrderLineItemId",RoodOrderLineItemId);SetOrderLineItemContext(RoodOrderLineItemId)}}$(".VFSPSSleCusNewPlan").addClass("VFSPSSleCusOpenPlan").removeClass("VFSPSSleCusNewPlan");SetChooseAServiceReadonlyFields(ChoosePlanData);if($("#VFSPSSleCusPlanWithDeviceRadio").is(":checked")||($("#VFSPSSleCusPlanWithSIMOnlyRadio").is(":checked")&&$("#VFSPSSleCusSIMODeviceYesRadio").is(":checked"))){$(".VFSPSSelChooseDevice").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock")}else{$(".VFSPSSelChooseDevice").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock")}$(".VFSPSSelCusChoosePlanBody").addClass("VFSPSSelCusChoosePlanBodyReadOnly").removeClass("VFSPSSelCusChoosePlanBodyEditable");$(".VFSPSSleCusChoosePlanDurFldRadio").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusChoosePlanDurFldInp").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock")}catch(e){console.log(e.message);$(".VFSPSSelCusChoosePlanBody").removeClass("VFSPSSelCusChoosePlanBodyReadOnly").addClass("VFSPSSelCusChoosePlanBodyEditable")}finally{}},1000)}function VFSPSResetPlanDetails(e){var OrderId=VFSPSGetOrderId();var OLIId=VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId");if(OrderId!=""&&OLIId!=""){$(".VFSPSSelCusChoosePlanBody").addClass("VFSPSSelCusChoosePlanBodyEditable").removeClass("VFSPSSelCusChoosePlanBodyReadOnly");var WF="VF SPS Delete Root Line Item Workflow";var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("Object Id",OrderId);inps.SetProperty("RootLineItemId",OLIId);VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){try{var outs=VFCustomSiebelInterface.CallWorkflow(WF,inps,{});VFTabletIntegrationConstants.SetConstants("CurrentOrderLineItemId","");$(".VFSPSSleCusPlanDurationPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusSavePlanDiv").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusPlanPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusSIMODevice").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSelCusChooseServiceRadio").each(function(index){if($(this).is(":checked")){$(this).prop("checked",false)}});$(".VFSPSSelCusChoosePlanRadio").each(function(index){if($(this).is(":checked")){$(this).prop("checked",false)}})}catch(e){}finally{VFSPSUdateUIFrameWork.VFSPSUnblockUI()}},1000)}else{console.log("Could not delete !! Order Id or Root Line Item is null")}}function VFSPSSetPromoCodeOnLineItem(PromoCode,OLI_Id){try{var BS="VF SPS TBUI Utilities";var Method="SetPromoCodeToOLI";var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("OrderLineItemId",OLI_Id);inps.SetProperty("PromoCode",PromoCode);var out=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});return out}catch(e){}finally{}}function VFSPSSleCusPickPromoCode(e){var PromoCode=$(".VFSPSSleCusChoosePromoCodeValue").val();var OLI_Id=VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId");if(OLI_Id==false){alert("Please save the plan before adding the promo code.");return}if($(this).attr("action")=="Search"){if(PromoCode.length){VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){try{var out=VFSPSSetPromoCodeOnLineItem(PromoCode,OLI_Id);var BS="VF Postpay Utilities TBUI";var Method="ValidatePromoCode";var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("OrderId",VFSPSGetOrderId());inps.SetProperty("OrderLineItemId",OLI_Id);var out=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});var ErrMsg=out.GetProperty("SPSErrMsg");if(ErrMsg==""){$(".VFSPSSleCusPickPromoCodeImg").attr("action","Deallocate");$(".VFSPSSleCusPickPromoCodeImg").children("img").attr("src","images/VFSPSCrossMark.png");$(".VFSPSSleCusChoosePromoCodeValue").attr("disabled","true");var ExistData=VFSPSGetDataFromValidationBC();e.data.ctx.SetData("ExistData",ExistData)}else{var out=VFSPSSetPromoCodeOnLineItem("",OLI_Id);alert(ErrMsg)}}catch(e){console.log(e.message)}finally{VFSPSUdateUIFrameWork.VFSPSUnblockUI()}},1000)}else{alert("Please Enter a valid Promo code")}}else{$(".VFSPSSleCusPickPromoCodeImg").attr("action","Search");$(".VFSPSSleCusPickPromoCodeImg").children("img").attr("src","images/VFSPSSearchICON.png");$(".VFSPSSleCusChoosePromoCodeValue").val("").removeAttr("disabled");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){try{var out=VFSPSSetPromoCodeOnLineItem("",OLI_Id);var ExistData=VFSPSGetDataFromValidationBC();e.data.ctx.SetData("ExistData",ExistData)}catch(e){console.log(e.message)}finally{VFSPSUdateUIFrameWork.VFSPSUnblockUI()}},1000)}}function VFSPSAllocateIMEI(e){var IMEINumber=$(".VFSPSSleCusChooseDeviceInStockValue").val();var OLI_Id=VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId");if(IMEINumber&&IMEINumber.length==15){if($(this).attr("action")=="Search"){$(this).attr("action","Deallocate");$(this).children("img").attr("src","images/VFSPSCrossMark.png");$(".VFSPSSleCusChooseDeviceInStockValue").attr("disabled","true");SetFocusToControl("VF IMEI TBUI");SetFieldValueOrderEntryLineItem("VF IMEI TBUI",IMEINumber);VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(OLI_Id);var ExistData=VFSPSGetDataFromValidationBC();e.data.ctx.SetData("ExistData",ExistData);$(".VFSPSSleCusChooseInStockBrandValue").val(ExistData["InStockBrand"]);$(".VFSPSSleCusChooseInStockModelValue").val(ExistData["Device"]);$(".VFSPSSleCusChooseDeviceInStockBrandModelPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}else{$(this).attr("action","Search");$(this).children("img").attr("src","images/VFSPSSearchICON.png");var inp=SiebelApp.S_App.NewPropertySet();inp.SetProperty("Profile Attribute Name","TBUIDEALLOCATEIMEI");inp.SetProperty("Profile Attribute Value","Y");var outs=VFCustomSiebelInterface.CallBS("SIS OM PMT Service","Set Profile Attribute",inp,{});var psInputs,psOutputs,bsInvokeWorkflow;psInputs=SiebelApp.S_App.NewPropertySet();psOutputs=SiebelApp.S_App.NewPropertySet();psInputs.SetProperty("ProcessName","VF OM DeAllocate IMEI TBUI");psInputs.SetProperty("Object Id",VFSPSGetOrderId());psInputs.SetProperty("Order Line Item Id",OLI_Id);psInputs.SetProperty("RootOrderItemId",OLI_Id);VFCustomSiebelInterface.CallWorkflow("VF OM DeAllocate IMEI TBUI",psInputs,{});$(".VFSPSSleCusChooseDeviceInStockValue").val("").removeAttr("disabled");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(OLI_Id);$(".VFSPSSleCusChooseDeviceInStockBrandModelPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");var ExistData=VFSPSGetDataFromValidationBC();e.data.ctx.SetData("ExistData",ExistData);$(".VFSPSSleCusChooseInStockBrandValue").val("");$(".VFSPSSleCusChooseInStockModelValue").val("");VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}}else{alert("Please Enter a valid IMEI Number of 15 digits")}}function VFSPSAllocateSIM(e){var SIMNumber=$(".VFSPSSleCusChooseSIMValue").val();var OLI_Id=VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId");if(SIMNumber&&SIMNumber.length==20){if($(this).attr("action")=="Search"){$(this).attr("action","Deallocate");$(this).children("img").attr("src","images/VFSPSCrossMark.png");$(".VFSPSSleCusChooseSIMValue").attr("disabled","true");SetFieldValueOrderEntryLineItem("VF SIM TBUI",SIMNumber);VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(OLI_Id);VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}else{$(this).attr("action","Search");$(this).children("img").attr("src","images/VFSPSSearchICON.png");var app=SiebelApp.S_App.GetActiveView().GetApplet("VF Order Entry - Line Item List Applet TBUI");$(".VFSPSSleCusChooseSIMValue").val("").removeAttr("disabled");VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(OLI_Id);if(app.CanInvokeMethod("DeallocateSIM")){app.InvokeMethod("DeallocateSIM")}else{console.log("Deallocate SIM cannot be called.")}VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}}else{alert("Please enter a valid 20 digits SIM number.")}}function VFSPSScanIMEI(e){var requestData={"Key":"IMEI"};if(typeof(VHAWrapper)=="undefined"){var retVal=VHAWrapperSTUB?VHAWrapperSTUB.scanBarcode(JSON.stringify(requestData),"VFTabletIntegration.Success","VFTabletIntegration.Failure"):0;retVal="1"}else{var retVal=VHAWrapper?VHAWrapper.scanBarcode(JSON.stringify(requestData),"VFTabletIntegration.Success","VFTabletIntegration.Failure"):0}if(retVal){}else{alert("Could not start Bar code scanner, please proceed with manual entry.")}}function VFSPSScanSIM(e){var requestData={"Key":"ScanSIM"};if(typeof(VHAWrapper)=="undefined"){var retVal=VHAWrapperSTUB?VHAWrapperSTUB.scanBarcode(JSON.stringify(requestData),"VFTabletIntegration.Success","VFTabletIntegration.Failure"):0;retVal="1"}else{var retVal=VHAWrapper?VHAWrapper.scanBarcode(JSON.stringify(requestData),"VFTabletIntegration.Success","VFTabletIntegration.Failure"):0}if(retVal){}else{alert("Could not start Bar code scanner, please proceed with manual entry.")}}function VFSPSGetOrderId(){var BO=SiebelApp.S_App.GetActiveBusObj();var OrderBC=BO.GetBusCompByName("Order Entry - Orders");return OrderBC.GetIdValue()}function VFSPSInvokeCustomize(e){if($(this).hasClass("VFSPSSleCusScanButtonActive")){var OLIId=VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId");var inp=SiebelApp.S_App.NewPropertySet();inp.SetProperty("Profile Attribute Name","VFSPSPlSumTaskPath");inp.SetProperty("Profile Attribute Value","EditExistingPlan");var outs=VFCustomSiebelInterface.CallBS("SIS OM PMT Service","Set Profile Attribute",inp,{});inp.SetProperty("Profile Attribute Name","VFSPSPlSumCurrentOrderItemId");inp.SetProperty("Profile Attribute Value",OLIId);outs=VFCustomSiebelInterface.CallBS("SIS OM PMT Service","Set Profile Attribute",inp,{});var app=SiebelApp.S_App.GetActiveView().GetApplet("VF Order Entry - Line Item List Applet TBUI");app.InvokeMethod("ReconfigureCxProd")}}function VFSPSInvokePortIn(e){var PickOldMob=false;var PickType="";$(".VFSPSSelCusOldMobilePlanTypeRadio").each(function(index){if($(this).is(":checked")){PickOldMob=true;PickType=$(this).val();switch(PickType){case ("Postpaid number"):PickType="PostPaid";break;case ("Prepaid number"):PickType="PrePaid";break;default:}}});if(PickOldMob&&PickType=="PostPaid"){var AcctNum=$(".VFSPSSleCusPickOldMobileAcctNumValue").val();var OldNum=$(".VFSPSSleCusPickOldMobileValue").val();var errMsg="Please enter";if(OldNum==""){errMsg=errMsg+" current mobile number"}if(AcctNum==""){if(errMsg!="Please enter"){errMsg=errMsg+" previous service account number"}else{errMsg=errMsg+" and previous service account number"}}if(errMsg!="Please enter"){alert(errMsg)}SetFocusToControl("VF PortIn - MSISDN");SetFieldValueOrderEntryLineItem("VF Port In - Service Account TBUI",AcctNum);SetFocusToControl("VF PortIn - Service Account");SetFieldValueOrderEntryLineItem("VF Port In - Service Number TBUI",OldNum);VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId"));VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}else{var DOB=$(".VFSPSSleCusPickOldMobileNumDOBValue").val();var OldNum=$(".VFSPSSleCusPickOldMobileValue").val();var errMsg="Please enter";if(OldNum==""){errMsg=errMsg+" current mobile number"}if(DOB==""){if(errMsg!="Please enter"){errMsg=errMsg+" date of birth"}else{errMsg=errMsg+" and date of birth"}}if(errMsg!="Please enter"){alert(errMsg)}SetFocusToControl("VF PortIn - Service Account");SetFieldValueOrderEntryLineItem("VF Port In - Service Number TBUI",OldNum);SetFocusToControl("VF Port In - DOB TBUI");SetFieldValueOrderEntryLineItem("VF Port In - DOB TBUI",DOB);VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){SetOrderLineItemContext(VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId"));VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}}function VFSPSChooseBrand(e){var Brand=e.data.ctx.GetData("UniqueBrand");var selector=".VFSPSSleCusChooseDeviceBrandValue";if(Brand.length==0){var Device=GetUniqueBrandModel();var LOVList=Device.Brand;e.data.ctx.SetData("UniqueBrand",LOVList);e.data.ctx.SetData("BrandModel",Device.Model);VFSPSUdateUIFrameWork.VFSPSShowPicklistValues(selector,"",LOVList,"","","HTML","VFSPSHandleModel")}else{var LOVList=e.data.ctx.GetData("UniqueBrand");VFSPSUdateUIFrameWork.VFSPSShowPicklistValues(selector,"",LOVList,"","","HTML","VFSPSHandleModel")}}function VFSPSChooseModel(e){var Brand=e.data.ctx.GetData("UniqueBrand");var selector=".VFSPSSleCusChooseDeviceModelValue";if(Brand.length==0){var Device=GetUniqueBrandModel();var LOVList=Device.Model;e.data.ctx.SetData("UniqueBrand",Device.Brand);e.data.ctx.SetData("BrandModel",LOVList);VFSPSUdateUIFrameWork.VFSPSShowPicklistValues(selector,"",LOVList,"","","HTML","VFSPSSetDevice")}else{var LOVList=e.data.ctx.GetData("BrandModel");LOVList=LOVList[$(".VFSPSSleCusChooseDeviceBrandValue").val()]["DeviceFullName"];VFSPSUdateUIFrameWork.VFSPSShowPicklistValues(selector,"",LOVList,"","","HTML","VFSPSSetDevice")}}function GetUniqueBrandModel(){var Inputs=SiebelApp.S_App.NewPropertySet();var Options={};var ResultSet=VFCustomSiebelInterface.CallBS("VF SPS TBUI Utilities","GetOutOfStockAddDevice",Inputs,Options);var SiebelData=VFCustomSiebelInterface.SiebelMessageToArray(ResultSet);var lenSiebData=SiebelData.length;var UniqueBrand=new Array();var BrandModel={};for(var i=0;i<lenSiebData;i++){if(SiebelData[i]["Brand"]!=""&&UniqueBrand.indexOf(SiebelData[i]["Brand"])==-1){UniqueBrand[UniqueBrand.length]=SiebelData[i]["Brand"];BrandModel[SiebelData[i]["Brand"]]=new Array();BrandModel[SiebelData[i]["Brand"]]["Model"]=new Array();BrandModel[SiebelData[i]["Brand"]]["ProductType"]=new Array();BrandModel[SiebelData[i]["Brand"]]["DeviceFullName"]=new Array();BrandModel[SiebelData[i]["Brand"]]["RowId"]=new Array()}if(SiebelData[i]["Brand"]!=""){BrandModel[SiebelData[i]["Brand"]]["Model"][BrandModel[SiebelData[i]["Brand"]]["Model"].length]=SiebelData[i]["Model"];BrandModel[SiebelData[i]["Brand"]]["ProductType"][BrandModel[SiebelData[i]["Brand"]]["ProductType"].length]=SiebelData[i]["Product Code"];BrandModel[SiebelData[i]["Brand"]]["DeviceFullName"][BrandModel[SiebelData[i]["Brand"]]["DeviceFullName"].length]=SiebelData[i]["Device Full Name"];BrandModel[SiebelData[i]["Brand"]]["RowId"][BrandModel[SiebelData[i]["Brand"]]["RowId"].length]=SiebelData[i]["RowId"]}}return{"Brand":UniqueBrand,"Model":BrandModel}}function VFSPSSetDeviceForOutOfStock(){var app=SiebelApp.S_App.GetActiveView().GetApplet("VF SPS NewCustomer PostPaid SelectCustomize List Applet");var pm=app.GetPModel();var pr=pm.GetRenderer();var Brand=$(".VFSPSSleCusChooseDeviceBrandValue").val();var DeviceName=$(".VFSPSSleCusChooseDeviceModelValue").val();var BrandModel=pr.GetData("BrandModel");var ModelIndex=BrandModel[Brand].DeviceFullName.indexOf(DeviceName);var DeviceId=BrandModel[Brand].RowId[ModelIndex];var Model=BrandModel[Brand].Model[ModelIndex];var ProductType=BrandModel[Brand].ProductType[ModelIndex];var OLIId=VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId");var Inputs=SiebelApp.S_App.NewPropertySet();Inputs.SetProperty("OrderLineItemId",OLIId);Inputs.SetProperty("DeviceId",DeviceId);var Options={};VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){var ResultSet=VFCustomSiebelInterface.CallBS("VF SPS TBUI Utilities","SetOutOfStockDevice",Inputs,Options);var DeviceFound=ResultSet.GetProperty("DeviceFound");if(DeviceFound=="Y"){var BS="VF SPS TBUI Utilities";var Method="AddDeviceToTaskValdn";var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("OrderLineItemId",VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId"));inps.SetProperty("Brand",Brand);inps.SetProperty("Model",Model);inps.SetProperty("DeviceName",DeviceName);var ResultSet=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});var DeviceFound=ResultSet.GetProperty("TaskVald_Record")}VFSPSUdateUIFrameWork.VFSPSUnblockUI()},1000)}function VFSPSSetModelForBrand(){$(".VFSPSSleCusChooseDeviceModelValue").val("")}function VFSPSPopulateChoosePlan(ExistData){var ChooseAPlan={"F_ChooseServiceType":true,"F_ChoosePlanType":true,"F_ChoosePlanDuration":true,"F_ChoosePlan":true,"ChooseServiceType":ExistData["ServiceType"],"ChoosePlanType":ExistData["PlanType"],"ChoosePlanDuration":ExistData["PlanDuration"],"ChoosePlan":ExistData["PlanName"],"ChooseSIMODevice":ExistData["SIMODevice"],"Sharing":ExistData["Sharing"],"PromoCode":ExistData["PromoCode"]};SetChooseAServiceReadonlyFields(ChooseAPlan);$(".VFSPSSleCusNewPlan").addClass("VFSPSSleCusOpenPlan").removeClass("VFSPSSleCusNewPlan");$(".VFSPSSelCusChoosePlanBody").addClass("VFSPSSelCusChoosePlanBodyReadOnly").removeClass("VFSPSSelCusChoosePlanBodyEditable");if(ExistData["PlanType"]=="Plan and Device"||(ExistData["PlanType"]=="SIM Only"&&ExistData["SIMODevice"]=="Yes")){$(".VFSPSSelChooseDevice").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock")}else{$(".VFSPSSelChooseDevice").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock")}$(".VFSPSSleCusSavePlanDiv").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusPlanPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusPlanDurationPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusChoosePlanDurFldInp").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");if(ExistData["StockIndicator"]=="In Stock"){$(".VFSPSSelAddSimNumber").removeClass("VFSPSDisplayNone")}else{$(".VFSPSSelAddSimNumber").addClass("VFSPSDisplayNone")}}function VFSPSPopulateDeviceDetails(ExistData){var StockIndicator=ExistData["StockIndicator"];if(StockIndicator=="In Stock"){$(".VFSPSSelCusChooseDeviceInStockRadio").attr("checked","true");$(".VFSPSSelCusChooseDeviceOutOfStockRadio").removeAttr("checked");$(".VFSPSSleCusChooseDeviceInStockPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusChooseDeviceOutofStockPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");if(ExistData["IMEI"]==""){$(".VFSPSSleCusChooseDeviceInStockValue").val("");$(".VFSPSSleCusPickIMEIImg").attr("action","Search").children("img").attr("src","images/VFSPSSearchICON.png");$(".VFSPSSleCusChooseInStockBrandValue").val("").removeAttr("disabled");$(".VFSPSSleCusChooseInStockModelValue").val("").removeAttr("disabled");$(".VFSPSSleCusChooseDeviceInStockBrandModelPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock")}else{$(".VFSPSSleCusChooseDeviceInStockValue").val(ExistData["IMEI"]);$(".VFSPSSleCusPickIMEIImg").attr("action","Deallocate").children("img").attr("src","images/VFSPSCrossMark.png");$(".VFSPSSleCusChooseInStockBrandValue").val(ExistData["InStockBrand"]).attr("disabled","true");$(".VFSPSSleCusChooseInStockModelValue").val(ExistData["Device"]).attr("disabled","true");$(".VFSPSSleCusChooseDeviceInStockBrandModelPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock")}}else{if(StockIndicator=="Out of Stock - Connect Later"){$(".VFSPSSelCusChooseDeviceInStockRadio").removeAttr("checked");$(".VFSPSSelCusChooseDeviceOutOfStockRadio").attr("checked","true");$(".VFSPSSleCusChooseDeviceInStockPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusChooseDeviceOutofStockPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusChooseDeviceBrandValue").val(ExistData["InStockBrand"]);$(".VFSPSSleCusChooseDeviceModelValue").val(ExistData["InStockModel"])}else{console.log("Stock Indicator Value Not found")}}}function VFSPSPopulateSIMDetails(ExistData){if(ExistData["SIM"]==""){$(".VFSPSSleCusChooseSIMImg").attr("action","Search").children("img").attr("src","images/VFSPSSearchICON.png");$(".VFSPSSleCusChooseSIMValue").val("").removeAttr("disabled")}else{$(".VFSPSSleCusChooseSIMImg").attr("action","Deallocate").children("img").attr("src","images/VFSPSCrossMark.png");$(".VFSPSSleCusChooseSIMValue").val(ExistData["SIM"]).attr("disabled","true")}}function VFSPSPopulateMobileNumber(ExistData){if(ExistData["ProtIn"]==""){console.log("Port In Type not found.")}else{if(ExistData["ProtIn"]=="No"){$(".VFSPSSleCusPickNewMobileNumberParDiv").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusPickOldMobileNumberParDiv").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSelCusChooseMobileNewRadio").attr("checked","true");$(".VFSPSSelCusChooseMobileOldRadio").removeAttr("checked");$(".VFSPSSleCusPickOldMobileValue").val("");if(ExistData["MSISDN"]==""){$(".VFSPSSleCusPickMobileValue").val("").removeAttr("disabled");$(".VFSPSSleCusPickMobileImg").attr("action","Search");$(".VFSPSSleCusPickMobileImg").children("img").attr("src","images/VFSPSSearchICON.png")}else{$(".VFSPSSleCusPickMobileValue").val(ExistData["MSISDN"]).attr("disabled","true");$(".VFSPSSleCusPickMobileImg").attr("action","Deallocate");$(".VFSPSSleCusPickMobileImg").children("img").attr("src","images/VFSPSCrossMark.png")}}else{$(".VFSPSSleCusPickNewMobileNumberParDiv").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusPickOldMobileNumberParDiv").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusPickMobileValue").val("").removeAttr("disabled");$(".VFSPSSelCusChooseMobileNewRadio").removeAttr("checked");$(".VFSPSSelCusChooseMobileOldRadio").attr("checked","true");$(".VFSPSSleCusPickOldMobileValue").val(ExistData["ProtInMSISDN"]);if(ExistData["ProtIn"]=="Yes - Postpay"){$(".VFSPSSleCusPickOldMobileNumAcctNumPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSleCusPickOldMobileNumDOBPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSelCusOldMobilePlanTypePostPaidRadio").attr("checked","true");$(".VFSPSSelCusOldMobilePlanTypePrePaidRadio").removeAttr("checked");$(".VFSPSSleCusPickOldMobileAcctNumValue").val(ExistData["PortInAcctNum"])}else{if(ExistData["ProtIn"]=="Yes - Prepay"){$(".VFSPSSleCusPickOldMobileNumAcctNumPar").addClass("VFSPSDisplayNone").removeClass("VFSPSDisplayBlock");$(".VFSPSSleCusPickOldMobileNumDOBPar").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");$(".VFSPSSelCusOldMobilePlanTypePostPaidRadio").removeAttr("checked");$(".VFSPSSelCusOldMobilePlanTypePrePaidRadio").attr("checked","true");$(".VFSPSSleCusPickOldMobileNumDOBValue").val(ExistData["ProtInDOB"])}else{console.log("Port In Type not found.")}}}}if(ExistData["NotifyMSISDN"]=="Y"){$(".VFSPSSleCusOldNumNotificationMSISDN").prop("checked","true");$(".VFSPSSleCusNewNumNotificationMSISDN").prop("checked","true")}else{$(".VFSPSSleCusOldNumNotificationMSISDN").removeProp("checked");$(".VFSPSSleCusNewNumNotificationMSISDN").removeProp("checked")}}function VFSPSSelCusCancelOrder(e){var App=SiebelApp.S_App.GetActiveView().GetApplet("VF SPS Task Playbar Applet SelectCutomize - Top");if(App.CanInvokeMethod("CancelTask")){App.InvokeMethod("CancelTask")}}function VFSPSSelCusNavNext(e){var App=SiebelApp.S_App.GetActiveView().GetApplet("VF SPS Task Playbar Applet SelectCutomize - Top");if(App.CanInvokeMethod("NavigatePrev")){App.InvokeMethod("NavigatePrev")}}function VFSPSSleCusContextHelp(e){var Context=$(this).attr("id");switch(Context){case ("VFSPSSleCusPreviousDOB"):VFSPSUdateUIFrameWork.VFSPSSelectContextualMessage("PortInPrepaidInfo");break;case ("VFSPSSleCusPreviousAccountNum"):VFSPSUdateUIFrameWork.VFSPSSelectContextualMessage("PortInPostpaidInfo");break;default:}}function VFSPSShowPortInDOB(e){var Val=$(".VFSPSSleCusPickOldMobileNumDOBValue").val();VFSPSUdateUIFrameWork.ShowDatePicker("",".VFSPSSleCusPickOldMobileNumDOBValue","HTML",Val,"100:0","")}function VFSPSSleCusNotificationMSISDN(e){var OrderId=VFSPSGetOrderId();var OrderLineItemId=VFTabletIntegrationConstants.GetConstants("CurrentOrderLineItemId");var isChecked="N";if($(this).is(":checked")){isChecked="Y"}var inputs=SiebelApp.S_App.NewPropertySet();inputs.SetProperty("sOrderId",OrderId);inputs.SetProperty("sOrderItemId",OrderLineItemId);inputs.SetProperty("iSnotificationchkd",isChecked);VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){try{var outs=VFCustomSiebelInterface.CallBS("VF SPS Billing Account BS","UpdateNotificationMSISDN",inputs,{});var ExistData=VFSPSGetDataFromValidationBC();e.data.ctx.SetData("ExistData",ExistData);if($(this).is(":checked")){$(".VFSPSSleCusOldNumNotificationMSISDN").prop("checked","true");$(".VFSPSSleCusNewNumNotificationMSISDN").prop("checked","true")}else{$(".VFSPSSleCusOldNumNotificationMSISDN").removeProp("checked");$(".VFSPSSleCusNewNumNotificationMSISDN").removeProp("checked")}}catch(e){console.log(e.message);if($(this).is(":checked")){$(".VFSPSSleCusOldNumNotificationMSISDN").removeProp("checked");$(".VFSPSSleCusNewNumNotificationMSISDN").removeProp("checked")}else{$(".VFSPSSleCusOldNumNotificationMSISDN").prop("checked","true");$(".VFSPSSleCusNewNumNotificationMSISDN").prop("checked","true")}}finally{VFSPSUdateUIFrameWork.VFSPSUnblockUI()}},1000)}return VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR}());return"SiebelAppFacade.VFSPSNewCustomerPostPaidSelectCustomizeListAppletPR"})};
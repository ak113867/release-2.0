if(typeof(SiebelAppFacade.VFSUIBillingPostpayButtonPR)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.VFSUIBillingPostpayButtonPR");define("siebel/custom/VFSUIBillingPostpayButtonPR",["order!siebel/phyrenderer"],function(){SiebelAppFacade.VFSUIBillingPostpayButtonPR=(function(){function VFSUIBillingPostpayButtonPR(pm){SiebelAppFacade.VFSUIBillingPostpayButtonPR.superclass.constructor.call(this,pm)}SiebelJS.Extend(VFSUIBillingPostpayButtonPR,SiebelAppFacade.PhysicalRenderer);VFSUIBillingPostpayButtonPR.prototype.ShowUI=function(){SiebelAppFacade.VFSUIBillingPostpayButtonPR.superclass.ShowUI.call(this);var sView=SiebelApp.S_App.GetActiveView().GetName();var sURL;setTimeout(function(){$('div[title="VFSUIButtons Form Applet"]').find(".appletButton").closest("td").css("padding-top","6px");$('div[title="VFSUIButtons Form Applet"]').find(".appletButton").closest("td").css("padding-left","4px");$('div[title="VFSUIButtons Form Applet"]').find(".appletButtonDis").closest("td").css("padding-left","4px");$('div[title="VFSUIButtons Form Applet"]').find(".appletButtonDis").closest("td").css("padding-top","6px")},5);var pm=this.GetPM();var recordSet=pm.Get("GetRecordSet");var sAssetId=recordSet[0].Id;var sSUIInvLoaded=SiebelApp.S_App.GetProfileAttr("VFSUIAutoInvoice");console.log(sSUIInvLoaded);if(sSUIInvLoaded=="Y"){var svc=SiebelApp.S_App.GetService("VF Damon Service");var Input1=SiebelApp.S_App.NewPropertySet();var Output1=SiebelApp.S_App.NewPropertySet();Input1.SetProperty("AssetId",sAssetId);Input1.SetProperty("Source","SUIdash");var Output1=svc.InvokeMethod("getLastInvoiceId",Input1);var resultSet=Output1.GetChild(0);var sInvoiceId=resultSet.GetProperty("Last_InvoiceId");var sBillAccntId=resultSet.GetProperty("BillingId");var InvLoaded=SiebelApp.S_App.GetProfileAttr("sInvLoaded");var sARII=SiebelApp.S_App.GetProfileAttr("ARII");SiebelApp.S_App.SetProfileAttr("ARII","");if(InvLoaded!=sBillAccntId){var sInvoiceBO="FS Invoice";var sInvoiceBC="FS Invoice";if(sInvoiceId==""){console.log("Last Invoice URL can not be opened as there is no Invoice present for this billing account")}if(sARII=="Australia"&&sInvoiceId!=""){var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("ARII",sARII);Input.SetProperty("RowId",sInvoiceId);Input.SetProperty("BOName",sInvoiceBO);Input.SetProperty("BCName",sInvoiceBC);Input.SetProperty("SymbolicURLName","LastInvoiceAU");Input.SetProperty("Encrypt","VF AU Encrypt");Input.SetProperty("Password","VF AU Encryption Password");var Output=svc.InvokeMethod("getURL",Input);var resultSet1=Output.GetChild(0);sURL=resultSet1.GetProperty("Results");if(sView=="VF SUI Billing Postpay NBA View"){if(InvLoaded!=sBillAccntId){window.open(sURL,"Invoice"+sAssetId);var sSVC=SiebelApp.S_App.GetService("SIS OM PMT Service");var LoadedInput=SiebelApp.S_App.NewPropertySet();var LoadedOutput=SiebelApp.S_App.NewPropertySet();LoadedInput.SetProperty("Profile Attribute Name","sInvLoaded");LoadedInput.SetProperty("Profile Attribute Value",sBillAccntId);var LoadedOutput=sSVC.InvokeMethod("Set Profile Attribute",LoadedInput)}}}else{console.log("Unknown ARII value:"+sARII)}}var sSVC=SiebelApp.S_App.GetService("SIS OM PMT Service");var SUILoadedInput=SiebelApp.S_App.NewPropertySet();var SUILoadedOutput=SiebelApp.S_App.NewPropertySet();SUILoadedInput.SetProperty("Profile Attribute Name","VFSUIAutoInvoice");SUILoadedInput.SetProperty("Profile Attribute Value","N");var SUILoadedOutput=sSVC.InvokeMethod("Set Profile Attribute",SUILoadedInput);var sSUIInvLoaded=SiebelApp.S_App.GetProfileAttr("VFSUIAutoInvoice");console.log(sSUIInvLoaded)}$('button[title="VFSUIButtons:Latest Invoice"]').click(function(){var svc=SiebelApp.S_App.GetService("VF Damon Service");var Input1=SiebelApp.S_App.NewPropertySet();var Output1=SiebelApp.S_App.NewPropertySet();Input1.SetProperty("AssetId",sAssetId);Input1.SetProperty("Source","SUIdash");var Output1=svc.InvokeMethod("getLastInvoiceId",Input1);var resultSet=Output1.GetChild(0);var sInvoiceId=resultSet.GetProperty("Last_InvoiceId");var sBillAccntId=resultSet.GetProperty("BillingId");var InvLoaded=SiebelApp.S_App.GetProfileAttr("sInvLoaded");var sARII=SiebelApp.S_App.GetProfileAttr("ARII");SiebelApp.S_App.SetProfileAttr("ARII","");var sInvoiceBO="FS Invoice";var sInvoiceBC="FS Invoice";if(sInvoiceId==""){console.log("Last Invoice URL can not be opened as there is no Invoice present for this billing account")}if(sARII=="Australia"&&sInvoiceId!=""){var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("ARII",sARII);Input.SetProperty("RowId",sInvoiceId);Input.SetProperty("BOName",sInvoiceBO);Input.SetProperty("BCName",sInvoiceBC);Input.SetProperty("SymbolicURLName","LastInvoiceAU");Input.SetProperty("Encrypt","VF AU Encrypt");Input.SetProperty("Password","VF AU Encryption Password");var Output=svc.InvokeMethod("getURL",Input);var resultSet1=Output.GetChild(0);sURL=resultSet1.GetProperty("Results");window.open(sURL,"Invoice"+sAssetId);var sSVC=SiebelApp.S_App.GetService("SIS OM PMT Service");var LoadedInput=SiebelApp.S_App.NewPropertySet();var LoadedOutput=SiebelApp.S_App.NewPropertySet();LoadedInput.SetProperty("Profile Attribute Name","sInvLoaded");LoadedInput.SetProperty("Profile Attribute Value",sBillAccntId);var LoadedOutput=sSVC.InvokeMethod("Set Profile Attribute",LoadedInput)}else{console.log("Unknown ARII value:"+sARII)}if(typeof sURL==="undefined"){alert("There is no Open or Closed invoice for this Billing Account")}else{window.open(sURL,"Invoice"+sAssetId)}});var sbuttonclick;var url;$('button[title="VFSUIButtons:MyBill"]').click(function(){sbuttonclick="My Bill Portal";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Online Payment Tool"]').click(function(){sbuttonclick="Online Payment Tool";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:LSHS Tool"]').click(function(){sbuttonclick="Lost / Stolen Handset Tool";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Webadmin Reset"]').click(function(){sbuttonclick="CSR Tool";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Oracle"]').click(function(){sbuttonclick="Oracle (handset orders) â€“ Track & Trace";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Premium TXT Search(Hobart)"]').click(function(){sbuttonclick="Premium Text Search Tool";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Premium TXT Search(India)"]').click(function(){sbuttonclick="Premium Text Search Tool India";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Track It (Hobart)"]').click(function(){sbuttonclick="Track It Hobart";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Track It (India)"]').click(function(){sbuttonclick="Track It India";openExtLink(sbuttonclick)});$('button[title="VFSUIButtons:Premium TXT Barring"]').click(function(){sbuttonclick="Premium Text Barring Tool";openExtLink(sbuttonclick)});function openExtLink(sbuttonclick){var sbtnclick=sbuttonclick;if(sbtnclick!=""){var svc=SiebelApp.S_App.GetService("VF SUI Get Button Link BS");var pInput=SiebelApp.S_App.NewPropertySet();var pOutput=SiebelApp.S_App.NewPropertySet();pInput.SetProperty("sbuttonclicked",sbtnclick);var pOutput=svc.InvokeMethod("GetButtonLink",pInput);var resultSet=pOutput.GetChild(0);url=resultSet.GetProperty("sUrl");console.log(url);window.open(url,sbtnclick);url="";sbuttonclick=""}}};return VFSUIBillingPostpayButtonPR}());return"SiebelAppFacade.VFSUIBillingPostpayButtonPR"})};
if(typeof(SiebelAppFacade.VFInvoiceForm)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.VFInvoiceForm");define("siebel/custom/VFInvoiceForm",[],function(){SiebelAppFacade.VFInvoiceForm=(function(){var consts=SiebelJS.Dependency("SiebelApp.Constants");console.log("111");function VFInvoiceForm(){console.log("InVoice");SiebelAppFacade.VFInvoiceForm.superclass.constructor.apply(this,arguments)}SiebelJS.Extend(VFInvoiceForm,SiebelAppFacade.PresentationModel);VFInvoiceForm.prototype.Init=function(){console.log("Init");SiebelAppFacade.VFInvoiceForm.superclass.Init.call(this);this.AddMethod("InvokeMethod",PreInvokeMethod,{sequence:true,scope:this})};function PreInvokeMethod(methodName,psInputArgs,lp,returnStructure){console.log("PreInvoke");if(methodName==="mLaunch"){busObj=SiebelApp.S_App.GetActiveBusObj();var busComp=busObj.GetBusCompByName("FS Invoice");var sInvoiceId=busComp.GetFieldValue("Id");var sBS=SiebelApp.S_App.GetService("VF Damon Service");var sInp=SiebelApp.S_App.NewPropertySet();var sOutp=SiebelApp.S_App.NewPropertySet();var sARII=SiebelApp.S_App.GetProfileAttr("InvoiceARII");SiebelApp.S_App.SetProfileAttr("InvoiceARII","");sInp.SetProperty("ARII",sARII);sInp.SetProperty("RowId",sInvoiceId);sInp.SetProperty("BOName",busObj.GetName());sInp.SetProperty("BCName","FS Invoice");switch(sARII){case"Australia":sInp.SetProperty("SymbolicURLName","BillStatementAU");sInp.SetProperty("Encrypt","VF AU Encrypt");sInp.SetProperty("Password","VF AU Encryption Password");break;case"Fiji":sInp.SetProperty("SymbolicURLName","BillStatementFJ");sInp.SetProperty("Encrypt","VF FJ Encrypt");sInp.SetProperty("Password","VF FJ Encryption Password");break;default:alert("Unknown ARII value:"+sARII);returnStructure["CancelOperation"]=true;SiebelApp.S_App.uiStatus.Free();break}sBS.InvokeMethod("getURL",sInp,sOutp);var sURL=SiebelApp.S_App.GetProfileAttr("Results");var w=window.open(sURL,"CNN_WindowName","menubar=no,titlebar=no,location=no,resizable=yes,scrollbars=yes,status=yes");returnStructure["CancelOperation"]=true;SiebelApp.S_App.uiStatus.Free()}}return VFInvoiceForm}());return"SiebelAppFacade.VFInvoiceForm"})};
if(typeof(SiebelAppFacade.VFSPSCreditCheckPR)==="undefined"){var placeholder="";SiebelJS.Namespace("SiebelAppFacade.VFSPSCreditCheckPR");var InputList=new Array();var previousAddress=false;var appControls,loadedapplet,sActiveView,finStatus="",controls;define("siebel/custom/VFSPSCreditCheckPR",["order!siebel/phyrenderer"],function(){SiebelAppFacade.VFSPSCreditCheckPR=(function(){var siebConsts=SiebelJS.Dependency("SiebelApp.Constants");function VFSPSCreditCheckPR(pm){SiebelAppFacade.VFSPSCreditCheckPR.superclass.constructor.call(this,pm);this.GetPM().AttachPMBinding("FieldChanged",VFSPSTogglePreviousAddress,{scope:this})}SiebelJS.Extend(VFSPSCreditCheckPR,SiebelAppFacade.PhysicalRenderer);VFSPSCreditCheckPR.prototype.Init=function(){SiebelAppFacade.VFSPSCreditCheckPR.superclass.Init.apply(this,arguments);this.gAddrList=new Array();this.gTradAddrList=new Array();this.Data={"gAddrList":this.gAddrList,"gTradAddrList":this.gTradAddrList};this.SetData=function(Category,data){this.Data[Category]=data};this.GetData=function(Category){return this.Data[Category]};SiebelApp.EventManager.cleanListners("VFSPSCreditCheckEmployementStatus");SiebelApp.EventManager.cleanListners("VFSPSCreditCheckOccupationStatus");SiebelApp.EventManager.cleanListners("VFSPSCreditCheckCurrentAddress");SiebelApp.EventManager.cleanListners("VFSPSCreditCheckTradingAddress");SiebelApp.EventManager.cleanListners("VFSPSEnableSubmitButton");SiebelApp.EventManager.addListner("VFSPSEnableSubmitButton",VFSPSEnableSubmitButton,this);SiebelApp.EventManager.addListner("VFSPSCreditCheckEmployementStatus",VFSPSCreditCheckEmployementStatus,this);SiebelApp.EventManager.addListner("VFSPSCreditCheckOccupationStatus",VFSPSCreditCheckOccupationStatus,this);SiebelApp.EventManager.addListner("VFSPSCreditCheckCurrentAddress",VFSPSCreditCheckCurrentAddress,this);SiebelApp.EventManager.addListner("VFSPSCreditCheckTradingAddress",VFSPSCreditCheckTradingAddress,this);SiebelApp.EventManager.cleanListners("VFSPSCreditSubrub");SiebelApp.EventManager.addListner("VFSPSCreditSubrub",VFSPSCreditSubrub,this);this.GetPM().AttachPMBinding("ShowSelection",function(){var AppletName=GetActiveCreditAppletName();var App=SiebelApp.S_App.GetActiveView().GetApplet(AppletName);BC=App.GetBusComp();if(finStatus!=""){BC.SetFieldValue("VF Financial Status",finStatus)}})};function GetActiveCreditAppletName(){var AppletMap=SiebelApp.S_App.GetActiveView().GetAppletMap();var AppletList=["VF SPS Credit Check Toggle Form Applet","VF SPS Credit Check Toggle Form Applet Corporate","VF SPS Credit Check Toggle Form Applet Corporate RO","VF SPS Credit Check Toggle Form Applet Default","VF SPS Credit Check Toggle Form Applet Default RO","VF SPS Credit Check Toggle Form Applet Employ Std","VF SPS Credit Check Toggle Form Applet Employ Std RO","VF SPS Credit Check Toggle Form Applet O Stu","VF SPS Credit Check Toggle Form Applet O Stu RO","VF SPS Credit Check Toggle Form Applet Student","VF SPS Credit Check Toggle Form Applet Student RO","VF SPS Credit Check Toggle Form Applet Unemployed","VF SPS Credit Check Toggle Form Applet Unemployed RO"];var AppletName="";for(var i=0;i<AppletList.length;i++){if(AppletMap[AppletList[i]]){AppletName=AppletList[i];break}}return AppletName}function VFSPSCreditCheckTradingAddress(){var AppletName=GetActiveCreditAppletName();$("#VFSPSOpenModalPicklist").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone");var App=SiebelApp.S_App.GetActiveView().GetApplet(AppletName);var pm=App.GetPModel();controls=pm.Get("GetControls");var statusCon=controls["Trading Address"];var aF=$("input[name='"+statusCon.GetInputName()+"']");var Val=aF.val();var Address=pm.GetRenderer().GetData("gTradAddrList");var AddrId=Address.AddressId[Address.AddressDetail.indexOf(Val)];var BS="VF SPS Credit Check Handset Service";var Method="SetTradingAddress";var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("CutAddressId",AddrId);var outs=VFCustomSiebelInterface.CallBS(BS,Method,inps,{})}function VFSPSCreditCheckCurrentAddress(){var AppletName=GetActiveCreditAppletName();$("#VFSPSOpenModalPicklist").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone");var App=SiebelApp.S_App.GetActiveView().GetApplet(AppletName);var pm=App.GetPModel();controls=pm.Get("GetControls");var statusCon=controls["CurrentAddress"];var aF=$("input[name='"+statusCon.GetInputName()+"']");var Val=aF.val();var Address=pm.GetRenderer().GetData("gAddrList");var AddrId=Address.AddressId[Address.AddressDetail.indexOf(Val)];var BS="VF SPS Credit Check Handset Service";var Method="SetCurrentAddress";var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("CutAddressId",AddrId);var outs=VFCustomSiebelInterface.CallBS(BS,Method,inps,{})}function VFSPSCreditCheckEmployementStatus(){$(".VFSPSCustomerPostPaiddiv").click();var AppletName=GetActiveCreditAppletName();var App=SiebelApp.S_App.GetActiveView().GetApplet(AppletName);BC=App.GetBusComp();var pm=App.GetPModel();var controls=pm.Get("GetControls");var statusCon=controls["VFFinancialStatus"];var aF=$("input[name='"+statusCon.GetInputName()+"']");$("#"+statusCon.GetInputName()+"_icon").remove();var Val=aF.val();var finStatus=BC.GetFieldValue("VF Financial Status");var i=SiebelJS.Dependency("SiebelApp.Constants");pm.OnControlEvent(i.get("PHYEVENT_INVOKE_COMBO"),statusCon,finStatus);$("#VFSPSOpenModalPicklist").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone");$("ul.ui-autocomplete li.ui-menu-item a.ui-corner-all").each(function(e){if($(this).html()==Val){$(this).click()}});BC.SetFieldValue("VF Financial Status",finStatus);$("#VFSPSCreditFinStatusDropDown").parent().children("input").attr("disabled","true")}function VFSPSCreditCheckOccupationStatus(){$(".VFSPSCustomerPostPaiddiv").click();var AppletName=GetActiveCreditAppletName();var App=SiebelApp.S_App.GetActiveView().GetApplet(AppletName);BC=App.GetBusComp();var pm=App.GetPModel();var controls=pm.Get("GetControls");var statusCon=controls["VFFinancialPosition"];var aF=$("input[name='"+statusCon.GetInputName()+"']");$("#"+statusCon.GetInputName()+"_icon").remove();var Val=aF.val();var i=SiebelJS.Dependency("SiebelApp.Constants");pm.OnControlEvent(i.get("PHYEVENT_INVOKE_COMBO"),statusCon,Val);$("#VFSPSOpenModalPicklist").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone");$("ul.ui-autocomplete li.ui-menu-item a.ui-corner-all").each(function(e){if($(this).html()==Val){$(this).click()}});VFSPSSetFieldValue("VF Com Financial Profile","VF Financial Position",Val);$("#VFSPSCreditOccupationDropDown").parent().children("input").attr("disabled","true")}function VFSPSSetFieldValue(BCName,FieldName,FieldValue){var BS="VF SPS IDCaputre BS";var Method="SetDateFieldValues";var Inputs=SiebelApp.S_App.NewPropertySet();Inputs.SetProperty("BCName",BCName);Inputs.SetProperty("FieldName",FieldName);Inputs.SetProperty("FieldValue",FieldValue);Outputs=VFCustomSiebelInterface.CallBS(BS,Method,Inputs,{})}VFSPSCreditCheckPR.prototype.ShowUI=function(){SiebelAppFacade.VFSPSCreditCheckPR.superclass.ShowUI.call(this);var controls=this.GetPM().Get("GetControls");sActiveView=SiebelApp.S_App.GetActiveView();var sView=sActiveView.GetName();var playbarapplet=sActiveView.GetApplet("VF SPS Task Playbar Applet - Top");var ctrls=playbarapplet.GetControls();var NextBtn=ctrls.ButtonNext.GetInputName();this.NextBtn=NextBtn;var CancelBtn=ctrls.ButtonCancel.GetInputName();var PauseBtn=ctrls.ButtonPause.GetInputName();var PreviousBtn=ctrls.ButtonPrevious.GetInputName();var applet1=sActiveView.GetApplet("VF SPS Intended Device Applet");var applet2=sActiveView.GetApplet("VF SPS Credit Legal Disclaimer Applet");var applet3=sActiveView.GetApplet("VF SPS Withdraw Credit Check Applet");var applet4=sActiveView.GetApplet("VF SPS Credit Legal Disclaimer Applet RO");var sBO=SiebelApp.S_App.GetActiveBusObj();var sBC=sBO.GetBusCompByName("VF Com Financial Profile");var sCreditid=sBC.GetFieldValue("Id");var sStatus=sBC.GetFieldValue("VF Credit Check Status");if(sStatus!="New"&&sStatus!="Failed"&&sStatus!="WITHDRAW"&&sStatus!=""){$(".VFSPSSubmitButtons").hide();$("#VFSPSdivclass").removeClass("VFSPSDisplayNone");$(".VFSPSResetButtons").removeClass("VFSPSDisplayNone");$("#s_"+applet3.GetFullId()+"_div").show();if(sStatus=="CONDAPPRVE"){$(".VFSPSAcceptButtons").removeClass("VFSPSDisplayNone")}}else{if(sStatus=="Failed"){$("#s_"+applet3.GetFullId()+"_div").show()}else{if(sStatus=="WITHDRAW"){$("#s_"+applet3.GetFullId()+"_div").show();$(".VFSPSResetButtons").removeClass("VFSPSDisplayNone")}else{$("#s_"+applet3.GetFullId()+"_div").hide()}}$(".VFSPSAdd").removeClass("VFSPSDisableClick");$(".VFSPSHandsetListDivParent").find('input[type="checkbox"]').removeAttr("disabled");$(".VFSPSHandsetListDivParent").find('input[type="number"]').removeAttr("disabled");$(".VFSPSHandsetListDivParent").find('input[type="text"]').removeClass("VFSPSHandSetBrandModelDisabled");$(".VFSPSHandsetListDivParent").find(".VFSPSDelete,.VFSPSCreditDetailPickIconNew,.VFSPSCustomerDetailPickIconNew").removeClass("VFSPSDisableClick");$(".VFSPSHandsetListDivParent").find('input[name="VFSPSBrandValue"]').each(function(e){console.log($(this).attr("id"));var BrandId=$(this).attr("id");var Id=BrandId.substr("VFSPSBrandValue".length,BrandId.length);if($("#VFSPSSIMOnly"+Id).is(":checked")){$("#VFSPSBrandValue"+Id).next("img").addClass("VFSPSDisableClick");$("#VFSPSModelValue"+Id).next("img").addClass("VFSPSDisableClick");$("#VFSPSBrandValue"+Id).addClass("VFSPSHandSetBrandModelDisabled");$("#VFSPSModelValue"+Id).addClass("VFSPSHandSetBrandModelDisabled")}})}setTimeout(function(){$(".VFSPSTaskviewMiniApp").closest("div").css("height","");if(sActiveView.GetApplet("VF SPS Credit Legal Disclaimer Applet")||sActiveView.GetApplet("VF SPS Credit Legal Disclaimer Applet RO")){$("#VF_Credit_Check_Status_Label").hide()}if(sActiveView.GetApplet("VF SPS Credit Check Toggle Form Applet")){$(".applet-form-combo").addClass("VFSPSDisplayNoneCredit");$(".VFSPSDisplayNoneCredit").attr("style","display:none !important;");$("input[name='"+controls["VFFinancialStatus"].GetInputName()+"']").closest("tr").append('<img class="VFSSPSCreditValidationIcon" id="VFSPSCreditEmployeeStatusValidationIcon" src="images/VFSPSInfo.png"></img>');$("input[name='"+controls["VFFinancialPosition"].GetInputName()+"']").closest("tr").append('<img class="VFSSPSCreditValidationIcon" id="VFSPSCreditOccupationValidationIcon" src="images/VFSPSInfo.png"></img>');$("input[name='"+controls["VFFinancialStatus"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCreditFinStatusDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["VFFinancialPosition"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCreditOccupationDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("#"+controls["VFFinancialStatus"].GetInputName()+"_icon").remove();$("#"+controls["VFFinancialPosition"].GetInputName()+"_icon").remove();$("#s_"+applet1.GetFullId()+"_div").hide();$("#s_"+applet2.GetFullId()+"_div").hide()}else{if(applet2!=null){$("#s_"+applet2.GetFullId()+"_div").show()}$("#s_"+applet1.GetFullId()+"_div").show()}if(sActiveView.GetApplet("VF SPS Credit Check Toggle Form Applet Student")||sActiveView.GetApplet("VF SPS Credit Check Toggle Form Applet Student RO")||sActiveView.GetApplet("VF SPS Credit Check Toggle Form Applet Unemployed")||sActiveView.GetApplet("VF SPS Credit Check Toggle Form Applet Unemployed RO")){var applet=sActiveView.GetApplet(GetActiveCreditAppletName());var oControls=applet.GetControls();$("input[name='"+oControls["VFTimeinCurrentEmployer"].GetInputName()+"']").parent().parent().parent().hide()}if(sActiveView.GetApplet("VF SPS Credit Check Toggle Form Applet Corporate")||sActiveView.GetApplet("VF SPS Credit Check Toggle Form Applet Corporate RO")){loadedapplet=1;var applet=sActiveView.GetApplet(GetActiveCreditAppletName());appControls=applet.GetControls();$(".applet-form-date").remove();InputList=["Number of Employees","Number of Locations","Trading Start Date"," Position of Applicant","Trading Address","CurrentAddress","VFCurrentYearsatAddress"];$("input[name='"+controls["Trading Start Date"].GetInputName()+"']").attr("placeholder","--DD/MM/YYYY--").after('<img id="VFSPSCreditCheckCalender" class="VFSPSCreditCheckCalIcon" src="images/VFSPScalendar-icon.png">');$("input[name='"+controls["Campaign Code"].GetInputName()+"']").closest("tr").append('<td><div class="VFSPSOptional">Optional</div></td>');$("input[name='"+controls["Months at Address"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCreditAdressMonthsTitleDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls[" Position of Applicant"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCreditJobTitleDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["VFCurrentYearsatAddress"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["Months at Address"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["Number of Employees"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["Number of Employees"].GetInputName()+"']").parent().parent().parent().hide();$("input[name='"+controls["Number of Locations"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["CurrentAddress"].GetInputName()+"']").addClass("VFSPSCreditCheckCurrentAddress").attr("placeholder","--Select--").after('<img id="VFSPSCreditCurrentDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Trading Address"].GetInputName()+"']").addClass("VFSPSCreditCheckTradingAddress").attr("placeholder","--Select--").after('<img id="VFSPSCreditTradingAddrDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("#"+controls["Trading Address"].GetInputName()+"_icon").remove();VFSPSTogglePreviousAddress();$("input[name='"+controls["VF SPS Prev Postal Code"].GetInputName()+"']").addClass("VFSPSCustomerPostCode");$("input[name='"+controls["VF SPS Prev Street Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrevStreetTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["VF SPS State"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrevStateDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["VF SPS Prev Country"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrevCountryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["VF SPS Prev Apartment Name"].GetInputName()+"']").closest("tr").append('<td><div class="VFSPSOptional">Optional</div></td>');$("input[name='"+controls["VF SPS Prev Building Number"].GetInputName()+"']").closest("tr").append('<td><div class="VFSPSOptional">Optional</div></td>')}else{if(!sActiveView.GetApplet("VF SPS Credit Check Toggle Form Applet")){var AppletName=GetActiveCreditAppletName();loadedapplet=1;switch(AppletName){case ("VF SPS Credit Check Toggle Form Applet Student"):var applet=sActiveView.GetApplet(AppletName);appControls=applet.GetControls();InputList=["VFFinancialStatus","VFFinancialPosition","VFEmployerCurrent","VFEmployerContactPhone","VFYearswithCurrentEmployer","Residential Status","CurrentAddress","VFCurrentYearsatAddress"];break;case ("VF SPS Credit Check Toggle Form Applet Default"):var applet=sActiveView.GetApplet(AppletName);appControls=applet.GetControls();InputList=["VFFinancialStatus","VFFinancialPosition","VFEmployerCurrent","VFEmployerContactPhone","VFYearswithCurrentEmployer","Residential Status","CurrentAddress","VFCurrentYearsatAddress"];break;case ("VF SPS Credit Check Toggle Form Applet Employ Std"):var applet=sActiveView.GetApplet(AppletName);appControls=applet.GetControls();InputList=["VFFinancialStatus","VFFinancialPosition","Residential Status","CurrentAddress","VFCurrentYearsatAddress"];break;case ("VF SPS Credit Check Toggle Form Applet O Stu"):var applet=sActiveView.GetApplet(AppletName);appControls=applet.GetControls();InputList=["VFFinancialStatus","VFFinancialPosition","Residential Status","CurrentAddress","VFCurrentYearsatAddress"];break;case ("VF SPS Credit Check Toggle Form Applet Unemployed"):var applet=sActiveView.GetApplet(AppletName);appControls=applet.GetControls();InputList=["VFFinancialStatus","VFFinancialPosition","VFEmployerCurrent","Customer Additional Info","VFYearswithCurrentEmployer","Residential Status","CurrentAddress","VFCurrentYearsatAddress"];break;default:loadedapplet=0}if(loadedapplet==1){VFSPSEnableSubmitButton()}VFSPSTogglePreviousAddress();$("input[name='"+controls["VF SPS Prev Postal Code"].GetInputName()+"']").addClass("VFSPSCustomerPostCode");$("input[name='"+controls["VF SPS Prev Street Type"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrevStreetTypeDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["VF SPS State"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrevStateDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["VF SPS Prev Country"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSPrevCountryDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["VF SPS Prev Apartment Name"].GetInputName()+"']").closest("tr").append('<td><div class="VFSPSOptional">Optional</div></td>');$("input[name='"+controls["VF SPS Prev Building Number"].GetInputName()+"']").closest("tr").append('<td><div class="VFSPSOptional">Optional</div></td>');$("input[name='"+controls["VFFinancialStatus"].GetInputName()+"']").closest("tr").append('<img class="VFSSPSCreditValidationIcon" id="VFSPSCreditEmployeeStatusValidationIcon" src="images/VFSPSInfo.png"></img>');$("input[name='"+controls["VFFinancialPosition"].GetInputName()+"']").closest("tr").append('<img class="VFSSPSCreditValidationIcon" id="VFSPSCreditOccupationValidationIcon" src="images/VFSPSInfo.png"></img>');$("input[name='"+controls["VFFinancialStatus"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCreditFinStatusDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["VFFinancialPosition"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCreditOccupationDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("#"+controls["VFFinancialStatus"].GetInputName()+"_icon").remove();$("#"+controls["VFFinancialPosition"].GetInputName()+"_icon").remove();$("input[name='"+controls["Campaign Code"].GetInputName()+"']").closest("tr").append('<td><div class="VFSPSOptional">Optional</div></td>');$("input[name='"+controls["VFMonthswithCurrentEmployer"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCreditMonthsEmployerDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Months at Address"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCreditAdressMonthsTitleDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Residential Status"].GetInputName()+"']").attr("placeholder","--Select--").after('<img id="VFSPSCreditResidentDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true");$("input[name='"+controls["Months at Address"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["VFMonthswithCurrentEmployer"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["VFCurrentYearsatAddress"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["VFYearswithCurrentEmployer"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["VFEmployerContactPhone"].GetInputName()+"']").attr("type","number");$("input[name='"+controls["CurrentAddress"].GetInputName()+"']").addClass("VFSPSCreditCheckCurrentAddress").attr("placeholder","--Select--").after('<img id="VFSPSCreditCurrentDropDown" class="VFSPSDropDownIcon" src="images/VFSPSdropdown-arrow.png">').attr("disabled","true")}}},100);$("#VFSPSOpenModalPicklist").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone");$("#VF_Credit_Check_Status_Label").parent().parent("td").parent("tr").addClass("VFSPSDisplayNone");$(".VFSSPStickNew").parent().addClass("VFSPSFloatLeft")};VFSPSCreditCheckPR.prototype.BindEvents=function(){SiebelAppFacade.VFSPSCreditCheckPR.superclass.BindEvents.call(this);var pm=this.GetPM();$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCreditFinStatusDropDown","click",{ctx:this},VFSPSCreditFinStatusDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCreditOccupationDropDown","click",{ctx:this},VFSPSCreditOccupationDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCreditMonthsEmployerDropDown","click",{ctx:this},VFSPSCreditMonthsEmployerDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCreditAdressMonthsTitleDropDown","click",{ctx:this},VFSPSCreditAdressMonthsTitleDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCreditResidentDropDown","click",{ctx:this},VFSPSCreditResidentDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCreditJobTitleDropDown","click",{ctx:this},VFSPSCreditJobTitleDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCreditCurrentDropDown","click",{ctx:this},VFSPSCreditCurrentDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCreditTradingAddrDropDown","click",{ctx:this},VFSPSCreditTradingAddrDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate(".VFSPSCreditCheckField","input",{ctx:this},VFSPSEnableSubmitButton);$("#s_"+pm.Get("GetFullId")+"_div").delegate(".VFSPSCreditCheckyrsfield","input",{ctx:this},VFSPSEnableSubmitButton);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCreditCheckCalender","click",{ctx:this},VFSPSCreditCheckCalender);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSCreditEmployeeStatusValidationIcon,#VFSPSCreditOccupationValidationIcon","click",{ctx:this},VFSPSGetCreditContexualInfo);$(".VFSPSCreditCheckIdentifierField,.VFSPSCreditCheckboxField").delegate("input[type='checkbox']","click",function(){VFSPSEnableSubmitButton()});$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrevStateDropDown","click",{ctx:this},VFSPSPrevStateDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrevCountryDropDown","click",{ctx:this},VFSPSPrevCountryDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate("#VFSPSPrevStreetTypeDropDown","click",{ctx:this},VFSPSPrevStreetTypeDropDown);$("#s_"+pm.Get("GetFullId")+"_div").delegate(".VFSPSCustomerPostCode","keydown",{ctx:this},VFSPSCreditPostCodeCheckLength);$("#s_"+pm.Get("GetFullId")+"_div").delegate(".VFSPSCustomerPostCode","input",{ctx:this},VFSPSCreditPostCodeDropDown)};function VFSPSCreditPostCodeCheckLength(e){if((event.which!=8)&&(event.which!=46)){var val=$(this).val();if(val.length==4){event.preventDefault();event.stopPropagation()}}}function VFSPSCreditPostCodeDropDown(e){var val=$(this).val();if(val.length==4){$('[aria-labelledby="VF_SPS_Prev_Suburb_Label"]').removeAttr("readonly");$('[aria-labelledby="VF_SPS_State_Label"]').removeAttr("readonly");var BO=SiebelApp.S_App.GetActiveBusObj();var BC=BO.GetBusCompByName("VF Com Financial Profile");var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Input.SetProperty("Business Component Name","VF Postcode Validated VBC");VFCustomSiebelInterface.SetProfileAttr("PostcodeAttr",$(this).val());VFSPSUdateUIFrameWork.VFSPSBlockUI("");setTimeout(function(){Output=VFCustomSiebelInterface.CallBS("VF Generic VBC Service","Query",Input,{});var PicklistValues=new Array();var ArrayList=VFCustomSiebelInterface.SiebelMessageToArray(Output);var ArrayListLen=ArrayList.length;for(var i=0;i<ArrayListLen;i++){PicklistValues[PicklistValues.length]=ArrayList[i]["VFSPSSuburb"]}VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Com Financial Profile","VF Previous Suburb",PicklistValues,"","","Siebel","VFSPSCreditSubrub");VFSPSUdateUIFrameWork.VFSPSUnblockUI()},100)}}function VFSPSCreditSubrub(e){var BO=SiebelApp.S_App.GetActiveBusObj();var BC=BO.GetBusCompByName("VF Com Financial Profile");var subrub=BC.GetFieldValue("VF Previous Suburb");var arrayOfStrings=subrub.split(",");VFSPSSetFieldValue("VF Com Financial Profile","VF Previous State",arrayOfStrings[1]);VFSPSSetFieldValue("VF Com Financial Profile","VF Previous Suburb",arrayOfStrings[0]);$('[aria-labelledby="VF_SPS_Prev_Suburb_Label"]').attr("readonly","true");$('[aria-labelledby="VF_SPS_State_Label"]').attr("readonly","true")}function VFSPSGetCreditContexualInfo(e){var curId=$(this).attr("id");if(curId=="VFSPSCreditEmployeeStatusValidationIcon"){VFSPSUdateUIFrameWork.VFSPSSelectContextualMessage("EmploymentStatusInfo")}if(curId=="VFSPSCreditOccupationValidationIcon"){VFSPSUdateUIFrameWork.VFSPSSelectContextualMessage("OccupationInfo")}}function VFSPSCreditCheckCalender(e){var AppletName=GetActiveCreditAppletName();var App=SiebelApp.S_App.GetActiveView().GetApplet(AppletName);var pm=App.GetPModel();var controls=pm.Get("GetControls");var currentVal=$("input[name='"+controls["Trading Start Date"].GetInputName()+"']").val();VFSPSUdateUIFrameWork.ShowDatePicker("VF Com Financial Profile","Current Hire Date","Siebel",currentVal,"100:100","")}function VFSPSGetCreditContexualInfo(e){var curId=$(this).attr("id");if(curId=="VFSPSCreditEmployeeStatusValidationIcon"){VFSPSUdateUIFrameWork.VFSPSSelectContextualMessage("EmploymentStatusInfo")}if(curId=="VFSPSCreditOccupationValidationIcon"){VFSPSUdateUIFrameWork.VFSPSSelectContextualMessage("OccupationInfo")}}function VFSPSCreditCheckCalender(e){var AppletName=GetActiveCreditAppletName();var App=SiebelApp.S_App.GetActiveView().GetApplet(AppletName);var pm=App.GetPModel();var controls=pm.Get("GetControls");var currentVal=$("input[name='"+controls["Trading Start Date"].GetInputName()+"']").val();VFSPSUdateUIFrameWork.ShowDatePicker("VF Com Financial Profile","Current Hire Date","Siebel",currentVal,"100:100","")}function VFSPSCreditTradingAddrDropDown(e){var BS="VF SPS Credit Check Handset Service";var Method="GetTradingAddress";var inps=SiebelApp.S_App.NewPropertySet();var outs=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});var ChildCount=outs.GetChildCount();var AddressList=new Array();var Address={};Address.AddressDetail=new Array();Address.AddressId=new Array();for(var i=0;i<ChildCount;i++){var Child=outs.GetChild(i);AddressList[AddressList.length]=Child.GetProperty("Calc Current Address3");Address.AddressDetail[Address.AddressDetail.length]=Child.GetProperty("Calc Current Address3");Address.AddressId[Address.AddressId.length]=Child.GetProperty("Id")}e.data.ctx.SetData("gTradAddrList",Address);var selector=".VFSPSCreditCheckTradingAddress";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues(selector,"",AddressList,"","","HTML","VFSPSCreditCheckTradingAddress")}function VFSPSCreditCurrentDropDown(e){var BS="VF SPS Credit Check Handset Service";var Method="GetCurrentAddress";var inps=SiebelApp.S_App.NewPropertySet();var outs=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});var ChildCount=outs.GetChildCount();var AddressList=new Array();var Address={};Address.AddressDetail=new Array();Address.AddressId=new Array();for(var i=0;i<ChildCount;i++){var Child=outs.GetChild(i);AddressList[AddressList.length]=Child.GetProperty("Calc Current Address3");Address.AddressDetail[Address.AddressDetail.length]=Child.GetProperty("Calc Current Address3");Address.AddressId[Address.AddressId.length]=Child.GetProperty("Id")}e.data.ctx.SetData("gAddrList",Address);var selector=".VFSPSCreditCheckCurrentAddress";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues(selector,"",AddressList,"","","HTML","VFSPSCreditCheckCurrentAddress")}function VFSPSCreditFinStatusDropDown(e){$("#VFSPSCreditFinStatusDropDown").parent().children("input").removeAttr("disabled");var SearchString="[List Of Values.Type] = 'VF_CC_FINANCIAL_STATUS' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Com Financial Profile","VF Financial Status","LOV","",SearchString,"Siebel","VFSPSCreditCheckEmployementStatus","true")}function VFSPSCreditOccupationDropDown(e){$("#VFSPSCreditOccupationDropDown").parent().children("input").removeAttr("disabled");var bo=SiebelApp.S_App.GetActiveBusObj();var bc=bo.GetBusCompByName("VF Com Financial Profile");var nstatus=bc.GetFieldValue("VF Financial Status");var SearchString="[List Of Values.Type] = 'VF_CC_FINANCIAL_POSITION' AND [List Of Values.Active] = 'Y' AND [List Of Values.Parent] = '"+nstatus+"'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Com Financial Profile","VF Financial Position","LOV","",SearchString,"Siebel","VFSPSCreditCheckOccupationStatus","true")}function VFSPSCreditMonthsEmployerDropDown(e){var SearchString="[List Of Values.Type] = 'VF_WIZARD_MONTHS' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Com Financial Profile","VF Months with Current Employer","LOV","",SearchString,"Siebel","")}function VFSPSCreditAdressMonthsTitleDropDown(e){var SearchString="[List Of Values.Type] = 'VF_WIZARD_MONTHS' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Com Financial Profile","VF Current Months at Address","LOV","",SearchString,"Siebel","")}function VFSPSCreditResidentDropDown(e){var SearchString="[List Of Values.Type] = 'VF_RESIDENTIAL_STATUS' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Com Financial Profile","Own or Rent","LOV","",SearchString,"Siebel","VFSPSEnableSubmitButton")}function VFSPSCreditJobTitleDropDown(e){var SearchString="[List Of Values.Type] = 'VF_POSITION_OF_APPLICANT' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Com Financial Profile","VF Position of Applicant","LOV","",SearchString,"Siebel","")}VFSPSCreditCheckPR.prototype.EndLife=function(){SiebelAppFacade.VFSPSCreditCheckPR.superclass.EndLife.apply(this,arguments);SiebelApp.EventManager.cleanListners("VFSPSCreditCheckEmployementStatus");SiebelApp.EventManager.cleanListners("VFSPSCreditCheckOccupationStatus");SiebelApp.EventManager.cleanListners("VFSPSCreditCheckCurrentAddress")};function VFSPSTogglePreviousAddress(){var ActiveView=SiebelApp.S_App.GetActiveView();if(ActiveView.GetName()=="VF Connection Wizard View - Credit Check â€“ TBUI"||ActiveView.GetName()=="VF SPS Credit Check Postpay Mobile View"){var AppletName=GetActiveCreditAppletName();var applet=sActiveView.GetApplet(AppletName);var bc=applet.GetBusComp();var sMonthsAddr=parseInt(bc.GetFieldValue("VF Current Months at Address"));var sYearsAddr=parseInt(bc.GetFieldValue("VF Current Years at Address"));var sTotalMonthsAddr=(sYearsAddr*12)+sMonthsAddr;var SearchString="[List Of Values.Type] = 'VF_CURR_ADDR_MTHS_TBUI'";var LOVVal=VFCustomSiebelInterface.GetPickListValues("",SearchString);if(sTotalMonthsAddr<LOVVal&&sTotalMonthsAddr!=0){$(".VFSPSCreditPreviousAddress").removeClass("VFSPSDisplayNone").addClass("VFSPSDisplayBlock");InputList.push("VF SPS Prev Street Number","VF SPS Prev Street Type","VF SPS Prev Street Name","VF SPS Prev Postal Code","VF SPS Prev Suburb","VF SPS State","VF SPS Prev Country");VFSPSEnableSubmitButton()}else{PreviousAddressList=["VF SPS Prev Street Number","VF SPS Prev Street Type","VF SPS Prev Street Name","VF SPS Prev Postal Code","VF SPS Prev Suburb","VF SPS State","VF SPS Prev Country"];jQuery.removeFromArray=function(value,arr){return jQuery.grep(arr,function(elem,index){return elem!==value})};for(i=0;i<PreviousAddressList.length;i++){InputList=jQuery.removeFromArray(PreviousAddressList[i],InputList)}$(".VFSPSCreditPreviousAddress").removeClass("VFSPSDisplayBlock").addClass("VFSPSDisplayNone");VFSPSEnableSubmitButton()}}}function VFSPSPrevStateDropDown(e){var SearchString="[List Of Values.Type] = 'STATE_ABBREV' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Com Financial Profile","VF Previous State","LOV","",SearchString,"Siebel","")}function VFSPSPrevCountryDropDown(e){var SearchString="[List Of Values.Type] = 'COUNTRY' AND [List Of Values.Active] = 'Y'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Com Financial Profile","VF Previous Country","LOV","",SearchString,"Siebel","")}function VFSPSPrevStreetTypeDropDown(e){var SearchString="[List Of Values.Type] = 'VF_ADDRESS_STREET_TYPE' AND [List Of Values.Active] = 'Y' AND [List Of Values.Parent]= 'Australia'";VFSPSUdateUIFrameWork.VFSPSShowPicklistValues("VF Com Financial Profile","VF Previous Street Type","LOV","",SearchString,"Siebel","")}function VFSPSEnableSubmitButton(){if(loadedapplet==1){var CreditTopFormFieldsEmpty=false;var InputListLength=InputList.length;var applet=sActiveView.GetApplet("VF SPS Credit Legal Disclaimer Applet");if(applet==null||applet==""||typeof(applet)=="undefined"){applet=sActiveView.GetApplet("VF SPS Credit Legal Disclaimer Applet RO")}for(var i=0;i<InputListLength;i++){var input=$("input[name='"+appControls[InputList[i]].GetInputName()+"']");if(input.val()==""){CreditTopFormFieldsEmpty=true;input.removeClass("VFSDefaultBorderColour").addClass("VFSTextFilledBorderColour")}else{input.removeClass("VFSTextFilledBorderColour").addClass("VFSDefaultBorderColour")}}if(CreditTopFormFieldsEmpty==false&&$(".VFSPSSavebuttonCredit").hasClass("VFSPSDisplayNone")&&$('.VFSPSCreditCheckIdentifierField > input[type="checkbox"]').is(":checked")){$(".VFSPSSubmitButtons > button").addClass("VFSPSPlaybarNextBtnEnabled").removeClass("VFSPSPlaybarNextBtnDisabled")}else{$(".VFSPSSubmitButtons > button").addClass("VFSPSPlaybarNextBtnDisabled").removeClass("VFSPSPlaybarNextBtnEnabled")}applet.DoExecuteUIUpdate()}}return VFSPSCreditCheckPR}());return"SiebelAppFacade.VFSPSCreditCheckPR"})};
if(typeof(SiebelAppFacade.VFSPSDealerCodeUpdateAppletPR)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.VFSPSDealerCodeUpdateAppletPR");define("siebel/custom/VFSPSDealerCodeUpdateAppletPR",["order!3rdParty/jqGrid/current/js/i18n/grid.locale-en","order!3rdParty/jqGrid/current/js/jquery.jqGrid.min","order!3rdParty/jqgrid-ext","order!siebel/phyrenderer"],function(){SiebelAppFacade.VFSPSDealerCodeUpdateAppletPR=(function(){function VFSPSDealerCodeUpdateAppletPR(pm){SiebelAppFacade.VFSPSDealerCodeUpdateAppletPR.superclass.constructor.call(this,pm)}SiebelJS.Extend(VFSPSDealerCodeUpdateAppletPR,SiebelAppFacade.PhysicalRenderer);VFSPSDealerCodeUpdateAppletPR.prototype.ShowUI=function(){SiebelAppFacade.VFSPSDealerCodeUpdateAppletPR.superclass.ShowUI.call(this);var Input=SiebelApp.S_App.NewPropertySet();var Output=SiebelApp.S_App.NewPropertySet();Output=VFCustomSiebelInterface.CallBS("VF SPS TBUI Utilities","GetDealerCode",Input,{});var sDealerCode=Output.GetProperty("DC");var sLoginName=SiebelApp.S_App.GetUserName();$("#VFSPSUpdStrCodeCurrentDealerCode").html(sDealerCode);$("#VFSPSUpdStrCodeLoginName").html(sLoginName);VFSPSUpdStrReloadGrid()};VFSPSDealerCodeUpdateAppletPR.prototype.BindEvents=function(){SiebelAppFacade.VFSPSDealerCodeUpdateAppletPR.superclass.BindEvents.apply(this,arguments);$(".VFSPSUpdStrCode").delegate("#VFSPSUpdStrCodeNewDealerCode","input",{ctx:this},VFSPSUpdStrSearchGrid);$(".VFSPSUpdStrCode").delegate(".VFSPSUpdStrCodeSearchDiv","click",{ctx:this},VFSPSUpdStrSearchGrid);$(".VFSPSUpdStrCode").delegate(".VFSPSCustomCancelButton","click",{ctx:this},VFSPSUpdStrCancel);$(".VFSPSUpdStrCode").delegate(".VFSPSCustomNextButton","click",{ctx:this},VFSPSUpdStrUpdate)};function VFSPSUpdStrCancel(e){SiebelApp.S_App.GotoView("VF SPS Home Page View","VF SPS Home Page BO")}function VFSPSUpdStrUpdate(e){var app=SiebelApp.S_App.GetActiveView().GetApplet("VF SPS Dealer Code Update Applet");if(app.CanInvokeMethod("EventMethodUpdateDealer")){app.InvokeMethod("EventMethodUpdateDealer")}else{console.log("Cannot Update Store Code")}SiebelApp.S_App.GotoView("VF SPS Home Page View","VF SPS Home Page BO")}function VFSPSUpdStrReloadGrid(e){$(".VFSPSCustomNextButton").addClass("VFSPSPlaybarNextBtnDisabled").removeClass("VFSPSPlaybarNextBtnEnabled");var BS="VF SPS TBUI Utilities";var Method="GetDealerList";var inps=SiebelApp.S_App.NewPropertySet();var out=VFCustomSiebelInterface.CallBS(BS,Method,inps,{});var dealerData=VFCustomSiebelInterface.SiebelMessageToArray(out);var recCount=dealerData.length>=10?10:dealerData.length;$(".VFSPSUpdStrCodeJQGrid").jqGrid({datatype:"local",data:dealerData,height:"100%",colNames:["Dealer Code","Dealer Name","Id"],colModel:[{name:"DealerCode",index:"DealerCode",width:100,height:200,sortable:false},{name:"DealerName",index:"DealerName",width:500,height:200,sorttype:false},{name:"Id",index:"Id",hidden:true}],search:true,multiselect:false,width:"100%",pager:"#VFSPSUpdStrGridPager",rowNum:recCount,onSelectRow:VFSPSPopulateDealerCode})}function VFSPSPopulateDealerCode(rowId,status,e){var rowData=$("#VFSPSUpdStrCodeJQGridTable").getRowData(rowId);VFSPSSetFieldValue("VF Employee Load","VF New Dealer Code",rowData["DealerCode"]);$("#VFSPSUpdStrCodeNewDealerCode").val(rowData["DealerCode"]);$(".VFSPSCustomNextButton").addClass("VFSPSPlaybarNextBtnEnabled").removeClass("VFSPSPlaybarNextBtnDisabled")}function VFSPSSetFieldValue(BCName,FieldName,FieldValue){var BS="VF SPS IDCaputre BS";var Method="SetDateFieldValues";var Inputs=SiebelApp.S_App.NewPropertySet();Inputs.SetProperty("BCName",BCName);Inputs.SetProperty("FieldName",FieldName);Inputs.SetProperty("FieldValue",FieldValue);Outputs=VFCustomSiebelInterface.CallBS(BS,Method,Inputs,{})}function VFSPSUpdStrSearchGrid(e){var grid=jQuery("#VFSPSUpdStrCodeJQGridTable");var postdata=grid.jqGrid("getGridParam","postData");var FilterCol="DealerCode";var filterVal=$("#VFSPSUpdStrCodeNewDealerCode").val();jQuery.extend(postdata,{filters:"",searchField:FilterCol,searchOper:"cn",searchString:filterVal});grid.jqGrid("setGridParam",{postData:postdata});grid.trigger("reloadGrid")}return VFSPSDealerCodeUpdateAppletPR}());return"SiebelAppFacade.VFSPSDealerCodeUpdateAppletPR"})};
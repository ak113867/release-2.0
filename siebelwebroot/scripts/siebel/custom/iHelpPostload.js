if(typeof(SiebelAppFacade.VFOpenUIiHelpPostLoad)=="undefined"){Namespace("SiebelAppFacade.VFOpenUIiHelpPostLoad");(function(){SiebelApp.EventManager.addListner("postload",OnPostload,this);function OnPostload(){try{if($("#iHelpCustom").length==0){$("#s_toolbar").children().append("<li id='iHelpCustom' role='button'>                            <button id='ImgiHelpCustom' style='margin-top: 2px;background: black;color: #FFF;'>iHelp</button>                        </li>");var BSName="EAI Siebel Adapter";var Method="Query";var Inps=SiebelApp.S_App.NewPropertySet();var Options={};var IntObjName="VHA Configuration List";var SearchSpec="[VHA Configuration List.Type]='VHA_DEALER_IHELP'";Inps.SetProperty("SearchSpec",SearchSpec);Inps.SetProperty("OutputIntObjectName",IntObjName);var Outs=VFCustomSiebelInterface.CallBS(BSName,Method,Inps,Options);var ResultSet=Outs.GetChildByType("SiebelMessage").GetChildByType("ListOfVHA Configuration List");var DataSetHeading=[];var DataSetStep={};var DataSetSubSteps={};var DataSetSubStepAns={};for(var i=0;i<ResultSet.childArray.length;i++){var PropArray=ResultSet.childArray[i].propArray;if(PropArray["String 1"]=="Heading"){DataSetHeading.push({"Type":PropArray["String 1"],"Title":PropArray["String 28"],"SubType":PropArray["Value"],"Sequence":PropArray["Num 01"]})}else{if(PropArray["String 1"]=="Step"){if(!(DataSetStep[PropArray["Value"]])){DataSetStep[PropArray["Value"]]=new Array()}DataSetStep[PropArray["Value"]].push({"Title":PropArray["String 28"],"SubType":PropArray["Value"],"Sequence":PropArray["Num 01"]})}else{if(PropArray["String 1"]=="SubStep"){if(!(DataSetSubSteps[PropArray["String 2"]+"_"+PropArray["Value"]])){DataSetSubSteps[PropArray["String 2"]+"_"+PropArray["Value"]]=new Array()}DataSetSubSteps[PropArray["String 2"]+"_"+PropArray["Value"]].push({"Title":PropArray["String 28"],"SubType":PropArray["Value"],"Sequence":PropArray["Num 01"],"StepId":PropArray["String 2"]})}else{if(PropArray["String 1"]=="SubStepAns"){if(!(DataSetSubStepAns[PropArray["String 2"]+"_"+PropArray["Value"]])){DataSetSubStepAns[PropArray["String 2"]+"_"+PropArray["Value"]]=new Array()}DataSetSubStepAns[PropArray["String 2"]+"_"+PropArray["Value"]].push({"Title":PropArray["String 28"],"SubType":PropArray["Value"],"Sequence":PropArray["Num 01"],"StepId":PropArray["String 2"]})}}}}}function GenerateiHelp(DataSetHeading,DataSetStep,DataSetSubSteps,DataSetSubStepAns){var iHelpContent="";DataSetHeading=SortJsonArray(DataSetHeading);for(var i=0;i<DataSetHeading.length;i++){iHelpContent+=GenerateiHelpTitleAndContent(DataSetHeading[i].SubType,DataSetHeading[i].Title,DataSetStep,DataSetSubSteps,DataSetSubStepAns)}return("<div id='iHelpList'>"+iHelpContent+"</div>")}function GenerateiHelpTitleAndContent(HeadingType,Caption,DataSetStep,DataSetSubSteps,DataSetSubStepAns){var Title="<h3>"+Caption+"</h3>";var Content=DataSetStep[HeadingType];var ContentDiv="";if(Content){Content=SortJsonArray(Content);for(var j=0;j<Content.length;j++){ContentDiv+="<div>"+Number(j+1)+". "+Content[j].Title+GenerateSubSteps(HeadingType,"Step_"+Content[j].Sequence+"_"+HeadingType,DataSetSubSteps,DataSetSubStepAns)+"</div>"}}return Title+"<div>"+ContentDiv+"</div>"}function GenerateSubSteps(HeadingType,StepId,DataSetSubSteps,DataSetSubStepAns){var ContentDiv="";var SubSteps=DataSetSubSteps[StepId];console.log(SubSteps);if(SubSteps){SubSteps=SortJsonArray(SubSteps);for(var i=0;i<SubSteps.length;i++){ContentDiv+="<li>"+SubSteps[i].Title+GenerateSubStepAns(SubSteps[i].StepId+"_SubStep_"+SubSteps[i].Sequence+"_"+HeadingType,DataSetSubStepAns)+"</li>"}}return ContentDiv==""?"":"<ol>"+ContentDiv+"</ol>"}function GenerateSubStepAns(StepId,DataSetSubStepAns){console.log(StepId);var ContentDiv="";var SubStepsAns=DataSetSubStepAns[StepId];if(SubStepsAns){SubStepsAns=SortJsonArray(SubStepsAns);for(var i=0;i<SubStepsAns.length;i++){ContentDiv+="<li>"+SubStepsAns[i].Title+"</li>"}}return ContentDiv==""?"":"<ol>"+ContentDiv+"</ol>"}function SortJsonArray(JsonArray){var newJsonArray=new Array();var arrayLength=JsonArray.length;for(var j=0;j<arrayLength;j++){newJsonArray[j]=j}for(var i=0;i<arrayLength;i++){var curr=JsonArray[i];newJsonArray[Number(curr.Sequence)-1]=curr}return newJsonArray}}$("#iHelpCustom").undelegate();$("#iHelpCustom").delegate("button#ImgiHelpCustom","click",{},function(e){if($("#iHelpPopUp").length==0){$("body").append("<div id='iHelpPopUp' style='display:none'></div>");$("#iHelpPopUp").append(GenerateiHelp(DataSetHeading,DataSetStep,DataSetSubSteps,DataSetSubStepAns))}$("#iHelpPopUp").dialog({title:"iHelp",height:"auto",width:600,modal:false,position:{my:"right top",at:"right top",of:window}});$("#iHelpList").accordion({collapsible:true,heightStyle:"content",active:false})})}catch(e){console.log(e)}finally{}}}())};
if(typeof(SiebelAppFacade.VHADashboardBSOffersAppletPR)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.VHADashboardBSOffersAppletPR");define("siebel/custom/VHADashboardBSOffersAppletPR",["order!siebel/jqgridrenderer"],function(){SiebelAppFacade.VHADashboardBSOffersAppletPR=(function(){function VHADashboardBSOffersAppletPR(pm){SiebelAppFacade.VHADashboardBSOffersAppletPR.superclass.constructor.call(this,pm)}SiebelJS.Extend(VHADashboardBSOffersAppletPR,SiebelAppFacade.JQGridRenderer);VHADashboardBSOffersAppletPR.prototype.ShowUI=function(){SiebelAppFacade.VHADashboardBSOffersAppletPR.superclass.ShowUI.call(this);var pm=this.GetPM();var AppletId=pm.Get("GetFullId");var ThisId=pm.Get("GetId");var parentDiv=$("#"+AppletId);parentDiv.addClass("VHAChangeWidth");var ElementChangeParent=$(".VHAChangeWidth");ElementChangeParent.addClass("VHAChangeWidth800px");ElementChangeParent.parent().addClass("VHAChangeWidth800px");ElementChangeParent.parent().parent().addClass("VHAChangeWidth800px");ElementChangeParent.parent().parent().parent().css("width","auto");$("#s_"+AppletId+"_div").addClass("VHAChangeWidth800px");$("#gview_VHABundleSaveTable").addClass("VHAChangeWidth800px");$("#gbox_VHABundleSaveTable").addClass("VHAChangeWidth800px");var GridView=$("#gview_VHABundleSaveTable");GridView.children(".ui-jqgrid-hdiv").addClass("VHAChangeWidth800px");GridView.children(".ui-jqgrid-bdiv").addClass("VHAChangeWidth800px");var title=$(".VHAChangeWidth").parent().parent().siblings(".ui-dialog-titlebar");title.children().eq(0).addClass("PopupTitleStyle");if(!$("#popupline").length){title.after('<div id="popupline"><hr style="border-color:#D9000D"></div>')}title.children(".ui-button").children(".ui-icon-closethick").addClass("closebutton");$("#VHABundleSave .s-ico").hide();var recordSet=pm.Get("GetRecordSet");childcount=recordSet.length;var ArrayDAta=new Array();for(i=0;i<childcount;i++){var tempArray1=new Array();tempArray1["MSISDN"]=recordSet[i]["MSISDN"];tempArray1["Previous Discount"]=recordSet[i]["Current PD"];tempArray1["Previous Eligible Plan"]=recordSet[i]["Current Rate Plan"];tempArray1["Target Plan Eligibility"]=recordSet[i]["Eligible for PD"];tempArray1["Target Discount"]=recordSet[i]["New PD"];tempArray1["Target Discount Inc GST"]=recordSet[i]["New PD Discount IncGST"];tempArray1["Target Discount Ex GST"]=recordSet[i]["New PD Discount"];tempArray1["Target Plan"]=recordSet[i]["New Plan"];ArrayDAta.push(tempArray1)}VHADashboardBSOffersIC(ArrayDAta);$(".closebutton").on("click",function(){var appletName=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetName();if(appletName=="VHA Dashboard Bundle Save Offers Popup Applet"){pm.ExecuteMethod("InvokeMethod","CloseApplet")}})};function VHADashboardBSOffersIC(ArrayDAta){$("#VHABundleSaveTable").jqGrid({datatype:"local",height:150,data:ArrayDAta,gridview:true,rowNum:5,pager:"#BundleSavePager",loadonce:true,viewrecords:true,columnsresize:true,colNames:["MSISDN","Previous Discount","Previous Eligible Plan","Target Plan Eligibility","Target Discount{%}","Target Discount Inc GST{$}","Target Discount Ex GST{$}","Target Plan"],colModel:[{name:"MSISDN",index:"MSISDN",width:100},{name:"Previous Discount",index:"Previous Discount",width:100},{name:"Previous Eligible Plan",index:"Previous Eligible Plan",width:100},{name:"Target Discount",index:"Target Discount",width:100},{name:"Target Plan Eligibility",index:"Target Plan Eligibility",width:100},{name:"Target Discount Inc GST",index:"Target Discount Inc GST",width:100},{name:"Target Discount Ex GST",index:"Target Discount Ex GST",width:100},{name:"Target Plan",index:"Target Plan",width:100}]})}VHADashboardBSOffersAppletPR.prototype.BindData=function(bRefresh){SiebelAppFacade.VHADashboardBSOffersAppletPR.superclass.BindData.apply(this,arguments);var pm=this.GetPM();var recordSet=pm.Get("GetRecordSet");childcount=recordSet.length;var ArrayDAta=new Array();for(i=0;i<childcount;i++){var tempArray1=new Array();tempArray1["MSISDN"]=recordSet[i]["MSISDN"];tempArray1["Previous Discount"]=recordSet[i]["Current PD"];tempArray1["Previous Eligible Plan"]=recordSet[i]["Current Rate Plan"];tempArray1["Target Plan Eligibility"]=recordSet[i]["Eligible for PD"];tempArray1["Target Discount"]=recordSet[i]["New PD"];tempArray1["Target Discount Inc GST"]=recordSet[i]["New PD Discount IncGST"];tempArray1["Target Discount Ex GST"]=recordSet[i]["New PD Discount"];tempArray1["Target Plan"]=recordSet[i]["New Plan"];ArrayDAta.push(tempArray1)}$("#VHABundleSaveTable").clearGridData();$("#VHABundleSaveTable").jqGrid("setGridParam",{data:ArrayDAta});$("#VHABundleSaveTable").trigger("reloadGrid")};VHADashboardBSOffersAppletPR.prototype.BindEvents=function(){SiebelAppFacade.VHADashboardBSOffersAppletPR.superclass.BindEvents.call(this)};VHADashboardBSOffersAppletPR.prototype.EndLife=function(){SiebelAppFacade.VHADashboardBSOffersAppletPR.superclass.EndLife.call(this);$(".PopupTitleStyle").removeClass("PopupTitleStyle");$("#popupline").remove();$(".closebutton").removeClass("closebutton");$('div[name="popup"]').removeClass("VHAChangeWidth800px")};return VHADashboardBSOffersAppletPR}());return"SiebelAppFacade.VHADashboardBSOffersAppletPR"})};
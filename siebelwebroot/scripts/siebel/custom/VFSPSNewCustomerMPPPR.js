if(typeof(SiebelAppFacade.VFSPSNewCustomerMPPPR)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.VFSPSNewCustomerMPPPR");define("siebel/custom/VFSPSNewCustomerMPPPR",["order!siebel/jqgridrenderer"],function(){SiebelAppFacade.VFSPSNewCustomerMPPPR=(function(){function VFSPSNewCustomerMPPPR(pm){SiebelAppFacade.VFSPSNewCustomerMPPPR.superclass.constructor.call(this,pm)}SiebelJS.Extend(VFSPSNewCustomerMPPPR,SiebelAppFacade.JQGridRenderer);VFSPSNewCustomerMPPPR.prototype.Init=function(){SiebelAppFacade.VFSPSNewCustomerMPPPR.superclass.Init.apply(this,arguments);SiebelApp.EventManager.cleanListners("VFSPSMPPEditMMPPopulateValue");SiebelApp.EventManager.addListner("VFSPSMPPEditMMPPopulateValue",VFSPSMPPEditMMPPopulateValue,this)};VFSPSNewCustomerMPPPR.prototype.ShowUI=function(){SiebelAppFacade.VFSPSNewCustomerMPPPR.superclass.ShowUI.apply(this,arguments);var pm=this.GetPM();var recordSet=pm.Get("GetRecordSet");var recordLength=recordSet.length;if(recordLength){for(var index=0;index<recordLength;index++){$(".VFSPSMPPPlanDetailsParDiv").append(GetParentTielContainer(index));PopulateTileData(index,recordSet[index])}}else{}};function PopulateTileData(index,recordSet){if(recordSet["VF Contract Months Readonly Calc"]=="N"){var template=$("#VFSPSMPPEditTileTemplate").html();$("#VFSPSMPPTileParId"+index).append(template);$("#VFSPSMPPTileParId"+index).attr("OrderLineItemId",recordSet["Order Line Id"]);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPTileEditTitleText").html(recordSet["Plan"]);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPEditDetailsDevice").html(recordSet["Device Description"]);$("#VFSPSMPPTileParId"+index+" .VFSPSMPPEditMMPMonthValue").val(recordSet["MPP Contract Months"]).attr("OrderItemId",recordSet["Order Line Id"]).attr("MPPRowId",recordSet["Id"]);$("#VFSPSMPPTileParId"+index+" .VFSPSMPPEditMMPMonthImg").attr("MPPContractIndex",index);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPEditDetailsRCC").html("$ "+recordSet["MPP RCC F"]);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPEditDetailsMPP").html("$ "+recordSet["MPP Estimated Monthly Amt"])}else{var template=$("#VFSPSMPPTileTemplate").html();$("#VFSPSMPPTileParId"+index).append(template);$("#VFSPSMPPTileParId"+index).attr("OrderLineItemId",recordSet["Order Line Id"]);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPTileTitleText").html(recordSet["Plan"]);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPDetailsDevice").html(recordSet["Device Description"]);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPDetailsMobile").html(recordSet["MSISDN for Connection"]);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPDetailsPlanTerm").html(recordSet["MPP Contract Months"]);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPDetailsIMEI").html(recordSet["IMEI for Connection"]);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPDetailsRCC").html("$ "+recordSet["MPP RCC F"]);$("#VFSPSMPPTileParId"+index+" #VFSPSMPPDetailsMPP").html("$ "+recordSet["MPP Estimated Monthly Amt"])}}function GetParentTielContainer(index){return"<div id='VFSPSMPPTileParId"+index+"' class='VFSPSMPPTileParDynDiv'></div>"}VFSPSNewCustomerMPPPR.prototype.BindEvents=function(){SiebelAppFacade.VFSPSNewCustomerMPPPR.superclass.BindEvents.apply(this,arguments);$(".VFSPSMPPParentDiv").delegate(".VFSPSMPPPlanTileTitleDiv,.VFSPSMPPPlanEditTileTitleDiv","click",{ctx:this},VFSPSExpandPlanDetails);$(".VFSPSMPPParentDiv").delegate(".VFSPSMPPEditMMPMonthImg","click",{ctx:this},VFSPSNewCustomerMPPShowMPPMonths)};function VFSPSExpandPlanDetails(e){if($(this).parent().hasClass("VFSPSMPPPlanTileInActive")){$(this).parent().removeClass("VFSPSMPPPlanTileInActive").addClass("VFSPSMPPPlanTileActive")}else{$(this).parent().removeClass("VFSPSMPPPlanTileActive").addClass("VFSPSMPPPlanTileInActive")}}function VFSPSNewCustomerMPPShowMPPMonths(e){var MPPRecordIndex=$(this).attr("MPPContractIndex");var SearchString="[List Of Values.Type] = 'VF_MPP_CONTRACT_MONTHS' AND [List Of Values.Active] = 'Y'";var PicklistValues=VFCustomSiebelInterface.GetPickListValues("",SearchString);var selector="#VFSPSMPPTileParId"+MPPRecordIndex+" .VFSPSMPPEditMMPMonthValue";$(".VFSPSMPPEditMMPMonthValueActive").removeClass("VFSPSMPPEditMMPMonthValueActive");$(selector).addClass("VFSPSMPPEditMMPMonthValueActive").attr("MPPRecordIndex",MPPRecordIndex);VFSPSUdateUIFrameWork.VFSPSShowPicklistValues(selector,"",PicklistValues,"","","HTML","VFSPSMPPEditMMPPopulateValue")}function VFSPSMPPEditMMPPopulateValue(){var OrderItemId=$(".VFSPSMPPEditMMPMonthValueActive").attr("OrderItemId");var MPPRowId=$(".VFSPSMPPEditMMPMonthValueActive").attr("MPPRowId");var MPPMonths=$(".VFSPSMPPEditMMPMonthValueActive").val();var recrodIndex=$(".VFSPSMPPEditMMPMonthValueActive").attr("MPPRecordIndex");console.log("OrderItemId "+OrderItemId);console.log("MPPRowId "+MPPRowId);var inps=SiebelApp.S_App.NewPropertySet();inps.SetProperty("MPPRowId",MPPRowId);inps.SetProperty("MPPMonths",MPPMonths);var outs=VFCustomSiebelInterface.CallBS("VF SPS TBUI Utilities","UpdateMPPMonth",inps,{});if(outs.GetProperty("OrderFound")=="Found"){$("#VFSPSMPPTileParId"+recrodIndex+" #VFSPSMPPEditDetailsRCC").html(outs.GetProperty("MPPRCC"));$("#VFSPSMPPTileParId"+recrodIndex+" #VFSPSMPPEditDetailsMPP").html(outs.GetProperty("MPPMonPay"))}$(".VFSPSMPPEditMMPMonthValueActive").removeClass("VFSPSMPPEditMMPMonthValueActive")}return VFSPSNewCustomerMPPPR}());return"SiebelAppFacade.VFSPSNewCustomerMPPPR"})};
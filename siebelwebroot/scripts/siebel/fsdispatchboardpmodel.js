/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.fsDispatchBoardPM=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.fsDispatchBoardPM"),define("siebel/fsdispatchboardpmodel",["siebel/ganttpmodel"],function(){return SiebelAppFacade.fsDispatchBoardPM=function(){function q(){SiebelAppFacade.fsDispatchBoardPM.superclass.constructor.apply(this,arguments)}function R(e){return M[e]}function U(e,t,n,r){var i=0,s;if(e==="RefreshGantt")i=this.Get("PanesToRefresh"),t.SetProperty("PanesToRefresh",i),t.SetProperty("TST",this.Get("TST")),r.CancelOperation=!1;else if(e==="ShowPopup")i|=2,i|=4,i|=16,this.SetProperty("PanesToRefresh",i),t.SetProperty("PanesToRefresh",i),r.CancelOperation=!1;else if(e==="PopulateScoreColumn"||e==="PopulateDistanceColumn"||e==="PopulateWirelessColumn")i|=2,i|=4,i|=16,this.SetProperty("PanesToRefresh",i),s=this.Get("Resource Id"),t.SetProperty("SelectedRow",s),t.SetProperty("PanesToRefresh",i),r.CancelOperation=!1;else if(e==="InvokeOperation"){var o="",u="";u=String(t.GetProperty("operation")),u==="ExtendShrink"?(o=String(t.GetProperty("booking Id")),t.SetProperty("Activity Id",o)):u==="DragnDrop"&&(DragDrop_Cancel="",DragDrop_Cancel=String(t.GetProperty("DragDropCancel")),DragDrop_Cancel==="true"?r.CancelOperation=!0:r.CancelOperation=!1)}else r.CancelOperation=!1}function z(e,t,n,r){var i=36e5,s=24,o,u,a,f=new Date;for(o=1;o<8;o++){if(f.format("EEEE")===t){e=f;break}f=new Date(e.getTime()+s*i*o)}r=e.getDay()+",";for(o=1;o<n;o++)f=="Invalid Date"?(a=new Date(e.getTime()+s*i*o),r+=a.getDay()+","):(o==1?u=e.format("MM/dd/yyyy"):u=a.format("MM/dd/yyyy"),a=new Date(e.getTime()+s*i*o),u==a.format("MM/dd/yyyy")&&a.setTime(a.getTime()+i),r+=a.getDay()+",");F=r}function W(e){if(e.GetValue()=="EmpUtilization"){var t={},n=this.Get("ResEvents");this.SetProperty("ResEvents",t),this.SetProperty("ResEventsBak",n)}}function X(e){if(e.GetValue()=="EmpUtilization"){var t=this.Get("ResEvents"),n=this.Get("ResEventsBak");this.SetProperty("ResEvents",n),this.SetProperty("ResScheduleEvents",t)}}function V(){var e,t,n,i,s;s=this.Get("InEvent"),s==1&&this.SetProperty("NotifyTSButtonClk","TRUE"),i=String(this.Get("NotifyTSButtonClk")),i!="TRUE"&&(e=String(this.Get(f)),t=String(this.Get(l)),n=t+"/"+e,n==="/"&&(n="Day/Hour"),this.SetProperty(r,I[n])),this.SetProperty("NotifyTSButtonClk","")}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=e.get("SWE_GANTT_DAYINFO"),n=e.get("SWE_GANTT_START_DATE"),r=e.get("SWE_GANTT_TIME_SCALE"),i=e.get("SWE_GANTT_STARTMILLIS"),s=e.get("SWE_GANTT_ACTIVITY_START_TIME"),o=e.get("SWE_GANTT_ACTIVITY_END_TIME"),u=e.get("SWE_GANTT_ACTIVITY_NO_DAYS_IN_WEEK"),a=e.get("SWE_GANTT_ACTIVITY_WEEK_DAY_START"),f=e.get("SWE_FS_DISPATCHBOARD_ACTIVITY_MINOR_TIME_SCALE"),l=e.get("SWE_FS_DISPATCHBOARD_ACTIVITY_MAJOR_TIME_SCALE"),c=e.get("SWE_GANTT_BOTTOMAXIS"),h=e.get("SWE_GANTT_NOOFHRS"),p=e.get("SWE_GANTT_ENDMILLIS"),d=e.get("SWE_GANTT_DAY_HOUR"),v=e.get("SWE_GANTT_DAY_TWOHOUR"),m=e.get("SWE_GANTT_DAY_DAY_FOURHOUR"),g=e.get("SWE_GANTT_DAY_DAY_SIXHOUR"),y=e.get("SWE_GANTT_DAY_DAY_SEVENHOUR"),b=e.get("SWE_GANTT_DAY_DAY_EIGHTHOUR"),w=e.get("SWE_GANTT_DAY_DAY_HALFHOUR"),E=e.get("SWE_GANTT_DAY_DAY_QUARTERHOUR"),S=e.get("SWE_GANTT_DAY_DAYPART"),x=e.get("SWE_GANTT_WEEK_DAY_DAYPART"),T=e.get("SWE_GANTT_MONTH_DOW_DAYPART"),N=e.get("SWE_GANTT_WEEK_DAY"),C=e.get("SWE_GANTT_MONTH_DAY"),k=e.get("SWE_GANTT_YEAR_MONTH"),L=e.get("SWE_GANTT_YEAR_WEEK"),A=e.get("SWE_GANTT_MONTH_WEEK"),O=e.get("SWE_GANTT_MONTH_DOW"),M={1:7,2:1,4:1,32:35,64:31,128:7,256:35,512:1,1024:1,2048:1,4096:1,8192:366,16384:366,32768:35,131072:1,262144:1,524288:1},_={1:6,2:0,4:0,32:28,64:30,128:6,256:28,512:0,1024:0,2048:0,4096:0,8192:365,16384:365,32768:28,131072:0,262144:0,524288:0},D={4096:.25,2048:.5,4:1,512:2,1024:4,131072:6,262144:7,524288:8},P=e.get("SWE_GANTT_RENDER_INFO"),H=e.get("SWE_GANTT_ACTIVITY_EARLIEST_LATEST_VIOLATION"),B=e.get("SWE_GANTT_LOAD_ACTIVITY_INTO_ABS"),j=e.get("SWE_GANTT_SERVICE_REGION_ID"),F="",I={};return I["Year/Month"]=8192,I["Year/Week"]=16384,I["Month/Week"]=32768,I["Month/Day"]=64,I["Week/Day"]=1,I["Day/8 Hours"]=524288,I["Day/7 Hours"]=262144,I["Day/6 Hours"]=131072,I["Day/4 Hours"]=1024,I["Day/2 Hours"]=512,I["Day/Hour"]=4,I["Day/Half Hour"]=2048,I["Day/Quarter Hour"]=4096,SiebelJS.Extend(q,SiebelAppFacade.GanttPresentationModel),q.prototype.Init=function(){SiebelAppFacade.fsDispatchBoardPM.superclass.Init.call(this),this.AddProperty(s,""),this.AddProperty(o,""),this.AddProperty(u,""),this.AddProperty(a,""),this.AddProperty(f,""),this.AddProperty(l,""),this.AddProperty(n,""),this.AddProperty(t,""),this.AddProperty(c,""),this.AddProperty(r,""),this.AddProperty(h,""),this.AddProperty(i,""),this.AddProperty(p,""),this.AddProperty(P,""),this.AddMethod("InvokeMethod",U,{sequence:!0,scope:this}),this.AddProperty("ResScheduleEvents",""),this.AddProperty("ResEventsBak",""),this.AddProperty("Schedulerecordset",""),this.AddProperty("GANTTELSV",""),this.AddProperty("GANTTLOADACT",""),this.AddProperty("GANTTSRID",""),this.AddProperty("pmrecordset",""),this.AddProperty("NotifyTSButtonClk",""),this.AddProperty("isDispatchBoard","TRUE"),this.AddProperty("IsShowMoreBtnClicked","false"),this.AddMethod("prepareEventInfo",W,{scope:this,sequence:!0}),this.AddMethod("prepareEventInfo",X,{scope:this,sequence:!1}),this.AddMethod("setDefaults",V,{scope:this,sequence:!1}),this.AddProperty("GetPlaceholder",this.Get("GetFullId"))},q.prototype.createPeriod=function(e,f){var l,c,h,x,T,O,M,_=36e5,P=24,H,B="",j="",I="";l=new Date(this.Get(n));if(!l||!l instanceof Date)l=new Date;T=String(this.Get(u)),this.Get(u)?T=String(this.Get(u)):T=7,this.Get(a)?O=String(this.Get(a)):O=l.format("EEEE"),this.SetProperty("UserPrefWDS",this.Get(a)),H=R(Number(this.Get(r)));var q=D[Number(this.Get(r))];this.SetProperty("IsTotalHPagesChanged","Y");switch(Number(this.Get(r))){case d:case v:case m:case g:case y:case b:case w:case E:h=String(this.Get(s)),x=String(this.Get(o));for(var U=0;U<2;U++)h.charAt(U)!=":"&&(j+=h.charAt(U)),x.charAt(U)!=":"&&(I+=x.charAt(U));if(
Number(this.Get(r))==v){if(j!=""){var W=Number(j)%2==0?0:Number(j)%2;W&&(j=Number(j)-(2-W))}I!=""&&(W=Number(I)%2==0?0:Number(I)%2,W&&(I=Number(I)+(2-W)))}else if(Number(this.Get(r))==m){if(j!=""){var W=Number(j)%4==0?0:Number(j)%4;W&&(j=Number(j)-W)}I!=""&&(W=Number(I)%4==0?0:Number(I)%4,W&&(I=Number(I)+(4-W)))}else if(Number(this.Get(r))==g||Number(this.Get(r))==y||Number(this.Get(r))==b)if(q!=""&&q!="0"){if(j!=""){var W=Number(j)%q==0?0:Number(j)%q;W&&(j=Number(j)-W)}I!=""&&(W=Number(I)%q==0?0:Number(I)%q,W&&(I=Number(I)+(q-W)))}j==""&&(j=0),I==""&&(I=24,(Number(this.Get(r))==g||Number(this.Get(r))==y||Number(this.Get(r))==b)&&I%q!=0&&(W=Number(I)%q,W&&(I=Number(I)+(q-W)))),T!=""&&O!=""&&T!="0"?(l=new Date(this.Get(i)),c=new Date(this.Get(p)),z(l,O,T,B)):(this.SetProperty("StartDate",l),l.setDate(l.getDate()+e*H),l.setHours(0,0,0,0),T!=""&&O!=""&&T!="0"&&z(l,O,T,B),c=new Date(l.getTime()),c.setDate(l.getDate()+f*H-1),c.setHours(23,59,59,999)),Number(this.Get(r))==w?this.SetProperty("Scale_factor",2):Number(this.Get(r))==E?this.SetProperty("Scale_factor",4):Number(this.Get(r))==v?this.SetProperty("Scale_factor",.5):Number(this.Get(r))==m?this.SetProperty("Scale_factor",.25):Number(this.Get(r))==g||Number(this.Get(r))==b?this.SetProperty("Scale_factor",.25):Number(this.Get(r))==y?this.SetProperty("Scale_factor",.25):this.SetProperty("Scale_factor",1),this.SetProperty("StartTime",_*j),this.SetProperty("EndTime",_*I),this.SetProperty("TDays",24*_),this.SetProperty("AxisDuration",this.Get("EndTime")-this.Get("StartTime"));break;case S:M=this.Get(t)[0],setHoursFrom(l,M.ST),c=new Date(l.getTime()+f*P*_);break;case N:T!=""&&O!=""&&T!="0"?(l=new Date(this.Get(i)),c=new Date(this.Get(p)),z(l,O,T,B)):(l.setDate(l.getDate()+e*H),l.setHours(0,0,0,0),T!=""&&O!=""&&T!="0"&&z(l,O,T,B),c=new Date(l.getTime()),c.setDate(l.getDate()+f*H-1),c.setHours(23,59,59,999)),this.SetProperty("StartTime","0"),this.SetProperty("EndTime",24*_-1),this.SetProperty("TDays",24*_),this.SetProperty("AxisDuration",24*_-1);break;case C:T!=""&&O!=""&&T!="0"?(l=new Date(this.Get(i)),c=new Date(this.Get(p)),z(l,O,T,B)):(l.setDate(l.getDate()+e*H),l.setHours(0,0,0,0),T!=""&&O!=""&&T!="0"&&z(l,O,T,B),c=new Date(l.getTime()),c.setDate(l.getDate()+f*H-1),c.setHours(23,59,59,999)),this.SetProperty("StartTime","0"),this.SetProperty("EndTime",24*_-1),this.SetProperty("TDays",24*_),this.SetProperty("AxisDuration",24*_-1);break;case k:l.setDate(l.getDate()+e*H),l.setHours(0,0,0,0),c=new Date(l.getTime()+f*_*P*364),c.setHours(23,59,59,999);break;case L:l.setDate(l.getDate()+e*H),l.setHours(0,0,0,0),c=new Date(l.getTime()+f*_*P*364),c.setHours(23,59,59,999);break;case A:l.setDate(l.getDate()+e*H),l.setHours(0,0,0,0),c=new Date(l.getTime()),c.setDate(l.getDate()+f*H-1),c.setHours(23,59,59,999);break;default:l.setDate(l.getDate()+e*H),l.setHours(0,0,0,0),c=new Date(l.getTime()),c.setDate(l.getDate()+f*H-1),c.setHours(23,59,59,999)}this.SetProperty(i,l.getTime()),this.SetProperty(p,c.getTime()),this.SetProperty(u,T),this.SetProperty("FinalWeekDays",F),(this.Get(r)=="4"||this.Get(r)=="512"||this.Get(r)=="1024"||this.Get(r)=="1"||this.Get(r)=="64"||this.Get(r)=="2048"||this.Get(r)=="4096"||this.Get(r)=="131072"||this.Get(r)=="262144"||this.Get(r)=="524288")&&this.calcDayLeft()},q.prototype.calcDayLeft=function(){var e=new Date(this.Get(i)),t=new Date(this.Get(p)),n,s=this.Get("TDays"),o=0,a,f=36e5,l=0,c,h={},d=this.Get(r),v=Number(this.Get(u)),m=R(Number(this.Get(r))),g=this.Get("datePaddingMap"),y=new Date,b=g[Number(this.Get(r))],w=0,E=Number(b)+1;if(d==1)E=Number(b)*Number(v)+1,n=1/(this.Get("TotalHPages")>0?this.Get("TotalHPages"):1),v&&(n/=v);else if(d==64){c=new Date(this.Get(i));while(c.getTime()<=t.getTime())F.indexOf(c.getDay())!==-1&&l++,c.setTime(c.getTime()+s);l&&(n=1/l)}else n=1/(this.Get("TotalHPages")>0?this.Get("TotalHPages"):1);while(e.getTime()<=t.getTime())F.indexOf(e.getDay())!==-1&&(h[e.format("MM/dd/yyyy")]=o,o+=n,a=e.format("MM/dd/yyyy"),w++,d==1?w==E&&(y=new Date(e)):w==E&&(y=new Date(e))),e.setTime(e.getTime()+s),a==e.format("MM/dd/yyyy")&&e.setTime(e.getTime()+f);this.SetProperty("DayLoc",h),this.SetProperty("PixelsPerUnit",n),this.SetProperty("paddingMiddleDayMillis",y.getTime()),this.SetProperty("StartDate",y),this.Get("EndTime")-this.Get("StartTime")>0&&this.SetProperty("miniFX",n/(this.Get("EndTime")-this.Get("StartTime")))},q.prototype.prepareUtillpage=function(e,t){var n=[];n=this.Get("ResScheduleEvents");if(typeof n=="object"){var r,i=this.Get("RecordSet"),s=i.length;if(e!==0)r=this.Get("Schedulerecordset");else{r=[];for(var o=0;o<s;o++)r.push($.extend({},i[o]))}this.SetProperty("RecordSet",r);var u=this.Get("ResEvents"),a=this.Get("ResScheduleEvents");this.SetProperty("ResEvents",a),SiebelAppFacade.fsDispatchBoardPM.superclass.prepareUtillpage.call(this,e,t);var f=this.Get("RecordSet");this.SetProperty("Schedulerecordset",f),this.SetProperty("ResEvents",u),this.SetProperty("RecordSet",i)}SiebelAppFacade.fsDispatchBoardPM.superclass.prepareUtillpage.call(this,e,t)},q}(),"SiebelAppFacade.fsDispatchBoardPM"}));

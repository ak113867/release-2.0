/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.TileLayoutPR=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.TileLayoutPR"),define("siebel/TileLayoutPR",["siebel/phyrenderer"],function(){return SiebelAppFacade.TileLayoutPR=function(){function h(e){var t;this.init=!0,this.SetBasicLayout=function(e){t=e},this.GetBasicLayout=function(){return t};var n;this.SetTileScrollDirection=function(e){n=e},this.GetTileScrollDirection=function(){return n};var r;this.SetContainer=function(e){r=e},this.GetContainer=function(){return r};var i;this.SetScrollAmount=function(e){i=e},this.GetScrollAmount=function(){return i};var s=0;this.SetTileHeight=function(e){s=e},this.GetTileHeight=function(){return s};var o=0;this.SetTileWidth=function(e){o=e},this.GetTileWidth=function(){return o};var u=0;this.SetContainerWidth=function(e){u=e},this.GetContainerWidth=function(){return u};var a=0;this.SetContainerHeight=function(e){a=e},this.GetContainerHeight=function(){return a};var f;this.SetIScrollObject=function(e){f=e},this.GetIScrollObject=function(e){return f},e.AddProperty("GetSelId",j),SiebelAppFacade.TileLayoutPR.superclass.constructor.call(this,e),SiebelApp.S_App.PluginBuilder.SetUIContext(this,p)}function p(e){return e&&e.GetUIType()===t.get("SWE_CTRL_RADIO")?this.GetContainer().find("[name*="+e.GetInputName()+"]"):null}function d(){this.GetContainer().closest(".siebui-applet-parent").is(":visible")?v.call(this):this.GetPM().Get("GetParentApplet")&&this.GetContainer().is(":visible")&&v.call(this)}function v(){var e=this.GetIScrollObject();e&&(e.infiniteElementHeight=$(e.infiniteElements).height(),e.infiniteHeight=e.infiniteLength*e.infiniteElementHeight,e.refresh())}function m(){var e=this.GetIScrollObject();e&&(e.destroy(),S.call(this))}function g(e,t,n){var r;return function(){var i=n||this,s=arguments,o=function(){r=null,e.apply(i,s)};clearTimeout(r),r=setTimeout(o,t)}}function y(){var e=this,t=this.GetPM(),n=e.GetContainer(),r=t.Get("IsResponsive")?n.parent().attr("data-scroll-direction"):n.attr("data-scroll-direction"),i,s,o;return r?o=r:(i=n.parent(".siebui-tile-container").outerWidth(!0)||0,s=e.GetTileWidth(),o=s>0&&i<=s*1.5?"Vertical":"Horizontal"),n=null,o}function b(e){var t=(y.call(this)||"").toLowerCase(),n=this.GetIScrollObject();if(!n||t==="horizontal"&&n.options.scrollX===!0&&n.options.scrollY===!1||t==="vertical"&&n.options.scrollX===!1&&n.options.scrollY===!0){e&&this.Resize(),t=n=null;return}var r=this.GetPM(),i=r.Get("GetRecordSet"),s=i?i.length:0,o=this.GetContainer(),u=o.find(".siebui-tile-list>.siebui-tile").eq(0).attr("id"),a=!1,f=!0;t==="horizontal"&&(a=!0,f=!1),this.SetTileScrollDirection(t),SiebelAppFacade.DecisionManager.IsTouch()||this.EnhanceScroller(),t==="horizontal"?(B.call(this,"#tile-left-scroll","#tile-right-scroll","ScrollPrevData","ScrollNextData",SCROLL_UP,"margin-left","marginLeft","mousedown"),B.call(this,"#tile-right-scroll","#tile-left-scroll","ScrollNextData","ScrollPrevData",SCROLL_DN,"margin-left","marginLeft","mousedown")):(B.call(this,"#tile-up-scroll","#tile-down-scroll","ScrollPrevData","ScrollNextData",SCROLL_UP,"","scrollTop","mousedown"),B.call(this,"#tile-down-scroll","#tile-up-scroll","ScrollNextData","ScrollPrevData",SCROLL_DN,"","scrollTop","mousedown")),this.SetFirstTileId.call(this,u,s),n.options.scrollX=a,n.options.scrollY=f,n.refresh(),n=o=r=i=null}function w(){return this.GetPM().Get("IsResponsive")?!this.GetContainer().parent().attr("data-scroll-direction"):!this.GetContainer().attr("data-scroll-direction")}function E(){var e=this.GetPM(),t=e.Get("GetControls"),n,r,i,s,o,u=SiebelApp.S_App.GetRequiredIndicator();for(var a in t)t.hasOwnProperty(a)&&(n=t[a],s=e.ExecuteMethod("IsRequired",n.GetName()),s&&(r=$('[name="'+n.GetInputName()+'"]')[0]||$("#"+n.GetInputName())[0],r&&(r=$(r),i=r.attr("aria-labelledby")||"",i&&(i=i.split(" ",1),o=i[0].replace("/","\\/"),this.GetContainer().children().find("#"+o).eq(0).after(u)))));t=n=r=u=null}function S(){function u(e,t){}var n=!0,r=!1,i=null,s=0,o="#"+this.GetPM().Get("GetFullId")+"_"+t.get("SWE_TILE_CONTAINER");this.GetTileScrollDirection().toLowerCase()==="horizontal"&&(r=!0,n=!1,SiebelApp.S_App.GetDirection()&&(s=this.GetContainer().find(".siebui-tile").width()-this.GetContainer().children("div.siebui-tile-list").width())),i=new IScroll(o,{infiniteElements:$(o).children("div.siebui-tile-list"),infiniteLimit:1,dataset:u,cacheSize:10,tap:!1,click:!1,disablePointer:!0,mouseWheel:!0,scrollX:r,scrollY:n,disableTouch:!1,ctx:this,startX:s,bindToWrapper:!0,momentum:!e.IsSmallScreen(),preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|SPAN|DIV|UL|LI|IMG|A|I|LABEL)$/}}),SiebelApp.S_App.GetDirection()&&this.GetTileScrollDirection().toLowerCase()==="horizontal"?i.scrollToElement($(o).find("div.siebui-tile").first()[0],0):i.scrollTo(0,0),i.options.scrollY&&(i.maxScrollY=-(i.scrollerHeight-i.wrapperHeight),i.wrapperHeight>=i.scrollerHeight&&(i.maxScrollY=0)),i.on("scrollEnd",T),e.IsSmallScreen()&&i.on("scrollStart",function(){$(".siebui-tile-list").children().hasClass("ui-draggable")&&$(".siebui-tile-list").children().draggable("disable")}),this.SetIScrollObject(i)}function x(e){var t=e.data.ctx,n=t.GetIScrollObject();n&&n.options.scrollY&&(n.refresh(),n.maxScrollY=-(n.scrollerHeight-n.wrapperHeight),n.wrapperHeight>=n.scrollerHeight&&(n.maxScrollY=0),Math.abs(n.maxScrollY)&&t.EnableScrollArrow($("#"+n.wrapper.id).find("#tile-down-scroll")))}function T(){$(".siebui-tile-list").children().hasClass("ui-draggable")&&e.IsSmallScreen()&&$(".siebui-tile-list").children().draggable("enable");var t=!1,n=0,r,i,s,o=this.options.ctx,u=parseInt(o.GetPM().Get("GetRecordSet").length),a=this.scroller.getBoundingClientRect();o.GetContainer().find("."+this.scroller.className+"").addClass("siebui-iscroll"),this.options.scrollX?(n=this.directionX,SiebelApp.S_App.GetDirection()&&(n=-n),n===0?n=this.distX>0?-1:1:n,SiebelApp.S_App.GetDirection()?t=n>0?this.x+this.scroller.offsetLeft>=0:-(this.x-this.scroller.offsetLeft)>=-this.maxScrollX:t=n>0?-(this
.x-this.scroller.offsetLeft)>=-this.maxScrollX:this.x+this.scroller.offsetLeft>=0,s=parseInt($("#"+this.scroller.firstChild.id).outerWidth(!0),10),r=Math.round(this.wrapperWidth/s),u>=r&&o.EnableScrollArrow($("#"+this.wrapper.id).find("#tile-left-scroll, #tile-right-scroll"))):(n=this.directionY,n===0?n=this.distY>0?-1:1:n,i=a.top>0?a.top:-a.top,t=n>0?parseInt(o.GetContainer().children("div.siebui-tile-list").offset().top+this.scrollerHeight-($("#"+this.wrapper.id).offset().top+this.wrapperHeight),10)<=0||this.maxScrollY>=this.y:this.y>=0,s=parseInt($("#"+this.scroller.firstChild.id).outerHeight(!0),10),r=Math.round(this.wrapperHeight/s),u>=r&&o.EnableScrollArrow($("#"+this.wrapper.id).find("#tile-up-scroll, #tile-down-scroll")));if(t&&!o.GetContainer().data("ScrollPending")){var f=o.GetPM(),l,c;SiebelApp.S_App.GetDirection()?(l="ScrollPrevData",c="ScrollNextData",SCROLL_UP=consts.get("PAG_SCROLL_DN"),SCROLL_DN=consts.get("PAG_SCROLL_UP"),n=-n):(l="ScrollNextData",c="ScrollPrevData",SCROLL_UP=consts.get("PAG_SCROLL_UP"),SCROLL_DN=consts.get("PAG_SCROLL_DN")),n>0&&f.ExecuteMethod("CanInvokeScrollMethod",l)?(o.GetContainer().data("ScrollPending",!0),f.OnControlEvent(consts.get("PHYEVENT_VSCROLL_LIST"),SCROLL_DN)):n<0&&f.ExecuteMethod("CanInvokeScrollMethod",c)?(o.GetContainer().data("ScrollPending",!0),f.OnControlEvent(consts.get("PHYEVENT_VSCROLL_LIST"),SCROLL_UP)):this.options.scrollX&&u>=r?(SiebelApp.S_App.GetDirection()&&(n=-n),n>0?SiebelApp.S_App.GetDirection()?($("#"+this.wrapper.id).find("#tile-left-scroll").addClass("siebui-tile-scroll-d"),$("#"+this.wrapper.id).find("#tile-right-scroll").removeClass("siebui-tile-scroll-d")):($("#"+this.wrapper.id).find("#tile-right-scroll").addClass("siebui-tile-scroll-d"),$("#"+this.wrapper.id).find("#tile-left-scroll").removeClass("siebui-tile-scroll-d")):SiebelApp.S_App.GetDirection()?($("#"+this.wrapper.id).find("#tile-right-scroll").addClass("siebui-tile-scroll-d"),$("#"+this.wrapper.id).find("#tile-left-scroll").removeClass("siebui-tile-scroll-d")):($("#"+this.wrapper.id).find("#tile-left-scroll").addClass("siebui-tile-scroll-d"),$("#"+this.wrapper.id).find("#tile-right-scroll").removeClass("siebui-tile-scroll-d"))):u>=r&&(SiebelApp.S_App.GetDirection()&&(n=-n),n>0?($("#"+this.wrapper.id).find("#tile-down-scroll").addClass("siebui-tile-scroll-d"),$("#"+this.wrapper.id).find("#tile-up-scroll").removeClass("siebui-tile-scroll-d")):($("#"+this.wrapper.id).find("#tile-up-scroll").addClass("siebui-tile-scroll-d"),$("#"+this.wrapper.id).find("#tile-down-scroll").removeClass("siebui-tile-scroll-d")))}}function N(){var e=!1,t=0,n=0,r,i,s,o,u,a=parseInt(this.GetPM().Get("GetRecordSet").length),f,l=this.GetContainer(),c=this.GetIScrollObject(),h=c.scroller.getBoundingClientRect();c.options.scrollX?(t=c.directionX,SiebelApp.S_App.GetDirection()&&(t=-t),t===0?t=c.distX>0?-1:1:t):(t=c.directionY,t===0?t=c.distY>0?-1:1:t),s=parseInt(this.GetScrollAmount(),10),s=s<0?-s:s;if(c.options.scrollX)u=parseInt($("#"+c.scroller.firstChild.id).outerWidth(!0),10),r=Math.round(c.wrapperWidth/u),c.x=t>0?c.x:0,o=s*u,SiebelApp.S_App.GetDirection()?t>0?n=c.wrapperWidth>o?-(c.scrollerWidth-c.wrapperWidth):-o:n=o>-c.x?-u:o- -c.x:c.x===0?n=c.wrapperWidth>o?-(c.scrollerWidth-c.wrapperWidth):-o:n=o>-c.x?0:o- -c.x;else{u=parseInt($("#"+c.scroller.firstChild.id).outerHeight(!0),10),r=Math.round(c.wrapperHeight/u),c.y=t>0?c.y:0,o=s*u;if(c.y===0){var p=Math.floor(this.GetContainer().width()/this.GetTileWidth())||1;n=-1*(s/p)*u}else n=o>-c.y?0:o- -c.y}c.options.scrollX?n=c.wrapperWidth>=c.scrollerWidth?0:n:n=c.wrapperHeight>=c.scrollerHeight?0:n;var d=this;setTimeout(function(){l.removeData("ScrollPending"),d.GetIScrollObject().enable(),l=null},100),c.options.scrollX?c.scrollTo(n,0):c.scrollTo(0,n),f=t>0?this.GetPM().Get("GetRecordSet").length-1-s:(this.GetPM().Get("GetRecordSet").length,10-s),f=parseInt(f,10),!this.GetPM().Get("MultiSelectColumn")&&!this.GetPM().Get("MultiSelectMode")&&(this.OnRowSelect(f),this.ShowSelection())}function C(e,t){var n=e.GetPM(),r,i;return SiebelApp.S_App.GetDirection()?(r="ScrollPrevData",i="ScrollNextData",SCROLL_UP=consts.get("PAG_SCROLL_DN"),SCROLL_DN=consts.get("PAG_SCROLL_UP"),t=-t):(r="ScrollNextData",i="ScrollPrevData",SCROLL_UP=consts.get("PAG_SCROLL_UP"),SCROLL_DN=consts.get("PAG_SCROLL_DN")),t>0&&n.ExecuteMethod("CanInvokeScrollMethod",r)?(n.OnControlEvent(consts.get("PHYEVENT_VSCROLL_LIST"),SCROLL_DN),!0):t<0&&n.ExecuteMethod("CanInvokeScrollMethod",i)?(n.OnControlEvent(consts.get("PHYEVENT_VSCROLL_LIST"),SCROLL_UP),!0):!1}function k(t,n){var r=this.GetPM(),i="",s="",o="",u=0,a=t.length,f=e.IsSmallScreen()&&a===0?this.GetBasicLayout():"",l=r.Get("IsResponsive")?r.Get("GetListId"):r.Get("GetFullId"),c=r.Get("GetScrollDir"),h=this.GetTileScrollDirection(),p=this.GetContainer().find(".siebui-tile-list"),d=r.Get("GetControls"),v=r.GetObjName();for(var m=0;m<n;m++)i=this.GetBasicLayout(),r.Get("IsResponsive")?(o=l.substr(0,l.length-1)+m,i=i.replace(l,o)):(o=l+"_tile_"+m,i=i.replace("tile_1",l+"_tile_"+m)),f+=i;c!==null&&!c?p.children().first().before(f):p.children().last().after(f);if(p.children().length===0)p.append(f);else while(n)c!==null&&!c?p.children().last().remove():p.children().first().remove(),n--;var g;s=p.children();if(e.IsSmallScreen()){v==="Entity_Funding_Source"?this.GetContainer().addClass("siebui-editable-all siebui-show-label-all"):r.Get("IsInQueryMode")?this.GetContainer().parent(".siebui-tile-container").addClass("siebui-editable-all siebui-show-label-all siebui-query"):this.GetContainer().parent(".siebui-tile-container").removeClass("siebui-editable-all siebui-show-label-all siebui-query");if(a===0){g=l+0,s.eq(0).removeAttr("id").attr("id",g).addClass("siebui-tile siebui-empty").attr("tabindex","-1").attr("data-rowid",1),s.eq(0).find(".siebui-tile-footer.siebui-edit").addClass("forcehide"),$("#"+l+"_tile_"+r.Get("GetSelection")).addClass("siebui-tile-selected");return}var y=s.find(".siebui-empty")[0];y!==undefined&&s.removeChild
(y)}r.Get("enableDragAndDropInList")&&!r.Get("IsInQueryMode")&&H.call(this,s,r),l=r.Get("IsResponsive")?l.substr(0,l.length-1):l+"_tile_";for(u=0;u<a;u++)g=l+u,s.eq(u).removeAttr("id").attr("id",g).addClass("siebui-tile").attr("tabindex","-1").attr("data-rowid",u+1);$("#"+l+"_tile_"+r.Get("GetSelection")).addClass("siebui-tile-selected");var b,w,E=r.Get("HideControls"),S=r.Get("ControlSubSet")||[];for(var x in d)if(d.hasOwnProperty(x)){b=this.GetUIWrapper(d[x]),w=b.GetEl(undefined,!0);if(w&&s.eq(0).find(w.eq(0)).length>0){e.IsSmallScreen()&&!p.hasClass("siebui-show-label-all")&&L.call(this,d[x].GetFieldName())&&w.closest(".siebui-fieldset").addClass("siebui-show-label"),b.ShowUI(),b.BindEvents();if(E&&d[x].GetFieldName()&&S.indexOf(x)===-1){var T=b.GetEl().closest(".siebui-value");T.length?T.addClass("forcehide"):b.GetEl().addClass("forcehide")}}}for(var x in d){var N=d[x],C=N.GetInputName();if(d.hasOwnProperty(x)&&N.GetUIType()===consts.get("SWE_CTRL_RADIO"))for(u=0;u<a;u++)p.children().eq(u).find("[name*="+C+"]").each(function(){$(this).removeAttr("name").attr("name",C+"_"+u)})}for(u=0;u<a;u++)SiebelAppFacade.TileLayoutPR.superclass.ShowSelection.call(this,u);this.SetFirstTileId(o,a),this.CacheState("CtrlInfo",{stateValue:{}})}function L(t){var n=this.GetPM(),r=n.ExecuteMethod("GetFieldDataType",t),i=["number","integer","currency","bool","date","utcdatetime"];return e.IndexOf(i,r)!==-1?!0:!1}function A(e,n,r){var i=!0;if(r){var s=r.GetProperty(t.get("SWE_RPC_PROP_RETURN_STATUS"));s==t.get("SWE_RPC_PROP_NEW_POPUP")&&(i=!1)}i&&(this.GetContainer().find(".siebui-tile-selected").addClass("siebui-editable"),v.call(this))}function O(){$("#s_"+this.GetPM().Get("GetFullId")+"_div").hasClass("siebui-commit-pending")||(this.GetContainer().find(".siebui-tile.siebui-editable").removeClass("siebui-editable"),v.call(this))}function M(e){$(e.target).parents(".siebui-tile").length&&!$(e.target).parents(".siebui-tile").hasClass("siebui-tile-selected")&&["I","A"].indexOf(e.target.tagName)==-1&&e.stopPropagation()}function _(e){var t=e.data.ctx.GetPM(),n=t.Get("focusOutBlurInfo")||{};e.type==="focusout"&&(n.focusout=!0,n.ele=e.target),e.type==="blur"&&(n.blur=!0),t.SetProperty("AllowBlur",$(this).hasClass("siebui-tile-selected")),t.SetProperty("focusOutBlurInfo",n)}function D(t){var n=t.data.ctx.GetPM(),r=t.target.getAttribute("type"),i=r==="checkbox"&&$(t.target).attr("name")===n.Get("GetPlaceholder")+n.Get("MultiSelectColumn");if(t.type==="touchstart"||t.type==="mousedown"&&!t.ctrlKey&&!i&&!t.shiftKey&&!n.Get("MultiSelectMode")){if(n.Get("enableDragAndDropInList")&&t.isDefaultPrevented()){$(t.target).is(":focusable")?$(t.target).focus():$(t.target).closest(":focusable").focus();return}return}if(t.type==="focusin"){if(n.Get("MultiSelectMode")){n.SetProperty("focusOutBlurInfo",{});return}$(this).hasClass("siebui-tile-selected")||n.ExecuteMethod("SetActiveControl",null)}if(typeof this.id=="string"){var s=t.data.ctx,o=parseInt(this.id.substring(this.id.lastIndexOf("_")+1),10),u=s.GetPM().Get("GetActiveControl"),a=s.GetIScrollObject(),f=!1;a&&a.enable();var l=n.Get("focusOutBlurInfo")||{};l.focusout&&!l.blur&&($(l.ele).blur(),u=s.GetPM().Get("GetActiveControl")),n.SetProperty("focusOutBlurInfo",{});var c=t.data.ctx;!n.Get("IsActive")&&!$(this).hasClass("siebui-tile-selected")&&n.SetProperty("TileActivate",!0),(u===null||u===undefined)&&!isNaN(o)&&(!i&&!t.ctrlKey&&n.Get("MultiSelectMode")&&!t.data.ctx.IsValidClick(t.target)||s.OnRowSelect(o,t.ctrlKey||i,t.shiftKey,t)),n.SetProperty("TileActivate",!1),t.target.type&&(f=t.target.type.toLowerCase()==="text"||t.target.type.toLowerCase()==="textarea"),!SiebelAppFacade.DecisionManager.IsTouch()&&f&&!e.IsEmpty(t.target.value)&&a&&a.disable()}}function P(e){var n=e.data.ctx.GetPM();n.OnControlEvent(t.get("PHYEVENT_APPLET_FOCUS"))&&(e=e||event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,$(this).prop("checked")===!0?(e.ctrlKey=!0,n.ExecuteMethod("CanInvokeMethod","SelectAll")&&n.ExecuteMethod("InvokeMethod","SelectAll",null)):e.data.ctx.OnRowSelect(0,e.ctrlKey,e.shiftKey))}function H(t,n){t.draggable({revert:"invalid",helper:"clone",scroll:e.IsSmallScreen()&&n.Get("enableDragAndDropInList")?!0:!1,cursor:"crosshair",cursorAt:SiebelApp.S_App.GetDirection()?{right:-2,top:16}:{left:0,top:0},containment:".siebui-view ",stack:"#_svf0",appendTo:"#_sweview",zIndex:9999,delay:1500,start:function(t,r){e.IsSmallScreen()&&r.helper.addClass("siebui-drag-shadow");var i=this.id.substring(this.id.lastIndexOf("_")+1),s=n.GetRenderer().GetIScrollObject();n.GetRenderer().OnRowSelect(i),$(this).data("rowid",i),$(this).data("appletRowId",n.ExecuteMethod("GetDragInfo",[i])),r.helper.css("z-index")===0&&r.helper.css("z-index",9999);var o=t;o.type="mouseup",s&&s.disable(),o=null}})}function B(e,n,r,i,s,o,u,a){var f=this.GetPM(),l=this.GetPM().Get("GetFullId")+"_"+t.get("SWE_TILE_CONTAINER");$("#"+l).find(e).unbind(a).bind(a,{ctx:this},function(e){if($(this).hasClass("siebui-tile-scroll-d"))return;var t=e.data.ctx.GetIScrollObject();if(t){var r,i=0,s=-t.wrapperOffset.left,o=t.scroller.getBoundingClientRect();e.data.ctx.EnableScrollArrow($("#"+l).find(n)),t.enable();if(this.id.search("right")>=0||this.id.search("down")>=0)r=1;else if(this.id.search("left")>=0||this.id.search("up")>=0)r=-1;if(t.options.scrollX)SiebelApp.S_App.GetDirection()&&(r=-r),t.wrapperWidth>-t.maxScrollX?SiebelApp.S_App.GetDirection()?r>0?i=-(o.left-t.wrapperWidth)<t.wrapperWidth?o.left-t.wrapperWidth+$(t.wrapper).offset().left:o.left-s/2-t.scroller.offsetLeft:i=o.right-t.wrapperWidth-$(t.wrapper).offset().left:i=r>0?o.right-s-t.wrapperWidth:i=o.left-s===0?o.left-s-t.scroller.offsetLeft/2:o.left-s:SiebelApp.S_App.GetDirection()?r>0?i=-(o.left-s-1)>=t.wrapperWidth?-(t.wrapperWidth+t.scroller.offsetLeft):o.left-s:i=o.right-s-t.wrapperWidth>t.wrapperWidth?t.wrapperWidth+t.scroller.offsetLeft:o.right-s-t.wrapperWidth:r>0?i=o.right-s-t.wrapperWidth>t.wrapperWidth?t.wrapperWidth:o.right-s-t.wrapperWidth:i=-(o.left-s-1
)>=t.wrapperWidth?-t.wrapperWidth:o.left-s;else if(r>0){var u=e.data.ctx.GetContainer().children("div.siebui-tile-list").offset().top+t.scrollerHeight-($("#"+t.wrapper.id).offset().top+t.wrapperHeight);i=u>=t.wrapperHeight?t.wrapperHeight:u}else-t.y>=t.wrapperHeight?i=t.wrapperHeight:i=t.y===0?0:-t.y,i=i>0?-i:i;t.options.scrollX?i=t.wrapperWidth>=t.scrollerWidth?0:i:i=t.wrapperHeight>=t.scrollerHeight?0:i,setTimeout(function(){SiebelApp.S_App.GetDirection()&&t.options.scrollX&&(r=-r),i=Math.ceil(i),i=parseInt(i,10),t.options.scrollX?t.directionX=r:t.directionY=r,t.options.scrollX?t.scrollBy(-i,0,1e3):t.scrollBy(0,-i,1e3)},0)}})}function j(){var e,t=this.Get("GetSelection");return this.Get("GetRecordSet").length===1&&(t=0),this.Get("IsResponsive")?(e=this.Get("GetListId"),e=e.substr(0,e.length-1),e+=t):e=this.Get("GetFullId")+"_tile_"+t,e}function F(){var e=this.GetPM(),t=e.Get("GetControls"),n=e.Get("ListOfColumns"),r=[],i,s={};if(!n)return s;i=n.length;for(var o=0;o<i;o++)r.push(n[o].name);for(var u in t)r.indexOf(u)===-1&&(s[u]=t[u]);return s}function I(){var e,t,n,r,i,s,o=this.options.ctx,u=parseInt(o.GetPM().Get("GetRecordSet").length);o.GetContainer().find("."+this.scroller.className+"").addClass("siebui-iscroll"),this.options.scrollX?(e=this.x+this.scroller.offsetLeft>=0,t=-(this.x-this.scroller.offsetLeft)>=-this.maxScrollX,s=parseInt($("#"+this.scroller.firstChild.id).outerWidth(!0),10),i=Math.floor(this.wrapperWidth/s),u>i?(o.EnableScrollArrow($("#"+this.wrapper.id).find("#tile-left-scroll, #tile-right-scroll")),e&&$("#"+this.wrapper.id).find("#tile-left-scroll").addClass("siebui-tile-scroll-d"),t&&$("#"+this.wrapper.id).find("#tile-right-scroll").addClass("siebui-tile-scroll-d")):($("#"+this.wrapper.id).find("#tile-left-scroll").addClass("siebui-tile-scroll-d"),$("#"+this.wrapper.id).find("#tile-right-scroll").addClass("siebui-tile-scroll-d"))):(s=parseInt($("#"+this.scroller.firstChild.id).outerHeight(!0),10),i=Math.floor(this.wrapperHeight/s),n=o.GetContainer().children("div.siebui-tile-list").offset().top+this.scrollerHeight-($("#"+this.wrapper.id).offset().top+this.wrapperHeight)<=0,r=this.y>=0,u>i?(o.EnableScrollArrow($("#"+this.wrapper.id).find("#tile-up-scroll, #tile-down-scroll")),n&&$("#"+this.wrapper.id).find("#tile-down-scroll").addClass("siebui-tile-scroll-d"),r&&$("#"+this.wrapper.id).find("#tile-up-scroll").addClass("siebui-tile-scroll-d")):($("#"+this.wrapper.id).find("#tile-up-scroll").addClass("siebui-tile-scroll-d"),$("#"+this.wrapper.id).find("#tile-down-scroll").addClass("siebui-tile-scroll-d")))}var e=SiebelJS.Dependency("SiebelApp.Utils"),t=SiebelJS.Dependency("SiebelApp.Constants"),n=SiebelJS.Dependency("SiebelApp.S_App.LocaleObject");SCROLL_UP=consts.get("PAG_SCROLL_UP"),SCROLL_DN=consts.get("PAG_SCROLL_DN");var r="easeInOutQuad",i=t.get("SWE_CTRL_MVG"),s=t.get("SWE_CTRL_PICK"),o=t.get("SWE_CTRL_CHECKBOX"),u=t.get("SWE_PROP_AUTOM_OT"),a=t.get("SWE_PROP_AUTOM_RN"),f=t.get("SWE_EXTN_CANCEL_ORIG_OP"),l=t.get("SWE_EXTN_RETVAL"),c=consts.get("SWE_EXTN_STOP_PROP_OP");return SiebelJS.Extend(h,SiebelAppFacade.PhysicalRenderer),h.prototype.Init=function(){SiebelAppFacade.TileLayoutPR.superclass.Init.call(this),this.GetPM().AddProperty("AllowBlur",!0),this.AttachPMBinding("OnScrollComplete",N),e.IsSmallScreen()&&(this.GetPM().AttachPostProxyExecuteBinding("NewRecord",A,{scope:this}),this.GetPM().AttachPostProxyExecuteBinding("WriteRecord",O,{scope:this})),this.GetPM().AttachEventHandler(t.get("PHYEVENT_CONTROL_BLUR"),function(){this.Get("AllowBlur")||(arguments[arguments.length-1][f]=!0,arguments[arguments.length-1][c]=!0)});var n=SiebelApp.S_App.PluginBuilder.GetHoByName("WTRecordsHO");n&&n.SetUp("",this)},h.prototype.FocusFirstControl=function(){var t=this.GetPM(),n=t.Get("ListOfColumns"),r=n.length,o=9999,u=null,a=0;this.SetFirstControl(null);for(var f=0;f<r;f++){var l=n[f].control,c=l.GetFieldName();if(!e.IsEmpty(c)&&l.GetIndex()&&l.GetIndex()<o){var h=!1;t.Get("IsInQueryMode")===!1?h=t.ExecuteMethod("CanUpdate",l.GetName()):h=!0;if(h&&!e.IsEmpty(l.GetUIType())&&(l.isBasicControl()||l.GetUIType()[0]==="J"||l.GetUIType()===i||l.GetUIType()===s)){o=l.GetIndex();var p=Number(t.Get("GetSelection"));this.GetUIWrapper(l).GetEl(p)&&this.SetFirstControl(this.GetUIWrapper(l).GetEl(p).eq(0))}}}if(this.GetFirstControl()==null)return!1;var d=this;setTimeout(function(){d.GetFirstControl().focus()},0)},h.prototype.SetFocusToControl=function(e,t){this.GetPM().Get("TileActivate")||SiebelAppFacade.TileLayoutPR.superclass.SetFocusToControl.apply(this,arguments)},h.prototype.ShowUI=function(r){this.init=!0;var i=this.GetPM(),s=i.Get("IsResponsive")?i.Get("GetListId"):i.Get("GetFullId"),u=i.Get("GetFullId")+"_"+t.get("SWE_TILE_CONTAINER");this.SetContainer($("#"+u)),E.call(this);if(i.Get("MultiSelectColumn")){var a=i.Get("GetPlaceholder")+i.Get("MultiSelectColumn"),f="id_"+a,l="header_"+a,c=this.GetContainer().find(".siebui-"+i.Get("MultiSelectColumn")),h='<input type="checkbox" name='+a+' role="checkbox" tabindex="-1" aria-checked="false" title='+n.GetLocalString("IDS_BHC_UNCHECKED")+" "+(e.IsTrue(SiebelApp.S_App.IsAutoOn())?consts.get("SWE_PROP_AUTOM_RN")+'="'+i.Get("MultiSelectColumn")+'" '+consts.get("SWE_PROP_AUTOM_OT")+'="'+o+'"':"")+"/>";c.length||(c=this.GetContainer().children(":first"),h="<div> "+h+"</div>");if(c.length){c.prepend(h);var p=$("#s_"+s+"_div").find(".siebui-applet-buttons").eq(0);p.prepend('<div><input type="checkbox" tabindex="-1" title='+n.GetLocalString("IDS_BHC_UNCHECKED")+" id="+f+" name="+l+' aria-checked="false" aria-disable="false"></div>')}}this.SetBasicLayout(this.GetContainer().html()),this.GetContainer().html('<div class="siebui-tile-list"></div>'),SiebelAppFacade.TileLayoutPR.superclass.ShowUI.call(this),this.SetTileScrollDirection(y.call(this)),e.IsSmallScreen()&&$(".siebui-viz-buttonbar").css("display","none"),SiebelAppFacade.DecisionManager.IsTouch()?this.GetContainer().parent(".siebui-tile-container").addClass("siebui-touch"):this.EnhanceScroller
(),i.SetProperty("BaseAppletControls",F.call(this))},h.prototype.ClearData=function(){var e=this.GetContainer().children("div.siebui-tile-list"),t=this.GetTileScrollDirection(),n=this.GetIScrollObject(),r=this.GetPM();r.Get("IsInQueryMode")&&(n&&n.destroy(),this.GetContainer().find("#tile-left-scroll, #tile-right-scroll, #tile-up-scroll, #tile-down-scroll").addClass("siebui-tile-scroll-d"),this.init=!0),e.empty(),e=null},h.prototype.BindData=function(t){var n=this.GetPM(),r,i=n.Get("GetRecordSet"),s=i?i.length:0,o=n.Get("GetSelection"),u=n.Get("GetScrollDir"),a=parseInt(n.Get("GetScrollAmount")),f=a?a:s,l=!1;if(!this.GetBasicLayout())return;if(e.IsSmallScreen()&&n.Get("GetParentApplet")&&!$("#s_"+n.Get("GetFullId")+"_div").find("#sieb-ui-popup-mvg-available").length&&!$("#s_"+n.Get("GetFullId")+"_div").find("#sieb-ui-popup-mvg-selected").length){var c=parseInt($("#_sweclient").height()-$("#_sweappmenu").height()-$("[name=popup]").parent().height(),10);c&&this.GetContainer().css("max-height",c)}SiebelApp.S_App.GetDirection()&&this.GetTileScrollDirection().toLowerCase()==="horizontal"&&this.GetContainer().find(".siebui-tile-list").removeClass("siebui-float-left"),f=f<0?-f:f,f=f>s?s:f,f=parseInt(f,10),this.GetContainer().addClass("clearfix"),this.SetScrollAmount(a);if(s===0){this.GetContainer().children("div.siebui-tile-list").empty(),this.UpdateScrollArrows(),e.IsSmallScreen()&&$(this.GetBasicLayout()).find(".siebui-tile-footer").length>0&&!$(this.GetBasicLayout()).find(".siebui-tile-footer.siebui-edit").length&&$("#s_"+n.Get("GetFullId")+"_div").find(".siebui-applet-header").length>0&&k.call(this,i,f);return}this.CacheState("CtrlInfo",{stateValue:{}}),this.CacheState("SelectedRowArray",{stateValue:[]}),u!==null&&a!==0&&Math.abs(a)<s?(r=!0,k.call(this,i,f)):t?(l=!0,this.ClearData(),k.call(this,i,f)):t||k.call(this,i,f);var h=this.GetPM().Get("GetSelId");$("#"+h+o).addClass("siebui-tile-selected"),this.init&&!n.Get("IsInQueryMode")&&(S.call(this),this.init=!1),w.call(this)&&b.call(this);if(u===null&&a===0||l){var p=this.GetIScrollObject();if(p){l&&(p.infiniteElementHeight=p.infiniteMaster.offsetHeight,p.infiniteHeight=p.infiniteLength*p.infiniteElementHeight),p.refresh(),p.options.scrollY&&(p.maxScrollY=-(p.scrollerHeight-p.wrapperHeight),p.wrapperHeight>=p.scrollerHeight?(p.maxScrollY=0,p._translate(0,0),this.GetContainer().find("#tile-up-scroll").addClass("siebui-tile-scroll-d")):n.Get("IsInQueryMode")&&l&&p.scrollTo(0,0));var d=n.Get("GetSelection");if(d>-1){var v=n.Get("IsResponsive")?n.Get("GetListId"):n.Get("GetFullId");v=n.Get("IsResponsive")?v.substr(0,v.length-1):v+"_tile_",$("#"+v+d).length>0&&(e.IsSmallScreen()&&this.GetTileScrollDirection().toLowerCase()==="vertical"?$("#"+v+d).offset().top+p.wrapperOffset.top>p.wrapperHeight&&p.scrollToElement($("#"+v+d)[0],0):p.scrollToElement($("#"+v+d)[0],0))}}}record=null},h.prototype.SetFirstTileId=function(t,n){var r=this.GetTileScrollDirection(),i=$("#"+t).outerHeight(!0),s=$("#"+t).outerWidth(!0);this.SetTileHeight($("#"+t).outerHeight(!0)),this.SetTileWidth($("#"+t).outerWidth(!0)),this.GetContainer().parent(".siebui-tile-container").removeClass("siebui-horizontal siebui-vertical"),this.GetContainer().find(".siebui-tile-list").css({width:"",height:""}),!r||r.toLowerCase()==="horizontal"?(this.GetContainer().parent(".siebui-tile-container").addClass("siebui-horizontal"),this.SetContainerHeight(i*n),this.SetContainerWidth(parseInt(s*n/2),10)):(this.GetContainer().parent(".siebui-tile-container").addClass("siebui-vertical"),parseInt(this.GetContainer().children("div.siebui-tile-list").css("max-height"),10)>0?this.GetContainer().children("div.siebui-tile-list").outerHeight(!0)<parseInt(this.GetContainer().children("div.siebui-tile-list").css("max-height"),10)?this.SetContainerHeight(this.GetContainer().children("div.siebui-tile-list").outerHeight(!0)):this.SetContainerHeight(parseInt(this.GetContainer().children("div.siebui-tile-list").css("max-height"),10)):this.SetContainerHeight(this.GetContainer().height())),(!this.GetTileScrollDirection()||this.GetTileScrollDirection().toLowerCase()==="horizontal")&&this.GetContainer().children("div.siebui-tile-list").outerHeight(i),SiebelAppFacade.DecisionManager.IsTouch()||this.UpdateScrollArrows();if(this.GetTileScrollDirection().toLowerCase()==="horizontal"){var o=Math.floor(this.GetContainer().height()/this.GetTileHeight());o>1?this.GetContainer().find(".siebui-tile-list").css("width",Math.ceil(this.GetTileWidth()*this.GetPM().Get("GetRecordSet").length/o)):this.GetContainer().find(".siebui-tile-list").css("width",this.GetTileWidth()*this.GetPM().Get("GetRecordSet").length)}else{var o=Math.floor(this.GetContainer().width()/this.GetTileWidth());o>1?this.GetContainer().find(".siebui-tile-list").css("minHeight",$("#"+t).height()*Math.ceil(this.GetPM().Get("GetRecordSet").length/o)):e.IsSmallScreen()||this.GetContainer().find(".siebui-tile-list").css("minHeight",$("#"+t).height()*this.GetPM().Get("GetRecordSet").length)}},h.prototype.UpdateScrollArrows=function(){var e=this.GetTileScrollDirection(),t=this.GetPM(),n=$("#"+t.Get("GetFullId")+"_"+consts.get("SWE_TILE_CONTAINER")),r=0,i=t.Get("GetRecordSet")?t.Get("GetRecordSet").length:0;!e||e.toLowerCase()==="horizontal"?(r=parseInt((n.width()||$("#s_"+t.Get("GetFullId")+"_div").width())/this.GetTileWidth(),10),i>r?SiebelApp.S_App.GetDirection()?n.find("#tile-left-scroll").removeClass("siebui-tile-scroll-d"):n.find("#tile-right-scroll").removeClass("siebui-tile-scroll-d"):i===r&&t.ExecuteMethod("CanInvokeScrollMethod","ScrollNextData")?SiebelApp.S_App.GetDirection()?n.find("#tile-left-scroll").removeClass("siebui-tile-scroll-d"):n.find("#tile-right-scroll").removeClass("siebui-tile-scroll-d"):SiebelApp.S_App.GetDirection()?(n.find("#tile-left-scroll").addClass("siebui-tile-scroll-d"),n.find(".siebui-tile-list").removeClass("siebui-float-left")):n.find("#tile-right-scroll").addClass("siebui-tile-scroll-d")):(r=parseInt(this.GetContainerHeight()/this.GetTileHeight
(),10),i===0||i<=r?n.find("#tile-down-scroll").addClass("siebui-tile-scroll-d"):n.find("#tile-down-scroll").removeClass("siebui-tile-scroll-d"))},h.prototype.IsValidClick=function(e){var t=SiebelAppFacade.TileLayoutPR.superclass.IsValidClick.apply(this,arguments);return t&&$(e).parent("button").length&&(t=!1),t},h.prototype.BindEvents=function(){SiebelAppFacade.TileLayoutPR.superclass.BindEvents.call(this);var e=this.GetPM(),n=e.Get("IsResponsive")?this.GetPM().Get("GetListId"):e.Get("GetFullId")+"_tile_",r=e.Get("GetRecordSet"),i=r?r.length:0,s=this.GetTileScrollDirection(),o=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper"),u=$("#s_"+e.Get("GetFullId")+"_div");u.off("click.drilldown").on("click.drilldown",".siebui-ctrl-drilldown",{ctx:this},function(n){SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0});var r=n.data.ctx,i=n.data.ctx.GetPM().Get("GetControls"),s=this.id.indexOf("_mb"),o=$(this).parents(".siebui-tile").attr("id"),u=o?parseInt(o.substring(o.lastIndexOf("_")+1),10):0,a=this.id.substring(0,s),f=e.Get("GetActiveControl");f&&e.ExecuteMethod("SetActiveControl",null);for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];if(c.GetInputName()===a&&!isNaN(s)&&r.OnRowSelect(u)){r.GetPM().OnControlEvent(t.get("PHYEVENT_DRILLDOWN_LIST"),$(this).attr("name"),u);break}}SiebelApp.S_App.uiStatus.Free()}),u.on("click",".siebui-applet-header.siebui-collapsible .siebui-button-secondary.siebui-btn-icon-expanded",{ctx:this},function(e){m.call(e.data.ctx)}),u=null;var a;if(e.Get("IsResponsive")){var f=n.substr(0,n.length-1);a="[id^='"+f+""+"']"}else a="[id^='"+n+""+"']";this.GetContainer().on("focusin mousedown touchstart",a,{ctx:this},D).on("focusout blur",a,{ctx:this},_),this.GetContainer().length&&this.GetContainer()[0].addEventListener("click",M,!0),!s||s.toLowerCase()==="horizontal"?(B.call(this,"#tile-left-scroll","#tile-right-scroll","ScrollPrevData","ScrollNextData",SCROLL_UP,"margin-left","marginLeft","mousedown"),B.call(this,"#tile-right-scroll","#tile-left-scroll","ScrollNextData","ScrollPrevData",SCROLL_DN,"margin-left","marginLeft","mousedown")):(B.call(this,"#tile-up-scroll","#tile-down-scroll","ScrollPrevData","ScrollNextData",SCROLL_UP,"","scrollTop","mousedown"),B.call(this,"#tile-down-scroll","#tile-up-scroll","ScrollNextData","ScrollPrevData",SCROLL_DN,"","scrollTop","mousedown")),e.Get("enableDragAndDropInList")&&($("#s_"+e.Get("GetFullId")+"_div").bind("dragover",function(e){e.preventDefault()}).bind("drop",{ctx:this},function(e){e.preventDefault();var n,r;e.originalEvent.dataTransfer&&(n=e.originalEvent.dataTransfer.getData("Text")),n&&(n.indexOf("\r")!==-1?r=n.replace(/\n/g,"").split("\r"):r=n.split("\n"),e.data.ctx.GetPM().OnControlEvent(t.get("PHYEVENT_RECORD_DROP"),r))}),$("#s_"+this.GetPM().Get("GetFullId")+"_div").droppable({drop:function(e,t){if(!($(".ui-widget-overlay").not("[id]").length>0&&SiebelApp.S_App.GetPopupPM().Get("state")===consts.get("POPUP_STATE_VISIBLE"))){var n=$(this).droppable("option","ctx").GetPM();t.helper.detach(),n.OnControlEvent(consts.get("PHYEVENT_RECORD_DROP_GENERIC"),n.Get("dropMethod"))}},ctx:this}));var l=e.Get("MultiSelectColumn");l&&$("#id_"+e.Get("GetPlaceholder")+l).bind("click",{ctx:this},P),w.call(this)&&$(window).bind("resize."+e.Get("GetPlaceholder"),g(b,100,this)),$(window).bind("resizeTile."+e.Get("GetPlaceholder"),{ctx:this},x),SiebelApp.EventManager.addListner("forceResize",this.Resize,this),SiebelApp.EventManager.addListner("ShowPanelContent",d,this)},h.prototype.ShowSelection=function(){var t=this.GetPM(),r=t.Get("GetRowsSelectedArray",{getDiff:!0});if(r){var i=t.Get("GetRecordSet").length,s=t.Get("MultiSelectColumn")?t.Get("GetPlaceholder")+t.Get("MultiSelectColumn"):null,o=t.Get("selectctrlinfo"),u=t.Get("GetSelection"),a,f=!0,l=t.Get("IsResponsive")?t.Get("GetListId"):t.Get("GetFullId");l=t.Get("IsResponsive")?l.substr(0,l.length-1):l+"_tile_",i===1&&(u=0),r.length!==0&&$(this.GetContainer()).find(".siebui-tile-selected").removeClass("siebui-tile-selected").removeClass("siebui-editable");if(s){var c=$($('input[name="'+s+'"]'));c&&(setTimeout(function(){c.prop("checked",!1)},0),c.attr({title:n.GetLocalString("IDS_BHC_UNCHECKED"),"aria-checked":"false"}))}else r.length==0&&$("#"+t.Get("GetSelId")).addClass("siebui-tile-selected");for(var h=0;h<i&&h<r.length;h++)r[h]&&$("#"+l+h).addClass("siebui-tile-selected");setTimeout(function(){for(var e=0;e<i&&e<r.length;e++)if(r[e]){if(s){var t=$($('input[name="'+s+'"]')[e]);a=!0,o&&o[e+1]&&o[e+1]==="0"&&(a=!1),t&&a&&(t.prop("checked",!0),t.attr({title:n.GetLocalString("IDS_BHC_CHECKED"),"aria-checked":"true"}))}}else f=!1;if(s){if(i!==r.length&&r.length<=1||!i)f=!1;var u="header_"+s,l=$($('input[name="'+u+'"]'));l&&l.length&&l.prop("checked",f).attr("aria-checked",""+f)}},0),this.CacheState("SelectedRowArray",{stateValue:r}),u>=0&&SiebelAppFacade.TileLayoutPR.superclass.ShowSelection.call(this,u),SiebelAppFacade.TileLayoutPR.superclass.ShowSelection.call(this,undefined,t.Get("BaseAppletControls")),e.IsSmallScreen()&&$("#s_"+this.GetPM().Get("GetFullId")+"_div").hasClass("siebui-commit-pending")&&!this.GetContainer().hasClass("siebui-selected-list")&&this.GetContainer().find(".siebui-tile-selected").addClass("siebui-editable")}else SiebelAppFacade.TileLayoutPR.superclass.ShowSelection.call(this,undefined)},h.prototype.OnRowSelect=function(n,r,i){var s=this.GetPM(),o=this,u=arguments[3]?$(arguments[3].target):!1;return e.IsTrue(SiebelApp.S_App.IsAutoOn())&&u&&u.is("button,:checkbox")&&SiebelApp.UserActionRecorder.CreateEvtObj("explicitClick",u,"","","","",""),!r&&!i&&Number(n)===Number(s.Get("GetSelection"))&&(!this.GetContainer().length||this.GetContainer().find(".siebui-tile-selected").length===1)?!0:(SiebelApp.S_App.uiStatus.Busy({}),s.OnControlEvent(t.get("PHYEVENT_SELECT_ROW"),n,r,i)?(SiebelApp.S_App.uiStatus.Free(),!0):(SiebelApp.S_App.uiStatus.Free(),!1))},h.prototype.EnableScrollArrow=function(e){e.length>0&&e.removeClass("siebui-tile-scroll-d"
)},h.prototype.EnhanceScroller=function(){var t=this.GetPM(),n=t.Get("GetFullId"),r=null,i=(this.GetTileScrollDirection()||"horizontal").toLowerCase()==="horizontal",s="<div id='"+n+"_scrollarea' class='siebui-tile-scrollarea'></div>",o=e.IsTrue(SiebelApp.S_App.IsAutoOn()),u="";o&&(u=' ot="button" rn="${DIRECTION}scroll" un="${DIRECTION}scroll" '),r='<div id="tile-${DIRECTION}-scroll"'+u+' class="siebui-tile-${DIRECTION}-scroll siebui-tile-scroll-d">'+'<a class="siebui-tile-scroll-anchor" href="#"></a>'+"</div>",$("#"+n+"_scrollarea").remove(),i?(this.GetContainer().children("div.siebui-tile-list").after(s),$("#"+n+"_scrollarea").append(r.replace(/\${DIRECTION}/g,"left")+r.replace(/\${DIRECTION}/g,"right"))):(this.GetContainer().children("div.siebui-tile-list").after(s),$("#"+n+"_scrollarea").append(r.replace(/\${DIRECTION}/g,"up")+r.replace(/\${DIRECTION}/g,"down")))},h.prototype.Resize=function(){var e=this;arguments.length&&arguments[0]&&(e=arguments[0].data.ctx),e.GetIScrollObject()&&setTimeout(function(){e.GetIScrollObject().refresh(),I.call(e.GetIScrollObject())},0)},h.prototype.EndLife=function(){this.SetBasicLayout(null),this.GetContainer().length&&this.GetContainer()[0].removeEventListener("click",M,!0),this.GetContainer().empty(),$("#scrollarea").empty(),this.GetIScrollObject()&&this.GetIScrollObject().destroy(),this.SetIScrollObject(null),$("#s_"+this.GetPM().Get("GetFullId")+"_div").off("click.drilldown"),w.call(this)&&$(window).unbind("resize."+this.GetPM().Get("GetPlaceholder")),$(window).unbind("resizeTile."+this.GetPM().Get("GetPlaceholder")),SiebelApp.EventManager.removeListner("forceResize",this.Resize,this),SiebelApp.EventManager.removeListner("ShowPanelContent",d,this),SiebelAppFacade.TileLayoutPR.superclass.EndLife.call(this)},h}(),"SiebelAppFacade.TileLayoutPR"}));

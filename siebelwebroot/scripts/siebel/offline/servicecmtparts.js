/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelApp.commitpartconsumed=="undefined"&&(SiebelJS.Namespace("SiebelApp.commitpartconsumed"),define("siebel/offline/servicecmtparts",["siebel/offline/model"],function(){var e={},t=SiebelApp.Offlineconstants;return e[t.get("DOUIREG_OBJ_NAME")]="SHCE Service FS Activity Part Movements List Applet - Mobile",e[t.get("DOUIREG_OBJ_TYPE")]=t.get("DOUIREG_OBJ_TYPEAPPLET"),e[t.get("DOUIREG_OBJ_MTHD")]="CanUpdate",e[t.get("DOUIREG_SRVC_NAME")]="commitpartconsumed",e[t.get("DOUIREG_SRVC_MTDH")]="CanUpdate",e[t.get("DOUIREG_EXT_TYPE")]=t.get("DOUIREG_EXT_TYPEPRE"),SiebelApp.S_App.Model.ServiceRegistry(e),SiebelApp.commitpartconsumed=function(){function e(e){}return SiebelJS.Extend(e,SiebelApp.ServiceModel),e.prototype.DoCanInvokeMethod=function(e){var t={err:!1},n,r=CCFMiscUtil_CreatePropSet(),i="";i=e.GetProperty("MethodName").toString();if(i==="EditRecord"){var s;currentApplet=this.GetContext(),currentBC=currentApplet.GetBusComp(),currentBC.ActivateField("Commit Txn Flag"),t=s=currentBC.FieldValue("Commit Txn Flag"),n=t,t={err:!1},s=n.retVal,!currentBC.CheckActiveRow()||s==="Y"?(r.SetProperty("Invoked",!0),r.SetProperty("RetVal",!1),t={err:!1,retVal:r}):(r.SetProperty("Invoked",!0),r.SetProperty("RetVal",!0),t={err:!1,retVal:r})}else r.SetProperty("Invoked",!1),r.SetProperty("RetVal",!1),t={err:!1,retVal:r};return t},e.prototype.CommitPartMvmtClient=function(){var e={err:!1},n;SiebelJS.Log("Invoked CommitPartMvmtClient Method..");var r,i,s,o;o=SiebelApp.S_App.Model,r=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBusComp(),r.ActivateField("Used Quantity"),r.ActivateField("Commit Txn Flag"),r.ActivateField("Product Id"),e=r.FieldValue("Commit Txn Flag");var u,a;return o=SiebelApp.S_App.Model,a=SiebelApp.S_App.Model.GetBusObj("FS Part Browser").GetBusComp("FS Bucket Header - Part browser"),u=SiebelApp.S_App.Model.GetBusObj("FS Part Browser").GetBusComp("FS Bucket - Part Browser"),u.ActivateField("Quantity"),n=e,e={err:!1},i=n.retVal,i==="Y"?SiebelJS.Log("Consumed Part Is Already In Committed State"):(e=r.FieldValue("Used Quantity"),s=e.retVal,e=r.FieldValue("Product Id"),n=e,prdId=n.retVal,e=r.SetFieldValue("Commit Txn Flag","Y",!0),n=e,r.SetCommitPending(!0),e=r.WriteRecord(),n=e,e=a.SetFldSearchSpec("Product ID",prdId),e=a.Execute(),n=e,e=a.Home(),n=e,e=u.SetFldSearchSpec("Product Id",prdId),e=u.Execute(),n=e,e=u.Home(),n=e,e={err:!1},u.CheckActiveRow()===!0&&(n=e,e=u.FieldValue("Quantity"),n=e,quantity=n.retVal,quantity-=s,e=u.SetFieldValue("Quantity",quantity,!0),n=e,u.SetCommitPending(!0),e=u.WriteRecord(),n=e,e={err:!1},SiebelApp.OfflineAppMgr.PostActions(t.get("ACTION_RPC_COMPLETED")))),e},e.prototype.createRMAOrder=function(e){var n={err:!1},r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S=[];return d=SiebelApp.S_App.Model,v=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBusComp(),v.ActivateField("Order Item Id"),v.ActivateField("Product Id"),v.ActivateField("Product Name"),v.ActivateField("Used Quantity"),v.ActivateField("Id"),v.ActivateField("Status"),v.ActivateField("Asset Number"),v.ActivateField("Part Number"),n=v.FieldValue("Order Item Id"),r=n,n={err:!1},i=r.retVal,utils.IsEmpty(i)?(n=v.FieldValue("Product Id"),r=n,l=r.retVal,n=v.FieldValue("Product Name"),r=n,c=r.retVal,n=v.FieldValue("Used Quantity"),r=n,h=r.retVal,n=v.FieldValue("Id"),r=n,p=r.retVal,n=v.FieldValue("Status"),r=n,f=r.retVal,n=v.FieldValue("Asset Number"),r=n,u=r.retVal,n=v.FieldValue("Part Number"),r=n,function(r){a=r.retVal,m=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBusComp().GetParentBuscomp(),m.ActivateField("SR Number"),m.ActivateField("Activity SR Id"),n=m.FieldValue("Activity SR Id"),r=n,n={err:!1},g=r.retVal,n=m.FieldValue("SR Number"),r=n,n={err:!1},y=r.retVal;if(g=="")return SiebelApp.OfflineAppMgr.PostActions("ActionRPCCompleted","createRMAOrder"),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("IDS_ERR_FS_MISSING_SR",S),n={err:"IDS_ERR_FS_MISSING_SR",retVal:""},n;d=SiebelApp.S_App.Model,b=SiebelApp.S_App.Model.GetBusObj("Service Request").GetBusComp("Service Request"),w=SiebelApp.S_App.Model.GetBusObj("Service Request").GetBusComp("Order Entry - Orders"),E=SiebelApp.S_App.Model.GetBusObj("Service Request").GetBusComp("Order Entry - Line Items"),E.ActivateField("Id"),w.ActivateField("Id"),w.ActivateField("Order Number"),w.ActivateField("Service Request Id"),w.ActivateField("Service Request Number"),E.ActivateField("Quantity Requested"),n=w.Execute(),r=n,n=w.NewRecord(!0),r=n,sLocaleVal=SiebelApp.S_App.Model.GetLovNameVal(e,"FS_ORDER_TYPE"),n=w.GetPickList("Order Type"),r=n;var i=r.retVal;n=i.SetFldSearchSpec("Order Type",sLocaleVal),r=n,n=i.Execute(),r=n,n=i.Home(),r=n,n={err:!1};if(i.CheckActiveRow()===!0){n=i.PickCurrentRow(),r=n,n=w.SetFieldValue("Service Request Id",g,!0);var o=n;n=w.SetFieldValue("Service Request Number",y,!0);var o=n;w.SetCommitPending(!0),n=w.WriteRecord(),r=n,SiebelApp.OfflineAppMgr.PostActions(t.get("ACTION_RPC_COMPLETED")),n=w.FieldValue("Order Number"),r=n,s=r.retVal,n=w.FieldValue("Id"),r=n,m_sOrderHeaderId=r.retVal,n=E.Execute(),r=n,n=E.NewRecord(!0),r=n,n=E.SetFieldValue("Product Id",l,!0),r=n,n=E.SetFieldValue("Product",c,!0),r=n,n=E.SetFieldValue("Quantity Requested",h,!0),r=n,n={err:!1},utils.IsEmpty(u)||(n=E.SetFieldValue("Asset Number",u,!0),r=n,n={err:!1}),utils.IsEmpty(a)||(n=E.SetFieldValue("Part Number",a,!0),r=n,n={err:!1}),utils.IsEmpty(f)||(n=E.SetFieldValue("Product Status Code",f,!0),r=n,n={err:!1}),n=E.FieldValue("Id"),r=n,sOrderItemId=r.retVal,n=E.SetFieldValue("Order Header Id",m_sOrderHeaderId,!0),r=n,E.SetCommitPending(!0),n=E.WriteRecord(),r=n,n=v.SetFieldValue("Order Item Id",sOrderItemId,!0),r=n,n=v.SetFieldValue("Order Id",m_sOrderHeaderId,!0),r=n,n=v.SetFieldValue("Order Number Calc",s,!0),r=n,v.SetCommitPending(!0),n=v.WriteRecord(),r=n,n={err:!1},SiebelApp.OfflineAppMgr.PostActions(t.get("ACTION_RPC_COMPLETED"))}}.call(this,r)):SiebelApp.OfflineAppMgr.PostActions("ActionRPCCompleted","createRMAOrder"),n},e.prototype.CanUpdate=function(
e){var t={err:!1},n,r=CCFMiscUtil_CreatePropSet(),i="",s=this.GetContext().GetBusComp(),o,u;return s.ActivateField("Commit Txn Flag"),s.CheckActiveRow()&&(t=s.FieldValue("Commit Txn Flag"),n=t,t={err:!1},u=n.retVal,u==="Y"&&(i=e.GetPropertyAsStr("Field"),o=e.GetProperty("Field"),!utils.IsEmpty(o)&&this.GetContext().GetControls()[i]&&(this.GetContext().GetControls()[i].GetFieldName()?(r.SetProperty("Invoked",!0),r.SetProperty("RetVal",!1),t={err:!1,retVal:r}):(r.SetProperty("Invoked",!1),r.SetProperty("RetVal",!1),t={err:"",retVal:r})))),t},e}(),"SiebelAppFacade.SiebelApp.commitpartconsumed"}));

/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
function QueryExprNode(e,t){this.type="QueryExprNode",this.body=e,this.loc=t,this.evaluate=function(t,n,r){return typeof e=="string"?e:(SiebelApp.QueryHelper.SetContext(t,n,r),this.body.evaluate())},this.BoldQuery=function(e){return SiebelApp.QueryHelper.SetContext(e),this.body.BoldQuery()}}function ConstantNode(e,t,n){this.value=t,this.type=e,this.loc=n,this.evaluate=function(){var e;switch(this.type){case"CONST_FUNCTION":e=SiebelApp.QueryHelper.EvaluateConstantFunctionNode(this);break;case"CONST_STRING":e=SiebelApp.QueryHelper.EvaluateConstantNode(this);break;case"CONST_NUMBER":e=SiebelApp.QueryHelper.EvaluateConstantNumberNode(this)}return e},this.BoldQuery=function(){}}function UnOpNode(e,t,n){this.value=t,this.type=e,this.loc=n,this.evaluate=function(){var e;switch(this.type){case"UNOPNODE_NOT":e=SiebelApp.QueryHelper.EvaluateUnaryNotNode(this.value);break;case"UNOPNODE_ISNULL":e=SiebelApp.QueryHelper.EvaluateUnaryIsNullNode(this.value);break;case"UNOPNODE_ISNOTNULL":e=SiebelApp.QueryHelper.EvaluateUnaryIsNotNullNode(this.value);break;case"UNOPNODE_EXISTS":}return e},this.BoldQuery=function(){var e;switch(this.type){case"UNOPNODE_ISNULL":e=SiebelApp.QueryHelper.BoldQueryUnaryIsNullNode(this.value);break;case"UNOPNODE_ISNOTNULL":e=SiebelApp.QueryHelper.BoldQueryUnaryIsNotNullNode(this.value)}return e}}function SourceLocation(e,t,n){this.source=e,this.start=t,this.end=n}function Position(e,t){this.line=e,this.column=t}function IdentifierNode(e,t){this.type="Identifier",this.value=e,this.loc=t,this.evaluate=function(){return SiebelApp.QueryHelper.EvaluateIdentifierNode(this)}}function BinaryOpNode(e,t,n,r){this.type=e,this.right=n,this.left=t,this.loc=r,this.evaluate=function(){return SiebelApp.QueryHelper.EvaluateBinaryOpNode(this)},this.BoldQuery=function(){return SiebelApp.QueryHelper.BinaryOpNodeBoldQuery(this)}}function EscapeCharaterNode(e,t,n,r,i){this.type=e,this.escapeStr=n,this.value=t,this.loc=i,this.escapeChar=r,this.evaluate=function(){return SiebelApp.QueryHelper.EvaluateEscapeCharaterNode(this)}}function FieldNameNode(e,t){this.type="FieldName",this.arguments=e,this.loc=t,this.evaluate=function(){return SiebelApp.QueryHelper.EvaluateFieldNameNode(this)},this.BoldQuery=function(){return SiebelApp.QueryHelper.BoldQueryFieldNameNode(this)}}function FieldValueNode(e,t){this.type="FieldValue",this.value=e,this.loc=t,this.evaluate=function(){}}function ExpressionNode(e,t,n){this.type="ExpressionNode",this.value=t,this.src=n,this.evaluate=function(){return this.value.evaluate()}}function FunctionNode(e,t,n,r){this.type=e,this.name=t.toUpperCase(),this.args=n,this.loc=r,this.evaluate=function(){var e;switch(this.name.toUpperCase()){case"LOOKUPVALUE":e=SiebelApp.QueryHelper.EvaluateLookupValueNode(this);break;case"LOOKUPNAME":e=SiebelApp.QueryHelper.EvaluateLookupNameNode(this);break;case"IIF":e=SiebelApp.QueryHelper.EvaluateIIFNode(this);break;case"PARENTFIELDVALUE":e=SiebelApp.QueryHelper.EvaluateParentFieldValueNode(this);break;case"ROWIDTOROWIDNUM":e=SiebelApp.QueryHelper.EvaluateRowIdToRowIdNumNode(this);break;case"IFNULL":e=SiebelApp.QueryHelper.EvaluateIfNullNode(this);break;case"LEN":e=SiebelApp.QueryHelper.EvaluateLenNode(this)}return e},this.BoldQuery=function(){return SiebelApp.QueryHelper.BoldQueryFunctionNode(this)}}function ParameterListNode(e,t,n){this.type=e,this.parameters=t,this.loc=n,this.BoldQuery=function(){return SiebelApp.QueryHelper.BoldQueryParameterListNode(this)}}function ParameterNode(e,t,n){this.type=e,this.param=t,this.loc=n,this.evaluate=function(){return t.evaluate()},this.BoldQuery=function(){return SiebelApp.QueryHelper.BoldQueryParameterNode(this)}}function QueryOpNode(e,t,n,r){this.type=e,this.left=t,this.right=n,this.loc=r}function BracesNode(e,t,n){this.type=e,this.body=t,this.loc=n,this.evaluate=function(){return t.evaluate()},this.BoldQuery=function(){return SiebelApp.QueryHelper.BoldQueryBracesNode(this)}}function TheApplication(){var e=SiebelApp.S_App;return e==null?null:e.GetInterface()}(function(){if(typeof SiebelApp.Offlineconstants!="undefined")return;Namespace("SiebelApp.Offlineconstants");var e=SiebelApp.Utils.DefineConstants;SiebelApp.Offlineconstants=e();var t=SiebelApp.Offlineconstants;t.set("GOTOVIEW","GotoView"),t.set("GOTOVIEWCOLD","GotoViewCold"),t.set("GETVIEWLAYOUT","GetViewLayout"),t.set("NEWRECORD","NewRecord"),t.set("EDITRECORD","EditRecord"),t.set("DRILLDOWN","Drilldown"),t.set("WRITERECORD","WriteRecord"),t.set("NEWLAYOUT","NewLayout"),t.set("GETAPPLETLAYOUT","GetAppletLayout"),t.set("DELETERECORD","DeleteRecord"),t.set("PICKRECORD","PickRecord"),t.set("ADDRECORD","AddRecord"),t.set("CREATERECORD","CreateRecord"),t.set("INVOKEMETHOD","InvokeMethod"),t.set("UPDATEPREFMSG","UpdatePrefMsg"),t.set("NEWPOPUP","NewPopup"),t.set("STATUS","Status"),t.set("SWECMD","SWECmd"),t.set("SWEMETHOD","SWEMethod"),t.set("DEFAULT_VIEW_INFO","dvinf"),t.set("VIEW_INFO","vinf"),t.set("PICK_APLT_INFO","pinf"),t.set("NEW_VIEW_INFO","ninf"),t.set("EDIT_VIEW_INFO","einf"),t.set("CREATE_VIEW_INFO","cinf"),t.set("POPUP_OBJ_INFO","puoinf"),t.set("POPUP_INFO","puinf"),t.set("GETCACHEDFRAME","GetCachedFrame"),t.set("GOTOPOSTEDACTION","GotoPostedAction"),t.set("EDIT_FIELD","EditField"),t.set("TEXT","TextFile"),t.set("VIEW_NAME","name"),t.set("VIEW_LIST","ViewList"),t.set("UNDORECORD","UndoRecord"),t.set("FLD_PICK_APLT_DET","pmap"),t.set("PICK_APLT_DET","pdet"),t.set("FLD_PICK_MAP","pfld"),t.set("PICK_MAP_INFO","pmif"),t.set("CACHE_TYPE_REACTIVE","Reactive"),t.set("CACHE_TYPE_PROACTIVE","Proactive"),t.set("SYNC_PKG_LENGTH","SyncLength"),t.set("SYNC_PKG_REQUESTS","SyncRequest"),t.set("TOTAL_SYNC_PACKAGE_LENGTH","TotalSyncPkgLength"),t.set("SYNC_REQUEST_LIMIT",15),t.set("SYNC_REQUEST_LAST_TRANSID","LastTransId"),t.set("SYNC_REQUEST_LAST_RECORDNUM","LastRecordNum"),t.set("INDEX","index"),t.set("B_SETUP","bSetUp"),t.set("B_UP","bUp"),t.set("VALUE_ARRAY","ValueArray"),t.set("POSITION_ON_ROW","PositionOnRow"),t.set("GO_TO_NEXT","GotoNext"),t.set("GO_TO_PREV","GotoPrevious"
),t.set("SRF_ID","SRFId"),t.set("RETRY_UPSYNC_REQUEST",3),t.set("CUD_RESPONSE","@0`0`1`0``0`Status`Completed`"),t.set("CLOSE_POPUP_X","@0`0`1`0``0`Status`ClosePopup`"),t.set("COL_VIEW_TAG","OF_ViewTag"),t.set("COL_PARENT_TAG","OF_ParentIdTag"),t.set("STRING_CACHE","StringCache"),t.set("END_OF_FILE","EOF"),t.set("NEW_APP_TAG_INFO","nati"),t.set("GET_DATA_PKG_MODE_ALL","All"),t.set("GET_DATA_PKG_MODE_ALL_IN_METADATA","AllInMetadata"),t.set("GET_DATA_PKG_MODE_VIEW_BY_VIEW","ViewByView"),t.set("GET_DATA_PKG_PS_SCHEMA","Schema"),t.set("TAG_NAME","Name"),t.set("TAG","Tag"),t.set("SWE_POST_CHANGES","PostChanges"),t.set("GO_TO_NEXT_SET","GotoNextSet"),t.set("GO_TO_PREV_SET","GotoPreviousSet"),t.set("SWE_CLOSE_APPLET","CloseApplet"),t.set("MESSAGEBAR","Message Bar"),t.set("COMMIT_PENDING","cp"),t.set("OLD_ROW_ID","OLDRowId"),t.set("ASYNC_STATUS","AsyncStatus"),t.set("SCROLL_NEXT_DATA","ScrollNextData"),t.set("SCROLL_PREV_DATA","ScrollPrevData"),t.set("CANINVOKEMETHOD","CanInvokeMethod"),t.set("ASSOC","Assoc"),t.set("ASSOCID","AssocId"),t.set("GOTOBOOKMARKVIEW","GotoBookmarkView"),t.set("Timeout",12e5),t.set("MAX_RECORDS",600),t.set("PAGE_SIZE",10),t.set("SCROLL_SCALE_CONSTANT",2),t.set("LIMIT","LIMIT"),t.set("GETCURRENTDATE","GetCurrentDate"),t.set("STRINGNULL","null"),t.set("STRINGUNDEFINED","undefined"),t.set("STATUSCONTINUE","Continue"),t.set("TABLEINFO","TableInfo"),t.set("NEW","New"),t.set("SHOW_POP_UP","Showpopup"),t.set("SHOW_POPUP","ShowPopup"),t.set("METADATA_SEP","~"),t.set("METADATA_FLD_SEP","}{"),t.set("METADATA_LST_SEP","},{"),t.set("BCTYPE_NORMAL",0),t.set("BCTYPE_PICKLIST",1),t.set("IS_DYNAMIC","IsDync"),t.set("SRVR_RESPONSE_OK","OK"),t.set("SYNC_TYPE_UPSYNC_ONLY","UpsyncOnly"),t.set("SYNC_TYPE_UPSYNC_ISYNC","UpsyncISync"),t.set("SYNC_TYPE_GOONLINE","GoOnline"),t.set("SWE_PST_SCROLL_FACTOR","ScrollFactor"),t.set("CALCEXPR","ce"),t.set("COLUMN_NAME","cln"),t.set("DISABLE_SEARCH","dsrch"),t.set("DISABLE_SORT","dsrt"),t.set("FORCE_ACTIVE","fa"),t.set("FORCE_CASE","fc"),t.set("LINKNAME","ln"),t.set("NOCOPY","nc"),t.set("PICKLISTNAME","pln"),t.set("POSTDEFAULT","post"),t.set("PREDEFAULT","pre"),t.set("PRECISION","prcn"),t.set("VALIDATIONSPEC","vspec"),t.set("PICKMAP","pm"),t.set("FIELD_USER_PROP","fup"),t.set("SSA_PRIMARY_FIELD","SSA Primary Field"),t.set("SEARCHSPEC","sh"),t.set("ZONE","z"),t.set("STAND_ALONE_INST","sai"),t.set("INSMODE_NORMAL","imn"),t.set("INSMODE_ASSOCONLY","ima"),t.set("SWE_ARG_NOT_EQUAL","<>"),t.set("DOUIREG_OBJ_NAME","ObjectName"),t.set("DOUIREG_OBJ_TYPE","ObjectType"),t.set("DOUIREG_OBJ_MTHD","ObjectMethod"),t.set("DOUIREG_EXT_TYPE","ExtType"),t.set("DOUIREG_SRV_SCRIPT","ServerFlag"),t.set("DOUIREG_EXT_CONTEXT","Context"),t.set("DOUIREG_SRVC_NAME","Service"),t.set("DOUIREG_SRVC_MTDH","ServiceMethod"),t.set("DOUIREG_OBJ_TYPEAPPLICATION","Application"),t.set("DOUIREG_OBJ_TYPEAPPLET","Applet"),t.set("DOUIREG_OBJ_TYPEBUSCOMP","BusComp"),t.set("DOUIREG_EXT_TYPEPRE","Pre"),t.set("DOUIREG_EXT_TYPEPOST","Post"),t.set("DOUIREG_EXT_TYPEOVERRIDE","Override"),t.set("BUILDSCREEN_BS_NORMAL","BS_NORMAL"),t.set("BUILDSCREEN_BS_ALTERNATE","BS_ALTERNATE"),t.set("ACTION_RPC_REFRESH_VIEW","ActionRPCRefreshView"),t.set("REFRESHLAYOUT","RefreshLayout"),t.set("COPYRECORD","CopyRecord"),t.set("EXECUTEFRMQUERY","ExecuteFrameQuery"),t.set("EXECUTESORT","ExecuteSort"),t.set("GO_TO_PRV_SET","GotoPreviousSet"),t.set("SCROLL_NEXT","ScrollNext"),t.set("SCROLL_PREVIOUS","ScrollPrevious"),t.set("GO_TO_NEXT_REC","GotoNextRecord"),t.set("GO_TO_PREVIOUS_REC","GotoPreviousRecord"),t.set("DELETERECORDS","DeleteRecords"),t.set("GO_TO_FST_SET","GotoFirstSet"),t.set("GO_TO_LAST_SET","GotoLastSet"),t.set("EXECUTE_QUERY","ExecuteQuery"),t.set("SELECT_ALL","SelectAll"),t.set("ACTION_RPC_COMPLETED","ActionRPCCompleted"),t.set("ACTION_RPC_CONTINUE","ActionRPCContinue"),t.set("ACTION_RPC_CLOSE_POPUP","ClosePopup"),t.set("ACTION_RPC_BUILD_VIEW_ASYNC","BuildViewAsync"),t.set("ACTION_RPC_OK","OK"),t.set("SWE_FRAME_ID_STR","SWEFI"),t.set("SWE_PROP_CAN_DELETE","cdl"),t.set("SWE_PROP_HAS_ASSOC","hac"),t.set("SWE_PROP_CAN_ASSOC","cac"),t.set("SWE_PROP_IS_IN_QUERY","iqs"),t.set("SWE_PROP_IS_COMMIT","icp"),t.set("SWE_PROP_IS_DELETE","idp"),t.set("SWE_PROP_IS_NEW_REC_PEND","inrp"),t.set("SAVE_BC_STATE_ALL","sbcsa"),t.set("SWE_BCNOTIFY_NEWDATAWS","bcn_ndw"),t.set("SAVE_BC_STATE_NONE","bcsn"),t.set("SWE_PROP_NOTI_TYPE","type"),t.set("SWE_BCNOTIFY_DELETEWSROW","dwr"),t.set("SWE_NOTIFY_NUM_RECORDS_STR","nr"),t.set("SWE_NOTIFY_NUM_RECORDS_STR","NNR"),t.set("SWE_PROP_NOTI_TYPE","type"),t.set("SWE_BCNOTIFY_DELETEWSROW","dwr"),t.set("SWE_BCNOTIFY_NEWACTIVEROW","nar"),t.set("SWE_BCNOTIFY_DELETERECORD","dr"),t.set("SWE_BCNOTIFY_INSERTWSFLDVALS","ifv"),t.set("SWE_BCNOTIFY_INSERTWSROW","iwr"),t.set("SWE_BCNOTIFY_NEWRECORDDATA","nrd"),t.set("SWE_BCNOTIFY_NEWRECORDDATAWS","nrdw"),t.set("SWE_BCNOTIFY_SCROLLDATA","sd"),t.set("SWE_NOTIFY_STATE_STR","state"),t.set("SWE_BCNOTIFY_STATECHANGED","sc"),t.set("EXECUTE_FRAME_QUERY","ExecuteFrameQuery"),t.set("FIND","Find"),t.set("NEWQUERY","NewQuery"),t.set("UNDOQUERY","UndoQuery"),t.set("QUERY_VIEW_INFO","qinf"),t.set("LIKE_QUERY","LIKE"),t.set("BUILDSCREEN_BS_DRILLDOWN","BS_DRILLDOWN"),t.set("BUILDSCREEN_BS_DRILLDOWNBYFIELD","BS_DRILLDOWNBYFIELD"),t.set("BUILDSCREEN_BS_DRILLDOWNCUSTOM","BS_DRILLDOWNCUSTOM"),t.set("TYPE_FRAME","TYPE_FRAME"),t.set("TYPE_BUSCOMP","TYPE_BUSCOMP"),t.set("MENU_INFO","ami"),t.set("MENU_DATA_REQ","minf"),t.set("REGENERATEMETADATA","RegenMD"),t.set("METADATATABLEINFO","Metadatatable"),t.set("ERRLOG_APPLET","User Profile Logs Applet - Mobile"),t.set("ERRLOG_VIEW","User Profile Logs View"),t.set("CLIENT_LOG_DATA","cld"),t.set("NODE_ID","NodeId"),t.set("SQLITE_MAX_EXPR_DEPTH",999),t.set("DTYPE_DATETIME","12"),t.set("DTYPE_UTCDATETIME","13"),t.set("EXISTS","EXISTS"),t.set("REFRESH_BUSCOMP","RefreshBusComp"),t.set("REFRESH_RECORD","RefreshRecord"),t.set("KEYCODE_ENTER",13),t.set("LIST_OF_VAL_TABLE","S_LST_OF_VAL"),t.set("LOG_EVT_METADATA_EX","1"),t.set("LOG_EVT_DATA_EX_BASIC"
,"2"),t.set("LOG_EVT_DATA_EX_DETAILED","3"),t.set("LOG_EVT_UPSYNC","4"),t.set("LOG_EVT_CLIENT_SYS","5"),t.set("LOG_EVT_ALL","6"),t.set("LOG_EVT_COMMON","7"),t.set("METADATA_EX","Metadata Extraction"),t.set("DATA_EX_BASIC","Data Extraction Basic"),t.set("DATA_EX_DETAILED","Data Extraction Detailed"),t.set("UPSYNC","Upsync"),t.set("CLIENT_SYS","Client System"),t.set("ALL","All"),t.set("STR_QUERY_COMBO_BOX","QueryComboBox"),t.set("STR_POPUP_QUERY_COMBO_BOX","PopupQueryCombobox"),t.set("LIST_OF_VAL_TABLE","S_LST_OF_VAL"),t.set("LIC_VALUE","LICValue"),t.set("DM_LOG_CHAR_LIMIT","39000"),t.set("DM_LOG_RECORD_COUNT","10"),t.set("DM_APP_REDIRECT_TIMEOUT","3500"),t.set("PRT_BC_MAX_FETCH_SIZE","500"),t.set("SYNC_NEW","New"),t.set("SYNC_UPSYNCED","Upsynced"),t.set("LAST_SYNC_TS","LastSyncTimeStamp"),t.set("DM_DATETIME_FORMAT","MM/DD/YYYY HH:mm:ss"),t.set("DM_DATE_FORMAT","MM/DD/YYYY"),t.set("DM_TIME_FORMAT","HH:mm:ss"),t.set("SW_STARTPROGRESSBAR","SPB"),t.set("SW_UpdateProgressBar","UPB"),t.set("SW_RemoveProgressBar","RPB"),t.set("SW_OFFLINE_BOOTSTRAP_KEY","OBSK"),t.set("GET_OFFLINE_BOOTSTRAP_KEY","GOBSK");var n=[];n[0]="BusComp",n[1]="ProactiveCacheBuilder",n[2]="AppSettings",n[3]="Extensions",n[4]="Applet",n[5]="AppMgr",n[6]="View",n[7]="BrowserCacheMgr",n[8]="ApplicationContext",n[9]="Metadata",n[10]="Model",n[11]="SyncThreadHandler",n[12]="WebDB",n[13]="StatusRenderer",n[14]="SyncWebWorker",n[15]="Utils",n[16]="Query",n[17]="ServiceModel",n[18]="SElib",n[19]="Clib",n[20]="Global",t.set("DMGlobalClassArray",n);var r=[];r[0]="",r[27]="%1 - %2, %3",r[103]="%1 - %2, Sync Node Id: %3",r[104]="%1 - %2, SRF Id: %3",r[106]="%1 - %2, Application configured for Always Full Download",r[10]="%1 - %2, Application Cache Downloading.... %3",r[12]="%1 - %2, Application Cache Downloaded.... %3",r[13]="%1 - %2, Error in downloading Application Cache",r[20]="%1 - %2, Invalid server response for request: %3 , Server response: %4",r[21]="%1 - %2, Network/Server is unavailable. Continuing in Offline mode.",r[28]="%1 - %2, Login request sent for user '%3'",r[29]="%1 - %2, Login response received. Server response: %3",r[76]="%1 - %2, Server Request Sent. Request URL: '%3', Type: '%4', Async: '%5', ContentType: '%6', Data: %7",r[77]="%1 - %2, Response received. Request: '%3', HTTP Ready State: '%4', HTTP Status Text: '%5', HTTP Status: '%6'",r[78]="%1 - %2, Response received.",r[82]="%1 - %2, Pinging Server.... %3",r[101]="%1 - %2,Siebel Session Expired. Establishing New Session",r[83]="%1 - %2, Validating the network again for other errors like WebServer availability, VPN, Proxy or 3rd Party response... %3",r[84]="%1 - %2, Error: %3",r[85]="%1 - %2, Output: %3",r[86]="%1 - %2, 3rd Party response encountered.",r[87]="%1 - %2, Network issue encountered. Issue may be because of VPN, WebServer availability or Proxy.",r[88]="%1 - %2, Response Received with StatusText NOT OK. HTTP Response: '%3', HTTP ResponseText: '%4'",r[89]="%1 - %2, Data request sent. Waiting for response... %3",r[90]="%1 - %2, Invalid Server Response Received. HTTP Response: '%3', HTTP ResponseText: '%4'",r[1]="%1 - %2, Parsing and Caching %3 %4",r[11]="%1 - %2, Caching Metadata is complete %3",r[22]="%1 - %2, Pick Applet Details are empty",r[23]="%1 - %2, Could not cache %3 : %4",r[24]="%1 - %2, Invalid Pick map: %3",r[26]="%1 - %2, Cached Object definitions for Views:%3",r[41]="%1 - %2, Metadata request sent. Waiting for response... %3",r[79]="%1 - %2, Getting Offline Metadata.... %3",r[102]="%1 - %2, Offline Metadata Recieved.... %3",r[3]="%1 - %2, Error in downloading package. Incorrect Property Set : %3",r[4]="%1 - %2, Creating table %3",r[5]="%1 - %2  Table:%3 , Columns: %4, No. of records: %5",r[6]="%1 - %2, Mismatch in no of columns: %3 and values :%4 for BC :%5",r[7]="%1 - %2, Caching data package is complete.... %3",r[8]="%1 - %2, Schema(s) has changed",r[9]="%1 - %2, Caching String cache",r[15]="%1 - %2, Received Offline Data Package.... %3",r[17]="%1 - %2, Failed to fetch MetaData from Server",r[18]="%1 - %2, Failed to fetch MetaData. SyncNodeID and/or SrfID are missing",r[19]="%1 - %2, Failed to get Offline Package from Server. Please verify Offline repository configuration",r[25]="%1 - %2, Offline packages downloading....",r[80]="%1 - %2, Getting Incremental Data Package.... %3",r[81]="%1 - %2, Getting Offline Data Package.... %3",r[107]="%1 - %2, Starting Post Caching Process.... %3",r[108]="%1 - %2, Post Caching Process Complete .... %3",r[38]="%1 - %2, SyncTable Updated. TranscationId: %3 Name: %4",r[39]="%1 - %2, Checking server connection.... %3",r[40]="%1 - %2, Network is unavailable. Continuing in offline mode.",r[42]="%1 - %2, UpSync completed.",r[43]="%1 - %2, UpSync failed.",r[46]="%1 - %2, No Data to Sync.",r[49]="%1 - %2, Getting Last Transaction Id....",r[62]="%1 - %2, Synchronization of offline data : %3",r[63]="%1 - %2, UpSync couldn't be performed : %3",r[64]="%1 - %2, Last Transaction Id : %3",r[65]="%1 - %2, No.of items to UpSync is %3",r[66]="%1 - %2, Purging all records in SyncQueue till last successful upSync with Transaction Id %3",r[67]="%1 - %2, UpSync Request data: %3",r[94]="%1 - %2, SyncQueue Update Query: '%3' Values: %4",r[95]="%1 - %2, Query to purge records from SyncQueue: '%3'",r[96]="%1 - %2, Packaging record with Txn Id: '%3' for upsync",r[109]="%1 - %2, Last Recieved  Id : %3",r[14]="%1 - %2, Cached Frame Response Received.",r[16]="%1 - %2, The Property Set has no children",r[30]="%1 - %2, Where expression type is : %3, BC name is: %4, Field: %5, Value: %6, Expression: %7",r[31]="%1 - %2, Name: %3, %4 %5",r[32]="%1 - %2 %3 is %4; Method is %5",r[33]="%1 - %2, Name: %3, No of Records: %4 ,PageSize:%5",r[34]="%1 - %2, %3 %4, Query: %5",r[35]="%1 - %2, %3 Error caused by %4. Line Number: %5 Error Message: %6",r[36]="%1 - %2, %3 is set to: %4 Name: %5",r[37]="%1 - %2, Cannot perform %3 since %4 Name: %5",r[44]="%1 - %2, %3 :%4",r[45]="%1 - %2, Invoked service for - Name :%3; Type :%4; Method :%5; ExtType :%6",
r[47]="%1 - %2, Cannot update the field(ReadOnly) :%3",r[48]="%1 - %2, Getting Pick Applet info for View :%3; AppletName :%4; FieldName :%5",r[50]="%1 - %2, Service Name: '%3', Method Name: '%4'",r[51]="%1 - %2, No response found for %3  , ObjectName: %4",r[52]="%1 - %2, Field definition missing for FieldName :%3 Buscomp :%4",r[53]="%1 - %2, %3 Applet definition missing: %4",r[54]="%1 - %2, %3",r[55]="%1 - %2, Could not find the definition of field '%3' in '%4'",r[56]="%1 - %2, Could not find the definition of: '%3'",r[57]="%1 - %2, Could not find System Preference: '%3'",r[58]="%1 - %2, Could not find LOVs for type: '%3'",r[59]="%1 - %2, Could not find the definition of BusComp: %3 (if intersection table then ignore this log)",r[60]="%1 - %2, Could not find LOV value for '%3' in LOV Type '%4'.",r[61]="%1 - %2, Could not find LOV name for '%3' in LOV Type '%4'.",r[68]="%1 - %2, UnSupported Request : '%3' is not supported in Disconnected Client",r[69]="%1 - %2, Changed requestIdentifier from %3 to %4 for ObjectName: %5",r[70]="%1 - %2, SQL Error in executing query: %3 ",r[71]="%1 - %2, Sql Error Message: %3 , ErrorCode : %4",r[72]="%1 - %2, SQL Error in executing query: %3 BindVariable : %4",r[73]="%1 - %2, Action Posted: %3 ",r[74]="%1 - %2,%3 PS is generated and sent for response processing",r[75]="%1 - %2,%3 %4, %5 %6, Src Field '%7', value '%8'",r[91]="Invalid Date format entered",r[92]="%1 - %2, Popup handling is not done for ControlType: '%3'",r[93]="%1 - %2, Error during parsing the expression: '%3'",r[97]="%1 - %2, Error: '%3' is not available in offline mode.",r[98]="%1 - %2, Navigating to Bookmarked View: '%3' ",r[99]="%1 - %2, Bookmarked View Context: '%3' ",r[100]="%1 - %2, Added Bookmark: '%3' ",r[110]="%1 - %2, Could not fetch data for dynamic picklist: '%3'. Dynamic Picklists are not supported in disconnected mode.",r[111]="%1 - %2, Server Script  interface method  is unsupported",t.set("DMGlobalLogMsgArray",r);var i=[];i[0]="SqlInsertRecord",i[1]="ParseAndCacheData",i[2]="ParseData",i[3]="PostDataCaching",i[4]="ParseAndCacheMetadata",i[5]="OnSuccessfulMetaDataDownload",i[6]="ProcessToolbarResponse",i[7]="Ajax",i[8]="ParseAndCachePickAppletInfo",i[9]="SetFieldValue",i[10]="AppletSearchSpec",i[11]="InvokeMethod",i[12]="Execute",i[13]="CanNewAndBOL",i[14]="Populate",i[15]="GoBackToRecord",i[16]="OnActionEditField",i[17]="ShowFieldDetail",i[18]="MakePopup",i[19]="CreatePopup",i[20]="PrepareToInvokeMethod",i[21]="InvokeAppletMethod",i[22]="GetNotifyPropSet",i[23]="PostChangesToBC",i[24]="OnActionEditField",i[25]="GetPickAppletInfo",i[26]="DiscoverMetadata",i[27]="ActivateFieldList",i[28]="DeclareFrame",i[29]="BuildView",i[30]="GetBusObjDef",i[31]="GetLinkDef",i[32]="GetAppletDef",i[33]="GetPickListDef",i[34]="GetMIcons",i[35]="GetPickListHierarchical",i[36]="GetPickListHierarchicalSubArea",i[37]="GetBusServiceDef",i[38]="GetSystemPreference",i[39]="GetPickListGeneric",i[40]="GetLOV",i[41]="GetBusCompDef",i[42]="GetLovNameVal",i[43]="GetLovValName",i[44]="SetDefaultValues",i[45]="SearchSpec",i[46]="SortSpec",i[47]="SetCommitPending",i[48]="MultiSelectMode",i[49]="UpdateSync",i[50]="Unique Keys",i[51]="SqlUpdateRecord",i[52]="AddRecord via Assoc Applet",i[53]="GetFieldDefn",i[54]="UpSync",i[55]="PurgeRecord",i[56]="OnCall",i[57]="DeleteTable",i[58]="CreateTable",i[59]="InsertRecordSet",i[60]="SelectAll",i[61]="OfflineRequestHandler",i[62]="GetReturnPropSet",i[63]="ActivateFields",i[64]="Home",i[65]="ProcessUpSync",i[66]="SelectAllUpSync",i[67]="Execute",i[68]="UpdateRecord",i[69]="CheckRequiredFields",i[70]="CanWriteRecord",i[71]="OnActionPostChanges",i[72]="SetActiveRow",i[73]="FieldValue",i[74]="ValidateFieldDef",i[75]="SetUpdated",i[76]="UpdateParentRecord",i[77]="WriteRecord",i[78]="SetLinkDef",i[79]="FieldValidation",i[80]="ValidatePickValue",i[81]="GetPickList",i[82]="DoBldQueryText",i[83]="PickCurrentRow",i[84]="Update",i[85]="AppCacheUpdate",i[86]="CheckServerConnection",i[87]="HandleNetworkUnavailablity",i[90]="HandleNullResponse",i[91]="HandleServerUnavailabilty",i[92]="Ping",i[93]="ValidateNetwork",i[94]="InvokeServiceMethod",i[95]="EndTime",i[96]="GetSearchSpec",i[97]="GetControlDef",i[98]="Parse",i[99]="SyncRequestBuilder",i[100]="ShowView",i[100]="PostCacheProcess",i[110]="GetPickListData",i[111]="ExecuteQuery2",i[112]="SetUserProperty",i[113]="SetNamedSearch",i[114]="SetFormattedFieldValue",i[115]="RefineQuery",i[116]="NextSelected",i[117]="FirstSelected",i[118]="GetFormattedFieldValue",i[119]="GetMVGBusComp",i[120]="GetNamedSearch",i[121]="LastRecord",i[122]="GetFieldValue",i[123]="PreviousRecord",i[270]="Buffer",i[271]="getString",i[272]="getValue",i[273]="[]",i[274]="putString",i[275]="putValue",i[276]="subBuffer",i[277]="toString",i[131]="GetDataSource",i[132]="IsViewReadOnly",i[133]="GetProfileAttr",i[134]="LoadUserAttributes",i[135]="LookupValue",i[136]="GetSharedGlobal",i[137]="LookupMessage",i[138]="RaiseError",i[139]="RaiseErrorText",i[140]="SetPositionId",i[141]="SetPositionName",i[142]="SetSharedGlobal",i[143]="Trace",i[144]="TraceOff",i[145]="TraceOn",i[146]="SetProfileAttr",i[151]="GetFirstProperty",i[152]="GetNextProperty",i[153]="GetProperty",i[154]="PropertyExists",i[155]="RemoveProperty",i[156]="SetProperty",i[161]="dynamicLink",i[162]="peek",i[163]="pointer",i[164]="poke",i[165]="memchr",i[166]="memcmp",i[167]="memcpy",i[168]="memmove",i[169]="memset",i[170]="isalnum",i[171]="isalpha",i[172]="isascii",i[173]="iscntrl",i[174]="isdigit",i[175]="isgraph",i[176]="islower",i[177]="isprint",i[178]="ispunct",i[179]="isspace",i[180]="isupper",i[181]="isxdigit",i[182]="toascii",i[183]="clearerr",i[184]="perror",i[185]="strerror",i[186]="chdir",i[187]="getcwd",i[188]="fclose",i[189]="feof",i[190]="fflush",i[191]="fgetc",i[192]="getc",i[193]="fgetpos",i[194]="fgets",i[195]="fopen",i[196]="fprintf",i[197]="fputc",i[198]="putc",i[199]="fputs",i[200]="fread",i[201]="freopen",i[202]="fscanf",i[203]="fseek",i[204]="fsetpos",i[205]="ftell",i[206]="fwrite",i[207]="mkdir"
,i[208]="remove",i[209]="rename",i[210]="rewind",i[211]="rmdir",i[212]="sscanf",i[213]="tmpfile",i[214]="tmpnam",i[215]="ungetc",i[216]="cosh",i[217]="div",i[218]="ldiv",i[219]="frexp",i[220]="ldexp",i[221]="modf",i[222]="rand",i[223]="sinh",i[224]="srand",i[225]="tanh",i[226]="rsprintf",i[227]="sprintf",i[228]="strchr",i[229]="strcspn",i[230]="stricmp",i[231]="strcmpi",i[232]="strlwr",i[233]="strncat",i[234]="strncmp",i[235]="strncmpi",i[236]="strnicmp",i[237]="strncpy",i[238]="strpbrk",i[239]="strrchr",i[240]="strspn",i[241]="strstr",i[242]="strstri",i[243]="asctime",i[244]="clock",i[245]="difftime",i[246]="gmtime",i[247]="localtime",i[248]="mktime",i[249]="tmpnam",i[250]="bsearch",i[251]="getenv",i[252]="putenv",i[253]="qsort",i[254]="system",i[255]="atof",i[256]="atoi",i[257]="atol",i[258]="fmod",i[259]="strcat",i[260]="strcmp",i[261]="strcpy",i[262]="strlen",i[263]="strlwr",i[264]="strtod",i[265]="strtol",i[266]="strupr",i[267]="tolower",i[268]="toupper",i[278]="COMCreateObject",i[279]="undefine",t.set("DMGlobalMethodArray",i),typeof SiebelApp.CancelOperation=="undefined"&&(SiebelApp.CancelOperation=function(){function e(){}return e}()),typeof SiebelApp.ContinueOperation=="undefined"&&(SiebelApp.ContinueOperation=function(){function e(){}return e}()),CancelOperation=new SiebelApp.CancelOperation,ContinueOperation=new SiebelApp.ContinueOperation;if(typeof SiebelApp.OfflineEvents=="undefined"){SiebelJS.Namespace("SiebelApp.OfflineEvents");var t=SiebelApp.Offlineconstants,s=t.get("DOUIREG_OBJ_TYPEAPPLICATION"),o=t.get("DOUIREG_OBJ_TYPEAPPLET"),u=t.get("DOUIREG_OBJ_TYPEBUSCOMP");SiebelApp.OfflineEvents={},SiebelApp.OfflineEvents[s]={Application_Start:"Start",Application_PreInvokeMethod:"InvokeMethod",Application_InvokeMethod:"InvokeMethod",Application_PreNavigate:"Navigate",Application_Navigate:"Navigate",loadevent:"loadevent"},SiebelApp.OfflineEvents[o]={WebApplet_PreInvokeMethod:"DoInvokeMethod",WebApplet_InvokeMethod:"DoInvokeMethod",WebApplet_PreCanInvokeMethod:"DoCanInvokeMethod",WebApplet_Load:"Load",loadevent:"loadevent"},SiebelApp.OfflineEvents[u]={BusComp_PreAssociate:"AddAssociation",BusComp_Associate:"AddAssociation",BusComp_ChangeRecord:"ChangeRecord",BusComp_PreInvokeMethod:"DoInvokeMethod",BusComp_InvokeMethod:"DoInvokeMethod",BusComp_PreNewRecord:"NewRecord",BusComp_NewRecord:"NewRecord",BusComp_PreDeleteRecord:"DeleteRecord",BusComp_DeleteRecord:"DeleteRecord",BusComp_PreGetFieldValue:"FieldValue",BusComp_PreQuery:"Execute",BusComp_Query:"Execute",BusComp_PreSetFieldValue:"SetFieldValue",BusComp_SetFieldValue:"SetFieldValue",BusComp_PreWriteRecord:"WriteRecord",BusComp_WriteRecord:"WriteRecord",BusComp_PreCopyRecord:"CopyRecord",BusComp_CopyRecord:"CopyRecord",loadevent:"loadevent"}}})(),function(){if(typeof SiebelApp.OfflineCacheConfig!="undefined")return;Namespace("SiebelApp.OfflineCacheConfig");var e=SiebelApp.Utils.DefineConstants;SiebelApp.OfflineCacheConfig=e();var t=SiebelApp.OfflineCacheConfig,n="OracleCRM811xLocalStore",r=localStorage.getItem("isAdfmContainer"),i=localStorage.getItem("isCompatibility"),s=i=="false";r=="1"&&s&&(n="OracleCRM811xLocalStore_"+window.sessionStorage.getItem("userloc")),t.set("OFFLINE_CACHE_DB_NAME",n),t.set("OFFLINE_CACHE_DB_DISP_NAME",n),t.set("REACTIVE_CACHE_TBL","LocalStore"),t.set("OFFLINE_CACHE_DB_VERSION",1),t.set("OFFLINE_CACHE_DB_MAXSIZE",47185920),t.set("REACTIVE_CACHE_TBL_COLS",{Request:"Request",Response:"Response",Status:"Status",StatusText:"StatusText",ResponseHeaders:"ResponseHeaders"}),t.set("PRO_METADATASTORE_DB",n),t.set("PRO_METADATASTORE_DB_DISP_NAME",n),t.set("PRO_METADATASTORE_DB_TBL","Metadata"),t.set("PRO_DB_PICKAPPLET_INFO_TBL","PickApltInfo"),t.set("PRO_DB_PICKFLD_MAP_TBL","BCFldPickMapInfo"),t.set("PRO_METADATASTORE_DB_VERSION",1),t.set("PRO_METADATASTORE_DB_MAXSIZE",52428800),t.set("PRO_METADATASTORE_DB_TBL_COLS",{ObjName:"ObjName",SweCmd:"SweCmd",Response:"Response",Type:"Type"}),t.set("PRO_DB_PICKAPPLET_INFO_TBL_COLS",{FldInfo:"FldInfo",PickApplet:"PickApplet"}),t.set("PRO_DB_PICKFLD_MAP_TBL_COLS",{BCName:"BCName",FldName:"FldName",PMap:"PMap",PConstraint:"PConstraint"}),t.set("CACHE_TYPE_REACTIVE","Reactive"),t.set("CACHE_TYPE_PROACTIVE","Proactive"),t.set("PRO_SYNCQUEUE_DB_TBL","Sync"),t.set("PRO_SYNCQUEUE_DB_VERSION",1),t.set("PRO_SYNCQUEUE_DB_MAXSIZE",52428800),t.set("PRO_SYNCQUEUE_DB_TBL_COLS",{TransactionId:"TransactionId",Request:"Request",SyncStatus:"SyncStatus",TransactionType:"TransactionType",BusComp:"BusComp",RowId:"RowId",LocalTxnInfo:"LocalTxnInfo",UpSyncTime:"UpSyncTime"}),t.set("PRO_DATASTORE_DB",n),t.set("PRO_DATASTORE_DB_VERSION",1),t.set("PRO_DATASTORE_DB_MAXSIZE",52428800),t.set("PRO_DB_PICKLIST_INFO_TBL","PickListInfo"),t.set("PRO_DB_PICKLIST_GENERIC_TBL","PickListGeneric"),t.set("PRO_DB_PICKLIST_INFO_TBL_COLS",{NAME:"NAME",BC:"BC",SrchSpec:"SrchSpec",SortSpec:"SortSpec",TypeFld:"TypeFld",LOVType:"LOVType"}),t.set("PRO_DB_PICKLIST_GENERIC_TBL_COLS",{Type:"Type",Name:"Name"});var r=window.localStorage.getItem("isAdfmContainer"),o=window.localStorage.getItem("BatchMode"),u=/(iPhone|iPod|iPad)/i.test(navigator.userAgent)&&/Safari/i.test(navigator.userAgent);u&&o=="1"&&r!="1"&&document.cookie.indexOf("restarted=")==-1&&localStorage.clear();var a=new Date;a.setTime(a.getTime()+863136e5),document.cookie="restarted="+new Date+";path=/;expires="+a.toUTCString()}(),typeof SiebelApp.OfflineUtils=="undefined"&&(SiebelJS.Namespace("SiebelApp.OfflineUtils"),SiebelApp.OfflineUtils=function(){function S(){var e;return this.m_mapTimer={},S=function(){return e},S.prototype=this,e=new S,e.constructor=S,e}function T(e,t){this.m_mapTimer[e]=t}function N(e){return this.m_mapTimer[e]}var e=SiebelAppFacade.FacadeConstants,t=SiebelApp.OfflineCacheConfig,n=SiebelApp.Offlineconstants,r=e.get("WEB_DB"),i=e.get("LOCAL_STORAGE"),s=window.localStorage,o=SiebelApp.Utils,u=SiebelApp.Constants,a=n.get("ALL"),f=n.get("METADATA_EX"),l=n.get("LOG_EVT_METADATA_EX"),c=n.get("DATA_EX_BASIC"),h=n.get("LOG_EVT_DATA_EX_BASIC"),
p=n.get("DATA_EX_DETAILED"),d=n.get("LOG_EVT_DATA_EX_DETAILED"),v=n.get("UPSYNC"),m=n.get("LOG_EVT_UPSYNC"),g=n.get("CLIENT_SYS"),y=n.get("LOG_EVT_CLIENT_SYS"),b=n.get("LOG_EVT_COMMON"),w=n.get("DM_LOG_CHAR_LIMIT"),E=n.get("DM_LOG_RECORD_COUNT"),x=new S;return S.prototype.RefreshPage=function(){window.location.reload()},S.prototype.GetBrowserStorage=function(e){var t=window.localStorage.getItem("isAdfmContainer"),n=window.localStorage.getItem("isCompatibility"),s={};switch(e){case r:t==1&&n&&n=="false"?s=SiebelApp.SQLDBCALLER:window.openDatabase&&(s=SiebelApp.WebDB);break;case i:s=SiebelApp.BrowserLocalStorage;break;default:t==1&&n&&n=="false"?s=SiebelApp.SQLDBCALLER:window.openDatabase?s=SiebelApp.WebDB:s=SiebelApp.BrowserLocalStorage}return s},S.prototype.GetOfflineCacheConfig=function(e){var n={};n.dbName=t.get("OFFLINE_CACHE_DB_NAME"),n.version=t.get("OFFLINE_CACHE_DB_VERSION"),n.displayName=t.get("OFFLINE_CACHE_DB_DISP_NAME"),n.maxSize=t.get("OFFLINE_CACHE_DB_MAXSIZE"),n.tables=[t.get("REACTIVE_CACHE_TBL"),t.get("PRO_SYNCQUEUE_DB_TBL"),t.get("PRO_METADATASTORE_DB_TBL"),t.get("PRO_DB_PICKAPPLET_INFO_TBL"),t.get("PRO_DB_PICKFLD_MAP_TBL")],n.columns={};var r=t.get("REACTIVE_CACHE_TBL_COLS");n.columns[t.get("REACTIVE_CACHE_TBL")]=[];for(var i in r)r[i]&&n.columns[t.get("REACTIVE_CACHE_TBL")].push(r[i]);var s=t.get("PRO_SYNCQUEUE_DB_TBL_COLS");n.columns[t.get("PRO_SYNCQUEUE_DB_TBL")]=[];for(var o in s)s[o]&&n.columns[t.get("PRO_SYNCQUEUE_DB_TBL")].push(s[o]);var u=t.get("PRO_METADATASTORE_DB_TBL_COLS"),a="";n.columns[t.get("PRO_METADATASTORE_DB_TBL")]=[];for(a in u)u[a]&&n.columns[t.get("PRO_METADATASTORE_DB_TBL")].push(u[a]);u=t.get("PRO_DB_PICKAPPLET_INFO_TBL_COLS"),n.columns[t.get("PRO_DB_PICKAPPLET_INFO_TBL")]=[];for(a in u)u[a]&&n.columns[t.get("PRO_DB_PICKAPPLET_INFO_TBL")].push(u[a]);u=t.get("PRO_DB_PICKFLD_MAP_TBL_COLS"),n.columns[t.get("PRO_DB_PICKFLD_MAP_TBL")]=[];for(a in u)u[a]&&n.columns[t.get("PRO_DB_PICKFLD_MAP_TBL")].push(u[a]);return n},S.prototype.IsValidServerResponse=function(e){if(e){var t=e.indexOf("<!DOCTYPE");if(t===0){var n=e.indexOf("manifest");if(n===-1)return!1}return!0}return!1},S.prototype.RemoveNonAlphaChars=function(e){return e=e.replace(/\W/g,""),e},S.prototype.eliminateDuplicates=function(e){var t,n=e.length,r=[],i={};for(t=0;t<n;t++)i[e[t]]=0;for(t in i)r.push(t);return r},S.prototype.GetLogMsg=function(e,t){var n=SiebelApp.S_App.Model.GetDMLogMsg(e);if(typeof n!="string")return n;var r=0;t&&(r=t.length);if(r>0){t[0]=SiebelApp.S_App.Model.GetDMClassName(t[0]),t[1]=SiebelApp.S_App.Model.GetDMMethodName(t[1]);var i="";for(var s=0;s<r;s++)i="%"+(s+1),n=n.replace(i,t[s])}return n},S.prototype.CcfLogEvent=function(e){var t=s.getItem("LogEvt"),n=e.length;if(n<2||!t)return;var r=e[0],i=e[1],u=!1;if(o.IndexOf([t],a)!==-1)u=!0;else switch(r){case l:o.IndexOf([t],f)!==-1&&(u=!0);break;case h:if(o.IndexOf([t],c)!==-1||o.IndexOf([t],p)!==-1)u=!0;break;case d:o.IndexOf([t],p)!==-1&&(u=!0);break;case m:o.IndexOf([t],v)!==-1&&(u=!0);break;case y:o.IndexOf([t],g)!==-1&&(u=!0);break;case b:u=!0}if(u){var E={},S="AllLogs",x=parseInt(s.getItem("LogRecordNum")||0,10),T=S+(x||""),N=s.getItem(T)||"[]";E.c=i,e.splice(0,2),E.p=e;try{n=N.length,n<w?N=JSON.parse(N):(N=[],x=x?++x:1,s.setItem("LogRecordNum",x),T=S+(x||"")),N.push(E),s.setItem(T,JSON.stringify(N))}catch(C){SiebelJS.Log("Can not log more data as quota exceed, local store is full!")}}},S.prototype.StartTime=function(e){var t=(new Date).getTime();T.call(this,e,t)},S.prototype.EndTime=function(e){var t,n,r;t=N.call(this,e),n=(new Date).getTime(),r=n-t,delete this.m_mapTimer[e];var i=e+"..."+r+"...milliseconds ";this.CcfLogEvent([b,27,15,95,i])},S.prototype.GetPreference=function(e,t){var n=SiebelApp.S_App.NewPropertySet();n.SetProperty("Category",e),n.SetProperty("Name",t),n.SetProperty("Type","DM_LOG_EVTS");var r={};r.async=!1,r.selfbusy=!0,r.scope=this,r.opdecode=!0,r.mask=!0;var i=n.EncodeAsString(),s=CCFMiscUtil_CreatePropSet(),a=a||CCFMiscUtil_CreatePropSet();n.GetProperty(u.get("SWE_BUSINESS_SERVICE"))===u.get("SWE_NUMERIC_TRUE")&&s.SetProperty(u.get("SWE_BUSINESS_SERVICE"),u.get("SWE_NUMERIC_TRUE")),s.SetProperty(u.get("SWE_CMD_ARG"),u.get("SWE_CMD_INVOKE_METHOD_STR")),s.SetProperty(u.get("SWE_SERVICE"),"Web Engine UI Preferences"),s.SetProperty(u.get("SWE_METHOD_STR"),"GetUserPreference"),s.SetProperty(u.get("SWE_INPUT_PS"),i),SiebelApp.S_App.SetDefaultArgs(s);var f=o.EncodeToQueryString(s),l=new Date,c=null;f=f+"&"+u.get("SWE_TIME_STAMP")+"="+l.getTime(),c={url:SiebelApp.S_App.GetPageURL(),data:f.split(" ").join("%20"),type:"POST",async:!1,contentType:"application/x-www-form-urlencoded",successfncallback:this.OnSuccessCallServer,errfncb:SiebelApp.S_App.OnFailureCallServer,context:{scope:SiebelApp.S_App,lp:r,outputPS:a,nPR:!0}},SiebelApp.AjaxRequestMgr.Ajax(c),n=null},S.prototype.OnSuccessCallServer=function(e,t,r){var i=CCFMiscUtil_CreatePropSet();i.DecodeFromString(e);var o=i.GetProperty(u.get("SWE_RPC_PROP_RETURN_STATUS"));if(i.GetProperty("Status")!==u.get("SWE_RPC_PROP_STATUS_ERROR")){var a=i.GetChildCount();for(var f=0;f<a;f++){var l=i.GetChild(f);if(l!==null&&l.GetType()==="ResultSet"){var c=l.GetProperty(n.get("LIC_VALUE"));s.setItem("LogEvt",c)}}}else i.SetPropertyStr(n.get("STATUS"),n.get("ACTION_RPC_COMPLETED")),e=i.EncodeAsString();SiebelApp.S_App.OnSuccessCallServer.call(this,e,t,r)},S.prototype.Log=function(e){var t=!1;IsOfflineModeEnabled()&&t&&SiebelJS.Log(e+" "+SiebelApp.OfflineUtils.GetTS())},S.prototype.GetRequestParam=function(e,t){var n="",r=-1;r=e.indexOf(t);if(r!==-1){var i=e.substring(r,e.length);i.indexOf("&")===-1?i=i.substring(i.indexOf("=")+1,i.length):i=i.substring(t.length,i.indexOf("&")),n=i.replace(/%20/g," ")}return n},S.prototype.GetTS=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),r=e.getFullYear(),i=("0"+t).slice(-2)+"/"+("0"+n).slice(-2)+"/"+r,s=e.getHours(),o=e.getMinutes(),u=e.getSeconds();return i+=" "+("0"+s).slice(-2)+":"+("0"+o).slice(-2)+":"+("0"+u).slice(-2)+" "
,i},S.prototype.ToTS=function(e,t){if(!e)return"";var n;if(t===!0){var r=e.getTime()+e.getTimezoneOffset()*6e4;n=new Date(r)}else n=e;var i=n.getMonth()+1,s=n.getDate(),o=n.getFullYear(),u=("0"+i).slice(-2)+"/"+("0"+s).slice(-2)+"/"+o,a=n.getHours(),f=n.getMinutes(),l=n.getSeconds();return u+=" "+("0"+a).slice(-2)+":"+("0"+f).slice(-2)+":"+("0"+l).slice(-2),u},S.prototype.UtcToLocal=function(e){if(!e)return null;var t=new Date(e+" UTC");return t},S.prototype.ToDate=function(e){var t=e.getMonth()+1,n=e.getDate(),r=e.getFullYear(),i=("0"+t).slice(-2)+"/"+("0"+n).slice(-2)+"/"+r;return i},S.prototype.GetToday=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),r=e.getFullYear(),i=t+"/"+n+"/"+r,s=0,o=0,u=0;return i+=" "+("0"+s).slice(-2)+":"+("0"+o).slice(-2)+":"+("0"+u).slice(-2)+" ",i},S.prototype.GetDate=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),r=e.getFullYear(),i=t+"/"+n+"/"+r;return i},S.prototype.RTrim=function(e,t){return e===undefined||t===undefined?"":(e.substring(e.length-t.length,e.length)===t&&(e=e.substring(0,e.length-t.length)),e)},S.prototype.StripQuotes=function(e){var t;return t=e.charAt(0),(t==='"'||t==="'")&&e.length>1&&e.charAt(e.length-1)===t&&(e=e.substring(1,e.length-1)),e},S.prototype.NotifyValueArray=function(e){var t=e,n="",r=e.length;for(var i=0;i<r;i++){var s=e[i].length;s=s.toString(),n+=s.concat("*",e[i])}return n},S.prototype.ProcessDPS=function(e,t,n,r,i){r||(r=n.length);for(var s=0;s<r;s++){var o=t.GetProperty(n[s]);SiebelApp.Utils.IsEmpty(o)||(i?e.SetPropertyStr(n[s],o):(e.SetPropertyStr(n[s],o),t.RemoveProperty(n[s])))}},S.prototype.GetDate=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),r=e.getFullYear(),i=t+"/"+n+"/"+r;return i},S.prototype.ConverttoUTCDate=function(e){var t,n=+e.substring(0,2),r=+e.substring(3,5),i=+e.substring(6,10),s=+e.substring(11,13),o=+e.substring(14,16),u=+e.substring(17,19),a=e.substring(20,22);return t=new SiebelApp.S_App.DatumUTCDateTimeObject,t.SetDateTime(i,n,r,s,o,u),t},S.prototype.JsonRecordSet=function(e){var t=SiebelJS.Dependency("SiebelApp.Utils").DecodeFromQueryString(e),n={};n.Request=e,n.RecordSet={},n.FieldValue=[],n.SweCommands={};var r,i,s;for(var o=!0;(s=t.EnumProperties(o))!==null;o=!1)s.search("OF_")!==-1?(r=s.split("OF_")[1],i=unescape(t.GetPropertyAsStr(s)),n.RecordSet[r]=i,n.FieldValue.push([r,i])):n.SweCommands[s]=unescape(t.GetPropertyAsStr(s));return n},S.prototype.GetTempId=function(){var e=(new Date).getTime();e=e.toString(36),e.length>6&&(e=e.substring(e.length-6));var t=Math.round(Math.random()*46655).toString(36),n=Math.round(Math.random()*46655).toString(36),r=e.concat(":",t,n).toUpperCase();return r},S.prototype.GetTempRowId=function(){var e=(new Date).getTime();e=e.toString(36);var t=Math.floor(Math.random()*5);e.length>6&&(e=e.substring(e.length-6),e=e.substring(0,t).concat(e.substring(t+1,6)));var n=Math.round(Math.random()*46655).toString(36),r=n.concat("-",e).toUpperCase();return r},S.prototype.Truncate=function(e,t){return e?(e=String(e),e.length>t?e.slice(0,t)+"...":e):""},S.prototype.TimerFactory=function(e,t){function u(){if(o)return;o=setTimeout(function(){f(),i()},r)}function a(){if(s)return;s=setInterval(e,n),o&&clearTimeout(o),u()}function f(){clearInterval(s),s=null,clearTimeout(o),o=null}t=t||{};var n=t.interval||6e4,r=t.timeout||18e5,i=t.onTimeout||function(){},s,o;return a(),{start:a,stop:f,restart:function(){f(),a()},isRunning:function(){return!!s}}},S.prototype.DefineExtentions=function(e,t,n){for(var r in t)t.hasOwnProperty(r)&&function(){var i=t[r],s=n[r];e.prototype[r]=function(){return SiebelApp.S_App.GetOfflineMode()?i.apply(this,arguments):s.apply(this,arguments)}}()},S.prototype.GetErrorMsg=function(e,t){var n=SiebelApp.S_App.OfflineLocaleObject.GetLocalString(e);if(!n||!t)return n;if(e==="LocaleErrFormattedToString")n='"'+t+'": '+n;else{var r,i=0,s;for(s=0;s<t.length&&s<8;s++)s===0?i=1:i+=1,r="%"+i,n=n.replace(r,t[s])}return n},x}());var parser=function(){function $(e,t,n){return new SourceLocation(e,new Position(t.first_line,t.first_column),new Position(n.last_line,n.last_column))}function J(e){var t=e.lastIndexOf("/"),n=e.substring(1,t),r=e.substring(t+1);return new RegExp(n,r)}function K(e){return e.charAt(0)==="0"?e.charAt(1).toLowerCase()==="x"?parseInt(e,16):parseInt(e,8):Number(e)}function Y(){this.yy={}}var e=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},t=[1,6],n=[1,20],r=[1,27],i=[1,28],s=[1,24],o=[1,25],u=[1,26],a=[1,5],f=[1,8],l=[1,9],c=[1,10],h=[1,11],p=[1,12],d=[1,13],v=[1,14],m=[5,11,17,22,23,24,25,32,33,36,37,38,39,40,41,42,43,44,48,49,50],g=[1,30],y=[1,31],b=[5,11,17,22,23,24,32,33,49,50],w=[1,45],E=[1,36],S=[1,37],x=[1,38],T=[1,39],N=[1,40],C=[1,41],k=[1,42],L=[1,43],A=[1,44],O=[1,46],M=[1,48],_=[5,11,17,25,32,33,36,37,38,39,40,41,42,43,44,48],D=[2,67],P=[1,56],H=[1,55],B=[1,58],j=[1,57],F=[1,59],I=[2,75],q=[5,11,12,17,22,23,24,25,32,33,36,37,38,39,40,41,42,43,44,48,49,50],R=[5,11,17,22,23,24,25,30,32,33,36,37,38,39,40,41,42,43,44,48,49,50],U=[1,69],z=[5,11,17,22,23,24,25,32,33,42,43,44,48,49,50],W=[10,11,12,20,22,23,24,25,26,27,28],X=[11,17],V={trace:function(){},yy:{},symbols_:{error:2,CSSQueryExpr:3,expression:4,EOF:5,queryExpr:6,constantOrIdentifier:7,constant:8,multiPartIdentifier:9,TOKEN_LPAREN:10,TOKEN_RPAREN:11,TOKEN_IDENTIFIER:12,Function:13,FieldName:14,EmbedExpression:15,parameterList:16,TOKEN_COMMA:17,"[":18,FieldIdentifierName:19,"]":20,TOKEN_EXPRESSION:21,TOKEN_MINUS:22,TOKEN_PLUS:23,TOKEN_DIVIDE:24,TOKEN_TILDE:25,TOKEN_PERCENT:26,TOKEN_HASH:27,TOKEN_NUMBER:28,TOKEN_STRING:29,"'":30,logicalExpr:31,TOKEN_OR:32,TOKEN_AND:33,TOKEN_NOT:34,qbeComparisonExpr:35,TOKEN_EQ:36,TOKEN_NE:37,TOKEN_LT:38,TOKEN_GT:39,TOKEN_LE:40,TOKEN_GE:41,TOKEN_LIKE:42,TOKEN_IS_NULL:43,TOKEN_IS_NOT_NULL:44,TOKEN_EXISTS:45,escapeCharString:46,arithmeticExpr:47,TOKEN_ESCAPE:48,TOKEN_MULTIPLY:49,TOKEN_CARET:50,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"TOKEN_LPAREN",11:"TOKEN_RPAREN",12:"TOKEN_IDENTIFIER",17:"TOKEN_COMMA"
,18:"[",20:"]",21:"TOKEN_EXPRESSION",22:"TOKEN_MINUS",23:"TOKEN_PLUS",24:"TOKEN_DIVIDE",25:"TOKEN_TILDE",26:"TOKEN_PERCENT",27:"TOKEN_HASH",28:"TOKEN_NUMBER",29:"TOKEN_STRING",30:"'",32:"TOKEN_OR",33:"TOKEN_AND",34:"TOKEN_NOT",36:"TOKEN_EQ",37:"TOKEN_NE",38:"TOKEN_LT",39:"TOKEN_GT",40:"TOKEN_LE",41:"TOKEN_GE",42:"TOKEN_LIKE",43:"TOKEN_IS_NULL",44:"TOKEN_IS_NOT_NULL",45:"TOKEN_EXISTS",48:"TOKEN_ESCAPE",49:"TOKEN_MULTIPLY",50:"TOKEN_CARET"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,3],[7,3],[7,1],[7,1],[7,1],[13,4],[16,1],[16,3],[14,3],[15,2],[19,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[8,1],[8,1],[8,3],[9,1],[9,2],[6,1],[31,3],[31,3],[31,2],[31,3],[31,1],[35,3],[35,2],[35,2],[35,3],[35,2],[35,2],[35,3],[35,2],[35,2],[35,3],[35,2],[35,2],[35,3],[35,2],[35,2],[35,3],[35,2],[35,2],[35,3],[35,2],[35,2],[35,4],[35,4],[35,4],[35,4],[35,4],[35,4],[35,4],[35,4],[35,1],[35,1],[46,3],[47,3],[47,3],[47,3],[47,3],[47,3],[47,3],[47,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return this.$=new QueryExprNode(o[a-1],$(null,u[a-1],u[a-1])),this.$;case 5:case 74:this.$=o[a-1];break;case 6:this.$=new ConstantNode("CONST_FUNCTION",o[a-2],$(null,u[a-2],u[a]));break;case 10:this.$=new FunctionNode("FUNC_NODE",o[a-3],new ParameterListNode("PARAMS_LIST_NODE",o[a-1],$(null,u[a-1],u[a-1])),$(null,u[a-3],u[a]));break;case 11:this.$=[new ParameterNode("PARAMS_NODE",o[a],$(null,u[a],u[a]))];break;case 12:this.$=o[a-2].concat(new ParameterNode("PARAMS_NODE",o[a],$(null,u[a-2],u[a])));break;case 13:this.$=new FieldNameNode(o[a-1],$(null,u[a-2],u[a-2]));break;case 14:this.$=new ExpressionNode("EMBEDDED_EXPRESSION",o[a],$(null,u[a-1],u[a]));break;case 15:this.$=[new IdentifierNode(o[a],$(null,u[a],u[a]))];break;case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:this.$=o[a-1].concat(new IdentifierNode(o[a],$(null,u[a-1],u[a])));break;case 26:this.$=new ConstantNode("CONST_NUMBER",o[a],$(null,u[a],u[a]));break;case 27:this.$=new ConstantNode("CONST_STRING",o[a],$(null,u[a],u[a]));break;case 28:this.$=new ConstantNode("CONST_STRING",o[a-2],$(null,u[a-2],u[a-2]));break;case 32:this.$=new BinaryOpNode("BINOPNODE_OR",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 33:this.$=new BinaryOpNode("BINOPNODE_AND",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 34:this.$=new UnOpNode("UNOPNODE_NOT",o[a],$(null,u[a-1],u[a]));break;case 35:this.$=o[a-1];break;case 37:this.$=new BinaryOpNode("BINOPNODE_CEQ",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 38:this.$=new BinaryOpNode("BINOPNODE_CEQ","NULL",o[a],$(null,u[a-1],u[a]));break;case 39:this.$=new BinaryOpNode("BINOPNODE_CEQ",o[a-1],"NULL",$(null,u[a-1],u[a]));break;case 40:this.$=new BinaryOpNode("BINOPNODE_CNE",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 41:this.$=new BinaryOpNode("BINOPNODE_CNE","NULL",o[a],$(null,u[a-1],u[a]));break;case 42:this.$=new BinaryOpNode("BINOPNODE_CNE",o[a-1],"NULL",$(null,u[a-1],u[a]));break;case 43:this.$=new BinaryOpNode("BINOPNODE_CLT",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 44:this.$=new BinaryOpNode("BINOPNODE_CLT",o[a-1],"NULL",$(null,u[a-1],u[a]));break;case 45:this.$=new BinaryOpNode("BINOPNODE_CLT","NULL",o[a],$(null,u[a-1],u[a]));break;case 46:this.$=new BinaryOpNode("BINOPNODE_CGT",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 47:this.$=new BinaryOpNode("BINOPNODE_CGT","NULL",o[a],$(null,u[a-1],u[a]));break;case 48:this.$=new BinaryOpNode("BINOPNODE_CGT",o[a-1],"NULL",$(null,u[a-1],u[a]));break;case 49:this.$=new BinaryOpNode("BINOPNODE_CLE",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 50:this.$=new BinaryOpNode("BINOPNODE_CLE",o[a-1],"NULL",$(null,u[a-1],u[a]));break;case 51:this.$=new BinaryOpNode("BINOPNODE_CLE","NULL",o[a],$(null,u[a-1],u[a]));break;case 52:this.$=new BinaryOpNode("BINOPNODE_CGE",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 53:this.$=new BinaryOpNode("BINOPNODE_CGE",o[a-1],"NULL",$(null,u[a-1],u[a]));break;case 54:this.$=new BinaryOpNode("BINOPNODE_CGE","NULL",o[a],$(null,u[a-1],u[a]));break;case 55:this.$=new BinaryOpNode("BINOPNODE_CLIKE",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 56:this.$=new UnOpNode("UNOPNODE_ISNULL",o[a-1],$(null,u[a-1],u[a]));break;case 57:this.$=new UnOpNode("UNOPNODE_ISNOTNULL",o[a-1],$(null,u[a-1],u[a]));break;case 58:this.$=new UnOpNode("UNOPNODE_EXISTS",o[a-1],$(null,u[a-3],u[a]));break;case 59:this.$=new BinaryOpNode("BINOPNODE_CEQ",o[a-3],o[a-1],$(null,u[a-3],u[a]));break;case 60:this.$=new BinaryOpNode("BINOPNODE_CNE",o[a-3],o[a-1],$(null,u[a-3],u[a]));break;case 61:this.$=new BinaryOpNode("BINOPNODE_CLT",o[a-3],o[a-1],$(null,u[a-3],u[a]));break;case 62:this.$=new BinaryOpNode("BINOPNODE_CGT",o[a-3],o[a-1],$(null,u[a-3],u[a]));break;case 63:this.$=new BinaryOpNode("BINOPNODE_CLE",o[a-3],o[a-1],$(null,u[a-3],u[a]));break;case 64:this.$=new BinaryOpNode("BINOPNODE_CGE",o[a-3],o[a-1],$(null,u[a-3],u[a]));break;case 65:this.$=new BinaryOpNode("BINOPNODE_CLIKE",o[a-3],o[a-1],$(null,u[a-3],u[a]));break;case 68:this.$=new EscapeCharaterNode("ESCAPECHAR_NODE",o[a-2],o[a-1],o[a],$(null,u[a-2],u[a]));break;case 69:this.$=new BinaryOpNode("BINOPNODE_APLUS",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 70:this.$=new BinaryOpNode("BINOPNODE_AMINUS",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 71:this.$=new BinaryOpNode("BINOPNODE_AMULTIPLY",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 72:this.$=new BinaryOpNode("BINOPNODE_ADIVIDE",o[a-2],o[a],$(null,u[a-2],u[a]));break;case 73:this.$=new BinaryOpNode("BINOPNODE_APOWER",o[a-2],o[a],$(null,u[a-2],u[a]))}},table:[{3:1,4:2,6:3,7:17,8:18,9:19,10:t,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,31:4,34:a,35:7,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{1:[3]},{5:[1,29]},e(m,[2,2]),e([5,11,17,22,23,24,25,36,37,38,39,40,41,42,43,44,48,49,50],[2,31],{32:g,33:y}),{7:17,8:18,9:19,10:t,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,31:32,34:a,35:7,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:35,8:18,9:19,10:t,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,31:33,34:a,35
:7,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:34},e(b,[2,36],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:47,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:49,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:50,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:51,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:52,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:53,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{10:[1,54]},e(m,[2,66]),e(_,D,{22:P,23:H,24:B,49:j,50:F}),e(m,I),e(m,[2,3]),e(m,[2,4],{12:[1,60]}),e(q,[2,29],{10:[1,61]}),e(m,[2,7]),e(m,[2,8]),e(m,[2,9]),e(R,[2,26]),e(R,[2,27]),{8:62,28:s,29:o,30:u},{12:[1,64],19:63},{4:65,6:3,7:17,8:18,9:19,10:t,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,31:4,34:a,35:7,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{1:[2,1]},{7:17,8:18,9:19,10:t,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,31:66,34:a,35:7,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:t,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,31:67,34:a,35:7,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},e(m,[2,34]),{11:[1,68],32:g,33:y},e([25,32,33,36,37,38,39,40,41,42,43,44,48],D,{11:U,22:P,23:H,24:B,49:j,50:F}),e([22,23,24,25,32,33,36,37,38,39,40,41,42,43,44,48,49,50],I,{11:[1,70]}),e(z,[2,39],{46:15,47:16,7:17,8:18,9:19,13:21,14:22,15:23,35:71,10:M,12:n,18:r,21:i,28:s,29:o,30:u,36:f,37:l,38:c,39:h,40:p,41:d,45:v}),e(z,[2,42],{46:15,47:16,7:17,8:18,9:19,13:21,14:22,15:23,35:72,10:M,12:n,18:r,21:i,28:s,29:o,30:u,36:f,37:l,38:c,39:h,40:p,41:d,45:v}),e(z,[2,44],{46:15,47:16,7:17,8:18,9:19,13:21,14:22,15:23,35:73,10:M,12:n,18:r,21:i,28:s,29:o,30:u,36:f,37:l,38:c,39:h,40:p,41:d,45:v}),e(z,[2,48],{46:15,47:16,7:17,8:18,9:19,13:21,14:22,15:23,35:74,10:M,12:n,18:r,21:i,28:s,29:o,30:u,36:f,37:l,38:c,39:h,40:p,41:d,45:v}),e(z,[2,50],{46:15,47:16,7:17,8:18,9:19,13:21,14:22,15:23,35:75,10:M,12:n,18:r,21:i,28:s,29:o,30:u,36:f,37:l,38:c,39:h,40:p,41:d,45:v}),e(z,[2,53],{46:15,47:16,7:17,8:18,9:19,13:21,14:22,15:23,35:76,10:M,12:n,18:r,21:i,28:s,29:o,30:u,36:f,37:l,38:c,39:h,40:p,41:d,45:v}),{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:77,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},e(m,[2,56]),e(m,[2,57]),{36:[1,78],37:[1,79],38:[1,80],39:[1,81],40:[1,82],41:[1,83],42:[1,84]},{29:[1,85]},e(b,[2,38],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),{7:35,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,47:86},e(b,[2,41],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,45],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,47],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,51],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,54],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:87,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,47:88},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,47:89},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,47:90},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,47:91},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,47:92},e(q,[2,30]),{4:95,6:3,7:17,8:18,9:19,10:t,11:[1,93],12:n,13:21,14:22,15:23,16:94,18:r,21:i,28:s,29:o,30:u,31:4,34:a,35:7,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{30:[1,96]},{10:[1,100],11:[1,101],12:[1,98],20:[1,97],22:[1,99],23:[1,102],24:[1,103],25:[1,104],26:[1,105],27:[1,106],28:[1,107]},e(W,[2,15]),e(m,[2,14]),e([5,11,17,22,23,24,25,32,36,37,38,39,40,41,42,43,44,48,49,50],[2,32],{33:y}),e(m,[2,33]),e(m,[2,35]),e(m,[2,74]),e(m,[2,5]),e(b,[2,37],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,40],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,43],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,46],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,49],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,52],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,55],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:108,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:109,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:110,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:111,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:112,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:113,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},{7:17,8:18,9:19,10:M,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,35:114,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},e(m,[2,68]),{11:U,22:P,23:H,24:B,49:j,50:F},{11:[1,115],25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O},e(_,[2,69],{22:P,23:H,24:B,49:j,50:F}),e(_,[2,70],{22:P,23:H,24:B,49:j,50:F}),e(_,[2,71],{22:P,23:H,24:B,49:j,50:F}),e(_,[2,72],{22:P,23:H,24:B,49:j,50:F}),e([5,11,17,25,32,33,36,37,38,39,40,41,42,43,44,48,50],[2,73],{22:P,23:H,24:B,49:j}),e(m,[2,6]),{11:[1,116],17:[1,117]},e(X,[2,11]),e(R,[2,28]),e(m,[2,13]),e(W,[2,16]),e(W,[2,17]),e(W,[2,18]),e(W,[2,19]),e(W,[2,20]),e(W
,[2,21]),e(W,[2,22]),e(W,[2,23]),e(W,[2,24]),e(W,[2,25]),e(b,[2,59],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,60],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,61],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,62],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,63],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,64],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(b,[2,65],{25:w,36:E,37:S,38:x,39:T,40:N,41:C,42:k,43:L,44:A,48:O}),e(m,[2,58]),e(m,[2,10]),{4:118,6:3,7:17,8:18,9:19,10:t,12:n,13:21,14:22,15:23,18:r,21:i,28:s,29:o,30:u,31:4,34:a,35:7,36:f,37:l,38:c,39:h,40:p,41:d,45:v,46:15,47:16},e(X,[2,12])],defaultActions:{29:[2,1]},parseError:function(t,n){if(!n.recoverable){var r=new Error(t);throw r.hash=n,r}this.trace(t)},parse:function(t){function w(e){r.length=r.length-2*e,s.length=s.length-e,o.length=o.length-e}var n=this,r=[0],i=[],s=[null],o=[],u=this.table,a="",f=0,l=0,c=0,h=2,p=1,d=o.slice.call(arguments,1),v=Object.create(this.lexer),m={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(m.yy[g]=this.yy[g]);v.setInput(t,m.yy),m.yy.lexer=v,m.yy.parser=this,typeof v.yylloc=="undefined"&&(v.yylloc={});var y=v.yylloc;o.push(y);var b=v.options&&v.options.ranges;typeof m.yy.parseError=="function"?this.parseError=m.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;var E=function(){var e;return e=v.lex()||p,typeof e!="number"&&(e=n.symbols_[e]||e),e},S,x,T,N,C,k,L={},A,O,M,_;for(;;){T=r[r.length-1];if(this.defaultActions[T])N=this.defaultActions[T];else{if(S===null||typeof S=="undefined")S=E();N=u[T]&&u[T][S]}if(typeof N=="undefined"||!N.length||!N[0]){var D="";_=[];for(A in u[T])this.terminals_[A]&&A>h&&_.push("'"+this.terminals_[A]+"'");v.showPosition?D="Parse error on line "+(f+1)+":\n"+v.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[S]||S)+"'":D="Parse error on line "+(f+1)+": Unexpected "+(S==p?"end of input":"'"+(this.terminals_[S]||S)+"'"),this.parseError(D,{text:v.match,token:this.terminals_[S]||S,line:v.yylineno,loc:y,expected:_})}if(N[0]instanceof Array&&N.length>1)throw new Error("Parse Error: multiple actions possible at state: "+T+", token: "+S);switch(N[0]){case 1:r.push(S),s.push(v.yytext),o.push(v.yylloc),r.push(N[1]),S=null,x?(S=x,x=null):(l=v.yyleng,a=v.yytext,f=v.yylineno,y=v.yylloc,c>0&&c--);break;case 2:O=this.productions_[N[1]][1],L.$=s[s.length-O],L._$={first_line:o[o.length-(O||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(O||1)].first_column,last_column:o[o.length-1].last_column},b&&(L._$.range=[o[o.length-(O||1)].range[0],o[o.length-1].range[1]]),k=this.performAction.apply(L,[a,l,f,m.yy,N[1],s,o].concat(d));if(typeof k!="undefined")return k;O&&(r=r.slice(0,-1*O*2),s=s.slice(0,-1*O),o=o.slice(0,-1*O)),r.push(this.productions_[N[1]][0]),s.push(L.$),o.push(L._$),M=u[r[r.length-2]][r[r.length-1]],r.push(M);break;case 3:return!0}}return!0}},Q=V.parse;V.parse=function(e,t){return V.wasNewLine=!1,V.newLine=!1,V.restricted=!1,Q.call(this,e)},V.parseError=function(e,t){if(!(t.expected&&t.expected.indexOf("';'")>=0&&(t.token==="}"||t.token==="EOF"||t.token==="BR++"||t.token==="BR--"||V.newLine||V.wasNewLine)))throw new SyntaxError(e)};var G=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this
.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(n)return n;if(this._backtrack){for(var s in i)this[s]=i[s];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");var i=this._currentRules();for(var s=0;s<i.length;s++){n=this._input.match(this.rules[i[s]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=s;if(this.options.backtrack_lexer){e=this.test_match(n,i[s]);if(e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}}return t?(e=this.test_match(t,i[r]),e!==!1?e:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0},performAction:function(t,n,r,i){var s=i;switch(r){case 0:return this.begin("INITIAL"),"REGEXP_LITERAL";case 1:n.yytext.match(/\r|\n/)&&(V.newLine=!0);if(V.restricted&&V.newLine)return this.unput(n.yytext),V.restricted=!1,";";break;case 2:n.yytext.match(/\r|\n/)&&(V.newLine=!0);if(V.restricted&&V.newLine)return this.unput(n.yytext),V.restricted=!1,";";break;case 3:n.yytext.match(/\r|\n/)&&(V.newLine=!0);if(V.restricted&&V.newLine)return this.unput(n.yytext),V.restricted=!1,";";break;case 4:return V.restricted=!1,"TOKEN_STRING";case 5:return V.restricted=!1,"TOKEN_IDENTIFIER";case 6:return V.restricted=!1,"TOKEN_NUMBER";case 7:return V.restricted=!0,"TOKEN_ESCAPE";case 8:return V.restricted=!0,"TOKEN_EXPRESSION";case 9:return"TRUE";case 10:return"FALSE";case 11:return"NULL";case 12:return"TOKEN_AND";case 13:return"TOKEN_OR";case 14:return"TOKEN_IS_NOT_NULL";case 15:return"TOKEN_IS_NULL";case 16:return"TOKEN_NOT";case 17:return"TOKEN_LPAREN";case 18:return"TOKEN_RPAREN";case 19:return"TOKEN_LIKE";case 20:return"TOKEN_LIKE";case 21:return"TOKEN_EQ";case 22:return"TOKEN_LE";case 23:return"TOKEN_NOT_STR";case 24:return"TOKEN_NE";case 25:return"TOKEN_LT";case 26:return"TOKEN_GE";case 27:return"TOKEN_GT";case 28:return"TOKEN_EXISTS";case 29:return"TOKEN_PLUS";case 30:return"TOKEN_MINUS";case 31:return"TOKEN_MULTIPLY";case 32:return"TOKEN_DIVIDE";case 33:return"TOKEN_CARET";case 34:return"TOKEN_COMMA";case 35:return"TOKEN_TILDE";case 36:return"TOKEN_PERCENT";case 37:return"TOKEN_HASH";case 38:return"[";case 39:return"]";case 40:return"EOF";case 41:return"ERROR";case 42:console.log(n.yytext)}},rules:[/^(?:(((([^\n\r\*\\\/\[])|(\\([^\n\r]))|(\[([^\n\r\]\\]|(\\([^\n\r])))*\]))(([^\n\r\\\/\[])|(\\([^\n\r]))|(\[([^\n\r\]\\]|(\\([^\n\r])))*\]))*)\/(((([\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc])|[$_#%a-zA-Z]|(\\[u]([0-9a-fA-F]){4}))|([\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f])|[0-9])*)))/
,/^(?:\s+)/,/^(?:\/\*(.|\r|\n)*?\*\/)/,/^(?:\/\/.*($|\r\n|\r|\n))/,/^(?:(('')|(""(([^\"\\\n\r]+)|(\\((([\'\"\\bfnrtv])|([^\'\"\\bfnrtv0-9xu]))|((?:[1-7][0-7]{0,2}|[0-7]{2,3}))|([x]([0-9a-fA-F]){2})|([u]([0-9a-fA-F]){4})))|(\\(\r\n|\r|\n))|([#%\/\\]+))*"")|("")|("(([^\"\\\n\r]+)|(\\((([\'\"\\bfnrtv])|([^\'\"\\bfnrtv0-9xu]))|((?:[1-7][0-7]{0,2}|[0-7]{2,3}))|([x]([0-9a-fA-F]){2})|([u]([0-9a-fA-F]){4})))|(\\(\r\n|\r|\n))|([#%\/\\]+))*")|(''(([^\"\\\n\r]+)|(\\((([\'\"\\bfnrtv])|([^\'\"\\bfnrtv0-9xu]))|((?:[1-7][0-7]{0,2}|[0-7]{2,3}))|([x]([0-9a-fA-F]){2})|([u]([0-9a-fA-F]){4})))|(\\(\r\n|\r|\n))|([#%\/\\]+))*'')|('(([^\'\\\n\r]+)|(\\((([\'\"\\bfnrtv])|([^\'\"\\bfnrtv0-9xu]))|((?:[1-7][0-7]{0,2}|[0-7]{2,3}))|([x]([0-9a-fA-F]){2})|([u]([0-9a-fA-F]){4})))|(\\(\r\n|\r|\n))|([#%\/\\]+))*')))/,/^(?:((([\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc])|[$_#%a-zA-Z]|(\\[u]([0-9a-fA-F]){4}))((([\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc])|[$_#%a-zA-Z]|(\\[u]([0-9a-fA-F]){4}))|([\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f])|[0-9])*))/
,/^(?:((([0]|(([1-9])([0-9]+)*))\.([0-9]+)*(([eE])([+-]?[0-9]+))?)|(\.([0-9]+)(([eE])([+-]?[0-9]+))?)|(([0]|(([1-9])([0-9]+)*))(([eE])([+-]?[0-9]+))?)))/,/^(?:\{ESCAPE\})/,/^(?:Expr:)/,/^(?:true)/,/^(?:false)/,/^(?:null)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:IS ! NULL)/,/^(?:IS NULL)/,/^(?:!)/,/^(?:\()/,/^(?:\))/,/^(?:LIKE)/,/^(?:\[~\])/,/^(?:=)/,/^(?:<=)/,/^(?:NOT)/,/^(?:<>)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:EXISTS)/,/^(?:\+)/,/^(?:-)/,/^(?:\*)/,/^(?:\/)/,/^(?:\^)/,/^(?:,)/,/^(?:~)/,/^(?:%)/,/^(?:#)/,/^(?:\[)/,/^(?:\])/,/^(?:$)/,/^(?:.)/,/^(?:.)/],conditions:{REGEXP:{rules:[0],inclusive:!1},INITIAL:{rules:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!0}}};return e}();return V.lexer=G,Y.prototype=V,V.Parser=Y,new Y}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=parser,exports.Parser=parser.Parser,exports.parse=function(){return parser.parse.apply(parser,arguments)},exports.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),process.exit(1));var n=require("fs").readFileSync(require("path").normalize(t[1]),"utf8");return exports.parser.parse(n)},typeof module!="undefined"&&require.main===module&&exports.main(process.argv.slice(1))),typeof SiebelApp.Query=="undefined"&&(Namespace("SiebelApp.Query"),SiebelApp.Query=function(){var e=SiebelJS.Dependency("SiebelApp.Utils"),t=SiebelApp.OfflineUtils,n=SiebelApp.Offlineconstants,r=n.get("LOG_EVT_CLIENT_SYS"),i,s=function(){var e;return s=function(){return e},s.prototype=this,e=new s,e.constructor=s,e};return i=new s,s.prototype.PreProcessExpr=function(e){function i(e,t){return e.replace(n,function(e){var n=e;return $.each(r,function(n,r){var i=t?n:r,s=t?r:n,o=new RegExp(i,"ig");e=e.replace(o,s)}),e})}var t=/(?:^|])(.*?)(?:\[|$)/ig,n=/(([,()]\s*["']{2}\s*[^()]+)(?=.*?)([^()]+\s*["']{2}\s*[,()]))/ig,r={" and ":" _\u2744_ "," or ":" _\u2745_ "," not ":" _\u2746_ "};e=i(e,!0),e=e.replace(t,function(e){return e.replace(/ not /ig," ! ").replace(/ or /ig," || ").replace(/ and /ig," && ")}),e=i(e,!1),e=e.replace(t,function(e){return e.replace(/\s+!\s+/ig," ! ")}),e=e.replace(t,function(e){return e.replace(/\s+is\s+null/ig," IS NULL ").replace(/\s+is\s+!\s+null/ig," IS ! NULL ")});var s=/(?:expr\s*:\s*)(.+?)(?:[^"]"[^"])/ig,o=/^([^"]*)\"|\"(?=[^"]*$)/ig,u=e.match(s);u&&(e=e.replace(/^\"|\"$/g,""),u[0]=u[0].replace(o,"$1"),e=e.replace(s,u[0]));var a=e.replace(/\+/g,"+\n").replace(/(?:and)(?=([^""\\]*(\\.|""([^"\\]*\\.)*[^""\\]*""))*[^""]*$)/g," && ");a=a.replace(/ o$$r /g," or ").replace(/ a$$n$$d /g," and ");var f=/,\s*["]{2}\s*[,)]{1}/g;return a=a.replace(f,function(e){return e.replace('""','""""')}),a},s.prototype.Parse=function(e){try{if(!e)return"";var n=SiebelApp.Query.PreProcessExpr(e),i=parser.parse(n);return i}catch(s){return t.CcfLogEvent([r,93,16,98,"  Error Message: "+s.message+" Expression: "+n]),""}},s.prototype.Evaluate=function(t,n,r,i){try{var s=t.evaluate(n,r,i);return e.IsEmpty(s)&&(s=""),typeof s=="number"?s.toString():typeof s=="object"&&typeof s.getClassName()!="undefined"&&s.getClassName()==="DatumUTCDateTimeObject"?s.GetAsString():s}catch(o){return SiebelJS.Log("Error:Query.prototype.Evaluate->"+o.message),""}},s.prototype.ParseAndEvaluate=function(e,t){var n=SiebelApp.Query.Parse(e);return SiebelApp.Query.Evaluate(n,t)},s.prototype.GetSearchSpec=function(e,n){try{var i=e.split("'"),s=i.length;for(var o=0;o<s;o++)o%2!=0&&(i[o]=i[o].replace(/ or /g," o$$r ").replace(/ and /g," a$$n$$d "));e=i.join("'"),e=e.replace(/ or /g," || ").replace(/ and /g," && ");var u=SiebelApp.Query.Parse(e),a=[];return a.push(u.BoldQuery(n)),a}catch(f){return t.CcfLogEvent([r,93,16,96,e]),[]}},s.prototype.GetFieldsFromExp=function(e,t){var n=[];if(e==="Calc"){n=t.match(/\[(.*?)\]/g);if(n)for(var r=0;r<n.length;r++)n[r]=n[r].replace(/[[\]]/g,"")}return(e==="Pre"||e==="Post")&&t.search("Field:")!==-1&&(t=t.replace("Field:",""),t=t.replace(/["']{1}/gi,""),t=t.replace(/['"]/g,""),n[0]=t.trim(t)),n&&(n=SiebelApp.OfflineUtils.eliminateDuplicates(n)),n||(n=[]),n},i}()),typeof SiebelApp.QueryHelper=="undefined"&&(Namespace("SiebelApp.QueryHelper"),SiebelApp.QueryHelper=function(){function o(e,t){return t?e.replace(/{{([\s\S]+?)}}/g,function(e,n){var r=t[n],i=$.type(r);return i!=="undefined"&&i!=="null"?r:n}):e}function u(e,t,n){var r,i,s,u="";r=new Date(n.m_nYear,n.m_nMonth-1,n.m_nDay),s=r.getTimezoneOffset(),r.setMinutes(r.getMinutes()+s),i=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),0,0),i.setHours(i.getHours()+23),i.setMinutes(i.getMinutes()+59);var a=r.getDate()<10?"0"+r.getDate():""+r.getDate(),f=r.getHours()<10?"0"+r.getHours():""+r.getHours(),l=r.getMinutes()<10?"0"+r.getMinutes():""+r.getMinutes(),c=r.getMonth()+1,h=c<10?("0"+c).slice(-2):""+c,p=i.getDate()<10?"0"+i.getDate():""+i.getDate(),d=i.getHours()<10?"0"+i.getHours():""+i.getHours(),v=i.getMinutes()<10?"0"+i.getMinutes():""+i.getMinutes(),m=i.getMonth()+1,g=m<10?("0"+m).slice(-2):""+m,y=r.getFullYear()+""+h+""+a+""+f+""+l,b=i.getFullYear()+""+g+""+p+""+d+""+v,w={"=":'{{value}} > "{{LR}}" AND {{value}} < "{{HR}}"',"<=":'{{value}} <= "{{HR}}"',">=":'{{value}} >= "{{LR}}"',"<":'{{value}} < "{{LR}}"',">":'{{value}} > "{{HR}}"'};return w["<>"]=w.LIKE=w["="],u=o(w[e],{value:t,LR:y,HR:b}),"("+u+")"}function a(e,t){var n=t.GetDefn().Fields;for(var r in n)if(n[r]&&SiebelApp.OfflineUtils.RemoveNonAlphaChars(r)===e)return r;return null}var e,t=SiebelApp.Utils,n=function(){var e;return n=function(){return e},n.prototype=this,e=new n,e.constructor=n,e};e=new n;var r,i,s;return n.prototype.SetContext=function(e,t,n){r=e,i=t,s=n},n.prototype.GetContext=function(e){return r},n.prototype.GetValue=function(e){return i},n.prototype.DeleteContext=function(){r=""},n.prototype.RemoveContext=function(e){e===r&&(r=null)},n.prototype.EvaluateConstantNode=function(e){var t=e.value.replace(/^["'](.*)["']$/,"$1"),n=/^["']+/,r=t.match(n);if(r){var i=new RegExp(r[0]+"$");t=t.replace(i,""
).replace(n,"")}return t},n.prototype.EvaluateConstantFunctionNode=function(e){var t="";switch(e.value.toUpperCase()){case"PARENTBCNAME":var n=SiebelApp.QueryHelper.GetContext();n&&(t=n.GetParentBusComp()?n.GetParentBusComp().GetName():"");break;case"TIMESTAMP":t=SiebelApp.OfflineUtils.GetTS();break;case"TODAY":t=new SiebelApp.S_App.DatumUTCDateTimeObject,t.SetToNow();break;case"LANGUAGE":t=SiebelApp.S_App.Model.GetLanguage();break;case"POSITIONID":t=SiebelApp.S_App.Model.GetPositionId();break;case"LOGINID":t=SiebelApp.S_App.Model.GetLoginId();break;case"LOGINNAME":t=SiebelApp.S_App.Model.GetLoginName()}return t},n.prototype.EvaluateIdentifierNode=function(e){return e.value},n.prototype.EvaluateConstantNumberNode=function(e){var t=e.value.replace(/['"]/g,"");return+t},n.prototype.EvaluateLenNode=function(e){var t=e.args.parameters[0];return String(t.evaluate()).length},n.prototype.EvaluateFieldNameNode=function(e){var n=e.arguments,r="",i="",o;for(var u=0;u<n.length;u++)r+=n[u].evaluate(),i+=n[u].evaluate()+" ";var a=SiebelApp.QueryHelper.GetContext(),f;s?f=s:f=a.GetWS()[a.GetActiveRow()];var l="",c="",h="";try{l=a.GetFieldDefn(i.substring(0,i.length-1))}catch(p){return""}if(!l){var d=SiebelApp.OfflineUtils.RemoveNonAlphaChars(i),v=a.GetDefn().Field;for(var m in v)if(SiebelApp.OfflineUtils.RemoveNonAlphaChars(m)===d){l=a.GetFieldDefn(m);break}}if(l){h=l.CalExpr;if(!t.IsEmpty(h)){if(!l.PreQuery){var g=SiebelApp.Query.Parse(h);l.PreQuery=g}o=SiebelApp.Query.Evaluate(l.PreQuery,a,null,f),f[r]=o}o=f[r];if(l!==null||l!=="")switch(l.DataType){case"1":c=t.IsEmpty(o)?"":o;break;case"2":c=t.IsEmpty(o)?"":o;break;case"3":c=new SiebelApp.S_App.DatumPhoneObject,c.SetAsString(o);break;case"4":c=t.IsEmpty(o)?"":o;break;case"5":c=t.IsEmpty(o)?"":o;break;case"6":c=t.IsEmpty(o)?"":o;break;case"7":break;case"8":c=new SiebelApp.S_App.DatumBoolObject,c.SetValue(o);break;case"9":if(t.IsEmpty(o)){c="";break}c=+o;break;case"10":if(t.IsEmpty(o)){c="";break}var y=+o.substring(0,2),b=+o.substring(3,5),w=+o.substring(6,10);c=new SiebelApp.S_App.DatumDateObject,c.SetDate(w,y,b);break;case"11":c=new SiebelApp.S_App.DatumTimeObject;var E=+o.substring(0,2),S=+o.substring(3,5),x=+o.substring(6,8),T=60*S+3600*E+x;c.SetValue(T);break;case"12":break;case"13":if(t.IsEmpty(o)){c="";break}var y=+o.substring(0,2),b=+o.substring(3,5),w=+o.substring(6,10),N=+o.substring(11,13),C=+o.substring(14,16),k=+o.substring(17,19),L=o.substring(20,22);L.toUpperCase()==="PM"&&(N+=12),c=new SiebelApp.S_App.DatumUTCDateTimeObject,c.SetDateTime(w,y,b,N,C,k);break;case"14":break;case"15":break;default:}}return c},n.prototype.EvaluateUnaryNotNode=function(e){var t=e.evaluate(),n=t===!0?!1:!0;return n},n.prototype.EvaluateUnaryIsNullNode=function(e){var n=e.evaluate();return t.IsEmpty(n)?!0:!1},n.prototype.EvaluateIfNullNode=function(e){var n=e.args.parameters[0],r=e.args.parameters[1],i=n.evaluate();return t.IsEmpty(i)&&(i=r.evaluate()),i},n.prototype.EvaluateUnaryIsNotNullNode=function(e){var n=e.evaluate();return t.IsEmpty(n)?!1:!0},n.prototype.EvaluateIIFNode=function(e){var t=e.args.parameters[0],n=e.args.parameters[1],r=e.args.parameters[2];return t.evaluate()?n.evaluate():r.evaluate()},n.prototype.EvaluateRowIdToRowIdNumNode=function(e){var t=e.args.parameters[0].evaluate();typeof t=="object"&&(t=t.GetId());var n=t.length,r=0,i=0,s="";do{var o=t.charAt(i),u=o.charCodeAt(0);isNaN(parseInt(o))?u>="A".charCodeAt(0)&&u<"Z".charCodeAt(0)?r=r*36+parseInt(u-"A".charCodeAt(0)+10):(s+=r.toString(),r=0,o&&(s+=o)):o>=0&&o<=9&&(r=r*36+parseInt(o)),i++}while(i<=n);return s},n.prototype.EvaluateFieldValueNode=function(e,t){return!1},n.prototype.EvaluateLookupValueNode=function(e){var t=e.args.parameters[0].param,n=e.args.parameters[1].param,r=t.evaluate(),i=n.evaluate();return SiebelApp.S_App.Model.GetLovNameVal(i,r)},n.prototype.EvaluateLookupNameNode=function(e){var t=e.args.parameters[0].param,n=e.args.parameters[1].param,r=t.evaluate(),i=n.evaluate();return SiebelApp.S_App.Model.GetLovValName(i,r)},n.prototype.EvaluateIsNullNode=function(e){var n=e.args[0],r=e.args[1],i=n.evaluate();return t.IsEmpty(i)?r.evaluate():i},n.prototype.EvaluateLeftNode=function(e){var t=e.args[0],n=e.args[1],r=t.evaluate(),i=n.evaluate();return r.substring(0,i)},n.prototype.EvaluateRightNode=function(e){var t=e.args[0],n=e.args[1],r=t.evaluate(),i=n.evaluate();return r.substring(r.length-i)},n.prototype.EvaluateMidNode=function(e){var t=e.args[0],n=e.args[1],r=e.args[2],i=t.evaluate(),s=n.evaluate(),o=r.evaluate();return i.substring(s,o)},n.prototype.EvaluateBinaryOpNode=function(e){var t=e.left==="NULL"?SiebelApp.QueryHelper.GetValue().body.evaluate():e.left.evaluate(),n=e.right==="NULL"?SiebelApp.QueryHelper.GetValue().body.evaluate():e.right.evaluate(),r=e.type,i;switch(r){case"BINOPNODE_APLUS":t=t||"",n=n||"",typeof t.add=="function"&&typeof n.add=="function"?i=t.add(n):typeof t.add=="function"&&typeof n.add!="function"?i=t.add(n):typeof t.add!="function"&&typeof n.add=="function"?i=n.add(t):i=t+n;break;case"BINOPNODE_AMINUS":typeof t.subtract=="function"&&typeof n.subtract=="function"?i=t.subtract(n):typeof t.subtract=="function"&&typeof n.subtract!="function"?i=t.subtract(n):typeof t.subtract!="function"&&typeof n.subtract=="function"?i=n.subtract(t):i=t-n;break;case"BINOPNODE_AMULTIPLY":i=t*n;break;case"BINOPNODE_ADIVIDE":typeof t.divide=="function"&&typeof n.divide=="function"?i=t.divide(n):i=t/n;break;case"BINOPNODE_APOWER":i=Math.pow(t,n);break;case"EQUAL":i=t===n?!0:!1;break;case"BINOPNODE_OR":t||n?i=!0:i=!1;break;case"BINOPNODE_AND":t&&n?i=!0:i=!1;break;case"BINOPNODE_CEQ":t===n?i=!0:i=!1;break;case"BINOPNODE_CNE":case"NOT_EQUAL":i=t!==n?!0:!1;break;case"BINOPNODE_CLE":t<=n?i=!0:i=!1;break;case"BINOPNODE_CGE":t>=n?i=!0:i=!1;break;case"BINOPNODE_CLT":typeof t.less=="function"&&typeof n.less=="function"?i=t.less(n):t<n?i=!0:i=!1;break;case"BINOPNODE_CGT":typeof t.greater=="function"&&typeof n.greater=="function"?i=t.greater(n):t>n?i=!0:i=!1}return i},n.prototype
.EvaluateEscapeCharaterNode=function(e){return e.value.value},n.prototype.EvaluateParentFieldValueNode=function(e){var t=e.args.parameters[0].evaluate(),n=SiebelApp.QueryHelper.GetContext(),r="";return n.GetParentBusComp()&&(r=n.GetParentBusComp().GetWS()[n.GetParentBusComp().GetActiveRow()][SiebelApp.OfflineUtils.RemoveNonAlphaChars(t)],r=r?r:""),r},n.prototype.BinaryOpNodeBoldQuery=function(e){var t=e.left,n=e.right,r=e.type,i=" ",s,o,a;if(r!=="BINOPNODE_OR"&&r!=="BINOPNODE_AND"){switch(r){case"BINOPNODE_CEQ":a="=";break;case"BINOPNODE_CNE":a="<>";break;case"BINOPNODE_CLT":a="<";break;case"BINOPNODE_CGT":a=">";break;case"BINOPNODE_CLE":a="<=";break;case"BINOPNODE_CGE":a=">=";break;case"BINOPNODE_CLIKE":a="LIKE"}return o=n.evaluate(),s=t.BoldQuery(),o&&typeof o.GetAsFormattedString=="function"?u(a,s,o):(n.type!=="ESCAPECHAR_NODE"&&(o='"'+o+'"'),i+="("+s+" "+a+" "+o+")",i)}if(r==="BINOPNODE_OR"||r==="BINOPNODE_AND")return s=t.BoldQuery(),o=n.BoldQuery(),a=r==="BINOPNODE_OR"?"OR":"AND",i="("+s+" "+a+" "+o+")",i},n.prototype.BoldQueryFieldNameNode=function(e){var t=e.arguments,n="",r="",i="",s=SiebelApp.QueryHelper.GetContext(),o=!1,u=SiebelApp.OfflineUtils.RemoveNonAlphaChars(s.GetName()),f=s.GetParentBusComp(),l=null;f&&(l=s.GetLinkDef(),l.interTableName&&(o=!0));for(var c=0;c<t.length;c++)n+=t[c].evaluate();r=SiebelApp.OfflineUtils.RemoveNonAlphaChars(n),SiebelApp.BrowserCacheMgr.DoesFieldExist(u,r)||SiebelJS.Log("Field"+r+"from the BC "+u+" not found");var i=a.call(this,r,s);if(o)if(s.GetDefn().InterFieldInfo.InterFieldArr.indexOf(i)!==-1){var h=s.GetDefn().Fields[i].ColName;l&&SiebelApp.BrowserCacheMgr.DoesFieldExist(l.interTableName,h)?r=SiebelApp.OfflineUtils.RemoveNonAlphaChars(l.interTableName)+"."+h:SiebelJS.Log("Column"+h+"from the intertable "+l.interTableName+" not found")}else r=u+".["+r+"]";else r="["+r+"]";var p=null;i&&(p=s.GetDefn().Fields[i]);if(!p||p.DataType!=="10"&&p.DataType!=="12"&&p.DataType!=="13")return r;var d;return d=s.DateFormatConverter(d,n),d},n.prototype.BoldQueryUnaryIsNullNode=function(e){var t=e.BoldQuery(),n="";return n+=t+" = "+'""',n},n.prototype.BoldQueryUnaryIsNotNullNode=function(e){var t=e.BoldQuery(),n="";return n+=t+" <> "+'""',n},n.prototype.BoldQueryBracesNode=function(e){var t="";return t=" ("+e.body.BoldQuery()+") ",t},n.prototype.BoldQueryFunctionNode=function(e){var t="";switch(e.name){case"EXISTS":t="1=1"}return t},n.prototype.BoldQueryParameterListNode=function(e){var t="";for(var n=0;n<e.parameters.length;n++)t+=e.parameters[n].BoldQuery();return t},n.prototype.BoldQueryParameterNode=function(e){var t="";return t=e.param.BoldQuery(),t},e}());if(typeof SiebelApp.S_App.OfflineErrorObject=="undefined"){SiebelJS.Namespace("SiebelApp.S_App.OfflineErrorObject");var consts=SiebelJS.Dependency("SiebelApp.Constants");SiebelApp.S_App.OfflineErrorObject=function(){function e(){var e="OK",t="",n={};n.SSAOMErrBoundedPick=consts.get("SSAOMErrBoundedPick"),n.SSAELErrUserDefinedError=consts.get("SSAELErrUserDefinedError"),n.SSAELErrGetFieldNotActive=consts.get("SSAELErrGetFieldNotActive"),this.ClearErrorMsg=function(){e="OK",t=""},this.SetErrorCode=function(t){e=t},this.GetErrorCode=function(){return e},this.GetErrorCodeString=function(){return n[e]?n[e]:e},this.SetErrorText=function(e){t=e},this.GetErrorText=function(){return t}}return e.prototype.SetErrorMsg=function(e,t,n,r,i,s,o){var u,a,f="%",l=SiebelApp.OfflineUtils,c=SiebelApp.Offlineconstants;if(e==="OK")return!0;if(e===this.GetErrorCode())return;this.SetErrorCode(e),u=SiebelApp.S_App.OfflineLocaleObject.GetLocalString(e),a=u;if(!u)this.SetErrorText(e);else if(t){if(e==="LocaleErrFormattedToString")a='"'+t+'": '+a;else{var h,p=0,d;for(d=0;d<t.length&&d<8;d++)d===0?p=1:p+=1,h=f+p,a=a.replace(h,t[d])}this.SetErrorText(a),l.CcfLogEvent([c.get("LOG_EVT_CLIENT_SYS"),27,s,o,a])}else this.SetErrorText(a),l.CcfLogEvent([c.get("LOG_EVT_CLIENT_SYS"),27,s,o,a])},e.prototype.HasErrorMsg=function(){return this.GetErrorText()&&this.GetErrorCode()!=="OK"?!0:!1},new e}()}typeof SiebelApp.SQLDBCALLER=="undefined"&&(SiebelJS.Namespace("SiebelApp.SQLDBCALLER"),SiebelApp.SQLDBCALLER=function(){function p(){var t,r=0,i=undefined;return p=function(){return n=JSON.parse(window.localStorage.getItem(e.get("TABLEINFO"))),t},p.prototype=this,t=new p,t.constructor=p,this.IncrementTxnCnt=function(){r++},this.DecrementTxnCnt=function(){r--;if(i&&this.GetTxnCnt()<=0){var e=i;i=undefined,e()}},this.SetPostTxnCallback=function(e){if(this.GetTxnCnt()<=0){e();return}i=e},this.GetTxnCnt=function(){return r},this.IsMemDB=function(){return SiebelApp.InMemDB!=undefined},t}function g(){return $.Deferred(function(e){e.resolve()}).promise()}function y(e){return $.Deferred(function(e){var t=setInterval(function(){SiebelJS.Log(""+new Date+"cordova ready"),clearInterval(t),e.resolve()},1e3)}).promise()}function b(e){var t=[];if(!e)return t;var n=e.GetChildCount();for(var r=0;r<n;r++){var i={},s=e.GetChild(r),o=s.GetPropertyCount(),u,a;for(var f=0;f<o;f++)f==0?u=s.GetFirstProperty():u=s.GetNextProperty(),a=s.GetProperty(u),i[u]=a;t.push(i)}return t}var e=SiebelApp.Offlineconstants,t=SiebelApp.OfflineUtils,n=null,r=0,i=0,s=0,o=0,u=0,a=0,f=0,l=0,c=0,h=0,d;d=new p;var v=$.Deferred(),m=$.Deferred();return function(){$.when(g(),y()).then(function(){v.resolve()})}(),p.prototype.Initialize=function(e){var t=e.dbName,n=e.version,r=e.displayName,i=e.maxSize,s=e.tables,o=e.columns,u="",a=this,f=$.Deferred();return SiebelApp.SQLDBCALLER.initDatabase(t,n,r,i).done(function(){if(s){var e=s.length,t=0;for(var n=0;n<s.length;n++)u=SiebelApp.SqlBuilder.CreateTable(s[n],o[s[n]]),SiebelApp.SQLDB.createTable({sql:a.IsMemDB()?u.sqlite:u,success:function(){t++,e==t&&(SiebelJS.Log("init online table successfully."),f.resolve(!0),f.resolve(!0))},error:function(e,t){SiebelJS.Log("Unknown error "+t.message+"."),f.reject(!1)}})}}),f.promise()},p.prototype.initDatabase=function(e,t,n,r){var i=$.Deferred();return v.done(function(){SiebelApp.SQLDB.createDataBase({dbName
:e,success:function(){SiebelJS.Log("create database successfully"),i.resolve()},error:function(e,t){i.reject(t),SiebelJS.Log("Unknown error "+t.message+".")}})}).fail(function(e){SiebelJS.Log(e)}),i.promise()},p.prototype.DeleteTable=function(n){SiebelApp.SQLDBCALLER.IncrementTxnCnt(),SiebelApp.SQLDB.executeSql({sql:n,values:[],success:function(e,t){SiebelApp.SQLDBCALLER.DecrementTxnCnt()},error:function(r,i){return SiebelApp.SQLDBCALLER.DecrementTxnCnt(),SiebelJS.Log("Oops.  Error was "+i.message),SiebelJS.Log("WebStore.DeleteTable -> DeleteQuery: "+n),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,57,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,57,i.message,"0000"]),!0}})},p.prototype.CreateTable=function(n){SiebelApp.SQLDBCALLER.IncrementTxnCnt(),SiebelApp.SQLDB.executeSql({sql:n,values:[],success:function(e,t){SiebelApp.SQLDBCALLER.DecrementTxnCnt()},error:function(r,i){return SiebelApp.SQLDBCALLER.DecrementTxnCnt(),SiebelJS.Log("Oops.  Error was "+i.message),SiebelJS.Log("WebStore.CreateTable -> CreateQuery: "+deletequery),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,58,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,58,i.message,"0000"]),!0}})},p.prototype.InsertRecordSet=function(n,r,i,s){var o=[],u=r.length,a="INSERT INTO "+n+" (",f=" VALUES (";for(var l=0;l<u;l++)a+=' "'+r[l]+'"',f+="?",l<u-1&&(a+=", ",f+=",");a+=")",f+=");",a+=f,$.each(i,function(e,t){t=t.slice(0,u),o.push(t)}),SiebelJS.Log(o.length);var c={};c.type="[RN]InsertRecordSet",c.table=n,c.count=o.length,c.starttime=new Date,SiebelApp.SQLDBCALLER.IncrementTxnCnt(),SiebelApp.SQLDB.insertRecordSet({sql:a,values:o,table:n,success:function(e,t){s&&s(),c.endtime=new Date,c.Profile=c.endtime.getTime()-c.starttime.getTime(),SiebelJS.Log(JSON.stringify(c)),SiebelApp.SQLDBCALLER.DecrementTxnCnt(),SiebelJS.Log("init offline "+n+" finished")},error:function(n,r){return c.endtime=new Date,c.Profile=c.endtime.getTime()-c.starttime.getTime(),c.type="[MAF]Error",SiebelJS.Log(JSON.stringify(c)),SiebelApp.SQLDBCALLER.DecrementTxnCnt(),SiebelJS.Log("[RN-InsertRecordSet]Oops.  Error was "+JSON.stringify(r)),SiebelJS.Log("WebStore.InsertRecordSet -> InsertQuery: "+a),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,59,a]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,59,r.message,"0000"]),!0}})},p.prototype.SelectAll=function(n,r,i){var s=this;SiebelApp.SQLDBCALLER.IncrementTxnCnt(),SiebelApp.SQLDB.executeQuery({sql:s.IsMemDB()?n:n.selectQuery,success:function(e,t){var n=b(t);i(n),SiebelApp.SQLDBCALLER.DecrementTxnCnt()},error:function(r,i){return SiebelApp.SQLDBCALLER.DecrementTxnCnt(),SiebelJS.Log("Oops.  Error was "+i.message),SiebelJS.Log("WebStore.SelectAll -> SelectQuery: "+n),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,60,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,60,i.message,"0000"]),!0}})},p.prototype.SelectAllUpSync=function(n,r){SiebelApp.SQLDBCALLER.IncrementTxnCnt(),SiebelApp.SQLDB.executeQuery({sql:n,success:function(e,t){var n=b(t);r(n),SiebelApp.SQLDBCALLER.DecrementTxnCnt()},error:function(r,i){return SiebelApp.SQLDBCALLER.DecrementTxnCnt(),SiebelJS.Log("Oops.  Error was "+i.message),SiebelJS.Log("WebStore.SelectAll -> SelectQuery: "+n),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,66,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,66,i.message,"0000"]),!0}})},p.prototype.SelectAll=function(n,r){var i=this,s={};s.type="[RN]SelectAll",s.table=r,s.starttime=new Date;var o=new $.Deferred;return SiebelApp.SQLDBCALLER.IncrementTxnCnt(),SiebelApp.SQLDB.executeQuery({sql:i.IsMemDB()?n:n.selectQuery,success:function(e,t){s.endtime=new Date,s.Profile=s.endtime.getTime()-s.starttime.getTime(),SiebelJS.Log(JSON.stringify(s));var n=b(t);o.resolve(n),SiebelApp.SQLDBCALLER.DecrementTxnCnt()},error:function(r,i){return SiebelApp.SQLDBCALLER.DecrementTxnCnt(),o.reject(null),SiebelJS.Log("Oops.  Error was "+i.message),SiebelJS.Log("WebStore.SelectAll -> SelectQuery: "+n),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,60,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,60,i.message,"0000"]),!0}}),o.promise()},p.prototype.ExecuteQuery=function(n,r,i){var s={};s.type="[RN]ExecuteQuery",s.query=n,s.starttime=new Date;var o=new $.Deferred;return SiebelApp.SQLDBCALLER.IncrementTxnCnt(),SiebelApp.SQLDB.executeQuery({sql:n,values:r,success:function(e,t){s.endtime=new Date,s.Profile=s.endtime.getTime()-s.starttime.getTime(),SiebelJS.Log(JSON.stringify(s));var n;i===!0&&(n=[]),SiebelApp.SQLDBCALLER.DecrementTxnCnt();if(t){var r=b(t);if($.isArray(r)){var u=r.length;i===!0?n=r.slice():u>0&&(n=r[0])}}o.resolve(n)},error:function(i,s){return SiebelApp.SQLDBCALLER.DecrementTxnCnt(),SiebelJS.Log("Oops.  Error was "+s.message),SiebelJS.Log("WebStore.Execute ->: "+n),r&&r.toString?t.CcfLogEvent([e.get("LOG_EVT_COMMON"),72,12,12,n,r.toString()]):t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,12,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,12,s.message,"0000"]),o.reject(s),!0}}),o.promise()},p.prototype.Execute=function(n,r,i){var s=new $.Deferred;return v.done(function(){SiebelApp.SQLDBCALLER.IncrementTxnCnt(),SiebelApp.SQLDB.executeSql({sql:n,values:r,success:function(e,t){var r;i===!0&&(r=[]),SiebelApp.SQLDBCALLER.DecrementTxnCnt();if(t){var o=JSON.parse(t);if($.isArray(o)){var u=o.length;if(i===!0)r=o.slice();else if(u>0){if(o[0]&&o[0].Response){var a=o[0].Response.replaceAll("\\n",""),f=a.replaceAll("</font>'>","</font>");o[0].Response=f}r=o[0]}}}console.log("WebStore.Execute:done:"+n),s.resolve(r)},error:function(i,o){return SiebelApp.SQLDBCALLER.DecrementTxnCnt(),SiebelJS.Log("Oops.  Error was "+o.message),SiebelJS.Log("WebStore.Execute ->: "+n),r&&r.toString?t.CcfLogEvent([e.get("LOG_EVT_COMMON"),72,12,12,n,r.toString()]):t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,12,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,12,o.message,"0000"]),s.reject(o),!0}})}),s.promise()},p.prototype.DoesTableExist=function(t){return n||(n=window.localStorage.getItem(e.get("TABLEINFO"))),n?n.hasOwnProperty(t):!1},p.prototype.UpdateRecord=function(n,r){var i=new 
$.Deferred;return SiebelApp.SQLDBCALLER.IncrementTxnCnt(),SiebelApp.SQLDB.executeSql({sql:n,values:[r],success:function(e,t){SiebelApp.SQLDBCALLER.DecrementTxnCnt(),i.resolve(t)},error:function(s,o){return SiebelApp.SQLDBCALLER.DecrementTxnCnt(),i.reject({code:o.code,message:o.message}),SiebelJS.Log("Oops.  Error was "+o.message),SiebelJS.Log("WebStore.UpdateRecord -> UpdateQuery: "+n),r?t.CcfLogEvent([e.get("LOG_EVT_COMMON"),72,12,67,n,r]):t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,67,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,67,o.message,"0000"]),!0}}),i.promise()},p.prototype.DoesFieldExist=function(t,r){var i=!1;this.IsMemDB()||(r=r.toUpperCase()),n||(n=JSON.parse(window.localStorage.getItem(e.get("TABLEINFO"))));if(n){var s=n[t];s&&(i=s.indexOf(r)!==-1)}return i},d}()),window._sqliteCallbacks={},window.callback=function(e){function t(e){const t=atob(e);var n=t.length;const r=new Uint8Array(n);for(var i=0;i<n;i++)r[i]=t.charCodeAt(i);var s=pako.inflate(r,{to:"string"});return s}var n=CCFMiscUtil_CreatePropSet(),r=e.startsWith("@0");if(r)n.DecodeFromString(e);else{var i=t(e);n.DecodeFromString(i)}var s=n.GetProperty("reqId"),o=n.GetProperty("success")=="true",u=n.GetProperty("data"),a="error";u||(u=n.GetChildByType("data",!1));if(!r&&u&&u.childArray&&u.childArray.length!=0){u.childArray.forEach(f);function f(e,n){var r=e.propArray.content;try{JSON.parse(r)}catch(i){e.propArray.content=t(r)}}}var l=window._sqliteCallbacks[s];l&&(o?(a="success",l.success&&l.success({},u)):(a=n.GetProperty("errorMessage"),l.error&&l.error({},{code:n.GetProperty("errorCode"),message:a})))},typeof SiebelApp.SQLDB=="undefined"&&(SiebelJS.Namespace("SiebelApp.SQLDB"),SiebelApp.SQLDB=function(){function s(){var t,r=0,i=undefined;return s=function(){return n=JSON.parse(window.localStorage.getItem(e.get("TABLEINFO"))),t},s.prototype=this,t=new s,t.constructor=s,this.IncrementTxnCnt=function(){r++},this.DecrementTxnCnt=function(){r--;if(i&&this.GetTxnCnt()<=0){var e=i;i=undefined,e()}},this.SetPostTxnCallback=function(e){if(this.GetTxnCnt()<=0){e();return}i=e},this.GetTxnCnt=function(){return r},t}function u(e){var t=e.length,n="",r="",i="";for(var s=0;s<t;s++)i=""+e[s],n+=i.length+(s==t-1?"#":"|"),r+=i;var o=n+r;return o}function a(){return(new Date).getTime()}function l(){return f++}function h(){return c++}function d(){var e=new Date;return""+e.getTime()+"_"+Math.floor(Math.random()*1e3)}function g(e,t,n){var r=Array.prototype.slice.apply(arguments,[3]),i=h(),s={methodName:e,start:a(),reqId:i},o="";r.length>1&&(o=r[1]);var u={success:t,error:n};_sqliteCallbacks[i]=u;var f="",l="",c=r.length,p=new Array(c);for(var g=0;g<c;g++)l=""+r[g],p[g]=l.length,f+=l;s.methodParamCount=c,s.methodParamLengths=p,l=JSON.stringify(s);var y=l.length+l+f;if(f.length>=v){console.log(""+new Date+"mytest:invokeSqliteMethodForLargeData:reqId:"+i+":params:"+f.length+":sql:"+o);var b=d(),w=Math.ceil(f.length/m),E=new Array(w),S=0;for(var g=0;g<w-1;g++)console.log(""+new Date+"mytest:invokeSqliteMethodForLargeData:reqId:"+i+":length:"+y.substring(S,S+m).length),E[g]=b+"|"+y.substring(S,S+m),S+=m;console.log(""+new Date+"mytest:invokeSqliteMethodForLargeData:reqId:"+i+":length:"+y.substring(S).length),E[g]=b+"|"+y.substring(S)+"|siebel_end";var x=0,T=function(){var e=E[x];x<w-1?(x++,window.ReactNativeWebView.postMessage(y)):window.ReactNativeWebView.postMessage(y)};T()}else window.ReactNativeWebView.postMessage(y)}var e=SiebelApp.Offlineconstants,t=SiebelApp.OfflineUtils,n=null,r="siebeldefaultdb",i=!1,o;o=new s,s.prototype.createDataBase=function(e){var t={dbName:""};$.extend(t,e),i&&console.log("createDataBase:"+JSON.stringify(t)),r=t.dbName,t.password&&t.password.length>0?g("createDatabase",t.success,t.error,r,t.password):g("createDatabase",t.success,t.error,r)},s.prototype.databaseExist=function(e){var t={dbName:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("databaseExist:"+JSON.stringify(t)),g("databaseExist",t.success,t.error,t.dbName)},s.prototype.deleteDB=function(e){var t={dbName:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("deleteDB:"+JSON.stringify(t)),g("deleteDatabase",t.success,t.error,t.dbName)},s.prototype.deleteMutiDB=function(e){var t={dbName:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("deleteMutiDB:"+JSON.stringify(t)),g("deleteDatabase",t.success,t.error,t.dbName)},s.prototype.initializeDatabaseFromScript=function(e){var t={filename:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("initializeDatabaseFromScript:"+JSON.stringify(t)),g("initializeDatabaseFromScript",t.success,t.error,r,t.filename)},s.prototype.initializeDatabaseFromFile=function(e){var t={sql:"",filename:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("initializeDatabaseFromFile:"+JSON.stringify(t)),g("initializeDatabaseFromFile",t.success,t.error,r,t.sql,t.filename)},s.prototype.createTable=function(e){var t={sql:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("createTable:"+JSON.stringify(t));if(t.sql.length==0)return;g("createTable",t.success,t.error,r,t.sql)},s.prototype.dropTable=function(e){var t={tableName:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("dropTable:"+JSON.stringify(t)),t.tableName&&t.tableName.length&&g("dropTable",t.success,t.error,r,t.tableName)},s.prototype.existTable=function(e){var t={tableName:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("existTable:"+JSON.stringify(t)),g("existTable",t.success,t.error,r,t.tableName)},s.prototype.renameTable=function(e){var t={oldTableName:"",newTableName:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("renameTable:"+JSON.stringify(t)),g("renameTable",t.success,t.error,r,t.oldTableName,t.newTableName)},s.prototype.insertRecord=function(e){i&&console.log("insertRecord:"+JSON.stringify(e)),SiebelApp.SQLDB.executeSql(e)};var f=0,c=0,p=1e3,v=6e5,m=5e5;return s
.prototype.insertRecordSet=function(e){var t={sql:"",values:[],success:function(){},error:function(){},table:"default"};$.extend(t,e),i&&console.log("insertRecordSet:"+JSON.stringify(t));var n="",s=1e5;console.log("----insertRecordSet_start-----"+t.sql);if(t.values.length==0)t.success(),console.log("----insertRecordSet:empty set-----"+t.sql);else if($.isArray(t.values[0])){var o=t.values,f=o.length,c=0,h=function(){for(;;){if(c>=f){if(n.length>0){var e=l();console.log("---===insertRecordSet_js_start:["+e+"]{"+a()+"}-"+n.length+"-"+t.sql),g("insertRecordSet",t.success,t.error,r,t.sql,n)}else t.success();break}var i=u(o[c]);n+=i.length+"@"+i;if(n.length>=s){c++;var e=l();console.log("---===insertRecordSet_js_start:["+e+"]{"+a()+"}-"+n.length+"-"+t.sql),g("insertRecordSet",function(e,t){n="",h()},t.error,r,t.sql,n);break}c++}};h()}else{var p=u(t.values);n=p.length+"@"+p,console.log("insertRecordSet---textLength:"+n.length);var d=l();g("insertRecordSet",t.success,t.error,r,t.sql,n,""+d)}},s.prototype.executeSql=function(e){var t={sql:"",values:[],success:function(){},error:function(){}};$.extend(t,e),console.log("executeSql:"+t.sql),i&&console.log("executeSql:"+JSON.stringify(t.values));if(!t.values||t.values.length==0)g("executeSql",t.success,t.error,r,t.sql);else{var n=new Array;if($.isArray(t.values[0]))for(var s=0;s<t.values.length;s++)n.push({v:t.values[s]});else n.push({v:t.values});g("executeSql",t.success,t.error,r,t.sql,JSON.stringify(n))}},s.prototype.executeQuery=function(e){var t={sql:"",values:[],success:function(){},error:function(){}};$.extend(t,e),i&&console.log("executeQuery:"+JSON.stringify(t));if(t.values.length==0)g("executeQuery",t.success,t.error,r,t.sql);else{var n=new Array;if($.isArray(t.values[0]))for(var s=0;s<t.values.length;s++)n.push({v:t.values[s]});else n.push({v:t.values});g("executeQuery",t.success,t.error,r,t.sql,JSON.stringify(n))}},s.prototype.createIndex=function(e){var t={tableName:"",indexName:"",cols:[],success:function(){},error:function(){}};$.extend(t,e),i&&console.log("createIndex:"+JSON.stringify(t));if(t.tableName.length>0&&t.indexName.length>0&&t.cols.length>0){var n={cols:t.cols};g("createIndex",t.success,t.error,r,t.tableName,t.indexName,JSON.stringify(n))}},s.prototype.createUniqueIndex=function(e){var t={tableName:"",indexName:"",col:"",success:function(){},error:function(){}};$.extend(t,e),console.log("createUniqueIndex:"+JSON.stringify(t)),t.tableName.length>0&&t.indexName.length>0&&t.col.length>0&&g("createUniqueIndex",t.success,t.error,r,t.tableName,t.indexName,t.col)},s.prototype.dropIndex=function(e){var t={tableName:"",indexName:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("dropIndex:"+JSON.stringify(t)),t.tableName.length>0&&t.indexName.length>0&&g("dropIndex",t.success,t.error,r,t.tableName,t.indexName)},s.prototype.getAllIndex=function(e){var t={tableName:"",success:function(){},error:function(){}};$.extend(t,e),i&&console.log("getAllIndex:"+JSON.stringify(t)),g("getAllIndex",t.success,t.error,r,t.tableName)},s.prototype.addColumn=function(e){var t={tableName:"",col:"",colType:"",success:function(){},error:function(){}};$.extend(t,e,!0),i&&console.log("addColumn:"+JSON.stringify(t)),t.tableName.length>0&&g("addColumn",t.success,t.error,r,t.tableName,t.col,t.colType)},s.prototype.addColumns=function(e){var t={tableName:"",column:{},success:function(){},error:function(){}};$.extend(t,e,!0),i&&console.log("addColumns:"+JSON.stringify(t)),t.tableName.length>0&&t.column.col&&t.colum.coltype&&g("addColumn",t.success,t.error,r,t.tableName,JSON.stringify(t.column))},o}()),typeof SiebelApp.OfflineAppSettings=="undefined"&&(Namespace("SiebelApp.OfflineAppSettings"),SiebelApp.OfflineAppSettings=function(){function y(){navigator.serviceWorker&&navigator.serviceWorker.controller&&(window.downLoadedFilescount=0,setTimeout(function(){navigator.serviceWorker.controller.postMessage({getbootStrapKey:"bsk"}),navigator.serviceWorker.controller.postMessage({setOfflineCache:siebelOfflinefiles}),window.localStorage.setItem("PrepareServiceWorker","true")},0),navigator.serviceWorker.onmessage=function(e){b(e.data.msgType,e.data.msg)})}function b(e,t){e==r.get("SW_UpdateProgressBar")?S(++window.downLoadedFilescount,t):e==r.get("SW_OFFLINE_BOOTSTRAP_KEY")?(sessionStorage.setItem("Bootstrapurl",t),window.ReactNativeWebView.postMessage('{"protocol": "OBSK::",  "offlineBootStrapKey":"'+t+'"}')):e==r.get("SW_STARTPROGRESSBAR")?x():e==r.get("SW_RemoveProgressBar")&&w()}function w(){SiebelApp.dlgProgress.Remove(),SiebelApp.S_App.uiStatus.Free(),SiebelApp.OfflineUtils.CcfLogEvent([SiebelApp.Offlineconstants.get("LOG_EVT_COMMON"),13,2,85,SiebelApp.OfflineUtils.GetTS()])}function E(e){n.setItem("appCacheDone",JSON.stringify(!0)),SiebelApp.dlgProgress.Remove(),SiebelApp.S_App.uiStatus.Free(),SiebelApp.OfflineUtils.CcfLogEvent([SiebelApp.Offlineconstants.get("LOG_EVT_COMMON"),12,2,85,SiebelApp.OfflineUtils.GetTS()]),SiebelJS.Log("Service worker Cache Downloaded...."+SiebelApp.OfflineUtils.GetTS()),SiebelApp.OfflineAppSettings.GetMode()&&SiebelApp.OfflineAppSettings.ReloadToOffline()}function S(e,t){console.log("updateProgressBar loadedfiles ="+e+"totalfiles="+t);if(e==t){E();return}var n=e/t*100,r=document.cookie,i=T();(r===null||r.length===0||r.indexOf("|sameuisession|")===-1)&&SiebelApp.OfflineAppSettings.SetUISessionCookie(),SiebelApp.dlgProgress.Update(n,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_APPCACHE_FILES",[e,t])),SiebelApp.S_App.uiStatus.m_gbusy===0&&(SiebelApp.S_App.uiStatus.IsBusy()||SiebelApp.S_App.uiStatus.Busy({mask:!0,timeOut:!1}))}function x(){var e=T();n.setItem("appCacheDone",JSON.stringify(!1)),SiebelApp.dlgProgress.Show("appcache",SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_APPCACHE_TITLE")),SiebelApp.OfflineUtils.CcfLogEvent([SiebelApp.Offlineconstants.get("LOG_EVT_COMMON"),10,2,85,SiebelApp.OfflineUtils.GetTS()]),SiebelJS.Log("Application Cache Downloading...."+SiebelApp.OfflineUtils.GetTS())}function T(){if(!
m&&SiebelAppFacade.HTMLTemplateManager&&SiebelAppFacade.HTMLTemplateManager.GenerateMarkup){var e=SiebelJS.Dependency("SiebelApp.Constants");m=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_IMAGECONTROL"),src:"images/white.gif",className:"appCacheProgress1"})}return m}var e,t=!1,n=window.localStorage,r=SiebelApp.Offlineconstants,i=r.get("DOUIREG_OBJ_NAME"),s=r.get("DOUIREG_OBJ_TYPE"),o=r.get("DOUIREG_OBJ_MTHD"),u=r.get("DOUIREG_EXT_TYPE"),a=r.get("DOUIREG_EXT_TYPEOVERRIDE"),f=r.get("DOUIREG_EXT_TYPEPRE"),l=r.get("DOUIREG_EXT_TYPEPOST"),c=r.get("DOUIREG_OBJ_TYPEAPPLET"),h=r.get("DOUIREG_EXT_CONTEXT"),p,d=function(){var r;JSON.parse(n.getItem("CacheType"))||n.setItem("CacheType",JSON.stringify("Reactive")),this.SetCacheType=function(e){n.setItem("CacheType",JSON.stringify(e))},this.GetCacheType=function(){return JSON.parse(n.getItem("CacheType"))},JSON.parse(n.getItem("UpSyncInProgress"))||n.setItem("UpSyncInProgress",JSON.stringify(!1)),this.SetUpSyncStatus=function(e){n.setItem("UpSyncInProgress",JSON.stringify(e))},this.GetUpSyncStatus=function(){return JSON.parse(n.getItem("UpSyncInProgress"))},this.SetSyncType=function(e){n.setItem("SyncType",e)},this.GetSyncType=function(){return n.getItem("SyncType")},this.SetUpSyncPostRefresh=function(e){n.setItem("UploadPostRefresh",JSON.stringify(e))},this.GetUpSyncPostRefresh=function(){return JSON.parse(n.getItem("UploadPostRefresh"))},this.GetSRN=function(){return n.getItem("SRN")},this.IsBatchMode=function(){return n.getItem("BatchMode")==="1"?!0:!1},JSON.parse(n.getItem("SyncPending"))||n.setItem("SyncPending",JSON.stringify(!1)),this.SetSyncStatus=function(e){n.setItem("SyncPending",JSON.stringify(e))},this.GetSyncStatus=function(){return JSON.parse(n.getItem("SyncPending"))};if(!JSON.parse(n.getItem("WorkOffline"))){var i=!1;n.setItem("WorkOffline",JSON.stringify(i))}this.SetMode=function(t,r){r||n.setItem("WorkOffline",JSON.stringify(t)),e=t},this.GetMode=function(){if(!t){e=JSON.parse(n.getItem("WorkOffline"));if(!e)e=JSON.parse(n.getItem("PackageDownloaded"))&&!navigator.onLine;else{var r=n.getItem("appURL");r&&(r=JSON.parse(r));var i=window.location,s=i.origin.concat(i.pathname);r!==s&&(e=!1)}t=!0}return e};if(!JSON.parse(n.getItem("PackageDownloaded"))){var s=!1;n.setItem("PackageDownloaded",JSON.stringify(s))}this.SetData=function(e){n.setItem("PackageDownloaded",JSON.stringify(e))},this.GetPkgStatus=function(){return JSON.parse(n.getItem("PackageDownloaded"))};if(!JSON.parse(n.getItem("CheckMetaDataDownload"))){var o=!1;n.setItem("CheckMetaDataDownload",JSON.stringify(o))}this.SetMetadata=function(e){n.setItem("CheckMetaDataDownload",JSON.stringify(e))},this.GetMetadata=function(){return JSON.parse(n.getItem("CheckMetaDataDownload"))};if(!JSON.parse(n.getItem("ReGenMetadata"))){var u=!1;n.setItem("ReGenMetadata",JSON.stringify(u))}this.SetReGenMetadata=function(e){n.setItem("ReGenMetadata",JSON.stringify(e))},this.GetReGenMetadata=function(){return JSON.parse(n.getItem("ReGenMetadata"))};if(!JSON.parse(n.getItem("Schema"))){var a=0;n.setItem("Schema",JSON.stringify(a))}return this.SetSchemaStatus=function(e){n.setItem("Schema",JSON.stringify(e))},this.GetSchemaStatus=function(){return JSON.parse(n.getItem("Schema"))},this.SetOfflineAttEnabled=function(e){n.setItem("OfflineAtt",JSON.stringify(e))},this.GetOfflineAttEnabled=function(){return JSON.parse(localStorage.getItem("OfflineAtt"))},this.SetIsADFMContainer=function(e){n.setItem("IsADFMContainer",JSON.stringify(e))},this.GetIsADFMContainer=function(){return JSON.parse(localStorage.getItem("IsADFMContainer"))},d=function(){return r},d.prototype=this,r=new d,r.constructor=d,r};p=new d,d.prototype.OnSuccessfulDataDownload=function(){this.SetCacheType("Proactive"),this.SetMode(!0),window.localStorage.getItem("isRNMobileApp")=="true"&&window.ReactNativeWebView.postMessage('{"protocol": "setofflinestatus:::"}'),this.SetData(!0),this.SetSchemaStatus(2);var e=window.location,t=e.origin.concat(e.pathname);n.setItem("appURL",JSON.stringify(t)),SiebelApp.S_App.Model.GetLoginName()||window.localStorage.setItem("UID",SiebelApp.S_App.GetUserName())},d.prototype.CheckSameDownloadCond=function(e){if(this.GetPkgStatus()){var t=n.getItem("appURL");t&&(t=JSON.parse(t));var r=window.location,i=r.origin.concat(r.pathname);if(t!==i)return!1;if(e){var s=SiebelJS.Dependency("SiebelApp.Constants");if(e.GetProperty(s.get("SWE_PROP_USER_ID"))!==SiebelApp.S_App.Model.GetLoginName())return!1}else if(SiebelApp.S_App.GetUserName&&SiebelApp.S_App.GetUserName()!==SiebelApp.S_App.Model.GetLoginName())return!1}return!0},d.prototype.OnSuccessfulMetaDataDownload=function(){SiebelApp.OfflineUtils.CcfLogEvent([SiebelApp.Offlineconstants.get("LOG_EVT_METADATA_EX"),11,2,5,SiebelApp.OfflineUtils.GetTS()]),this.SetData(!1),this.SetMetadata(!0),this.SetReGenMetadata(!1)},d.prototype.PostSync=function(){var e={};e[o]="PostSync",e[h]=this,e[u]=l,SiebelApp.S_App.Model.InvokeRegisteredSvc(e)},d.prototype.ReloadApp=function(){var e=JSON.parse(window.localStorage.getItem("appURL")),t=SiebelApp.S_App.GetActiveView().GetName(),n=SiebelApp.S_App.IsAutoOn();e=e+"?SWECmd=GotoView"+"&SWEView="+URLEncode(t);var r=Math.random();e=e+"&SWETS="+r,window.location.replace(e)},d.prototype.ReloadToOffline=function(e){function t(){this.SetUISessionCookie();var e=window.location;e.replace(e.origin.concat(e.pathname))}e?(SiebelApp.OfflineAppSettings.PostSync(),$.callback(this,function(e){t.call(this)})):t.call(this)},d.prototype.SetUISessionCookie=function(){var e=new Date;e.setTime(e.getTime()+31536e6),document.cookie="|sameuisession|=1;expires="+e.toGMTString()+";"};var v=null,m;if(window.localStorage.getItem("isRNMobileApp")!="true")v=window.applicationCache;else{var g=window.localStorage.getItem("PrepareServiceWorker")=="true"?!0:!1;g||y()}return v!=null&&(v.ondownloading=function(e){var t=T();n.setItem("appCacheDone",JSON.stringify(!1)),v.status!==1&&(SiebelApp.S_App.uiStatus.Busy({mask:!0,timeOut:!1}),SiebelApp.dlgProgress
.Show("appcache",SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_APPCACHE_TITLE")),SiebelApp.OfflineUtils.CcfLogEvent([SiebelApp.Offlineconstants.get("LOG_EVT_COMMON"),10,2,85,SiebelApp.OfflineUtils.GetTS()]),SiebelJS.Log("Application Cache Downloading...."+SiebelApp.OfflineUtils.GetTS()))},v.oncached=function(e){n.setItem("appCacheDone",JSON.stringify(!0)),SiebelApp.dlgProgress.Remove(),v.status===1&&(SiebelApp.S_App.uiStatus.Free(),SiebelApp.OfflineUtils.CcfLogEvent([SiebelApp.Offlineconstants.get("LOG_EVT_COMMON"),12,2,85,SiebelApp.OfflineUtils.GetTS()]),SiebelJS.Log("Application Cache Downloaded...."+SiebelApp.OfflineUtils.GetTS())),SiebelApp.OfflineAppSettings.GetMode()&&SiebelApp.OfflineAppSettings.ReloadToOffline()},v.onprogress=function(e){var t=e.total,n=e.loaded,r=n/t*100,i=document.cookie,s=T();(i===null||i.length===0||i.indexOf("|sameuisession|")===-1)&&SiebelApp.OfflineAppSettings.SetUISessionCookie(),SiebelApp.dlgProgress.Update(r,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_APPCACHE_FILES",[n,t])),SiebelApp.S_App.uiStatus.m_gbusy===0&&v.status!==1&&(SiebelApp.S_App.uiStatus.IsBusy()||SiebelApp.S_App.uiStatus.Busy({mask:!0,timeOut:!1}))},v.onupdateready=function(e){SiebelApp.dlgProgress.Remove(),SiebelApp.S_App.uiStatus.Free(),n.setItem("appCacheDone",JSON.stringify(!0))},v.onerror=function(e){SiebelApp.dlgProgress.Remove(),SiebelApp.S_App.uiStatus.Free(),SiebelApp.OfflineUtils.CcfLogEvent([SiebelApp.Offlineconstants.get("LOG_EVT_COMMON"),13,2,85,SiebelApp.OfflineUtils.GetTS()])}),p}()),typeof SiebelApp.RequestProcessor=="undefined"&&(Namespace("SiebelApp.RequestProcessor"),SiebelApp.RequestProcessor=function(){function o(){var e,t={};return o=function(){return e},o.prototype=this,e=new o,e.constructor=o,this.SetPrevReqObj=function(e){t=e},this.GetPrevReqObj=function(){return t},this.SetLayoutState=function(e,t){i=e,s=t},e}var e=SiebelJS.Dependency("SiebelApp.Utils"),t=SiebelApp.Offlineconstants,n=SiebelApp.Constants,r=SiebelApp.S_App,i=null,s,u=new o;return o.prototype.ProcessReq=function(n,o,u){var a=function(){return o.successfncallback.apply(o.context||this,arguments)},f=e.DecodeFromQueryString(n),l=unescape(f.GetPropertyAsStr(t.get("SWECMD"))),c=unescape(f.GetPropertyAsStr(t.get("SWEMETHOD"))),h="",p="",d="",v="",m=null;switch(l){case t.get("GOTOBOOKMARKVIEW"):case t.get("GOTOVIEW"):var g=r.GetActiveView();if(g){var y=g.GetBCBrokerList();if(y.length>0)for(var b=0;b<y.length;b++){var w=y[b].GetBC();w&&w.SetInQueryState(!1)}}v=t.get("VIEW_INFO"),h=unescape(f.GetProperty("SWEView")),SiebelApp.OfflineAppMgr.ShowView(n,l,a,h,v);break;case t.get("GETVIEWLAYOUT"):i?(v=i,p=r.GetActiveView().GetName(),h=p.concat("/",s),l=t.get("GETVIEWLAYOUT")):(v=t.get("VIEW_INFO"),h=unescape(f.GetProperty("SWEView")));var E=function(e,t){i=null,s=null,e=SiebelApp.OfflineAppMgr.ModifyLayout(e),a.apply(this,[e,t])};SiebelApp.BrowserCacheMgr.DiscoverMetadata(n,E,l,h,v);break;case t.get("NEWLAYOUT"):v=t.get("NEW_VIEW_INFO"),p=r.GetActiveView().GetName(),h=p.concat("/",s),l=t.get("GETVIEWLAYOUT"),SiebelApp.BrowserCacheMgr.DiscoverMetadata(n,a,l,h,v),i=null,s=null;break;case t.get("GETCACHEDFRAME"):var S=[],x=[];if(r.GetActiveView()){var T=this.GetPrevReqObj();if(T.reqType===t.get("EDIT_FIELD")){v=t.get("PICK_APLT_INFO"),h=T.searchVal,this.SetPrevReqObj({}),S=[n,a,l,h,v],x=SiebelApp.BrowserCacheMgr.DiscoverMetadata,SiebelApp.OfflineAppMgr.GetIsCreatingPopup()?SiebelApp.OfflineAppMgr.SetPendingOp(!0,x,S,SiebelApp.BrowserCacheMgr):(SiebelApp.S_App.ProcessCallbacks("refreshpopup",[]),x.apply(SiebelApp.BrowserCacheMgr,S));break}var N=r.GetActiveView().GetActiveApplet();if(N){i=null,f.PropertyExists("ObjName")&&f.PropertyExists("Type")?(h=f.GetProperty("ObjName").toString(),v=f.GetProperty("Type").toString()):(v=t.get("NEW_VIEW_INFO"),p=r.GetActiveView().GetName(),d=N.GetName(),h=p.concat("/",d)),S=[n,a,l,h,v],x=SiebelApp.BrowserCacheMgr.DiscoverMetadata,SiebelApp.OfflineAppMgr.GetIsCreatingPopup()?SiebelApp.OfflineAppMgr.SetPendingOp(!0,x,S,SiebelApp.BrowserCacheMgr):(SiebelApp.S_App.ProcessCallbacks("refreshpopup",[]),x.apply(SiebelApp.BrowserCacheMgr,S));break}}v=t.get("DEFAULT_VIEW_INFO"),h=unescape(f.GetProperty("SWEFrame")),SiebelApp.BrowserCacheMgr.DiscoverMetadata(n,a,l,h,v);break;case t.get("GOTOPOSTEDACTION"):v=t.get("DEFAULT_VIEW_INFO"),h=unescape(f.GetProperty("SWEFrame")),SiebelApp.BrowserCacheMgr.DiscoverMetadata(n,a,l,h,v);break;case t.get("TEXT"):v=t.get("DEFAULT_VIEW_INFO"),h="scriptfiles",SiebelApp.BrowserCacheMgr.DiscoverMetadata(n,a,l,h,v);break;case t.get("CANINVOKEMETHOD"):l=c,SiebelApp.OfflineAppMgr.CanInvokeMethod(f,l,a,n);break;case t.get("INVOKEMETHOD"):l=c,SiebelApp.OfflineAppMgr.InvokeMethod(f,l,a,n),$.callback(this,function(e){if(!e.err)return $.setReturnValue(e),e;var t=r.OfflineErrorObject;SiebelApp.OfflineAppMgr.ShowRPCError(t,a,n),t.ClearErrorMsg()});break;case SiebelApp.Constants.get("CLOSE_BY_X"):a.apply(this,[t.get("CLOSE_POPUP_X")]);break;default:n.search("scriptfiles.txt")!==-1?(l=t.get("TEXT"),v=t.get("DEFAULT_VIEW_INFO"),h="scriptfiles",SiebelApp.BrowserCacheMgr.DiscoverMetadata(n,a,l,h,v)):a.apply(this,[t.get("CUD_RESPONSE")])}},o.prototype.GetRequestType=function(r,s){var o="";s||(r=e.DecodeFromQueryString(r));var u=r.GetProperty(t.get("SWECMD")),a=r.GetProperty(t.get("SWEMETHOD"));u&&(u=u.toString()),a&&(a=a.toString());var f=[t.get("DRILLDOWN"),"DrillDown",t.get("NEWRECORD"),t.get("EDITRECORD"),t.get("WRITERECORD"),t.get("EDIT_FIELD"),t.get("POSITION_ON_ROW"),t.get("SWE_POST_CHANGES"),t.get("DELETERECORD"),t.get("ADDRECORD"),t.get("SWE_CLOSE_APPLET"),t.get("UNDORECORD"),t.get("UPDATEPREFMSG"),n.get("SWE_GET_PICK_INFO"),t.get("SCROLL_NEXT_DATA"),t.get("SCROLL_PREV_DATA"),t.get("GO_TO_NEXT_SET"),t.get("GO_TO_PREV_SET"),t.get("SCROLL_PREV_DATA"),t.get("PICKRECORD"),t.get("CREATERECORD"),t.get("EXECUTE_FRAME_QUERY"),t.get("FIND"),"Submit"];switch(u){case t.get("GOTOBOOKMARKVIEW"):case t.get("GOTOVIEW"):o=u;break;case t.get("GETVIEWLAYOUT"):i&&(u=t.get("NEWLAYOUT"
)),o=u;break;case t.get("GETCACHEDFRAME"):case t.get("GOTOPOSTEDACTION"):o=u;break;case t.get("GETAPPLETLAYOUT"):u=t.get("NEWLAYOUT"),o=u;break;case t.get("INVOKEMETHOD"):case t.get("CANINVOKEMETHOD"):f.indexOf(a)!==-1&&(o=a);break;default:!a&&!u&&(o=t.get("TEXT"))}return o},o.prototype.IsSupported=function(i,s,o){var u=null;s||(i=e.DecodeFromQueryString(i));var a=i.GetProperty(n.get("SWE_SERVICE"));a||(a=this.GetRequestType(i,!0)),o&&(u=function(){return o.successfncallback.apply(o.context||this,arguments)}),a||(a=i.GetProperty(t.get("SWECMD")),a&&a.toString()===t.get("INVOKEMETHOD")&&(a=i.GetProperty(t.get("SWEMETHOD"))));var f=!0;a&&(a=a.toString());switch(a){case t.get("MESSAGEBAR"):f=!1;break;case t.get("NEWRECORD"):var l=r.GetActiveView().GetActiveApplet();l&&l.GetParentApplet()&&l.GetPopupAppletName()&&(f=!0);break;default:f=!0}return u&&!f&&u.apply(this,[t.get("CUD_RESPONSE")]),f},o.prototype.GetCmdTag=function(e){var t=SiebelApp.OfflineAppMgr.GetCmdMap(),n=t.length,r=e;for(var i=0;i<n;i++)if(t[i].cmd===e){r=t[i].cmdTag;break}return r},o.prototype.IsCUDRequest=function(e){switch(e){case t.get("DELETERECORD"):case t.get("NEWRECORD"):case t.get("CREATERECORD"):return!0;default:return!1}},o.prototype.IsAssoc=function(e){var t=CCFMiscUtil_CreatePropSet();t.DecodeFromString(e);var r=t.GetProperty(n.get("SWE_RPC_PROP_RETURN_STATUS"));return r&&r.toString()===n.get("SWE_RPC_PROP_NEW_POPUP")?!0:!1},u}()),typeof SiebelApp.SqlBuilder=="undefined"&&(SiebelJS.Namespace("SiebelApp.SqlBuilder"),SiebelApp.SqlBuilder=function(){var e=SiebelApp.Offlineconstants,t=e.get("STRINGNULL"),n=e.get("STRINGUNDEFINED"),r=SiebelApp.OfflineUtils,i,s=function(){var e;return s=function(){return e},s.prototype=this,e=new s,e.constructor=s,e};return i=new s,s.prototype.BuildWhereClause=function(e,t,n,r,i){switch(e){case"=":case"<":case">":case">=":case"<=":case"!=":r?(r="( "+r,i?r=" "+r+" "+i+" ":r+=" AND "):r="(",r=r+" "+t+" "+e+" "+n,r+=")";break;case"IN":if(typeof n=="string")r?(r="( "+r,i?r=" "+r+" "+i+" ":r+=" AND "):r="(",r=r+" "+t+" IN "+n,r+=")";else{var s=n.length;if(s>0){r?(r="( "+r,i?r=" "+r+" "+i+" ":r+=" AND "):r="(",r=r+" "+t+" IN (",r=r+"'"+n[0]+"'";for(var o=1;o<s;o++)r+=" , ",r=r+"'"+n[o]+"'";r+=" )",r+=")"}}}return r},s.prototype.AddFields=function(e){e=r.RemoveNonAlphaChars(e);var t="DROP TABLE IF EXISTS "+e;return t},s.prototype.UpdateRecord=function(e,i,s,o,u,a,f,l){var c=SiebelApp.InMemBuilder.UpdateRecord(e,i,s,o,u,a,f,l);e=r.RemoveNonAlphaChars(e);var h="",p="UPDATE "+e+" SET"+" ";if(i){var d=i.length,v=null;for(var m=0;m<d;m++)a&&(v=a.indexOf(i[m])),a&&v!==-1?f[v]===t||f[v]===n?(p+=i[m]+" = ("+i[m]+' || ",'+l[v]+'")',m<d-1&&(p+=", ")):(p+=" "+i[m],p+=" = REPLACE("+i[m]+',"'+f[v]+'","'+l[v]+'")',m<d-1&&(p+=", ")):(p+=' "'+i[m]+'"',s[m]?(h=s[m].toString(),h=h?h.replace(/'/g,"''"):""):h="",p+=" = '"+h+"'",m<d-1&&(p+=", "))}return o&&(p+="  WHERE   ",p+=' "'+o,p+='" = ?'),p={sqlite:p,imdb:c,table:e,update:!0},p},s.prototype.CreateTable=function(e,t,n,i){var s=0;e=r.RemoveNonAlphaChars(e);var o="CREATE TABLE IF NOT EXISTS "+e+" (";if(t){o+=" RecordNum INTEGER PRIMARY KEY ASC, ";for(var u=0;u<t.length;u++)o+=' "'+t[u]+'" TEXT DEFAULT ""',s<t.length-1&&(o+=", ",s++);if(i){o+=",CONSTRAINT AB UNIQUE (Id)";if(n){var a=n.split(","),f=a.length;n='"'+a[0]+'"';for(var u=1;u<f;u++)n+=',"'+a[u]+'"';o+=",CONSTRAINT ABC UNIQUE ("+n+")"}}o+=")";var l=SiebelApp.InMemBuilder.CreateTable(e,t,n,i);return o={sqlite:o,imdb:l},o}},s.prototype.DeleteRecords=function(e,t,n,i){var s;e=r.RemoveNonAlphaChars(e),s="DELETE FROM "+e;if(t){var o=" WHERE ",u=t.length;for(var a=0;a<u;a++)a>0&&(o+=" "+n+" "),i?o+='"'+t[a]+'"  '+i+" ?":o+='"'+t[a]+'"  = ?';s+=o}var f=SiebelApp.InMemBuilder.DeleteRecords(e,t,n,i);return s={sqlite:s,imdb:f,table:e,update:!0},s},s.prototype.DeleteMutlipleRecord=function(e,t,n){var i;e=r.RemoveNonAlphaChars(e),i="delete FROM "+e+' WHERE "'+t+'" IN('+n+")";var s=SiebelApp.InMemBuilder.DeleteMutlipleRecord(e,t,n);return i={sqlite:i,imdb:s,table:e,update:!0},i},s.prototype.DeleteTable=function(e){e=r.RemoveNonAlphaChars(e);var t="DROP TABLE IF EXISTS "+e,n=SiebelApp.InMemBuilder.DeleteTable(e);return t={sqlite:t,imdb:n,table:e,update:!1},t},s.prototype.DeleteFilterRecord=function(e,t,n,i){e=r.RemoveNonAlphaChars(e);var s={},o="DELETE  FROM "+e+' WHERE "'+t+'"  <= (SELECT "'+t+'" FROM '+e+' WHERE "'+n+'" = ? )',u="DELETE  FROM "+e+" WHERE ["+t+"]  <= (SELECT ["+t+"] FROM "+e+" WHERE ["+n+"] = ? )";return s.query={sqlite:o,imdb:u,table:e,update:!0},s.value=[i],s},s.prototype.SelectFilterRecord=function(e,t,n,i){e=r.RemoveNonAlphaChars(e);var s={};if(i!==""){var o="SELECT *  FROM "+e+' WHERE "'+t+'"  > (SELECT "'+t+'" FROM '+e+' WHERE "'+n+'" = ? )',u="SELECT *  FROM "+e+" WHERE ["+t+"]  > (SELECT ["+t+"] FROM "+e+" WHERE ["+n+"] = ? )";s.query={sqlite:o,imdb:u,table:e},s.value=[i]}else{var o="SELECT *  FROM "+e;s.query={sqlite:o,imdb:o,table:e},s.value=[]}return s},s.prototype.SelectRecord=function(e,t,n,i,s,o){var u=SiebelApp.InMemBuilder.SelectRecord(e,t,n,i,s,o),a,f="",l="",c,h=[],p={},d=[];typeof e=="string"&&(e=[e]);for(var v=0;v<e.length;v++)e[v]=r.RemoveNonAlphaChars(e[v]),d?d+=e[v]+",":d=e[v]+",";d=d.substring(0,d.length-1);if(!n||!n.length)a="SELECT * FROM "+d;else{var m=n.length;for(var g=0;g<m;g++)f?f+='"'+n[g]+'" ,':f='"'+n[g]+'" ,';f=f.substring(0,f.length-1),a="SELECT "+f+" "+"FROM "+d}if(typeof t=="string")a+=" WHERE "+t;else if(t&&t.length>0){a+=" WHERE ";var y=t.length;for(var b=0;b<y;b++)t[b].PreLogic&&(a+=" "+t[b].PreLogic+" "),t[b].Oper||(t[b].Oper="="),t[b].IsField?a+='"'+t[b].FieldName+'" '+t[b].Oper+" "+t[b].Val+" ":(e.length>1?a+='"'+t[b].FieldName+'" '+t[b].Oper+" "+"?"+" ":a+='"'+r.RemoveNonAlphaChars(t[b].FieldName)+'" '+t[b].Oper+" "+"?"+" ",h.push(t[b].Val))}if(i&&i.length>0){var w=i.length,E;for(var S=0;S<w;S++)E=i[S],e.length===1&&(E=r.RemoveNonAlphaChars(E)),l?l+='"'+E+'" ,':l='"'+E+'" ,';l=l.substring(0,l.length-1),s?c=" ORDER BY "+l+" "+s:c=" ORDER BY "+l,a+=c}return o&&
(a+=" LIMIT "+o[0]+" "+","+o[1]),p.selectQuery={sqlite:a,imdb:u,table:e},p.valList=h,p},s.prototype.SelectRecordPopulateWS=function(t,n,i,s,o,u){var a,f="",l="",c,h=[],p={},d=[];typeof t=="string"&&(t=[t]);for(var v=0;v<t.length;v++)t[v]=r.RemoveNonAlphaChars(t[v]),d?d+=t[v]+",":d=t[v]+",";d=d.substring(0,d.length-1);if(!i||!i.length)a="SELECT * FROM "+d;else{var m=i.length;for(var g=0;g<m;g++)f?f+=i[g]+" ,":f=i[g]+" ,";f=f.substring(0,f.length-1),a="SELECT "+f+" "+"FROM "+d}var y;if(n&&n.length>0){a+=" WHERE ";var b=a,w=n.length;for(var E=0;E<w-1;E++)n[E].indexOf(e.get("EXISTS"))!==-1?(y=n[E].replace("EXISTS",""),a+=e.get("EXISTS")+" ( "+b+y+" )"+" AND "):a+="( "+n[E]+" )"+" AND ";n[E].indexOf(e.get("EXISTS"))!==-1?(y=n[E].replace("EXISTS",""),a+=e.get("EXISTS")+" ( "+b+y+" )"):a+="( "+n[E]+" )"}if(s&&s.length>0){var S=s.length,x,T,N;for(var C=0;C<S;C++){x=s[C],T=x.split(" "),N=null,T.length>=3&&(x=T[0],N=T[T.length-1]);var k=x.search(/\W/g);l?k===-1?l+='"'+x+'"':l+=x:k===-1?l='"'+x+'"':l=x,N&&(l+=" "+N),l+=","}l=l.substring(0,l.length-1),o?c=" ORDER BY "+l+" "+o:c=" ORDER BY "+l+"",a+=c}u&&(a+=" LIMIT "+u[0]+" "+","+u[1]);var L=SiebelApp.InMemBuilder.SelectRecordPopulateWS(t,n,i,s,o,u);return p.selectQuery={sqlite:a,imdb:L,table:t},p.valList=h,p},s.prototype.InsertRecord=function(e,t,n){var i=SiebelApp.InMemBuilder.InsertRecord(e,t,n),s=0,o={};e=r.RemoveNonAlphaChars(e);var u="INSERT INTO "+e+" (",a=t.length;for(var f=0;f<a;f++)u+=' "'+t[f]+'"',s<a-1&&(u+=", ",s++);u+=") VALUES (",s=0;var l=n.length;for(var c=0;c<l;c++)u+=" ?",s<l-1&&(u+=", ",s++);return u+=")",o.insertquery={sqlite:u,imdb:i,table:e,update:!0},o.values=n,o},i}(),SiebelApp.InMemBuilder=function(){var e=SiebelApp.Offlineconstants,t=e.get("STRINGNULL"),n=e.get("STRINGUNDEFINED"),r=SiebelApp.OfflineUtils,i,s=function(){var e;return s=function(){return e},s.prototype=this,e=new s,e.constructor=s,e};return i=new s,s.prototype.BuildWhereClause=function(e,t,n,r,i){switch(e){case"=":case"<":case">":case">=":case"<=":case"!=":r?(r="( "+r,i?r=" "+r+" "+i+" ":r+=" AND "):r="(",r=r+" "+t+" "+e+" "+n,r+=")";break;case"IN":if(typeof n=="string")r?(r="( "+r,i?r=" "+r+" "+i+" ":r+=" AND "):r="(",r=r+" "+t+" IN "+n,r+=")";else{var s=n.length;if(s>0){r?(r="( "+r,i?r=" "+r+" "+i+" ":r+=" AND "):r="(",r=r+" "+t+" IN (",r=r+"'"+n[0]+"'";for(var o=1;o<s;o++)r+=" , ",r=r+"'"+n[o]+"'";r+=" )",r+=")"}}}return r},s.prototype.AddFields=function(e){e=r.RemoveNonAlphaChars(e),e="["+e+"]";var t="DROP TABLE IF EXISTS "+e;return t},s.prototype.UpdateRecord=function(e,i,s,o,u,a,f,l){e=r.RemoveNonAlphaChars(e),e="["+e+"]";var c="",h="UPDATE "+e+" SET"+" ";if(i){var p=i.length,d=null;for(var v=0;v<p;v++)a&&(d=a.indexOf(i[v])),a&&d!==-1?f[d]===t||f[d]===n?(h+="["+i[v]+"] = (["+i[v]+'] || ",'+l[d]+'")',v<p-1&&(h+=", ")):(h+=" ["+i[v]+"]",h+=" = REPLACE(["+i[v]+'],"'+f[d]+'","'+l[d]+'")',v<p-1&&(h+=", ")):(h+=" ["+i[v]+"]",s[v]?(c=s[v].toString(),c=c?c.replace(/'/g,"''").replace(/\\/g,"\\\\"):""):c="",h+=" = '"+c+"'",v<p-1&&(h+=", "))}return o&&(h+="  WHERE   ",h+=" ["+o,h+="] = ?"),h},s.prototype.CreateTable=function(e,t,n,i){if(!e)return null;var s=0;e=r.RemoveNonAlphaChars(e);var o="CREATE TABLE IF NOT EXISTS ["+e+"] (";if(t){o+=" RecordNum INTEGER PRIMARY KEY AUTOINCREMENT , ";for(var u=0;u<t.length;u++)o+=" ["+t[u]+'] TEXT DEFAULT ""',s<t.length-1&&(o+=", ",s++);if(i){o+=",CONSTRAINT AB UNIQUE (Id)";if(n){var a=n.split(","),f=a.length;n='"'+a[0]+'"';for(var u=1;u<f;u++)n+=',"'+a[u]+'"';o+=",CONSTRAINT ABC UNIQUE ("+n+")"}}return o+=")",o}},s.prototype.DeleteRecords=function(e,t,n,i){var s;e=r.RemoveNonAlphaChars(e),e="["+e+"]",s="DELETE FROM "+e;if(t){var o=" WHERE ",u=t.length;for(var a=0;a<u;a++)a>0&&(o+=" "+n+" "),i?o+="["+t[a]+"]  "+i+" ?":o+="["+t[a]+"]  = ?";s+=o}return s},s.prototype.DeleteMutlipleRecord=function(e,t,n){var i;return e=r.RemoveNonAlphaChars(e),e="["+e+"]",i="delete FROM "+e+" WHERE ["+t+"] IN("+n+")",i},s.prototype.DeleteTable=function(e){e=r.RemoveNonAlphaChars(e),e="["+e+"]";var t="DROP TABLE IF EXISTS "+e;return t},s.prototype.DeleteFilterRecord=function(e,t,n,i){e=r.RemoveNonAlphaChars(e),e="["+e+"]";var s="DELETE  FROM "+e+" WHERE ["+t+"]  <= (SELECT ["+t+"] FROM "+e+" WHERE ["+n+"] = ? )";return s},s.prototype.SelectFilterRecord=function(e,t,n,i){e=r.RemoveNonAlphaChars(e),e="["+e+"]";var s;return i!==""?s="SELECT *  FROM "+e+" WHERE ["+t+"]  > (SELECT ["+t+"] FROM "+e+" WHERE ["+n+"] = ? )":s="SELECT *  FROM "+e,s},s.prototype.SelectRecord=function(e,t,n,i,s,o){var u,a="",f="",l,c=[],h={},p=[];typeof e=="string"&&(e=[e]);for(var d=0;d<e.length;d++)e[d]=r.RemoveNonAlphaChars(e[d]),p?p+=e[d]+",":p=e[d]+",";p=p.substring(0,p.length-1),p="["+p+"]";if(!n||!n.length)u="SELECT * FROM "+p;else{var v=n.length;for(var m=0;m<v;m++)a?a+="["+n[m]+"] ,":a="["+n[m]+"] ,";a=a.substring(0,a.length-1),u="SELECT "+a+" "+"FROM "+p}if(typeof t=="string")u+=" WHERE "+t;else if(t&&t.length>0){u+=" WHERE ";var g=t.length;for(var y=0;y<g;y++)t[y].PreLogic&&(u+=" "+t[y].PreLogic+" "),t[y].Oper||(t[y].Oper="="),t[y].IsField?u+="["+t[y].FieldName+"] "+t[y].Oper+" "+t[y].Val+" ":(e.length>1?u+="["+t[y].FieldName+"] "+t[y].Oper+" "+"?"+" ":u+="["+r.RemoveNonAlphaChars(t[y].FieldName)+"] "+t[y].Oper+" "+"?"+" ",c.push(t[y].Val))}if(i&&i.length>0){var b=i.length,w;for(var E=0;E<b;E++)w=i[E],e.length===1&&(w=r.RemoveNonAlphaChars(w)),f?f+="["+w+"] ,":f="["+w+"] ,";f=f.substring(0,f.length-1),s?l=" ORDER BY "+f+" "+s:l=" ORDER BY "+f,u+=l}return o&&(u+=" LIMIT "+o[1]+" OFFSET "+o[0]),u},s.prototype.SelectRecordPopulateWS=function(t,n,i,s,o,u){var a,f="",l="",c,h=[],p={},d=[];typeof t=="string"&&(t=[t]);for(var v=0;v<t.length;v++)t[v]=r.RemoveNonAlphaChars(t[v]),d?d+="["+t[v]+"],":d="["+t[v]+"],";d=d.substring(0,d.length-1);if(!i||!i.length)a="SELECT * FROM "+d;else{var m=i.length;for(var g=0;g<m;g++){i[g].indexOf('"')!==-1&&(i[g]=i[g].replace('"',"[").replace('"',"]"));if(i[g][0]!=="["&&i[g].indexOf("COUNT(*)")===-1){var y=i[g].indexOf(".");if(y>0){var b=i[
g].substring(0,y),w=i[g].substring(y+1);b[0]!=="["&&(b="["+b+"]"),w[0]!=="["&&(w="["+w+"]"),i[g]=b+"."+w}else i[g]="["+i[g]+"]"}f?f+=i[g]+" ,":f=i[g]+" ,"}f=f.substring(0,f.length-1),a="SELECT "+f+" "+"FROM "+d}var E;if(n&&n.length>0){a+=" WHERE ";var S=a,x=n.length;for(var T=0;T<x-1;T++)n[T].indexOf(e.get("EXISTS"))!==-1?(E=n[T].replace("EXISTS",""),a+=e.get("EXISTS")+" ( "+S+E+" )"+" AND "):a+="( "+n[T]+" )"+" AND ";n[T].indexOf(e.get("EXISTS"))!==-1?(E=n[T].replace("EXISTS",""),a+=e.get("EXISTS")+" ( "+S+E+" )"):a+="( "+n[T]+" )"}if(s&&s.length>0){var N=s.length,C,k,L;for(var A=0;A<N;A++){C=s[A],C.indexOf("substr")>=0&&(C=C.replace(/\|\|/g,"+")),k=C.split(" "),L=null,k.length>=3&&(C=k[0],L=k[k.length-1]);var O=C.search(/\W/g);l?O===-1?l+="["+C+"]":l+=C:O===-1?l="["+C+"]":l=C,L&&(l+=" "+L),l+=","}l=l.substring(0,l.length-1),o?c=" ORDER BY "+l+" "+o:c=" ORDER BY "+l+"",l.length>0&&(a+=c)}u&&(a+=" LIMIT "+u[1]+" "+" OFFSET "+u[0]);var M=a.replace(/([^\(]*_PDAVisibilityTypes) &([^\)]*)/,"bitand($1, $2)");return M},s.prototype.InsertRecord=function(e,t,n){var i=0,s={};e=r.RemoveNonAlphaChars(e),e="["+e+"]";var o="INSERT INTO "+e+" (",u=t.length;for(var a=0;a<u;a++)o+=" ["+t[a]+"]",i<u-1&&(o+=", ",i++);o+=") VALUES (",i=0;var f=n.length;for(var l=0;l<f;l++)o+=" ?",i<f-1&&(o+=", ",i++);return o+=")",o},i}()),typeof SiebelApp.InMemDB=="undefined"&&(SiebelJS.Namespace("SiebelApp.InMemDB"),define("siebel/offline/imdb",["3rdParty/alasql.min.js"],function(){SiebelApp.InMemDB=function(){function f(){var t;f=function(){return r=JSON.parse(window.localStorage.getItem(e.get("TABLEINFO"))),t},f.prototype=this,t=new f,t.constructor=f;var n=(new Date).getTime();return this.debug=localStorage&&localStorage.getItem("LogEvt")=="All",this.log=function(e){if(this.debug){var t=new Date,r=t.getTime()-n;console.log("+"+r+" ["+t+"] "+e),n=t}},t}function c(){return(new Date).getTime()}function h(){var e=this;e.log("Loading view resources from web db...");var t=c(),n="Metadata",r=SiebelApp.BrowserCacheMgr.GetBrowserStorage(),s=r.SelectAll("select * from Metadata where [Type]='resrs'","Metadata");s.done(function(t){var r=c();e.log("Loaded ["+t.length+"] rows of view resources"),i.exec("CREATE TABLE IF NOT EXISTS ["+n+"]");try{i.exec("INSERT INTO ["+n+"] SELECT * FROM ?",[t])}catch(s){e.log("imdb:except:insert table:"+n+":"+s)}}),s.fail(function(t){e.log("Failed to load view resources. Error:"+t)})}var e=SiebelApp.Offlineconstants,t=SiebelApp.OfflineAppSettings,n=SiebelApp.OfflineUtils,r=null,i=null,s=["Sync"],o=!1,u={},a=!1,l;return l=new f,f.prototype.InitSysTables=function(){this.log("imdb:InitSysTables");if(o)return;o=!0,SiebelApp.InMemDB.initDatabase();var e=SiebelApp.OfflineUtils.GetOfflineCacheConfig(),t=e.tables,n=e.columns;if(t)for(var r=0;r<t.length;r++){var i=SiebelApp.InMemBuilder.CreateTable(t[r],n[t[r]]);u[t[r]]=i}for(var s=0;s<t.length;s++){var a=t[s],i=u[a];i?this.CreateTable(i):this.CreateTable("CREATE TABLE IF NOT EXISTS ["+a+"]")}this.loadSysTables(),this.log("imdb:InitSysTables:done")},f.prototype.Initialize=function(e){function m(){if(!(a<d))return v.resolve(),v.promise();var e=n[a],t=u[e];t?f.CreateTable(t):f.CreateTable("CREATE TABLE IF NOT EXISTS ["+e+"]"),a+=1;var r=a*100/d;s=="isync"?r=80+r/5:s&&(r=80),SiebelApp.dlgProgress.Update(r,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_LOAD_DB",[a,d])),m()}function g(){f.log("imdb:Initialize:finished tables");if(l!=0||c!="1")console.log("Inside second setimeout function call"),f.loadFromWebDB();$.callback(f,function(e){f.log("imdb:Initialize:done"),s||(console.log("Progress bar removed"),SiebelApp.dlgProgress.Remove())}),$.setReturnValue({err:!1,retVal:1}),SiebelApp.OfflineAppMgr.RemoveObj(p.promise()),p.resolve()}this.log("imdb:Initialize"),o||this.InitSysTables(),h.call(this);var n=[],r={};u=JSON.parse(window.localStorage.getItem("TableSchemas"))||{},this.log("imdb:Initialize:restoring table schema...");var i=t.GetPkgStatus(),s=SiebelApp.dlgProgress.name,a=0,f=this,l=SiebelApp.OfflineAppSettings.GetMode(),c=window.localStorage.getItem("isAdfmContainer");if(l!=0||c!="1")for(table in u)n.push(table);var p=new $.Deferred;SiebelApp.OfflineAppMgr.PopulateDeferredArray(p.promise());var d=n.length,v=new $.Deferred;if(l!=0||c!="1")s||SiebelApp.dlgProgress.Show("reload",SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_RELOAD_DB_TITLE"));$.when(m()).done([g])},f.prototype.initDatabase=function(e,n,r,s){if(i)return i;try{alasql.options.cache=!1,i=new alasql.Database("alasql_db"),window._memDB=i,alasql.fn.substr=function(e,t,n){return e?e.substr(t-1,n):""},alasql.fn.dtstr=function(e){return e?e.substr(6,4)+e.substr(0,2)+e.substr(3,2)+e.substr(11,2)+e.substr(14,2)+e.substr(17,2):""},alasql.fn.bitand=function(e,t){return e&t},alasql.utils.extend=function(e,t){return e},this.inmemDB=i;var o=t.GetPkgStatus();if(!o){var u=SiebelApp.BrowserCacheMgr.GetBrowserStorage();u.CreateTable("create table IF NOT EXISTS ApplicationData(id, bc, content, CONSTRAINT AB UNIQUE (bc))")}}catch(a){this.log("imdb:except:Open alasql DB error: "+a+".")}return i},f.prototype.DeleteTable=function(e){e=e.imdb,this.log("imdb:DeleteTable:"+e),e&&i.exec(e)},f.prototype.CreateTable=function(e){this.log("imdb:CreateTable:"+e);var t=0;if(e)try{t=i.exec(e),this.log("imdb:CreateTable:ret:"+t)}catch(n){this.log("imdb:except:"+n+":"+e)}else this.log("imdb:except:empty sql");return t},f.prototype.setTableSchema=function(e,t){u[e]=t},f.prototype.InsertRecordSet=function(e,t,n,r){this.log("imdb:InsertRecordSet:"+e+":"+t);if(e=="Metadata")return 0;i.tables[e]==undefined&&i.exec("CREATE TABLE IF NOT EXISTS ["+e+"]");var s=0,o=[],u=t.length,a=n.length,f="";for(var l=0;l<a;l++){var c={};for(var h=0;h<u;h++)c[t[h]]=n[l][h];o.push(c)}var p="insert into ["+e+"] select * from ?";try{s=i.exec(p,[o]),this.log("imdb:ret:"+s),r&&r()}catch(d){this.log("imdb:except:"+d+":"+p)}return s},f.prototype.InsertRecord=function(e,t,n,r){this.log("imdb:InsertRecord:"+e+":"+t),i.tables[e]==undefined&&i.exec("CREATE TABLE IF NOT EXISTS ["+
e+"]");var s=t.length,o={};for(var u=0;u<s;u++)o[t[u]]=n[u];var a="insert into ["+e+"] select * from ?",f=i.exec(a,[[o]]);return this.log("imdb:ret:"+f),f},f.prototype.SelectAll=function(e,t,n){this.log("imdb:SelectAll:"+e);var r=this.Execute(e,null,!0);return r},f.prototype.SelectAllUpSync=function(e,t){this.log("imdb:SelectAllUpSync:"+e);var n,r=this.Execute(e,null,!0);return t(r),r},f.prototype.Execute=function(e,t,n){this.log("imdb:Execute:"+e);var r=[];try{r=i.exec(e,t)}catch(s){this.log("imdb:except:"+s+":"+e)}return r&&r.length?this.log("imdb:data:"+r.length+":0:"+JSON.stringify(r[0])):r&&this.log("imdb:data:"+JSON.stringify(r)),!n&&r&&r.length&&(r=r[0]),r},f.prototype.DoesTableExist=function(t){return r||(r=window.localStorage.getItem(e.get("TABLEINFO"))),r?r.hasOwnProperty(t):!1},f.prototype.UpdateRecord=function(e,t){this.log("imdb:UpdateRecord:"+e);try{var n=i.exec(e,t);this.log("imdb:ret:"+n)}catch(r){this.log("imdb:except:"+r+":"+e)}return n},f.prototype.DoesFieldExist=function(t,n){var i=!1;r||(r=JSON.parse(window.localStorage.getItem(e.get("TABLEINFO"))));if(r){var s=r[t];s&&(i=s.indexOf(n)!==-1)}return i},f.prototype.saveToWebDB=function(){this.log("Saving InMem DB...");var e=t.GetPkgStatus();if(e)return;this.log("Saving table SQL query on creation ..."),localStorage.setItem("TableSchemas",JSON.stringify(u)),this.log("Done saving table columns in local store");var n=this,r=SiebelApp.BrowserCacheMgr.GetBrowserStorage(),o=1,a,f=c();for(var l in i.tables){if(l=="Metadata")continue;var h=i.exec("SELECT * from ["+l+"]"),p=JSON.stringify(h);if(s.indexOf(l)>=0){localStorage.setItem(l,p),n.log("Saved BC in localStorage:["+l+"]");continue}var d=r.Execute("insert into ApplicationData(id,bc,content) values (?,?,?)",[o++,l,p]);d.done(function(e){var t=c();n.log("imdb:Saved BC: took:"+(t-f)+"ms")}),d.fail(function(e){n.log("imdb:Failed to saved BC: error:"+e)}),n.log("imdb:Saving BC:["+l+"]")}},f.prototype.saveBC=function(e){var t=this;t.log("Saving imdb BC:"+e);if(e=="Metadata")return;var n=i.exec("SELECT * from ["+e+"]"),r=JSON.stringify(n);if(s.indexOf(e)>=0){localStorage.setItem(e,r),t.log("Saved BC in localStorage:["+e+"]");return}var o=SiebelApp.BrowserCacheMgr.GetBrowserStorage(),u,a=c(),f=o.UpdateRecord("UPDATE ApplicationData SET content = ? where bc = ?",[r,e]);f.done(function(n){var r=c();t.log("imdb:Saved BC:["+e+"], took:"+(r-a)+"ms")}),f.fail(function(n){t.log("imdb:Failed to save BC:["+e+"], error:"+n)})},f.prototype.loadFromWebDB=function(){var e=this;e.log("Loading data from web db...");var t=c(),n=new $.Deferred,r=SiebelApp.BrowserCacheMgr.GetBrowserStorage();SiebelApp.OfflineAppMgr.PopulateDeferredArray(n.promise());var o=r.SelectAll("select * from ApplicationData","ApplicationData");return o.done(function(r){var o=r.length,u=c();e.log("Loaded data from web db. took:"+(u-t)+"ms");for(var f=0;f<o;f++){var l=r[f],h=l.bc;if(s.indexOf(h)>=0)continue;var p=JSON.parse(l.content);i.exec("CREATE TABLE IF NOT EXISTS ["+h+"]"),i.exec("delete from ["+h+"]");try{i.exec("INSERT INTO ["+h+"] SELECT * FROM ?",[p]),u=c(),e.log("imdb:Loaded BC:["+h+"] took:"+(u-t)+"ms")}catch(d){e.log("imdb:except:insert table:"+h+":"+d)}}u=c(),e.log("Loaded data done. took:"+(u-t)+"ms"),$.setReturnValue({err:!1,retVal:1}),SiebelApp.OfflineAppMgr.RemoveObj(n.promise()),n.resolve(),a=!0}),o.fail(function(e){$.setReturnValue({err:!0,retVal:1}),SiebelApp.OfflineAppMgr.RemoveObj(n.promise()),n.resolve()}),n.promise()},f.prototype.restore=function(){return a},f.prototype.loadSysTables=function(){var e=this;for(var t=0;t<s.length;t++){var n=s[t],r=localStorage.getItem(n),o=JSON.parse(r);i.exec("CREATE TABLE IF NOT EXISTS ["+n+"]");if(!r||r.length==0)continue;try{i.exec("INSERT INTO ["+n+"] SELECT * FROM ?",[o])}catch(u){e.log("imdb:except:insert table:"+n+":"+u)}}},l}()})),typeof SiebelApp.BrowserCacheMgr=="undefined"&&(Namespace("SiebelApp.BrowserCacheMgr"),SiebelApp.BrowserCacheMgr=function(){function BrowserCacheMgr(){var e,t,n;BrowserCacheMgr=function(){return e},BrowserCacheMgr.prototype=this,e=new BrowserCacheMgr,e.constructor=BrowserCacheMgr,this.GetBrowserStorage=function(){return t==null&&(t=SiebelApp.OfflineUtils.GetBrowserStorage(),t.Initialize&&(n=t.Initialize(SiebelApp.OfflineUtils.GetOfflineCacheConfig()))),t};var r=null;return this.GetInMemDB=function(){return r==null&&(r=SiebelApp.InMemDB,r.Initialize()),r},this.ready=function(e){$.when(n).then(e)},e}function isWebDbTable(e){return Array.isArray(e)&&(e=e[0]),mTables.indexOf(e)!=-1}function isAlaTable(e){return Array.isArray(e)&&(e=e[0]),e&&mTables.indexOf(e)==-1}function ParsePickSearchSpec(pickListData,srtExpr,busComp){var val=[];if(!!utils.IsEmpty(srtExpr)||srtExpr.indexOf("[Order By]")===-1&&srtExpr.indexOf("[Name]")===-1&&srtExpr.indexOf("LookupValue")===-1){for(var i=0;i<pickListData.length;i++)val[i]=pickListData[i].Value;return val}var OrderBy,Name,Value;srtExpr.indexOf("LookupValue")!==-1&&(srtExpr=SiebelApp.Query.GetSearchSpec(srtExpr,busComp)),srtExpr=srtExpr.replace(/\[Order By]/g,"OrderBy"),srtExpr=srtExpr.replace(/\[Order By]/g,"Name"),srtExpr=srtExpr.replace(/\AND/g,"&&"),srtExpr=srtExpr.replace(/\and/g,"&&"),srtExpr=srtExpr.replace(/\OR/g,"||"),srtExpr=srtExpr.replace(/\or/g,"||"),srtExpr=srtExpr.replace(/\<>/g,"!==");var k=0;for(var j=0;j<pickListData.length;j++)OrderBy=pickListData[j].OrderBy,Name=pickListData[j].Name,Value=pickListData[j].Value,eval(srtExpr)&&(val[k]=Value,k++);return val}var browserCacheMgr=new BrowserCacheMgr,offlinecacheconfig=SiebelApp.OfflineCacheConfig,offlineconstants=SiebelApp.Offlineconstants,consts=SiebelJS.Dependency("SiebelApp.Constants"),AjaxMgr=SiebelApp.AjaxRequestMgr,utils=SiebelApp.Utils,outils=SiebelApp.OfflineUtils,clientSystem=offlineconstants.get("LOG_EVT_CLIENT_SYS"),editRecordStr=offlineconstants.get("EDITRECORD"),ninf=offlineconstants.get("NEW_VIEW_INFO"),cinf=offlineconstants.get("CREATE_VIEW_INFO"),mTables=["ApplicationData","Metadata","MBCs","MLinks","MBOs","MBSs","MApplets","MBCFilters"
,"MBOFilters","MViews","MIcons","PickListInfo","BCFldPickMapInfo","PickApltInfo","SystemPreferences","SiebelApplicationParameters","ListOfValues"];return BrowserCacheMgr.prototype.CacheOnlineOp=function(e){var t=new $.Deferred,n=this.GetBrowserStorage(),r=this;this.ready(function(i){if(!i)return;var s,o,u=offlinecacheconfig.get("PRO_METADATASTORE_DB_TBL"),a=[],f=[],l=[];a=["ObjName","SweCmd"],f=[e.ObjName,e.SweCmd];for(var c=0;c<a.length;c++){var h={};h.FieldName=a[c],h.Val=f[c],c&&(h.PreLogic="AND"),l.push(h)}o=SiebelApp.SqlBuilder.SelectRecord(u,l),SiebelApp.OfflineAppMgr.PopulateDeferredArray(t.promise());var p=n.Execute(o.selectQuery.sqlite,o.valList);p.done(function(n){if(!n)s=SiebelApp.SqlBuilder.InsertRecord(u,["ObjName","SweCmd","Response","Type"],[e.ObjName,e.SweCmd,e.Response,e.Type]),r.Execute(s.insertquery,s.values);else{s={};var i=[e.Response,e.ObjName,e.SweCmd];s.table=u,s.sqlite="UPDATE "+u+" SET Response = ? WHERE  ObjName = ? AND SweCmd = ? ",r.Execute(s,i)}t.resolve()}),p.fail(function(e){$.setReturnValue({err:!0,retVal:e}),t.resolve({err:!0,retVal:e})})})},BrowserCacheMgr.prototype.GetMetadata=function(e){var t=new $.Deferred,n,r=null;console.log("GetMetadata:begin:"+e),SiebelApp.OfflineAppMgr.PopulateDeferredArray(t.promise());var i=this.GetBrowserStorage();if(e==="PickListGeneric"||e==="PickListHierarchicalSubArea"||e==="PickListHierarchical"){n=SiebelApp.SqlBuilder.SelectRecord(e,null,null,["OrderBy"]);var s=this.SelectRecordSet(n);$.setReturnValue({err:!1,retVal:[e,s.retVal]}),console.log("GetMetadata:done:"+e),t.resolve()}else n=SiebelApp.SqlBuilder.SelectRecord(e),r=i.SelectAll(n.selectQuery.sqlite,e),r.always(function(n){$.setReturnValue({err:!1,retVal:[e,n]}),console.log("GetMetadata:done:"+e),t.resolve()})},BrowserCacheMgr.prototype.GetItemsToSync=function(e,t){var n="",r;n=offlinecacheconfig.get("PRO_SYNCQUEUE_DB_TBL"),r=SiebelApp.SqlBuilder.SelectFilterRecord(n,"RecordNum","TransactionId",e);var i=this.Execute(r.query,r.value,!0);return $.setReturnValue(i),i},BrowserCacheMgr.prototype.GetItemsToSyncByLastRecordNum=function(e,t,n){var r="",i,s=[],o="ASC",u=[],a=[],f={};t!=""&&(f.FieldName="RecordNum",f.Oper=">",f.Val=t,a.push(f)),r=offlinecacheconfig.get("PRO_SYNCQUEUE_DB_TBL"),s.push("RecordNum"),i=SiebelApp.SqlBuilder.SelectRecord(r,a,null,s,o,null);var l=this.Execute(i.selectQuery,i.valList,!0);return $.setReturnValue(l),l},BrowserCacheMgr.prototype.GetItemsToSyncByPage=function(e,t){var n="",r,i=[],s="ASC",o=[];n=offlinecacheconfig.get("PRO_SYNCQUEUE_DB_TBL"),i.push("RecordNum"),r=SiebelApp.SqlBuilder.SelectRecord(n,null,null,i,s,null);var u=this.Execute(r.selectQuery,r.valList,!0);return $.setReturnValue(u),u},BrowserCacheMgr.prototype.DiscoverMetadata=function(e,t,n,r,i){var s=this.GetBrowserStorage(),o=new $.Deferred,u=SiebelApp.RequestProcessor.GetCmdTag(n),a=SiebelApp.RequestProcessor.GetRequestType(e),f,l=[],c=offlinecacheconfig.get("PRO_METADATASTORE_DB_TBL"),h=offlinecacheconfig.get("PRO_METADATASTORE_DB_TBL_COLS"),p=[h.ObjName,h.SweCmd,h.Type],d=[r,u,i];for(var v=0;v<p.length;v++){var m={};m.FieldName=p[v],m.Val=d[v],v&&(m.PreLogic="AND"),l.push(m)}f=SiebelApp.SqlBuilder.SelectRecord(c,l);if(i==="resrs"){var g=this.GetInMemDB(),y=g.Execute(f.selectQuery.imdb,f.valList);return y?y.Response:null}SiebelApp.OfflineAppMgr.PopulateDeferredArray(o.promise()),console.log("DiscoverMetadata:begin:"+JSON.stringify(f.valList));var b=s.Execute(f.selectQuery.sqlite,f.valList);b.done(function(i){var s=i,l,c=[];s!==null&&s!==undefined?(l=s.Response,a===editRecordStr&&u==="nr"&&SiebelApp.RequestProcessor.IsAssoc(l)&&(SiebelApp.RequestProcessor.SetLayoutState(cinf,r.split("/")[1]),SiebelApp.BrowserCacheMgr.DiscoverMetadata(e,"","cr",r,cinf),$.callback(this,function(e){if(!e.err){var t=e.retVal;$.setReturnValue({err:e.err,retVal:t}),t?outils.CcfLogEvent([clientSystem,69,7,26,a,"CreateRecord",r]):outils.CcfLogEvent([clientSystem,51,7,26,a,r])}else outils.CcfLogEvent([clientSystem,51,7,26,n,r]),$.setReturnValue(e)})),c.push(l)):a===offlineconstants.get("EDITRECORD")&&u==="er"?(SiebelApp.RequestProcessor.SetLayoutState(ninf,r.split("/")[1]),SiebelApp.BrowserCacheMgr.DiscoverMetadata(e,"","nr",r,ninf),$.callback(this,function(e){if(!e.err){var t=e.retVal;$.setReturnValue({err:e.err,retVal:t}),t?outils.CcfLogEvent([clientSystem,69,7,26,n,"NewRecord",r]):outils.CcfLogEvent([clientSystem,51,7,26,n,r])}else outils.CcfLogEvent([clientSystem,51,7,26,n,r]),$.setReturnValue(e)})):a===editRecordStr&&u==="nr"?(SiebelApp.RequestProcessor.SetLayoutState(cinf,r.split("/")[1]),SiebelApp.BrowserCacheMgr.DiscoverMetadata(e,"","cr",r,cinf),$.callback(this,function(e){if(!e.err){var t=e.retVal;$.setReturnValue({err:e.err,retVal:t}),t?outils.CcfLogEvent([clientSystem,69,7,26,n,"CreateRecord",r]):outils.CcfLogEvent([clientSystem,51,7,26,n,r])}else outils.CcfLogEvent([clientSystem,51,7,26,n,r]),$.setReturnValue(e)})):(SiebelApp.RequestProcessor.SetLayoutState(!1),outils.CcfLogEvent([clientSystem,51,7,26,n,r]),SiebelApp.RequestProcessor.IsSupported(e)&&(SiebelApp.OfflineAppMgr.HandleNullResponse(e),$.setReturnValue({err:!0}),o.resolve(l)),c.push(offlineconstants.get("CUD_RESPONSE"))),$.setReturnValue({err:!1,retVal:l}),o.resolve(l),t&&(console.log("DiscoverMetadata:done:"+JSON.stringify(f.valList)),c.push("success"),t.apply(this,c))}),b.fail(function(e){$.setReturnValue({err:!0,retVal:e}),o.reject()})},BrowserCacheMgr.prototype.Delete=function(e,t,n){var r;return e=offlinecacheconfig.get("PRO_SYNCQUEUE_DB_TBL"),r=SiebelApp.SqlBuilder.DeleteFilterRecord(e,"RecordNum",t,n),this.Execute(r.query,r.value)},BrowserCacheMgr.prototype.DeleteByLastRecordNum=function(e,t,n){var r,i=[],s=[],o=" <= ";s.push(t),i.push(n),e=offlinecacheconfig.get("PRO_SYNCQUEUE_DB_TBL"),r=SiebelApp.SqlBuilder.DeleteRecords(e,s,null,o);var u=this.GetInMemDB();this.alaExecute(r,i);return},BrowserCacheMgr.prototype.CreateTable=function(e,t,n){var r=this.GetBrowserStorage();isWebDbTable(t)&&r.CreateTable(e.sqlite);if(isAlaTable
(t)){var i=this.GetInMemDB(),e=SiebelApp.InMemBuilder.CreateTable(t,n);i.CreateTable(e),i.setTableSchema(t,e)}},BrowserCacheMgr.prototype.SelectRecord=function(e,t){return this.Execute(e.selectQuery,e.valList,t)},BrowserCacheMgr.prototype.InsertRecord=function(e,t,n,r){var i=SiebelApp.SqlBuilder.InsertRecord(e,t,n),s=this.Execute(i.insertquery,i.values);return s},BrowserCacheMgr.prototype.InsertRecordSet=function(e,t,n,r){var i=this.GetBrowserStorage();isWebDbTable(e)&&i.InsertRecordSet(e,t,n,r);if(isAlaTable(e)){var s=SiebelApp.OfflineAppSettings.GetPkgStatus(),o=this.GetInMemDB(),u=o.InsertRecordSet(e,t,n,r);return s&&o.saveBC(e),u}},BrowserCacheMgr.prototype.alaExecute=function(e,t,n){var r,i=e.imdb,s=this.GetInMemDB();if(!i)return r={err:!0},$.setReturnValue(r),r;t||(t=[]);var o=s.Execute(i,t,n);return r={err:!1,retVal:o===null?[]:o},$.setReturnValue(r),r},BrowserCacheMgr.prototype.Execute=function(e,t,n){t||(t=[]);if(isAlaTable(e.table)){var r=this.GetInMemDB(),i=this.alaExecute(e,t,n);return e.update&&r.saveBC(e.table),i}var s=new $.Deferred;if(isWebDbTable(e.table)){SiebelApp.OfflineAppMgr.PopulateDeferredArray(s.promise());var o=this.GetBrowserStorage(),u=o.Execute(e.sqlite,t,n);u.done(function(e){$.setReturnValue({err:!1,retVal:e}),SiebelApp.OfflineAppMgr.RemoveObj(s.promise()),s.resolve(e)}),u.fail(function(e){$.setReturnValue({err:!0,retVal:e}),SiebelApp.OfflineAppMgr.RemoveObj(s.promise()),s.resolve([])})}return s.promise()},BrowserCacheMgr.prototype.SelectRecordSet=function(e){return this.Execute(e.selectQuery,e.valList,!0)},BrowserCacheMgr.prototype.DoesTableExist=function(e){var t=this.GetBrowserStorage();return t.DoesTableExist(e)},BrowserCacheMgr.prototype.DoesFieldExist=function(e,t){var n=this.GetBrowserStorage();return n.DoesFieldExist(e,t)},BrowserCacheMgr.prototype.CacheSCMap=function(e){if(e){var t=[];CCFMiscUtil_StringToArray(e,t),window.localStorage.setItem(offlineconstants.get("STRING_CACHE"),JSON.stringify(t))}},BrowserCacheMgr.prototype.DeleteTable=function(e){var t=this.GetInMemDB();t.DeleteTable(e)},BrowserCacheMgr.prototype.CacheSyncNodeId=function(e){e&&window.localStorage.setItem(consts.get("SYNC_NODE_ID"),e)},BrowserCacheMgr.prototype.CacheSRFId=function(e){e&&window.localStorage.setItem(offlineconstants.get("SRF_ID"),e)},BrowserCacheMgr.prototype.CacheViewList=function(e){window.localStorage.setItem(offlineconstants.get("VIEW_LIST"),JSON.stringify(e))},BrowserCacheMgr.prototype.GetPickFldDetails=function(e,t,n,r,i){var s=this.GetBrowserStorage(),o=offlinecacheconfig.get("PRO_DB_PICKFLD_MAP_TBL_COLS"),u={},a,f=[],l=[],c=[];l=[o.BCName,o.FldName],c=[e,t];for(var h=0;h<l.length;h++){var p={};p.FieldName=l[h],p.Val=c[h],h&&(p.PreLogic="AND"),f.push(p)}var d=new $.Deferred;a=SiebelApp.SqlBuilder.SelectRecord(offlinecacheconfig.get("PRO_DB_PICKFLD_MAP_TBL"),f),SiebelApp.OfflineAppMgr.PopulateDeferredArray(d.promise());var v=s.Execute(a.selectQuery.sqlite,a.valList);v.done(function(e){if(e){var t,i,o=[];u.PickMap=e,t=["Id"],i=[r];for(var f=0;f<t.length;f++){var l={};l.FieldName=t[f],l.Val=i[f],f&&(l.PreLogic="AND"),o.push(l)}a=SiebelApp.SqlBuilder.SelectRecord(SiebelApp.OfflineUtils.RemoveNonAlphaChars(n),o);var c=s.Execute(a.selectQuery.sqlite,a.valList);c.done(function(e){u.PickRecord=e,$.setReturnValue({err:!1,retVal:u}),d.resolve(u)}),c.fail(function(e){$.setReturnValue({err:!0,retVal:e}),d.resolve({err:!0,retVal:e})})}}),v.fail(function(e){$.setReturnValue({err:!0,retVal:e}),d.resolve({err:!0,retVal:e})})},BrowserCacheMgr.prototype.GetPickListData=function(e,t,n){var r={err:!0},i=[],s=[],o=[],u,a,f,l,c=e.SrchSpec,h=AjaxMgr.GetActiveRequestObj(),p=!1,d=e.LOVType;switch(e.BC){case"PickList Generic":a=SiebelApp.Metadata.GetPickListGeneric(d);var v=ParsePickSearchSpec.call(this,a,c,t);return r={err:!1,retVal:v},$.setReturnValue(r),r;case"List Of Values":return a=SiebelApp.Metadata.GetLov(d),r={err:!1,retVal:a},$.setReturnValue(r),r;case"PickList Hierarchical Sub-Area":case"PickList Hierarchical":var m=t.GetFieldDefn(n),g,y;if(m){g=m.pickMap;var b=g?g.length:0,w,E=[],S=t.GetActiveRow(),x,T;if(S>=0){x=t.GetWS()[S];for(y=0;y<b;y++){w=g[y],T={};if(w.IsConstrained){T.PFldName=w.PFldName;var N=SiebelApp.OfflineUtils.RemoveNonAlphaChars(w.FldName);T.PFldValue=x[N],E.push(T)}}}}if(e.SrchSpec){var C=e.SrchSpec;if(C.indexOf("Parent Type")!==-1){var k=C.indexOf("=")+3;C=C.substring(k,C.length-1)}if(C){var L=t.GetFieldMap();for(var A in L)if(L[A]&&!p){var O=L[A].GetDefn();if(O&&O.PickListName&&O.PickListName!==e.NAME){var M=O.PickListName,_=SiebelApp.Metadata.GetPickListDef(M);if(_&&_.LOVType&&_.LOVType===C)for(var y=0;y<h.FieldValue.length;y++)if(SiebelApp.Utils.UrlDecode(h.FieldValue[y][0])===SiebelApp.S_App.LookupStringCache(L[A].GetName())){f=SiebelApp.Utils.UrlDecode(h.FieldValue[y][1]),l=C,p=!0;break}}}}}if(e.BC==="PickList Hierarchical Sub-Area")return a=SiebelApp.Metadata.GetPickListHierarchicalSubArea(d,l,f,E),r={err:!1,retVal:a},$.setReturnValue(r),r;if(e.BC==="PickList Hierarchical")return e.LOVType==="SR_AREA"&&(f="External"),a=SiebelApp.Metadata.GetPickListHierarchical(d,f,E),r={err:!1,retVal:a},$.setReturnValue(r),r;break;default:}return SiebelApp.OfflineUtils.CcfLogEvent([clientSystem,110,7,110,e.Name]),r={err:!1,retVal:[]},$.setReturnValue(r),r},BrowserCacheMgr.prototype.GetPickAppletInfo=function(e,t,n,r){SiebelApp.OfflineUtils.CcfLogEvent([clientSystem,48,7,25,e,t,n]);var i=this.GetBrowserStorage(),s=offlinecacheconfig.get("PRO_DB_PICKAPPLET_INFO_TBL_COLS"),o=e+"."+t+"|"+n,u,a=[],f=[],l=[],c=new $.Deferred,h;a=[s.FldInfo],f=[o];for(var p=0;p<a.length;p++){var d={};d.FieldName=a[p],d.Val=f[p],p&&(d.PreLogic="AND"),l.push(d)}u=SiebelApp.SqlBuilder.SelectRecord(offlinecacheconfig.get("PRO_DB_PICKAPPLET_INFO_TBL"),l),SiebelApp.OfflineAppMgr.PopulateDeferredArray(c.promise()),h=i.Execute(u.selectQuery.sqlite,u.valList),h.done(function(e){$.setReturnValue({err:!1,retVal:e}),c.resolve(e)}),h.fail(function(e){$.setReturnValue({err:!0,retVal:e}),c.resolve()})},BrowserCacheMgr
.prototype.GetSyncNodeId=function(){var e=window.localStorage.getItem(consts.get("SYNC_NODE_ID"));return e===null&&(e=""),e},BrowserCacheMgr.prototype.UpdateRecord=function(e,t){var n=this.GetInMemDB(),r=n.UpdateRecord(e.imdb,[t]);e.table&&n.saveBC(e.table);var i={err:!1,retVal:r};$.setReturnValue(i);return i;var s,o,u},browserCacheMgr}()),typeof SiebelApp.OfflineAppMgr=="undefined"&&(SiebelJS.Namespace("SiebelApp.OfflineAppMgr"),SiebelApp.OfflineAppMgr=function(){function B(){if(SiebelApp.OfflineAppSettings.GetPkgStatus()){if(SiebelApp.S_App.GetUserName&&SiebelApp.S_App.GetUserName()!==SiebelApp.S_App.Model.GetLoginName())return!1;var e=window.localStorage.getItem("appURL");e&&(e=JSON.parse(e));var t=window.location,n=t.origin.concat(t.pathname);if(e!==n)return!1}return!0}function j(e){var n={err:!1},r;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("OfflineAppMgr.prototype.DoPostedActions");var o=!1,u=CCFMiscUtil_CreatePropSet();switch(v.Action){case t.get("ACTION_RPC_REFRESH_VIEW"):var f=SiebelApp.S_App.GetActiveView().GetName(),l=SiebelApp.S_App.GetActiveView().GetActiveApplet(),c=SiebelApp.AjaxRequestMgr.GetActiveRequest(),h=s.DecodeFromQueryString(c.data),p=h.GetProperty(a).toString();(p==="UndoRecord"||p==="WriteRecord")&&l.SetActiveControl(null),v.Method!==t.get("GOTOVIEW")&&v.Method!==t.get("GOTOVIEWCOLD")&&(f=f.concat("/",l.GetName())),SiebelApp.OfflineAppMgr.ShowView(e.request,v.Method,e.callback,f,v.Type,t.get("REFRESHLAYOUT")),o=!0;break;case t.get("ACTION_RPC_COMPLETED"):SiebelApp.OfflineAppMgr.GetReturnPropSet(i.get("SWE_RPC_PROP_STATUS_COMPLETED"),u,e.request,e.callback),o=!0;break;case t.get("ACTION_RPC_CONTINUE"):SiebelApp.OfflineAppMgr.GetReturnPropSet(i.get("SWE_RPC_PROP_STATUS_CONTINUE"),u,e.request,e.callback),o=!0;break;case t.get("ACTION_RPC_CLOSE_POPUP"):SiebelApp.OfflineAppMgr.GetReturnPropSet(i.get("SWE_RPC_PROP_CLOSE_POPUP"),u,e.request,e.callback),o=!0;break;case t.get("ACTION_RPC_BUILD_VIEW_ASYNC"):f=v.ViewName,SiebelApp.OfflineAppMgr.ShowView(e.request,v.Method,e.callback,f,v.Type,"",v.BuildScreenType,v.DrilldownDef,v.BusObj),o=!0;break;case t.get("GOTOVIEW"):SiebelApp.OfflineAppMgr.GoToView(v.ViewName,v.URL)}return $.callback(this,function(e){n=e,$.setReturnValue(n),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("OfflineAppMgr.prototype.DoPostedActions")}),o}function F(){var e;return SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),83,5,93,""]),$.ajax({type:"POST",url:window.location.href,data:window.location.href,async:!1,success:function(n){if(n){SiebelApp.OfflineAppSettings.GetMode()&&SiebelApp.OfflineAppSettings.SetUpSyncStatus(!0);var r=window.location.origin.concat(window.location.pathname)+"?";r=r+"&SWETS="+Math.random(),SiebelApp.S_App.uiStatus.Busy({mask:!0,timeOut:!1});var i=SiebelApp.Offlineconstants.get("DM_APP_REDIRECT_TIMEOUT");i=parseInt(i),setTimeout(function(){SiebelApp.S_App.uiStatus.Free(),SiebelApp.OfflineAppSettings.ReloadApp()},i),e=!1,SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),86,5,93])}},complete:function(n,r,i){r==="error"&&(SiebelApp.OfflineAppMgr.HandleServerUnavailabilty(),e=!1,SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),87,5,93]))}}),e}function I(e,t,n){var r=e.Invoke("GetPropertySet"),i,s,o,u,a=CCFMiscUtil_CreatePropSet();if(!r)return;return t==="SetProperty"?(i=n.GetProperty("Name"),s=n.GetProperty("value"),r.SetProperty(i,s)):t==="PropertyExists"?(i=n.GetProperty("Name"),o=r.PropertyExists(i),a.SetProperty("Value",o?1:0)):t==="RemoveProperty"?(i=n.GetProperty("Name"),r.RemoveProperty(i)):t==="GetProperty"?(i=n.GetProperty("Name"),s=r.GetProperty(i),a.SetProperty("Value",s)):t==="GetFirstProperty"?(i=r.GetFirstProperty(),s=r.GetProperty(i),a.SetProperty("Name",i),a.SetProperty("Value",s),a.SetProperty("Iterator","1")):t==="GetNextProperty"&&(u=n.GetProperty("Iterator"),r.GetPropertyCount()>0&&(i=r.propEnumArray[u],s=r.GetProperty(i),a.SetProperty("Name",i),a.SetProperty("Value",s),a.SetProperty("Iterator",u))),a}function q(e,t,n,r){var i={err:!1},s,o,u=CCFMiscUtil_CreatePropSet(),a=CCFMiscUtil_CreatePropSet(),f,l=unescape(e.GetProperty("SWEIPS"));a.DecodeFromString(l),o=a.EnumProperties(!0);var c=function(){i=U.call(this,e,o,"","",!1),$.callback(this,function(e){if(e.err){i=e,$.setReturnValue(i);return}f=e.retVal,f?u.SetProperty(o,!0):u.SetProperty(o,!1)}),(o=a.EnumProperties(!1))&&c.call(this)};return c.call(this),$.callback(this,function(){i={err:"",retVal:u},$.setReturnValue(i)}),i}function R(e,n,r,i){var o={err:!1},u,a=CCFMiscUtil_CreatePropSet(),f,l=t.get("MENU_INFO"),c=t.get("MENU_DATA_REQ"),h;h=e.GetProperty("SWEIPS").toString(),h=unescape(h);if(!s.IsEmpty(h)){var p=CCFMiscUtil_CreatePropSet();p.DecodeFromString(h),h=p.GetProperty("Name"),s.IsEmpty(h)&&(h=e.GetProperty("SWEActiveApplet").toString())}else h=e.GetProperty("SWEActiveApplet").toString();return SiebelApp.BrowserCacheMgr.DiscoverMetadata(i,r,c,h,l),$.callback(this,function(e){if(e.err)return o=e,$.setReturnValue(o),o;f=e.retVal,a.DecodeFromString(f),o={err:"",retVal:a},$.setReturnValue(o)}),o}function U(e,t,n,r,s){var o={err:!1},u,a="",f=null,l="",c="",h={},p=i.get("PROP_SERVICE");if(!t)return o={err:"",retVal:!1},$.setReturnValue(o),o;h=z.call(this,t);if(!h)return o={err:"NO_CMD",retVal:!1},$.setReturnValue(o),o;if(h[i.get("PROP_TARGET")]!=="Server"&&h[i.get("PROP_TARGET")]!=="SI Plus"){var d=SiebelApp.S_App.GetActiveView();if(h[i.get("PROP_APPLET")]&&d===null)return o={err:"",retVal:!1},$.setReturnValue(o),o;if(h[i.get("PROP_TARGET")]!=="Browser Applet"&&d&&d.GetName()==="Task Pane View"&&h.method!=="Logoff")return o={err:"",retVal:!1},$.setReturnValue(o),o}h[i.get("PROP_ARGUMENT")]&&e.SetProperty("Method Argument",h[i.get("PROP_ARGUMENT")]),e.SetProperty("Command",t);if(h[p]!==" "&&h[p]){a=h[p],l=h.method,f=SiebelApp.S_App.GetService(a);if(f){if(!s){u=o=f.DoCanInvokeMethod(l),o={err:!1},$.setReturnValue(o);if(u.err)return o=u,$.setReturnValue(o),o;var v=u.retVal;return o={err:"",retVal
:v},$.setReturnValue(o),o}o=f.Invoke(l,e),u=o,function(e){o={err:!1},$.setReturnValue(o);if(e.err)return o=e,$.setReturnValue(o),o}.call(this,u)}}else{if(!h[i.get("PROP_APPLET")])return o={err:"",retVal:!1},$.setReturnValue(o),o;c=h[i.get("PROP_APPLET")],l=h.method;if(!s){var m,g=SiebelApp.S_App.GetActiveView().GetActiveApplet();g&&g.GetParentApplet()!==null&&g.GetName()===c?m=g:m=SiebelApp.S_App.GetActiveView().GetApplet(c),o=m.CanInvokeMethodX(l),u=o,function(e){o={err:!1},$.setReturnValue(o);if(e.err)return o=e,$.setReturnValue(o),o;var t=e.retVal;return o={err:"",retVal:t},$.setReturnValue(o),o}.call(this,u)}}return o}function z(e){var t={},n=[],r=CCFMiscUtil_CreatePropSet(),s=0;if(!e)return;if(e.indexOf(i.get("CMDMGR_AT"))>=0)return r.DecodeFromString(e),!0;if(e.indexOf(i.get("CMDMGR_STAR"))<0)return!1;n=e.split(i.get("CMDMGR_STAR"));for(s=0;s<n.length;s++){if(s===0)continue;switch(s){case 1:t[i.get("PROP_TARGET")]=n[s];break;case 2:t[i.get("PROP_SERVICE")]=n[s];break;case 3:t[i.get("PROP_METHOD")]=n[s];break;case 4:t[i.get("PROP_APPLET")]=n[s];break;case 5:t[i.get("PROP_ARGUMENT")]=n[s];break;case 6:t[i.get("PROP_DX")]=n[s];break;case 7:t[i.get("PROP_DY")]=n[s];break;case 8:t.popup=n[s];break;default:}}return t}var e,t=SiebelApp.Offlineconstants,n=SiebelApp.OfflineEvents,r=SiebelApp.OfflineAppSettings,i=SiebelJS.Dependency("SiebelApp.Constants"),s=SiebelJS.Dependency("SiebelApp.Utils"),o=t.get("IS_DYNAMIC"),u=t.get("SHOW_POPUP"),a=t.get("SWEMETHOD"),f=t.get("BUILDSCREEN_BS_DRILLDOWN"),l=t.get("BUILDSCREEN_BS_DRILLDOWNBYFIELD"),c=t.get("BUILDSCREEN_BS_ALTERNATE"),h=t.get("BUILDSCREEN_BS_NORMAL"),p=t.get("BUILDSCREEN_BS_DRILLDOWNCUSTOM"),d=t.get("LOG_EVT_CLIENT_SYS"),v={Method:null,Action:null,Type:null},m={context:"",type:"",objname:""},g={},y=[],b="",w="",E=[],S,x=window.location.origin;x=x.concat(window.location.pathname);var T=window.localStorage.getItem("AppName"),N=t.get("DOUIREG_OBJ_NAME"),C=t.get("DOUIREG_OBJ_TYPE"),k=t.get("DOUIREG_OBJ_MTHD"),L=t.get("DOUIREG_EXT_TYPE"),A=t.get("DOUIREG_EXT_TYPEPRE"),O=t.get("DOUIREG_EXT_TYPEPOST"),M=t.get("DOUIREG_OBJ_TYPEAPPLICATION"),_=t.get("DOUIREG_EXT_CONTEXT"),D=SiebelApp.OfflineUtils,P=!0,H=function(){var e,t=[],n={BC:[],prevBC:[],RowId:""},r=window.localStorage,i={},s=!1,o=!1;return JSON.parse(r.getItem("CacheType"))||r.setItem("CacheType",JSON.stringify("Reactive")),this.SetCacheType=function(e){r.setItem("CacheType",JSON.stringify(e))},this.GetCacheType=function(){return JSON.parse(r.getItem("CacheType"))},this.CallPendingOp=function(){i.asyncFn.apply(i.scope,i.args)},this.HasPendingOp=function(){return s},this.SetPendingOp=function(e,t,n,r){e?(i.asyncFn=t,i.args=n,i.scope=r):i={},s=e},this.SetStatus=function(e){w=e},this.GetStatus=function(){return w},this.GetIsCreatingPopup=function(){return o},this.SetIsCreatingPopup=function(e){o=e},this.GetControlRegExpMap=function(){return S||(S={}),S},this.SetControlRegExpMap=function(e){S=e},H=function(){return e},this.SetCmdMap=function(){t.push({cmd:"GotoBookmarkView",cmdTag:"oinf"}),t.push({cmd:"GotoView",cmdTag:"oinf"}),t.push({cmd:"GotoViewCold",cmdTag:"oinf"}),t.push({cmd:"GetViewLayout",cmdTag:"gvl"}),t.push({cmd:"GetAppletLayout",cmdTag:"nl"}),t.push({cmd:"NewRecord",cmdTag:"nr"}),t.push({cmd:"EditRecord",cmdTag:"er"}),t.push({cmd:"WriteRecord",cmdTag:"wr"}),t.push({cmd:"DeleteRecord",cmdTag:"dl"}),t.push({cmd:"AddRecord",cmdTag:"ar"}),t.push({cmd:"GetCachedFrame",cmdTag:"gcf"}),t.push({cmd:"GotoPostedAction",cmdTag:"gpa"}),t.push({cmd:"EditField",cmdTag:"ef"}),t.push({cmd:"NewLayout",cmdTag:"nl"}),t.push({cmd:"CreateRecord",cmdTag:"cr"}),t.push({cmd:"ShowPopup",cmdTag:"puoinf"}),t.push({cmd:"NewQuery",cmdTag:"qr"}),t.push({cmd:"UndoQuery",cmdTag:"uqr"}),r.setItem("cmdMap",JSON.stringify(t))},this.GetCmdMap=function(){return r.getItem("cmdMap")?JSON.parse(r.getItem("cmdMap")):(this.SetCmdMap(),JSON.parse(r.getItem("cmdMap")))},this.GetOfflineAppContext=function(){return n},$.extend({callback:function(e,t){var n=SiebelApp.OfflineAppMgr,r;t?n.CheckResolvedState()?(r=b,b={err:!1},t.call(e,r)):$.when.apply($,y).done(function(){n.CheckResolvedState()?(r=b,b={err:!1},t.call(e,r)):$.callback(e,t)}):$.setReturnValue({err:!0})},setReturnValue:function(e){b=e},eachAsyncOp:function(e,t){if(t instanceof Array){if(!t.length)return}else{if(!t)return;t=[t]}var n=0,r=t.length,i=SiebelApp.OfflineAppMgr,s=function(o){$.setReturnValue(o),n<r-1&&(n++,i.HandleSingleObj(e,t[n]),$.callback(i,s))};i.HandleSingleObj(e,t[n]),$.callback(i,s)}}),H.prototype=this,e=new H,e.constructor=H,e};return e=new H,H.prototype.ClearDeferredArray=function(){y=[],b={err:!1}},H.prototype.GetCurrentRetVal=function(){return b},H.prototype.PostAppLoad=function(){r.GetUpSyncPostRefresh()&&(r.SetUpSyncPostRefresh(!1),SiebelApp.SyncThreadHandler.SyncInUISession());var e={};e[N]=T,e[C]=M,e[k]=n[M].Application_Start,e[_]=SiebelApp.S_App,e[L]=A;var t=CCFMiscUtil_CreatePropSet();t.SetPropertyStr("commandline","");var i=SiebelApp.S_App.Model.InvokeRegisteredSvc(e,t)},H.prototype.PopulateDeferredArray=function(e){y.push(e)},H.prototype.RemoveObj=function(e){for(var t=0;t<y.length;t++)if(y[t]===e)break;y.splice(t,1)},H.prototype.CheckResolvedState=function(){var e=y.length;for(var t=e-1;t>-1;t--)if(y[t].state()!=="resolved")return!1;return!0},H.prototype.HandleSingleObj=function(e,t){var n=e,r=t.preExecute,i=t.postExecute,s=t.execute,o=t.executeScope,u=t.iterations,a;u||(u=1);var f=0,l=this;r?a=r.call(n,f):a=[];var c=function(e){i&&i.call(n,e),f<u-1?(f++,r?a=r.call(n,f):a=[],s.apply(o,a),$.callback(l,c)):c=null};s.apply(o,a),$.callback(l,c)},H.prototype.HandleSingleSyncObj=function(e,t){var n={err:!1},r,i=e,s=t.preExecute,o=t.postExecute,u=t.execute,a=t.executeScope,f=t.iterations,l;f||(f=1);var c=0,h=this;s?l=s.call(i,c):l=[];var p=function(e){o&&o.call(i,e),c<f-1?(c++,s?l=s.call(i,c):l=[],n=u.apply(a,l),p.call(h,n)):p=null};return n=u.apply(a,l),p.call(h,n),n},H.prototype.eachSyncOp=function(e,t){var n={err:!1};if(t instanceof Array){if(!
t.length)return}else{if(!t)return;t=[t]}var r=0,i=t.length,s=SiebelApp.OfflineAppMgr;for(r=0;r<i;r++)n=s.HandleSingleSyncObj(e,t[r]);return n},H.prototype.HandleNullResponse=function(e){var n=0,r=s.DecodeFromQueryString(e),i=r.GetProperty(t.get("SWECMD"));if(i!=="GetLastTxn")return SiebelApp.OfflineAppMgr.HandleValidation(r);n="IDS_DOUI_ERR_SYNC";var o=SiebelApp.S_App.OfflineLocaleObject.GetLocalString(n);SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_ALL"),27,5,90,o]),alert(o)},H.prototype.OfflineRequestHandler=function(e,t,n){this.ClearDeferredArray(),SiebelApp.RequestProcessor.IsSupported(e,!1,t)?SiebelApp.RequestProcessor.ProcessReq(e,t,n):D.CcfLogEvent([d,68,5,61,e])},H.prototype.HandleCallback=function(e,t,n){this.AddDefHandlers(e,t,n)},H.prototype.HandleValidation=function(){SiebelApp.S_App.uiStatus.Free()},H.prototype.IsCachableRequest=function(e){var t=[".js",".htm"];if(e!=="undefined"&&e!==""){var n=t.length;for(var r=0;r<n;r++){var i=t[r];if(e.indexOf(i)!==-1){var o=s.DecodeFromQueryString(e),u=o.GetProperty("SWECmd");return u?!0:!1}}return!0}return!1},H.prototype.CacheResponse=function(e,n){if(!SiebelApp.OfflineAppSettings.GetMode()&&!SiebelApp.S_App.GetActiveView()&&SiebelApp.OfflineAppMgr.IsCachableRequest(e)&&n[0]&&n[0]!=="undefined"&&n[0]!==""&&SiebelApp.RequestProcessor.IsSupported(e)){if(n[0].indexOf("SBL-UIF-00335")!==-1){var r=window.location.pathname;return r=r.concat("?SWENeedContext=false&SWECmd=Logoff&SWEBID=-1&SRN=&SWETS="),Top().location.replace(r),!1}if(B.call(this)){var i={};if(e.search("scriptfiles.txt")!==-1)i.SweCmd=t.get("TEXT"),i.ObjName="scriptfiles",i.Response=n[0],i.Type=t.get("DEFAULT_VIEW_INFO");else{var o=s.DecodeFromQueryString(e);i.SweCmd=SiebelApp.RequestProcessor.GetCmdTag(o.GetPropertyAsStr("SWECmd")),i.ObjName=o.GetPropertyAsStr("SWEFrame"),i.Response=n[0],i.Type=t.get("DEFAULT_VIEW_INFO")}return i.ObjName&&SiebelApp.BrowserCacheMgr.CacheOnlineOp(i),!0}}},H.prototype.SetContext=function(e,t,n){m={},m.context=e,m.type=t,m.objname=n},H.prototype.GetContext=function(){return m},H.prototype.ClearContext=function(){m={}},H.prototype.SetPickAppletContext=function(e){g=e},H.prototype.GetPickAppletContext=function(){return g},H.prototype.ClearPickAppletContext=function(){g={}},H.prototype.InvokeMethod=function(e,r,s,o){var u={err:!1},a;if(P){P=!1;var f={},l=CCFMiscUtil_CreatePropSet();f[N]=T,f[C]=M,f[k]="loadevent",f[_]=SiebelApp.S_App,f[L]=O,SiebelApp.S_App.Model.InvokeRegisteredSvc(f,l)}var c=[],f={};f[N]=T,f[C]=M,f[k]=n[M].Application_PreInvokeMethod,f[_]=SiebelApp.S_App,f[L]=A;var l=CCFMiscUtil_CreatePropSet();l.SetPropertyStr("methodName",r);var a=SiebelApp.S_App.Model.InvokeRegisteredSvc(f,l,!0),h=a.err,p=a.retVal;if(h)return SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAAppEventErrPreInvokeMethodFailed",c),u={err:!0},$.setReturnValue(u),u;if(p.Outputargs&&p.Outputargs.GetProperty("Invoked")&&p.Outputargs.GetProperty("Invoked").toString()==="true")return u=a,$.setReturnValue(u),a;var v="OfflineAppMgr.InvokeMethod."+r;D.StartTime(v),D.CcfLogEvent([d,44,5,11,"methodName",r]),e.GetProperty(i.get("SWE_APPLET_STR"))?(this.InvokeAppletMethod(e,r,s,o),$.callback(this,function(e){D.EndTime(v),e.err?(u={err:!0},$.setReturnValue(u)):(u=e,$.setReturnValue(u))})):e.GetProperty(i.get("SWE_SERVICE"))&&e.GetProperty(i.get("SWE_SERVICE"))!==""?(u=this.InvokeServiceMethod(e,r,s,o),$.callback(this,function(e){D.EndTime(v),u=e,$.setReturnValue(u)})):s.apply(this,[t.get("CUD_RESPONSE")]);var f={};f[N]=T,f[C]=M,f[k]=n[M].Application_InvokeMethod,f[_]=SiebelApp.S_App,f[L]=O;var l=CCFMiscUtil_CreatePropSet();return l.SetPropertyStr("methodName",r),SiebelApp.S_App.Model.InvokeRegisteredSvc(f,l),$.setReturnValue(u),u},H.prototype.CanInvokeMethod=function(e,n,r,o){var u={err:!1},a,f="OfflineAppMgr.CanInvokeMethod."+n,l=!1;D.StartTime(f);if(e.GetProperty(i.get("SWE_SERVICE"))&&e.GetProperty(i.get("SWE_SERVICE"))!==""){var c=e.GetProperty("SWEService");if(c){SiebelApp.S_App.Model.SetIsInterFace(1);var h=SiebelApp.S_App.GetService(c);s.IsEmpty(h)?SiebelApp.S_App.Model.SetIsInterFace(-1):(u=h.CanInvokeMethod(n),a=u,u={err:!1},$.setReturnValue(u),SiebelApp.S_App.Model.SetIsInterFace(-1),l=a.retVal)}}else if(e.GetProperty(i.get("SWE_APPLET_STR"))){var p=unescape(e.GetPropertyAsStr(i.get("SWE_APPLET_STR"))),d,v=SiebelApp.S_App.GetActiveView().GetActiveApplet();v&&v.GetParentApplet()!==null&&v.GetName()===p?d=v:d=SiebelApp.S_App.GetActiveView().GetApplet(p),u=d.CanInvokeMethodX(n),a=u,u={err:!1},$.setReturnValue(u),l=a.retVal}var m=CCFMiscUtil_CreatePropSet(),g=i.get("SWE_PROP_SESSION_RANDOM_NUMBER");m.SetPropertyStr("Status",t.get("ACTION_RPC_OK")),m.SetPropertyStr("Result",l);var y=window.localStorage.getItem(g);y&&(m.SetPropertyStr(g,y),m.SetPropertyStr("UC","1"));var b=m.EncodeAsString(),w=[];return w[0]=b,r.apply(SiebelApp.S_App,w),D.EndTime(f),u},H.prototype.ClearPostedActions=function(){v={}},H.prototype.GetPostedAction=function(){return v},H.prototype.PostActions=function(e,t,n){v={},v.Method=t,v.Action=e,v.Type=n},H.prototype.BuildViewAsync=function(e,n,r,i){v={},v.Method=t.get("GOTOVIEW"),v.Action=t.get("ACTION_RPC_BUILD_VIEW_ASYNC"),v.Type=t.get("VIEW_INFO"),v.ViewName=e,i&&i instanceof SiebelApp.S_App.OfflineBOInterface&&(i=i.GetOfflineBO()),v.BusObj=i,v.DrilldownDef=r,v.BuildScreenType=n},H.prototype.ClearQueueMethod=function(){E=[]},H.prototype.OnActionsGotoView=function(e){var n=JSON.parse(window.localStorage.getItem("appURL"));v={},n+="?SWECmd=GotoView",v.Action=t.get("GOTOVIEW"),v.URL=n,v.ViewName=e},H.prototype.QueueMethod=function(e,n,r,i){var s={};s.objName=e,s.methodName=n,s.psInputArgs=r,i?s.methodType=i:s.methodType=t.get("TYPE_FRAME"),E.push(s)},H.prototype.ShowViewOrApplet=function(e,n){var r={err:!1},s;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("OfflineAppMgr.prototype.ShowViewOrApplet");var o=this.GetContext(),u=o.objname;if(!u){var a=SiebelApp.S_App.GetActiveView().GetName(),f=SiebelApp.S_App.GetActiveView().GetActiveApplet
().GetName();u=a.concat("/",f)}return o.context===i.get("SWE_RPC_PROP_APPLET")?SiebelApp.OfflineAppMgr.ShowView(n.request,e,n.callback,u,o.type,t.get("NEWPOPUP")):o.context===i.get("SWE_RPC_PROP_VIEW")&&SiebelApp.OfflineAppMgr.ShowView(n.request,e,n.callback,u,o.type),SiebelApp.OfflineAppMgr.ClearContext(),$.callback(this,function(e){r=e,$.setReturnValue(r),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("OfflineAppMgr.prototype.ShowViewOrApplet")}),r},H.prototype.ShowView=function(e,n,r,i,o,u,a,f,l){var c={err:!1},h;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("OfflineAppMgr.prototype.ShowView");var p=SiebelApp.AjaxRequestMgr.GetActiveRequest();if(p&&p.data){var v;v=s.DecodeFromQueryString(p.data);var m=v.propArray.hasOwnProperty("SWEBMC")||unescape(v.GetPropertyAsStr(t.get("SWECMD")))===t.get("GOTOVIEW")?!0:!1;if(m){var g=[];g=JSON.parse(window.localStorage.getItem(t.get("VIEW_LIST")));if(g.indexOf(i)===-1)return D.CcfLogEvent([d,97,5,100,i]),SiebelApp.OfflineAppMgr.ShowRPCError("",r,e),c}}D.StartTime("OfflineAppMgr.ShowView");if(!u){var y=SiebelApp.S_App.GetActiveView();if(y){var b=s.DecodeFromQueryString(e).GetPropertyAsStr("SWESP");s.IsTrue(b)?u=t.get("NEWPOPUP"):u=t.get("NEWLAYOUT")}else u=t.get("NEWLAYOUT")}return SiebelApp.S_App.BuildView(e,n,r,i,o),$.callback(this,function(t){var n=CCFMiscUtil_CreatePropSet();n.DecodeFromString(t.retVal),SiebelApp.OfflineAppMgr.GetReturnPropSet(u,n,e,r,a,f,l),$.callback(this,function(e){c=e,$.setReturnValue(c),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("OfflineAppMgr.prototype.ShowView"),D.EndTime("OfflineAppMgr.ShowView")})}),c},H.prototype.GetReturnPropSet=function(e,n,r,v,m,g,y){var b={err:!1},w;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("OfflineAppMgr.prototype.GetReturnPropSet");var S=SiebelApp.S_App,T=null,N=[],C="";this.SetStatus(e);var k=i.get("SWE_HIST_OUI_UPDATE_INFO"),L=i.get("SWE_PST_NEW_VIEW"),A=i.get("SWE_PST_VIEW_INFO"),O=i.get("SWE_PROP_TMPL_ITM_HOLDER");n.SetPropertyStr(t.get("STATUS"),e);var M=i.get("SWE_PROP_SESSION_RANDOM_NUMBER"),_=window.localStorage.getItem(M);_&&n.SetPropertyStr(M,_),D.CcfLogEvent([d,73,5,62,e]);if(e!==t.get("REFRESHLAYOUT")&&e!==t.get("NEWLAYOUT")&&e!==t.get("NEWPOPUP")){this.ClearPostedActions();var P=S.GetActiveView();if(P){b=P.GetNotifyPropSet(n,r);var H=CCFMiscUtil_CreatePropSet();H.SetType(k),H.SetProperty(i.get("SWE_HIST_NAV_URL"),HtmlEncode(x)),H.SetProperty(o,!0),n.AddChild(H)}w=b;if(!w.err){C=n.EncodeAsString(),N[0]=C;var B=v.apply(S,N);B&&B.done?B.done(function(){$.callback(this,function(e){b=e,$.setReturnValue(b),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("OfflineAppMgr.prototype.GetReturnPropSet"),n=null,r=null,C=null,N=null,P=null})}):$.callback(this,function(e){b=e,$.setReturnValue(b),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("OfflineAppMgr.prototype.GetReturnPropSet"),n=null,r=null,C=null,N=null,P=null})}else b=w,$.setReturnValue(b)}else{var j=i.get("SWE_RPC_PROP_NEW_POPUP"),F="",I,q;typeof r=="string"&&(F=s.DecodeFromQueryString(r)),I=s.IsEmpty(g)?"":g.viewname;var R=S.GetActiveView(),U=s.IsEmpty(R)?"":R.GetName(),z,W=!1,X=F.GetPropertyAsStr(i.get("SWE_ARG_KEEP_CONTEXT"));X||(X=0);if(m===f||m===l){if(!g)return b={err:!0},$.setReturnValue(b),b;I==="Drill Down To Same View"&&(I=U);if(s.IsEmpty(I))return b={err:!0},$.setReturnValue(b),b}m?(z=m,W=!0):s.IsTrue(X)?(z=c,W=!0):z=h;var V=null;R&&(V=R.GetActiveApplet());var J;V&&(z===f||z===l)&&(J=V.GetBusComp(),J.IsCommitPending()&&(b=J.WriteRecord())),$.callback(this,function(){var m=i.get("SWE_PST_APP_INFO"),M=i.get("SWE_PST_BUSOBJ_INFO"),_=i.get("SWE_PST_NEW_BUSOBJ"),P=i.get("SWE_PST_NEW_VIEW"),H=i.get("SWE_PST_VIEW_INFO"),B=i.get("SWE_PROP_NAME"),X;if(V&&(z===f||z===l)){var K=V.GetName();if(s.IsEmpty(K))return b}var Q=CCFMiscUtil_CreatePropSet();if(e!==j){var G=n.EnumProperties(!0);do Q.SetProperty(G,n.GetProperty(G));while(G=n.EnumProperties(!1))}if(e===j){if(F&&F.PropertyExists(a)){var Y=F.GetProperty(a).toString();Y===u&&n.SetProperty("URL",n.GetProperty("URL").toString()+"&ObjName="+F.GetProperty("SWETA").toString()+"&Type="+t.get("POPUP_INFO"))}this.SetIsCreatingPopup(!0),T=S.ProcessNewPopup(n)}n.propArray=[],n.propArrayLen=0,n.propEnumArray&&(n.propEnumArray=[],n.propEnum=0),Q.SetProperty(o,!0);var Z=CCFMiscUtil_CreatePropSet(),et=CCFMiscUtil_CreatePropSet(),tt=CCFMiscUtil_CreatePropSet(),nt=CCFMiscUtil_CreatePropSet();Z.SetType(m),et.SetType(P),tt.SetType(H),nt.SetType(M),Z.SetProperty(o,!0),et.SetProperty(o,!0),tt.SetProperty(o,!0),e===t.get("NEWLAYOUT")&&tt.SetProperty("IsNewLayout",!0),nt.SetProperty(o,!0);if(SiebelApp.S_App.IsRwd()){var rt,it=n.GetChildByType(m),st,ot;e===t.get("NEWLAYOUT")?(st=it.GetChildByType(L),st&&(ot=st.GetChildByType(A))):e===t.get("REFRESHLAYOUT")&&(ot=it.GetChildByType(A)),ot&&(rt=ot.GetProperty(O),tt.SetProperty(O,rt))}var ut=i.get("SWE_RPC_PROP_NOTIFICATION"),at=S.GetActiveBusObj(),ft=null,lt=null,ct;V&&(z===f||z===l)&&(g.busCompName?lt=g.busCompName:lt=V.GetName(),z===f&&R.GetBusObj().GetName()===ft&&lt===V.GetBusComp().GetName()&&(z=c));if(z===p)z=h;else if(z===f||z===l)W=!0,U===I&&(X=!0),!y&&V!==null&&(z===l&&(ct=g.destFieldName,b=J.FieldValue(g.srcFieldName)),z===f&&(ct=i.get("SWE_ROW_ID_FIELD"),b=J.FieldValue(i.get("SWE_ROW_ID_FIELD")),lt=V.GetBusComp().GetName()));var ht;if(at){var pt=n.GetChildByType(m),dt=pt.GetChildByType(_);if(dt){ht=dt.GetChildByType(M);var vt=at.GetName();ft=dt.GetChildByType(M).GetProperty(B);if(vt!==ft||!W)z=h}else ht=pt.GetChildByType(M)}else z=h;y&&ht.SetPropertyStr("boexist",!0),returnFldObj=b,b={err:!1},$.setReturnValue(b);if(returnFldObj){if(!!returnFldObj.err)return b;s.IsEmpty(returnFldObj.retVal)||(q=returnFldObj.retVal)}e===j&&at&&(ht.SetProperty("isPopup",!0),nt.SetProperty("isPopup",!0)),(z===c||z===f||z===l)&&ht.SetProperty("keepBO",!0);var mt=n.FindChildPosition(ut);mt>=0&&n.RemoveChild(mt);var gt=n.GetChildByType(k),yt;gt&&(gt.SetProperty(i.get("SWE_HIST_NAV_URL"
),HtmlEncode(x)),yt=gt.Clone(),yt.SetProperty(o,!0));var bt=["dPS",m,H,M],wt=[Q,Z,tt,nt];SiebelApp.S_App.Model.SetDyncPS(bt,wt,4),C=n.EncodeAsString(),N.push(C),N.push("success"),D.CcfLogEvent([d,74,5,62,"Static"]);var Et=S.ProcessResponse.apply(S,N),St=this;Et.done(function(){St.ClearPostedActions();var e=0,o=S.GetActiveView();o.ActivateFields(),$.callback(SiebelApp.OfflineAppMgr,function(){var u=g?g.visibilityType:null,a=S.GetActiveBusObj();b=SiebelApp.S_App.Model.EndSetupView(a,I,lt,ct,q,u);var f=s.DecodeFromQueryString(r).GetProperty("SWEMethod");o.GetActiveApplet()&&o.GetActiveApplet().GetBusComp()&&f&&f=="NewQuery"&&o.GetActiveApplet().GetBusComp().SetInQueryState(!0);var l=b;b={err:!1},$.setReturnValue(b);if(!l.err){var c=!1,h;window.localStorage.getItem("reload")&&JSON.parse(window.localStorage.getItem("reload"))&&window.localStorage.getItem("contextArray")&&(c=!0,h=JSON.parse(window.localStorage.getItem("contextArray")),e=h.length);if(c){var p=!1;for(var m=0;m<e;m++){var y=a.GetBusCompX(h[m].bc,!0);if(y){s.IsEmpty(h[m].ss)||y.SetSearchSpec(h[m].ss);if(h[m].cursor&&h[m].cursor>0){var x=y.GetCursor();x[0]=h[m].cursor,y.SetCursor(x)}p=!0}}p||window.localStorage.setItem("reload",!1)}o.Populate(),b={err:!1},$.setReturnValue(b);var k=b;b={err:!1},$.setReturnValue(b);if(!k.err){var L,A,O;A=o.GetAppletMap();var M=null,_=SiebelApp.AjaxRequestMgr.GetActiveRequest();if(_&&_.data){var P;P=s.DecodeFromQueryString(_.data);var H=P.propArray.hasOwnProperty("SWEBMC");if(H){D.CcfLogEvent([d,98,5,100,o.GetName()]);var B=P.GetProperty("SWEApplet0");B=B?unescape(B):B;var j=P.GetProperty("SWERowId0");if(!B){var F=s.DecodeFromQueryString(window.location.href);B=F.GetProperty("SWEApplet0"),B=B?unescape(B):B,j=F.GetProperty("SWERowId0")}if(B&&j){var U=A[B]?A[B].GetBusComp():undefined;U&&(D.CcfLogEvent([d,99,5,100," Applet: "+B+" ,RowId: "+j]),b=U.PositionById(j))}}}while(E.length>0){L=E.shift();if(L.methodType===t.get("TYPE_BUSCOMP")){for(M in A)if(A[M].GetBusComp().GetName()===L.objName){O=A[M];break}}else if(L.methodType===t.get("TYPE_FRAME"))for(M in A)if(A[M].GetName()===L.objName){O=A[M];break}}O&&L.methodName&&(b=O.InvokeMethodX(L.methodName,L.psInputArgs)),w=b,b={err:!1},$.setReturnValue(b);if(!w.err){a=S.GetActiveBusObj();if(!gt.GetProperty(i.get("SWE_HIST_REPLACE"))){window.localStorage.setItem("view",o.GetName());var h=[],z="";for(var W in A)if(A[W]){var X=A[W],U=X.GetBusComp();if(!U)continue;var V=U.GetName();if(z.indexOf(V)===-1&&!U.IsCommitPending()&&typeof X.GetAssocAppletName=="undefined"&&typeof X.GetPickAppletName=="undefined"){var J={};z=z.concat(V),J.bc=V,J.ss=U.GetSearchSpec(),J.sc=U.GetScrollCount(),U.CheckActiveRow()&&U.GetWS()[U.GetActiveRow()]&&(J.Id=U.GetWS()[U.GetActiveRow()].Id),h.push(J)}}var K=[];K=SiebelApp.OfflineAppMgr.SortBCOrder(h,K),window.localStorage.setItem("contextArray",JSON.stringify(K))}o.InterpolateDyncUIPS(tt),a.InterpolateBCPS(nt),Z.AddChild(nt),tt.GetProperty("IsNewLayout")==="true"?(et.AddChild(tt),Z.AddChild(et)):Z.AddChild(tt),Q.AddChild(Z),Q.AddChild(yt),o.GetNotifyPropSet(Q,r),b=o.SetNotifyObjData(nt),w=b,b={err:!1},$.setReturnValue(b);var G=function(){SiebelApp.OfflineAppMgr.SetStatus(""),rt=null,Q=null,P=null,Z=null,tt=null,nt=null,gt=null,n=null,a=null,n=null,r=null,C=null,N=null,R=null,Et=null};if(!w.err){var Y=Q.EncodeAsString();D.CcfLogEvent([d,74,5,62,"Dynamic"]);var rt=v.call(S,Y);rt.done(function(){SiebelApp.S_App.Model.ResetDyncPS();var e=SiebelApp.OfflineAppMgr.HasPendingOp();SiebelApp.OfflineAppMgr.SetIsCreatingPopup(!1),e?(SiebelApp.S_App.ProcessCallbacks(T,[]),SiebelApp.OfflineAppMgr.CallPendingOp(),$.callback(this,function(){SiebelApp.S_App.ProcessCallbacks(T,[]),SiebelApp.OfflineAppMgr.SetPendingOp(!1),b=w,$.setReturnValue(b),G.call(this),G=null})):(b=w,$.setReturnValue(b),G.call(this),G=null,SiebelApp.OfflineAppMgr.PostAppLoad())})}else b=w,$.setReturnValue(b),G.call(this),G=null}}}})})})}return b},H.prototype.GoToView=function(e,t){SiebelApp.S_App.GotoView(e,"",t,null)},H.prototype.SortBCOrder=function(e,t,n){var r=SiebelApp.S_App.GetActiveBusObj();if(e.length===1)return t.push(e[0]),e.splice(0,1),t;if(e.length===0)return t;for(var i=0;i<e.length;i++){var s=r.GetBusCompX(e[i].bc,!0);if(!s.GetParentBusComp()||s.GetParentBusComp().GetName()===n)t.push(e[i]),e.splice(i,1),this.SortBCOrder(e,t,s.GetName())}return t},H.prototype.InvokeAppletMethod=function(e,n,r,s){var o={err:!1},u;D.CcfLogEvent([d,44,5,21,"methodName",n]),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("OfflineAppMgr.prototype.InvokeAppletMethod");var a,f,l=unescape(e.GetProperty(i.get("SWE_APPLET_STR")).toString());f=SiebelApp.S_App.GetActiveView().GetActiveApplet(),f&&f.GetParentApplet()!==null&&f.GetName()===l?a=f:a=SiebelApp.S_App.GetActiveView().GetApplet(l);var c=e.GetProperty(t.get("SWE_FRAME_ID_STR"));o=a.PrepareToInvokeMethod(n,s),o={err:!1},$.setReturnValue(o),a.SetDefaultShowMode();var h={};h.callback=r,h.request=s;var p=CCFMiscUtil_CreatePropSet();return p.SetProperty("Request",s),n=="GotoView"&&p.AddChild(e),o=a.InvokeMethodX(n,p),$.callback(this,function(e){o={err:!1},$.setReturnValue(o);if(!e.err)v.Action?j.call(this,h):c?(this.PostActions(t.get("ACTION_RPC_COMPLETED"),n),j.call(this,h)):SiebelApp.OfflineAppMgr.ShowViewOrApplet(n,h),$.callback(this,function(e){if(!!e.err)return o={err:!0},$.setReturnValue(o),o;SiebelApp.OfflineAppMgr.ClearPostedActions(),o=e,$.setReturnValue(o),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("OfflineAppMgr.prototype.InvokeAppletMethod")});else if(e.err)return SiebelApp.OfflineAppMgr.ClearPostedActions(),o={err:!0},$.setReturnValue(o),o}),o},H.prototype.PrepareWriteRecordResponse=function(e){var t=CCFMiscUtil_CreatePropSet();t.DecodeFromString(e);var n=t.GetChildByType("api"),r,s,o=n.GetChildByType("nbo");o=o.GetChildByType("boi");var u=n.FindChildPosition("nbo");n.RemoveChild(u),n.AddChild(o);var a=null,f=n.GetChildByType("nv"),l=f.GetChildByType("vi"),c=l.Clone("vi"),h=l.GetChildCount();for(var p=0
;p<h;p++)c.RemoveChild(0);for(p=0;p<h;p++){var d=l.GetChild(p),v=d.GetChildCount();r=null,s=null;var m=d.GetType();m==="na"?(r=CCFMiscUtil_CreatePropSet(),r.SetType("rctl")):m==="nla"&&(s=CCFMiscUtil_CreatePropSet(),s.SetType("rcl"),r=CCFMiscUtil_CreatePropSet(),r.SetType("rctl"));if(v>0)for(var g=0;g<v;g++)a=d.GetChild(g),a.GetType()==="ai"&&(r&&a.InsertChildAt(r,0),s&&a.InsertChildAt(s,0),m==="na"&&a.GetPropertyAsStr(i.get("SWE_PST_APPLET_MODE"))===i.get("SWE_PST_APPLET_MODE_BASE")&&a.SetPropertyStr(i.get("SWE_PROP_IS_EDIT"),"0")),c.AddChild(a);else c.AddChild(d)}u=n.FindChildPosition("nv"),n.RemoveChild(u),n.AddChild(c),t.SetProperty("Status","RefreshLayout");var y=t.EncodeAsString();return y},H.prototype.ShowRPCError=function(e,t,n){var r=CCFMiscUtil_CreatePropSet(),i=CCFMiscUtil_CreatePropSet(),s=CCFMiscUtil_CreatePropSet();if(e&&e.HasErrorMsg()){var o=e.GetErrorCodeString(),u=e.GetErrorText();i.SetProperty("ErrMsg",u),i.SetProperty("ErrCode",o),s.SetType("Errors"),s.AddChild(i),r.AddChild(s)}SiebelApp.OfflineAppMgr.GetReturnPropSet("Error",r,n,t)},H.prototype.CheckValidation=function(e){var t=e.GetType(),n=!0;if(t==="Ack_ValidateRequest"){SiebelApp.OfflineAppSettings.SetMode(!1);var r=e.GetPropertyAsStr("Status");alert(r),SiebelApp.dlgProgress.Remove(),SiebelApp.S_App.UpdateSyncStatus("DownLoadFailed"),n=!1}return n},H.prototype.CheckServerConnection=function(e,n,r){var i=!1;SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),39,5,86,""]);if(r)(e.indexOf("<!DOCTYPE")===-1||e.indexOf("scripts/login.js")===-1)&&(e.indexOf("SWECmd=Login")===-1||e.indexOf('alert("')===-1)&&(i=!0);else{var s=e.length;s<=3&&e.indexOf("OK")!==-1?i=!0:e.indexOf("loadedfromcache")!==-1?i=!1:e.indexOf("<!DOCTYPE")===0&&e.indexOf("manifest")!==-1?i=!0:!n&&SiebelApp.OfflineUtils.IsValidServerResponse(e)?i=!0:e.indexOf('name="SWECmd"')!==-1&&e.indexOf('value="Ping"')!==-1?i=!0:e.indexOf("SWECmd=Login")!==-1&&e.indexOf('alert("')!==-1&&(window.localStorage.setItem("SRN",""),i=!0)}if(!i&&n)if(SiebelApp.OfflineAppSettings.GetPkgStatus())SiebelApp.OfflineAppSettings.GetMode()&&(SiebelApp.OfflineAppSettings.SetUpSyncStatus(!0),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),21,5,86])),this.HandleNetworkError(e);else{var o=SiebelApp.S_App.OfflineLocaleObject.GetLocalString("IDS_DOUI_ERR_OFFLINE_PKG");SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,5,86,o]),alert(o)}return SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),39,5,86,i?"Passed":"Failed"]),i},H.prototype.HandleNetworkError=function(e){var t=function(){window.localStorage.setItem("UpSyncInProgress",JSON.stringify(!1)),window.localStorage.setItem("WorkOffline",JSON.stringify(!0));var e=window.location,t=e.origin.concat(e.pathname);window.location.href=t},n=SiebelApp.S_App.OfflineLocaleObject.GetLocalString("IDS_CLIENT_CONTINUE_WORK_OFFLINE"),r='<div class="siebui-rta-logo"></div><input id="continueofflinebutton" type="button" value="'+n+'" class="siebui-rta-btn"/>',i=document.createElement("div");i.onclick=t,i.id="returntoappcontainer",i.class="siebui-rta-c",i.innerHTML=r,document.body.innerHTML=e,document.body.appendChild(i)},H.prototype.Ping=function(e){var n=SiebelApp.S_App.GetPageURL(),r=window.localStorage.getItem("SRN");n+="?SWECmd=Ping";if(r.length){n=n+"&SRN="+r;var i=Math.random();n=n+"&SWETS="+i}var s;SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),82,5,92,""]);var o=n.split("?")[1];return $.ajax({type:"POST",async:!1,url:n,data:o,success:function(n){SiebelApp.OfflineAppMgr.CheckServerConnection(n,!0)&&(s=!0,e&&!(n.length<=3&&n.indexOf(t.get("SRVR_RESPONSE_OK"))!==-1)&&(s=!1)),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),82,5,92,s?"Passed":"Failed"])},complete:function(e,n){n==="error"&&(SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),82,5,92,"Failed"]),s=F.call(this))}}),s},H.prototype.HandleServerUnavailabilty=function(){var e="";if(!SiebelApp.OfflineAppSettings.GetMode())if(SiebelApp.OfflineAppSettings.GetPkgStatus()){SiebelApp.OfflineAppSettings.OnSuccessfulDataDownload();var n=window.location;n.replace(n.origin.concat(n.pathname))}else e=SiebelApp.S_App.OfflineLocaleObject.GetLocalString("IDS_DOUI_ERR_OFFLINE_PKG"),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,5,91,e]),alert(e);else e=SiebelApp.S_App.OfflineLocaleObject.GetLocalString("IDS_DOUI_ERR_SYNC"),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,5,91,e]),alert(e)},H.prototype.ModifyLayout=function(e){var t=this.GetControlRegExpMap();for(var n in t)t[n]&&(e=e.replace(t[n],n));return t=null,SiebelApp.OfflineAppMgr.SetControlRegExpMap(null),e},H.prototype.InvokeServiceMethod=function(e,n,r,o){var u={err:!1},a,f=CCFMiscUtil_CreatePropSet(),l=CCFMiscUtil_CreatePropSet(),c=e.GetProperty("SWEService"),h=!1;SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_CLIENT_SYS"),50,5,94,c,n]);if(c!==""){SiebelApp.S_App.Model.SetIsInterFace(1);var p=SiebelApp.S_App.GetService(c);if(!s.IsEmpty(p)){h=!0;var d=e.GetPropertyAsStr(i.get("SWE_INPUT_PS"));d=unescape(d);var v=CCFMiscUtil_CreatePropSet();v.DecodeFromString(d);var m=v.GetType(),g=v.GetValue(),y;v.GetPropertyCount()>0||v.GetChildCount()>0||!s.IsEmpty(g)||!s.IsEmpty(m)?y=v:y=e,n==="SetProperty"||n==="PropertyExists"||n==="RemoveProperty"||n==="GetProperty"||n==="GetFirstProperty"||n==="GetNextProperty"?l=I.call(this,p,n,y):u=p.Invoke(n,v),a=u,u={err:!1},$.setReturnValue(u),SiebelApp.S_App.Model.SetIsInterFace(-1);if(a.err)return SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_CLIENT_SYS"),84,5,94,a.err]),u=a,$.setReturnValue(u),u;var b={};b.request=o,b.callback=r;var w=j.call(this,b);if(w)return u;a.retVal&&(l=a.retVal),l.SetType("ResultSet"),f.AddChild(l),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_CLIENT_SYS"),85,5,94,JSON.stringify(l)]),this.GetReturnPropSet(i.get("SWE_RPC_PROP_STATUS_COMPLETED"),f,o,r)}else SiebelApp.S_App.Model.SetIsInterFace(-1)}if(h)return u;if(n==="PrepareAppletMenu")h=!0,u=R.call(this,e,n,r,o);else if(
n==="BatchCanInvoke")h=!0,u=q.call(this,e,n,r,o);else{u=U.call(this,e,n,r,o,!0);if(u.err!="NO_CMD")return u;SiebelApp.OfflineAppMgr.GetReturnPropSet(i.get("SWE_RPC_PROP_STATUS_COMPLETED"),f,o,r)}return h&&$.callback(this,function(e){if(e.err)return SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_CLIENT_SYS"),84,5,94,e.err]),u=e,$.setReturnValue(u),u;l=e.retVal,f.AddChild(l),f.SetType("ResultSet"),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_CLIENT_SYS"),85,5,94,JSON.stringify(l)]),SiebelApp.OfflineAppMgr.GetReturnPropSet("1",f,o,r)}),u},e}()),typeof SiebelApp.S_App.HistoryMgr&&function(){var e=SiebelApp.Offlineconstants,t=SiebelJS.Dependency("SiebelApp.Constants"),n=SiebelApp.S_App.HistoryMgr,r=SiebelJS.Dependency("SiebelApp.Utils"),i=SiebelApp.OfflineUtils,s=e.get("IS_DYNAMIC"),o=e.get("LOG_EVT_CLIENT_SYS"),u=n.prototype.ProcessObjectInfo;n.prototype.ProcessObjectInfo=function(n){if(!SiebelApp.OfflineAppSettings.GetMode())return u.call(this,n);var a;if(n.propArray.hasOwnProperty(s)){var f=SiebelApp.S_App.GetActiveView(),l=f.GetName();a=f.GetDefn();var c,h,p,d,v=r.IsTrue(a.AddToHistory);if(v){var m="";r.IsEmpty(a.ThreadTitle)?r.IsEmpty(a.ViewTitle)?m=a.ViewbarText:m=a.ViewTitle:m=a.ThreadTitle,!r.IsEmpty(a.ThreadApplet)&&!r.IsEmpty(a.ThreadField)&&(c=f.GetAppletMap()[a.ThreadApplet],h=c?c.GetBusComp():undefined,p=h?h.FindWorkSet(h.GetActiveRow()):undefined,d=p?p[i.RemoveNonAlphaChars(a.ThreadField)]:undefined,d&&(m+=": "+d)),n.SetProperty("n",m);var g,y;if(n.propArray.hasOwnProperty("hnurl")){g=n.GetProperty("hnurl");var b=g,w=r.DecodeFromQueryString(g),E;return w.SetProperty("SWECmd",e.get("GOTOVIEW")),w.SetProperty("SWEView",URLEncode(l)),c&&p&&(E=unescape(c.GetName()),w.SetProperty("SWEApplet0",URLEncode(E)),w.SetProperty("SWERowId0",p.Id)),g=SiebelApp.S_App.GetPageURL()+t.get("SWE_ARG_START")+r.EncodeToQueryString(w,!1),n.SetProperty("hnurl",HtmlEncode(g)),w.SetProperty("SWECmd",e.get("GOTOBOOKMARKVIEW")),w.SetProperty("SWEBMC",""),y='App().GotoView("'+l+'", "", "',y+=SiebelApp.S_App.GetPageURL()+t.get("SWE_ARG_START")+r.EncodeToQueryString(w,!1),y+='",_sweclient._swecontent._sweview)',n.SetProperty("hnact",HtmlEncode(y)),i.CcfLogEvent([o,100,5,100,y]),u.call(this,n)}}}}}(),typeof SiebelApp.ProactiveCacheBuilder=="undefined"&&(SiebelJS.Namespace("SiebelApp.ProactiveCacheBuilder"),SiebelApp.ProactiveCacheBuilder=function(){function L(e,t,i,s,u){var a=e.GetChildCount(),f=!1,l=SiebelApp.dlgProgress.percent,c=r.GetPkgStatus();if(c){var h=!1,p;for(var d=0;d<a;d++)p=e.GetChild(d),p.GetProperty("fSync")==="1"&&(S.push(N.RemoveNonAlphaChars(p.GetType())),h=!0);h&&SiebelApp.ProactiveCacheBuilder.ClearDataTables(!1,S)}$.callback(this,function(){var r=0,c=function(){var t=e.GetChild(r),h=t.GetType(),p=h,d={},v=[],g=0,S=t.GetChildCount();for(var x=0;x<S;x++){var T=t.GetChild(x);d[T.GetType()]=T}h=N.RemoveNonAlphaChars(h),SiebelApp.AttachmentMgr&&SiebelApp.AttachmentMgr.ParseData&&SiebelApp.AttachmentMgr.ParseData(h,d,s);if(d.Schema!==undefined&&s!==2){var C;w.indexOf(h)!==-1&&(C=SiebelApp.SqlBuilder.DeleteTable(h),y.DeleteTable(C));var k=d.Schema.GetProperty("Schema");if(k!==undefined){k.indexOf("||")!==-1&&(SiebelJS.Log("Bad Schema for "+h+" :"+k),k=k.replace(/||/g,"|")),f=!0,v=k.split("|"),g=v.length;for(var L=0;L<g;L++)v[L]=N.RemoveNonAlphaChars(v[L]);var _,D="",P=d.Schema.GetProperty("UKCR");P==="0"&&i&&(D=SiebelApp.Metadata.GetBCUnqKeys(p)),_=SiebelApp.SqlBuilder.CreateTable(h,v,D,i),N.CcfLogEvent([m,4,1,2,h]),!u&&D?N.CcfLogEvent([n.get("LOG_EVT_DATA_EX_DETAILED"),27,1,50,D]):u||N.CcfLogEvent([n.get("LOG_EVT_DATA_EX_DETAILED"),27,1,50," "]),y.CreateTable(_,h,v),b[h]=v,u&&w.push(h)}}if(d.Data!==undefined&&d.Data.GetChildCount()){b[h]&&(g=b[h].length,v=b[h]);var H=d.Data.GetChildCount(),B=H,j=[],F=[],I=[],q=[],R=[];f=!0,N.CcfLogEvent([m,5,1,2,h,v.length,H]);for(var U=0;U<B;U++){var z=d.Data.GetChild(U);if(!z)continue;var W=z.GetProperty("Record");if(!W)continue;W=W.replace(/\\2/g,"~").replace(/\\4/g,"&").replace(/\\3/g,"\\");var X=h==="MBCs"?W.split("^"):W.split("|"),V=X.length;for(var J=0;J<V;J++){if(X[J]===undefined||X[J]==="")X[J]="";X[J]=X[J].replace(/\\0/g,"|").replace(/\\1/g,"^")}if(V!==g){N.CcfLogEvent([m,6,1,2,g,V,h]);if(V<g){var K=g-V;for(J=0;J<K;J++)X.push("")}}z.GetValue()==="U"?F.push(X):z.GetValue()==="I"?I.push(X):z.GetValue()==="A"?(q.push(X),I.push(X)):z.GetValue()==="M"?(R.push(X),F.push(X)):j.push(X)}j.length&&y.InsertRecordSet(h,v,j);var Q=I.length,G=F.length,Y=v.length;if(Q||G){var Z=0;for(var et=0;et<Y;et++)if(v[et]==="Id"){Z=et;break}var tt=0,nt=function(e){!e.err&&e.retVal<=0&&y.InsertRecord(h,v,F[tt])},rt=function(e){tt=e;var t=F[tt],n=t[Z];E.indexOf(n)<0&&E.push(n);var r=SiebelApp.SqlBuilder.UpdateRecord(h,v,t,o,n);return[r,n]};if(G){var it={iterations:G,execute:y.UpdateRecord,executeScope:y,postExecute:nt,preExecute:rt};$.eachAsyncOp(this,it)}$.callback(this,function(e){if(!e.err&&Q){var t=A.call(this,I,Z),r=n.get("SQLITE_MAX_EXPR_DEPTH"),i=t.length,s=[],o=[];if(i>r){var u=Math.ceil(i/r),a=0,f=function(){var e=t.splice(0,r),n=I.splice(0,r);M(h,e,n),$.callback(this,function(e){var t=e.retVal;o.length===0?o=t.arrInsertRec:o=o.concat(t.arrInsertRec),s.length===0?s=t.arrUpdateRec:s=s.concat(t.arrUpdateRec),a++,a<u?f.call(this):O.call(this,h,v,o,s,Z)})};f.call(this)}else M(h,t,I),$.callback(this,function(e){var t=e.retVal;o=t.arrInsertRec,s=t.arrUpdateRec,O.call(this,h,v,o,s,Z)})}})}}$.callback(this,function(){if(d.drid!==undefined){var e,t=d.drid.GetProperty("Record");t&&(t.indexOf("|")!==-1&&(t=t.replace(/\|/g,"','")),E.push(t),t="'"+t+"'",f=!0,e=SiebelApp.SqlBuilder.DeleteMutlipleRecord(h,o,t),y.Execute(e))}$.callback(this,function(){var e=new $.Deferred;SiebelApp.OfflineAppMgr.PopulateDeferredArray(e.promise()),setTimeout(function(){if(u){var t=l+r*5/a;SiebelApp.dlgProgress.Update(t,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_SAVE_METADATA"))}else{var t=l+r*15/a;SiebelApp.dlgProgress.Update(t,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_SAVE_DATA"))}SiebelApp
.OfflineAppMgr.RemoveObj(e.promise()),e.resolve()},0),$.callback(this,function(){r++,r<a&&c.call(this)})})})};r<a&&c.call(this),$.callback(this,function(){f?y.GetBrowserStorage().SetPostTxnCallback(t):t.call(this)})})}function A(e,t){var n=[],r=e.length;for(var i=0;i<r;i++)n.push(e[i][t]),E.push(e[i][t]);return n}function O(e,t,n,r,i){y.InsertRecordSet(e,t,n),$.callback(this,function(n){var s=r.length;if(s){var u=0,a=function(n){u=n;var s=r[u],a=s[i],f=SiebelApp.SqlBuilder.UpdateRecord(e,t,s,o,a);return[f,a]};if(s){var f={iterations:s,execute:y.UpdateRecord,executeScope:y,postExecute:null,preExecute:a};$.eachAsyncOp(this,f)}}})}function M(e,t,n){var r=[],i=[],s=SiebelApp.SqlBuilder.BuildWhereClause("IN","Id",t),o=t.length,u=SiebelApp.SqlBuilder.SelectRecord(e,s,["Id"]);y.Execute(u.selectQuery,u.valList,!0),$.callback(this,function(e){if(!e.err){var s=e.retVal,u=s.length;if(u){var a;for(var f=0;f<o;f++){var l=t[f];a=!1;for(var c=0;c<u;c++)if(l===s[c].Id){a=!0,i.push(n[f]);break}a||r.push(n[f])}}else r=n}var h={};h.arrInsertRec=r,h.arrUpdateRec=i,$.setReturnValue({err:!1,retVal:h})})}function _(){setTimeout(function(){T.setItem(a,JSON.stringify(b)),T.setItem(u,JSON.stringify(w)),P.call(SiebelApp.ProactiveCacheBuilder),$.callback(this,function(){N.CcfLogEvent([m,108,1,1,SiebelApp.OfflineUtils.GetTS()]);if(r.GetMode()===!0){var e=JSON.parse(T.getItem("StringCache"));e&&SiebelApp.S_App.SetStringCache(e)}r.OnSuccessfulDataDownload(),C=!1,T.getItem("appCacheDone")&&JSON.parse(T.getItem("appCacheDone"))&&(SiebelApp.dlgProgress.Update(100),SiebelApp.S_App.UpdateSyncStatus(),SiebelApp.dlgProgress.Remove(),r.ReloadToOffline(!0))})},1e3)}function D(e,n){var r,s;if(i.IsEmpty(n)||i.IsEmpty(e)){N.CcfLogEvent([g,22,1,8]);return}switch(e){case l:r=t.get("PRO_DB_PICKAPPLET_INFO_TBL_COLS"),s=n.split("|"),s&&s.length===3?y.InsertRecord(t.get("PRO_DB_PICKAPPLET_INFO_TBL"),[r.FldInfo,r.PickApplet],[s[0]+"|"+s[1],s[2]]):N.CcfLogEvent([g,23,1,8,"Pick Applet Info",n]);break;case h:r=t.get("PRO_DB_PICKFLD_MAP_TBL_COLS"),s=n.split("|");if(s&&s.length===3){var o="null",u=s[2],a=u.split(","),f=a.length;u="";for(var c=0;c<f;c++){if(!a[c])continue;var p=a[c].split(":"),d=p.length;if(d>=2){if(p[0]&&p[1]){var v=p[0]+":"+p[1];u+=v+",",d===3&&p[2]==="1"&&(o=v)}}else N.CcfLogEvent([g,24,1,8,a[c]])}u=N.RTrim(u,","),y.InsertRecord(t.get("PRO_DB_PICKFLD_MAP_TBL"),[r.BCName,r.FldName,r.PMap,r.PConstraint],[s[0],s[1],u,o])}else N.CcfLogEvent(g,"23",["Field Pick map Info",n])}}function P(){N.CcfLogEvent([m,107,1,1,SiebelApp.OfflineUtils.GetTS()]);var e;r.GetPkgStatus()&&!x&&(e=SiebelApp.SqlBuilder.BuildWhereClause("IN","TransactionType",["WriteRecord","DeleteRecord"]),e=SiebelApp.SqlBuilder.BuildWhereClause("IN","RowId",E,e,"AND"),e=SiebelApp.SqlBuilder.BuildWhereClause("IN","BusComp",S,e,"OR"));var t=SiebelApp.SqlBuilder.SelectRecord("Sync",e,null,["BusComp","RowId","RecordNum"],"ASC");SiebelApp.BrowserCacheMgr.Execute(t.selectQuery,t.valList,!0),$.callback(this,function(e){if(!e.err){var t=e.retVal,n=t.length;if(n>0){var r,i="",o=!1,u=!1,a,f,l,c,h,p,d,v=[],m={},g=[],y=[],b=[],w=[],E={},S={},x={},T,N,C=function(){for(var e in S)g.push(e),y.push(S[e]);if(u)for(var t in x)b.push(t),w.push(x[t]);o?(E={},a=SiebelApp.SqlBuilder.InsertRecord(c,g,y),E.query=a.insertquery,E.valList=a.values,v.push(E),u&&(E={},a=SiebelApp.SqlBuilder.InsertRecord(h,b,w),E.query=a.insertquery,E.valList=a.values,v.push(E))):(a=SiebelApp.SqlBuilder.UpdateRecord(c,g,y,"Id",i),E={},E.query=a,E.valList=[i],v.push(E),u&&(E={},a=SiebelApp.SqlBuilder.UpdateRecord(h,b,w,"Id",p),E.query=a,E.valList=[p],v.push(E)))};for(var k=0;k<n;k++){f=t[k],r=f.TransactionType,d=f.RowId,l=f.BusComp;if(l!==c||i!==d)i!==""&&C.call(this),S={},x={},g=[],y=[],o=!1,u=!1,b=[],w=[];i=d,c=l;switch(r){case"AddRecord":case"DeleteRecord":v.push(JSON.parse(f.LocalTxnInfo)),i="";break;case"NewRecord":o=!0,S[s.get("SWE_ROW_ID_FIELD")]=d;case"WriteRecord":m=JSON.parse(f.LocalTxnInfo),T=m.FldNames.length;for(var L=0;L<T;L++)S[m.FldNames[L]]=m.FldValue[L];if(m.InterTableName){u=!0,N=m.InterTableCol.length;for(var A=0;A<N;A++)x[m.InterTableCol[A]]=m.InterTableColVal[A];h=m.InterTableName,p=m.InterTableRowId}k===n-1&&C.call(this)}}var O=function(e){var t=v[e];return[t.query,t.valList]},M=v.length;if(M>0){var _={iterations:M,execute:SiebelApp.BrowserCacheMgr.Execute,executeScope:SiebelApp.BrowserCacheMgr,preExecute:O};$.eachAsyncOp(this,_),$.callback(this,function(){_=null,v=null})}}}})}var e,t=SiebelApp.OfflineCacheConfig,n=SiebelApp.Offlineconstants,r=SiebelApp.OfflineAppSettings,i=SiebelJS.Dependency("SiebelApp.Utils"),s=SiebelApp.Constants,o=s.get("SWE_ROW_ID_FIELD"),u=n.get("METADATATABLEINFO"),a=n.get("TABLEINFO"),f=n.get("VIEW_NAME"),l=n.get("FLD_PICK_APLT_DET"),c=n.get("PICK_APLT_DET"),h=n.get("FLD_PICK_MAP"),p=n.get("PICK_MAP_INFO"),d=n.get("VIEW_INFO"),v=n.get("DEFAULT_VIEW_INFO"),m=n.get("LOG_EVT_DATA_EX_BASIC"),g=n.get("LOG_EVT_METADATA_EX"),y=SiebelApp.BrowserCacheMgr,b={},w=[],E=[],S=[],x=!1,T=window.localStorage,N=SiebelApp.OfflineUtils,C=!1;T.getItem(a)&&(b=JSON.parse(T.getItem(a))),T.getItem(u)&&(w=JSON.parse(T.getItem(u)));var k=function(){var e;return k=function(){return e},k.prototype=this,e=new k,e.constructor=k,e};return e=new k,k.prototype.ParseAndCacheData=function(e,t){SiebelApp.BrowserCacheMgr.GetInMemDB();var n=e.GetChildCount(),s=r.GetSchemaStatus(),o=e.GetChildByType("SiebData");if(o){N.CcfLogEvent([m,1,1,1,"Data",N.GetTS()]),SiebelApp.dlgProgress.Update(80,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_SAVE_DATA")),SiebelApp.S_App.uiStatus.Busy({mask:!0,timeOut:!1});var u=o.GetProperty("ts");u||(u="");var a=o.GetProperty("fSync");i.IsTrue(a)&&(x=!0,this.ClearDataTables(!1),N.CcfLogEvent([m,106,1,1])),$.callback(this,function(){if(!n){N.CcfLogEvent([m,16,1,1]),u&&T.setItem("TS",u),_.call(this);return}var t=e.GetChildByType("MetaData"),r=function(){T.setItem("TS",u),N.CcfLogEvent([m,7,1,1,SiebelApp.OfflineUtils.GetTS()]),!SiebelApp.AttachmentMgr||SiebelApp.AttachmentMgr.IsFinished
()?_.call(this):(SiebelApp.AttachmentMgr.SetPostDownloadAction(_),SiebelApp.AttachmentMgr.DownloadAllAttachments())},i=function(){SiebelApp.InMemDB.saveToWebDB(),y.GetBrowserStorage().SetPostTxnCallback(r)},a=function(){SiebelApp.Metadata.Load(!0),$.callback(this,function(){L.call(this,o,i,!0,s,!1)})};t?L.call(this,t,a,!1,s,!0):a()})}else N.CcfLogEvent([m,3,1,1,t]),SiebelApp.dlgProgress.Remove(),SiebelApp.S_App.UpdateSyncStatus("FullDownLoadFailed")},k.prototype.ParseAndCacheMetadata=function(e){N.CcfLogEvent([g,1,1,4,"Metadata",SiebelApp.OfflineUtils.GetTS()]);var i=e.GetChildCount(),s=r.GetSchemaStatus(),o,u,a,m,b=[],w=t.get("PRO_METADATASTORE_DB_TBL_COLS");if(s===1){N.CcfLogEvent([g,8,1,4]);var E=N.GetOfflineCacheConfig(t.get("PRO_METADATASTORE_DB")),S=E.tables,x=S.length,k,L=function(e){if(S[e]==="Metadata"){var t="Type",n="!=";return k=SiebelApp.SqlBuilder.DeleteRecords(S[e],[t],null,n),[k,[v]]}return k=SiebelApp.SqlBuilder.DeleteRecords(S[e]),[k]},A={execute:y.Execute,executeScope:y,preExecute:L,iterations:x};$.eachAsyncOp(this,A),$.callback(this,function(){this.ClearDataTables(!0),C=!0})}$.callback(this,function(){N.CcfLogEvent([g,9,1,4]);var s=e.GetProperty("sc");y.CacheSCMap(s);var v=e.GetProperty("OfflineAtt");r.SetOfflineAttEnabled(v);var E=n.get("SWE_PST_SCROLL_FACTOR"),S=e.GetPropertyAsStr(E);S&&T.setItem(E,S);var x=[];for(var C=0;C<i;C++){var k=[];o=e.GetChild(C),u=o.GetType(),m=o.GetProperty(f);switch(u){case l:a=o.GetProperty(c),D.call(this,u,a);continue;case h:a=o.GetProperty(p),D.call(this,u,a);continue;case d:m!==undefined&&b.push(m)}var L=Object.keys(o.propArray),A=L.length;for(var O=0;O<A;O++)L[O]!==f&&k.push(L[O]);var M=k.length;for(var _=0;_<M;_++){var P=o.propArray[k[_]];P&&x.push([m,k[_],P,u])}}y.InsertRecordSet(t.get("PRO_METADATASTORE_DB_TBL"),[w.ObjName,w.SweCmd,w.Response,w.Type],x),N.CcfLogEvent([g,26,1,4,JSON.stringify(b).replace(/,/g," ")]),y.CacheViewList(b),$.callback(this,function(){r.OnSuccessfulMetaDataDownload()})})},k.prototype.ClearDataTables=function(e,t){if(!C){var r=[],i,s={},o=0;if(t){var u=t.length;for(o=0;o<u;o++)i=t[o],e?r[o]=SiebelApp.SqlBuilder.DeleteTable(i):r[o]=SiebelApp.SqlBuilder.DeleteRecords(i)}else{var a=JSON.parse(T.getItem(n.get("TABLEINFO")));for(var f in a)a[f]&&w.indexOf(f)===-1&&(i=f,i&&(e?r[o]=SiebelApp.SqlBuilder.DeleteTable(i):r[o]=SiebelApp.SqlBuilder.DeleteRecords(i),o++));r[o]=SiebelApp.SqlBuilder.DeleteRecords("ApplicationData"),o++}var l=function(e){var t=r[e];return[t]};s={execute:y.Execute,executeScope:y,preExecute:l,iterations:o},$.eachAsyncOp(this,s)}},k.prototype.ProcessGoOnline=function(){SiebelApp.S_App.uiStatus.Busy({mask:!0,timeOut:!1}),r.SetMode(!r.GetMode()),r.SetSyncStatus(!1),SiebelApp.S_App.UpdateSyncStatus();if(SiebelApp.S_App.GetTimer()){var e=SiebelApp.S_App.GetTimer().GetLogBuffer();T.setItem(s.get("SWE_PERF_LOG_DATA"),JSON.stringify(e))}r.ReloadApp()},e}()),SiebelApp.S_App&&define("siebel/offline/applicationcontext",[],function(){(function(){function C(e,t){t&&t!==""&&l&&(l[t]=e)}var e=SiebelApp.S_App.constructor,t=SiebelApp.Offlineconstants,n=SiebelApp.OfflineAppSettings,r=SiebelApp.S_App,i=SiebelJS.Dependency("SiebelApp.Constants"),s=SiebelJS.Dependency("SiebelApp.Utils"),o=window.localStorage,u=SiebelApp.OfflineUtils,a=SiebelApp.S_App.OfflineLocaleObject,f=null,l={},c={},h={},p,d=null,v=o.getItem("AppName"),m=t.get("DOUIREG_OBJ_NAME"),g=t.get("DOUIREG_OBJ_TYPE"),y=t.get("DOUIREG_OBJ_MTHD"),b=t.get("DOUIREG_EXT_TYPE"),w=t.get("DOUIREG_EXT_TYPEPRE"),E=t.get("DOUIREG_EXT_TYPEPOST"),S=t.get("DOUIREG_OBJ_TYPEAPPLICATION"),x=t.get("DOUIREG_EXT_CONTEXT");c.InitExecContext=r.InitExecContext,c.AppendToStrCache=r.AppendToStrCache,c.ClearBusObj=r.ClearBusObj,c.GetService=r.GetService,c.GotoView=r.GotoView,c.InitializeBO=r.InitializeBO,c.CallServer=r.CallServer,c.OnLoadViewContainer=r.OnLoadViewContainer,c.GetFilesAndProcessObjectInfo=e.prototype.GetFilesAndProcessObjectInfo,e.prototype.isGotoview=!1,e.prototype.isNewRecord=!1,r.constructor.prototype.IsEditRecord=!1;var T=new Date;T.setTime(T.getTime()+ -864e5),document.cookie="|sameuisession|=1;expires=Thu, 01 Jan 0000 00:00:00 GMT;",e.prototype.GetInterface=function(){return d||(d=new SiebelApp.S_App.OfflineAppInterface(this)),d},e.prototype.ResetInterface=function(){d&&d.EndLife(),d=null},e.prototype.GetPrevViewBCList=function(){return p},e.prototype.SetPrevViewBCList=function(e){p=e},h.CallServer=function(e,t,n,r){var s=r.async,o=!1;if(typeof r.cb=="function"){var u=r.cb;r.cb=function(){u.apply(this,arguments),t.GetProperty("Status")===i.get("SWE_RPC_PROP_STATUS_ERROR")&&(r.scope&&r.scope.SetErrStatus&&this.SetErrStatus(!0),o=!0),$.setReturnValue({err:o,retVal:t})}}else r.cb=function(){t.GetProperty("Status")===i.get("SWE_RPC_PROP_STATUS_ERROR")&&(r.scope&&r.scope.SetErrStatus&&this.SetErrStatus(!0),o=!0),$.setReturnValue({err:o,retVal:t})};c.CallServer.call(this,e,t,n,r)},h.InitializeBO=function(e){var t=e.GetChild(0).GetProperty("boexist");if(t||e.GetChild(0).GetProperty("keepBO")){var n=this.GetActiveBusObj(),r=this.GetActiveView();if(t){r&&(this.ClearMainView(),this.ClearBusObj(!1));var i=SiebelApp.OfflineAppMgr.GetPostedAction().BusObj;this.SetActiveBusObj(i);var s=this.GetActiveBusObj();s.ProcessChildObjInfo(e.GetChild(0));return}if(n&&r&&r.GetBusObj()===n){var o=n.GetBCMap();p=[];for(var u in o)o.hasOwnProperty(u)&&p.push(o[u]);this.ClearMainView()}n.ProcessObjectInfo(e.GetChild(0))}else c.InitializeBO.call(this,e)},h.GotoView=function(e,t,n,r,o,u){if(this.GetDiscardUserState()||o)return c.GotoView.call(this,e,t,n,r,o,u);var a=this.CanLeaveMainView();if(window.localStorage.getItem("reload")&&JSON.parse(window.localStorage.getItem("reload"))&&window.localStorage.getItem("view")){e=window.localStorage.getItem("view");if(!s.IsEmpty(n)){var f=s.DecodeFromQueryString(n);f.SetProperty(i.get("SWE_VIEW_ARG"),e),n=f.EncodeAsString()}}var l=function(){var i=SiebelApp.S_App.GetActiveView().GetActiveApplet(),s=i.HasPendingCommit(null,!0),a=i.GetBusComp().IsDeletePending
();return!s&&!a?c.GotoView.call(this,e,t,n,r,o,u):!0};return a?c.GotoView.call(this,e,t,n,r,o,u):l.call(this)},h.GetFilesAndProcessObjectInfo=function(e){var t=e.GetProperty(offlineconstants.get("IS_DYNAMIC")),n=i.get("SWE_PST_APP_INFO"),r=i.get("SWE_PST_NEW_VIEW"),s=i.get("SWE_PST_VIEW_INFO");if(t==="true"){var o=e.GetChildByType(n);if(o){var u=o.GetChildByType(r);if(u){var a=u.GetChildByType(s);if(a){var f=a.Clone(s),l=o.FindChildPosition(r);o.RemoveChild(l),o.AddChild(f)}}}}return c.GetFilesAndProcessObjectInfo.call(this,e)},e.prototype.BuildView=function(e,n,i,s,o){var a={},f,l=CCFMiscUtil_CreatePropSet();r.Model.IsMetadataInitialized(),u.CcfLogEvent([t.get("LOG_EVT_CLIENT_SYS"),54,8,29,s]),$.callback(this,function(i){i.err?$.setReturnValue({err:!0,retVal:""}):(SiebelApp.BrowserCacheMgr.DiscoverMetadata(e,"",n,s,o),$.callback(this,function(e){if(!e.err){var i=e.retVal;n===t.get("GOTOVIEWCOLD")&&(i=SiebelApp.OfflineAppMgr.PrepareWriteRecordResponse(i));var o=CCFMiscUtil_CreatePropSet();o.DecodeFromString(i);var u=o.GetChildByType("api"),c=u.GetChildByType("nbo");if(c){c=c.GetChildByType("boi"),f=c.GetProperty("n"),a[m]=v,a[g]=S,a[y]=SiebelApp.OfflineEvents[S].Application_PreNavigate,a[x]=this,a[b]=w,l.SetPropertyStr("DestViewName",s),l.SetPropertyStr("DestBusObjName",f);var h=r.Model.InvokeRegisteredSvc(a,l),p=h.err;p?$.setReturnValue({err:!0,retVal:""}):$.setReturnValue({err:e.err,retVal:i})}else $.setReturnValue({err:e.err,retVal:i})}else $.setReturnValue(e)}))}),a[m]=v,a[g]=S,a[y]=SiebelApp.OfflineEvents[S].Application_Navigate,a[x]=this,a[b]=E,l.Reset(),r.Model.InvokeRegisteredSvc(a,l)};var N=c.InitExecContext;h.InitExecContext=function(e){var t=window.localStorage,n=t.getItem("SRN");t.setItem("reload",!0),e.GetChild(0).SetPropertyStr("SRN",n),N.call(this,e)},c.InitExecContext=function(e){N.call(this,e);if(n.CheckSameDownloadCond(e.GetChild(0))){var t=SiebelApp.S_App.GetSRN();o.setItem("SRN",t)}},e.prototype.LookupSCIndex=function(e){var t="",n=r.GetStringCache().length,i;for(i=0;i<n;i++){t=r.GetStringCache()[i];if(e===t)return i}return-1},h.AppendToStrCache=function(e){if(e&&e!==""){var t=[],n=r.GetStringCache().length;CCFMiscUtil_StringToArray(e,t);var i=t.length;for(var s=0;s<i;s++)C.call(this,n+s,t[s])}c.AppendToStrCache.call(this,e)},e.prototype.ActiveViewName=function(){return SiebelApp.S_App.GetActiveView().GetName()},e.prototype.ActiveBusObject=function(){return SiebelApp.S_App.GetActiveBusObj()},e.prototype.FindApplet=function(e){return SiebelApp.S_App.GetActiveView().GetApplet(e)},e.prototype.LoginId=function(){return SiebelApp.S_App.Model.GetLoginId()},e.prototype.LoginName=function(){return SiebelApp.S_App.Model.GetLoginName()},e.prototype.Name=function(){return SiebelApp.S_App.GetName()},e.prototype.NewPropertySet=function(){return CCFMiscUtil_CreatePropSet()},e.prototype.PositionId=function(){return SiebelApp.S_App.Model.GetPositionId()},e.prototype.PositionName=function(){return SiebelApp.S_App.Model.GetPositionName()},e.prototype.CurrencyCode=function(){return SiebelApp.S_App.Model.GetCurrencyCode()},e.prototype.GetBusObject=function(e){return SiebelApp.S_App.Model.GetBusObj(e)},e.prototype.LookupSCMap=function(e){return l?l[e]:""},e.prototype.GetOfflineMode=function(){return SiebelApp.OfflineAppSettings.GetMode()},h.GetService=function(e){var n=SiebelApp.S_App.Model.GetIsInterFace();if(n>0){var i={},s,o=null,u;if(!e)return null;i[t.get("DOUIREG_OBJ_NAME")]=e,s=r.Model.RegistryLookup(i);var a=!1;if(s)for(var f=0;f<s.length;f++)if(s[f]){a=!0;break}return a&&(o=new SiebelApp.ProxyServiceModel,o.SetServiceArray(s)),o}return c.GetService(e)},e.prototype.OnLoadViewContainer=function(){var e;if(!f)try{var t=function(){},n=new t;n.GetName=function(){return"DMToolbarPxy"},f=new SiebelAppFacade.DMToolbarPModel(n),e=CCFMiscUtil_CreatePropSet(),e.SetProperty("SWE_OUI_RENDERER","DMToolbarRenderer"),f.Init(),f.Setup(e.Clone()),f.Show()}catch(r){SiebelJS.Log("Error -> DMToolbar creation failed  :"+r.message),SiebelJS.Log(r)}c.OnLoadViewContainer.apply(this,arguments)},e.prototype.GetModel=function(){return r.ModelInterface},e.prototype.GetLastErrCode=function(){return r.OfflineErrorObject.GetErrorCode()},e.prototype.GetLastErrText=function(){return r.OfflineErrorObject.GetErrorText()},e.prototype.UpdateSyncStatus=function(e){f&&f.ExecuteMethod("SyncUpdate",e)},e.prototype.InitiateSync=function(){f&&f.ExecuteMethod("InitiateSync")},e.prototype.OfflineCallServer=function(e,r,o,u){var f;if(SiebelApp.SyncThreadHandler.SyncInProgress())return f=a.GetLocalString("SSASqlErrTrxInProgress"),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,13,84,f]),alert(f),!1;if(!SiebelApp.BrowserCacheMgr.GetBrowserStorage())return f=a.GetLocalString("IDS_DOUI_ERR_INSUFFICIENT_MEMORY"),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,13,84,f]),alert(f),!1;if(!s.IsEmpty(SiebelApp.S_App.Model.GetLoginName())&&SiebelApp.S_App.Model.GetLoginName()!==SiebelApp.S_App.GetUserName())return f=a.GetLocalString("IDS_DOUI_ERR_UNAUTH_USER"),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,13,84,f]),alert(f),!1;if(!SiebelApp.OfflineAppSettings.GetMode()){if(!navigator.onLine){if(SiebelApp.OfflineAppSettings.GetPkgStatus()){SiebelApp.OfflineAppSettings.OnSuccessfulDataDownload(),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),40,13,84]);var m=window.location;return m.replace(m.origin.concat(m.pathname)),!1}return f=a.GetLocalString("IDS_DOUI_ERR_OFFLINE_PKG"),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,13,84,f]),alert(f),!1}var l=SiebelApp.OfflineAppMgr.Ping();if(!l)return!1;if(SiebelApp.S_App.GetTimer()){var c=JSON.parse(window.localStorage.getItem(i.get("SWE_PERF_LOG_DATA")));if(c){var h=this,p=SiebelApp.S_App.GetPageURL(),d=SiebelApp.S_App.GetSRN();p=p+"?SWECmd=InvokeMethod"+"&SWEMethod=WritePerfLog"+"&SRN="+d;var v=""+i.get("SWE_PERF_LOG_DATA")+"="+URLEncode(c);$.ajax({type:"POST",url:p,data:v,processData:!1,complete:function(e,n,r){if(n==="error"
){if(SiebelApp.OfflineAppSettings.GetPkgStatus()){SiebelApp.OfflineAppSettings.OnSuccessfulDataDownload(),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),21,13,84]);var s=window.location;return s.replace(s.origin.concat(s.pathname)),!1}var o=a.GetLocalString("IDS_DOUI_ERR_SYNC");return SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,13,84,o]),alert(o),!1}window.localStorage.removeItem(i.get("SWE_PERF_LOG_DATA")),SiebelApp.S_App.InitiateSync.call(h)}})}else SiebelApp.S_App.InitiateSync.call(this)}else SiebelApp.S_App.InitiateSync.call(this)}else{if(!navigator.onLine)return SiebelApp.OfflineAppSettings.GetSyncStatus()?(f=a.GetLocalString("IDS_DOUI_ERR_NETWORK_CONN"),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,13,84,f]),alert(f)):(f=a.GetLocalString("IDS_DOUI_ERR_INTERN_CONN"),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,13,84,f]),alert(f)),SiebelApp.S_App.UpdateSyncStatus("FullDownLoadFailed"),!1;var g=SiebelApp.OfflineAppMgr.Ping();if(!g)return SiebelApp.S_App.UpdateSyncStatus("FullDownLoadFailed"),!1;if(SiebelApp.OfflineAppSettings.GetSyncStatus()||n.GetSyncType()===t.get("SYNC_TYPE_UPSYNC_ISYNC"))return SiebelApp.S_App.InitiateSync(),!0;if(!n.IsBatchMode()||n.GetSyncType()===t.get("SYNC_TYPE_GOONLINE"))return SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),46,13,84]),SiebelApp.ProactiveCacheBuilder.ProcessGoOnline(),!1;SiebelApp.S_App.UpdateSyncStatus("NoStatus")}},SiebelApp.OfflineUtils.DefineExtentions(e,h,c),e.prototype.LogOfflineEvent=function(e){if(e){var t=SiebelApp.Offlineconstants.get("LOG_EVT_COMMON"),n=[t,e],r=[];arguments.length>1&&(r=Array.prototype.slice.call(arguments,1)),n=n.concat(r),SiebelApp.OfflineUtils.CcfLogEvent(n)}},e.prototype.LoadMafResources=function(){function t(t,n){if(!SiebelApp.S_App.GetOfflineMode()){var r=e.GetService(i.get("SWE_OUI_CLIENT_PREF_SERVICE"));if(!s.IsEmpty(r)){var o=SiebelApp.S_App.NewPropertySet(),u="N",a="N",f="N",l="",c="N";window.localStorage&&window.sessionStorage.getItem("isEligible")=="1"&&(u="Y"),window.localStorage&&window.localStorage.getItem("isCompatibility")=="false"&&(a="Y"),window.localStorage&&window.localStorage.getItem("isAdfmContainer")=="1"&&(c="Y"),l=window.localStorage&&window.localStorage.getItem("SyncNodeId")?window.localStorage.getItem("SyncNodeId"):"",t&&!l&&(f="Y"),t||(t=l),o.SetProperty("isEligible",u),o.SetProperty("isAdfmContainer",c),o.SetProperty("isMultiApp",a),o.SetProperty("isReuse",f),o.SetProperty("SyncNodeId",t),r.InvokeMethod("SetMafCapability",o,{npr:!1,async:!0,cb:function(e,t,r){var i="",s="";r&&r.GetChild("0")&&(i=r.GetChild("0").GetProperty("SyncNodeId"),s=r.GetChild("0").GetProperty("BatchMode")),SiebelJS.Log("Set sync node..."+i),i&&window.localStorage&&window.localStorage.setItem("SyncNodeId",i);if(window.localStorage.getItem("isRNMobileApp")=="true"){var o=window.sessionStorage.getItem("userloc");window.ReactNativeWebView.postMessage('{"syncNodeId":"'+i+'","synchkey":"'+o+'" }')}s&&window.localStorage&&window.localStorage.setItem("BatchMode",s),n&&n(i)}})}}else n&&n("")}if(SiebelApp.OfflineAppSettings.GetMode())return;var e=this;window.localStorage&&!window.localStorage.getItem("ResetApp")&&window.localStorage.setItem("ResetApp","true");if(window.localStorage&&window.localStorage.getItem("isRNMobileApp")!="true"&&window.localStorage.getItem("isAdfmContainer")=="1"&&window.localStorage.getItem("isCompatibility")=="false"&&!window.localStorage.getItem("SyncNodeId")){function n(e){var t=window.sessionStorage&&window.sessionStorage.getItem("userloc")?window.sessionStorage.getItem("userloc"):"";adf.mf.api.invokeMethod("com.oracle.determinations.mobile.application.SyncNodes","setSyncNodeId",t,e,function(t,n){SiebelJS.Log("Store sync node identity successfully."+e)},function(e,t){if(window.localStorage){var n="SyncNodeId";window.localStorage.removeItem(n),n="BatchMode",window.localStorage.removeItem(n)}SiebelJS.Log("Failed to store sync node identity.")})}var r=function(){SiebelJS.Log("Getting sync node ...");var e=window.sessionStorage&&window.sessionStorage.getItem("userloc")?window.sessionStorage.getItem("userloc"):"";adf.mf.api.invokeMethod("com.oracle.determinations.mobile.application.SyncNodes","getSyncNodeId",e,function(e,r){t(r,n)},function(e,t){})};adf.mf.api.invokeMethod?r():document.addEventListener("showpagecomplete",function(){r()},!1)}else{var o=window.sessionStorage.getItem("userlocList");if(o){var u=JSON.parse(o),a=window.sessionStorage.getItem("userloc"),f=u[a];f?t(f):t()}else t()}}})(),typeof SiebelApp.S_App.OfflineAppInterface=="undefined"&&(SiebelApp.S_App.OfflineAppInterface=function(){function e(e){var t=e,n=this,r={},i=SiebelApp.Offlineconstants,s=i.get("LOG_EVT_CLIENT_SYS");for(var o in t)t[o]&&function(){var t=o,i=e;return typeof e[t]=="function"&&!n[t]&&!r[t]&&(n[t]=function(){return i.constructor.prototype[t]?i.constructor.prototype[t].apply(i,arguments):i[t].apply(i,arguments)}),n[t]}();this.GetOfflineApp=function(){return t},this.EndLife=function(){t=null,n=null,r=null}}return e.prototype.ActiveBusObject=function(){var e=this.GetOfflineApp(),t=e.ActiveBusObject();if(t)return t.GetInterface()},e.prototype.ActiveViewName=function(){var e=this.GetOfflineApp();return e.ActiveViewName()},e.prototype.CurrencyCode=function(){var e=this.GetOfflineApp();return e.CurrencyCode()},e.prototype.GetBusObject=function(e){var t=this.GetOfflineApp();return t.GetBusObject(e)},e.prototype.GetProfileAttr=function(e){var t="Application Interface method GetProfileAttr is not supported yet.";return alert(t),outils.CcfLogEvent([clientSystem,111,8,133,"application context"]),""},e.prototype.InvokeMethod=function(e,t,n){var r;switch(e){case"GetDataSource":var i="Application Interface method GetDataSource is not supported yet.";alert(i),outils.CcfLogEvent([clientSystem,111,8,131,"application context"]),r="";break;case"IsViewReadOnly":var s=t,i="Application Interface method IsViewReadOnly is not supported yet.";alert(i),outils.CcfLogEvent
([clientSystem,111,8,132,"application context"]),r=!1;break;case"Language":var o=window.localStorage?window.localStorage.getItem("LangCode"):"";r=o;break;case"LoadUserAttributes":var u=t,i="Application Interface method LoadUserAttributes is not supported yet.";alert(i),outils.CcfLogEvent([clientSystem,111,8,134,"application context"]);break;case"LookupValue":var a=t,f=n,i="Application Interface method LookupValue is not supported yet.";alert(i),outils.CcfLogEvent([clientSystem,111,8,135,"application context"]),r=""}return r},e.prototype.GetSharedGlobal=function(e){var t="Application Interface method GetSharedGlobal is not supported yet.";alert(t),outils.CcfLogEvent([clientSystem,111,8,136,"application context"])},e.prototype.LookupMessage=function(e,t,n){var r="Application Interface method LookupMessage is not supported yet.";return alert(r),outils.CcfLogEvent([clientSystem,111,8,137,"application context"]),""},e.prototype.RaiseError=function(e,t){var n="Application Interface method RaiseError is not supported yet.";alert(n),outils.CcfLogEvent([clientSystem,111,8,138,"application context"])},e.prototype.RaiseErrorText=function(e,t){var n="Application Interface method RaiseErrorText is not supported yet.";alert(n),outils.CcfLogEvent([clientSystem,111,8,139,"application context"])},e.prototype.SetPositionId=function(e){var t="Application Interface method SetPositionId is not supported yet.";return alert(t),outils.CcfLogEvent([clientSystem,111,8,140,"application context"]),!1},e.prototype.SetPositionName=function(e){var t="Application Interface method SetPositionName is not supported yet.";return alert(t),outils.CcfLogEvent([clientSystem,111,8,141,"application context"]),!1},e.prototype.SetSharedGlobal=function(e,t){var n="Application Interface method SetSharedGlobal is not supported yet.";alert(n),outils.CcfLogEvent([clientSystem,111,8,142,"application context"])},e.prototype.Trace=function(e){var t="Application Interface method Trace is not supported yet.";alert(t),outils.CcfLogEvent([clientSystem,111,8,143,"application context"])},e.prototype.TraceOff=function(){var e="Application Interface method TraceOff is not supported yet.";alert(e),outils.CcfLogEvent([clientSystem,111,8,144,"application context"])},e.prototype.TraceOn=function(e,t,n){var r="Application Interface method TraceOn is not supported yet.";alert(r),outils.CcfLogEvent([clientSystem,111,8,145,"application context"])},e.prototype.GetService=function(e){var t=this.GetOfflineApp(),n=t.GetService(e),r;return n||(n=new SiebelApp.DummyServiceModel),n.SetName(e),r=new SiebelApp.S_App.OfflineBSInterface(n),r},e.prototype.SetProfileAttr=function(){var e="Application Interface method SetProfileAttr is not supported yet.";alert(e),outils.CcfLogEvent([clientSystem,111,8,146,"application context"])},e}())}),typeof SiebelApp.SyncThreadHandler=="undefined"&&(SiebelJS.Namespace("SiebelApp.SyncThreadHandler"),SiebelApp.SyncThreadHandler=function(){function h(){var e;return h=function(){return e},h.prototype=this,e=new h,e.constructor=h,e}function d(){if(i){SiebelApp.S_App.UpdateSyncStatus("IncDataDownLoad");var o=CCFMiscUtil_CreatePropSet();o.SetPropertyStr(e.get("SWE_CMD_ARG"),"GetLastTxn"),r.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),49,11,56]);var u=function(e){var n=CCFMiscUtil_CreatePropSet();n.DecodeFromString(e),SiebelApp.dlgProgress.UpdateEstimate([40,60],SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_DOWNLOAD_DATA")),SiebelApp.OfflineAppMgr.CheckValidation(n)?n.propArray.Status!=="OK"?(SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),63,11,65,n.propArray.Status]),SiebelJS.Log(n.propArray.Status)):(b.call(this,n),$.callback(this,function(){w.call(this,n),$.callback(this,function(){g.call(this),n=null})})):(s=!1,SiebelApp.S_App.uiStatus.Free())};C.call(this,o,u)}else n.GetReGenMetadata()?v.call(this,!0):v.call(this)}function v(n){var i=CCFMiscUtil_CreatePropSet(),o=SiebelApp.S_App.IsAutoOn();n=n?1:0,i.SetPropertyStr(e.get("SWE_CMD_ARG"),"GoOffline"),i.SetPropertyStr(t.get("REGENERATEMETADATA"),n),i.SetPropertyStr(e.get("SWE_IS_AUTO_ON"),o),SiebelApp.S_App.UpdateSyncStatus("FullDownLoad"),SiebelApp.dlgProgress.UpdateEstimate([0,20],SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_DOWNLOAD_METADATA")),r.CcfLogEvent([t.get("LOG_EVT_COMMON"),79,11,56,r.GetTS()]);var u=r.TimerFactory(function(){r.CcfLogEvent([t.get("LOG_EVT_COMMON"),41,11,56,""])},{onTimeout:function(){r.CcfLogEvent([t.get("LOG_EVT_COMMON"),41,11,56,"Timed out"])}}),a=function(e){i=null;var t=!0;u&&u.stop();var n={};n=SiebelApp.AjaxRequestMgr.ProcessToolbarResponse(e,!0),t=n.bContinue,t?(m.call(this),n.callback.apply(this,n.args)):(SiebelApp.S_App.uiStatus.Free(),s=!1)};C.call(this,i,a)}function m(){var n=CCFMiscUtil_CreatePropSet();n.SetPropertyStr(e.get("SWE_CMD_ARG"),"GetOfflineData"),n.SetPropertyStr(t.get("LAST_SYNC_TS"),f.getItem("TS")?f.getItem("TS"):"");var i=r.TimerFactory(function(){r.CcfLogEvent([t.get("LOG_EVT_COMMON"),89,11,56,""])},{onTimeout:function(){r.CcfLogEvent([t.get("LOG_EVT_COMMON"),89,11,56,"Timed out"])}}),o=function(r){n=null,i&&i.stop(),SiebelApp.dlgProgress.Update(60,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_DOWNLOAD_DATA"));var o=SiebelApp.AjaxRequestMgr.ProcessToolbarResponse(r,!1);if(o.bContinue){var u=CCFMiscUtil_CreatePropSet();u.SetPropertyStr(e.get("SWE_CMD_ARG"),"GetOfflineData"),u.SetPropertyStr("ACK",1),u.SetPropertyStr(t.get("LAST_SYNC_TS"),f.getItem("TS")?f.getItem("TS"):""),u.SetPropertyStr("iSync",0),C.call(this,u)}else s=!1,SiebelApp.S_App.uiStatus.Free()};SiebelApp.S_App.UpdateSyncStatus("FullDownLoad"),r.CcfLogEvent([t.get("LOG_EVT_COMMON"),81,11,56,r.GetTS()]),C.call(this,n,o)}function g(){var i=CCFMiscUtil_CreatePropSet();i.SetPropertyStr(e.get("SWE_CMD_ARG"),"GetOfflineData"),i.SetPropertyStr(t.get("LAST_SYNC_TS"),f.getItem("TS")),i.SetPropertyStr("iSync",1),i.SetPropertyStr("SRFId",f.getItem("SRFId"));var s=r.TimerFactory(function(){r.CcfLogEvent([t.get("LOG_EVT_COMMON"),89,11,56,""])},{onTimeout:function(){r.CcfLogEvent
([t.get("LOG_EVT_COMMON"),89,11,56,"Timed out"])}}),o=function(o){i=null,s&&s.stop();var u,a=["IDS_DOUI_ERR_DATA_OUTDTD","IDS_DOUI_ERR_NODECHANGED_BKUP_DATA","IDS_DOUI_ERR_BO_FILTER_CHNG","IDS_DOUI_ERR_BC_FILTER_CHNG","IDS_DOUI_ERR_SRF_EXPIRED","IDS_DOUI_ERR_RESP_CHNG","IDS_DOUI_ERR_UPOSCHANGED_BKUP_DATA"],l=["Data_OutDated","Node_ReExtracted","Default_BO_Filter_Changed","BC_Filter_Changed","SRF_Changed","Responsibilty_Changed","Position_Changed"],c=CCFMiscUtil_CreatePropSet();c.DecodeFromString(o);var h=c.GetType();h&&(h=h.toString());var p=l.indexOf(h);if(p!==-1){var d=a[p],m=SiebelApp.S_App.OfflineLocaleObject.GetLocalString(d);r.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,11,56,m]),alert(m),n.SetData(!1),n.SetMetadata(!1),SiebelApp.dlgProgress.Show("fsync",SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_SYNCDATA_TITLE")),p>3&&(n.SetSchemaStatus(1),p>4&&(u=!0,n.SetReGenMetadata(!0))),v(u)}else if(h==="NoNewData")n.OnSuccessfulDataDownload(),f.getItem("appCacheDone")&&JSON.parse(f.getItem("appCacheDone"))&&(SiebelApp.Metadata.Load(!0),$.callback(this,function(){SiebelApp.AttachmentMgr?(SiebelApp.AttachmentMgr.SetPostDownloadAction(function(){n.ReloadToOffline(!1)}),SiebelApp.AttachmentMgr.DownloadAllAttachments()):n.ReloadToOffline(!1)}));else{SiebelApp.dlgProgress.Show("isync",SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_SYNCDATA_TITLE")),SiebelApp.AjaxRequestMgr.ProcessToolbarResponse(o,!1);var g=CCFMiscUtil_CreatePropSet();g.SetPropertyStr(e.get("SWE_CMD_ARG"),"GetOfflineData"),g.SetPropertyStr("ACK",1),g.SetPropertyStr(t.get("LAST_SYNC_TS"),f.getItem("TS")?f.getItem("TS"):""),g.SetPropertyStr("iSync",0),C.call(this,g)}};SiebelApp.S_App.UpdateSyncStatus("IncDataDownLoad"),r.CcfLogEvent([t.get("LOG_EVT_COMMON"),80,11,56,r.GetTS()]),C.call(this,i,o)}function y(){SiebelApp.S_App.UpdateSyncStatus("UpSync"),SiebelApp.dlgProgress.Show("upsync",SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_SYNCDATA_TITLE")),SiebelApp.dlgProgress.Update(0,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_GET_TXN_STATUS"));var n=CCFMiscUtil_CreatePropSet();n.SetPropertyStr(e.get("SWE_CMD_ARG"),"GetLastTxn"),r.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),49,11,56]);var i=function(e){SiebelApp.dlgProgress.Update(20,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_UPLOAD_DATA")),n=null;var r=CCFMiscUtil_CreatePropSet();r.DecodeFromString(e),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),62,11,65,"started"]),SiebelApp.OfflineAppMgr.CheckValidation(r)?r.propArray.Status!=="OK"?(SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),63,11,65,r.propArray.Status]),SiebelJS.Log(r.propArray.Status)):(b.call(this,r),$.callback(this,function(){w.call(this,r),$.callback(this,function(){E.call(this),r=null})})):(s=!1,SiebelApp.S_App.uiStatus.Free())};C.call(this,n,i)}function b(e){var n=e.GetPropertyAsStr("LastProcTranId"),r=e.GetPropertyAsStr("LastTsTracker");r=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(r,"MM/DD/YYYY HH:mm:ss","YYYY/MM/DD HH:mm:ss",!0),SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),64,11,65,n]),SiebelJS.Log("Last Transaction Id...."+n),SiebelJS.Log("Synchronizing offline data...."),n!==""&&T.call(this,n,r),SiebelApp.dlgProgress.Update(40,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_GET_TXN_STATUS"))}function w(e){var n=e.GetPropertyAsStr("TxnId");SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),109,11,65,n]);if(n){SiebelApp.InMemDB.InitSysTables();var r=SiebelApp.OfflineCacheConfig,i=r.get("PRO_SYNCQUEUE_DB_TBL"),s=r.get("PRO_SYNCQUEUE_DB_TBL_COLS"),o=SiebelApp.SqlBuilder.UpdateRecord(i,[s.SyncStatus],[t.get("SYNC_UPSYNCED")]),u={};u.FieldName=s.TransactionId,u.Val=n;var a=SiebelApp.SqlBuilder.SelectRecord(i,[u],["RecordNum"]),f="( "+a.selectQuery.imdb+" )",l=SiebelApp.SqlBuilder.BuildWhereClause("<=","[RecordNum]",f);l=l.replace("?","'"+n+"'"),o.imdb=o.imdb+" WHERE "+l;var c;SiebelApp.InMemDB.Execute(o.imdb,c)}}function E(){var n="'"+t.get("SYNC_NEW")+"'",r=SiebelApp.SqlBuilder.BuildWhereClause("=",l.SyncStatus,n);r=SiebelApp.SqlBuilder.BuildWhereClause("!=",l.Request,"''",r);var i=SiebelApp.SqlBuilder.SelectRecord(c,r);SiebelApp.BrowserCacheMgr.Execute(i.selectQuery,i.valList,!0),$.callback(this,function(t){if(!t.err){var n=t.retVal,r=n.length;if(r>0){var i=CCFMiscUtil_CreatePropSet();i.SetPropertyStr(e.get("SWE_CMD_ARG"),"SynchronizeOfflineData"),i=N.call(this,n,i),C.call(this,i,S)}else S.call(this,null,!0)}})}function S(e,i){if(e){var o=CCFMiscUtil_CreatePropSet();o.DecodeFromString(e),o.propArray.Generic_SyncErr==="OK"&&n.SetSyncStatus(!1);var u="'"+t.get("SYNC_NEW")+"'",a=SiebelApp.SqlBuilder.BuildWhereClause("=",l.SyncStatus,u),f=x.call(this),h=SiebelApp.SqlBuilder.UpdateRecord(c,[l.UpSyncTime],[f]);h.imdb=h.imdb+" WHERE "+a,SiebelApp.BrowserCacheMgr.Execute(h)}else i?n.SetSyncStatus(!1):(SiebelApp.S_App.UpdateSyncStatus("UpSyncFailed"),r.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),43,11,56]),SiebelApp.dlgProgress.Remove(),s=!1,SiebelApp.S_App.uiStatus.Free());$.callback(this,function(){SiebelApp.S_App.UpdateSyncStatus("UpSyncDone"),SiebelJS.Log("Synchronizing offline data... is Done"),r.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),42,11,56]),n.GetSyncType()===t.get("SYNC_TYPE_GOONLINE")?(n.SetMode(!1),s=!1,SiebelApp.S_App.uiStatus.Free(),SiebelApp.dlgProgress.Update(100),n.ReloadApp()):n.GetSyncType()===t.get("SYNC_TYPE_UPSYNC_ISYNC")?(SiebelApp.dlgProgress.Update(60,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_DOWNLOAD_DATA")),g.call(this)):(SiebelApp.dlgProgress.Remove(),s=!1,SiebelApp.S_App.uiStatus.Free())})}function x(){var e=new Date,t=e.getUTCMonth(),n=e.getUTCDate(),r=e.getUTCHours(),i=e.getUTCMinutes(),s=e.getUTCSeconds();t+=1,t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),s<10&&(s="0"+s);var o=e.getUTCFullYear()+"/"+t+"/"+n+" "+r+":"+i+":"+s;return o}function T(e,n){SiebelApp.InMemDB.InitSysTables();var i=SiebelApp.SqlBuilder.DeleteRecords(c),s=SiebelApp.SqlBuilder.BuildWhereClause("=",l.TransactionId,"'"+e+"'"),o=SiebelApp.SqlBuilder
.SelectRecord(c,s,["RecordNum"]),u=o.selectQuery;s=SiebelApp.SqlBuilder.BuildWhereClause("<=","RecordNum","("+u.imdb+")"),n&&(s=SiebelApp.SqlBuilder.BuildWhereClause("<",l.UpSyncTime,"'"+n+"'",s,"AND")),i.imdb=i.imdb+" WHERE "+s,r.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),95,11,55,i]),SiebelApp.InMemDB.Execute(i.imdb,o.valList),r.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),66,11,55,e])}function N(e,n){var i,s="~",o="",u=1,a,f;for(var l=0;l<e.length;l++)i="",i=e[l].Request,r.CcfLogEvent([t.get("LOG_EVT_UPSYNC"),96,11,99,e[l].TransactionId]),i=encodeURIComponent(i),o=o.concat(i,s),l===e.length-1&&(a=e[l].RecordNum,f=e[l].TransactionId);if(o){o=o.slice(0,o.length-1);var c=o.split("~");n.SetPropertyStr(t.get("SYNC_PKG_LENGTH"),c.length),n.SetPropertyStr(t.get("TOTAL_SYNC_PACKAGE_LENGTH"),c.length),n.SetPropertyStr(t.get("END_OF_FILE"),u),n.SetPropertyStr(t.get("SYNC_REQUEST_LAST_TRANSID"),f),n.SetPropertyStr(t.get("SYNC_REQUEST_LAST_RECORDNUM"),a),n.SetPropertyStr(t.get("SYNC_PKG_REQUESTS"),o)}return n}function C(t,n){n=n||function(){};var r=SiebelApp.BrowserCacheMgr.GetSyncNodeId();t.SetPropertyStr(e.get("SWE_ARG_KEEP_CONTEXT"),1),t.SetPropertyStr(e.get("SWE_VIEW_RPC_ARG"),1),t.SetPropertyStr(e.get("SYNC_NODE_ID"),r),t.SetPropertyStr(e.get("SWE_PROP_SESSION_RANDOM_NUMBER"),a);var i={};i.async=!0,i.data=SiebelApp.Utils.EncodeToQueryString(t,!1),i.context=this,i.type="POST",i.async=!0,i.contentType="application/x-www-form-urlencoded",i.url=SiebelApp.S_App.GetPageURL(),i.successfncallback=n,SiebelApp.AjaxRequestMgr.Ajax(i,!1,!0)}var e=SiebelApp.Constants,t=SiebelApp.Offlineconstants,n=SiebelApp.OfflineAppSettings,r=SiebelApp.OfflineUtils,i=n.GetPkgStatus(),s=!1,o,u,a,f=window.localStorage,l=SiebelApp.OfflineCacheConfig.get("PRO_SYNCQUEUE_DB_TBL_COLS"),c=SiebelApp.OfflineCacheConfig.get("PRO_SYNCQUEUE_DB_TBL"),p=new h;return h.prototype.SyncInProgress=function(){return s},h.prototype.SyncInUISession=function(){s=!0;var r=n.GetMode();SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),103,11,56,SiebelApp.BrowserCacheMgr.GetSyncNodeId()]),o||(o=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_IMAGECONTROL"),src:"images/white.gif",className:"appCacheProgress1"})),u||(u=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_IMAGECONTROL"),src:"images/white.gif",className:"goOffline"})),i=n.GetPkgStatus();var f=SiebelApp.OfflineAppMgr.Ping(!0);a=SiebelApp.S_App.GetSRN();if(!f){r&&(n.SetUpSyncStatus(!0),n.SetUpSyncPostRefresh(!0));if(i)n.ReloadApp();else{var l=SiebelApp.S_App.OfflineLocaleObject.GetLocalString("IDS_DOUI_ERR_OFFLINE_PKG");SiebelApp.OfflineUtils.CcfLogEvent([t.get("LOG_EVT_COMMON"),27,13,84,l]),alert(l)}return}a=n.GetSRN(),SiebelApp.dlgProgress.Show("fsync",SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_SYNCDATA_TITLE")),SiebelApp.S_App.uiStatus.Busy({mask:!0,timeOut:!1}),r?y.call(this):d.call(this)},p}()),self.addEventListener("message",function(e){function r(e){var t={};t.url=e.url,t.type=e.type,t.async=e.async,t.data=e.data,t.contentType=e.contentType,n.open(t.type,t.url,!0),n.responseType="",n.onreadystatechange=i,n.setRequestHeader("Content-type",t.contentType),n.send(t.data)}function i(){if(n.readyState===4){var e={};e.readyState=n.readyState,e.response=n.response,e.responseText=n.responseText,e.status=n.status;var r=[];r.push(n.response),r.push(n.statusText),r.push(t.url),r.push(e),self.postMessage(r)}}e.preventDefault(),e.stopPropagation();var t=e.data,n=new XMLHttpRequest;if(t.url===undefined)return;r(t)},!1),typeof SiebelApp.WebDB=="undefined"&&(SiebelJS.Namespace("SiebelApp.WebDB"),SiebelApp.WebDB=function(){function r(){var t,i=0,s=undefined;return r=function(){return n=JSON.parse(window.localStorage.getItem(e.get("TABLEINFO"))),t},r.prototype=this,t=new r,t.constructor=r,this.IncrementTxnCnt=function(){i++},this.DecrementTxnCnt=function(){i--;if(s&&this.GetTxnCnt()<=0){var e=s;s=undefined,e()}},this.SetPostTxnCallback=function(e){if(this.GetTxnCnt()<=0){e();return}s=e},this.GetTxnCnt=function(){return i},t}var e=SiebelApp.Offlineconstants,t=SiebelApp.OfflineUtils,n=null,i;return i=new r,r.prototype.Initialize=function(e){var t=$.Deferred(),n=e.dbName,r=e.version,i=e.displayName,s=e.maxSize,o=e.tables,u=e.columns,a,f=SiebelApp.WebDB.initDatabase(n,r,i,s);if(f&&o)for(var l=0;l<o.length;l++)a=SiebelApp.SqlBuilder.CreateTable(o[l],u[o[l]]),SiebelApp.WebDB.CreateTable(a.sqlite);return t.resolve(f),t.promise()},r.prototype.initDatabase=function(e,t,n,r){var i=!0;try{window.openDatabase?WebDB=openDatabase(e,t,n,r):(alert("Databases are not supported in this browser."),i=!1)}catch(s){if(s===2)SiebelJS.Log("Invalid database version.");else if(s.code===18){SiebelJS.Log("In sufficient memory. Error: "+s+".");var o=SiebelApp.S_App.OfflineLocaleObject.GetLocalString("IDS_DOUI_ERR_INSUFFICIENT_MEMORY");alert(o)}else SiebelJS.Log("Unknown error "+s+".");i=!1}return i},r.prototype.DeleteTable=function(n){SiebelApp.WebDB.IncrementTxnCnt(),WebDB.transaction(function(r){r.executeSql(n,[],function(e,t){SiebelApp.WebDB.DecrementTxnCnt(),e=null,t=null},function(r,i){return SiebelApp.WebDB.DecrementTxnCnt(),SiebelJS.Log("Oops.  Error was "+i.message+" (Code "+i.code+")"),SiebelJS.Log("Oops.  Error was "+i.message+" (Code "+i.code+")"),SiebelJS.Log("WebStore.DeleteTable -> DeleteQuery: "+n),r=null,i=null,t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,57,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,57,i.message,i.code]),!0})})},r.prototype.CreateTable=function(n){SiebelApp.WebDB.IncrementTxnCnt(),WebDB.transaction(function(r){r.executeSql(n,[],function(e,t){SiebelApp.WebDB.DecrementTxnCnt(),e=null,t=null},function(r,i){return SiebelApp.WebDB.DecrementTxnCnt(),i.code===1?SiebelJS.Log("DB Table already exists"):(SiebelJS.Log("Oops.  Error was "+i.message+" (Code "+i.code+")"),SiebelJS.Log("Oops.  Error was "+i.message+" (Code "+i.code+")"),SiebelJS.Log("WebStore.CreateTable -> CreateQuery: "+n),r=null,i=null),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,58,n]
),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,58,i.message,i.code]),!0})})},r.prototype.InsertRecordSet=function(n,r,i,s){var o=500,u=[],a=r.length,f="INSERT INTO "+n+" (";for(var l=0;l<a;l++)f+=' "'+r[l]+'"',l<a-1&&(f+=", ");f+=")";var c=i.length;for(var h=0;h<c&&h<o;h++){f+=" SELECT ";for(var p=0;p<a;p++){var d=i[h][p];d=d.replace(/\"/g,'""'),f+=' "'+d+'"',p<a-1&&(f+=", ")}f+=" UNION ALL "}f=SiebelApp.OfflineUtils.RTrim(f," UNION ALL "),SiebelApp.WebDB.IncrementTxnCnt(),WebDB.transaction(function(a){a.executeSql(f,[],function(e,t){c>o?(u=i.slice(o),SiebelApp.WebDB.InsertRecordSet(n,r,u,s)):s&&s(),SiebelApp.WebDB.DecrementTxnCnt(),e=null,t=null},function(a,l){return SiebelJS.Log("Oops.  Error was "+l.message+" (Code "+l.code+")"),SiebelJS.Log("Oops.  Error was "+l.message+" (Code "+l.code+")"),SiebelJS.Log("WebStore.InsertRecordSet -> InsertQuery: "+f),c>o?(u=i.slice(o),SiebelApp.WebDB.InsertRecordSet(n,r,u,s)):(t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,59,f]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,59,l.message,l.code])),SiebelApp.WebDB.DecrementTxnCnt(),a=null,l=null,!0})})},r.prototype.SelectAll=function(n,r,i){var s,o=[];SiebelApp.WebDB.IncrementTxnCnt(),WebDB.transaction(function(r){r.executeSql(n,[],function(e,t){for(var n=0;n<t.rows.length;n++)s=t.rows.item(n),o.push(s);i(o),SiebelApp.WebDB.DecrementTxnCnt(),e=null,t=null},function(r,i){return SiebelApp.WebDB.DecrementTxnCnt(),i.code===1?SiebelJS.Log("DB Table already exists"):(SiebelJS.Log("Oops.  Error was "+i.message+" (Code "+i.code+")"),SiebelJS.Log("Oops.  Error was "+i.message+" (Code "+i.code+")"),SiebelJS.Log("WebStore.SelectAll -> SelectQuery: "+n),r=null,i=null,t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,60,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,60,i.message,i.code])),!0})})},r.prototype.SelectAllUpSync=function(n,r){var i,s=[];SiebelApp.WebDB.IncrementTxnCnt(),WebDB.transaction(function(o){o.executeSql(n,[],function(e,t){for(var n=0;n<t.rows.length;n++)i=t.rows.item(n),s.push(i);r(s),SiebelApp.WebDB.DecrementTxnCnt(),e=null,t=null},function(r,i){return SiebelApp.WebDB.DecrementTxnCnt(),i.code===1?SiebelJS.Log("DB Table already exists"):(SiebelJS.Log("Oops.  Error was "+i.message+" (Code "+i.code+")"),SiebelJS.Log("Oops.  Error was "+i.message+" (Code "+i.code+")"),SiebelJS.Log("WebStore.SelectAll -> SelectQuery: "+n),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,66,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,66,i.message,i.code])),r=null,i=null,!0})})},r.prototype.SelectAll=function(n,r){var i=new $.Deferred,s,o=[];return SiebelApp.WebDB.IncrementTxnCnt(),WebDB.transaction(function(r){r.executeSql(n,[],function(e,t){for(var n=0;n<t.rows.length;n++)s=t.rows.item(n),o.push(s);i.resolve(o),SiebelApp.WebDB.DecrementTxnCnt(),e=null,t=null},function(r,s){return SiebelApp.WebDB.DecrementTxnCnt(),s.code===1?SiebelJS.Log("DB Table already exists"):(i.reject(null),SiebelJS.Log("Oops.  Error was "+s.message+" (Code "+s.code+")"),SiebelJS.Log("Oops.  Error was "+s.message+" (Code "+s.code+")"),SiebelJS.Log("WebStore.SelectAll -> SelectQuery: "+n),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,60,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,60,s.message,s.code])),r=null,s=null,!0})}),i.promise()},r.prototype.Execute=function(n,r,i){var s=new $.Deferred;return SiebelApp.WebDB.IncrementTxnCnt(),WebDB.transaction(function(o){o.executeSql(n,r,function(e,t){SiebelApp.WebDB.DecrementTxnCnt();var n;if(t.rows){var r=t.rows.length;if(i===!0){n=[];for(var o=0;o<r;o++)n.push(t.rows.item(o))}else r>0&&(n=t.rows.item(0))}s.resolve(n),e=null,t=null},function(i,o){return SiebelApp.WebDB.DecrementTxnCnt(),SiebelJS.Log("Oops.  Error was "+o.message+" (Code "+o.code+")"),SiebelJS.Log("WebStore.Execute ->: "+n),r&&r.toString?t.CcfLogEvent([e.get("LOG_EVT_COMMON"),72,12,12,n,r.toString()]):t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,12,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,12,o.message,o.code]),s.reject(o),i=null,o=null,!0})}),s.promise()},r.prototype.DoesTableExist=function(t){return n||(n=window.localStorage.getItem(e.get("TABLEINFO"))),n?n.hasOwnProperty(t):!1},r.prototype.UpdateRecord=function(n,r){var i=new $.Deferred;return SiebelApp.WebDB.IncrementTxnCnt(),WebDB.transaction(function(s){SiebelApp.WebDB.DecrementTxnCnt(),s.executeSql(n,r,function(e,t){i.resolve(t.rowsAffected),e=null,t=null},function(s,o){return SiebelApp.WebDB.DecrementTxnCnt(),o.code===1?SiebelJS.Log("Unable to Update the record."):(SiebelJS.Log("Oops.  Error was "+o.message+" (Code "+o.code+")"),SiebelJS.Log("Oops.  Error was "+o.message+" (Code "+o.code+")"),SiebelJS.Log("WebStore.UpdateRecord -> UpdateQuery: "+n),r?t.CcfLogEvent([e.get("LOG_EVT_COMMON"),72,12,67,n,r]):t.CcfLogEvent([e.get("LOG_EVT_COMMON"),70,12,67,n]),t.CcfLogEvent([e.get("LOG_EVT_COMMON"),71,12,67,o.message,o.code])),i.reject(o),s=null,o=null,!0})}),i.promise()},r.prototype.DoesFieldExist=function(t,r){var i=!1;n||(n=JSON.parse(window.localStorage.getItem(e.get("TABLEINFO"))));if(n){var s=n[t];s&&(i=s.indexOf(r)!==-1)}return i},i}()),typeof SiebelApp.S_App.OfflineLocaleObject=="undefined"&&(SiebelJS.Namespace("SiebelApp.S_App.OfflineLocaleObject"),SiebelApp.S_App.OfflineLocaleObject=function(){function t(){var e=_SWEgetGlobalMsgAryOffline();for(var t in e)e[t]&&(this.m_localOfflineStrMap[t]=e[t])}var e=function(){this.m_localOfflineStrMap={},this.m_bLocalStrsInitialized=!1;var t;return e=function(){return t},e.prototype=this,t=new e,t.constructor=e,t};return e.prototype.FormattedToString=function(e,t,n){var r,i,s,o,u;if(!n){if((e==="time"||e==="date")&&t){i=t.trim(" ");var a=SiebelApp.S_App.LocaleObject.GetDatum(e);i&&i.length>a.GetFormat().length&&(e="datetime")}if(t)return e==="utcdatetime"||e==="datetime"?(s=new Date(t),o=s.getMonth()+1+"/"+s.getDate()+"/"+s.getFullYear()+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),u=SiebelApp.Offlineconstants.get("DM_DATETIME_FORMAT")):e==="date"?(s=new Date(t),o=s.getMonth()+1+"/"+s.getDate()+"/"+s.getFullYear(),u=SiebelApp
.Offlineconstants.get("DM_DATE_FORMAT")):(o=t,u=SiebelApp.Offlineconstants.get("DM_TIME_FORMAT")),r=SiebelApp.S_App.LocaleObject.FormattedToString(e,o,u),r}return r=SiebelApp.S_App.LocaleObject.FormattedToString(e,t,n),r},e.prototype.GetLocalString=function(e){var n=null;return n=this.m_localOfflineStrMap[e],!n&&!this.m_bLocalStrsInitialized&&(t.call(this),this.m_bLocalStrsInitialized=!0,n=this.m_localOfflineStrMap[e]),n||(n=SiebelApp.S_App.LocaleObject.GetLocalString(e)),n},new e}()),typeof SiebelApp.S_App.DatumDateObject&&function(){var e=SiebelApp.S_App.DatumDateObject;e.prototype.add=function(e){return this.GetValue()+e},e.prototype.minus=function(e){return this.GetValue()-e}}(),typeof SiebelApp.S_App.DatumUTCDateTimeObject&&function(){var e=SiebelApp.S_App.DatumUTCDateTimeObject;e.prototype.add=function(e){return e>=1?this.AddDays(e):e<1&&this.AddTime(e*24,0,0),this},e.prototype.subtract=function(e){var t,n;if(e.getClassName()!=="undefined"&&e.getClassName()==="DatumUTCDateTimeObject"){t=new Date(this.GetYear(),this.GetMonth(),this.GetDay(),this.GetHour(),this.GetMinute(),this.GetSecond(),0),n=new Date(e.GetYear(),e.GetMonth(),e.GetDay(),e.GetHour(),e.GetMinute(),e.GetSecond(),0);var r=Math.abs(t.getTime()-n.getTime()),i=r/864e5;return i}return e>=1?this.AddDays(-e):e<1&&e>0&&this.AddTime(-e*24,0,0),this},e.prototype.getClassName=function(){return"DatumUTCDateTimeObject"},e.prototype.minus=function(e){return this}}(),typeof SiebelApp.S_App.DatumDateTimeObject&&function(){var e=SiebelApp.S_App.DatumDateTimeObject,t=e.prototype.JulianToDate;e.prototype.JulianToDate=function(){if(!SiebelApp.OfflineAppSettings.GetMode()){t.call(this);return}var e,n,r,i,s,o,u;o=this.m_nJulian+1,o<2299161?e=o:(u=parseInt((o-1867216.25)/36524.25,10),e=o+1+u-u/4),n=e+1524,r=parseInt((n-122.1)/365.25,10),i=parseInt(365.25*r,10),s=parseInt((n-i)/30.6001,10),this.m_nDay=parseInt(n-i-parseInt(30.6001*s,10),10),this.m_nMonth=parseInt(s<13.5?s-1:s-13,10),this.m_nYear=parseInt(this.m_nMonth>2.5?r-4716:r-4715,10)}}(),typeof SiebelApp.S_App.DatumTimeObject&&function(){var e=SiebelApp.S_App.DatumTimeObject;e.prototype.greater=function(e){var t=!1;return this.GetValue()>e.GetValue()&&(t=!0),t},e.prototype.less=function(e){var t=!1;return this.GetValue()<e.GetValue()&&(t=!0),t}}(),typeof SiebelApp.S_App.DatumNumberObject&&function(){var e=SiebelApp.S_App.DatumNumberObject,t=e.prototype.GetAsFormattedString;e.prototype.GetAsFormattedString=function(e){var n=t.call(this,e);return SiebelApp.OfflineAppSettings.GetMode()&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n=n.replace(/\.+$/,"")),n}}(),typeof SiebelAppFacade.DMToolbarRenderer=="undefined"&&(Namespace("SiebelAppFacade.DMToolbarRenderer"),define("siebel/offline/DMToolbarRenderer",["siebel/basephyrenderer","siebel/hamburgernav","3rdParty/pako.min.js"],function(){return SiebelAppFacade.DMToolbarRenderer=function(){function l(e){var t=this,n=e;t.GetPM=function(){return n},t.AttachPMBinding("SyncStatus",c),t.AttachPMBinding("OfflineProcessStatus",h),SiebelAppFacade.DMToolbarRenderer.superclass.constructor.apply(this,arguments)}function c(t,n){var r=f;m(r)||(n==="DownLoadFailed"&&(r.find(".statusFullDownLoad").length?n="FullDownLoadFailed":r.find(".statusIncDataDownLoad").length?n="IncDownLoadFailed":r.find(".statusUpSync").length&&(n="UpSyncFailed")),o[n]&&r.find(".stati").removeClass().addClass(o[n]),e.IsTrue(i.IsAutoOn())&&r.find(".stati").attr({ot:"SyncStatus",rn:n,un:n}))}function h(){$(window).trigger("resize")}function p(){if(!m(f)){var e=this.GetPM().Get("Mode"),t=f.find(".offline-hb-nav-btn");e?t.switchClass("online-icon","offline-icon"):t.switchClass("offline-icon","online-icon"),t.find("span:first-child").addClass("stati")}}function d(){var e=this.GetPM();return e.Get("Mode")}function v(){if(d.call(this)){var t=this,n=t.GetPM().Get("autoAttributes"),r=e.IsTrue(i.IsAutoOn()),o={uploadGoOnlinePlaceholder:'<span class="online-icon"><span class="stati-fix statusGoOnline"></span></span>'+s.GetLocalString("IDS_CLIENT_UPLOAD_GO_ONLINE"),syncStayOfflinePlaceholder:'<span class="offline-icon"><span class="stati-fix statusUpSyncISync"></span></span>'+s.GetLocalString("IDS_CLIENT_SYNC_STAY_OFFLINE"),uploadStayOfflinePlaceholder:'<span class="offline-icon"><span class="stati-fix statusUpSyncOnly"></span></span>'+s.GetLocalString("IDS_CLIENT_UPLOAD_ONLY_STAY_OFFLINE")};$.each(o,function(e,i){var s=g.call(t,e).html(i);r&&s.attr({ot:"Btn",rn:n[e],un:n[e]})})}}function m(e){return!e||!e.length}function g(e){var t=this.GetPM().Get(e);return $("#"+t)}function y(e){if(!e){SiebelJS.Log("Error -> No placeholder for offline drop menu button.");return}var t=this.GetPM().Get("Mode"),n=t?"siebui-nav-hb-gooffline-visible":"siebui-nav-hb-gooffline-invisible";return new SiebelAppFacade.HBNavPlugin({id:e,hbClass:"offline-hb-nav-btn",visibleClass:n,hiddenClass:"siebui-nav-hb-gooffline-invisible"})}var e=SiebelJS.Dependency("SiebelApp.Utils"),t=SiebelApp.Constants,n=SiebelApp.Offlineconstants,r=SiebelApp.OfflineUtils,i=SiebelApp.S_App,s=i.OfflineLocaleObject,o={FullDownLoad:"stati statusFullDownLoad",FullDownLoadFailed:"stati statusFullDownLoadFailed",SyncPendng:"stati statusSyncPending",IncDataDownLoad:"stati statusIncDataDownLoad",IncDownLoadFailed:"stati statusIncDownLoadFailed",UpSync:"stati statusUpSync",UpSyncFailed:"stati statusUpSyncFailed",UpSyncDataConflict:"stati statusSyncPendingSec",UpSyncDone:"stati statusSyncPendingSec",UpSyncOnly:"stati statusUpSyncOnly",UpSyncISync:"stati statusUpSyncISync",GoOnline:"stati statusGoOnline",NoStatus:"stati"},u,a,f;return SiebelJS.Extend(l,SiebelAppFacade.BasePR),l.prototype.Init=function(){var e=this,t=e.GetPM(),n=t.Get("offlineOptionsPlaceholder");u=g.call(e,"offlineLogPlaceholder"),f=g.call(e,"offlineOptionsPlaceholder"),a=y.call(e,n),a.Manage()},l.prototype.ShowUI=function(){var t=this,n=t.GetPM().Get("IsOfflineModeEnabled");!m(u)&&window.localStorage.getItem("LogEvt")&&u.addClass("siebui-dm-log-btn").append('<a id="offline_dm_log" href="javascript:void(0)" tabindex="-1" title="'+
s.GetLocalString("IDS_CLIENT_LOG")+'"></a>'),v.call(t);if(!m(f)&&n){p.call(t);if(e.IsTrue(i.IsAutoOn())){f.attr({ot:"Btn",rn:"GoOffline",un:"GoOffline"});var r=t.GetPM(),o=r.Get("Mode")?"Offline":"Online",a=r.Get("SyncStatus");f.find(".stati").attr({ot:"SyncStatus",rn:a,un:a}),f.find("button").attr({ot:"DMMode",rn:o,un:o})}}},l.prototype.BindEvents=function(){var e=this,t=e.GetPM(),n=t.Get("IsOfflineModeEnabled"),r=t.Get("offlineOptionCfg"),i,s=function(e){var n=e.data;t.OnControlEvent("OnOfflineButtonClick",n.type,n.status)};m(u)||u.on("click",$.proxy(t,"OnControlEvent","OnGotoDMLogClick")),!m(f)&&n&&(i=f.find(".offline-hb-nav-btn"),d.call(e)?(g.call(e,"uploadGoOnlinePlaceholder").on("click",r.uploadGoOnline,s),g.call(e,"syncStayOfflinePlaceholder").on("click",r.syncStayOffline,s),g.call(e,"uploadStayOfflinePlaceholder").on("click",r.uploadStayOffline,s),i.on("click",function(){$(this).eq(0).focus()})):i.on("click",r.uploadGoOnline,s))},l}(),"SiebelAppFacade.DMToolbarRenderer"})),SiebelApp.ProgressDlg===undefined&&(SiebelApp.ProgressDlg=function(){function e(){this.percent=0,this.name="",this.estTimer=0}function t(e,t,n){e=Math.floor(e),n!=null&&n!=undefined&&$("#proginfo-title").text(n),t!=null&&t!=undefined&&$("#proginfo-detail").text(t),e!=null&&e!=undefined&&(this.percent=e,$("#progress-bar").attr("value",e))}return e.prototype.Show=function(e,t){console.log("["+new Date+"] ProgressDlg:Show ["+e+"] - "+t);var n=$("#progressdlg");n.length==0&&($("#maskoverlay").prepend("<div id='progressdlg' style='display:none;' class='siebui-progress-dialog'>  <div id='proginfo-title' class='siebui-progress-title'>Going offline</div>  <progress id='progress-bar' value='1' max='100'></progress>  <div id='proginfo-detail' class='siebui-progress-detail'>Preparing data for offline use</div></div>"),n=$("#progressdlg")),$("#mask-img").addClass("siebui-progress-dialog"),this.name=e,this.Update(this.percent,"",t),this.Resize(),n.show()},e.prototype.Resize=function(){var e=$("#_sweclient");if(!e||!e.length)e=$("#SiebAppContainer");var t=e.offset(),n=$("#progressdlg");t.top=e.height()/2-n.height()/2,t.left=e.width()/2-n.width()/2,n.css("top",t.top),n.css("left",t.left)},e.prototype.Remove=function(){console.log("["+new Date+"] ProgressDlg:Remove ["+this.name+"]"),$("#progressdlg").hide(),$("#mask-img").removeClass("siebui-progress-dialog"),this.name=null,this.percent=0,this.clearEstimateTimer()},e.prototype.Update=function(e,n,r){e=Math.floor(e),console.log("["+new Date+"] ProgressDlg:Update ["+this.name+"]:"+e+" - "+(n?n:"")),this.clearEstimateTimer(),t.call(this,e,n,r)},e.prototype.clearEstimateTimer=function(){this.estTimer&&(clearInterval(this.estTimer),this.estTimer=0)},e.prototype.UpdateEstimate=function(e,n,r){var i=e[0],s=e[1],o=e[2]?e[2]:1,u=i,a=this;console.log("["+new Date+"] ProgressDlg:UpdateEstimate ["+this.name+"]:"+e+" - "+(n?n:"")),this.clearEstimateTimer(),t.call(this,i,n,r),this.estTimer=setInterval(function(){u++,u>=s&&a.clearEstimateTimer(),t.call(a,u)},o*1e3)},e}(),SiebelApp.dlgProgress=new SiebelApp.ProgressDlg),typeof SiebelAppFacade.DMToolbarPModel=="undefined"&&(Namespace("SiebelAppFacade.DMToolbarPModel"),define("siebel/offline/DMToolbarPModel",["siebel/pmodel"],function(){return SiebelAppFacade.DMToolbarPModel=function(){function i(){r.GetMode()===!1&&t.GetPreference("DisconnectedMobile","LogEvt"),SiebelAppFacade.DMToolbarPModel.superclass.constructor.apply(this,arguments)}function s(){SiebelApp.SyncThreadHandler.SyncInUISession()}function o(e){IsOfflineModeEnabled()&&(r.GetSyncStatus()&&(e="SyncPendng"),this.SetProperty("SyncStatus",e))}function u(){n.GotoView(e.get("ERRLOG_VIEW"))}function a(e,t){this.SetProperty("OfflineProcessStatus",t),r.SetSyncType(e),n.UpdateSyncStatus(t),n.OfflineCallServer()}var e=SiebelApp.Offlineconstants,t=SiebelApp.OfflineUtils,n=SiebelApp.S_App,r=SiebelApp.OfflineAppSettings;return SiebelJS.Extend(i,SiebelAppFacade.PresentationModel),i.prototype.Init=function(){var t=this,n={scope:t,sequence:!1},i={uploadGoOnlinePlaceholder:"uploadGoOnline",syncStayOfflinePlaceholder:"syncStayOffline",uploadStayOfflinePlaceholder:"uploadStayOffline"},f={uploadGoOnline:{type:e.get("SYNC_TYPE_GOONLINE"),status:"GoOnline"},syncStayOffline:{type:e.get("SYNC_TYPE_UPSYNC_ISYNC"),status:"UpSyncISync"},uploadStayOffline:{type:e.get("SYNC_TYPE_UPSYNC_ONLY"),status:"UpSyncOnly"}},l=r.GetSyncStatus()?"SyncPendng":"";t.AddProperty("SyncStatus",l),t.AddProperty("OfflineProcessStatus",""),t.AddProperty("Mode",r.GetMode()),t.AddProperty("IsBatchMode",r.IsBatchMode()),t.AddProperty("IsOfflineModeEnabled",IsOfflineModeEnabled()),t.AddProperty("autoAttributes",i),t.AddProperty("offlineOptionCfg",f),t.AddProperty("offlineLogPlaceholder","tb_OfflineLog"),t.AddProperty("offlineOptionsPlaceholder","tb_OfflineOptions"),t.AddProperty("uploadGoOnlinePlaceholder","offlineUploadGoOnline"),t.AddProperty("syncStayOfflinePlaceholder","offlineSyncStayOffline"),t.AddProperty("uploadStayOfflinePlaceholder","offlineUploadStayOffline"),t.AddMethod("SyncUpdate",o,n),t.AddMethod("InitiateSync",s,n),t.AddMethod("GotoDMLogClick",u,n),t.AddMethod("OfflineButtonClick",a,n),t.AttachEventHandler("OnGotoDMLogClick","GotoDMLogClick"),t.AttachEventHandler("OnOfflineButtonClick","OfflineButtonClick")},i.prototype.Setup=function(e){SiebelAppFacade.DMToolbarPModel.superclass.Setup.call(this,e)},i.prototype.Show=function(){var e=this.GetRenderer();e.ShowUI(),e.BindEvents(),r.GetSyncStatus()===!0&&n.GetUserName()===n.Model.GetLoginName()&&n.UpdateSyncStatus("SyncPendng")},i}(),"SiebelAppFacade.DMToolbarPModel"})),typeof SiebelApp.ErrorLogPM=="undefined"&&(SiebelJS.Namespace("SiebelApp.ErrorLogPM"),define("siebel/offline/errorlogpm",["siebel/pmodel"],function(){return SiebelApp.ErrorLogPM=function(){function e(){SiebelApp.ErrorLogPM.superclass.constructor.apply(this,arguments)}function t(){var e=SiebelApp.S_App.GetActiveView(),t=e.GetAppletMap(),n,r;for(r in t)if(t[r]){n=t[r];if(n.GetName()===s.get("ERRLOG_APPLET"))return n
}return n}function n(){var e=parseInt(o.getItem("LogRecordNum")||0,10),t=[],n,r,i;for(n=0;n<=e;n++)r="AllLogs"+(n||""),i=o.getItem(r),i&&t.push(r);return t}function r(){var e=[],t=n();return t.forEach(function(t){var n=o.getItem(t),r=JSON.parse(n);r.forEach(function(t){e.push(SiebelApp.OfflineUtils.GetLogMsg(t.c,t.p))})}),e.join("\n")}SiebelJS.Extend(e,SiebelAppFacade.PresentationModel);var i=SiebelApp.Constants,s=SiebelApp.Offlineconstants,o=window.localStorage,u={ClearLogs:function(){var e=n();e.push("LogRecordNum"),e.forEach(o.removeItem,o),this.ExecuteMethod("ShowSelection")},UploadLogs:function(){var e=encodeURIComponent(r()),t=SiebelApp.S_App.GetPageURL(),n=SiebelApp.S_App.GetSRN(),o=SiebelApp.BrowserCacheMgr.GetSyncNodeId(),u=SiebelApp.AjaxRequestMgr.SetSrvrReqInputProp(t,[i.get("SWE_CMD_ARG"),i.get("SWE_ARG_KEEP_CONTEXT"),i.get("SWE_VIEW_RPC_ARG"),s.get("CLIENT_LOG_DATA"),i.get("SYNC_NODE_ID"),"SRN"],["UploadClientLogs",1,1,e,o,n],"",t),a=u.indexOf("?"),f=u.substring(a+1,u.length);u=u.substring(0,a),$.ajax({type:"POST",url:u,data:f,processData:!1})}};return e.prototype.Init=function(){SiebelApp.ErrorLogPM.superclass.Init.call(this),this.AddMethod("CanUpdate",function(e){var t=arguments[arguments.length-1];return e==="Logs"&&(t.ReturnValue=!1),t},{scope:this,sequence:!1}),this.AddMethod("CanInvokeMethod",function(e){var t=arguments[arguments.length-1];return u[e]&&(t.ReturnValue=!!o.getItem("AllLogs"),t.ReturnValue&&e==="UploadLogs"&&(t.ReturnValue=!SiebelApp.OfflineAppSettings.GetMode())),t},{scope:this,sequence:!1}),this.AddMethod("InvokeMethod",function(e){var n=arguments[arguments.length-1],r=u[e];if(r){var i=t();i&&i.GetControls().Logs&&r.call(this)}return n},{scope:this,sequence:!1}),this.AddMethod("GetFormattedFieldValue",function(e){var t=arguments[arguments.length-1];return e.GetName()==="Logs"&&(t.ReturnValue=r()),t},{scope:this,sequence:!1})},e}(),SiebelApp.ErrorLogPM})),typeof SiebelApp.S_App.BCBroker=="undefined"&&(SiebelJS.Namespace("SiebelApp.S_App.BCBroker"),SiebelApp.S_App.BCBroker=function(){function o(n){var r={err:!1},i;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BCBroker.GetOMObjInfo");var s=this.GetBC().GetFieldMap(),o=this.GetBC();for(var u in s)s[u]&&(this.GetFieldMap()[u]=s[u].index);o.HasAssocList()&&n.SetProperty(t.get("SWE_PROP_HAS_ASSOC"),"1"),o.CanAssociate()&&n.SetProperty(t.get("SWE_PROP_CAN_ASSOC"),"1"),o.IsInQueryState()&&n.SetProperty(t.get("SWE_PROP_IS_IN_QUERY"),"1"),o.IsCommitPending()&&n.SetProperty(e.get("SWE_PROP_IS_COMMIT"),"1"),o.IsDeleteRecordPending()&&n.SetProperty(t.get("SWE_PROP_IS_DELETE"),"1"),o.IsInsertPending()&&n.SetProperty(t.get("SWE_PROP_IS_NEW_REC_PEND"),"1"),r=o.CanDelete(),i=r,r={err:!1};var a=i.retVal;return a||n.SetProperty(t.get("SWE_PROP_CAN_DELETE"),"1"),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BCBroker.GetOMObjInfo"),r}function u(){var e,t=this.GetNotifyArray(),n=t.length;for(var r=0;r<n;r++)e=t[r],e&&(e.EndLife(),e=null,delete e);this.ResetNotifyArray(),this.MarkToRemove(0)}function a(e){var t="";for(var n=0;n<e.length;n++){var r=e[n].length;r=r.toString(),t+=r.concat("*",e[n])}return t}var e=SiebelApp.Constants,t=SiebelApp.Offlineconstants,n=SiebelJS.Dependency("SiebelApp.Utils"),r=t.get("SAVE_BC_STATE_ALL"),i=t.get("SAVE_BC_STATE_NONE"),s;return s=function(){var e=0,t=null,n=null,r="",i=-1,s=null,o=!1,u=[],a=0,f={};this.GetFieldMap=function(){return f},this.AddReference=function(){return++e},this.SetGenerateNotifyInfo=function(e){o=e},this.GenerateNotifyInfo=function(e){return o},this.GetNumOfRefs=function(){return e},this.RemoveReference=function(){return--e},this.GetView=function(){return t},this.SetView=function(e){t=e},this.GetBC=function(){return n},this.SetBC=function(e){n=e},this.SetBCId=function(e){r=e},this.GetBCId=function(){return r},this.GetNotifyArray=function(){return u},this.ResetNotifyArray=function(){u=[]},this.AddToNotifyArray=function(e){u.push(e)},this.IsMarkedRemove=function(){return a},this.MarkToRemove=function(e){a=e},this.AddMarkedToRmCnt=function(){a++},this.GetNotComp=function(){return s},this.SetNotComp=function(e){s=e},this.GetNotIdComp=function(){return i},this.SetNotIdComp=function(e){i=e},this.ReSetNotIdComp=function(){i=-1}},s.prototype.EndLife=function(){this.GetBC().UnRegNotifyObj(this.GetNotIdComp()),this.SetBC(null),this.ReSetNotIdComp(),this.SetNotIdComp(-1),this.SetNotComp(null),this.EnableGenerateNotifyInfo(!1)},s.prototype.Initialize=function(e,t,n){this.SetView(e),this.SetBC(t),t.AddRef(),this.SetBCId(t.GetVarName()),this.SetNotComp(new SiebelApp.S_App.BCBrokerNotify(this)),this.SetNotIdComp(t.RegNotifyObj(this.GetNotComp(),n));var r=this.GetNotIdComp();t.SetWorkSetSizeX(r,1,!1,n),t.WSHomeX(this.GetNotIdComp(),n)},s.prototype.GetObjInfo=function(e,t){var n={err:!1},r;return o.call(this,e),n={err:!1},this.EnableGenerateNotifyInfo(!0),n},s.prototype.GetDataObjInfo=function(){},s.prototype.GetNewFieldsObjInfo=function(){},s.prototype.GetRecordArraysObjInfo=function(){},s.prototype.GetDefaultFieldObjInfo=function(){},s.prototype.StringToTokenArray=function(){},s.prototype.GetBCStateShortName=function(){},s.prototype.CanInvokeMethod=function(){},s.prototype.SetupFields=function(){},s.prototype.SetupClientActiveFields=function(){},s.prototype.InvokeMethod=function(e,t){var n={err:!1},r,i="";t&&(i=t.GetChildByType("FieldValues"));if(i){var s=i.GetProperty("ValueArray"),o=i.GetProperty("FieldArray");if(!o||!s)return n={err:!1,retVal:null},n;var u=[],a=[];CCFMiscUtil_StringToArray(s,u),CCFMiscUtil_StringToArray(o,a);if(a.length!==u.length)return n={err:!1,retVal:null},n;var f=a.length,l="",c=this.GetBC(),h=function(e){return[a[e],u[e]]};e==="SetFieldSearchSpec"?f&&(l={iterations:f,execute:c.SetSearchSpec,executeScope:c,preExecute:h},r=SiebelApp.OfflineAppMgr.eachSyncOp(this,l),l=null,h=null,n={err:!1,retVal:null}):e==="SetFieldValue"&&f&&(l={iterations:f,execute:c.SetFieldValueX,executeScope:c,preExecute:h},r=SiebelApp.OfflineAppMgr.eachSyncOp
(this,l),l=null,h=null,n={err:!1,retVal:null})}return n},s.prototype.GetNotifyPropSet=function(){var e={err:!1},t;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BCBroker.prototype.GetNotifyPropSet");var i=!1,s,o,u,a=CCFMiscUtil_CreatePropSet(),f=this.GetNotifyArray();if(f.length-this.IsMarkedRemove()===0)return e={err:!1,retVal:a},e;e=this.GetBC().SaveCanMethodStates(r);var l=function(e){c=null,s=null,o=null,u=null},c=function(t){this.GetBC().SaveBusCompStates(r);var l=0,c=f.length,h=[],p=0;for(var d=0;d<c;d++){var v=f[d];if(v.IsMarkedToRemove())continue;h[p]=v,p++}if(p>0){var m=0;i=!0,s=function(e){var t=e.GetNotifyPropSet(),r=e.GetBasePS().GetProperty("type");t&&(!n.IsEmpty(r)&&r.indexOf("SWEI")!==-1?(a.InsertChildAt(t,l),l++):a.AddChild(t),t=null,delete t)},o=function(n){var r=h[n].GetRecord();r?(h[n].GetNotifyType()===17?e=this.BCFieldValue(h[n].GetFieldName(),r,h[n].GetValPS()):e=this.BCFieldValues(r,h[n].GetValPS()),t=e,e={err:!1},t.err||(t.retVal&&h[n].SetValPS(t.retVal),s.call(this,h[n])),n++,n<p&&o.call(this,n)):(s.call(this,h[n]),n++,n<p&&o.call(this,n))},o.call(this,m)}u=function(){var t=CCFMiscUtil_CreatePropSet();this.GetNotComp().SetDefaultProperty(t,!0),t.SetPropertyStr("OP","bn"),a.InsertChildAt(t,0);var n=CCFMiscUtil_CreatePropSet();this.GetNotComp().SetDefaultProperty(n,!0),n.SetPropertyStr("OP","en"),a.AddChild(n),e={err:!1,retVal:a},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BCBroker.prototype.GetNotifyPropSet")};if(i){var g=e;e={err:!1},u.call(this,g)}else u.call(this)},h=e;return e={err:!1},c.call(this,h),e},s.prototype.ResetNotifyPropSet=function(){u.call(this)},s.prototype.EnableGenerateNotifyInfo=function(e){this.SetGenerateNotifyInfo(e),u.call(this)},s.prototype.AddNotifyInfo=function(e,t,n,r,i,s,o){var u={err:!1},a;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BCBroker.prototype.AddNotifyInfo");var f,l=!1,c;if(!this.GenerateNotifyInfo())return delete n,delete r,delete i,u;!e||!r||this.GetNotifyArray().length>1e3;var h=this.GetBC();o&&o!==0&&(h.SaveBusCompStates(o),u=h.SaveCanMethodStates(o));var p,d,v=function(e){m=null,p=null,d=null},m=function(o){if(s===4){var a,v="",m;a=n.GetProperty("nr"),m=a;var g=this.GetNotifyArray(),y=g.length,b;if(m===-1)for(c=0;c<y;c++){f=g[c];if(f.IsMarkedToRemove())continue;b=!1;if(f.GetRecord())b=!0;else switch(f.GetNotifyType){case 15:case 4:case 3:case 10:case 11:case 17:case 21:case 22:case 27:b=!0;break;case 30:v=f.GetBasePS().GetProperty("state"),v==="activeRow"&&(b=!0);break;default:}b&&(f.SetMarkedRemoved(!0),this.AddMarkedToRmCnt())}if(m===1||m>=1){var w=[],E=0;for(c=0;c<y;c++){f=g[c];if(f.IsMarkedToRemove())continue;w[E]=f,E++}if(E>0){var S=0;l=!0,p=function(t){var n=w[t].GetRecord();n&&e===n?(f.GetNotifyType===17?u=this.BCFieldValue(GetFieldName,n,f.GetValPS()):u=this.BCFieldValues(n,f.GetValPS()),o=u,u={err:!1},o.err||o.retVal&&f.SetValPS(o.retVal),f.SetRecord(null),t++,t<E&&p.call(this,t)):(t++,t<E&&p.call(this,t))},p.call(this,S)}}}d=function(){var o=h.GetNotifyInfo(this.GetNotIdComp());f=new SiebelApp.S_App.BCBrokerNotifyInfo(e,t,n,r,i,o,s),this.AddToNotifyArray(f),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BCBroker.prototype.AddNotifyInfo")},l?(u={err:!1},e=null,d.call(this)):d.call(this)},g=u;return u={err:!1},m.call(this,g),u},s.prototype.BCFieldValue=function(e,t,r,i){var s={err:!1},o;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BCBroker.prototype.BCFieldValue");var u,f,l,c=[],h=[],p,d;u=t?!0:!1,r||(r=CCFMiscUtil_CreatePropSet(),r.SetType("FieldValues")),l=this.GetFieldMap()[e],n.IsEmpty(l)&&this.GetBC().GetFieldMap()[e]&&(l=this.GetBC().GetFieldMap()[e].index);if(n.IsEmpty(e)||n.IsEmpty(l))return s={err:!1,retVal:!1},s;s=this.GetBC().FieldValue(e,t);var v=function(e){m=null},m=function(e){if(!e.err){f=e.retVal,!u&&f===null;var t=n.IsEmpty(f)?"":f.toString();c.push(l.toString()),h.push(t),p=a.call(this,c),d=a.call(this,h),r.SetProperty("FieldArray",p),r.SetProperty("ValueArray",d),s={err:e.err,retVal:r}}SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BCBroker.prototype.BCFieldValue")},g=s;return s={err:!1},m.call(this,g),s},s.prototype.BCFieldValues=function(e,t){var r={err:!1},i;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BCBroker.prototype.BCFieldValues");var s=[],o,u,f,l,c,h=[];c=this.GetBC().GetFieldList(),t||(t=CCFMiscUtil_CreatePropSet(),t.SetType("FieldValues"));var p=c.length;if(p>0){o=e?!0:!1;var d=0;for(var v=0;v<p;v++){l=SiebelApp.S_App.LookupStringCache(c[v]);if(n.IsEmpty(l))continue;h[d]=l,d++}var m={};m.iterations=d,m.preExecute=function(t){return[h[t],e]},m.execute=this.GetBC().FieldValue,m.executeScope=this.GetBC(),m.postExecute=function(e){if(!e.err){u=e.retVal,!o&&u===null;var t=n.IsEmpty(u)?"":u.toString();s.push(t)}},i=SiebelApp.OfflineAppMgr.eachSyncOp(this,m),r={err:!1},i.err||(f=a.call(this,s),t.SetProperty("ValueArray",f),r={err:!1,retVal:t},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BCBroker.prototype.BCFieldValues"))}else r={err:!1,retVal:!1};var g=function(e){m=null};return r},s.prototype.AddField=function(){},s.prototype.BCCreateFieldList=function(){},s.prototype.BCActiveFieldsChanged=function(){},s.prototype.BCEnumFields=function(){},s.prototype.SetWorkSetSize=function(e,t){var n=this.GetNotIdComp(),r=this.GetBC();if(r){var i=r.GetWorkSetSize(n);if(i>=e)return}r.SetWorkSetSizeX(n,e,null,t)},s}()),typeof SiebelApp.S_App.BCBrokerNotify=="undefined"&&(SiebelJS.Namespace("SiebelApp.S_App.BCBrokerNotify"),SiebelApp.S_App.BCBrokerNotify=function(){var e=SiebelApp.Constants,t=SiebelJS.Dependency("SiebelApp.Utils"),n=SiebelApp.Offlineconstants,r=n.get("SAVE_BC_STATE_ALL"),i=n.get("SAVE_BC_STATE_NONE"),s=function(e){var t=e,n=[],r=[];this.RegBusCompArray=function(e){n.push(e)},this.RegNtfyIdArray=function(e){r.push(e)},this.GetRegBcArray=function(){return n},this.GetNtfyIdArray=function(){return r},this.GetBroker=function(){return t}};return s
.prototype.Add=function(e,t){this.RegBusCompArray(e),this.RegNtfyIdArray(t)},s.prototype.Remove=function(e,t){var n=this.GetRegBcArray(),r=n.length,i=this.GetNtfyIdArray();for(var s=0;s<r;s++)if(n[s]===e&&i[s]===t)return n.splice(s,1),i.splice(s,1),!0;return!1},s.prototype.SetDefaultProperty=function(e,n){var r=this.GetBroker();e.SetPropertyStr("bc",r.GetBCId());var i=r.GetView();t.IsEmpty(i)||e.SetPropertyStr("Zone",i);if(!n){var s=r.GetBC().GetActiveRow();e.SetPropertyStr("ar",s)}},s.prototype.NotifyBeginQuery=function(){var e=CCFMiscUtil_CreatePropSet(),n,r=this.GetBroker();this.SetDefaultProperty(e,null),e.SetPropertyStr("OP","bq"),n=r.GetBC().GetFieldList();var i=n.length,s;for(var o=0;o<i;o++){s=SiebelApp.S_App.LookupStringCache(n[o]);if(t.IsEmpty(s))continue;this.NotifyNewQuerySpec(s)}},s.prototype.NotifyChangeSelection=function(){var e=CCFMiscUtil_CreatePropSet(),t=this.GetBroker();this.SetDefaultProperty(e,null),e.SetPropertyStr("OP","cs"),t.AddNotifyInfo(null,null,e,null,null,2)},s.prototype.NotifyDeleteWorkSet=function(t,n,r){var i=CCFMiscUtil_CreatePropSet(),s=this.GetBroker();this.SetDefaultProperty(i,null),i.SetPropertyStr(e.get("SWE_PROP_BC_OPERATION"),e.get("SWE_PROP_BC_NOTI_DELETE_WORKSET")),i.SetPropertyStr("index",t),i.SetPropertyStr("nr",n),s.AddNotifyInfo(r,null,i,null,null,4)},s.prototype.NotifyDeleteRecord=function(t,n){var r=CCFMiscUtil_CreatePropSet(),i=this.GetBroker();this.SetDefaultProperty(r,null),r.SetProperty(e.get("SWE_PROP_BC_OPERATION"),e.get("SWE_PROP_BC_NOTI_DELETE_RECORD")),r.SetProperty("bSetup",t?!0:!1),r.SetProperty("bUp",n?!0:!1),i.AddNotifyInfo(null,null,r,null,null,3,t?0:1)},s.prototype.NotifyNewSelIds=function(e){var t=CCFMiscUtil_CreatePropSet(),n="r",r=this.GetBroker();this.SetDefaultProperty(t,null),t.SetPropertyStr("OP","nsi");for(var i=0;i<e.length;i++)n="r",n=n.concat(i),t.SetPropertyStr(n,e[i]);r.AddNotifyInfo(null,null,t,null,null,25)},s.prototype.NotifyEndQuery=function(){},s.prototype.NotifyExecute=function(){var t=CCFMiscUtil_CreatePropSet(),n=this.GetBroker();this.SetDefaultProperty(t,null);var r=n.GetBC().GetSearchExpr(),i=n.GetBC().GetSortSpec();t.SetPropertyStr("OP",e.get("SWE_PROP_BC_NOTI_EXECUTE")),t.SetPropertyStr("srt",i),t.SetPropertyStr("s",r),n.AddNotifyInfo(null,name,t,null,null,7)},s.prototype.NotifyGeneric=function(e,t){var n=CCFMiscUtil_CreatePropSet(),r,i=this.GetBroker();r=e.indexOf("SWEI")===-1||e.indexOf("SWEA")===-1,this.SetDefaultProperty(n,r),n.SetPropertyStr("OP","g"),n.SetPropertyStr("type",e),t=SiebelApp.OfflineUtils.NotifyValueArray(t),n.SetPropertyStr("ArgsArray",t),i.AddNotifyInfo(null,null,n,null,null,8)},s.prototype.NotifyInsertWorkSet=function(t,n){var r=CCFMiscUtil_CreatePropSet(),i=this.GetBroker();this.SetDefaultProperty(r),r.SetProperty(e.get("SWE_PROP_BC_OPERATION"),e.get("SWE_PROP_BC_NOTI_INSERT_WORKSET")),r.SetProperty("index",t),i.AddNotifyInfo(n,null,r,null,null,11)},s.prototype.NotifyInsertWSFieldVals=function(){},s.prototype.NotifyLongOpProgress=function(){},s.prototype.NotifyNewActiveFieldList=function(){},s.prototype.NotifyNewActiveRow=function(){var e=CCFMiscUtil_CreatePropSet(),t=this.GetBroker();this.SetDefaultProperty(e,null),e.SetPropertyStr("OP","nar"),t.AddNotifyInfo(null,null,e,null,null,15,r)},s.prototype.NotifyNewData=function(e){var n=this.GetBroker(),r=t.IsEmpty(e),i=r?null:e,s=CCFMiscUtil_CreatePropSet();this.SetDefaultProperty(s,null),i?(bcState="SAVE_BC_STATE_CANDELETE | SAVE_BC_STATE_ROWNUMINFO",s.SetPropertyStr("f",i),s.SetPropertyStr("OP","nfd")):s.SetPropertyStr("OP","nd"),n.AddNotifyInfo(null,i,s,null,null,16)},s.prototype.NotifyNewDataWS=function(e){var n=this.GetBroker();if(t.IsEmpty(e))return;var r=n.GetBC(),i=CCFMiscUtil_CreatePropSet();this.SetDefaultProperty(i,null),i.SetPropertyStr("OP","ndw"),i.SetPropertyStr("f",e);var s=r.GetActiveRow(),o=r.FindWorkSet(s);n.AddNotifyInfo(o,e,i,null,null,17)},s.prototype.NotifyNewFieldList=function(){},s.prototype.NotifyNewQuerySpec=function(e){var t=CCFMiscUtil_CreatePropSet(),n=this.GetBroker(),r=n.GetBC(),i=r.GetFieldSearchSpec(e);this.SetDefaultProperty(t,null),t.SetPropertyStr("op","nfq"),t.SetPropertyStr("f",e),t.SetPropertyStr("v",i),n.AddNotifyInfo(null,e,t,null,null,23)},s.prototype.NotifyNewPrimary=function(){},s.prototype.NotifyNewRecord=function(t){var n=CCFMiscUtil_CreatePropSet(),r=this.GetBroker();this.SetDefaultProperty(n),n.SetPropertyStr(e.get("SWE_PROP_BC_OPERATION"),e.get("SWE_PROP_BC_NOTI_NEW_RECORD")),n.SetPropertyStr("bInsertBefore",t?"true":"false"),r.AddNotifyInfo(null,null,n,null,null,e.get("SWE_PROP_BC_NOTI_NEW_RECORD"),1)},s.prototype.NotifyNewRecordData=function(){var t=CCFMiscUtil_CreatePropSet(),n=this.GetBroker();this.SetDefaultProperty(t),t.SetPropertyStr(e.get("SWE_PROP_BC_OPERATION"),e.get("SWE_PROP_BC_NOTI_NEW_RECORD_DATA")),n.AddNotifyInfo(null,null,t,null,null,e.get("SWE_PROP_BC_NOTI_NEW_RECORD_DATA"))},s.prototype.NotifyNewRecordDataWS=function(){var t,n=this.GetBroker(),r=n.GetBC(),i=CCFMiscUtil_CreatePropSet();this.SetDefaultProperty(i),i.SetPropertyStr(e.get("SWE_PROP_BC_OPERATION"),e.get("SWE_PROP_BC_NOTI_NEW_RECORD_DATA_WS")),t=r.GetActiveRow();var s=r.FindWorkSet(t);n.AddNotifyInfo(s,null,i,null,null,e.get("SWE_PROP_BC_NOTI_NEW_RECORD_DATA_WS"))},s.prototype.NotifyNewSelection=function(e){var t=this.GetBroker(),n=CCFMiscUtil_CreatePropSet();this.SetDefaultProperty(n,null),n.SetPropertyStr("OP","ns"),n.SetPropertyStr("bSelected",!!e),t.AddNotifyInfo(null,null,n,null,null,24)},s.prototype.NotifyPageRefresh=function(){},s.prototype.NotifyScrollData=function(e,t){var n=CCFMiscUtil_CreatePropSet(),r=this.GetBroker();this.SetDefaultProperty(n,null),n.SetPropertyStr("OP","sa"),n.SetPropertyStr("bUp",e?!0:!1),n.SetPropertyStr("scrollAmount",t),r.AddNotifyInfo(null,null,n,null,null,28)},s.prototype.NotifySelModeChange=function(e){var t=CCFMiscUtil_CreatePropSet(),n=this.GetBroker();this.SetDefaultProperty(t,null),t.SetPropertyStr("OP","smc"),t.SetPropertyStr("bInMultiSelMode",e?!0:!1),n.AddNotifyInfo
(null,null,t,null,null,"SWE_BCNOTIFY_SELMODECHANGE")},s.prototype.NotifyStateChanged=function(e,t){var n=CCFMiscUtil_CreatePropSet(),r=this.GetBroker();this.SetDefaultProperty(n,null),n.SetPropertyStr("OP","sc"),n.SetPropertyStr("state",e),n.SetPropertyStr("value",t),r.AddNotifyInfo(null,e,n,null,null,"SWE_BCNOTIFY_STATECHANGED")},s.prototype.NotifyTotalsChanged=function(){},s}()),typeof SiebelApp.S_App.BCBrokerNotifyInfo=="undefined"&&(SiebelJS.Namespace("SiebelApp.S_App.BCBrokerNotifyInfo"),SiebelApp.S_App.BCBrokerNotifyInfo=function(){function e(e,t,n,r,i,s,o){var u=0,a=0,f=0,l=e,c=t,h=n,p=r,d=i,v=o,m=!1;s&&(u=s.GetBegRow(),a=s.GetCurrRow(),f=s.GetSize()),n||(n=CCFMiscUtil_CreatePropSet()),n.SetPropertyStr("br",u),n.SetPropertyStr("cr",a),n.SetPropertyStr("l",f),this.SetRecord=function(e){l=e},this.IsMarkedToRemove=function(){return m},this.SetMarkedRemoved=function(e){m=e},this.GetValPS=function(e){return p},this.SetValPS=function(e){p=e},this.GetFieldPS=function(e){return d},this.GetRecord=function(){return l},this.GetNotifyType=function(){return v},this.GetFieldName=function(){return c},this.GetBasePS=function(){return h},this._EndLife=function(){c=null,h=null,p=null,d=null,v=null}}return e.prototype.EndLife=function(){var e=this.GetBasePS(),t=this.GetValPS(),n=this.GetFieldPS();e&&delete e,t&&delete t,n&&delete n,this.SetRecord(null),this._EndLife()},e.prototype.GetNotifyPropSet=function(e){var t=this.GetBasePS();if(this.IsMarkedToRemove())return;var n=this.GetValPS();n&&t.AddChild(n);var r=this.GetFieldPS();return r&&t.AddChild(r),t?t:null},e}()),typeof SiebelApp.S_App.NotifyInfo=="undefined"&&(SiebelJS.Namespace("SiebelApp.S_App.NotifyInfo"),SiebelApp.S_App.NotifyInfo=function(){function e(){var e=0,t={},n={},r={},i=0,s=null,o=1,u=[];this.SetBusCompNotify=function(e){s=e},this.GetBusCompNotify=function(e){return s},this.SetBegRow=function(n,r){e=n,r&&(t[r]=n)},this.GetAppletArray=function(){return u},this.SetAppletArray=function(e){u.indexOf(e)===-1&&(u.push(e),t[e]||(t[e]=0),n[e]||(n[e]=0),r[e]||(r[e]=1))},this.GetBegRow=function(n){if(n)return t[n];for(var r in t)e>t[r]&&(e=t[r]);return e},this.SetCurrRow=function(e,t){i=e,t&&(n[t]=e)},this.GetCurrRow=function(e){return e?n[e]:i},this.SetSize=function(e,t){o=e;if(t)r[t]=e;else{var n=u.length;for(var i=0;i<n;i++)r[u[i]]=e}},this.GetSize=function(e){return e?r[e]:o}}return e}()),typeof SiebelApp.AjaxRequestMgr&&function(){function h(e,i){$.ajaxSetup({cache:"true"}),$.ajax({url:e.url,data:e.data,type:e.type,async:e.async,contentType:e.contentType,success:function(s,o,u){if(a.href===f){var l=t.DecodeFromQueryString(i),c=l.GetProperty("SWECmd").toString();if(c==="GetCachedFrame"){var h=l.GetProperty("SWEFrame").toString();if(h==="top._swe"){if(SiebelApp.OfflineAppMgr.CheckServerConnection(s)){var p=a.pathname;p=p.concat("?SWENeedContext=false&SWECmd=Logoff&SWEBID=-1&SRN=&SWETS="),Top().location.replace(p);return}n.GetPkgStatus()&&(n.OnSuccessfulDataDownload(),a.replace(a.origin.concat(a.pathname)))}}}else if(i.indexOf("SWECmd=GetCachedFrame")!==-1&&i.indexOf("SWEFrame=top._swe")!==-1&&s.indexOf("SBL-UIF-00335")!==-1&&SiebelApp.OfflineAppMgr.CheckServerConnection(s)){var p=window.location.href,d=Math.random();p=p.concat("&SWETS="+d),Top().location.replace(p);return}var v=[];v.push(s),v.push(o),v.push(u),SiebelApp.OfflineUtils.IsValidServerResponse(s)?(SiebelApp.OfflineAppMgr.CacheResponse(i,v),e.successfncallback.apply(e.context||this,v)):SiebelApp.OfflineUtils.CcfLogEvent([r.get("LOG_EVT_ALL"),20,3,7,i,s])},error:e.errfncb,complete:function(e,r,s){if(r==="error"){var o=t.DecodeFromQueryString(i),u=o.GetProperty("SWECmd").toString();if(u==="GetCachedFrame"){var f=o.GetProperty("SWEFrame").toString();f==="top._swe"&&n.GetPkgStatus()&&(n.OnSuccessfulDataDownload(),a.replace(a.origin.concat(a.pathname)))}}}})}function p(e,n){if(!this.GetActiveRequest())this.SetActiveRequest(e,e.async),SiebelApp.OfflineAppMgr.OfflineRequestHandler(n,e,e.async),$.callback(this,function(e){var t=this.IsActiveRequestAsync(),i=this.GetActiveRequestObj();this.SetActiveRequest(null);var o=this.GetRequestQueue(),u=o.length;if(u>0)if(this.CanExecuteCurrRequest(o,i,t,n))this.Ajax(this.ClearActiveRequest());else{var a;for(var f=0;f<u;f++)a=o[f],a.successfncallback.apply(a.context||this,[r.get("CUD_RESPONSE")]);s=[]}else s=[];$.setReturnValue(e)});else if(!SiebelApp.OfflineAppMgr.CheckResolvedState()){var i=SiebelApp.S_App.GetActiveView();if(i){var o=t.DecodeFromQueryString(n),u=o.GetPropertyAsStr(r.get("SWECMD"));u=u?unescape(u):"";if(u===r.get("GETCACHEDFRAME")){this.SetActiveRequest(null),s.push(e),this.Ajax(this.ClearActiveRequest());return}var a=i.GetActiveApplet();i&&a&&a.GetActiveControl()&&(e.activeControl=a.GetActiveControl())}s.push(e)}else this.SetActiveRequest(null),s.push(e),this.Ajax(this.ClearActiveRequest())}var e=SiebelApp.AjaxRequestMgr.constructor,t=SiebelJS.Dependency("SiebelApp.Utils"),n=SiebelApp.OfflineAppSettings,r=SiebelApp.Offlineconstants,i=SiebelApp.OfflineUtils,s=[],o=null,u=null,a=window.location,f=a.origin.concat(a.pathname),l=!0,c={};e.prototype.ProcessToolbarResponse=function(e,i){var s,o={};if(i){var u=CCFMiscUtil_CreatePropSet();u.DecodeFromString(e),s=SiebelApp.OfflineAppMgr.CheckValidation(u);if(s){var a,f;if(u.GetType()!=="offpkg")return a="IDS_DOUI_ERR_OFFLINE_PKG_SRVR",f=SiebelApp.S_App.OfflineLocaleObject.GetLocalString(a),alert(f),SiebelApp.OfflineUtils.CcfLogEvent([r.get("LOG_EVT_METADATA_EX"),19,3,6]),SiebelApp.dlgProgress.Remove(),SiebelApp.S_App.UpdateSyncStatus("FullDownLoadFailed"),o.bContinue=!1,o;var l=u.GetChildCount(),c=u.GetProperty("Status"),h=u.GetValue();if(c==="Error"||!l&&h!=="nochng")return a="IDS_DOUI_ERR_METADATA_SRVR",SiebelApp.OfflineUtils.CcfLogEvent([r.get("LOG_EVT_METADATA_EX"),17,3,6]),f=SiebelApp.S_App.OfflineLocaleObject.GetLocalString(a),alert(f),SiebelApp.dlgProgress.Remove(),SiebelApp.S_App.UpdateSyncStatus("FullDownLoadFailed"),o.bContinue=!1,o;SiebelApp.OfflineUtils.CcfLogEvent([r.get("LOG_EVT_METADATA_EX"
),102,3,6,SiebelApp.OfflineUtils.GetTS()]),SiebelApp.dlgProgress.UpdateEstimate([40,60],SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_DOWNLOAD_DATA"));if(h==="new")return o.bContinue=!0,t.IsEmpty(u.GetProperty("SyncNodeId"))||t.IsEmpty(u.GetProperty("srfid"))?(a="IDS_DOUI_ERR_METADATA_SRVR",SiebelApp.OfflineUtils.CcfLogEvent([r.get("LOG_EVT_METADATA_EX"),18,3,6]),f=SiebelApp.S_App.OfflineLocaleObject.GetLocalString(a),alert(f),SiebelApp.dlgProgress.Remove(),SiebelApp.S_App.UpdateSyncStatus("FullDownLoadFailed"),o.bContinue=!1,o):(SiebelApp.BrowserCacheMgr.CacheSyncNodeId(u.GetProperty("SyncNodeId")),SiebelApp.BrowserCacheMgr.CacheSRFId(u.GetProperty("srfid")),SiebelApp.OfflineUtils.CcfLogEvent([r.get("LOG_EVT_COMMON"),103,3,6,u.GetProperty("SyncNodeId")]),SiebelApp.OfflineUtils.CcfLogEvent([r.get("LOG_EVT_COMMON"),104,3,6,u.GetProperty("srfid")]),o.args=[u],o.callback=function(e){SiebelApp.ProactiveCacheBuilder.ParseAndCacheMetadata(e)},o);h==="nochng"&&(o.bContinue=!0,o.args=[],o.callback=function(){n.OnSuccessfulMetaDataDownload(),SiebelApp.ProactiveCacheBuilder.ClearDataTables(!1)})}else o.bContinue=!1;return o}var p=CCFMiscUtil_CreatePropSet();return p.DecodeFromString(e),s=SiebelApp.OfflineAppMgr.CheckValidation(p),s?(SiebelApp.OfflineUtils.CcfLogEvent([r.get("LOG_EVT_DATA_EX_BASIC"),15,3,6,SiebelApp.OfflineUtils.GetTS()]),$.callback(this,function(){var t=function(){n.GetMetadata()?(SiebelApp.dlgProgress.Update(60,SiebelApp.OfflineUtils.GetErrorMsg("IDS_PROGRESS_SAVE_DATA")),SiebelApp.ProactiveCacheBuilder.ParseAndCacheData(p,e)):$.callback(this,function(){t.call(this)})};t.call(this)}),o.bContinue=!0):o.bContinue=!1,o},e.prototype.SetSrvrReqInputProp=function(e,n,r,i,s){var o=e,u=SiebelApp.Constants;if(!t.IsEmpty(e)&&!t.IsEmpty(n)&&r){var a=r.length,f=n.length;if(a===f){var l=t.DecodeFromQueryString(e);for(var c=0;c<f;c++){var h=l.GetProperty(n[c]);(t.IsEmpty(h)||h!==r[c])&&l.SetProperty(n[c],r[c])}o=t.EncodeToQueryString(l,!1),t.IsEmpty(s)?o=SiebelApp.S_App.GetPageURL()+u.get("SWE_ARG_START")+o:o=s+u.get("SWE_ARG_START")+o}}return o},e.prototype.Get=function(e,t){var n={};n.url=e,n.type="GET",n.async=!0,n.successfncallback=t,this.Ajax(n)},e.prototype.Post=function(e,t){var n={};n.url=e,n.type="POST",n.async=!0,n.successfncallback=t,this.Ajax(n)},e.prototype.SetDepnRequestMap=function(e){c=e},e.prototype.GetDepnRequestMap=function(e){return c[e]},e.prototype.SetActiveRequest=function(e,t){var n=SiebelApp.S_App.GetActiveView();u=null;if(n){var r=n.GetActiveApplet();r&&r.GetActiveControl()&&(u=r.GetActiveControl())}o=e,l=t},e.prototype.GetRequestQueue=function(){return s},e.prototype.GetActiveRequest=function(){return o},e.prototype.IsActiveRequestAsync=function(){return l},e.prototype.ClearActiveRequest=function(){return s.shift()},e.prototype.GetActiveRequestObj=function(){var e=this.GetActiveRequest();if(e){var t=e.url;return e.data&&(t+="?"+e.data),e.activeControl&&(u=e.activeControl),t=i.JsonRecordSet(t),u&&(t.activeControl=u),t}return null},e.prototype.CanExecuteCurrRequest=function(e,t,n,r){var s={},o,u;if(n||!SiebelApp.RequestProcessor.IsSupported(r,!1,this.GetActiveRequest()))return!0;if(!t&&!t.SweCommands&&!t.SweCommands.SWEMethod)return!1;o=t.SweCommands.SWEMethod,s=this.GetDepnRequestMap(o);var a=e.length;for(var f=0;f<a;f++){var l=e[f],c=l.url;l.data&&(c+="?"+l.data),l=i.JsonRecordSet(c);if(!l&&!l.SweCommands&&!l.SweCommands.SWEMethod)return!1;u=l.SweCommands.SWEMethod;if(SiebelApp.RequestProcessor.IsCUDRequest(u))return!0;if(s){var h=s.length;if(h>0)for(var p=0;p<h;p++)if(s[p]===u)return!0}}return!1},e.prototype.Ajax=function(e,t,r){var i=e.url;e.data&&(i+="?"+e.data);if(IsOfflineModeEnabled()&&SiebelApp.OfflineAppMgr.IsCachableRequest(i)){if(!n.GetMode()){h.call(this,e,i);return}if(!r){p.call(this,e,i);return}}$.ajax({url:e.url,data:e.data,type:e.type,async:e.async,contentType:e.contentType,success:e.successfncallback,error:e.errfncb,context:e.context})}}(),typeof SiebelApp.OfflineExtensions=="undefined"&&(Namespace("SiebelApp.OfflineExtensions"),SiebelApp.OfflineExtensions=function(){function e(e){var r=e[0];switch(r){case"ProcessAppletSelfProps":t.call(this,e);break;case"AddFieldName":n.call(this,e);break;default:}}function t(e){if(SiebelApp.OfflineAppSettings.GetMode()){var t=e[1],n=t.GetView(),r=n?n.GetActiveApplet():null;if(r){var i=r.GetActiveControl(),s=!1,o=!1,u;if(i&&i.GetUIType()==="Pick")s=!0;else{u=SiebelApp.OfflineAppMgr.GetPickAppletContext();if(u){var a=u.SrcApplet?u.SrcApplet:"";a===r.GetName()&&(o=!0,s=!0,SiebelApp.OfflineAppMgr.ClearPickAppletContext())}}if(s){var f={};f.SrcApplet=o?u.SrcApplet:r.GetName(),f.SrcAppletFld=o?u.SrcAppletFld:i.GetFieldName(),t.GetPickAppletSrcInfo=function(){return f}}}}}function n(e){if(SiebelApp.OfflineAppSettings.GetMode()){var t="OF_",n=e[1],r=e[2],i=e[3],s=e[4],o=n.GetControls(),u=o[i],a=u.GetFieldName();n.IsInQueryMode()||u.GetCtrlFldEncode()?r.SetProperty(t+a,s):r.SetProperty(t+a,n.GetFieldValue(u))}}SiebelApp.S_App.constructor.prototype.OfflineCallMethod=function(){IsOfflineModeEnabled()&&e.call(this,arguments)}}()),typeof SiebelApp.Metadata=="undefined"&&(SiebelJS.Namespace("SiebelApp.Metadata"),SiebelApp.Metadata=function(){function y(e){if(!e){SiebelJS.Log("Unable to load List Of Values");return}var t=e.length,n=this.GetListOfValues(),r,i,o=s.RemoveNonAlphaChars(SiebelApp.Metadata.GetBusCompDef("List Of Values").LanguageField);for(var u=0;u<t;u++)i=e[u][o],r=e[u].Type,i!=="ENU"&&(r=r+"_"+i),n[r]||(n[r]=[]),n[r].push(e[u])}function b(e){if(!e){SiebelJS.Log("Unable to load System Preferences");return}var t=e.length,n=null;for(var r=0;r<t;r++)n={},n.Value=e[r].Value,this.SetSystemPreference(e[r].Name,n)}function w(e){if(!e){SiebelJS.Log("Unable to get PickList Definitions.");return}var t=e.length,r=null;for(var i=0;i<t;i++){r={};for(var s in e[i])e[i][s]&&(this.IsBoolean(e[i][s])?r[s]=n.IsTrue(e[i][s]):r[s]=e[i][s]);r.Name=e[i].NAME,this.SetPickListDef(r.Name,r)}}function E(e){if(!e){SiebelJS.Log("Unable to get ParsePickListGeneric BC Table."
);return}var t=e.length,n=null,r=null,i,o=s.RemoveNonAlphaChars(SiebelApp.Metadata.GetBusCompDef("PickList Generic").LanguageField);for(var u=0;u<t;u++){r={},n={};for(i in e[u])e[u][i]&&(r[i]=e[u][i]);r.Type=e[u].Type,n.Name=e[u].Name,n.Value=e[u].Value,n.OrderBy=e[u].OrderBy,n.Name=e[u].Name,n[o]=e[u][o],i=r.Type,e[u][o]!=="ENU"&&(i=i+"_"+e[u][o]),this.SetPickListGeneric(i,n)}}function S(e){if(!e){SiebelJS.Log("Unable to get MIcons BC Table.");return}var t=e.length,n=null,r=null;for(var i=0;i<t;i++){r={},n={};for(var s in e[i])e[i][s]&&(r[s]=e[i][s]);r.IconMapName=e[i].IconMapName,n.IconMapName=e[i].IconMapName,n.IconName=e[i].IconName,n.FileName=e[i].FileName,n.Bitmap=e[i].Bitmap,this.SetMIcons(r.IconMapName,n)}}function x(e){if(!e){SiebelJS.Log("Unable to get ParsePickListHierarchical BC Table.");return}var t=e.length,n=null,r=null,i,o=s.RemoveNonAlphaChars(SiebelApp.Metadata.GetBusCompDef("PickList Hierarchical").LanguageField),u;for(var a=0;a<t;a++){r={},n={},u=e[a];for(var i in u)u[i]&&(r[i]=u[i]);r.Type=u.Type,n.Name=u.Name,n.Value=u.Value,n.Parent=u.Parent,n[o]=u[o],i=r.Type,u[o]!=="ENU"&&(i=i+"_"+u[o]),this.SetPickListHierarchical(i,n)}}function T(e){if(!e){SiebelJS.Log("Unable to get PickListHierarchicalSubArea BC Table.");return}var t=e.length,n=null,r=null,i=s.RemoveNonAlphaChars(SiebelApp.Metadata.GetBusCompDef("PickList Hierarchical Sub-Area").LanguageField),o;for(var u=0;u<t;u++){r={},n={},o=e[u];for(var a in o)o[a]&&(r[a]=o[a]);r.Type=o.Type,n.Value=o.Value,n.Parent=o.Parent,n.ParentType=o.ParentType,n[i]=o[i],a=r.Type,e[u].Language!=="ENU"&&(a=a+"_"+o[i]),this.SetPickListHierarchicalSubArea(a,n)}}function N(t){if(!t){SiebelJS.Log("Unable to get Applet Definitions.");return}var r=t.length,s=null,o=null,u=null,a=null,f=null;for(var l=0;l<r;l++){s={};for(var c in t[l])this.IsBoolean(t[l][c])?s[c]=n.IsTrue(t[l][c]):t[l][c]&&(s[c]=n.IsEmpty(t[l][c])?"":t[l][c]);s.userPropMap=null;if(!n.IsEmpty(t[l].userPropMap)){o=t[l].userPropMap.substring(1,t[l].userPropMap.length-1).split(i),u=o.length,s.userPropMap={};for(f=0;f<u;f++)a=o[f].split(e.get("METADATA_SEP")),a[0]=a[0].replace(/&verbar;/g,"|"),a[1]=a[1].replace(/&verbar;/g,"|"),s.userPropMap[a[0]]=a[1]}s.control=null;if(!n.IsEmpty(t[l].control)){var h=t[l].control.substring(1,t[l].control.length-1).split(i),p={},d=null,v=null;u=h.length;for(f=0;f<u;f++)d=h[f].split(e.get("METADATA_SEP")),v={},v.name=d[0],v.field=d[1],v.ReadOnly=n.IsTrue(d[2]),v.PickFrameName=d[3],v.htmlIconMap=d[4],p[v.name]=v;s.control=p}s.drilldown=null;if(!n.IsEmpty(t[l].drilldown)){var m=t[l].drilldown.substring(1,t[l].drilldown.length-1).split(i);u=m.length,s.drilldown={};var g=[];for(f=0;f<u;f++){var y={};a=m[f].split(e.get("METADATA_SEP")),a[0]=a[0].replace(/&verbar;/g,"|"),a[1]=a[1].replace(/&verbar;/g,"|"),y.viewname=a[1],y.busCompName=a[2],y.destFieldName=a[3],y.hyperLinkField=a[4],y.srcFieldName=a[5],y.menuText=a[6],y.sequence=a[7],y.visibilityType=a[8],y.Dynamicdrilldown={},s.drilldown[a[0]]=y,g.push(a[4])}s.ddCtrlsArray=g}this.SetAppletDef(t[l].Name,s)}}function C(t){if(!t){SiebelJS.Log("Unable to get Business Object Definitions.");return}var r=t.length,s={},o=null,u=null,a=null,f=null;for(var l=0;l<r;l++){s={};for(var c in t[l])t[l][c]&&(s[c]=t[l][c]);if(!n.IsEmpty(t[l].userPropMap)){u=t[l].userPropMap.substring(1,t[l].userPropMap.length-1).split(i),o=u.length,s.userPropMap={};for(f=0;f<o;f++)a=u[f].split(e.get("METADATA_SEP")),a[0]=a[0].replace(/&verbar;/g,"|"),a[1]=a[1].replace(/&verbar;/g,"|"),s.userPropMap[a[0]]=a[1]}this.SetBusServiceDef(t[l].Name,s)}}function k(t){if(!t){SiebelJS.Log("Unable to get Business Object Definitions.");return}var n=t.length,r=null,s=null,o=null,u=null;for(var a=0;a<n;a++){s={},r=t[a].BCLinkProp.substring(1,t[a].BCLinkProp.length-1).split(i),o=r.length;for(var f=0;f<o;f++)u=r[f].split(e.get("METADATA_SEP")),s[u[0]]=u[1];this.SetBusObjDef(t[a].Name,s)}}function L(e){if(!e){SiebelJS.Log("Unable to get Link Definitions.");return}var t=e.length,r=null;for(var i=0;i<t;i++){r={};for(var s in e[i])this.IsBoolean(e[i][s])?r[s]=n.IsTrue(e[i][s]):e[i][s]&&(r[s]=n.IsEmpty(e[i][s])?"":e[i][s]);this.SetLinkDef(e[i].Name,r)}}function A(e){if(!e){SiebelJS.Log("Unable to get View Definitions.");return}var t=e.length,r,i,s;for(var o=0;o<t;o++){r={},s=e[o];for(i in s)this.IsBoolean(s[i])?r[i]=n.IsTrue(s[i]):e[o][i]&&(r[i]=n.IsEmpty(s[i])?"":s[i]);this.SetViewDef(s.Name,r)}}function O(t){if(!t){SiebelJS.Log("Unable to get Business Component Definitions.");return}var r=null,o=null,u=null,a=null,f=null,l=null,c=t.length,h=null,p=null,d=null,v=null,m=null,g=null,y=null,b=null;for(var w=0;w<c;w++){r={};for(var E in t[w])this.IsBoolean(t[w][E])?r[E]=n.IsTrue(t[w][E]):r[E]=n.IsEmpty(t[w][E])?"":t[w][E];var S=t[w].userKey;if(!n.IsEmpty(S)){var x=s.RTrim(S,","),T=x.split(","),N=T.length;for(var C=0;C<N;C++)T[C]=s.RemoveNonAlphaChars(T[C]);r.userKey=T.toString()}if(!n.IsEmpty(t[w].userPropMap)){d=t[w].userPropMap.substring(1,t[w].userPropMap.length-1).split(i),h=d.length,r.userPropMap={};for(g=0;g<h;g++)v=d[g].split(e.get("METADATA_SEP")),v[0]=v[0].replace(/&verbar;/g,"|"),v[1]=v[1].replace(/&verbar;/g,"|"),r.userPropMap[v[0]]=v[1]}if(!n.IsEmpty(t[w].Visibility)){var k=t[w].Visibility.substring(1,t[w].Visibility.length-1).split(i);h=k.length,r.Visibility={};for(g=0;g<h;g++)v=k[g].split(e.get("METADATA_SEP")),k[g]={},k[g].mode=v[0],k[g].ownerType=v[1],k[g].privateField=v[2],k[g].visibilityField=v[3],k[g].visibilityMVField=v[4],k[g].visibilityMVLink=v[5];r.Visibility=k}o=t[w].Fields.substring(1,t[w].Fields.length-1).split(i),a={},h=o.length;var L=[],A=[];for(g=0;g<h;g++){m=null,f=null,o[g].indexOf("}~{")!==-1?(f=o[g].substring(o[g].indexOf("~{")+1,o[g].indexOf("}~{")+1),m=o[g].substring(o[g].indexOf("}~{")+2,o[g].length-2)):o[g].charAt(o[g].length-1)==="}"&&(m=o[g].substring(o[g].indexOf("~{")+1,o[g].length-2),o[g].substring(o[g].indexOf("~{")+1,o[g].indexOf("}",o[g].indexOf("~{"))).split("~").length===2&&(f=m,m=null)),u=o[g].split(e.get("METADATA_SEP"
)),l={},l.IsCalculated=u[1]!==undefined?u[1]:"",l.CalExpr=u[2]!==undefined?u[2]:"",l.ColName=u[3]!==undefined?u[3]:"",l.ForceActive=u[4]!==undefined?u[4]:"",l.ForceCase=u[5]!==undefined?u[5]:"",l.Hidden=u[6]!==undefined?u[6]:"",l.ImPostChg=u[7]!==undefined?u[7]:"",l.LinkName=u[8]!==undefined?u[8]:"",l.NoCopy=u[9]!==undefined?u[9]:"",l.PickListName=u[10]!==undefined?u[10]:"",l.PostDefault=u[11]!==undefined?u[11]:"",l.PreDefault=u[12]!==undefined?u[12]:"",l.Precision=u[13]!==undefined?u[13]:"",l.ReadOnly=u[14]!==undefined?n.IsTrue(u[14]):!1,l.Required=u[15]!==undefined?n.IsTrue(u[15]):!1,l.Scale=u[16]!==undefined?u[16]:"",l.OldTextLen=u[17]!==undefined?u[17]:"",l.DataType=u[18]!==undefined?u[18]:"",l.ValidationSpec=u[19]!==undefined?u[19]:"",l.DisableSearch=u[20]!==undefined?u[20]:"",l.DisableSort=u[21]!==undefined?u[21]:"",l.TransPickList=u[22]!==undefined?u[22]:"",l.userPropMap=null,l.pickMap=null;var O=u[u.length-1];if(n.IsEmpty(O))l.Join=!1;else{l.Join=!0;var M=[];M=O.split(":"),l.JoinInfo={},l.JoinInfo.JoinType=M[0],l.JoinInfo.JoinTable=M[1],M[0]==="X"&&(L.push(u[0]),A.push(u[3]))}if(m){m=m.substring(1,m.length-1);if(!SiebelApp.Utils.IsEmpty(m)){m=m.substring(1,m.length-1).split(e.get("METADATA_LST_SEP")),p=m.length,l.pickMap=[];for(y=0;y<p;y++)v=m[y].split(e.get("METADATA_SEP")),l.pickMap.push({FldName:v[0],IsConstrained:n.IsTrue(v[1]),NoClear:v[2],PFldName:v[3]})}}if(f){d=f.substring(1,f.length-1);if(!SiebelApp.Utils.IsEmpty(d)){d=d.substring(1,d.length-1).split(e.get("METADATA_LST_SEP")),p=d.length,l.userPropMap={};for(y=0;y<p;y++)v=d[y].split(e.get("METADATA_SEP")),v[0]=v[0].replace(/&verbar;/g,"|"),v[1]=v[1].replace(/&verbar;/g,"|"),l.userPropMap[v[0]]=v[1]}}a[u[0]]=l}r.Fields=a,r.InterFieldInfo={},r.InterFieldInfo.InterFieldArr=L,r.InterFieldInfo.InterFieldColName=A,this.SetBusCompDef(t[w].Name,r)}}function M(e,t){if(!t||!t.length)return!0;var n=t.length;for(var r=0;r<n;r++)if(t[r].PFldValue!==e[t[r].PFldName])return!1;return!0}var e=SiebelJS.Dependency("SiebelApp.Offlineconstants"),t=SiebelJS.Dependency("SiebelApp.Constants"),n=SiebelJS.Dependency("SiebelApp.Utils"),r=SiebelApp.S_App,i=e.get("METADATA_FLD_SEP"),s=SiebelApp.OfflineUtils,o=SiebelApp.AjaxRequestMgr,u=["MBCs","MLinks","MBOs","MBSs","MApplets","MBCFilters","MBOFilters","PickListInfo","MViews"],a=["SystemPreferences","SiebelApplicationParameters","ListOfValues","PickListGeneric","PickListHierarchical","PickListHierarchicalSubArea","MIcons"],f,l=null,c=null,h=null,p=null,d=!1,v=a[4]+"Index",m=a[3]+"Index",g=function(){var e;return g=function(){return e},g.prototype=this,e=new g,e.constructor=g,e};return f=new g,g.prototype.Load=function(r){var i,s,f,c;l=window.localStorage.getItem("Metadata"),l?l=JSON.parse(l):l={};var h=!0;n.IsEmpty(r)?c=u.concat(a):r?c=u:(c=a,h=!1),i=c.length;var p=function(e){s=e.retVal[0],f=e.retVal[1];switch(s){case u[0]:l[u[0]]={},O.call(this,f);break;case u[1]:l[u[1]]={},L.call(this,f);break;case u[2]:l[u[2]]={},k.call(this,f);break;case u[3]:l[u[3]]={},C.call(this,f);break;case u[4]:l[u[4]]={},N.call(this,f);break;case u[7]:l[u[7]]={},w.call(this,f);break;case u[8]:l[u[8]]={},A.call(this,f);break;case a[0]:l[a[0]]={},b.call(this,f);break;case a[1]:SiebelApp.S_App.Model.SetSiebelApplicationParameters(f);break;case a[2]:l[a[2]]={},y.call(this,f);break;case a[3]:l[a[3]]={},l[m]={},E.call(this,f);break;case a[4]:l[a[4]]={},l[v]={},x.call(this,f);break;case a[5]:l[a[5]]={},T.call(this,f);break;case a[6]:l[a[6]]={},S.call(this,f)}},d=[],g=-1,M=function(){var e=D;return function(){return[c[e]]}},_;for(var D=0;D<i;D++){if(l[c[D]])continue;_=M(),d[++g]={execute:SiebelApp.BrowserCacheMgr.GetMetadata,executeScope:SiebelApp.BrowserCacheMgr,postExecute:p,preExecute:_}}$.eachAsyncOp(this,d),$.callback(this,function(n){d=null,p=null,_=null;if(h){var r={};r[a[2]]=l[a[2]],window.localStorage.setItem("Metadata",JSON.stringify(r))}$.setReturnValue(n);var i={},s=e.get("SWE_POST_CHANGES"),u=e.get("WRITERECORD"),f=e.get("UNDORECORD"),c=e.get("POSITION_ON_ROW"),v=e.get("EDITRECORD"),m=e.get("GO_TO_NEXT_SET"),g=e.get("GO_TO_PREV_SET"),y=t.get("SWE_GET_PICK_INFO");i.PostChanges=[u,f,s,c,v,m,g,y],i.WriteRecord=[s,c,m,g],i.WriteRecord=[u,s,c,m,g],i[c]=[u,c,s],o.SetDepnRequestMap(i)})},g.prototype.EnumUserProps=function(e){var t=null;if(e.userPropMap){t=[];for(var n in e.userPropMap)n&&t.push(n);return t}return null},g.prototype.GetUserProperty=function(e,t){return t.userPropMap?t.userPropMap[e]:""},g.prototype.GetAllExpressions=function(e,t){var n=[],r={},i=[],s=[],o=[],a=[],f=[],c=[];i.push(r);var h=new SiebelApp.S_App.BusComp,p=function(e,t){e&&(n.push(e),r[SiebelApp.Query.PreProcessExpr(e)]=t)};for(var d in l[u[0]]){var v=l[u[0]][d],m="BC Name: "+v.Name,g,y;p(v.searchSpec,m+", ExprType: SearchSpec");if(v.Fields)for(var b in v.Fields)g=v.Fields[b],y=m+", Field: "+g.Name+", ExprType: ",p(b.CalExpr,y+"CalExpr"),p(b.PostDefault,y+"PostDefault"),p(b.PreDefault,y+"PreDefault"),p(b.ValidationSpec,y+"ValidationSpec");h.GetDefn=function(){return v},s=[],o=[],a=[],f=[],c=[],h.LoadUserPropN("On Field Update Set",s,o,a,f,c),n=n.concat(a).concat(f)}for(var w in l[u[4]]){var E=l[u[4]][w],S="Applet Name: "+E.Name;p(E.searchSpec,S+" ExprType: SearchSpec");if(E.userPropMap)for(var x in E.userPropMap)x.search("CanInvokeMethod:")!==-1&&p(E.userPropMap[x],S+" ExprType: Applet User Property")}return n=$.unique(n.filter(function(e){return!!e})),i.push(n),i},g.prototype.VerifyExpressions=function(){var e=SiebelApp.Metadata.GetAllExpressions(),t=e[1].length,n;for(var r=0;r<t;r++)SiebelApp.Query.Parse(e[1][r])},g.prototype.IsBoolean=function(e){return e==="F"||e==="T"?!0:!1},g.prototype.GetListOfValues=function(){return l[a[2]]},g.prototype.IsInitialized=function(){return d},g.prototype.SetInitialized=function(e){d=e},g.prototype.GetBusObjDef=function(t){if(!l[u[2]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),56,9,30,t]),new Error;return l[u[2]][t]},g.prototype.GetBusCompDef=function(t){return l[u[0]][t]?l[u[0]][t]:(s.CcfLogEvent([e.get
("LOG_EVT_CLIENT_SYS"),59,9,41,t]),null)},g.prototype.GetBCUnqKeys=function(e){var t=this.GetBusCompDef(e),r=null;return t&&!n.IsEmpty(t.userKey)&&(r=t.userKey),r},g.prototype.GetLinkDef=function(t){if(!l[u[1]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),56,9,31,t]),new Error;return l[u[1]][t]},g.prototype.GetAppletDef=function(t){if(!l[u[4]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),56,9,32,t]),new Error;return l[u[4]][t]},g.prototype.GetPickListDef=function(t){return l[u[7]][t]?l[u[7]][t]:(s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),56,9,33,t]),null)},g.prototype.GetPickListGeneric=function(t){var n=SiebelApp.S_App.Model.GetLanguage(),r,i,o,u,f;if(n==="ENU"){if(!l[a[3]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),58,9,39,t]),new Error;r=l[a[3]][t]}else{var c=t+"_"+n;if(!l[a[3]][c]&&!l[a[3]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),58,9,39,t]),new Error;if(!l[a[3]][c])r=l[a[3]][t];else{r=l[a[3]][c],o=l[a[3]][t],f=l[m][c];if(o){u=o.length;for(var h=0;h<u;h++)f.indexOf(o[h].Name)===-1&&r.push(o[h])}}}return r},g.prototype.GetMIcons=function(t){if(!l[a[6]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),56,9,34,t]),new Error;return l[a[6]][t]},g.prototype.GetPickListHierarchical=function(t,n,r){var i=SiebelApp.S_App.Model.GetLanguage(),o,u,f,c;if(i==="ENU"){if(!l[a[4]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),56,9,35,t]),new Error;o=l[a[4]][t]}else{var h=t+"_"+i;if(!l[a[4]][h]&&!l[a[4]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),56,9,35,t]),new Error;if(!l[a[4]][h])o=l[a[4]][t];else{o=l[a[4]][h];var p=o.slice(0);o=p,f=l[a[4]][t],c=l[v][h];if(f){g=f.length;for(var d=0;d<g;d++)c.indexOf(f[d].Name)===-1&&o.push(f[d])}}}var m=[],g=r.length,y="",d=0,b=0,w=[];for(d=0;d<o.length;d++)!n&&!g?m.push(o[d].Value):n===o[d].Parent&&(g?w.push(o[d]):m.push(o[d].Value));if(!g)return m;var E=[],S=w.length?w:o;for(d=0;d<r.length;d++)for(b=0;b<S.length;b++)r[d].PFldValue===S[b][r[d].PFldName]&&E.push(S[b].Value);return E},g.prototype.GetPickListHierarchicalSubArea=function(t,n,r,i){var o=SiebelApp.S_App.Model.GetLanguage(),u,f="";if(o==="ENU"){if(!l[a[5]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),56,9,39,t]),new Error;u=l[a[5]][t]}else{f=t+"_"+o;if(!l[a[5]][f]&&!l[a[5]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),56,9,39,t]),new Error;l[a[5]][f]?u=l[a[5]][f]:(u=l[a[5]][t],f="")}var c=[],h=u.length;for(var p=0;p<h;p++)r?n===u[p].ParentType&&r===u[p].Parent&&M(u[p],i)&&c.push(u[p].Value):M(u[p],i)&&c.push(u[p].Value);u=l[a[5]][t];if(u){h=u.length;for(p=0;p<h;p++)r&&n===u[p].ParentType&&r===u[p].Parent&&c.indexOf(u[p].Value)===-1&&M(u[p],i)&&c.push(u[p].Value)}return c},g.prototype.GetSystemPreference=function(t){return l[a[0]][t]?l[a[0]][t]:(s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),57,9,38,t]),"")},g.prototype.GetBusServiceDef=function(t){if(!l[u[3]][t])throw s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),56,9,37,t]),new Error;return l[u[3]][t]},g.prototype.SetBusServiceDef=function(e,t){l[u[3]][e]=t},g.prototype.SetSystemPreference=function(e,t){l[a[0]][e]=t},g.prototype.SetPickListDef=function(e,t){l[u[7]][e]=t},g.prototype.GetDMLogMsg=function(t){return c||(c=e.get("DMGlobalLogMsgArray")),!c||!c[t]?t:c[t]},g.prototype.GetDMClassName=function(t){return h||(h=e.get("DMGlobalClassArray")),!h||!h[t]?t:h[t]},g.prototype.GetDMMethodName=function(t){return p||(p=e.get("DMGlobalMethodArray")),!p||!p[t]?t:p[t]},g.prototype.SetPickListGeneric=function(e,t){var n=l[a[3]][e],r=l[m][e];n?(n.push(t),r.push(t.Name)):(n=[],r=[],n.push(t),r.push(t.Name)),l[a[3]][e]=n,l[m][e]=r},g.prototype.SetMIcons=function(e,t){var n=l[a[6]][e];n?n.push(t):(n=[],n.push(t)),l[a[6]][e]=n},g.prototype.SetPickListHierarchical=function(e,t){var n=l[a[4]][e],r=l[v][e];n?(n.push(t),r.push(t.Name)):(n=[],r=[],n.push(t),r.push(t.Name)),l[a[4]][e]=n,l[v][e]=r},g.prototype.SetPickListHierarchicalSubArea=function(e,t){var n=l[a[5]][e];n?n.push(t):(n=[],n.push(t)),l[a[5]][e]=n},g.prototype.SetAppletDef=function(e,t){l[u[4]][e]=t},g.prototype.SetBusObjDef=function(e,t){l[u[2]][e]=t},g.prototype.SetBusCompDef=function(e,t){l[u[0]][e]=t},g.prototype.GetLov=function(t){var n=SiebelApp.Metadata.GetListOfValues(),r=SiebelApp.S_App.Model.GetLanguage(),i=[],o=[],u,a="";if(r==="ENU")u=n[t];else{var a=t+"_"+r;u=n[a],u||(u=n[t],a="")}if(u){var f=u.length;for(var l=0;l<f;l++)i[l]=u[l].Value,o[l]=u[l].Name;if(a){var c=n[t];if(c&&o){f=c.length;for(l=0;l<f;l++)o.indexOf(c[l].Name)===-1&&i.push(c[l].Value)}}return i}s.CcfLogEvent([e.get("LOG_EVT_CLIENT_SYS"),58,9,40,t])},g.prototype.SetLinkDef=function(e,t){l[u[1]][e]=t},g.prototype.SetViewDef=function(e,t){l[u[8]][e]=t},g.prototype.GetViewDef=function(e){return l[u[8]][e]},f}()),typeof SiebelApp.S_App.Model=="undefined"&&(SiebelJS.Namespace("SiebelApp.Model"),define("siebel/offline/model",[],function(){return SiebelApp.S_App.Model=function(){function A(e,r){return r?n[e]?n[e]:null:t[e]?t[e]:null}function O(e,t){return SiebelApp.OfflineEvents[e][t]}function M(e){var t=e.objSVC,n=e.ipContext,r=e.ipObj,i=e.ipArgs,s=CCFMiscUtil_CreatePropSet(),o={err:!1,retVal:{Outputargs:s}};if(!t.Service||!SiebelApp[t.Service])return SiebelJS.Log("Service Function not found"),currRetValue={err:!1,retVal:{}},$.setReturnValue(currRetValue),currRetValue;if(!n||r[h]!==N&&r[h]!==T&&r[h]!==x)return SiebelJS.Log("No input context is provided or object type is not right."),currRetValue={err:!1,retVal:{}},$.setReturnValue(currRetValue),currRetValue;var u=[];contextVar=n.GetInterface();if(r[h]===N){var a,f,l,c;if(r[p]===SiebelApp.OfflineEvents[N].Application_Navigate){if(r[d]===y){f=i.GetProperty("DestViewName"),u.push(f),l=i.GetProperty("DestBusObjName"),u.push(l);try{var v=t[m].apply(contextVar,u);v instanceof SiebelApp.ContinueOperation?o.retVal.Outputargs.SetProperty("Invoked","false"):o.retVal.Outputargs.SetProperty("Invoked","true")}catch(g){SiebelJS.Log("Error ->  fail to call application pre_navigate event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue
(o),o}if(r[d]===b){try{t[m].apply(contextVar,u)}catch(g){SiebelJS.Log("Error ->  fail to call application pre_navigate event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}}else{if(r[p]!==SiebelApp.OfflineEvents[N].Application_InvokeMethod){if(r[p]===SiebelApp.OfflineEvents[N].Application_Start&&r[d]===y){c=i.GetProperty("commandline"),u.push(c);try{t[m].apply(contextVar,u)}catch(g){SiebelJS.Log("Error ->  fail to call application pre_navigate event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}if(r[p]===SiebelApp.OfflineEvents[N].loadevent&&r[d]===b){try{t[m].apply(contextVar,u)}catch(g){SiebelJS.Log("Error ->  fail to call application load event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}return SiebelJS.Log("Service Function not found for Application event: "+r[p]),$.setReturnValue(o),o}a=i.GetProperty("methodName"),u.push(a);if(r[d]===y){try{var v=t[m].apply(contextVar,u);v instanceof SiebelApp.ContinueOperation?o.retVal.Outputargs.SetProperty("Invoked","false"):o.retVal.Outputargs.SetProperty("Invoked","true")}catch(g){SiebelJS.Log("Error ->  fail to call application pre_navigate event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}if(r[d]===b){try{var v=t[m].apply(contextVar,u);v==="TRUE"}catch(g){SiebelJS.Log("Error ->  fail to call application pre_navigate event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}}}else if(r[h]===T){var a,w={CanInvoke:!1};if(r[p]!==SiebelApp.OfflineEvents[T].WebApplet_InvokeMethod){if(r[p]===SiebelApp.OfflineEvents[T].WebApplet_Load&&r[d]===b){try{t[m].apply(contextVar,u)}catch(g){SiebelJS.Log("Error ->  fail to call applet post_load event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}if(r[p]===SiebelApp.OfflineEvents[T].WebApplet_PreCanInvokeMethod&&r[d]===y){MethodName=i.GetProperty("MethodName"),u.push(MethodName),u.push(w);try{var v=t[m].apply(contextVar,u);v instanceof SiebelApp.ContinueOperation?o.retVal.Outputargs.SetProperty("Invoked","false"):o.retVal.Outputargs.SetProperty("Invoked","true"),o.retVal.Outputargs.SetProperty("RetVal",w.CanInvoke),w.CanInvoke==="TRUE"?o.retVal.Outputargs.SetProperty("RetVal","true"):o.retVal.Outputargs.SetProperty("RetVal","false")}catch(g){SiebelJS.Log("Error ->  fail to call applet PreCanInvokeMethod event  :"+g.message),SiebelJS.Log(g),o.err=!0}return o}if(r[p]===SiebelApp.OfflineEvents[T].loadevent&&r[d]===b){try{t[m].apply(contextVar,u)}catch(g){SiebelJS.Log("Error ->  fail to call applet load event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}return SiebelJS.Log("Service Function not found for WebApplet"+r[p]),$.setReturnValue(o),o}a=i.GetProperty("MethodName"),u.push(a);if(r[d]===y){try{var v=t[m].apply(contextVar,u);v instanceof SiebelApp.ContinueOperation?o.retVal.Outputargs.SetProperty("Invoked","false"):o.retVal.Outputargs.SetProperty("Invoked","true")}catch(g){SiebelJS.Log("Error ->  fail to call applet pre_InovkeMethod event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}if(r[d]===b){try{t[m].apply(contextVar,u)}catch(g){SiebelJS.Log("Error ->  fail to call call applet post_InovkeMethod event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}}else if(r[h]===x){var a,E,S;if(r[p]!==SiebelApp.OfflineEvents[x].BusComp_PreAssociate&&r[p]!==SiebelApp.OfflineEvents[x].BusComp_Associate&&(r[p]!==SiebelApp.OfflineEvents[x].BusComp_ChangeRecord||r[d]!==b)&&r[p]!==SiebelApp.OfflineEvents[x].BusComp_CopyRecord&&r[p]!==SiebelApp.OfflineEvents[x].BusComp_PreCopyRecord&&r[p]!==SiebelApp.OfflineEvents[x].BusComp_DeleteRecord&&r[p]!==SiebelApp.OfflineEvents[x].BusComp_PreDeleteRecord)if(r[p]===SiebelApp.OfflineEvents[x].BusComp_PreInvokeMethod||r[p]===SiebelApp.OfflineEvents[x].BusComp_InvokeMethod)a=i.GetProperty("MethodName"),u.push(a);else if(r[p]!==SiebelApp.OfflineEvents[x].BusComp_NewRecord&&r[p]!==SiebelApp.OfflineEvents[x].BusComp_PreNewRecord)if(r[p]===SiebelApp.OfflineEvents[x].BusComp_PreGetFieldValue&&r[d]===y)E=i.GetProperty("FieldName"),u.push(E),S=i.GetProperty("inputParam2"),u.push(S);else if(r[p]===SiebelApp.OfflineEvents[x].BusComp_PreSetFieldValue&&r[d]===y)E=i.GetProperty("inputParam1"),u.push(E),S=i.GetProperty("inputParam2"),u.push(S);else if(r[p]!==SiebelApp.OfflineEvents[x].BusComp_Query&&r[p]!==SiebelApp.OfflineEvents[x].BusComp_PreQuery)if(r[p]===SiebelApp.OfflineEvents[x].BusComp_SetFieldValue&&r[d]===b)E=i.GetProperty("inputParam1"),u.push(E);else if(r[p]!==SiebelApp.OfflineEvents[x].BusComp_WriteRecord&&r[p]!==SiebelApp.OfflineEvents[x].BusComp_PreWriteRecord){if(r[p]===SiebelApp.OfflineEvents[x].loadevent&&r[d]===b){try{t[m].apply(contextVar,u)}catch(g){SiebelJS.Log("Error ->  fail to call buscomp load event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}return SiebelJS.Log("Service Function not found for BusComp:"+r[p]),$.setReturnValue({err:!1,retVal:{}}),{err:!1,retVal:{}}}try{var v;v=t[m].apply(contextVar,u),r[d]===y&&(v instanceof SiebelApp.ContinueOperation?o.retVal.Outputargs.SetProperty("Invoked","false"):o.retVal.Outputargs.SetProperty("Invoked","true"))}catch(g){SiebelJS.Log("Error ->  fail to call business component  event  :"+g.message),SiebelJS.Log(g),o.err=!0}return $.setReturnValue(o),o}}function _(e){var t=e.objWName,n=e.objWOName,r=e.ipContext,i=e.ipObj,s=e.bApp,o=e.ipArgs;if(t||n){var u=t&&n?!0:!1,a=t?t:n,f=a[d]===y?!0:!1;!f&&u&&(a=n);var l;s?l=D.call(this,r,i,a,o):(SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(i,r,!0,a),l=SiebelApp.OfflineAppMgr.GetCurrentRetVal());var c,h=l?l.retVal:null;if(h){var p=h.Outputargs;return f&&p&&p.GetPropertyAsStr("Invoked")==="true"?l:u?(a=f?n:t,s?D.call(this,r,i,a,o):(SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(i,r,!0,a),c=SiebelApp.OfflineAppMgr.GetCurrentRetVal(),c)):l}return u?(a=f?n:t,s?D.call(this,r,i,a,o):(SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(i,r,!0,a),c=SiebelApp.OfflineAppMgr.GetCurrentRetVal
(),c)):l}}function D(e,t,n,r){var i=new SiebelApp[n.Service];if(e&&(t[h]===T||t[h]===x)){if(i.constructor.superclass){var s=e.GetInterface();i.SetContext(s)}this.SetIsInterFace(1);var o=i[n[m]](r);o||(o={err:!1}),this.SetIsInterFace(-1);var u=o.err;o.Outputargs=o.retVal;var a={err:u,retVal:o};return a}}var e={},t={},n={},r=[],i=["Id","Created","Created By","Updated","Updated By","Mod Id","Conflict Id"],s=SiebelApp.S_App,o=SiebelApp.Metadata,u=SiebelApp.Offlineconstants,a=SiebelApp.Constants,f=SiebelJS.Dependency("SiebelApp.Utils"),l=SiebelApp.OfflineUtils,c=u.get("DOUIREG_OBJ_NAME"),h=u.get("DOUIREG_OBJ_TYPE"),p=u.get("DOUIREG_OBJ_MTHD"),d=u.get("DOUIREG_EXT_TYPE"),v=u.get("DOUIREG_SRVC_NAME"),m=u.get("DOUIREG_SRVC_MTDH"),g=u.get("DOUIREG_EXT_TYPEOVERRIDE"),y=u.get("DOUIREG_EXT_TYPEPRE"),b=u.get("DOUIREG_EXT_TYPEPOST"),w=u.get("STAND_ALONE_INST"),E=a.get("SWE_PROP_NAME"),S=u.get("DOUIREG_EXT_CONTEXT"),x=u.get("DOUIREG_OBJ_TYPEBUSCOMP"),T=u.get("DOUIREG_OBJ_TYPEAPPLET"),N=u.get("DOUIREG_OBJ_TYPEAPPLICATION"),C=0,k,L=function(){var e;return this.GetServiceMap=function(){return t},L=function(){return e},L.prototype=this,e=new L,e.constructor=L,e};return k=new L,L.prototype.IsMetadataInitialized=function(){if(!o.IsInitialized()){var e=SiebelApp.OfflineAppSettings;if(e.GetMode()&&!e.GetUpSyncStatus()){var t=JSON.parse(window.localStorage.getItem("StringCache"));t&&SiebelApp.S_App.SetStringCache(t)}var n=SiebelApp.S_App.NavCtrlMgr.GetPDQPM().Get("GetContainer");n&&$("[name="+n+"]").remove(),SiebelApp.BrowserCacheMgr.GetInMemDB(),$.callback(this,function(){o.Load(),$.callback(this,function(){o.SetInitialized(!0)})})}},L.prototype.GetPickListDef=function(e){return o.GetPickListDef(e)},L.prototype.GetBusObj=function(e){var t,n=SiebelApp.S_App.Model.GetIsInterFace();return n<0||n===0?(t=this.GetBusObjDef(e),t):(t=this.GetBusObjDef(e),t.GetInterface())},L.prototype.GetDMLogMsg=function(e){return SiebelApp.Metadata.GetDMLogMsg(e)},L.prototype.GetDMMethodName=function(e){return SiebelApp.Metadata.GetDMMethodName(e)},L.prototype.GetDMClassName=function(e){return SiebelApp.Metadata.GetDMClassName(e)},L.prototype.GetSystemPreference=function(e){return SiebelApp.Metadata.GetSystemPreference(e)},L.prototype.SetBOArray=function(e){r.push(e)},L.prototype.GetBOArray=function(){return r},L.prototype.GetBusObjDef=function(e){var t,n,i=CCFMiscUtil_CreatePropSet(),u=o.GetBusObjDef(e);i.SetType(a.get("SWE_PST_BUSOBJ_INFO"));var f=s.LookupSCIndex(e);f!==-1?n=f:(s.GetStringCache().push(e),n=s.GetStringCache().length-1),i.SetPropertyStr(E,e),i.SetProperty(w,"true");if(u)for(var l in u)if(l){var c=CCFMiscUtil_CreatePropSet(),h=CCFMiscUtil_CreatePropSet();c.SetType(a.get("SWE_PST_NEW_BUSCOMP")),h.SetType(a.get("SWE_PST_BUSCOMP_INFO")),h.SetValue(l),h.SetProperty(a.get("SWE_PROP_NAME"),l),c.AddChild(h),i.AddChild(c)}return t=new s.BusObj,t.ProcessObjectInfo(i),r.push(t),t},L.prototype.GetLovNameVal=function(e,t){var n=SiebelApp.Metadata.GetListOfValues(),r,i="";if(f.IsEmpty(e))return i;var s=function(t){var n;if(t){var r=t.length;for(var i=0;i<r;i++){n=t[i];if(n.Name.toUpperCase()===e.toUpperCase())return n.Value}}return""},o=this.GetLanguage(),a="";return o==="ENU"?r=n[t]:(a=t+"_"+o,r=n[a],r||(r=n[t],a="")),i=s.call(this,r),!i&&a&&(l.CcfLogEvent([u.get("LOG_EVT_CLIENT_SYS"),60,10,42,e,a]),i=s.call(this,n[t])),i||l.CcfLogEvent([u.get("LOG_EVT_CLIENT_SYS"),60,10,42,e,t]),i},L.prototype.GetLovValName=function(e,t){var n=SiebelApp.Metadata.GetListOfValues(),r,i="",s=function(t){if(t){var n=t.length;for(var r=0;r<n;r++)if(t[r].Value.toUpperCase()===e.toUpperCase())return t[r].Name}return""},o=this.GetLanguage(),a="";return o==="ENU"?r=n[t]:(a=t+"_"+o,r=n[a],r||(r=n[t],a="")),i=s.call(this,r),!i&&a&&(l.CcfLogEvent([u.get("LOG_EVT_CLIENT_SYS"),61,10,43,e,a]),i=s.call(this,n[t])),i||l.CcfLogEvent([u.get("LOG_EVT_CLIENT_SYS"),61,10,43,e,t]),i},L.prototype.GetSystemFields=function(){return i},L.prototype.ResetDyncPS=function(){e={}},L.prototype.GetDyncPS=function(t,n){return n?e:e[t]},L.prototype.SetDyncPS=function(t,n,r){r||(r=t.length);for(var i=0;i<r;i++)e[t[i]]=n[i]},L.prototype.RegistryLookup=function(e){var t,n="",r="",i="",s,o=!1,u=[],a;if(e[p]&&e[h])n=e[h],r=e[p],i=e[d]?e[d]:"";else if(e[p]&&e[d])t="",n="",r=e[p],i=e[d];else{if(!e[c])return null;i=null,o=!0}t=e[c]?e[c]:"";if(!o){s=t+n+r+i,a=A.call(this,s,!0),u.push(a),a=A.call(this,s),u.push(a);var f=n+r+i;return f!==s&&(a=A.call(this,f),a&&u.push(a)),u}return s=t,a=A.call(this,s,!0),u.push(a),a=A.call(this,s),u.push(a),u},L.prototype.ServiceRegistry=function(e){var r={},i,s,o="",a="",f="",l="",g="",y=!1;if(e[p]&&e[h]&&e[d])g=e[m],o=e[h],a=e[p],f=e[d];else if(e[p]&&e[v]&&e[m]&&e[d])g=e[m],o="",a=e[p],f=e[d],e[c]="";else{if(!e[v]||!e[c])return!1;f=null,y=!0}return s=e[c]?e[c]:"",l=e[v],y?(i=s,r[v]=l):(e[u.get("DOUIREG_SRV_SCRIPT")]&&(a=O(o,a),a||SiebelJS.Log("Warning: The event to be registered has no corresponding offline event.Service:"+l+",Method"+g)),i=s+o+a+f,r[v]=l,r[m]=g,r[d]=f),e[u.get("DOUIREG_SRV_SCRIPT")]?n[i]?n[i][0]=r:n[i]=[r]:t[i]?t[i][0]=r:t[i]=[r],!0},L.prototype.DeRegisterEvent=function(e){if(e[u.get("DOUIREG_SRV_SCRIPT")]){var t=e[c],r=e[h],i,s;if(r===u.get("DOUIREG_OBJ_TYPEAPPLET")||r===u.get("DOUIREG_OBJ_TYPEBUSCOMP"))for(i in SiebelApp.OfflineEvents[r])SiebelApp.OfflineEvents[r].hasOwnProperty(i)&&(s=SiebelApp.OfflineEvents[r][i],s!=="loadevent"&&(objNameTypeKey=t+r+s+b,n[objNameTypeKey]&&delete n[objNameTypeKey],objNameTypeKey=t+r+s+y,n[objNameTypeKey]&&delete n[objNameTypeKey]))}},L.prototype.InvokeRegisteredSvc=function(e,t,n){var r={err:!1},i=this.RegistryLookup(e),s={},o=null,u=null,a=null,f=null,l=null,c;if(!i)return r={err:!1,retVal:s},r;var p=i.length,v=i[0],g=i[1],b=p==3?i[2]:null;if(!(v||g||b))return r={err:!1,retVal:s},$.setReturnValue(r),r;var w=null,E=null,N=null;w=[],E=[],N=[],v&&(l=v[0],w.push(v[0])),g&&(a=g[0],E.push(a),g.length>1&&(o=g[1],N.push(o))),b&&(f=b[0],f&&E.push(f),b&&b.length>1&&(u=b[1],N.push(u)));if(!l&&!o&&!u&&!a&&!f)return r=
{err:!1,retVal:s},$.setReturnValue(r),r;if(n)return this.InvokeSyncRegisteredSvc(e,t,E,N,w);var C={},k,L,A,O,_;e[S]&&(C=e[S]);var D=function(){if(a||f){var t=a&&f?!0:!1;k=a?a:f,L=k[d]===y?!0:!1,!L&&t&&(k=f),r={err:!1},P.call(this,k);var n=r;r={err:!1};var i=n.retVal;if(i){var s=i.Outputargs;if(L&&s&&s.GetPropertyAsStr("Invoked")==="true")return r=n,r;if(!t)return r=n,r;k=L?f:a,P.call(this,k)}else t?(k=L?f:a,P.call(this,k)):r=n;return P=null,H=null,r}},P=function(i){if(!i.Service||!SiebelApp[i.Service])return SiebelJS.Log("Service Function not found"),r={err:!1,retVal:{}},r;O=new SiebelApp[i.Service],C&&(e[h]===T||e[h]===x)&&O.constructor.superclass&&(_=C.GetInterface(),O.SetContext(_)),this.SetIsInterFace(1),r=O[i[m]](t),r||(r={err:!1}),H.call(this,r)},H=function(e){var t=e.err,n=CCFMiscUtil_CreatePropSet();n.SetProperty("Invoked","false");var s={err:t,retVal:{Outputargs:n}};return e.retVal&&(e.retVal instanceof JSSPropertySet?e.Outputargs=e.retVal:e.retVal.Outputargs&&(e.Outputargs=e.retVal.Outputargs),s={err:t,retVal:e}),this.SetIsInterFace(-1),O&&(O.SetContext(null),O=null),i=null,_=null,r=s,r},B,j;if(e[d]!==y){if(a||f){D.call(this),s=r;if(s.err)return D=null,H=null,r=s,$.setReturnValue(r),r;r=s}if(o||u){A=o&&u?!0:!1;var q=u?u:o;r=SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(e,t,n,q);var R=r;r={err:!1},A&&(r=SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(e,t,n,o));var U=r;s=A?U:R;if(s.err)return D=null,H=null,r=s,$.setReturnValue(r),r;r=s}if(l){var I={};I.objSVC=l,I.ipContext=C,I.ipObj=e,I.ipArgs=t,SiebelApp.S_App.Model.SetIsInterFace(1),s=M.call(this,I),SiebelApp.S_App.Model.SetIsInterFace(-1),r=s}return $.setReturnValue(r),r}var F=!0;if(l){var I={};I.objSVC=l,I.ipContext=C,I.ipObj=e,I.ipArgs=t,SiebelApp.S_App.Model.SetIsInterFace(1),r=M.call(this,I),SiebelApp.S_App.Model.SetIsInterFace(-1),j=r.retVal;if(j){B=j.Outputargs;if(B&&B.GetPropertyAsStr("Invoked")==="true")return $.setReturnValue(r),D=null,H=null,r}}if(o){r=SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(e,t,n,o),j=r.retVal;if(j){B=j.Outputargs;if(B&&B.GetPropertyAsStr("Invoked")==="true")return $.setReturnValue(r),D=null,H=null,r}}if(u){r=SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(e,t,n,u),j=r.retVal;if(j){B=j.Outputargs;if(B&&B.GetPropertyAsStr("Invoked")==="true")return $.setReturnValue(r),D=null,H=null,r}}if(a||f){D.call(this),j=r.retVal;if(j){B=j.Outputargs;if(B&&B.GetPropertyAsStr("Invoked")==="true")return $.setReturnValue(r),D=null,H=null,r}}return $.setReturnValue(r),r},L.prototype.InvokeSyncRegisteredSvc=function(e,t,n,r,i){var s=null,o=null,u=null,a=null,f=null,l=0;i&&(l=i.length,l&&(f=i[0])),n&&(l=n.length,l&&(u=n[0],l>1&&(a=n[1]))),r&&(l=r.length,l&&(s=r[0],l>1&&(o=r[1])));var c={};e[S]&&(c=e[S]);var h={};h.ipContext=c,h.ipArgs=t,h.bApp=!0,h.ipObj=e;var p=t[d]===y?!0:!1;if(p){if(f){var v={};v.objSVC=f,v.ipContext=c,v.ipObj=e,v.ipArgs=t,SiebelApp.S_App.Model.SetIsInterFace(1);var m=M.call(this,v);SiebelApp.S_App.Model.SetIsInterFace(-1);var g=m?m.retVal:null;if(g){var b=g.Outputargs;if(b&&b.GetPropertyAsStr("Invoked")==="true")return m}}if(s||o){h.objWName=s,h.objWOName=o,h.bApp=!1;var w=_.call(this,h),E=w?w.retVal:null;if(E){var x=E.Outputargs;if(x&&x.GetPropertyAsStr("Invoked")==="true")return w}}if(u||a){h.objWName=u,h.objWOName=a,h.bApp=!0;var T=_.call(this,h),N=T?T.retVal:null;if(N){var C=N.Outputargs;if(C&&C.GetPropertyAsStr("Invoked")==="true")return T}}}else{if(u||a){h.objWName=u,h.objWOName=a;var T=_.call(this,h);if(T.err)return T}if(s||o){h.objWName=s,h.objWOName=o,h.bApp=!1;var w=_.call(this,h);if(w.err)return w}if(f){var v={};v.objSVC=f,v.ipContext=c,v.ipObj=e,v.ipArgs=t,SiebelApp.S_App.Model.SetIsInterFace(1);var m=M.call(this,v);return SiebelApp.S_App.Model.SetIsInterFace(-1),m}}},L.prototype.EndSetupView=function(e,t,n,r,i,s){var o={err:!1};return e.EndActivationBlock(),f.IsEmpty(r)||(o=e.DrillDownByField(t,n,r,i,s)),o},L.prototype.GetLoginName=function(){return window.localStorage.getItem("UID")},L.prototype.SetSiebelApplicationParameters=function(e){var t=e[0];f.IsEmpty(this.GetLoginName())&&window.localStorage.setItem("UID",t.LoginName),this.GetLoginId=function(){return t.LoginId},this.GetPositionId=function(){return t.PositionId},this.GetPositionName=function(){return t.PositionName},this.GetOrganizationId=function(){return t.OrganizationId},this.GetOrganizationName=function(){return t.OrganizationName},this.GetLanguage=function(){return t.Language},this.GetCurrencyCode=function(){return t.CurrencyCode},this.GetDivisionId=function(){return t.DivisionId},this.GetDivisionName=function(){return t.DivisionName},this.GetTimeZone=function(){return t.TimeZone};var n=localStorage.getItem(u.get("SWE_PST_SCROLL_FACTOR"));n&&(n=parseInt(n)),this.GetScrollScaleFactor=function(){return n}},L.prototype.SetIsInterFace=function(e){C+=e},L.prototype.GetIsInterFace=function(){return C},L.prototype.ReSetIsInterFace=function(){C=0},L.prototype.ReleaseBO=function(e){e.EndLife()},L.prototype.GetViewMode=function(e){var t=SiebelApp.Metadata.GetViewDef(e);return t.Visibility},L.prototype.GetViewDef=function(e){return SiebelApp.Metadata.GetViewDef(e)},L.prototype.GetLastSyncTS=function(){return window.localStorage?window.localStorage.getItem("TS"):""},k}(),"SiebelApp.Model"})),typeof SiebelApp.S_App.ModelInterface=="undefined"&&(SiebelJS.Namespace("SiebelApp.S_App.ModelInterface"),define("siebel/offline/modelinterface",["siebel/offline/model"],function(){return SiebelApp.S_App.ModelInterface=function(){var e={},t=SiebelApp.Offlineconstants,n=SiebelApp.Constants,r=SiebelJS.Dependency("SiebelApp.Utils"),i=t.get("DOUIREG_OBJ_NAME"),s=t.get("DOUIREG_OBJ_TYPE"),o=t.get("DOUIREG_OBJ_MTHD"),u=t.get("DOUIREG_EXT_TYPE"),a=t.get("DOUIREG_SRVC_NAME"),f=t.get("DOUIREG_SRVC_MTDH"),l=t.get("DOUIREG_EXT_TYPEOVERRIDE"),c=t.get("DOUIREG_EXT_TYPEPRE"),h=t.get("DOUIREG_EXT_TYPEPOST"),p=t.get("STAND_ALONE_INST"),d=n.get("SWE_PROP_NAME"),v=t.get("DOUIREG_EXT_CONTEXT"),m=t.get("DOUIREG_OBJ_TYPEBUSCOMP"),g=t.get("DOUIREG_OBJ_TYPEAPPLET"
),y=[];y.CanInvokeMethod="DoCanInvokeMethod",y.InvokeMethod="DoInvokeMethod",y.ExecuteQuery="Execute",y.FirstRecord="Home",y.Associate="AddAssociation",y.GetFieldValue="FieldValue";var b,w=function(){var e;return w=function(){return e},w.prototype=this,e=new w,e.constructor=w,e};b=new w;for(var E in SiebelApp.S_App.Model.constructor.prototype)(function(){var e=E;typeof SiebelApp.S_App.Model.constructor.prototype[e]=="function"&&(w.prototype[e]=function(){return SiebelApp.S_App.Model.constructor.prototype[e].apply(SiebelApp.S_App.Model,arguments)})})();return w.prototype.ServiceRegistry=function(e){var t={},n,r,l="",c="",h="",p="",d="",v=!1;if(e[s]&&e[o]&&e[u])l=e[s],c=e[o],y[c]&&(e[s]==="Applet"||e[s]==="BusComp")&&(c=y[c]),h=e[u],d=e[f];else if(e[a]&&e[i])h=null,v=!0;else{if(!(e[a]&&e[o]&&e[f]&&e[u]))return!1;l="",h=e[u],c=e[o],d=e[f],e[i]=""}return r=e[i]?e[i]:"",p=e[a],v?(n=r,t[a]=p):(n=r+l+c+h,t[a]=p,t[f]=d,t[u]=h),SiebelApp.S_App.Model.GetServiceMap()[n]?SiebelApp.S_App.Model.GetServiceMap()[n].push(t):SiebelApp.S_App.Model.GetServiceMap()[n]=[null,t],!0},w.prototype.InvokeRegisteredSvc=function(e,t,n,r){var i={err:!1},o,u=null,a,l,c={};e[v]&&(c=e[v]);var h=function(e){a=e.err,e.Outputargs=e.retVal,SiebelApp.S_App.Model.SetIsInterFace(-1),u&&u.SetContext(null),u=null,r=null,i={err:a,retVal:e};if(n)return e};if(r&&SiebelApp[r.Service]){u=new SiebelApp[r.Service],c&&(e[s]===g||e[s]===m)&&u.constructor.superclass&&(l=c.GetInterface(),u.SetContext(l));if(typeof u[r[f]]=="function")SiebelApp.S_App.Model.SetIsInterFace(1),i=u[r[f]](t),i||(i={err:!1}),h.call(this,i);else{SiebelApp.S_App.Model.ReSetIsInterFace(),SiebelJS.Log("Service Function not found"),i={err:!1};if(n)return{err:!1}}}else{i={err:!1},SiebelJS.Log("Service Function not found");if(n)return{err:!1}}return i},b}(),"SiebelApp.ModelInterface"}));var outils=SiebelApp.OfflineUtils,offlineconstants=SiebelApp.Offlineconstants,clientSystem=offlineconstants.get("LOG_EVT_CLIENT_SYS");typeof SiebelApp.ServiceModel=="undefined"&&(SiebelJS.Namespace("SiebelApp.ServiceModel"),define("siebel/offline/servicemodel",[],function(){return SiebelApp.ServiceModel=function(){function r(){}var e=SiebelApp.S_App,t=null,n="";return r.prototype.SetName=function(e){n=e},r.prototype.GetName=function(e){return n},r.prototype.Invoke=function(t,n,r){var i={err:!1},s;e.GetTimer()&&e.GetTimer().StartTime("ServiceModel.prototype.InvokeMethod "),SiebelJS.Log("ServiceModel: Invoked ServiceModel.prototype.Invoke");if(!t)return i={err:!1,retVal:!1},$.setReturnValue(i),i;var o=!1,u=function(e,r){e&&(o=e.retVal),o?(SiebelApp.S_App.Model.SetIsInterFace(1),e=i=this.InvokeMethod(t,n,r),i||(i=SiebelApp.OfflineAppMgr.GetCurrentRetVal()),$.setReturnValue(i),SiebelApp.S_App.Model.SetIsInterFace(-1)):i={err:!1,retVal:!1}};return typeof this.CanInvokeMethod=="function"?(SiebelApp.S_App.Model.SetIsInterFace(1),i=this.CanInvokeMethod(t),i||(i=SiebelApp.OfflineAppMgr.GetCurrentRetVal()),SiebelApp.S_App.Model.SetIsInterFace(-1),u.call(this,i,r)):u.call(this,null,r),e.GetTimer()&&e.GetTimer().EndTime("ServiceModel.prototype.Invoke "),i},r.prototype.SetContext=function(e){t=e},r.prototype.GetContext=function(){return t},r.prototype.CanInvokeMethod=function(e){var t={err:!0,retVal:!1},n;return t},r.prototype.InvokeMethod=function(e,t,n){var r={err:!1},i;return e?(r={err:!1,retVal:n},r):(r={err:!0,retVal:!1},r)},r}(),"SiebelApp.ServiceModel"})),typeof SiebelApp.ProxyServiceModel=="undefined"&&(SiebelJS.Namespace("SiebelApp.ProxyServiceModel"),define("siebel/offline/proxyservicemodel",["siebel/offline/servicemodel"],function(){return SiebelApp.ProxyServiceModel=function(){function t(){SiebelApp.ProxyServiceModel.superclass.constructor.call(this),this.m_serviceArray=null,this.m_serviceObjInstArr=[]}var e=SiebelApp.S_App;return SiebelJS.Extend(t,SiebelApp.ServiceModel),t.prototype.Invoke=function(t,n){var r=CCFMiscUtil_CreatePropSet(),i={err:!1,retVal:r},s;e.GetTimer()&&e.GetTimer().StartTime("ProxyServiceModel.prototype.Invoke  "),SiebelJS.Log("ProxyServiceModel: Invoked ProxyServiceModel.prototype.Invoke ");if(this.m_serviceObjInstArr)for(var o=0;o<this.m_serviceObjInstArr.length;o++){var u=this.m_serviceObjInstArr[o];s=i=u.Invoke(t,n,r),i||(s=i=SiebelApp.OfflineAppMgr.GetCurrentRetVal()),s.err||!s.retVal}return e.GetTimer()&&e.GetTimer().EndTime("ProxyServiceModel.prototype.Invoke  "),i},t.prototype.SetServiceArray=function(e){this.m_serviceArray=e,this.m_serviceObjInstArr=[];var t;for(var n=0;n<this.m_serviceArray.length;n++){var r=this.m_serviceArray[n];r&&(r.length>1?t=r[1]:t=r[0],t&&typeof SiebelApp[t.Service]=="function"&&(serviceObjInstance=new SiebelApp[t.Service],this.m_serviceObjInstArr.push(serviceObjInstance)))}},t}(),"SiebelApp.ProxyServiceModel"})),typeof SiebelApp.ServerServiceModel=="undefined"&&(SiebelJS.Namespace("SiebelApp.ServerServiceModel"),define("siebel/offline/serverservicemodel",["siebel/offline/servicemodel"],function(){return SiebelApp.ServerServiceModel=function(){function t(){SiebelApp.ServerServiceModel.superclass.constructor.call(this)}var e=SiebelApp.S_App;return SiebelJS.Extend(t,SiebelApp.ServiceModel),t.prototype.Invoke=function(t,n,r){var i,s;return e.GetTimer()&&e.GetTimer().StartTime("ServerServiceModel.prototype.Invoke  "),SiebelJS.Log("ServerServiceModel: Invoked ServerServiceModel.prototype.Invoke "),s=InvokeServerScript.call(this,t,n,r),i=s,e.GetTimer()&&e.GetTimer().EndTime("ServerServiceModel.prototype.Invoke  "),i},InvokeServerScript=function(e,t,n){var r,i,s;if(!e)return r={err:!1,retVal:!1},r;if(typeof this.Service_PreCanInvokeMethod=="function"){var r,s,i={err:!1,retVal:!1},o={CanInvoke:"TRUE"};try{SiebelApp.S_App.Model.SetIsInterFace(1),s=this.Service_PreCanInvokeMethod(e,o),SiebelApp.S_App.Model.SetIsInterFace(-1),s instanceof SiebelApp.CancelOperation?o.CanInvoke==="TRUE"?i.retVal=!0:i.retVal=!1:i.retVal=!0}catch(u){SiebelJS.Log("Error ->  fail to call application pre_navigate event  :"+u.message),SiebelJS.Log(u),i.err=!0,SiebelApp.S_App
.Model.SetIsInterFace(-1)}if(i.err||!i.retVal)return r=i,r}if(typeof this.Service_PreInvokeMethod=="function"){try{SiebelApp.S_App.Model.SetIsInterFace(1),s=this.Service_PreInvokeMethod(e,t,n),SiebelApp.S_App.Model.SetIsInterFace(-1);if(s instanceof SiebelApp.CancelOperation)return r={err:!1,retVal:n},r}catch(u){SiebelJS.Log("Error ->  fail to call application pre_navigate event  :"+u.message),SiebelJS.Log(u),i.err=!0,SiebelApp.S_App.Model.SetIsInterFace(-1)}if(i.err)return r=i,r}if(typeof this.Service_InvokeMethod=="function"){SiebelApp.S_App.Model.SetIsInterFace(1),i=this.Service_InvokeMethod(e,t,n),SiebelApp.S_App.Model.SetIsInterFace(-1);if(i.retVal instanceof SiebelApp.CancelOperation)return r={err:!1,retVal:n},r}return r={err:!1,retVal:n},r},t}(),"SiebelApp.ServerServiceModel"})),typeof SiebelApp.DummyServiceModel=="undefined"&&(SiebelJS.Namespace("SiebelApp.DummyServiceModel"),define("siebel/offline/dummyservicemodel",["siebel/offline/servicemodel"],function(){return SiebelApp.DummyServiceModel=function(){function t(){SiebelApp.DummyServiceModel.superclass.constructor.call(this),this.m_serviceArray=null,this.m_serviceObjInstArr=[]}var e=SiebelApp.S_App;return SiebelJS.Extend(t,SiebelApp.ServiceModel),t.prototype.Invoke=function(t,n){var r=CCFMiscUtil_CreatePropSet(),i={err:!1,retVal:r},s;return e.GetTimer()&&e.GetTimer().StartTime("DummyServiceModel.prototype.Invoke  "),SiebelJS.Log("DummyServiceModel: Invoked DummyServiceModel.prototype.Invoke "),e.GetTimer()&&e.GetTimer().EndTime("DummyServiceModel.prototype.Invoke  "),i},t}(),"SiebelApp.DummyServiceModel"})),typeof SiebelApp.S_App.OfflineBSInterface=="undefined"&&(SiebelJS.Namespace("SiebelApp.S_App.OfflineBSInterface"),SiebelApp.S_App.OfflineBSInterface=function(){function e(e){var t=e,n=this;for(var r in e)(function(){var i=r;return typeof e[i]=="function"&&!n[i]&&(n[i]=function(){return t.constructor.prototype[i]?t.constructor.prototype[i].apply(t,arguments):t[i].apply(t,arguments)}),n[i]})();this.GetOfflineBS=function(){return t},this.EndLife=function(){t=null,n=null}}return e.prototype.GetFirstProperty=function(){return alert('Server Script Business Service interface method "GetFirstProperty" is unsupported'),outils.CcfLogEvent([clientSystem,111,17,151,this.Name()]),""},e.prototype.GetNextProperty=function(){return alert('Server Script Business Service interface method "GetNextProperty" is unsupported'),outils.CcfLogEvent([clientSystem,111,17,152,this.Name()]),""},e.prototype.GetProperty=function(e){return alert('Server Script Business Service interface method "GetProperty" is unsupported'),outils.CcfLogEvent([clientSystem,111,17,153,this.Name()]),""},e.prototype.InvokeMethod=function(e,t,n){var r=this.GetOfflineBS().Invoke(e,t,n);return n=r.retVal,r},e.prototype.Name=function(){return this.GetOfflineBS().GetName()},e.prototype.PropertyExists=function(e){return alert('Server Script Business Service interface method "PropertyExists" is unsupported'),outils.CcfLogEvent([clientSystem,111,17,154,this.Name()]),0},e.prototype.RemoveProperty=function(e){alert('Server Script Business Service interface method "RemoveProperty" is unsupported'),outils.CcfLogEvent([clientSystem,111,17,155,this.Name()])},e.prototype.SetProperty=function(e,t){alert('Server Script Business Service interface method "SetProperty" is unsupported'),outils.CcfLogEvent([clientSystem,111,17,156,this.Name()])},e}()),SiebelApp.S_App.BCField&&function(){var e=SiebelApp.Utils,t=SiebelApp.Constants,n=SiebelApp.S_App.BCField,r=SiebelApp.S_App.BCField.prototype,i=SiebelApp.S_App.BCField;SiebelApp.S_App.BCField=function(){i.call(this);var e={},t=[],n=0;this.GetExtObj=function(){return e},this.SetExtObjProp=function(e,t){this.GetExtObj()[e]=t},this.GetExtObjProp=function(e){return this.GetExtObj().hasOwnProperty(e)||(this.GetExtObj()[e]=null),this.GetExtObj()[e]},this.GetForDepArray=function(){return t},this.SetForDepArray=function(e){t=e},this.SetNumImmediateDep=function(e){n=e},this.GetNumImmediateDep=function(){return n}},SiebelApp.S_App.BCField.prototype=r,SiebelApp.S_App.BCField.prototype.constructor=SiebelApp.S_App.BCField;var s={},o={};s.ProcessObjectInfo=n.prototype.ProcessObjectInfo,o.ProcessObjectInfo=function(n){var r=n.GetType();if(r!==t.get("SWE_PST_FIELD"))throw new Error;var i=e.Curry(SiebelApp.S_App.constructor.prototype.DefineAccessor,this,n);i("GetName","SWE_PROP_NAME"),i("GetDataType","SWE_PROP_TYPE",!0),i("GetValidationSpec","VALIDATIONSPEC"),i("GetPrcn","PRECISION"),i("GetNoCopy","NOCOPY"),i("GetPostDefault","POSTDEFAULT"),i("GetPickList","PICKLISTNAME"),i("GetLinkName","LINKNAME"),i("GetForceCase","FORCE_CASE"),i("GetForceActive","FORCE_ACTIVE"),i("IsDisableSort","DISABLE_SORT"),i("IsDisableSearch","DISABLE_SEARCH"),i("GetColName","COLUMN_NAME"),i("GetCalcExpr","CALCEXPR");if(n.GetProperty("fDeps")){var o=n.GetProperty("fDeps"),u=n.GetProperty("fDeps").length;for(var a=0;a<u;a++)this.AddForwardDependency(o[a])}s.ProcessObjectInfo.call(this,n);var f=this.GetBusComp().GetDatumDataType(this.GetDefn().DataType);this.GetDataType=function(){return f};var l=this.GetDefn().ReadOnly;this.IsReadOnly=function(){return l}},n.prototype.HasDefaultValue=function(){var t=this.GetDefn();return e.IsEmpty(t.PreDefault)&&e.IsEmpty(t.PostDefault)?!1:!0},n.prototype.GetDefn=function(){return this.GetBusComp().GetFieldDefn(SiebelApp.S_App.LookupStringCache(this.GetName()))},n.prototype.IsInactive=function(){return!1},n.prototype.AreValuesEqual=function(e,t){return e===t?!1:!0},n.prototype.GetColName=function(){return this.GetDefn().ColName},n.prototype.SetName=function(e){this.SetExtObjProp("m_name",e)},n.prototype.IsSystemField=function(){return!1},n.prototype.IsConstrainingField=function(){return!0},n.prototype.IsActivated=function(){return this.GetExtObjProp("m_activated")||this.SetExtObjProp("m_activated",!1),this.GetExtObjProp("m_activated")},n.prototype.SetActivated=function(e){this.SetExtObjProp("m_activated",e)},n.prototype.GetCalcQuery=function(){return this.GetDefn
().CalExpr},SiebelApp.S_App.BCField.prototype.Validate=function(){return!0},SiebelApp.S_App.BCField.prototype.GetTableName=function(){return""},SiebelApp.S_App.BCField.prototype.ForwardDeps=function(e,t,n){e&&(n=0);var r=this.GetForDepArray(),i,s,o=t?this.GetNumImmediateDep():r.length;for(;n<o;n++){i=r[n],s=this.GetBusComp().GetFieldMap()[i];if(s&&!s.IsInactive())return!0}return!1},SiebelApp.S_App.BCField.prototype.AddForwardDependency=function(e,t){var n=[],r=this.GetForDepArray(),i;e===this.GetName()&&(n.push(this.GetName()),i.err=!0,i.retVal=n),t?(r.splice(0,0,e),this.SetNumImmediateDep(this.GetNumImmediateDep()+1)):r.push(e)},SiebelApp.S_App.BCField.prototype.EnumDefaultValDependencies=function(){},SiebelApp.OfflineUtils.DefineExtentions(n,o,s)}(),SiebelApp.S_App.BusObj&&function(){function b(e,t){var n=this.GetBCMap();if(t)for(var r in n)n[r]&&delete this.GetBCMap()[r];for(var i in e)e[i]&&(this.GetBCMap()[i]=e[i]);var s=SiebelApp.S_App.GetPrevViewBCList();if(s){var o=this.GetBCMap(),u=s.length,a=!0,f=null;for(var l=0;l<u;l++){a=!0,f=null;for(f in o)if(o[f]&&o[f]===s[l]){a=!1;break}a&&s[l].EndLife&&s[l].EndLife()}o=null,s=null,SiebelApp.S_App.SetPrevViewBCList(null)}}function w(e){E.call(this,e),e.GetDefn().isSetup=!0}function E(e){var n=e.GetDefn(),i=n.Fields,s;for(var o in i){e.GetDefn().Fields[o].fDepArray||(e.GetDefn().Fields[o].fDepArray=[]),e.GetDefn().Fields[o].bDepArray||(e.GetDefn().Fields[o].bDepArray=[]),s=i[o],s.DataType==="Currency"&&(e.GetDefn().Fields[o].bDepArray.push(s.m_currCodeFieldName),e.GetDefn().Fields[o].bDepArray.push(s.m_exchDateFieldName));if(s.pickMap&&s.pickMap.length>0){var u;for(var a=0;a<s.pickMap.length;a++){u=s.pickMap[a].FldName;if(!i[u])continue;e.GetDefn().Fields[o].bDepArray.push(u)}}if(t.IsTrue(s.IsCalculated)){e.GetDefn().CalcFieldArray||(e.GetDefn().CalcFieldArray=[]),e.GetDefn().CalcFieldArray.push(o);if(e.GetDefn().CalcFieldArray&&!t.IsEmpty(s.CalExpr)){var f=SiebelApp.Query.GetFieldsFromExp("Calc",s.CalExpr),l=f.length;if(l>0){e.GetDefn().Fields[o].cFldArray=f;var c;for(var h=0;h<l;h++)c=f[h],e.GetDefn().Fields[c]?(e.GetDefn().Fields[c].fDepArray||(e.GetDefn().Fields[c].fDepArray=[]),e.GetDefn().Fields[c].fDepArray.push(o),t.IsTrue(e.GetDefn().Fields[c].IsCalculated)&&(e.GetDefn().Fields[o].cDepArray||(e.GetDefn().Fields[o].cDepArray=[]),e.GetDefn().Fields[o].cDepArray.push(c))):SiebelApp.OfflineUtils.CcfLogEvent([r.get("LOG_EVT_CLIENT_SYS"),55,0,53,c,e.GetName()])}}}}}function S(e,n,r){var i={err:!1},s;if(!e)i={err:!1},$.setReturnValue(i);else{n.SetExtObjProp("reExecute",!0),i=n.Execute();var o=i;i={err:!1},$.setReturnValue(i);if(!o.err){n.SetExtObjProp("reExecute",!1),n.IsNotifyEnabled()&&n.DisableNotify();var u;t.IsEmpty(r)?i=n.Home():i=n.PositionById(r);var a=i;i={err:!1},$.setReturnValue(i),a.err?(i=a,$.setReturnValue(i)):(n.EnableNotify(),n.CheckActiveRow()&&n.NotifyNewActiveRow(),i={err:!1},$.setReturnValue(i))}else i=o,$.setReturnValue(i)}return i}var e=SiebelApp.S_App,t=SiebelApp.Utils,n=SiebelApp.Constants,r=SiebelApp.Offlineconstants,i=SiebelApp.OfflineAppSettings,s=n.get("SWE_PST_NEW_BUSCOMP"),o=n.get("SWE_PST_BUSCOMP_INFO"),u=n.get("SWE_PROP_NAME"),a=n.get("PHYEVENT_SORT_LIST"),f=n.get("SEARCHSPEC"),l=n.get("SWE_PROP_HIER_PAR_ID_FLD"),c=n.get("SWE_PST_FIELD_LIST"),h=n.get("SWE_PST_REC_LIST"),p=n.get("SWE_PST_FIELD"),d=SiebelApp.S_App.BusObj.prototype,v=SiebelApp.S_App.BusObj;SiebelApp.S_App.BusObj=function(){v.call(this);var e=!1,t={};t.busCompReExecArray=[],t.busCompPosByIdOnlyArray=[],t.idValueArray=[],t.rowNumArray=[];var n=null;this.GetInterface=function(){return n||(n=new SiebelApp.S_App.OfflineBOInterface(this)),n},this.ResetInterface=function(){n&&n.EndLife(),n=null},this.SetInterface=function(e){n=e},this.SetActivationBlockStatus=function(t){e=t},this.GetActivationBlockStatus=function(){return e},this.GetActivationStates=function(){return t},this.ResetActivationStates=function(){t.busCompReExecArray=[],t.busCompPosByIdOnlyArray=[],t.idValueArray=[],t.rowNumArray=[]};var r=this.RemoveBusComp;this.RemoveBusComp=function(e){if(SiebelApp.OfflineAppSettings.GetMode()===!0){var t=this.GetView();t&&t.RemoveBCBroker(e)}return r.call(this,e)}},SiebelApp.S_App.BusObj.prototype=d,SiebelApp.S_App.BusObj.prototype.constructor=SiebelApp.S_App.BusObj;var m=SiebelApp.S_App.BusObj,g={},y={};g.AddBusComp=m.prototype.AddBusComp,g.ProcessObjectInfo=m.prototype.ProcessObjectInfo,g.ProcessChildObjInfo=m.prototype.ProcessChildObjInfo,g.EndLife=m.prototype.EndLife,y.ProcessObjectInfo=function(e){this.BeginActivationBlock(),g.ProcessObjectInfo.call(this,e)},y.EndLife=function(e){e||this.ResetInterface(),g.EndLife.call(this),this.SetInterface(null)},y.ProcessChildObjInfo=function(e){var n=e.GetProperty(r.get("STAND_ALONE_INST")),i=!t.IsTrue(n);this.GetUIState=function(){return i};var a=e.GetProperty("boexist"),f=e.EnumChildren(!0);if(!f)return;var l=SiebelApp.S_App.BusComp,c=e.GetProperty("isPopup"),h={};do{var p=f.GetType(),d=!0;switch(p){case s:var v;if(!t.IsTrue(n)){var m=f.GetChild(0),g=m.GetProperty(u);if(a&&this.GetBCMap()[g])v=this.GetBCMap()[g],delete this.GetBCMap()[g];else{v=this.GetBusCompX(g,!0);if(t.IsEmpty(v)||c)v=new l,d=!1}if(c){var y=m.GetValue();if(y===SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBCId()){var E=this.MaxBCIndex()+1;m.SetValue("S_BC"+E)}}v.ProcessObjectInfo(m,d);if(c){var S=v.GetDefn(),x;if(S.PopupVisType===r.get("SALES_REP"))x=0;else if(S.PopupVisType===r.get("ORGANIZATION"))x=5;else if(S.PopupVisType===r.get("CONTACT"))x=6;else if(t.IsTrue(S.PopupVisAutoAll)||t.IsEmpty(T))x=5;x=x.toString(),v.SetViewMode(x),v.SetIsPopup(c)}h.hasOwnProperty(v.GetVarName())||(h[v.GetVarName()]=v),d||v.GetDefn().isSetup||w.call(this,v)}break;case o:var T=this.GetBCtoProcess(f);if(!t.IsEmpty(T)){var y=T.GetName();a&&this.GetBCMap()[y]?(v=this.GetBCMap()[y],delete this.GetBCMap()[y],T.ProcessObjectInfo(m,!1,a)):T.ProcessObjectInfo(f)}h.hasOwnProperty(T.GetVarName())||(h[T.GetVarName()]=T)}}while(f=e.EnumChildren(!1));t.IsTrue
(n)||b.call(this,h,!c)},m.prototype.MaxBCIndex=function(){var e=this.GetBCMap(),t=0;for(var n in e)if(e[n]){var r=parseInt(n.substring(4));t<r&&(t=r)}return t},y.AddBusComp=function(e){if(!this.GetBCMap()[e.GetVarName()]||this.GetBCMap()[e.GetVarName()].GetName()!==e.GetName())this.GetBCMap()[e.GetVarName()]=e},m.prototype.BeginActivationBlock=function(e){this.SetActivationBlockStatus(!0);for(var t in e)e[t]&&e[t].SaveFieldArray()},m.prototype.EndActivationBlock=function(){var e={err:!1},t;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusObj.EndActivationBlock ");var n=this.GetActivationBlockStatus(),r=this.GetBCMap(),i=!1;for(var s in r)if(r[s]){i=!0;break}if(!n||!i)return e;var o=function(){var e=l;return function(){return[r[e]]}},u=[],a=0,f;for(var l in r)r[l]&&(f=o(),r[l]&&(u[a++]={execute:this.CheckBusCompActivation,executeScope:this,preExecute:f}));$.eachAsyncOp(this,u),e={err:!1},$.setReturnValue(e),f=null,u=null,o=null;var c=this.GetActivationStates(),h=c.busCompReExecArray,p=c.busCompPosByIdOnlyArray,d=c.idValueArray,v=h.length,m;if(v>0){var g=function(e){return m=h[e],[p[e].GetVarName()===m.GetVarName(),m,d[e]]},y={iterations:v,execute:S,executeScope:this,preExecute:g};$.eachAsyncOp(this,y);var b=e;e={err:!1},$.setReturnValue(e),f=null,y=null,this.ResetActivationStates(),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusObj.EndActivationBlock "),e=b,$.setReturnValue(e)}else e={err:!1},$.setReturnValue(e);return e},m.prototype.CheckBusCompActivation=function(e){var t={err:!1},n,r=!1,i=!1,s=null,o;if(!e.IsExecuted())return t={err:!1,retval:!1},$.setReturnValue(t),t;var u=this.GetActivationStates().busCompReExecArray,a=u.length;for(var f=0;f<a;f++)if(e.GetVarName()===u[f].GetVarName())return t={err:!1,retval:!0},$.setReturnValue(t),t;var l=e.GetParentBusComp();return l&&(t=this.CheckBusCompActivation(l)),n=t,t={err:!1},$.setReturnValue(t),l&&(i=l.GetExtObjProp("reExecute")||n.retVal),r=e.GetExtObjProp("reExecute")||e.CheckActivation(),!r&&!i?(t={err:!0,retval:!1},$.setReturnValue(t),t):(this.GetActivationStates().busCompReExecArray.push(e),!r&&i?this.GetActivationStates().busCompPosByIdOnlyArray.push(e):this.GetActivationStates().busCompPosByIdOnlyArray.push(e),e.GetActiveRow()>=0&&(t=e.GetIdValueX()),n=t,function(n){t={err:!1},$.setReturnValue(t);if(!n.err){s=n.retVal,this.GetActivationStates().idValueArray.push(s);var r=e.GetRowNum();return o=r.retVal,o||(o=-1),this.GetActivationStates().rowNumArray.push(o),t={err:n.err,retval:!0},$.setReturnValue(t),t}}.call(this,n),t)},m.prototype.InterpolateBCPS=function(e){var t={err:!1},n,r=this.GetBCMap(),i=e.GetChildCount(),s,o,u=[],a,f=0;for(var l=0;l<i;l++)s=e.GetChild(l),o=s.GetValue(),u[l]={execute:r[o].InterpolateBCState,executeScope:r[o],preExecute:function(){return a=e.GetChild(f),f++,[a]}};return $.eachAsyncOp(this,u),n=t,u=null,t=n,$.setReturnValue(t),t},m.prototype.GetBCPS=function(e,i){var s=SiebelApp.Metadata.GetBusCompDef(e),d=null;if(s){d=CCFMiscUtil_CreatePropSet(),d.SetType(o),d.SetPropertyStr(r.get("STAND_ALONE_INST"),"true"),d.SetValue(s.Name),d.SetPropertyStr(u,s.Name),d.SetPropertyStr(a,s.SortSpec),d.SetPropertyStr(f,s.SrchSpec),d.SetPropertyStr(l,s.HierParField);var v=SiebelApp.Metadata.GetBusObjDef(this.GetName())[e];if(!t.IsEmpty(v)&&!i){var m=SiebelApp.Metadata.GetLinkDef(v);t.IsEmpty(m.parentBusCompName)||d.SetPropertyStr("pi",m.parentBusCompName)}var g=s.Fields,y=CCFMiscUtil_CreatePropSet();y.SetType(c);var b=CCFMiscUtil_CreatePropSet();b.SetType(h);var w;if(g)for(var E in g)if(g.hasOwnProperty(E)){var S=CCFMiscUtil_CreatePropSet();S.SetType(p);var x=SiebelApp.S_App.LookupSCMap(E);x?w=x:(SiebelApp.S_App.GetStringCache().push(E),w=SiebelApp.S_App.GetStringCache().length-1),S.SetPropertyStr(u,w),S.SetPropertyStr(n.get("CALCEXPR"),g[E].CalExpr),S.SetPropertyStr(n.get("COLUMN_NAME"),g[E].ColName),S.SetPropertyStr(n.get("SWE_PROP_TYPE"),g[E].DataType),S.SetPropertyStr(n.get("DISABLE_SEARCH"),g[E].DisableSearch),S.SetPropertyStr(n.get("DISABLE_SORT"),g[E].DisableSort),S.SetPropertyStr(n.get("FORCE_ACTIVE"),g[E].ForceActive),S.SetPropertyStr(n.get("FORCE_CASE"),g[E].ForeceCase),S.SetPropertyStr(n.get("SWE_PROP_IS_HIDDEN"),g[E].Hidden),S.SetPropertyStr(n.get("SWE_PROP_IS_POST_CHANGES"),g[E].ImPostChg),S.SetPropertyStr(n.get("SWE_PROP_IS_CALC"),g[E].IsCalculated),S.SetPropertyStr(n.get("LINKNAME"),g[E].LinkName),S.SetPropertyStr(n.get("NOCOPY"),g[E].NoCopy),S.SetPropertyStr(n.get("SWE_PROP_LENGTH"),g[E].OldtextLen),S.SetPropertyStr(n.get("PICKLISTNAME"),g[E].PickListName),S.SetPropertyStr(n.get("POSTDEFAULT"),g[E].PostDefault),S.SetPropertyStr(n.get("PREDEFAULT"),g[E].PreDefault),S.SetPropertyStr(n.get("PRECISION"),g[E].Precision),g[E].ReadOnly&&S.SetPropertyStr(n.get("SWE_PROP_IS_READONLY"),g[E].ReadOnly),g[E].Required&&S.SetPropertyStr(n.get("SWE_PROP_IS_REQ"),g[E].Required),S.SetPropertyStr(n.get("SWE_PROP_SCALE"),g[E].Scale),S.SetPropertyStr(n.get("VALIDATIONSPEC"),g[E].ValidationSpec),y.AddChild(S)}d.AddChild(y)}return d},m.prototype.GetBusCompX=function(e,n){var r,i=this.GetBCMap();for(var s in i)if(i.hasOwnProperty(s)&&i[s]){var o=i[s].GetName();if(o===e)return i[s]}s="";if(n)return s;r=s;if(t.IsEmpty(r)){var u=this.GetBCPS(e);u&&(r=new SiebelApp.S_App.BusComp,r.ProcessObjectInfo(u),r.GetDefn().isSetup||w.call(this,r),this.AddBusComp(r),r.SetBusObj(this))}return r},m.prototype.DrillDownByField=function(e,t,n,r,i){var s={err:!1},o,u=!1,a=this.GetBusCompByName(t);if(!a)return s;i&&i!=="4"&&a.SetViewMode(i),s=a.SetFldSearchSpec(n,r),u=a.IsNotifyEnabled(),u&&a.DisableNotify(),s=a.Execute();var f=s;s={err:!1},$.setReturnValue(s),f.err&&a.EnableNotify(),s=a.Home();var l=s;return function(e){s={err:!1},$.setReturnValue(s);if(!e.err){if(!a.CheckActiveRow())return a.EnableNotify(),s;u&&a.EnableNotify()}else a.EnableNotify()}.call(this,l),s},m.prototype.GetLastErrCode=function(){return e.OfflineErrorObject.GetErrorCode()},m.prototype.GetLastErrText=function(){return e.OfflineErrorObject.GetErrorText
()},SiebelApp.OfflineUtils.DefineExtentions(m,y,g)}(),typeof SiebelApp.S_App.OfflineBOInterface=="undefined"&&(SiebelJS.Namespace("SiebelApp.S_App.OfflineBOInterface"),SiebelApp.S_App.OfflineBOInterface=function(){function e(e){var t=e,n=this;for(var r in e)(function(){var i=r;return typeof e[i]=="function"&&!n[i]&&(n[i]=function(){return t.constructor.prototype[i]?t.constructor.prototype[i].apply(t,arguments):t[i].apply(t,arguments)}),n[i]})();this.GetOfflineBO=function(){return t},this.EndLife=function(){n=null;var e=SiebelApp.S_App.Model.GetBOArray(),r=e.length;for(var i=r-1;i>=0;i--)if(e[i]===this.GetOfflineBO()){e.splice(i,1),SiebelApp.S_App.Model.SetBOArray(e);break}t&&t.EndLife&&t.EndLife(!0),t=null}}return e.prototype.GetBusComp=function(e,t){var n=SiebelApp.S_App.Model.GetIsInterFace();if(!(n>0)){var i=this.GetOfflineBO();return i.GetBusComp.call(i,e)}var r=this.GetOfflineBO().GetBusCompX(e,t);if(r)return r.GetInterface()},e.prototype.Name=function(){return this.GetOfflineBO().GetName()},e}()),SiebelApp.S_App.BusComp&&define("siebel/offline/buscomp",["siebel/offline/model"],function(){(function(){function j(e){if(!e)return;var t=0,n=0,r=e.length,i;while(t<r){t=e.indexOf("[",n);if(t<0)break;n=e.indexOf("]",t),i=e.substring(t+1,n),this.ActivateField(i)}}function F(){return!1}function I(e){var t=e.retVal,n=!1;return t.Outputargs?(n=t.Outputargs.GetProperty("RetVal").toString(),n==="true"?(n=!0,n):n):n}function q(e,t){var n={err:!1},r;if(!e)return n={err:!0,retVal:!1},n;var i={};return t.GetProperty("Request")&&(i.request=t.GetProperty("Request").toString()),e==="NewRecord"?(n=this.NewRecord(i),r=n,n={err:!1},r.err?n=r:n={err:!1,retVal:!1},n):e==="EditRecord"?(this.EditRecord(i),r=n,n={err:!1},r.err?n=r:n={err:!1,retVal:!1},n):e==="WriteRecord"?(n=this.WriteRecord(),r=n,n={err:!1},r.err?n=r:n={err:!1,retVal:!1},n):(e==="GetQuickPickInfo"&&(n={err:!1,retVal:!1}),e==="AddRecord"?(this.OnActionAddRecord(),r=n,n={err:!1},r.err?n=r:n={err:!1,retVal:!1},n):e==="UndoRecord"?(n=this.UndoRecord(i),r=n,n={err:!1},r.err?n=r:n={err:!1,retVal:!1},n):e==="RefreshRecord"?(n=this.RefreshRecord(),r=n,n={err:!1},r.err?n=r:n={err:!1,retVal:!1},n):e==="RefreshBusComp"?(n=this.RefreshBusComp(),r=n,n={err:!1},r.err?n=r:n={err:!1,retVal:!1},n):(n={err:!1,retVal:!0},n))}function R(e){if(e){var t=this.GetFieldMap()[e];if(!t){var n=this.GetFieldDefn(e);if(n){var i=SiebelApp.S_App.LookupSCMap(e),s=Object.keys(this.GetFieldMap()).length,o=new SiebelApp.S_App.BCField,u=CCFMiscUtil_CreatePropSet();u.SetType(w.get("SWE_PST_FIELD")),u.SetPropertyStr(w.get("SWE_PROP_NAME"),i),u.SetPropertyStr(w.get("SWE_PROP_TYPE"),this.GetDatumDataType(n.DataType)),u.SetPropertyStr(w.get("SWE_PROP_IS_CALC"),n.IsCalculated),u.SetPropertyStr(w.get("SWE_PROP_IS_HIDDEN"),n.Hidden),n.ReadOnly&&u.SetPropertyStr(w.get("SWE_PROP_IS_READONLY"),n.ReadOnly),n.Required&&u.SetPropertyStr(w.get("SWE_PROP_IS_REQ"),n.Required),u.SetPropertyStr(w.get("SWE_PROP_SCALE"),n.Scale),u.SetPropertyStr(w.get("SWE_PROP_LENGTH"),n.OldTextLen),r.IsTrue(n.ImPostChg)&&u.SetPropertyStr(w.get("SWE_PROP_IS_POST_CHANGES"),n.ImPostChg),u.SetPropertyStr(w.get("CALCEXPR"),n.CalExpr),u.SetPropertyStr(w.get("COLUMN_NAME"),n.ColName),u.SetPropertyStr(w.get("DISABLE_SEARCH"),n.DisableSearch),u.SetPropertyStr(w.get("DISABLE_SORT"),n.DisableSort),u.SetPropertyStr(w.get("FORCE_ACTIVE"),n.ForceActive),u.SetPropertyStr(w.get("FORCE_CASE"),n.ForceCase),u.SetPropertyStr(w.get("LINKNAME"),n.LinkName),u.SetPropertyStr(w.get("NOCOPY"),n.NoCopy),u.SetPropertyStr(w.get("PICKLISTNAME"),n.PickListName),u.SetPropertyStr(w.get("POSTDEFAULT"),n.PostDefault),u.SetPropertyStr(w.get("PREDEFAULT"),n.PreDefault),u.SetPropertyStr(w.get("PRECISION"),n.Precision),u.SetPropertyStr(w.get("VALIDATIONSPEC"),n.ValidationSpec),u.SetPropertyStr(w.get("PRECISION"),n.Precision),u.SetPropertyStr("fDeps",n.fDepArray),o.SetBusComp(this),o.SetName(i),o.index=s,o.ProcessObjectInfo(u,!0),o.SetActivated(!0),this.GetFieldMap()[e]=o,t=null,n=null,i=null,s=null,u=null}}else{var a=t.IsActivated();a||t&&t.SetActivated(!0)}}}function U(e){this.GetExtObjProp("m_wsActiveRow")||this.SetExtObjProp("m_wsActiveRow",-1),this.SetExtObjProp("m_wsActiveRow",e)}function z(){return r.IsEmpty(this.GetExtObjProp("m_wsActiveRow"))&&this.SetExtObjProp("m_wsActiveRow",-1),this.GetExtObjProp("m_wsActiveRow")}function W(){var e=this.GetCursor()[0]+1-this.GetWS().length+this.GetActiveRow()+1;return e}function X(e,t){var n={err:!1},r;if(!e){n=V.call(this);var i=n;(function(e){n={err:!1};if(e.err)return n={err:!0},n}).call(this,i)}var i=n;n={err:!1};if(!i.err)if(!t){n=this.UpdateLinks(!1);var s=n;n=s}else n={err:!1};return n}function V(){var e={err:!1},t,n=!1,r=this.GetWS().length,i=0,s;U.call(this,-1);var o=function(){e=this.GetNextRecord(),t=e,e={err:!1},s=t.retVal,n=t.err,!t.err&&s&&(this.InsertWorkSet(r,s),r++),r<this.GetWorkSetSize()&&!n&&o.call(this)};r<this.GetWorkSetSize()&&o.call(this),e={err:!1},n&&(n=!1);var u=this.GetWS().length;if(u>0&&u<this.GetWorkSetSize()){s=this.FindWorkSet(0,s);if(s){var o=function(){e=this.GetPriorRecord(),t=e,e={err:!1},s=t.retVal,n=t.err,!t.err&&s&&(i++,this.InsertWorkSet(0,s)),this.GetWS().length<this.GetWorkSetSize()&&!n&&o.call(this)};u<this.GetWorkSetSize()&&o.call(this)}}e={err:!1},U.call(this,this.GetWS().length>0?i:-1),e={err:!1};var a=this.GetNotifyInfoArray(),f=[],l=a[0];if(l){var c=this.GetActiveRow(),h;f=l.GetAppletArray();var p=f.length;for(var r=0;r<p;r++)h=f[r],c===-1||c===0||this.GetWS().length<l.GetSize(h)?l.SetBegRow(0,h):c+l.GetSize(h)<=this.GetWS().length?l.SetBegRow(c,h):l.SetBegRow(this.GetWS().length-l.GetSize(h),h),l.SetCurrRow(l.GetBegRow(h),h)}return e=this.NotifyNewData(),e}function J(e){var t={err:!1},n;if(this.IsVBC()||this.GetIsRelatedBC()){var r;this.IsVBC()?r=this.GetVBCRecords():r=this.GetRelatedBCRecords();var i=r.length;for(var s=0;s<i;s++)if(r[s].Id===e)return t={err:!1,retVal:r[s]},t;return t={err:!0,retVal:""},t}var o=this.GetActivatedFieldList(),u=o.length,a=SiebelApp
.OfflineUtils.RemoveNonAlphaChars(this.GetName()),l=[],c=0;for(var h=0;h<u;h++){var p=o[h];p=SiebelApp.OfflineUtils.RemoveNonAlphaChars(p),f.DoesFieldExist(a,p)&&(l[c]=p,c++)}var d,v=[];d=w.get("SWE_ROW_ID_FIELD")+" = "+e,v.push(d);var m=lt.call(this,SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName()));m&&v.push(m);var g=SiebelApp.SqlBuilder.SelectRecordPopulateWS(a,v,l);return n=f.SelectRecord(g,!0),n.err?t={err:n.err,retVal:""}:t={err:!1,retVal:n.retVal[0]},t}function K(e,t,n,r){var i={err:!1},s;this.OnSetFieldValue(e),tt.call(this,t,e),n[k]=A,r.SetProperty("RetVal",!0),s=i=SiebelApp.S_App.Model.InvokeRegisteredSvc(n,r),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.SetFieldValueX ");var o=s.err?s.retVal:!0;return i={err:!1,retVal:o},i}function Q(e,t,n,r,i){var s={err:!1},o,u={};u.bContinue=!0,u.bPicked=i;var a=[],o;return s=o=this.IsFieldReadOnly(e),o&&o.retVal?(a.push(t),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrFieldReadOnly",a,"","","",0,9),nt.call(this,t),o={err:"SSASqlErrFieldReadOnly",retVal:!1},u.bContinue=!1,u.retObj=o,s={err:!0,retVal:u},s):(s=this.ValidatePickValue(t,n),o=s,s={err:!1},o.err?(nt.call(this,t),u.bContinue=!1,u.retObj=o,u.bPicked=i,s={err:!0,retVal:u}):(i=o.retVal,i?(tt.call(this,i,t),u.bContinue=!1,u.retObj=o,u.bPicked=i,s={err:!1,retVal:u}):(i=this.ValidateAssocValue(t,n),i?(tt.call(this,i,t),u.bContinue=!1,u.retObj={err:!1,retVal:!1},u.bPicked=i,s={err:!1,retVal:u}):(u.bContinue=!0,u.retObj={err:!1,retVal:!1},u.bPicked=i,s={err:!1,retVal:u}))),s)}function G(e,t,n){var i={err:!1},o,a,f,l=[],c=null,h=[];if(e==="SSA Primary Field"){c=this.GetLinkDef(),f=c.primeIdFieldName;if(c===null||r.IsEmpty(f))l.push(e),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoSuchField",l,"","","",0,9),nt.call(this,t,e),i={err:"BCErrNoSuchField",retVal:!1};else{i=this.GetIdValueX(),o=i,i={err:!1};if(!o.err){a=o.retVal;var p=this.GetParentBusComp();p.IsCommitPending()||(i=p.UpdateRecordX()),i=p.SetFieldValueX(f,a,!1,!0)}}}else{var d=this.GetFieldMap()[e];if(d){if(!d.IsSystemField()&&!d.IsCalc()&&d.GetTableName()==="m_pSqlBCDef_m_tableName"){var v;i=this.FieldValue(e),o=i,i={err:!1};if(!o.err){v=o.retVal;if(!v||n!==v){var m=!0;i=this.SetUpdated(m)}}}}else s.CcfLogEvent([u,55,0,9,e,this.GetName()]);i={err:!1},h.push(d);if(d.IsCalc()&&!r.IsEmpty(d.GetCalcExpr())&&!r.IsEmpty(d.GetPickList()))l.push(e),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrFieldReadOnly",l,"","","",0,9),i={err:"SSASqlErrFieldReadOnly",retVal:!1};else{i=Y.call(this,e,n),o=i;var g=o.retVal;i=et.call(this,e,g),i=o}}return i}function Y(e,t){var n={err:!1},i,s=this.GetFieldMap()[e].GetName(),o,u=this.GetFieldList(),a=this.GetWS(),f=z.call(this),l=a[f],c;s=s.toString();var h=SiebelApp.S_App.LookupStringCache(s);c=SiebelApp.OfflineUtils.RemoveNonAlphaChars(h);var p=l[c];r.IsEmpty(p)&&(p=""),r.IsEmpty(t)&&(t=""),l[c]=t;var d=this.GetFieldDefn(e);if(p!==t&&d&&d.IsCalculated!=="T"){this.SetLocalFNm(c),this.SetLocalFVal(c,t,p);var v,m;if(!d.ReadOnly){this.GetNewTxn()!==""&&(p=""),t=t.replace(/\\/g,"\\3").replace(/\|/g,"\\0").replace(/\^/g,"\\1").replace(/\~/g,"\\2").replace(/&/g,"\\4"),p=p.replace(/\\/g,"\\3").replace(/\|/g,"\\0").replace(/\^/g,"\\1").replace(/\~/g,"\\2").replace(/&/g,"\\4");var g=this.GetFieldDefn(e),y=g.JoinInfo&&g.JoinInfo.JoinType==="J"&&!r.IsTrue(g.Required);y||(v=URLEncode(at.call(this,e,t)),m=URLEncode(at.call(this,e,p)),p=m+"|"+v,p=this.ReplaceAmp(p),this.SetOldFNm(e),this.SetOldFVal(e,p))}}return n=gt.call(this,e,this.GetWS()[this.GetActiveRow()]),i=n,i.retVal=l,u=null,n=i,n}function Z(e,t){var n={err:!1},i,s=this.GetFieldMap()[e];if(!s)return n={err:!0,retVal:!1},n;this.ActivateField(e);var o=s.GetDataType();if(o==="utcdatetime"||o==="datetime"||o==="date"||o==="time")t=SiebelApp.S_App.OfflineLocaleObject.FormattedToString(o,t);var u=s.GetName(),a,f=this.GetFieldList(),l=this.GetWS(),c=z.call(this),h=l[c],p,d=SiebelApp.S_App.LookupStringCache(u);p=SiebelApp.OfflineUtils.RemoveNonAlphaChars(d);var v=h[p];r.IsEmpty(v)&&(v=""),r.IsEmpty(t)&&(t=""),h[p]=t;var m=this.GetFieldDefn(e);if(v!==t&&m.IsCalculated!=="T"){this.SetLocalFNm(p),this.SetLocalFVal(p,t,v);var g,y;if(!m.ReadOnly){this.GetNewTxn()!==""&&(v=""),t=t.replace(/\\/g,"\\3").replace(/\|/g,"\\0").replace(/\^/g,"\\1").replace(/\~/g,"\\2").replace(/&/g,"\\4"),v=v.replace(/\\/g,"\\3").replace(/\|/g,"\\0").replace(/\^/g,"\\1").replace(/\~/g,"\\2").replace(/&/g,"\\4");var b=this.GetFieldDefn(e),w=b.JoinInfo&&b.JoinInfo.JoinType==="J"&&!r.IsTrue(b.Required);w||(g=URLEncode(at.call(this,e,t)),y=URLEncode(at.call(this,e,v)),v=y+"|"+g,v=this.ReplaceAmp(v),this.SetOldFNm(e),this.SetOldFVal(e,v))}n=gt.call(this,e,this.GetWS()[this.GetActiveRow()],!0)}return i=n,i.retVal=h,f=null,l=null,n=i,n}function et(e,t){var n={err:!1},r;if(!t)return n;var i=this.GetDefn().Fields[e].fDepArray;if(i){var s=0,o=i.length,u=function(){this.GetDefn().Fields[i[s]].IsCalculated==="T"?(Y.call(this,i[s],""),n={err:!1},s++,s<o&&u.call(this)):(s++,s<o&&u.call(this))};s<o&&u.call(this)}return n}function tt(e,t){e?this.NotifyNewData(t):this.NotifyNewData(t)}function nt(e){this.GetActiveRow()>=0&&this.NotifyNewData(e)}function rt(e){var t={err:!1},n,r=function(){this.IsNotifyEnabled()&&!e.bAfterNotify&&this.EnableNotify(),e.bAddUndo&&this.EndUndo(!1)};if(e.bRecordCreated){this.IsNotifyEnabled()&&!e.bAfterNotify&&this.DisableNotify(),this.UndoRecordX();var i=t;t={err:!1},r.call(this,i)}else r.call(this);return t}function it(e){var t={err:!1},n,r=this.GetParentBusComp();if(r){var i=this.GetLinkDef(),s=i.interTableName;if(!s){var o=i.destFieldName,u=this.GetFieldDefn(o),a,f=[];if(!u)a="SSASqlErrLinkDestField",f.push(i.Name),f.push(o),f.push(this.GetName()),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrLinkDestField",f,"","","",0,78),t=rt.call(this,e);else if(i.SrcFieldValue)t=this.SetFieldValueX(i.destFieldName,i.SrcFieldValue,!0);else{t=r.FieldValue(o),n=t;var l=n.retVal;t=this.SetFieldValueX(i.destFieldName
,l,!0)}}}return t}function st(e){if(!e)return e;var t=this.CreateRecord(""),n=this.GetFieldMap();for(var r in n)if(n.hasOwnProperty(r)){var i=this.GetFieldDefn(r),o=s.RemoveNonAlphaChars(r);if(e.hasOwnProperty(o))if(i.DataType===H){var u=s.UtcToLocal(e[o]);t[o]=s.ToTS(u)}else t[o]=e[o]}return t}function ot(e,t){var n=e.length;for(var r=0;r<n;r++){var i=SiebelApp.S_App.LookupStringCache(e[r]),o=t[r],u=this.GetFieldDefn(i);u.DataType===H&&o&&(t[r]=s.ToTS(new Date(o),!0),this.SetLocalFVal(s.RemoveNonAlphaChars(i),t[r],!0))}}function ut(e,t){var n=e.length;for(var r=0;r<n;r++){var i=SiebelApp.S_App.LookupStringCache(e[r]),o=t[r],u=this.GetFieldDefn(i);u.DataType===w.get("DTYPE_DATE")&&o&&(t[r]=s.ToDate(new Date(o),!0),this.SetLocalFVal(s.RemoveNonAlphaChars(i),t[r],!0))}}function at(e,t){var n=this.GetFieldDefn(e);return n.DataType===H&&t?(n=null,s.ToTS(new Date(t),!0)):(n=null,t)}function ft(){var e={};e.err=!1,e.retVal=0;var t=this.GetCursor()[0],n=this.GetRecordCount();return t<n-1?this.IsInsertPending()?(e.err=!1,e.retVal=t+2):(e.err=!1,e.retVal=t+1):this.IsInsertPending()?(e.err=!1,e.retVal=n+1):(e.err=!0,e.retVal=n),e}function lt(e){var t=this.GetViewMode(),n=this.GetUIState();if(r.IsEmpty(t)){if(!n)return null;var i=SiebelApp.S_App.GetActiveView().GetName();t=SiebelApp.S_App.Model.GetViewMode(i);if(t!=="4")t=t.toString(),this.SetViewMode(t);else{var s=this.GetDefn(),o=s.Visibility,u=o.length;if(u>0)for(var a=0;a<u;a++){if(o[a].mode==="0"){t=0;break}if(o[a].mode==="2"){t=2;break}t=5}t=t.toString(),this.SetViewMode(t)}}if(t==="5")return null;var f=Math.pow(2,t);t==="3"&&(f=15);var l="(["+e+']._PDAVisibilityTypes & "'+f+'") OR(['+e+"]._PDAVisibilityTypes = '' )";return l}function ct(){var e=this.GetWS().length;if(e>0){var t=this.GetWSSize(),n=this.GetWS();this.SetRecordCount(e);var r=[0,1],i=[];for(var s=0;s<e;s++)i.push(n[s]);this.IsVBC()?this.SetVBCRecords(i):this.SetRelatedBCRecords(i);if(e<t)r[0]=e-1;else{r[0]=t-1;for(var o=t;o<e;o++)this.DeleteWorkSet(t)}var u=this.GetNotifyInfoArray();if(u&&u[0]){var a=u[0].GetAppletArray(),f=a.length;for(s=0;s<f;s++)u[0].SetBegRow(0,a[s]),u[0].SetCurrRow(0,a[s])}this.SetCursor(r)}}function ht(){var e={err:!1},t,n=[],r=CCFMiscUtil_CreatePropSet();r.SetType(w.get("SWE_PST_REC_LIST"));var i=this.GetWS(),s;if(i==="undefined"||i.length<=0)s=CCFMiscUtil_CreatePropSet(),s.SetType(w.get("SWE_PROP_LAST_RECORD")),s.SetProperty("v",""),r.AddChild(s),e={err:!1,retVal:r};else{r.SetProperty(w.get("SWE_PROP_ACTIVE_ROW"),z.call(this));var o=this.GetRowNum(),u;o.err?u=-1:u=o.retVal,r.SetProperty(w.get("SWE_PROP_CURR_RNUM"),u);var a=this.GetNumRowsX();r.SetProperty(w.get("SWE_PROP_NUM_ROWS"),a.retVal),n=this.GetActivatedFieldList(),e=this.PrepareOfflineRawRecord(i.length,n),t=e,e={err:!1};var f=t.retVal;for(var l=0;l<f.length;l++){var c=f[l].value,h=f[l].id;s=CCFMiscUtil_CreatePropSet(),s.SetType(w.get("SWE_PROP_RECORD")),s.SetProperty("i",h),s.SetProperty("v",c),r.AddChild(s)}e={err:!1,retVal:r}}return e}function pt(e,t,n,r){var i=this;!n&&e&&!t&&i.NotifyNewSelection(!1),i.GetMultiSelectMode()!==n?(i.NotifySelModeChange(i.GetMultiSelectMode()),i.NotifyChangeSelection()):t?i.NotifyChangeSelection():e&&i.NotifyNewSelection(this.GetInverseSelection()?!r:r)}function dt(e){var t={err:!1},n;this.FinishRecord(),t={err:!1};if(e<0)return t;var r=this.FindWorkSet(e);this.PositionById(r.Id);var i=this.GetBaseBC();return i.SetAssocList(this),i.AddAssociation(),t=this.NotifyNewData("SSAAssocExistsField"),t}function vt(e){var t={err:!1},n,r=e.Id,i=this.GetWorkSetSize(),a;for(var l=0;l<i;l++){a=this.FindWorkSet(l);if(a&&r===a.Id){if(!a.isNew)return t={err:!0},t;this.DeleteWorkSet(l)}}this.SetBCTableInsertState(o.get("INSMODE_ASSOCONLY"));var c=this.GetLinkDef(),h=c.interTableName,p=[],d=[];p.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(c.interParentColName)),p.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(c.interChildColName)),d.push(this.GetExtObjProp("m_pCurLinkQueryDef").Data.srcFieldValue),d.push(r),p.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(w.get("SWE_ROW_ID_FIELD")));var v=mt.call(this,d[0],r);d.push(v);var m=this.GetDefn().Fields,g=0,y=[],b=[],E={};E.fieldList=[],E.fieldVal=[];for(var S in m)if(m[S]){var x=m[S].ColName;if(m[S].Join&&m[S].JoinInfo.JoinType==="X"&&f.DoesFieldExist(h,x)){var T=m[S].PreDefault;T&&(p.push(x),b.push(S),g++)}}if(g>0){var N=this.GetName(),C=function(e){return[N,b[e],!0]};E.fieldList=b;var k=function(e){y.push(e.retVal),d.push(e.retVal)};t=SiebelApp.OfflineAppMgr.eachSyncOp(this,{execute:this.GetDefaultValue,executeScope:this,postExecute:k,preExecute:C,iterations:g})}E.fieldVal=y;var L=SiebelApp.SqlBuilder.InsertRecord(h,p,d);this.SetInsertStatement(L);var A={};A.query=L.insertquery,A.valList=L.values,this.SetLocalTxn(JSON.stringify(A)),this.SetOpType(o.get("ADDRECORD")),t=this.SyncQRec(r),s.CcfLogEvent([u,34,0,52,"interTable: ",h,L.insertquery]);var O=t,M=O.retVal;return this.SetNewTxn(M),this.WriteRecord(),t={err:!1,retVal:E},t}function mt(e,t){return e+"."+t}function gt(e,t,n){var r={err:!1},i,s,o,u="",a=this.IsOnFieldUpdDisabled(),f=this.GetOnUpdSrcFldArray(),l=this.GetOnUpdConditionArray(),c=this.GetOnUpdExprArray(),h=this.GetOnUpdDstFldArray();if(a||this.LoadOnFieldUpdateSet(e)!==!0||(o=f.length)===0)return r;var p=[],d=[],v;for(s=0;s<o;s++){if(e!==f[s])continue;v=this.GetFieldDefn(e).cFldArray;if(v&&v.length>0&&v.indexOf(h[s])>-1)continue;l.length>s&&l[s]&&(u=SiebelApp.Query.Evaluate(l[s].m_pQuery.ast,this)),u=SiebelApp.Query.Evaluate(c[s].m_pQuery.ast,this),p.push(h[s]),d.push(u)}var m=0,g=function(){n===!0?Z.call(this,p[m],d[m]):this.SetFieldValueX(p[m],d[m]),r={err:!1},m++,m<d.length&&g.call(this)};return m<d.length&&g.call(this),r}function yt(e,t){var n=!1;if(!e)return n;n=e.IsStatic;if(n){var r=t.length,i;for(var s=0;s<r;s++){i=t[s];if(i.IsConstrained){n=!1;break}}}return n}function bt(e){return e.length<2?"0"+e:e}function wt(e){var t={err:!1},n,r=!1,i=!1;if(e&&e.GetProperty("Invoked")&&e.GetPropertyAsStr("Invoked")==="true"
){var s=e.GetProperty("RetVal");s?s=JSON.parse(s):i=!0,e.GetPropertyAsStr("Cursor")&&(this.GetCursor()[0]=parseInt(e.GetProperty("Cursor"))),t={err:i,retVal:s},r=!0}return t}var e=SiebelApp.S_App.BusComp,t=SiebelApp.S_App.BusComp.prototype,n=SiebelApp.S_App.BusComp,r=SiebelApp.Utils,i=SiebelApp.S_App,s=SiebelApp.OfflineUtils,o=SiebelApp.Offlineconstants,u=o.get("LOG_EVT_CLIENT_SYS"),a=!0,f=SiebelApp.BrowserCacheMgr,l=SiebelApp.S_App.Model,c=SiebelApp.AjaxRequestMgr,h={err:!1},p;SiebelApp.S_App.BusComp=function(){n.call(this);var e={},t=!0,r=!0,i=!0,s=[],u=[],a=[],f=0,c=-1,h=!0,p=[],d={},v=[],m=null,g=!0,y=!0,b=0,w=0,E=[0,1],S=o.get("INSMODE_NORMAL"),C="",k=!1,L=[],A={},O=!1,M=!1,_=[],D=[],P=!1,H=!1,B,F,I=!1,q="",R="",U="",z=[],W=[],X=[],V=[],$=[],J="",K=o.get("PAGE_SIZE"),Q=!1,G=!1,Y=!1,Z=[],et=[],tt=[],nt=[],rt=null,it="",st="",ot="",ut="",at,ft="",lt=!1,ht=null,pt=null,dt=null,vt=[],mt=[],gt="",yt=0;this.GetBusCompType=function(){return yt},this.SetBusCompType=function(e){yt=e},this.GetAssocList=function(){if(!at&&this.GetLinkDef()&&this.GetLinkDef().interTableName){var e=this.GetBusObj(),t=this.GetName(),n=e.GetBCPS(t,!0);at=new SiebelApp.S_App.BusComp,at.ProcessObjectInfo(n)}return at},this.SetAssocList=function(e){at=e},this.SetPickSrcIdFName=function(e){ht=e},this.GetPickSrcIdFName=function(){return ht},this.GetPickAppletSrcInfo=function(){return ut},this.SetPickAppletSrcInfo=function(e){ut=e},this.GetIsPopup=function(){return ot},this.SetIsPopup=function(e){ot=e},this.GetViewMode=function(){return st},this.SetViewMode=function(e){st=e},this.GetInterface=function(){return rt||(rt=new SiebelApp.S_App.OfflineBCInterface(this)),rt},this.ResetInterface=function(){rt&&rt.EndLife(),rt=null},this.GetOnUpdSrcFldArray=function(){return Z},this.GetOnUpdDstFldArray=function(){return et},this.GetOnUpdExprArray=function(){return tt},this.GetOnUpdConditionArray=function(){return nt},this.IsLoadOnFldUpdSet=function(){return G},this.SetLoadOnFldUpd=function(e){G=e},this.IsOnFieldUpdDisabled=function(){return Y},this.DisableOnFieldUpd=function(){Y=!0},this.GetWSSize=function(){return K},this.SetWSSize=function(e){K=e},this.GetOldFNm=function(){return z},this.SetOldFNm=function(e){z.indexOf(e)<0&&z.push(e)},this.SetEmptyFNm=function(){z=[],W=[],X=[],$=[],V=[],J=""},this.GetOldfVal=function(){return W},this.SetOldFVal=function(e,t){var n=this.GetOldFNm(),r=n.indexOf(e);if(r<0)W.push(t);else if(!W[r])W[r]=t;else{var i=W[r].split("|"),s=t.split("|"),o=i[0],u=s[1];W[r]=o+"|"+u}},this.GetLocalFNm=function(){return X},this.SetLocalFNm=function(e){X.indexOf(e)<0&&X.push(e)},this.GetLocalfVal=function(){return V},this.SetLocalFVal=function(e,t,n,r){var i=X.indexOf(e);if(r&&i<0)return;V[i]=t,i>V.length&&($[i]=n)},this.SetLocalTxn=function(e){J=e},this.GetLocalTxn=function(){return J},this.GetNewTxn=function(){return q},this.SetNewTxn=function(e){q=e},this.GetOpType=function(){return U},this.SetOpType=function(e){U=e},this.GetTxnId=function(){return R},this.SetTxnId=function(e){R=e},this.IsNotifyEnabled=function(){return r},this.SetNotifyEnabled=function(e){r=e},this.IsNotifySysEnabled=function(){return i},this.SetNotifySysEnabled=function(e){i=e},this.SetWorkSet=function(e){s=e},this.GetWorkSet=function(){return s},this.GetNotifyInfoArray=function(){return u},this.AddNotifyInfoArray=function(e){u.push(e)},this.ResetNotifyArr=function(){u=[]},this.GetRef=function(){return f},this.AddRef=function(){return++f},this.RemoveRef=function(){return f--},this.GetExtObj=function(){return e},this.SetExtObjProp=function(e,t){this.GetExtObj()[e]=t},this.GetExtObjProp=function(e){return this.GetExtObj().hasOwnProperty(e)||(this.GetExtObj()[e]=null),this.GetExtObj()[e]},this.IsInExecution=function(){return t},this.SetExecutionState=function(e){t=e};var bt=this.IsInsertPending;this.IsInsertPending=function(){return SiebelApp.OfflineAppSettings.GetMode()===!0?this.insertPending:bt};var wt=this.SetSearchSpec;this.SetSearchSpec=function(e){if(SiebelApp.OfflineAppSettings.GetMode()===!0){if(window.localStorage.getItem("contextArray")){var t=JSON.parse(window.localStorage.getItem("contextArray")),n=t.length,r;for(var i=0;i<n;i++){r=t[i].bc;if(this.GetName&&this.GetName()===r){t[i].ss=e,window.localStorage.setItem("contextArray",JSON.stringify(t));break}}r=null,t=null}j.call(this,e)}return wt.call(this,e)},this.GetMultiSelectMode=function(){return k},this.SetMultiSelectMode=function(e){if(this.GetMultiSelectMode()===e)return;k=e,this.NotifyStateChanged("bInMultiSelMode",k?1:0)},this.GetExplicitCommit=function(){return M},this.SetExplicitCommit=function(e){M=e},this.GetSelRowIdArray=function(){return L},this.SetSelRowIdArray=function(e){L=e},this.SetBCTableUpdateState=function(e){h=e},this.GetBCTableUpdateState=function(){return h},this.SetCursor=function(e){E=e},this.GetCursor=function(){return E},this.SetQuerySearchSpec=function(e){p=e},this.GetQuerySearchSpec=function(){return p},this.SetAppletSearchSpec=function(e){Array.isArray(e)&&e.length>0&&(e=e[0]),this.IsExecuted()&&this.SetExecuted(e===ft),ft=e},this.GetAppletSearchSpec=function(){return ft},this.SetQuerySortSpec=function(e){d=e},this.GetQuerySortSpec=function(){return d},this.SetQueryFieldList=function(e){v=e},this.GetQueryFieldList=function(){return v},this.SetPrevActiveRow=function(e){c=e},this.GetPrevActiveRow=function(){return c},this.SetQueryOrder=function(e){m=e},this.GetQueryOrder=function(){return m},this.SetPriorSet=function(e){g=e},this.GetPriorSet=function(){return g},this.SetNextSet=function(e){y=e},this.GetNextSet=function(){return y},this.SetRecordCount=function(e){b=e},this.GetRecordCount=function(){return b},this.SetScrollCount=function(e){w=e;if(window.localStorage.getItem("contextArray")){var t=JSON.parse(window.localStorage.getItem("contextArray")),n=t.length,r;for(var i=0;i<n;i++){r=t[i].bc;if(this.GetName()===r){t[i].sc=e;break}}window.localStorage.setItem("contextArray",JSON.stringify(t)),t=null,r=null}},this.GetScrollCount=function(){return w},this
.SetBCTableInsertState=function(e){S=e},this.GetBCTableInsertState=function(){return S},this.SetInsertStatement=function(e){C=e},this.GetInsertStatement=function(){return C},this.SetIsRelatedBC=function(e){lt=e,e&&ct.call(this)},this.GetIsRelatedBC=function(){return lt},this.GetWS=function(){return a},this.AddWS=function(e){this.GetWS().push(e)},this.EmptyWS=function(){a=[]},this.SetFieldValueWS=function(e,t,n){a[n][e]=t},this.GetBCState=function(){return A},this.SetBCState=function(e){A=e},this.GetInverseSelection=function(){return O},this.SetInverseSelection=function(e){if(O===e)return;O=e,this.NotifyStateChanged("bInverseSelection",e)},this.GetActivatedFieldList=function(){var e=this.GetFieldMap(),t;for(var n in e)e[n]&&(t=SiebelApp.S_App.LookupStringCache(e[n].GetName()),_.indexOf(t)===-1&&_.push(t));var r=this.GetActFieldList();for(var i in r)r[i]&&(t=SiebelApp.S_App.LookupStringCache(r[i]),_.indexOf(t)===-1&&_.push(t));return e=null,r=null,_},this.ResetActivatedFieldList=function(){_=[]},this.GetSavedFieldArray=function(){return D},this.SetSavedFieldArray=function(e){D=e},this.IsDeleteRecordPending=function(){return P},this.SetDeleteRecordPending=function(e){P=e},this.SetAdminNoDelete=function(e){H=e},this.GetAdminNoDelete=function(){return H=!1,H},this.SetAspectBCReadFld=function(e){B=e},this.GetAspectBCReadFld=function(){return B},this.SetAdminMode=function(e){I=e},this.GetAdminMode=function(){return I=!1,I},this.SetFldNoDelete=function(e){F=e},this.GetFldNoDelete=function(){return F},this.IsBCFldsActivated=function(){return Q},this.SetBCFldsActivated=function(e){Q=e},this.SetOrigRecVal=function(e){it=e},this.GetOrigRecVal=function(){return it},this.SetMasterBC=function(e){pt=e},this.GetMasterBC=function(){return pt},this.SetPickSrcField=function(e){dt=e},this.GetPickSrcField=function(){return dt},this.GetVBCRecords=function(){return vt},this.SetVBCRecords=function(e){vt=e},this.GetRelatedBCRecords=function(){return mt},this.SetRelatedBCRecords=function(e){mt=e},this.GetLastSelectedRowId=function(){return gt},this.SetLastSelectedRowId=function(e){gt=e};var Et=this._EndLife;this._EndLife=function(){if(SiebelApp.OfflineAppSettings.GetMode()===!0){var t={};t[x]=this.GetName(),t[T]=N,t[o.get("DOUIREG_SRV_SCRIPT")]=!0,l.DeRegisterEvent(t);if(pt)pt=null,this.GetBusObj().EndLife();else{at&&(at.GetName()!=this.GetName()&&at.EndLife(),at=null),Z=null,tt=null,nt=null,z=null,W=null,s=null,u=null;for(var n in e)e[n]&&delete e[n];e=null,L=null,v=null,a=null,_=null,D=null,dt=null,mt=null;var r=this.GetNotifyObject();if(r){var i=r.GetAppletRegistry(),f=i.length;for(var c=0;c<f;c++)r.DeRegister(i[0]);i=null}Et.call(this),Et=null,r=null}}else Et.call(this)}},SiebelApp.S_App.BusComp.prototype=t,SiebelApp.S_App.BusComp.prototype.constructor=SiebelApp.S_App.BusComp;var d={},v={};d.EndLife=e.prototype.EndLife,d.ProcessObjectInfo=e.prototype.ProcessObjectInfo,d.PositionById=e.prototype.PositionById,d.CanInsert=e.prototype.CanInsert,d.WriteRecord=e.prototype.WriteRecord,d.UndoRecord=e.prototype.UndoRecord,d.SetInQueryState=e.prototype.SetInQueryState,d.ProcessNFLObjectInfo=e.prototype.ProcessNFLObjectInfo;var m=SiebelApp.OfflineCacheConfig,g=o.get("IS_DYNAMIC"),y=!1,b=null,w=SiebelApp.Constants,E=w.get("SWE_ARG_EQUAL"),S=w.get("SWE_PROP_NAME"),x=o.get("DOUIREG_OBJ_NAME"),T=o.get("DOUIREG_OBJ_TYPE"),N=o.get("DOUIREG_OBJ_TYPEBUSCOMP"),C=o.get("DOUIREG_OBJ_MTHD"),k=o.get("DOUIREG_EXT_TYPE"),L=o.get("DOUIREG_EXT_TYPEPRE"),A=o.get("DOUIREG_EXT_TYPEPOST"),O=o.get("DOUIREG_EXT_CONTEXT"),M=o.get("SWE_ARG_NOT_EQUAL"),_=o.get("SSA_PRIMARY_FIELD"),D=o.get("SAVE_BC_STATE_ALL"),P=o.get("SAVE_BC_STATE_NONE"),H=o.get("DTYPE_UTCDATETIME"),B="[~]";e.prototype.GetActiveRow=function(){return z.call(this)},v.ProcessObjectInfo=function(e,t){if(!e.GetProperty(g)){var n=w.get("SWE_PST_BUSOBJ_INFO"),i,s=e.GetValue(),u=w.get("SWE_PROP_NAME"),a=CCFMiscUtil_CreatePropSet(),f=e.GetProperty(o.get("STAND_ALONE_INST")),l=!r.IsTrue(f);this.GetUIState=function(){return l};if(r.IsTrue(f))i=CCFMiscUtil_CreatePropSet(),i.SetType(n),i.SetValue(""),i.SetProperty(g,!0);else{i=SiebelApp.S_App.Model.GetDyncPS(n,!1),a.SetType(e.GetType()),a.SetValue(s),a.SetProperty(g,!0),a.SetProperty(g,!0),SiebelApp.OfflineUtils.ProcessDPS(a,e,[u],1,!0);var c=w.get("SWE_PST_REC_LIST"),h=[S];SiebelApp.OfflineUtils.ProcessDPS(a,e,h,1,!0);var p=e.FindChildPosition(c);e.RemoveChild(p);if(!i)return null;i.AddChild(a),SiebelApp.S_App.Model.SetDyncPS([n],[i],1);if(t){s!==this.GetVarName()&&(this.GetVarName=function(){return s});var v=e.GetProperty("pi");v&&(v=v.toString()),this.GetParentId()?this.GetParentId()!==v&&(this.GetParentId=function(){return v}):v&&(this.GetParentId=function(){return v});var m=e.GetChildByType(w.get("SWE_PST_FIELD_LIST"));m&&this.ProcessNFLObjectInfo(m);return}}this.SetSearchSpec(""),this.SetSortSpec(""),e.RemoveProperty(w.get("SWE_PROP_HAS_HIER"))}var y=d.ProcessObjectInfo.call(this,e),b={};b[x]=this.GetName(),b[T]=N,b[C]="loadevent",b[O]=this,b[k]=A;var E=CCFMiscUtil_CreatePropSet();return SiebelApp.S_App.Model.InvokeRegisteredSvc(b,E),y},v.ProcessNFLObjectInfo=function(e){var t=SiebelApp.S_App.BCField,n=e.EnumChildren(!0),r=this.GetFieldMap();do{var i=n.GetProperty(w.get("SWE_PROP_NAME"));i=SiebelApp.S_App.LookupStringCache(i);if(!this.GetDefn().Fields[i])continue;var s=r[i];s?this.GetUIState()&&(n.SetPropertyStr(w.get("SWE_PROP_NAME"),s.GetName()),s.ProcessObjectInfo(n)):(s=new t,s.SetBusComp(this),s.ProcessObjectInfo(n),this.AddField(s))}while(n=e.EnumChildren(!1))},e.prototype.GetActFieldList=function(){return this.GetExtObjProp("m_mapActFields")||this.SetExtObjProp("m_mapActFields",{}),this.GetExtObjProp("m_mapActFields")},e.prototype.GetDeActableFieldList=function(){return this.GetExtObjProp("m_arDeActableFields")||this.SetExtObjProp("m_arDeActableFields",[]),this.GetExtObjProp("m_arDeActableFields")},e.prototype.AddActField=function(e){var t=this.GetFieldDefn(e);if(t&&e){var n=this.GetFieldMap()[e],r;if(n)n.SetActivated(!0);else{var i=
SiebelApp.S_App.LookupSCMap(e);if(i)r=i;else{var s=CCFMiscUtil_ArrayToString([e]);SiebelApp.S_App.AppendToStrCache(s),r=SiebelApp.S_App.LookupSCMap(e)}this.GetActFieldList()[e]=r,this.GetFieldList().indexOf(r)===-1&&this.GetFieldList().push(r)}R.call(this,e)}},e.prototype.InvokeMethodX=function(e,t){var n={err:!1},r;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.InvokeMethodX ");var i,s={},o=[];if(!e)return o.push(e),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrUnknownBCMethod",o,"","","",4,11),n={err:"SSAOMErrUnknownBCMethod",retVal:""},n;s[x]=this.GetName(),s[T]=N,s[C]="DoInvokeMethod",s[O]=this,t||(t=CCFMiscUtil_CreatePropSet()),t.SetProperty("MethodName",e),s[k]=L,r=n=SiebelApp.S_App.Model.InvokeRegisteredSvc(s,t),n={err:!1};if(!r.err){i=r.retVal;if(i.Outputargs&&i.Outputargs.GetProperty("Invoked")&&i.Outputargs.GetProperty("Invoked").toString()==="true")return n={err:r.err,retVal:i.Outputargs},n;i.Outputargs&&t&&(i.Outputargs.SetType(L),t.AddChild(i.Outputargs)),n=q.call(this,e,t),r=n,n={err:!1};if(!r.err){var u=r.retVal;if(u)return o.push(e),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrUnknownBCMethod",o,"","","",4,11),n={err:"SSAOMErrUnknownBCMethod",retVal:""},n;t.SetProperty("RetVal",u),s[k]=A,r=n=SiebelApp.S_App.Model.InvokeRegisteredSvc(s,t),n={err:!1},r.err?n=r:(r.retVal.Outputargs?n={err:!1,retVal:r.retVal.Outputargs}:n={err:!1,retVal:!0},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.InvokeMethodX "))}else n=r}else n=r;return n},e.prototype.CanInvokeMethodX=function(e){var t={err:!1},n;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanInvokeMethodX");var r={},i,s;e||(t={err:!0,retVal:!1}),r[x]=this.GetName(),r[T]=N,r[C]="DoCanInvokeMethod",r[k]=L,r[O]=this;var o=CCFMiscUtil_CreatePropSet(),u;o.SetProperty("MethodName",e),n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(r,o),t={err:!1},s=n.err;if(s)return t={err:s,retVal:i.Outputargs},t;if(!n.err){i=n.retVal;if(i.Outputargs&&i.Outputargs.GetPropertyAsStr("Invoked")==="true")return t={err:s,retVal:i.Outputargs.GetProperty("RetVal").toString()},t;r[k]=A;if(this.IsNamedMethod(e))this.CanInvokeNamedMethod(e),n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(r,o),u=I.call(this,n),t={err:!1,retVal:u};else if(e==="RefreshBusComp")n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(r,o),u=I.call(this,n),t={err:!1,retVal:u};else if(e==="Merge"){var a,f=!1;a=this.GetNumSelected();if(f||a<2)return t={err:!1,retVal:!0},t;t={err:!1,retVal:this.CanMergeRecords()}}else e==="GetFieldLength"||e==="GetFieldDataType"||e==="MergeRecords"||e==="IsFieldReadOnly"||e==="CanDeleteRecords"||e==="CanInsertRecords"||e==="CanMergeRecords"||e==="CanUpdateRecords"||e==="EnableNotify"||e==="EnableHierarchy"||e==="IsExecuted"||e==="IsFieldActive"||e==="UpdateLinks"?(n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(r,o),u=I.call(this,n),t={err:!1,retVal:u}):(n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(r,o),i=n.retVal,u=I.call(this,n),t={err:!1,retVal:u})}else t=n;return SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanInvokeMethodX"),t},e.prototype.IsNamedMethod=function(){return!1},e.prototype.CanInvokeNamedMethod=function(){return!1},e.prototype.CoreMethod=function(e){switch(e){case o.get("DELETERECORD"):case w.get("SWE_GET_PICK_INFO"):case o.get("SWE_POST_CHANGES"):case o.get("DELETERECORD"):case o.get("SWE_CLOSE_APPLET"):case o.get("POSITION_ON_ROW"):case o.get("PICKRECORD"):case o.get("WRITERECORD"):case o.get("NEWRECORD"):case o.get("ADDRECORD"):case o.get("EDIT_FIELD"):case o.get("UNDORECORD"):case o.get("REFRESH_BUSCOMP"):case o.get("REFRESH_RECORD"):return!0;default:return!1}},e.prototype.GetDatumDataType=function(e){switch(e){case"1":case"2":case"4":case"5":case"14":return"text";case"3":return"phone";case"6":return"number";case"7":return"currency";case"8":return"bool";case"9":return"integer";case"10":return"date";case"11":return"time";case"12":return"datetime";case"13":return"utcdatetime";default:return""}},e.prototype.SetActiveRow=function(e,t,n){var r={err:!1},i;t===undefined&&(t=!1);var s;z.call(this)>=0&&z.call(this)!==e&&this.FinishRecord();if(e<0||e>=this.GetWS().length)return this.NotifyNewActiveRow(),this.GetMultiSelectMode()||this.NotifyNewSelection(!0),r={err:"SSAOMErrActiveRow"},r;this.GetMultiSelectMode()||this.NotifyNewSelection(!1),U.call(this,e),t?(s=this.FindWorkSet(this.GetActiveRow()),s&&(r=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),s),i=r,function(e){r={err:!1};if(e.err)return r=e,r;var t=e.retVal;r=this.PositionById(t),e=r,function(e){r={err:!1};if(e.err)return r=e,r}.call(this,e)}.call(this,i))):this.OnActiveRowChanged(),r={err:!1};var u=this.GetNotifyInfoArray(),a=0;if(a<u.length){var f=u[a],l;if(f){var c=f.GetAppletArray(),h=c.length,p;for(var d=0;d<h;d++){p=c[d];if(!n||n!==p)if(e<f.GetBegRow(p))l=f.GetBegRow(p)-e,f.SetBegRow(e,p),f.SetCurrRow(e,p),this.IsNotifyEnabled()&&(l===1&&f.GetSize(p)!==1?this.NotifyScrollData(!1):m!=="PositionOnRow"&&(r=this.NotifyNewData()));else if(e>f.GetBegRow(p)+f.GetSize(p)-1){l=e-(f.GetBegRow(p)+f.GetSize(p)-1),f.SetBegRow(e-f.GetSize(p)+1,p),f.SetCurrRow(f.GetBegRow(p),p);if(this.IsNotifyEnabled())if(l===1&&f.GetSize(p)!==1)this.NotifyScrollData(!0);else{var v=SiebelApp.AjaxRequestMgr.GetActiveRequestObj(),m=v?v.SweCommands[o.get("SWEMETHOD")]:"";m!=="PositionOnRow"&&(r=this.NotifyNewData())}}else this.IsNotifyEnabled()&&this.NotifyNewActiveRow()}}}return r={err:!1},t||(r=this.UpdateLinks(!1)),i=r,r={err:!1},i.err?r=i:(this.GetMultiSelectMode()||this.NotifyNewSelection(!0),r={err:!1}),this.NotifyNewActiveRow(),r},e.prototype.SetCurrCursor=function(e){var t=c.GetActiveRequestObj();if(t&&t.SweCommands&&t.SweCommands.SWEMethod&&this.IsPagination(t.SweCommands.SWEMethod)){var n=this.GetCursor(),r=this.GetScrollCount();e<0&&(e=this.GetActiveRow()),r?n[0]=r+e:n[0]=e,this.SetCursor(n)}},v.PositionById=function(e){var t={err:!1},n;SiebelApp.S_App.GetTimer
()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.PositionById");var i=!1,s=!1,o=e,u=-1,a,f,l=this.GetWS().length,c=!1;if(this.IsExecuted()){this.FinishRecord(),n=t,t={err:!1};if(n.err)t=n;else{var h=0,p=!1;a=this.FindWorkSet(h),t=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),a);var d=function(e){f=e.retVal,f===o&&(u=h,i=!0,p=!0),h++;if(!p&&h<l){a=this.FindWorkSet(h),t=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),a);var n=t;t={err:!1},d.call(this,n)}},v=t;t={err:!1},d.call(this,v),t={err:!1},u===-1?(this.EmptyWorkSet(),U.call(this,-1),c=!0):(s=!0,a=null,t=this.SetActiveRow(u));var m=t;t={err:!1};if(r.IsEmpty(e))SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.PositionById ");else if(c){this.GetCursor()[0]=-1;var g=!1,y,b=function(){t=this.GetNextRecord(),n=t,t={err:!1},n.err||(y=n.retVal,g=y.Id===o,g||b.call(this))};b.call(this),t={err:!1},g||(t=J.call(this,o),n=t,t={err:!1},y=n.retVal),t={err:!1},y&&(this.InsertWorkSet(0,y),t=X.call(this,i,s)),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.PositionById ")}else{if(!m.err){t=X.call(this,i,s);var E=t;t=E}else t=m;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.PositionById ")}}}return t},e.prototype.SetFullSearchSpec=function(){SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SetSearchSpec ");var e=null;if(!r.IsEmpty(this.GetSearchSpec())||!r.IsEmpty(this.GetDefn().searchSpec)){e=r.IsEmpty(this.GetDefn().searchSpec)?"":this.GetDefn().searchSpec;if(r.IsEmpty(this.GetDefn().searchSpec))e+=this.GetSearchSpec(),e=SiebelApp.Query.GetSearchSpec(e,this);else{var t=this.GetSearchSpec();e=SiebelApp.Query.GetSearchSpec(e,this),r.IsEmpty(t)||(t=SiebelApp.Query.GetSearchSpec(this.GetSearchSpec(),this),r.IsEmpty(e)?r.IsEmpty(t)||(e=t):(e=[e],r.IsEmpty(t)||e.push(t)))}}return r.IsEmpty(e)?[]:e},e.prototype.SetFldSearchSpec=function(e,t){var n={err:!1},i;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SetFldSearchSpec "),this.ActivateField(e);var s,u="",a;return e===o.get("SSA_PRIMARY_FIELD")&&this.GetLinkDef()&&!r.IsEmpty(this.GetLinkDef().primeIdFieldName)&&this.GetParentBusComp()?r.IsEmpty(t)||(t==="Y"?s=E:s=M,r.IsEmpty(s)||(e=w.get("SWE_ROW_ID_FIELD"),this.GetParentBusComp().FieldValue(this.GetLinkDef().primeIdFieldName),n={err:!1},s+=u,t=s,a=this.GetFieldMap()[e],a&&(r.IsEmpty(t)||a.SetSearchSpec(t)),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.SetFldSearchSpec "))):(a=this.GetFieldMap()[e],a&&a.SetSearchSpec(t)),this.NotifyNewQuerySpec(e),n},e.prototype.GetFldSearchSpec=function(e){var t=this.GetFieldMap()[e];if(t)return t.GetSearchSpec()},e.prototype.GetSearchExpr=function(){return this.GetSearchSpec()},e.prototype.SetSearchExpr=function(e){this.SetSearchSpec(e)},e.prototype.NotifyNewQuerySpec=function(e){var t;if(this.IsNotifyEnabled()){var n=this.GetNotifyInfoArray(),r=n.length;for(var i=0;i<r;i++){t=n[i];if(t){var s=t.GetBusCompNotify();s&&s.NotifyNewQuerySpec(e)}}}},e.prototype.EmptyWorkSet=function(){var e=this.GetWS();for(var t=e.length-1;t>=0;t--)this.DeleteWorkSet(t)},e.prototype.SetSortSpecification=function(){var e=this.GetDefn().SortSpec;if(r.IsEmpty(e))return[];e=e.split(",");var t,n,i;for(var s=0;s<e.length;s++)t="",e[s].indexOf("(")!==-1?t=e[s].substr(0,e[s].indexOf("(")).trim():t=e[s].trim(),this.GetDefn().Fields[t].DataType==="10"||this.GetDefn().Fields[t].DataType==="12"||this.GetDefn().Fields[t].DataType==="13"?(n=t.replace(/\s+/g,""),i="",i=this.DateFormatConverter(i,n),e[s]=e[s].replace(t,i),e[s]=e[s].trim()):e[s]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(e[s]),e[s]=e[s].replace("(DESCENDING)"," DESC"),e[s]=e[s].replace("(DESC)"," DESC"),e[s]=e[s].replace("DESCENDING"," DESC"),e[s]=e[s].replace("DESC"," DESC"),e[s]=e[s].replace("(ASCENDING)"," ASC"),e[s]=e[s].replace("(ASC)"," ASC"),e[s]=e[s].replace("ASCENDING"," ASC"),e[s]=e[s].replace("ASC"," ASC");return e},e.prototype.DateFormatConverter=function(e,t){return"substr("+t+",7,4)+substr("+t+",1,2)+substr("+t+",4,2)+substr("+t+",12,2)+substr("+t+",15,2)+substr("+t+",18,2)"},e.prototype.WSHomeX=function(e,t){var n=this.GetNotifyInfoArray(),i=n[e];if(e>=n.length||r.IsEmpty(i))return;i.SetCurrRow(i.GetBegRow(t),t),this.CheckActiveRow()},e.prototype.SetWorkSetSizeX=function(e,t,n,r){var i={err:!1},s,o=this.IsNotifyEnabled(),u=!1,a=z.call(this),f=this.GetNotifyInfoArray(),l=f[e],c=f.length,h=0,p=!1,d,v=0,m=this.GetCursor(),g=this.GetWorkSetSize();n=n===undefined?!0:n;if(e>=c||f[e]===null)return alert("SSAOMErrNotifyInfo"),!n&&o&&this.EnableNotify(),i;!n&&o&&this.DisableNotify(),u=this.CheckActivation();var y=l.GetAppletArray(),b=y.length,w;if(t>g){a!==-1&&(d=this.FindWorkSet(this.GetWS().length-1));var E=function(){i=this.GetNextRecord(),s=i,i={err:!1},d=s.retVal;var e=s.err;if(!s.err&&d){for(var n=0;n<this.GetWS().length;n++){var r=this.FindWorkSet(n);r&&r.Id===d.Id&&this.DeleteWorkSet(n)}this.InsertWorkSet(this.GetWS().length,d)}z.call(this)!==-1&&!e&&this.GetWS().length<t&&E.call(this)};if(a!==-1&&this.GetWS().length<t){var m=this.GetCursor();m[0]=0,this.SetCursor(m),E.call(this)}i={err:!1},a=z.call(this);if(a!==-1&&this.GetWS().length>0&&this.GetWS().length<t){d=this.FindWorkSet(0);if(d){var E=function(){i=this.GetPriorRecord(t),s=i,i={err:!1},d=s.retVal;var e=s.err;!e&&d&&(this.InsertWorkSet(0,d),v++),z.call(this)!==-1&&!e&&this.GetWS().length<t?E.call(this):v&&(this.SetActiveRow(a+v),i={err:!1},a=z.call(this),p=!0)};E.call(this)}}i={err:!1},l.SetSize(t,r),this.SetWSSize(t),g=t}else{if(t<g&&l.GetSize(r)===g){l.SetSize(t,r),h=0;for(var S=0;S<b;S++)w=y[S],l.GetSize(w)>h&&(h=l.GetSize(w))}else h=g;if(h<g){while(this.GetWS().length>z.call(this)+1&&this.GetWS().length>h)this.DeleteWorkSet(this.GetWS().length-1),m[0]--;while(this.GetWS().length>h)this.DeleteWorkSet(0);h<=z.call(this)&&(U.call(this,this.GetWS().length-1),a=z.call(this),p=!0),this.SetWSSize(h),g=h,l.SetBegRow(0
,r),l.SetCurrRow(0,r),l.SetSize(t,r),this.IsNotifyEnabled()&&l.GetBusCompNotify()&&l.GetBusCompNotify().NotifyNewData()}else l.SetSize(t,r)}i={err:!1};for(var S=0;S<b;S++){w=y[S];var x=!1;a!==-1&&(a<l.GetBegRow(w)||a>=l.GetBegRow(w)+l.GetSize(w))&&(this.GetWS().length<l.GetSize(w)?l.SetBegRow(0,w):a+l.GetSize(w)<=this.GetWS().length?l.SetBegRow(a,w):l.SetBegRow(this.GetWS().length-l.GetSize(r),w),l.SetCurrRow(l.GetBegRow(r),w),x=!0),l.GetBegRow(w)+l.GetSize(w)>g&&g>=l.GetSize(w)&&(l.SetBegRow(g-l.GetSize(r),w),l.SetCurrRow(l.GetBegRow(r),w),x=!0),l.GetBusCompNotify()&&!u&&(n?!0:l!==l)&&(x?l.GetBusCompNotify().NotifyNewData():p&&l.GetBusCompNotify().NotifyNewActiveRow())}return a!==-1&&(d=this.FindWorkSet(a)),p&&this.OnActiveRowChanged(),!n&&o&&this.EnableNotify(),i},e.prototype.AddReference=function(){this.AddRef(),this.GetRef()},v.EndLife=function(){var e=this.GetNotifyInfoArray(),t=this.GetNotifyInfoArray().length;for(var n=0;n<t;n++){var r=e[n];r&&this.UnRegNotifyObj(n)}this.ResetNotifyArr(),this.ResetInterface(),d.EndLife.call(this)},e.prototype.UnRegNotifyObj=function(e){var t,n=this.GetNotifyInfoArray();if(e<n.length){t=n[e];if(t){var r=t.GetBusCompNotify();r&&r.Remove(this,e),t=null}n.splice(e,1)}},e.prototype.RegNotifyObj=function(e,t){var n,r;n=new SiebelApp.S_App.NotifyInfo,n.SetBusCompNotify(e),n.SetAppletArray(t);var i=this.GetActiveRow();return i>=0&&(n.SetBegRow(0,t),n.SetCurrRow(i,t)),n.SetSize(this.GetWorkSetSize(),t),r=this.GetNotifyInfoArray().length,this.AddNotifyInfoArray(n),e&&e.Add(this,r),r},e.prototype.DeactivateFields=function(){var e=this.GetDeActableFieldList(),t=e.length,n=this.GetActFieldList(),r=this.GetActivatedFieldList(),i=this.GetFieldMap(),s=this.GetFieldList();for(var o=0;o<t;o++)n[e[o]]&&(s.splice(s.indexOf(n[e[o]]),1),delete n[e[o]]),r.indexOf(e[o])!==-1&&r.splice(r.indexOf(e[o]),1),i[e[o]]&&delete i[e[o]]},e.prototype.UpdateDeactivateableFldList=function(e){var t=this.GetDeActableFieldList();if(e){var n=e.length,r=this.GetFieldMap();for(var i=0;i<n;i++)t.indexOf(e[i])===-1&&!r[e[i]]&&t.push(e[i])}},e.prototype.ActivateFields=function(){if(!this.IsBCFldsActivated()){SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.ActivateFields ");var e=[],t=[],n=[],i=[],s=[],o=[],u=0,a={},f=[];this.SetBCFldsActivated(!0);if(r.IsTrue(this.GetDefn().ForceActive)){var l=this.GetDefn().Fields;for(var c in l)l[c]&&(e[u++]=c);this.ActivateFieldList(e)}else{n=this.GetFieldList(),e=n;var h=e.length;if(h>0){for(var p=0;p<h;p++)t[p]=SiebelApp.S_App.LookupStringCache(e[p]);this.ActivateFieldList(t)}i=SiebelApp.S_App.Model.GetSystemFields(),i&&this.ActivateFieldList(i);var d=this.GetReqFieldsHasDefault();d&&this.ActivateFieldList(d),s&&this.ActivateFieldList(s),o=this.GetAdminFields(),o.length>0&&this.ActivateFieldList(o);var v=this.GetLinkDef();v&&v.primeIdFieldName&&this.ActivateField(v.primeIdFieldName),u=0,a=this.GetDefn();for(var m in a.Fields)r.IsTrue(a.Fields[m].ForceActive)&&(f[u++]=m);f.length>0&&this.ActivateFieldList(f)}}},e.prototype.ActivateField=function(e){var t=[];if(e instanceof Array)this.ActivateFieldList(e);else{var n=this.GetFieldMap()[e];if(!n||!n.IsActivated())t=[e],this.ActivateFieldList(t)}},e.prototype.ActivateFieldList=function(e,t){if(e){var n=e.length;if(n>0){var i,o;for(var a=0;a<n;a++){i=e[a],o=this.GetFieldDefn(i);if(o){this.AddActField(i);if(!t){var f=o.pickMap;if(f){var l=o.pickMap.length,c=[],h,p=!1;for(var d=0;d<l;d++)h=[f[d].FldName][0],h!=="{"&&h!==""&&(this.GetFieldMap()[h]||(c.push(h),p=!0));p&&this.ActivateFieldList(c,!0)}}if(o.IsCalculated){var v=o.CalExpr;r.IsEmpty(v)||this.ActivateSubList(o.cFldArray)}var m=o.PreDefault;if(!r.IsEmpty(m)){var g=SiebelApp.Query.GetFieldsFromExp("Pre",m);g[0]!==undefined&&this.ActivateSubList(g)}var y=o.PostDefault;if(!r.IsEmpty(y)){var b=SiebelApp.Query.GetFieldsFromExp("Post",y);b[0]!==undefined&&this.ActivateSubList(b)}o.bDepArray.length>0&&this.ActivateSubList(o.bDepArray),o.fDepArray.length>0&&this.ActivateSubList(o.fDepArray)}else s.CcfLogEvent([u,52,0,27,i,this.GetName()])}}}},e.prototype.ActivateSubList=function(e){if(e){var t=e.length,n=!1,r=[];for(var i=0;i<t;i++)this.GetFieldMap()[e[i]]||(r.push(e[i]),n=!0);n&&this.ActivateFieldList(r)}},e.prototype.GetAdminFields=function(){var e=[];return e},e.prototype.InterpolateBCState=function(e){var t={err:!1},n;t=ht.call(this),n=t,t={err:!1};var r=n.retVal;return e.AddChild(r),t},e.prototype.CanWriteRecord=function(){},e.prototype.CanUpdateRecord=function(){},e.prototype.CanAssociate=function(){var e=!1,t,n,i=this.GetLinkDef(),s=this.GetParentBusComp();if(!this.IsExecuted())return!1;if(!i)return!1;if(!this.GetAdminMode()&&this.IsParentReadOnlyFieldSet())return!1;n=this.GetLinkSrcFieldName();if(s&&n)if(n==="Id"){if(F.call(s,this.GetName()))return!1}else{var o=s.FindWorkSet(z.call(s));if(o){t=o[n];if(r.IsEmpty(t))return!1}}return e=this.GetAdminMode()||!i||!i.NoAssociate,e},e.prototype.CanQuery=function(){return!0},e.prototype.CanMergeRecords=function(){return!0},e.prototype.CanDelete=function(){var e={err:!1},t;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanDelete ");var n=!1,r,i=!1,s=!1;this.GetAspectBCReadFld()&&(e=this.FieldValue(this.GetAspectBCReadFld()),t=e,function(t){e={err:!1},r=t.retVal;if(r&&r==="Y")return e={err:!1,retVal:!1},i=!0,e}.call(this,t)),e={err:!1};if(!i){if(!this.CheckActiveRow())return e={err:!1,retVal:!1},e;if(this.IsNewRecordPending())return e={err:!1,retVal:!1},e;var o=this.GetLinkDef(),u=z.call(this);if(!this.IsNewRecordPending()){if(!this.IsLocked())return e={err:!1,retVal:!1},e;if(this.GetAdminMode()&&this.m_bAdminNoDelete)if(!o||o.interTableName||o.InterChildDelete)return e={err:!1,retVal:!1},e;if(this.GetFldNoDelete()){var a=null;a=this.FindWorkSet(u),e=this.FieldValue(a,this.GetFldNoDelete()),s=!0,t=e,function(t){e={err:!1};if(t.err)e=t;else{var n=t.retVal;if(n==="Y"&&(!o||o.interTableName))return e={err:!1,retVal:!1},e}}.call(this,t)}}if(!s){if(!
this.IsExecuted()||u<0)return e={err:!1,retVal:n},e;if(!this.GetAdminMode()&&(this.IsBCReadOnlyFieldSet()||this.IsParentReadOnlyFieldSet()))return e={err:!1,retVal:n},e;var f=this.GetParentBusComp();if(this.GetBusCompType()===SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST")){var l=this.GetMasterBC()?this.GetMasterBC().GetFieldDefn(this.GetPickSrcField()):null;if(l){var c=l.PickListName,h=SiebelApp.S_App.Model.GetPickListDef(c);n=!h.NoDelete&&!this.GetMasterBC().IsInQueryState()}return e={err:!1,retVal:n},e}var p=this.GetLinkSrcFieldName();if(f&&p&&p==="Id"&&F.call(f,this.GetName()))return e={err:!1,retVal:n},e;o&&o.NoDelete?n=this.GetAdminMode()&&!o.interTableName&&!o.NoInterDelete:n=!0,n&&(n=this.GetAdminMode()||!this.GetDefn().NoUpdate||o&&!o.interTableName);if(!n||this.GetAdminMode())return e={err:!1,retVal:n},e;if(o&&o.interTableName&&!o.NoInterDelete)return e={err:!1,retVal:n},e;if(this.GetDefn().OwnerDel)return e={err:"",retVal:!1},e;e={err:!1,retVal:n},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanDelete ")}}return e},e.prototype.IsLocked=function(){return!0},e.prototype.CanDeleteX=function(){return!0},e.prototype.CanDeferDelete=function(){return!1},e.prototype.HasAssocList=function(){var e=this.GetLinkDef();return this.CanAssociate()&&e&&!r.IsEmpty(e.interTableName)},e.prototype.CanUpdateField=function(e){var t={err:!1},n;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanUpdateField ");var r,i;this.CanInsert()&&this.IsInsertPending()?i=!0:(t=this.CanUpdateX(!0),n=t,t={err:!1},i=n.retVal);var s=function(){if(!i){t={err:!1,retVal:!1};return}r=this.GetFieldMap()[e];if(!r){t={err:!1,retVal:i};return}t=this.IsFieldReadOnly(r),n=t,t={err:!1};if(n.retVal){i=!1,t={err:!1,retVal:i};return}t={err:!1,retVal:i},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanUpdateField ")};return t={err:!1},s.call(this),t},e.prototype.FinishRecord=function(){},e.prototype.CheckActiveRow=function(){var e=z.call(this);return e>=0?!0:!1},v.UndoRecord=function(){var e={err:!1},t;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.UndoRecord "),e=this.GetIdValueX(),this.SetNewTxn(""),this.SetTxnId(""),this.SetEmptyFNm(),this.SetOpType(""),t=e,e={err:!1};if(!t.err){var n=t.retVal;if(!this.IsCommitPending()&&!this.IsDeletePending())return e;if(this.IsDeletePending())return e=this.WriteRecord(),t=e,this.ClearUpdate(),e=t,e;this.IsInsertPending()&&(e=this.DeleteRecordX(n),t=e,e=t);var r=function(){var e=this.GetOrigRecVal();if(e){var t=this.GetWS(),n=this.GetActiveRow();t&&t[n].Id===e.Id&&(t[n]=e),this.SetOrigRecVal("")}this.SetCommitPending(!1),this.SetNewRecPending(!1),this.OnActiveRowChanged(),this.EventChangeRecord(),this.NotifyNewRecordData()},i;i=this.GetParentBusComp();if(i&&i.IsInsertPending()){e=i.UndoRecord();var s=e;e={err:!1},r.call(this,s)}else r.call(this)}return SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.UndoRecord "),e},e.prototype.FindWorkSet=function(e){var t={},n=this.GetWS();return e<n.length?t=n[e]:t=null,t},e.prototype.SQLUpdateRecord=function(){},e.prototype.SQLCommitPending=function(){},e.prototype.FieldValue=function(e,t){var n={err:!1},i;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.FieldValue");var o=CCFMiscUtil_CreatePropSet();o.SetProperty("inputParam1",e);var u={};u[x]=this.GetName(),u[T]=N,u[C]="FieldValue",u[O]=this,o.SetProperty("FieldName",e),o.SetProperty("inputParam2",t);var a={},f=[];u[k]=L,i=n=SiebelApp.S_App.Model.InvokeRegisteredSvc(u,o),n={err:!1};if(!i.err){a=i.retVal;if(a.Outputargs&&a.Outputargs.GetProperty("Invoked")&&a.Outputargs.GetProperty("Invoked").toString()==="true"){var l=a.Outputargs.GetProperty("RetVal"),c=i.err;return l?n={err:c,retVal:l}:n={err:c,retVal:""},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.FieldValue"),n}a.Outputargs&&o&&(a.Outputargs.SetType(L),o.AddChild(a.Outputargs));var h=null;if(!t&&this.CheckActiveRow()){var p=z.call(this);t=this.FindWorkSet(p)}if(!t)return SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoActiveRow","","","","",0,73),!r.IsEmpty(e)&&!r.IsEmpty(this.GetFieldDefn(e))&&(h=SiebelApp.Query.Parse(this.GetFieldDefn(e).CalExpr,t)),n={err:!0,retVal:""},n;var d=!1,v=e,m={};m=this.GetFieldMap()[v],m?this.IsActiveFieldListDirty()&&!this.IsInsertPending()&&!m.IsCalc()&&!m.IsSystemField()&&this.GetDefn().Dstnct&&(d=!0):this.IsActiveFieldListDirty()&&!this.IsInsertPending()&&(d=!0);if(!!d)return f.push(e),f.push(this.GetName()),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrFieldInActive",f,"","","",0,73),n={err:"SSAOMErrFieldInActive",retVal:""},n;if(e==="SSA Primary Field")if(!this.GetLinkDef()||this.GetLinkDef().primeIdFieldName===null)h=null;else{var g,y=function(){n=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),t),i=n,n={err:!1};var e=i.retVal;h=e===g?"Y":"N"};this.GetParentBusComp()?(n=this.GetParentBusComp().FieldValue(this.GetLinkDef().primeIdFieldName),i=n,n={err:!1},g=i.retVal,y.call(this)):y.call(this)}else{var E,S=null;if(!t&&b){var M;S=this.GetFieldDefn(w.get("SWE_ROW_ID_FIELD")),n=this.FieldValue(S.GetName()),i=n,E=i.retVal,n=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),b),i=n,n={err:!1},M=i.retVal,E===M&&(t=b)}(function(){n={err:!1};if(!m||m.IsInactive(1))return f.push(e),f.push(this.GetName()),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrFieldInActive",f,"","","",0,73),n={err:"SSAOMErrFieldInActive",retVal:""},n;t&&(h=t[SiebelApp.OfflineUtils.RemoveNonAlphaChars(e)]);if(!h&&m.IsCalc()&&this.GetFieldDefn(e).CalExpr){if(!this.GetFieldDefn(e).CalcQuery){var r=SiebelApp.Query.Parse(this.GetFieldDefn(e).CalExpr);this.GetFieldDefn(e).CalcQuery=r}if(this.GetFieldDefn(e).cDepArray){var o=this.GetFieldDefn(e).cDepArray,u=o.length,a=0,l=function(){n=this.FieldValue(o[a]),i=n,n={err:!1},i.err||(n=Y.call(this,o[a],i.retVal),t[s.RemoveNonAlphaChars(o[a])]=i.retVal)
,a++,a<u&&l.call(this)};a<u&&l.call(this)}n={err:!1},h=SiebelApp.Query.Evaluate(this.GetFieldDefn(e).CalcQuery,this,null,t),t&&e==="SSA Primary Field"?t[SiebelApp.OfflineUtils.RemoveNonAlphaChars(e)]=h:t||(n=this.FieldValue(e))}}).call(this)}var _=function(){u[k]=A,o.SetProperty("RetVal",h),i=n=SiebelApp.S_App.Model.InvokeRegisteredSvc(u,o),n={err:!1},a=i.retVal,a.Outputargs&&a.Outputargs.GetProperty("Invoked")&&a.Outputargs.GetProperty("Invoked").toString()==="true"&&(h=a.Outputargs.GetPropertyAsStr("RetVal"),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.FieldValue")),n={err:!1,retVal:h}},D=n;n={err:!1},_.call(this,D)}else n=i;return n},e.prototype.IsInInsertMode=function(){return!0},e.prototype.Evaluate=function(){return!0},e.prototype.IsActiveFieldListDirty=function(){var e=this.GetExtObjProp("m_bActiveFieldListDirty");return e||this.SetExtObjProp("m_bActiveFieldListDirty",!0),this.GetExtObjProp("m_bActiveFieldListDirty")},e.prototype.SetActiveFieldListDirty=function(e){this.SetExtObjProp("m_bActiveFieldListDirty",e)},e.prototype.SetFieldValueX=function(e,t,n,i,o){var a={err:!1},f;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SetFieldValueX");var l;if(!this.GetFieldDefn(e))return s.CcfLogEvent([u,55,0,9,e,this.GetName()]),l=[],l.push(e),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoSuchField",l,"","","",0,9),a={err:"BCErrNoSuchField",retVal:!1},a;if(n===undefined||n===null)n=!1;if(i===undefined||i===null)i=!1;if(o===undefined||o===null)o=!1;this.ActivateField(e);var c=this.GetField(e);if(c){var h=c.GetDataType();if(h==="utcdatetime"||h==="datetime"||h==="date"||h==="time")t=SiebelApp.S_App.OfflineLocaleObject.FormattedToString(h,t)}var p,d=CCFMiscUtil_CreatePropSet(),v={};l=[],d.SetProperty("inputParam1",e),d.SetProperty("inputParam2",t),d.SetProperty("inputParam3",n),d.SetProperty("inputParam4",i),d.SetProperty("inputParam5",o),v[x]=this.GetName(),v[T]=N,v[C]="SetFieldValue",v[O]=this,v[k]=L,f=a=SiebelApp.S_App.Model.InvokeRegisteredSvc(v,d),a={err:!1};if(!f.err){p=f.retVal;if(p.Outputargs){if(p.Outputargs.GetPropertyAsStr("Invoked")==="true")return a={err:f.err,retVal:p.Outputargs},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.SetFieldValueX"),a;p.Outputargs.SetType(L),d.AddChild(p.Outputargs)}if(!this.CheckActiveRow())return nt.call(this,e),a={err:!0,retVal:!1},a;var m=null,g=!1,y=null;m=this.ValidateFieldDef(e);if(!m)return nt.call(this,e),a={err:!0,retVal:!1},a;var b=this.GetFieldMap()[e];b||s.CcfLogEvent([u,55,0,9,e,this.GetName()]);if(b.IsInactive(1))return a={err:!1,retVal:!1},l=[],l.push(e),l.push(this.GetName()),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrFieldInActive",l,"","","",0,9),a={err:"SSAOMErrFieldInActive",retVal:!1},tt.call(this,g,e),a;r.IsEmpty(t)?y="":(y=$.trim(t),t=y);if(!b.IsCalc()&&!n&&!r.IsEmpty(y)&&y.length>b.GetLength())return l.push(e),l.push(b.GetLength()),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrDataTooLong",l,"","","",0,9),nt.call(this,e),a={err:"SSAOMErrDataTooLong",retVal:!1},a;a=this.FieldValue(e),f=a,a={err:!1};if(!f.err){var w=f.retVal;if(!b.AreValuesEqual(t,w))return tt.call(this,g,e),a={err:!1,retVal:!1},a;var E=!0;n?(this.IsDeletePending()?(a=this.WriteRecord(),f=a,a={err:!1},f.err?a=f:a=G.call(this,e,g,t)):a=G.call(this,e,g,t),f=a,a={err:!1},f.err?a=f:(a=K.call(this,e,g,v,d),f=a,a=f)):(a=Q.call(this,b,e,y,t,g),f=a,a={err:!1},f=f.retVal,E=f.bContinue,E?(g=f.bPicked,a=G.call(this,e,g,t),f=a,a={err:!1},f.err?a=f:(a=K.call(this,e,g,v,d),f=a,a=f)):a=f.retObj)}else a=f}else a=f;return a},e.prototype.ValidateFieldDef=function(e){var t,n=[];return t=this.GetFieldMap()[e],t===undefined?(n.push(e),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoSuchField",n,"","","",0,74),!1):!0},e.prototype.ValidateAssocValue=function(){},e.prototype.IsUndoRedoInProgress=function(){return!1},e.prototype.AddUndo=function(){},e.prototype.SetUpdated=function(e){var t={err:!1},n,r=!1,i=!1;if(b){if(b!==e)return SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrUpdMode","","","","",0,75),t={err:!1,retVal:!1},t}else this.UpdateRecordX(e),t={err:!1},r=!0;t={err:!1};if(r){(i=this.WriteRecord())==="SSASqlErrWriteConflict"&&(t=i=this.WriteRecord());if(!i)return t={err:!1,retVal:!1},t}return t={err:!0,retVal:!1},t},e.prototype.UpdateParentRecord=function(e){var t={err:!1},n;if(e===null||e===undefined)e=!1;return this.IsExecuted()||(SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrNotExecuted","","","","",0,76),t={err:"SSASqlErrNotExecuted",retVal:!1}),!e&&!this.CanUpdateParent()&&(SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrNoUpdate","","","","",0,76),t={err:"SSAOMErrNoUpdate",retVal:!1}),this.UpdateRecordX(),this.SetCommitPending(!0),this.m_redoRecordAction="REDO_RECORD_NONE",t={err:!1,retVal:!0},t},e.prototype.CanUpdateParent=function(e){var t=!1,n=null,r;r=this.GetParentBusComp();if(e===null||e===undefined)e=!0;if(e&&this.GetSelection()<0)return t;if(this.IsNewRecordPending())return t=!0,t;if(e&&!y&&(this.IsBCReadOnlyFieldSet()||this.IsParentReadOnlyFieldSet()))return t;if(this.GetBusCompType()===SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST")){var i=this.GetMasterBC()?this.GetMasterBC().GetFieldDefn(this.GetPickSrcField()):null;if(i){var s=i.PickListName,o=SiebelApp.S_App.Model.GetPickListDef(s);t=!o.NoUpdate&&!this.GetMasterBC().IsInQueryState()}return t}var u=this.GetLinkSrcFieldName();return e&&r&&u==="Id"&&u&&F.call(r,this.GetName())?t:(n=this.GetLinkDef(),t=!n||!n.NoUpdate,t&&(t=y||!this.GetDefn().NoUpdate),t)},e.prototype.UpdateRecordX=function(e){var t={err:!1},n;if(e===null||e===undefined)e=!0;if(!this.IsExecuted())return SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrNotExecuted","","","","",0,68),t={err:"SSASqlErrNotExecuted",retVal:!1},t;var r=function(){this.SetCommitPending(!0),this.FinishRecord();if(this.CheckActiveRow())var e=this.GetSelection(),n=this.FindWorkSet(e,n);this.
SetExtObjProp("IsEditRecord",!1),t={err:!1,retVal:!0}};return e?r.call(this):(t=this.CanUpdateX(),n=t,t={err:!1},n.retVal?r.call(this):(SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrNoUpdate","","","","",0,68),t={err:"SSAOMErrNoUpdate",retVal:!1})),t},e.prototype.GetBatchMode=function(){var e;return e},e.prototype.IsVBC=function(){return this.GetDefn().TableName===""?!0:!1},e.prototype.CanUpdateX=function(e,t){var n={err:!1},i;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanUpdateX ");var s,o=CCFMiscUtil_CreatePropSet(),u={};o.SetProperty("inputParam1",e),o.SetProperty("inputParam2",t),u[x]=this.GetName(),u[T]=N,u[C]="CanUpdateX",u[O]=this,u[k]=L,i=n=SiebelApp.S_App.Model.InvokeRegisteredSvc(u,o),n={err:!1},s=i.retVal;if(s.Outputargs&&s.Outputargs.GetProperty("Invoked")&&s.Outputargs.GetProperty("Invoked").toString()==="true"){var a=s.Outputargs.GetProperty("RetVal"),f=!1;return r.IsTrue(a)?f=!0:f=!1,n={err:i.err,retVal:f},n}if(!i.err){s=i.retVal,s.Outputargs&&(s.Outputargs.SetType(L),o.AddChild(s.Outputargs));var l=this.GetPickAppletSrcInfo();if(this.GetIsPopup()&&!l&&!this.IsVBC())return n={err:!1,retVal:!1},n;if(t!==undefined)n=this.CanUpdateField(t),i=n,n=i;else{var c=!1,h=this.GetParentBusComp();if(e===null||e===undefined)e=!0;if(e&&z.call(this)<0)return n={err:!1,retVal:c},n;if(this.IsNewRecordPending())return c=!0,n={err:!1,retVal:c},n;if(e&&!y&&(this.IsBCReadOnlyFieldSet()||this.IsParentReadOnlyFieldSet()))return n={err:!1,retVal:c},n;if(this.GetIsPopup()&&l&&!this.IsVBC()){var p=l.SrcApplet,d=l.SrcAppletFld;p=SiebelApp.S_App.GetActiveView().GetApplet(p);var v=p.GetBusComp(),m=v.GetDefn().Fields[d].PickListName;if(m)return m=SiebelApp.Metadata.GetPickListDef(m),n={err:!1,retVal:!m.NoUpdate&&!v.IsInQueryState()},n}var g=this.GetLinkSrcFieldName();if(e&&h&&g&&F.call(this,this.GetName()))return n={err:!1,retVal:c},n;c=!this.GetLinkDef()||!this.GetLinkDef().NoUpdate,this.GetLinkDef()||(c=!0),c&&(c=y||!this.GetDefn().NoUpdate),n={err:!1,retVal:c},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanUpdateX ")}}else n=i;return n},e.prototype.IsBCReadOnlyFieldSet=function(){var e=!1;return e},e.prototype.IsParentReadOnlyFieldSet=function(){var e=!1;return e},e.prototype.GetLinkSrcFieldName=function(){return this.GetLinkDef()?this.GetLinkDef().srcFieldName:null},e.prototype.IsFieldReadOnly=function(e){var t={err:!1},n,i=!1;if(e){i=r.IsTrue(e.IsReadOnly());if(!i){var s=this.GetParentBusComp(),o=SiebelApp.S_App.LookupStringCache(e.GetName()),u;o==="SSA Primary Field"&&s?(u=s.CanInsert(o),u?t={err:!1,retVal:!1}:(t=s.CanUpdateField(o),n=t,t={err:!1,retVal:!n.retVal})):(u=this.CanInsert(o),u?t={err:!1,retVal:!1}:(t=this.CanUpdateField(o),n=t,t={err:!1,retVal:!n.retVal}))}else t={err:!1,retVal:i}}else t={err:!1,retVal:!0};return t={err:!1,retVal:i},t},e.prototype.CanInsert=function(e){var t=!1,n=this.GetParentBusComp();if(e===null||e===undefined)e=!0;if(e&&this.IsParentReadOnlyFieldSet())return t;if(this.GetBusCompType()===SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST")){var r=this.GetMasterBC()?this.GetMasterBC().GetFieldDefn(this.GetPickSrcField()):null;if(r){var i=r.PickListName,s=SiebelApp.S_App.Model.GetPickListDef(i);t=!s.NoUpdate&&!this.GetMasterBC().IsInQueryState()}return t}if(e){if(!this.IsExecuted())return t;var o=this.GetLinkSrcFieldName();if(e&&n&&o&&F.call(this,this.GetName()))return t}return this.GetDefn().NoUpdate?!1:!0},e.prototype.ValidateFieldValue=function(){},e.prototype.OnSetFieldValue=function(e){e===_&&(this.NotifyBeginLongOp(),this.NotifyNewPrimary(e),this.NotifyNewData(e),this.NotifyEndLongOp())},e.prototype.NotifyBeginLongOp=function(){},e.prototype.NotifyEndLongOp=function(){},e.prototype.NotifyNewPrimary=function(){},e.prototype.NotifyNewData=function(e){var t={err:!1},n;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NotifyNewData ");var r={};r[x]=this.GetName(),r[T]=N,r[C]="NotifyNewData",r[O]=this;var i=CCFMiscUtil_CreatePropSet();i.SetProperty("inputParam1",e);var s;r[k]=L,n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(r,i),t={err:!1};if(!n.err){s=n.retVal;if(s.Outputargs&&s.Outputargs.GetProperty("Invoked")&&s.Outputargs.GetProperty("Invoked").toString()==="true")return t={err:n.err,retVal:s.Outputargs},t;s.Outputargs&&i&&(s.Outputargs.SetType(L),i.AddChild(s.Outputargs));if(!e)e=null;else{if(!this.IsNotifySysEnabled())return t;t=this.NotifyNewDataWS(e)}var o,u=this.GetNotifyInfoArray(),a=u.length;if(this.IsNotifyEnabled())for(var f=0;f<a;f++){o=u[f];if(o){var l=o.GetBusCompNotify();l&&(l.NotifyNewData(e),!e&&this.GetMultiSelectMode()&&l.NotifyChangeSelection())}}if(e&&this.GetFieldDefn(e)&&this.GetFieldDefn(e).fDepArray){var c=this.GetFieldDefn(e).fDepArray,h=c.length,p=0,d,v,m=function(){this.GetDefn().Fields[c[p]].IsCalculated==="T"&&(d=z.call(this),Y.call(this,c[p],""),v=this.FindWorkSet(d),t=this.FieldValue(c[p],v),n=t,t={err:!1},n.err||(t=Y.call(this,c[p],n.retVal),n=t,t={err:!1},n.err||(t=this.NotifyNewData(c[p]),p++,h>p&&m.call(this))))};h&&m.call(this)}r[k]=A,n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(r,i),t=n,SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NotifyNewData ")}else t=n;return t},e.prototype.NotifyNewDataWS=function(e){var t={err:!1},n;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NotifyNewDataWS ");var r={};r[x]=this.GetName(),r[T]=N,r[C]="NotifyNewData",r[O]=this;var i=CCFMiscUtil_CreatePropSet();i.SetProperty("inputParam1",e);var s;r[k]=L,n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(r,i),t={err:!1};if(!n.err){s=n.retVal;if(s.Outputargs&&s.Outputargs.GetProperty("Invoked")&&s.Outputargs.GetProperty("Invoked").toString()==="true")return t={err:n.err,retVal:s.Outputargs},t;s.Outputargs&&i&&(s.Outputargs.SetType(L),i.AddChild(s.Outputargs));var o;if(!e)return t;var u=this.GetNotifyInfoArray(),a=u.length;for(var f=0;f<a;f++){o=u[f];if(o){var l=o.GetBusCompNotify
();l&&l.NotifyNewDataWS(e)}}r[k]=A,n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(r,i),t=n,SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NotifyNewDataWS ")}else t=n;return t},e.prototype.NotifySelModeChange=function(e){var t;if(this.IsNotifyEnabled()){var n=this.GetNotifyInfoArray(),r=n.length;for(var i=0;i<r;i++){t=n[i];if(t){var s=t.GetBusCompNotify();s&&s.NotifySelModeChange(e)}}}},e.prototype.NotifyNewSelIds=function(){var e,t=this.GetSelRowIdArray();if(this.IsNotifyEnabled()){var n=this.GetNotifyInfoArray(),r=n.length;for(var i=0;i<r;i++){e=n[i];if(e){var s=e.GetBusCompNotify();s&&s.NotifyNewSelIds(t)}}}},e.prototype.NotifyChangeSelection=function(){var e;if(this.IsNotifyEnabled()){var t=this.GetNotifyInfoArray(),n=t.length;for(var r=0;r<n;r++){e=t[r];if(e){var i=e.GetBusCompNotify();i&&i.NotifyChangeSelection()}}}},e.prototype.NotifyScrollData=function(e,t){var n;if(this.IsNotifyEnabled()){var r=this.GetNotifyInfoArray(),i=r.length;for(var s=0;s<i;s++){n=r[s];if(n){var o=n.GetBusCompNotify();o&&o.NotifyScrollData(e,t)}}}},e.prototype.NotifyNewSelection=function(e){var t;if(this.IsNotifyEnabled()){var n=this.GetNotifyInfoArray(),r=n.length;for(var i=0;i<r;i++){t=n[i];if(t){var s=t.GetBusCompNotify();s&&s.NotifyNewSelection(e)}}}else this.NotifyStateChanged("activeRow",z.call(this))},e.prototype.NotifyStateChanged=function(e,t){var n=!1,r;if(!this.IsNotifySysEnabled())if(e==="activeRow"||e==="bExecuted"||e==="bNewRecPending"||e==="bCommitPending")return n;var i=this.GetNotifyInfoArray(),s=i.length;for(var o=0;o<s;o++){r=i[o];if(r){var u=r.GetBusCompNotify();u&&u.NotifyStateChanged(e,t)}n=!0}return n},e.prototype.NotifyNewActiveRow=function(){var e;if(this.IsNotifyEnabled()){var t=this.GetNotifyInfoArray(),n=t.length;for(var r=0;r<n;r++){e=t[r];if(e){var i=e.GetBusCompNotify();i&&i.NotifyNewActiveRow()}}}},v.WriteRecord=function(e){var t={err:!1},n,i,a=[],l=[],c=[],h,p,d,v,m=CCFMiscUtil_CreatePropSet(),g=this.GetBCTableInsertState(),y={},b,E;y[x]=this.GetName(),y[T]=N,y[C]="WriteRecord",y[O]=this,SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.WriteRecord"),y[k]=L,n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(y,m),t={err:!1},v=n.retVal;var S=n.err;if(S)return t={err:S,retVal:v},t;if(v.Outputargs){if(v.Outputargs.GetPropertyAsStr("Invoked")==="true")return this.SetCommitPending(!1),this.SetNewRecPending(!1),this.NotifyNewRecordData(),t={err:S,retVal:v.Outputargs},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.WriteRecord"),t;v.Outputargs.SetType(L),m.AddChild(v.Outputargs);var M=v.Outputargs.GetPropertyAsStr("bAddSyncQ");r.IsEmpty(M)||(e=M)}if(this.IsVBC()){this.SetCommitPending(!1),this.SetNewRecPending(!1),this.NotifyNewRecordData();var _=this.GetCursor()[0],D=this.GetActiveRow(),P=this.GetWSSize();return _<P?this.GetVBCRecords()[D]=this.GetWS()[D]:this.GetVBCRecords()[_-(P-1-D)]=this.GetWS()[D],t}var H={};if(g===o.get("INSMODE_ASSOCONLY")){var B=this.GetInsertStatement();t=SiebelApp.BrowserCacheMgr.Execute(B.insertquery,B.values)}else{if(!this.IsCommitPending())return t={err:!0},t;if(!this.CheckActiveRow())return SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoActiveRow","","","","",0,78),t={err:"BCErrNoActiveRow",retVal:!1},t;if(this.IsDeletePending())return t={err:!0},t;p=z.call(this),h=this.FindWorkSet(p),i=h.Id;var j=this.GetFieldList(),F=[];a=[];for(var I=0;I<j.length;I++){var q=SiebelApp.S_App.LookupStringCache(j[I]),R=this.GetFieldMap()[q];if(R&&R.IsActivated()){a.push(j[I]),F.push(q);continue}}d=this.GetName();var U=this.GetParentBusComp()?!0:!1,W=!1;this.SetDefaultValues(!1),function(){t={err:!1};var e=0,n=a.length,r=function(){U&&!this.GetExtObjProp("m_pCurLinkQueryDef").Defn.interTableName&&F[e]===this.GetExtObjProp("m_pCurLinkQueryDef").Defn.destFieldName?(W=!0,l[e]=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue,c[e]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(F[e]),this.SetLocalFNm(c[e]),this.SetLocalFVal(c[e],l[e]),e++,e<n&&r.call(this)):(t=this.FieldValue(F[e]),D=t,t={err:!1},l[e]=D.retVal,c[e]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(F[e]),e++,e<n&&r.call(this))};r.call(this);var o=this.CheckRequiredFields(a,l);if(o.err)return t={err:o.err,retVal:o.retVal},t;var h=this.GetParentBusComp(),p;h&&(p=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.interTableName),U&&!p&&!W&&(c[e]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetExtObjProp("m_pCurLinkQueryDef").Defn.destFieldName),F[e]=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.destFieldName,l[e]=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue,this.SetLocalFNm(c[e]),this.SetLocalFVal(c[e],l[e]),e++);var v=!1;E=this.GetDefn().Fields;var m=[],g=[],y=[],S=[];if(h&&p)for(var x=0;x<e;x++){var T=E[F[x]];if(T.Join&&T.JoinInfo.JoinType==="X"){var N=T.ColName;if(f.DoesFieldExist(p,N)){var C=g.indexOf(N);C!=-1?l[x]&&(S[C]=l[x]):(g.push(N),S.push(l[x]),v=!0)}else m.push(c[x]),y.push(l[x])}else m.push(c[x]),y.push(l[x])}var k;o=this.FieldValidation(a,l);if(o.retVal===!0)return t=o,t;ot.call(this,a,l),ut.call(this,a,l),H.FldNames=this.GetLocalFNm(),H.FldValue=this.GetLocalfVal();if(this.IsInsertPending())if(!v)b=SiebelApp.SqlBuilder.InsertRecord(d,c,l),k=this.GetRecordCount(),this.SetRecordCount(++k),s.CcfLogEvent([u,34,0,0,"Table: ",this.GetName(),b.insertquery]),s.CcfLogEvent([u,44,0,0,"Bind variables",b.values]),t=SiebelApp.BrowserCacheMgr.Execute(b.insertquery,b.values);else{var L=mt.call(this,this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue,i);b=SiebelApp.SqlBuilder.InsertRecord(d,m,y),g.push(w.get("SWE_ROW_ID_FIELD")),S.push(L),H.InterTableName=p,H.InterTableCol=g,H.InterTableColVal=S,k=this.GetRecordCount(),this.SetRecordCount(++k),s.CcfLogEvent([u,34,0,0,"Table: ",this.GetName(),b.insertquery]),s.CcfLogEvent([u,44,0,0,"Bind variables",b.values]),t=SiebelApp.BrowserCacheMgr.Execute(b.insertquery,b.values);var A=[],O=[],M=SiebelApp.SqlBuilder.BuildWhereClause("=",w.get("SWE_ROW_ID_FIELD"),"'"+L+"'");
O.push(M);var _=SiebelApp.SqlBuilder.SelectRecordPopulateWS(p,O,A),D=SiebelApp.BrowserCacheMgr.SelectRecord(_,!0),P=!1;if(!D.err){var B=D.retVal;if(B&&B.length){var j=[],I=[];for(var e=0;e<g.length;e++)S[e]!=""&&(j.push(g[e]),I.push(S[e]));b=SiebelApp.SqlBuilder.UpdateRecord(p,j,I,w.get("SWE_ROW_ID_FIELD"),L),s.CcfLogEvent([u,34,0,51,"Inter Table: ",p,b]),s.CcfLogEvent([u,44,0,51,"Bind variables",L]),t=SiebelApp.BrowserCacheMgr.UpdateRecord(b,L),P=!0}}if(!P){var q=SiebelApp.SqlBuilder.InsertRecord(p,g,S);s.CcfLogEvent([u,34,0,0,"Inter Table: ",p,q.insertquery]),s.CcfLogEvent([u,44,0,0,"Bind variables",q.values]),t=SiebelApp.BrowserCacheMgr.Execute(q.insertquery,q.values)}}else if(!v)b=SiebelApp.SqlBuilder.UpdateRecord(d,c,l,w.get("SWE_ROW_ID_FIELD"),i),s.CcfLogEvent([u,34,0,51,"Table: ",this.GetName(),b]),s.CcfLogEvent([u,44,0,51,"Bind variables",i]),t=SiebelApp.BrowserCacheMgr.UpdateRecord(b,i);else{b=SiebelApp.SqlBuilder.UpdateRecord(d,m,y,w.get("SWE_ROW_ID_FIELD"),i),t=SiebelApp.BrowserCacheMgr.UpdateRecord(b,i),s.CcfLogEvent([u,34,0,51,"Table: ",this.GetName(),b]),s.CcfLogEvent([u,44,0,51,"Bind variables",i]);var L=mt.call(this,this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue,i);H.InterTableName=p,H.InterTableCol=g,H.InterTableColVal=S,H.InterTableRowId=L,b=SiebelApp.SqlBuilder.UpdateRecord(p,g,S,w.get("SWE_ROW_ID_FIELD"),L),s.CcfLogEvent([u,34,0,51,"Inter Table: ",p,b]),s.CcfLogEvent([u,44,0,51,"Bind variables",L]),t=SiebelApp.BrowserCacheMgr.UpdateRecord(b,L)}}.call(this)}var X=function(){this.SetCommitPending(!1),this.SetNewRecPending(!1),this.OnWriteRecord(),this.GetParentBusComp()&&(t=this.GetParentBusComp().WriteRecord(),this.SetParCommitPen(!1)),t={err:!1};if(g!==o.get("INSMODE_ASSOCONLY")){this.NotifyNewRecordData(),this.SetOpType(o.get("WRITERECORD"));for(var u in E)E[u].IsCalculated==="T"&&(H.FldNames.push(s.RemoveNonAlphaChars(u)),H.FldValue.push(""));this.SetLocalTxn(JSON.stringify(H))}e=r.IsEmpty(e)?!0:r.IsTrue(e),this.UpdateSync(i,e),function(){t={err:!1},this.SetOrigRecVal(""),g===o.get("INSMODE_ASSOCONLY")&&(this.SetBCTableInsertState(o.get("INSMODE_NORMAL")),this.SetInsertStatement("")),y[k]=A,n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(y,m),t={err:!1},v=n.retVal;var e=n.err;if(e){t={err:e,retVal:v};return}SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.WriteRecord")}.call(this)};n=t,t={err:!1};if(!n.err)X.call(this);else{var V=n.retVal.message;n.retVal.code==6?(SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrDupConflict","","","","",0,77),t={err:"SSASqlErrDupConflict",retVal:""}):V?(V=V.toLowerCase(),n.retVal.code==1&&(V==="constraint failed"||V.indexOf("not unique")>-1)||V.indexOf("unique constraint failed")>-1?(SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrDupConflict","","","","",0,77),t={err:"SSASqlErrDupConflict",retVal:""}):(SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrEndTrx","","","","",0,77),t={err:"SSASqlErrEndTrx",retVal:""},SiebelJS.Log(n.retVal.message))):t={err:n.err,retVal:""}}return t},e.prototype.ReplaceAmp=function(e){return e.indexOf("&")!==-1&&(e=e.replace("&",";amp;")),e},e.prototype.SyncQRec=function(e){var t={err:!1},n,r=this.GetTxnId();r===""&&(r=s.GetTempId(),this.SetTxnId(r));var i=w.get("SWE_PST_BUSOBJ_INFO")+"="+this.GetBusObj().GetName()+"&",o=this.GetName();o=this.ReplaceAmp(o),i=i+w.get("SWE_PST_BUSCOMP_INFO")+"="+o+"&",i=i+w.get("SWE_METHOD_STR")+"="+this.GetOpType()+"&",this.GetBusObj().GetUIState()===!1?i=i+w.get("SWE_VIEW_ARG")+"="+""+"&":i=i+w.get("SWE_VIEW_ARG")+"="+SiebelApp.S_App.GetActiveView().GetName()+"&",i=i+w.get("SWE_ROW_ID_STR")+"="+URLEncode(e)+"&",i=i+"TxnId="+r;if(this.GetParentBusComp()){var u=this.GetParentBusComp().FindWorkSet(this.GetParentBusComp().GetSelection());t=this.GetParentBusComp().FieldValue(w.get("SWE_ROW_ID_FIELD"),u),n=t,t={err:!1},n.err?t=n:(i=i+"&"+w.get("SWE_ROW_IDS_STR")+"="+n.retVal,t={err:!1,retVal:i})}else t={err:!1,retVal:i};return t},e.prototype.NewRecordX=function(e,t,n){var r={err:!1},i;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NewRecordX");var s=null,u,a=!1,f=null,c=null,h={};h.bAddUndo=!1,h.bAfterNotify=!1,h.bNewRecordInsertedInWorkSet=!1,h.bSetPrimary=!1,h.bInsertBefore=e;var p,d,v={};v[x]=this.GetName(),v[T]=N,v[C]="NewRecord",v[O]=this;var m=CCFMiscUtil_CreatePropSet();m.SetPropertyStr("InsertBefore",e),m.SetPropertyStr("Internal",t),m.SetPropertyStr("IdValue",n),v[k]=L,i=r=l.InvokeRegisteredSvc(v,m),r={err:!1},d=i.retVal,p=i.err;if(d.Outputargs&&d.Outputargs.GetProperty("Invoked")&&d.Outputargs.GetProperty("Invoked").toString()==="true"){var g=d.Outputargs.GetProperty("RetVal").toString();return r={err:p,retVal:g},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.NewRecord"),r=rt.call(this,h),r}d.Outputargs&&m&&(d.Outputargs.SetType(L),m.AddChild(d.Outputargs)),a=this.IsExecuted();if(!a)return r=rt.call(this,h),r;if(!t&&!this.CanInsert())return alert("SSAOMErrNoInsert"),r=rt.call(this,h),r;s=z.call(this),c=this.FindWorkSet(s),s===-1?u=0:u=h.bInsertBefore?s:s+1,this.InsertWorkSet(u,f,!0),s=u,U.call(this,s),c&&this.GetWS().length>this.GetWorkSetSize()&&(!this.IsVBC()&&!this.GetIsRelatedBC()?e||s!==this.GetWS().length-1?this.DeleteWorkSet(this.GetWS().length-1):(this.DeleteWorkSet(0),U.call(this,--s)):U.call(this,s)),this.SetCommitPending(!0),this.SetNewRecPending(!0),h.bRecordCreated=!0,it.call(this,h),this.SetDefaultValues(!0),this.SetOpType(o.get("NEWRECORD")),r=this.SyncQRec("rowId"),i=r,r={err:!1};var y=i.retVal;return this.SetNewTxn(y),t||(this.NotifyNewRecord(e),h.bAfterNotify=!0,r=this.UpdateLinks(!1)),this.SetExtObjProp("isNewRecord",!1),v[k]=A,i=r=l.InvokeRegisteredSvc(v,m),r=i,SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NewRecordX"),r},e.prototype.InsertWorkSet=function(e,t,n){t=st.call(this,t);var r=n?this.CreateRecord(""):t;e===this.GetWS().length?this.AddWS(r):this.InsertRecordWS(e,r),this.NotifyInsertWorkSet
(e,r)},e.prototype.InsertRecordWS=function(e,t){this.GetWS().splice(e,0,t)},e.prototype.CreateRecord=function(e){e||(e=s.GetTempRowId());var t=e,n=this.GetFieldList(),r=n.length,i={};for(var o=0;o<r;o++){var u=n[o],a=SiebelApp.S_App.LookupStringCache(u);a=SiebelApp.OfflineUtils.RemoveNonAlphaChars(a),a==="Id"?i[a]=t:i[a]=""}return i},e.prototype.SetDefaultValues=function(e){var t={err:!1},n,i=[],o,a,f,l=this;i=this.GetFieldList(),f=this.GetName();var c=i.length,h=0,p=e?"PreDefault":"PostDefault";this.ActivateField("Id");var d=function(){o=SiebelApp.S_App.LookupStringCache(i[h]);var v=e?l.GetFieldDefn(o).PreDefault:l.GetFieldDefn(o).PostDefault;if(v){t=l.GetDefaultValue(f,o,e),n=t,t={err:!1},a=n.retVal;if(a)if(!e){t=this.FieldValue(o),n=t,t={err:!1};var m=n.retVal;r.IsEmpty(m)&&(s.CcfLogEvent([u,30,0,44,p,this.GetName(),o,a,this.GetDefaultExpr(o,e)]),t=l.SetFieldValueX(o,a,!0))}else s.CcfLogEvent([u,30,0,44,p,this.GetName(),o,a,this.GetDefaultExpr(o,e)]),t=Z.call(l,o,a);else s.CcfLogEvent([u,30,0,44,p,this.GetName(),o,a,this.GetDefaultExpr(o,e)])}t={err:!1},h++;if(h<c){var g=t;t={err:!1},d.call(this,g)}else d=null};return d.call(this),t},e.prototype.FieldValidation=function(e,t){var n=[],i=this.GetDefn().Fields,s=[],o={},u=!1;o.err=!1;for(var a=0;a<e.length;a++){n[a]=SiebelApp.S_App.LookupStringCache(e[a]);if(!r.IsEmpty(i[n[a]].ValidationSpec)){i[n[a]].ValidationSpecast||(this.GetDefn().Fields[n[a]].ValidationSpecast=SiebelApp.Query.Parse(i[n[a]].ValidationSpec));var f=SiebelApp.Query.Evaluate(this.GetDefn().Fields[n[a]].ValidationSpecast,this,SiebelApp.Query.Parse("["+n[a]+"]"));if(f===!1){var l=SiebelApp.Query.GetFieldsFromExp("Calc",i[n[a]].ValidationSpec);r.IsEmpty(t[a])&&(u=!0);for(var c=0;c<l.length;c++){var h=this.GetWS()[this.GetActiveRow()][SiebelApp.OfflineUtils.RemoveNonAlphaChars(l[c])];if(r.IsEmpty(h)||r.IsEmpty(t[a]))u=!0}if(u===!1)return s.push(t[a]),s.push(n[a]),s.push(i[n[a]].ValidationSpec),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrValidation",s,"","","",0,79),{err:"SSASqlErrValidation",retVal:!0}}}u=!1}return{err:"SSASqlErrValidation",retVal:!1}},e.prototype.CheckRequiredFields=function(e,t){var n=[],r=[],i=SiebelApp.S_App.Model.GetSystemFields(),s=this.GetFieldMap(),o={};o.err=!1;for(var u=0;u<e.length;u++){n[u]=SiebelApp.S_App.LookupStringCache(e[u]);if(i.indexOf(n[u])===-1&&s[n[u]].IsRequired()&&!t[u]){if(!this.IsInsertPending()){var a=this.GetOldFNm();if(a.indexOf(n[u])===-1)continue}var f=SiebelApp.S_App.GetActiveView(),l=f?f.GetActiveApplet():undefined,c=l?l.GetControls():undefined,h="",p;if(c)for(var d in c){p=c[d];if(p.GetFieldName()===n[u]){h=p.GetDisplayName();break}}return h||(h=n[u]),r.push(h),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAFReqFieldNotExist",r,"","","",0,69),o.err="SSAFReqFieldNotExist",o.retVal="",o}}return o},e.prototype.RemoveBindingToRow=function(){},e.prototype.OnActiveRowChanged=function(){this.FindWorkSet(z.call(this)),this.RemoveBindingToRow(!0)},e.prototype.EventChangeRecord=function(){var e,t=null,n={};n[x]=this.GetName(),n[T]=N,n[C]=SiebelApp.OfflineEvents[N].BusComp_ChangeRecord,n[O]=this,t||(t=CCFMiscUtil_CreatePropSet()),n[k]=A,SiebelApp.S_App.Model.InvokeRegisteredSvc(n,t);if(this.CheckActiveRow()===!1)return!0},e.prototype.GetRowNum=function(e){var t={},n=this.GetWS(),r=n.length,i=this.GetCursor()[0];if(e){for(var s=0;s<r;s++)if(n[s].Id===e.Id)break;return s===r?(t.err=!0,t):(i>r-1?t.retVal=i+1-r+s:t.retVal=s+1,t.err=!1,t)}t.err=!1,this.CheckActiveRow()||(t.err="SSAOMErrActiveRow",t.retVal=-1);var o=this.GetActiveRow();return t.retVal=i+1-r+o+1,t},e.prototype.GetNumRowsX=function(){var e={};return e.err=!1,e.retVal=0,this.IsExecuted()?ft.call(this):e},e.prototype.NotifyNewRecord=function(e){var t,n=!1,r=this.GetNotifyInfoArray(),i=r.length,s=z.call(this);for(var o=0;o<i;o++){t=r[o];var u=t.GetAppletArray(),a=u.length,f;for(var l=0;l<a;l++)f=u[l],t&&t.GetBegRow(f)+t.GetSize(f)-1<s?(t.SetBegRow(t.GetBegRow(f)+1,f),t.SetCurrRow(t.GetCurrRow(f)+1,f),n=!0):n=!1;if(this.IsNotifyEnabled()&&t){var c=t.GetBusCompNotify();c&&c.NotifyNewRecord(e&&!n)}}},e.prototype.NotifyDeleteRecord=function(e,t){var n,r;if(!this.IsNotifyEnabled())return;var i=this.GetNotifyInfoArray(),s=i.length;for(var o=0;o<s;o++){r=i[o];var u=r.GetAppletArray(),a=u.length,f;for(var l=0;l<a;l++)f=u[l],!e&&r&&r.GetBegRow(f)!==0&&r.GetBegRow(f)+r.GetSize(f)>this.GetWS().length?(r.SetBegRow(r.GetBegRow(f)-1),r.SetCurrRow(r.GetCurrRow(f)-1),n=!0):n=!1;if(r){var c=r.GetBusCompNotify();c&&c.NotifyDeleteRecord(e,t&&!n)}}},e.prototype.VBCHome=function(){var e=this.GetVBCRecords();if(e.length>0){var t=this.GetWSSize(),n=this.GetCursor();if(n[0]>t-1){this.EmptyWS(),n[0]=-1;for(var r=0;r<t;r++)this.InsertWorkSet(r,e[r]),n[0]++}U.call(this,0);return}U.call(this,-1)},e.prototype.Home=function(){var e={err:!1},t;s.CcfLogEvent([u,27,0,64,this.GetName()]),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.Home"),this.FinishRecord(),this.ClearUpdates();if(!this.IsExecuted())return this.EmptyWorkSet(),U.call(this,-1),e=this.NotifyReset(),e;if(z.call(this)!==-1){var n=this.FindWorkSet(0),r=this.GetRowNum(n);if(r.err)return e={err:!0},e;var i=r.retVal,o=this.GetNumRowsX(),a=o.retVal;i<0&&!o.err&&(i=a+i+1);if(i===1){e=this.NotifyReset();var f=e;return e=f,e}}U.call(this,-1),e=this.NotifyReset();var l=e;return e=l,SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.Home"),e},e.prototype.NotifyReset=function(){var e={err:!1},t;U.call(this,this.GetWS().length>0?0:-1),this.NotifyStateChanged("activeRow",z.call(this)),this.OnActiveRowChanged(),this.EventChangeRecord(),e=this.NotifyNewData(),t=e,e={err:!1};if(t.err)e=t;else{e=this.UpdateLinks(!1);var n=e;e=n}return e},e.prototype.EnumUserProps=function(){var e=this.GetDefn(),t=null;if(e.userPropMap){t=[];for(var n in e.userPropMap)e.userPropMap[n]&&t.push(n);return t}return null},e.prototype.EnumFieldUserProps=function(e){var t=this.GetFieldDefn(e);if(t.userPropMap
){var n=[];for(var r in t.userPropMap)t.userPropMap[r]&&n.push(r);return n}return null},e.prototype.GetFldPickMapDef=function(e){var t=this.GetFieldDefn(e);return t.pickMap},e.prototype.GetUserProperty=function(e){return this.GetDefn().userPropMap?this.GetDefn().userPropMap[e]:""},e.prototype.GetLinkDef=function(){var e=SiebelApp.Metadata.GetBusObjDef(this.GetBusObj().GetName())[this.GetName()];if(e){var t=SiebelApp.Metadata.GetLinkDef(e);return!t.interTableName&&!t.srcFieldName&&(t.srcFieldName=w.get("SWE_ROW_ID_FIELD")),SiebelApp.Metadata.GetLinkDef(e)}return null},e.prototype.GetDefn=function(){var e=SiebelApp.Metadata.GetBusCompDef(this.GetName());return e},e.prototype.GetFieldDefn=function(e){var t=this.GetDefn().Fields[e];return t||s.CcfLogEvent([u,55,0,53,e,this.GetName()]),t},e.prototype.PopulateWS=function(e,t,n,r){var i={err:!1},o;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.PopulateWS");var a=t.length,l=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName()),c=this.GetDefn(),h=[],p=0,d={},v=c.Fields,m=this.GetSavedFieldArray();for(var g=0;g<a;g++){var y=t[g],b=SiebelApp.S_App.LookupStringCache(y),w=SiebelApp.OfflineUtils.RemoveNonAlphaChars(b),E=this.GetFieldMap()[b];if(!E.IsActivated())continue;m.indexOf(b)===-1&&this.GetSavedFieldArray().push(b);if(f.DoesFieldExist(l,w)){if(typeof e!="string"){var S=e.length;for(var x=1;x<S;x++){if(c.InterFieldInfo.InterFieldArr.indexOf(b)!==-1){var T=v[b].ColName;if(f.DoesFieldExist(e[x],T)){w=e[x]+"."+T;if(d[T]){var N=[];N.push(d[T]),N.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(b)),d[T]=N}else d[T]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(b);continue}}f.DoesFieldExist(e[x],w)&&(w=l+"."+'"'+w+'"')}}else w='"'+w+'"';h[p]=w,p++}}var C=this.GetCursor(),k=!1,L=0,A=window.localStorage.getItem("reload")&&JSON.parse(window.localStorage.getItem("reload")),O=this.GetExtObjProp("reExecute");if(A||O)L=C[0],k=!0,A&&window.localStorage.setItem("reload",!1);var M;this.SetQuerySearchSpec(n),this.SetQuerySortSpec(r),this.SetQueryFieldList(h),this.SetQueryOrder(M);var _="COUNT(*)",D=SiebelApp.SqlBuilder.SelectRecordPopulateWS(e,n,[_],r,M);o=i=SiebelApp.BrowserCacheMgr.SelectRecord(D),i={err:!1};var P=this.GetWorkSetSize();if(o.err)return i={err:!0},i;var H=o.retVal[_],B;this.SetRecordCount(H);if(H==0)return SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.PopulateWS"),i={err:!1,retVal:[]},i;C[0]=L,C[1]=H<=P?H:P,k?H<=P?C[0]=0:H-(L+1)<=P?C[0]=H-P:C[0]=L:(C[0]>=H&&(C[0]=0),this.CheckActivation()&&(C[0]=this.GetScrollCount())),s.CcfLogEvent([u,33,0,12,this.GetName(),H,C[1]]),B=SiebelApp.SqlBuilder.SelectRecordPopulateWS(e,n,h,r,M,C),o=i=SiebelApp.BrowserCacheMgr.SelectRecord(B,!0);if(!o.err){var j=o.retVal;this.EmptyWorkSet();if(j&&j.length){var F=j.length;for(var I=0;I<F;I++){var q=j[I];if(Array.isArray(e))for(var R in d){var T=d[R];if(T)if(typeof T!="string"){var U=T.length;for(var z=0;z<U;z++)q[T[z]]=q[R];delete q[R]}else q[d[R]]=q[R],delete q[R]}this.InsertWorkSet(I,q)}C[0]=C[0]+F-1,C[1]=1,this.SetCursor(C)}}return SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.PopulateWS"),i},e.prototype.Execute=function(){var e={err:!1},t;s.CcfLogEvent([u,27,0,12,this.GetName()]),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.Execute"),this.ActivateField("Id");var n,i,o=CCFMiscUtil_CreatePropSet(),a={},f=!1;a[x]=this.GetName(),a[T]=N,a[C]="Execute",a[O]=this,a[k]=L,t=e=l.InvokeRegisteredSvc(a,o),e={err:!1},n=t.retVal,i=t.err;if(n.Outputargs&&n.Outputargs.GetProperty("Invoked")&&n.Outputargs.GetProperty("Invoked").toString()==="true")return this.IsVBC()&&(ct.call(this),this.SetExecuted(!0)),e={err:i,retVal:n.Outputargs},e;n.Outputargs&&o&&(n.Outputargs.SetType(L),o.AddChild(n.Outputargs));if(this.IsVBC())return ct.call(this),this.SetExecuted(!0),e;this.GetMultiSelectMode()&&(this.SetMultiSelectMode(!1),this.SetInverseSelection(!1),this.SetSelRowIdArray([]),this.NotifySelModeChange(!1)),this.SetInQueryState(!1),this.SetExecuted(!1);var c=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName()),h=this.SetSortSpecification(),p=this.SetFullSearchSpec(),d=this.GetFieldList(),v=this.GetLinkDef(),m,g,y,b,w=this.GetParentBusComp();if(w){if(!w.IsExecuted()||w.GetActiveRow()===-1)return e={err:!1,retVal:""},e;g=v.srcFieldName,f=!0,e=w.FieldValue(g),t=e,e={err:!1},y=t.retVal,b=v.Name,this.IsVBC()||this.SetLinkSpec(b,g,y,v),m=this.GetExtObjProp("m_pCurLinkQueryDef")}else{var S=lt.call(this,c);S&&p.push(S)}e={err:!1};var _=this.GetFieldMap(),D;for(var P in _)if(_[P]){var H=_[P].GetSearchSpec();if(r.IsEmpty(H))continue;H.toLowerCase()==="is null"&&(H="");var j=" ";j+="["+SiebelApp.OfflineUtils.RemoveNonAlphaChars(P)+"]";var F=H.indexOf(E),I=H.indexOf(M),q=H.indexOf(B);F>=0?(D=H.substring(F+1),j+=" "+E+" ",j+='"'+D+'"'+" "):I>=0?(D=H.substring(I+1),j+=" "+M+" ",j+='"'+D+'"'+" "):q>=0?(m&&(r.IsEmpty(m.Defn.interTableName)||(j=SiebelApp.OfflineUtils.RemoveNonAlphaChars(j),j=c+"."+j)),D=H.substring(q+B.length),j+=" "+B+" ",j+='"'+D+'"'+" "):(j+=" "+E+" ",j+='"'+H+'"'+" "),p.push(j)}var R={};if(m){var U;if(!r.IsEmpty(m.Defn.interTableName)){R={};var z=c;c=[],c.push(z);var W=m.Defn.interTableName;W=SiebelApp.OfflineUtils.RemoveNonAlphaChars(W),c.push(W),U=z+"."+SiebelApp.OfflineUtils.RemoveNonAlphaChars(m.Defn.destFieldName),U=U+" = "+W+"."+m.Defn.interChildColName,U=U+" AND "+W+"."+SiebelApp.OfflineUtils.RemoveNonAlphaChars(m.Defn.interParentColName),U=U+" = "+'"'+m.Defn.SrcFieldValue+'"',U=U+" AND "+W+".Id"+" LIKE "+'"'+m.Defn.SrcFieldValue+'.%"',p.push(U)}else U=SiebelApp.OfflineUtils.RemoveNonAlphaChars(m.Defn.destFieldName)+" = "+'"'+m.Defn.SrcFieldValue+'"',p.push(U)}w&&v&&(r.IsEmpty(v.interTableName)?h.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(v.destFieldName)):h.push(v.interTableName+"."+SiebelApp.OfflineUtils.RemoveNonAlphaChars(v.interChildColName))),this.IsVBC||h.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(v.srcFieldName
));var X=this.GetAppletSearchSpec();if(X){var V=SiebelApp.Query.GetSearchSpec(X,this);V.length>0&&p.push(V[0])}return this.SetExecutionState(!0),s.CcfLogEvent([u,31,0,45,this.GetName(),"SearchSpec: ",p]),s.CcfLogEvent([u,31,0,46,this.GetName(),"SortSpec: ",h]),e=this.PopulateWS(c,d,p,h),t=e,e={err:!1},t.err?e={err:!0}:(this.NotifyExecute(),this.SetExecutionState(!1),this.SetExecuted(!0),a[k]=A,o.SetProperty("RetVal",!0),t=e=l.InvokeRegisteredSvc(a,o),e={err:!1},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.Execute")),e},e.prototype.ClearLinkDef=function(){this.SetExtObjProp("m_pCurLinkQueryDef","")},e.prototype.SetLinkSpec=function(e,t,n,r){this.ActivateField(r.destFieldName);var i=this.GetExtObjProp("m_pCurLinkQueryDef");if(i&&i.Defn.SrcFieldValue===n)return;i={},i.Defn=r,i.Defn.SrcFieldValue=n,i.Data={},i.Data.srcFieldValue=n,this.SetExtObjProp("m_pCurLinkQueryDef",i)},e.prototype.IsExecuted=function(){var e=this.GetExtObjProp("m_bExecuted");return e||this.SetExtObjProp("m_bExecuted",!1),this.GetExtObjProp("m_bExecuted")},e.prototype.IsPagination=function(e){switch(e){case o.get("POSITION_ON_ROW"):case o.get("SCROLL_NEXT_DATA"):case o.get("SCROLL_PREV_DATA"):case o.get("GO_TO_NEXT_SET"):case o.get("GO_TO_PREV_SET"):return!0;default:return!1}},e.prototype.SetExecuted=function(e){var t={err:!1},n,r=this.IsExecuted();return r===e?t:(e?(this.SetExtObjProp("m_bExecuted",e),this.NotifyStateChanged("bExecuted",e)):(this.UndoRecord(),t={err:!1},this.SetExtObjProp("m_bExecuted",e),this.NotifyStateChanged("bExecuted",e),this.EmptyWorkSet(),U.call(this,-1)),t)},e.prototype.SetDelRecPending=function(e){if(this.deletePending&&this.deletePending===e)return;this.deletePending=e,this.NotifyStateChanged("dp",e)},e.prototype.IsParCommitPen=function(){return this.GetExtObj.hasOwnProperty("m_isParentCommit")||(this.GetExtObj.m_isParentCommit=!1),this.GetExtObj.m_isParentCommit},e.prototype.SetParCommitPen=function(e){if(this.GetExtObj.m_isParentCommit&&this.GetExtObj.m_isParentCommit===e)return;this.GetExtObj.m_isParentCommit=e},e.prototype.SetNewRecPending=function(e){if(this.insertPending&&this.insertPending===e)return;this.insertPending=e,e?e=1:e=0,this.NotifyStateChanged("np",e)},e.prototype.IsNewRecordPending=function(){return this.insertPending},e.prototype.GetDefaultValue=function(e,t,n){var r={err:!1},i,s=this.GetDefaultExpr(t,n);return r=this.EvaluateFieldExpr(s,t,n),i=r,r=i,r},e.prototype.GetDefaultExpr=function(e,t){var n=t?this.GetFieldDefn(e).PreDefault:this.GetFieldDefn(e).PostDefault;return n},e.prototype.EvaluateFieldExpr=function(e,t,n){var i={err:!1},s,o="",u=e,a=e.indexOf("Parent:"),f=e.indexOf("Field:"),c=e.indexOf("Expr:"),h=e.indexOf("System:");if(r.IsEmpty(e))return i={err:!1,retVal:o},i;if(e.toUpperCase()==="SYSTEM: CREATORID")return o=l.GetLoginId(),i={err:!1,retVal:o},i;if(e.toUpperCase()==="SYSTEM: TIMESTAMP")return o="",this.GetFieldMap()[t].GetDataType()==="date"?o=SiebelApp.OfflineUtils.GetTS():o=SiebelApp.OfflineUtils.GetTS(),i={err:!1,retVal:o},i;if(h===0){u=u.replace("System:",""),u=u.replace("()",""),u=u.trim();switch(u.toUpperCase()){case"CREATOR":o=l.GetLoginName();break;case"CREATORID":case"LOGINID":o=l.GetLoginId();break;case"CURRENCY":o=l.GetCurrencyCode();break;case"POSITIONID":o=l.GetPositionId();break;case"DIVISIONNAME":o=l.GetDivisionId();break;case"ORGANIZATIONID":o=l.GetOrganizationId();break;case"ORGANIZATIONNAME":o=l.GetOrganizationName();break;case"CONTACTLOGINID":o=l.GetLoginId();break;case"CONTACTLOGINNAME":o=l.GetLoginName();break;case"TODAY":o=SiebelApp.OfflineUtils.GetDate()}return i={err:!1,retVal:o},i}if(a===0){var p=0,d=u.split(","),v=d.length,m=!1,g=function(){if(this.GetParentBusComp()){var e=this.GetParentBusComp().GetName();if(e){d[p]=d[p].replace("Parent:",""),d[p]=d[p].replace(/["']{1}/gi,""),d[p]=d[p].replace(/['"]/g,"");var t=d[p].slice(0,d[p].indexOf(".")).trim(),n=d[p].slice(d[p].indexOf(".")+1);if(e===t){i=this.GetParentBusComp().FieldValue(n),s=i,i=s;return}}}else i={err:!1,retVal:""}},y={},b=function(){d[p]=d[p].trim(),d[p].indexOf("Parent:")===0||d[p].indexOf("Field:")===0||d[p].indexOf("Expr:")===0||d[p].indexOf("System:")===0?p===0?g.call(this):i=this.EvaluateFieldExpr(d[p].trim(),t,n):g.call(this),s=i,i={err:!1},r.IsEmpty(s.retVal)||(m=!0,y=s,i=y),m||(p++,p<v?b.call(this):(m=!0,y={err:!1,retVal:""},i=y))};p<v&&b.call(this),function(){i={err:!1};if(m)return i=y,i}.call(this);if(m)return i}if(f===0)return u=u.replace("Field:",""),u=u.replace(/["']{1}/gi,""),u=u.replace(/['"]/g,""),u=u.trim(u),i=this.FieldValue(u),s=i,i=s,i;var w;if(c===0){u=u.replace("Expr:",""),u=u.trim();var E=u.length-1;return(u[0]==="'"||u[0]==='"')&&(u[E]==="'"||u[E]==='"')&&(u=u.slice(1,E)),this.GetFieldDefn(t).PreQuery||(w=SiebelApp.Query.Parse(u),this.GetFieldDefn(t).PreQuery=w),o=SiebelApp.Query.Evaluate(this.GetFieldDefn(t).PreQuery,this),i={err:!1,retVal:o},i}return f!==0&&a!==0&&c!==0&&h!==0?(u=u.trim(),this.GetFieldDefn(t).PreQuery||(w=SiebelApp.Query.Parse(u),this.GetFieldDefn(t).PreQuery=w),o=SiebelApp.Query.Evaluate(this.GetFieldDefn(t).PreQuery,this),i={err:!1,retVal:o},i):isNaN(u)?a===-1&&f===-1?(i={err:!1,retVal:u},i):i:(i={err:!1,retVal:u},i)},e.prototype.IsRequired=function(){return!1},e.prototype.HasDefaultValue=function(){return!1},e.prototype.NotifyNewRecordDataWS=function(){var e;if(!this.IsNotifySysEnabled())return;if(!this.CheckActiveRow())return;var t=this.GetNotifyInfoArray(),n=t.length;for(var r=0;r<n;r++){e=t[r];if(e){var i=e.GetBusCompNotify();i&&i.NotifyNewRecordDataWS()}}},e.prototype.NotifyNewRecordData=function(){var e;if(!this.IsNotifySysEnabled())return;this.NotifyNewRecordDataWS();if(!this.IsNotifyEnabled())return;var t=this.GetNotifyInfoArray(),n=t.length;for(var r=0;r<n;r++){e=t[r];if(e){var i=e.GetBusCompNotify();i&&i.NotifyNewRecordData()}}},e.prototype.FillRecord=function(){return},e.prototype.OnWriteRecord=function(){return},e.prototype.UpdateSync=function(e,t){var n={err:!1},r,i="",a=this.
GetNewTxn(),f=this.GetOpType(),l=this.GetTxnId(),c=this.GetLocalTxn();l===""&&(l=s.GetTempId(),this.SetTxnId(l));if(f===o.get("ADDRECORD"))i=this.GetNewTxn();else if(f===o.get("DELETERECORD"))i=this.GetNewTxn();else{a!==""&&(f=o.get("NEWRECORD"));if(t){var h=this.GetOldFNm(),p=this.GetOldfVal();for(var d=0;d<h.length;d++)i=i+"OF_"+h[d]+"="+p[d]+"&";if(i!==""){n=this.SyncQRec(e),r=n,n={err:!1};var v=r.retVal;i+=v,a!==""&&(i=a+"~"+i)}}}n={err:!1};if(i!==""||!t){var g=m.get("PRO_SYNCQUEUE_DB_TBL_COLS"),y=s.RemoveNonAlphaChars(this.GetName()),b=[g.TransactionId,g.TransactionType,g.BusComp,g.RowId,g.LocalTxnInfo,g.SyncStatus],w=[l,f,y,e,c,o.get("SYNC_NEW")];t&&(b.push(g.Request),w.push(i));var E=SiebelApp.SqlBuilder.InsertRecord(m.get("PRO_SYNCQUEUE_DB_TBL"),b,w);s.CcfLogEvent([o.get("LOG_EVT_UPSYNC"),94,0,49,E.insertquery,E.values]),n=SiebelApp.BrowserCacheMgr.Execute(E.insertquery,E.values),t&&(SiebelApp.OfflineAppSettings.SetSyncStatus(!0),s.CcfLogEvent([u,38,0,49,l,this.GetName()]),SiebelApp.S_App.UpdateSyncStatus("SyncPendng"))}return this.SetNewTxn(""),this.SetTxnId(""),this.SetEmptyFNm(),this.SetOpType(""),n},e.prototype.FldType=function(e){var t=this.GetFieldDefn(e);return t&&!t.ReadOnly?!0:!1},e.prototype.SetCommitPending=function(e){if(this.IsCommitPending()===e)return;s.CcfLogEvent([u,36,0,47,"CommitPending",e,this.GetName()]),this.commitPending=e,e?e=1:e=0,this.commitPending||(this.ClearUpdates(),this.GetCommitPending=function(){return!1}),this.NotifyStateChanged("cp",e)},e.prototype.GetChildBCArray=function(){var e=[],t=this.GetBusObj(),n=t.GetBCMap(),r;for(var i in n)n[i]&&(r=n[i].GetParentBusComp(),!!r&&this.GetVarName()===r.GetVarName()&&e.push(n[i]));return e},e.prototype.ResetChildBCArr=function(){this.SetExtObjProp("m_childBCarr",[])},e.prototype.UpdateLinks=function(){var e={err:!1},t;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.UpdateLinks");var n=[],i=this.GetChildBCArray();if(i){var s=i.length,o=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");r.IsEmpty(o)&&(this.SetExtObjProp("m_bDisNotChildOnUpdLnks",!0),o=!0);var u=0,a,f=[];for(var l=0;l<s;l++)o&&i[l].DisableNotify(),a=function(){var e=l;return function(){i[e].EnableNotify()}},this.GetActiveRow()!==-1?(f=i[l].GetCursor(),f[0]=0,i[l].SetCursor(f),n[u]={execute:i[l].Execute,executeScope:i[l]},u++,n[u]={execute:i[l].Home,executeScope:i[l],postExecute:a()},u++):(i[l].SetExtObjProp("m_bExecuted",!1),n[u]={execute:i[l].UpdateLinks,executeScope:i[l]},u++,n[u]={execute:i[l].Home,executeScope:i[l],postExecute:a()},u++);n.length>0&&(e=SiebelApp.OfflineAppMgr.eachSyncOp(this,n),e={err:!1},n=null,a=null,i=null,SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.UpdateLinks"))}return e},e.prototype.DisableNotify=function(){if(!this.IsNotifyEnabled())return;this.SetNotifyEnabled(!1),this.NotifyStateChanged("bNotifyEnabled",!1)},e.prototype.NotifyInsertWorkSet=function(e,t){var n;if(!this.IsNotifySysEnabled())return;var r=this.GetNotifyInfoArray(),i=r.length;for(var s=0;s<i;s++){n=r[s];if(n){var o=n.GetBusCompNotify();o&&o.NotifyInsertWorkSet(e,t)}}},e.prototype.NotifyDeleteWorkSet=function(e,t,n){var r;if(!this.IsNotifySysEnabled())return;var i=this.GetNotifyInfoArray(),s=i.length;for(var o=0;o<s;o++){r=i[o];if(r){var u=r.GetBusCompNotify();u&&u.NotifyDeleteWorkSet(e,t,n)}}},e.prototype.GetNotifyInfo=function(e,t){var n=this.GetNotifyInfoArray();return t=e<n.length?n[e]:null,t},e.prototype.EnableNotify=function(){var e,t;if(this.IsNotifyEnabled())return;if(!this.IsNotifySysEnabled()){this.SetNotifySysEnabled(!0),this.NotifyDeleteWorkSet(0,-1,null);var n=this.GetWorkSet().length;for(e=0;e<n;e++)t=this.GetWorkSet()[e],this.NotifyInsertWorkSet(e,t);this.NotifyStateChanged("bExecuted",this.m_bExecuted),this.NotifyStateChanged("activeRow",this.m_activeRow),this.NotifyStateChanged("cp",this.IsCommitPending()),this.NotifyStateChanged("np",this.IsNewRecordPending())}this.SetNotifyEnabled(!0),this.NotifyStateChanged("bNotifyEnabled",!0)},e.prototype.GetQuickPickInfo=function(e,t){var n={err:!1},r;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.GetQuickPickInfo");var i=this.GetFieldDefn(t),s;s=this.GetPickListInfo(e,t);if(i.pickMap){var o=i.pickMap.length;for(var u=0;u<o;u++)if(i.pickMap[u].FldName===t){s.PFldName=i.pickMap[u].PFldName;break}}return r=n=SiebelApp.BrowserCacheMgr.GetPickListData(s,this,t),n=r,SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.GetQuickPickInfo"),n},e.prototype.GetPickListInfo=function(e,t){var n,r;return n=this.ValidateFieldDef(t),n?(r=SiebelApp.Metadata.GetPickListDef(e),r):r},e.prototype.GetIdValueX=function(){var e={err:!1},t;if(!this.CheckActiveRow())return e={err:!1,retVal:""},e;var n=this.GetActiveRow(),r=this.FindWorkSet(n);return e=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),r),t=e,e={err:t.err,retVal:t.retVal},e},e.prototype.PickUpActiveFields=function(){var e=[],t=this.GetFieldList();for(var n=0;n<t.length;n++){var r=t[n];r=SiebelApp.S_App.LookupStringCache(r),e.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(r))}return e},e.prototype.WSNextRecordX=function(e,t){var n={err:!1},i,i={};i.err="";var s=this.GetNotifyInfoArray(),o=s[e];return e>s.length||r.IsEmpty(o)?(i.err="SSAOMErrNotifyInfo",n=i,i):(o.GetCurrRow(t)+1-o.GetBegRow(t)<o.GetSize(t)&&o.GetCurrRow(t)+1<this.GetWS().length?o.SetCurrRow(o.GetCurrRow(t)+1,t):this.GetIsRelatedBC()&&o.GetCurrRow(t)+1<this.GetWS().length?o.SetCurrRow(o.GetCurrRow(t)+1,t):i.err="SSAOMErrNotifyInfo",n=i,i)},e.prototype.WSGetCurrRow=function(e,t){var n={};n.err="";var i=this.GetNotifyInfoArray(),s=i[e];return e>i.length||r.IsEmpty(s)?(n.err="SSAOMErrNotifyInfo",n):(n.retVal=s.GetCurrRow(t),n)},e.prototype.WSSetCurrRow=function(e,t,n){var i={};i.err="";var s=this.GetNotifyInfoArray(),o=s[e];return e>s.length||r.IsEmpty(o)?(i.err="SSAOMErrNotifyInfo",i):(o.SetCurrRow(t,n),i)},e.prototype.NextRecord=function(){var e={err:!1},t;SiebelApp.S_App
.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NextRecord"),this.FinishRecord();var n;n=z.call(this);if(n<0)return e={err:!0},e;if(n<this.GetWS().length-1)return e=this.SetActiveRow(n+1),t=e,e=t,e;if(this.GetWS().length===1){e=this.GetNextRecord(),t=e,e={err:!1};if(!t.err){var r=t.retVal;this.InsertWorkSet(0,r),this.DeleteWorkSet(1),e=this.NotifyNewData()}else e=t}else{e=this.ScrollWorkSet(1),t=e,e={err:!1};if(t.err)return e={err:!0},e;this.NotifyScrollData(!0)}return e},e.prototype.PriorRecord=function(){var e={err:!1},t;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.PriorRecord"),this.FinishRecord();var n;n=z.call(this);if(n<0)return e={err:!0},e;if(n>0)return e=this.SetActiveRow(n-1),t=e,e=t,e;if(this.GetWS().length===1){e=this.GetPriorRecord(),t=e,e={err:!1};if(!t.err){var r=t.retVal;this.InsertWorkSet(0,r),this.DeleteWorkSet(1),e=this.NotifyNewData()}else this.DeleteWorkSet(1),e=t}else{e=this.ScrollWorkSet(-1),t=e,e={err:!1};if(t.err)return e={err:!0},e;this.NotifyScrollData(!0)}return e},e.prototype.WSFieldValue=function(e,t,n){var i={err:!1},s,s={};s.err="";var o=this.GetNotifyInfoArray(),u=o[t];if(t>o.length||r.IsEmpty(u))return s.err="SSAOMErrNotifyInfo",i=s,i;var a=this.FindWorkSet(u.GetCurrRow(n));return i=this.FieldValue(e,a),s=i,i=s,i},e.prototype.PrepareOfflineRawRecord=function(e,t){var n={err:!1},r,i=e,s=t.length,o="",u={},a=[],f=z.call(this),l=0,c=0,h=function(){l===0?this.WSHomeX(c):n=this.WSNextRecordX(c),n={err:!1};var e=0,f=function(){var i="",l=0;n=this.WSFieldValue(t[e],c),r=n,n={err:!1},r.err||(i=r.retVal,i||(i=""),l=i.length,o.length?o=o+l+"*"+i:o=l+"*"+i,t[e]==="Id"&&(u.id=i)),e++,e<s?f.call(this):(u.value=o,a.push(u),o="",u={})};s>0&&f.call(this),n={err:!1},l++,l<i&&h.call(this)};return i>0&&h.call(this),U.call(this,f),n={err:!1,retVal:a},n},e.prototype.SelectRow=function(e,t,n,r){var i={err:!1},s;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SelectRow"),this.GetBusCompType()===SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST")&&(n=!1,r=!1);var o=!1,u=this.GetMultiSelectMode(),a,f=this.GetSelRowIdArray(),l,c,h,p;if(!n&&!r)return u&&(this.SetMultiSelectMode(!1),this.SetInverseSelection(!1),f.splice(0,f.length)),pt.call(this,n,r,u,o),i;if(!this.CheckActiveRow())return i={err:!0},i;p=this.GetNotifyInfoArray().length>0?this.GetNotifyInfoArray()[0]:null;if(!p||!e)return i={err:"SSAOMErrNotifyInfo"},i;c=this.FindWorkSet(p.GetBegRow(e)+t),n||(this.SetInverseSelection(!1),f.splice(0,f.length));if(!r){this.GetMultiSelectMode()||(h=this.FindWorkSet(this.GetActiveRow()),i=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),h),s=i,i={err:!1},l=s.retVal,f.push(l)),i=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),c),s=i,i={err:!1},a=s.retVal;for(var d=0;d<f.length;d++)if(f[d]===a)break;(o=d===f.length)?f.push(a):f.splice(d,1),this.SetSelRowIdArray(f),i=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),c),s=i,i={err:!1};var v=s.retVal;this.SetLastSelectedRowId(v),this.SetMultiSelectMode(!0),pt.call(this,n,r,u,o)}return i},e.prototype.AssocParent=function(){this.GetWS()[this.GetActiveRow()].isNew=!0;var e=dt.call(this,this.GetActiveRow());return e},e.prototype.AssocSelection=function(){var e={err:!1},t;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.AssocSelection"),e=this.GetIdValueX(),t=e,e={err:!1};if(!t.err){var n=t.retVal,r=this.GetActiveRow(),i=r,s=this.GetMultiSelectMode(),o=this.GetSelRowIdArray();s&&!this.GetInverseSelection()&&o.length===1&&o[0]===n&&(this.SetMultiSelectMode(!1),s=!1,this.SetSelRowIdArray([]),this.NotifySelModeChange(s));if(!s)return dt.call(this,r);this.FinishRecord(),this.DisableNotify();var u=this.GetBaseBC();u.DisableNotify();var a=u.GetParentBusComp();a.DisableNotify();var f=this.GetActiveRow(),l=this.GetSelRowIdArray(),c=this.GetWorkSetSize(),h,p,d=0,v=function(t){this.PositionById(t),e=dt.call(this,this.GetActiveRow())};if(this.GetInverseSelection()){var m=l.slice(),g;l.splice(0,m.length);var y=function(){g=this.GetWS()[this.GetActiveRow()].Id,m.indexOf(g)===-1&&v.call(this,g),e=this.NextRecord(),t=e,e={err:!1},t.err||y.call(this)};this.Home(),e={err:!1},y.call(this)}else{h=l.length;var b=function(){v.call(this,l[d]),e={err:!1},d++,d<h&&b.call(this)};d<h&&b.call(this)}e=this.SetActiveRow(f),t=e,e={err:!1},t.err||(p===c&&this.DeleteWorkSet(c),this.NotifySelModeChange(s),this.SetMultiSelectMode(!1),u.EnableNotify(),a.EnableNotify(),this.EnableNotify(),this.SetSelRowIdArray([]),this.NotifySelModeChange(!1),e=this.NotifyNewData(),u.Home(),e={err:!1},u.NotifyExecute(),u.NotifyNewData(),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AssocSelection"))}return e},e.prototype.IsCurWSRecSelected=function(e,t){var n={err:!1},r,i,s=!1,o,u="",a;a=this.GetSelRowIdArray(),i=z.call(this);if(i<0)return n;var f=this.WSGetCurrRow(0,t).retVal;if(!this.GetMultiSelectMode())s=f===i?!0:!1;else{o=this.FindWorkSet(f),o&&(n=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),o)),r=n,n={err:!1};if(!r.err){u=r.retVal;var l;for(l=0;l<a.length;l++)if(a[l]===u)break;l!==a.length?s=!0:s=!1,this.GetInverseSelection()&&(s=!s)}}return n={err:!1,retVal:s},n},e.prototype.GetBaseBC=function(){var e=this.GetExtObjProp("baseBC");if(!e){var t=SiebelApp.S_App.GetActiveView().GetActiveApplet(),n=t.GetBusComp(),r=t.GetParentApplet();if(r)e=r.GetBusComp(),this.SetExtObjProp("baseBC",e);else if(n.GetParentBusComp()){var i=n.GetName(),e=this.GetBusObj().GetBusCompX(i);this.SetExtObjProp("baseBC",e)}else this.SetExtObjProp("baseBC","NoBaseBC")}else e==="NoBaseBC"&&(e="");return e},e.prototype.SetBaseBC=function(e){this.SetExtObjProp("baseBC",e)},e.prototype.PickCurrentRow=function(){var e={err:!1},t,n=this.GetMasterBC(),i=n.GetName(),o=this.GetPickSrcField(),a=n.GetFieldDefn(o);if(a.PickListName){var f=a.pickMap,l=f.length,c,h=0,p=!0,d=this.GetPickSrcIdFName(),v=n.FindWorkSet(n.GetActiveRow());d&&(e=this.GetIdValueX(),t=e,e={err:!1},t.err?e=t:(v&&t.retVal!==v[d
]&&!n.commitPending&&n.NotifyStateChanged("cp",1),s.CcfLogEvent([u,75,0,83,"Master BC: ",i,"BC: ",this.GetName(),d,t.retVal]),e=n.SetFieldValueX(d,t.retVal,!0))),e={err:!1};var m=function(){p=!0;if(f[h]){c=f[h].FldName,e=this.FieldValue(f[h].PFldName),t=e,e={err:!1};var o=n.GetFieldDefn(c);f[h].IsConstrained&&r.IsTrue(o.IsCalculated)&&(p=!1),p&&(!t.err||!f[h].PFldName)&&(v&&t.retVal!==v[c]&&!n.commitPending&&n.NotifyStateChanged("cp",1),s.CcfLogEvent([u,75,0,83,"Master BC: ",i,"BC: ",this.GetName(),c,t.retVal]),e=n.SetFieldValueX(c,t.retVal,!0))}h++;if(h<l){var a=e;e={err:!1},m.call(this,a)}};h<l&&m.call(this),e={err:!1,retVal:!0}}return e},e.prototype.AddAssociation=function(){var e={err:!1},t;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.AddAssociation");var n,r=CCFMiscUtil_CreatePropSet(),i={};i[x]=this.GetName(),i[T]=N,i[C]="AddAssociation",i[O]=this,i[k]=L,t=e=SiebelApp.S_App.Model.InvokeRegisteredSvc(i,r),e={err:!1},n=t.retVal;var s=t.err;if(s)return e={err:s,retVal:n},e;if(!t.err){n=t.retVal;if(n.Outputargs&&n.Outputargs.GetProperty("Invoked")&&n.Outputargs.GetProperty("Invoked").toString()==="true"){var o=n.Outputargs.GetProperty("RetVal");return o?e={err:s,retVal:o}:e={err:s,retVal:""},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AddAssociation"),e}}n.Outputargs&&(n.Outputargs.SetType(L),r.AddChild(n.Outputargs));var u=function(){this.FinishRecord(),e={err:!1};var s=this.GetActiveRow(),o=this.FindWorkSet(s),u=this.GetAssocList();if(u){var c=u.FindWorkSet(u.GetActiveRow());s++,e=vt.call(this,c),t=e,e={err:!1};if(t.err)e=t;else{var h=t.retVal.fieldList,p=t.retVal.fieldVal;this.InsertWorkSet(s,c);var d=this.GetWorkSetSize(),v=this.GetWS().length;o&&v>d&&(s!==v-1?this.DeleteWorkSet(v-1):(this.DeleteWorkSet(0),s--)),this.SetActiveRow(s),e={err:!1};if(h.length>0){var m=function(e){return[h[e],p[e],!0]};e=SiebelApp.OfflineAppMgr.eachSyncOp(this,{execute:this.SetFieldValueX,executeScope:this,preExecute:m,iteration:h.length})}e={err:!1};var g=this.GetCursor();!g||g.length!==2?g=[0,1]:g[0]++;if(f){e=this.FieldValue("Id"),t=e;var y=t.retVal;l.UpdateRecordX(),l.SetFieldValueX(a.primeIdFieldName,y),l.WriteRecord(),this.NotifyNewRecord(),this.OnAddAssociation(),this.UpdateLinks(!1),function(){e={err:!1},l&&l.OnAddChildAssociation(this),i[k]=A,t=e=SiebelApp.S_App.Model.InvokeRegisteredSvc(i,r),e={err:!1},n=t.retVal;var s=t.err;if(s){e={err:s,retVal:n};return}SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AddAssociation")}.call(this)}else this.NotifyNewRecord(),this.OnAddAssociation(),this.UpdateLinks(!1),function(){e={err:!1},l&&l.OnAddChildAssociation(this),i[k]=A,t=e=SiebelApp.S_App.Model.InvokeRegisteredSvc(i,r),e={err:!1},n=t.retVal;var s=t.err;if(s){e={err:s,retVal:n};return}SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AddAssociation")}.call(this)}}},a=this.GetLinkDef(),f=!1,l=this.GetParentBusComp();if(a&&a.primeIdFieldName&&l&&!l.GetDefn().Fields[a.primeIdFieldName].ReadOnly){e=l.CanUpdateField(a.primeIdFieldName),t=e,e={err:!1};if(t.retVal){e=l.FieldValue(a.primeIdFieldName),t=e,e={err:!1};var c=t.retVal;c||(f=!0),u.call(this)}else u.call(this)}else u.call(this);return e},e.prototype.GetWorkSetSize=function(){return this.GetWSSize()},e.prototype.DeleteWorkSet=function(e){var t="",n=this.GetWS().length;if(n===0)return;if(e!==n){var r=this.GetWS().splice(e,1);t=r[0]}this.NotifyDeleteWorkSet(e,1,t)},e.prototype.OnAddAssociation=function(){},e.prototype.OnAddChildAssociation=function(){},e.prototype.DisableNotifySys=function(){if(!this.IsNotifySysEnabled())return;this.NotifyDeleteWorkSet(0,-1),this.DisableNotify(),this.SetNotifySysEnabled(!1)},e.prototype.NotifyGeneric=function(e,t){var n;if(this.IsNotifyEnabled()){var r=this.GetNotifyInfoArray(),i=r.length;for(var s=0;s<i;s++){n=r[s];if(n){var o=n.GetBusCompNotify();o&&o.NotifyGeneric(e,t)}}}},e.prototype.NotifyExecute=function(){var e;if(this.IsNotifyEnabled()){var t=this.GetNotifyInfoArray(),n=t.length;for(var r=0;r<n;r++){e=t[r];if(e){var i=e.GetBusCompNotify();i&&i.NotifyExecute()}}}},e.prototype.GetNumSelected=function(e){var t=this.GetSelRowIdArray();if(!this.GetMultiSelectMode())e=1;else{if(!!this.GetInverseSelection()){var n=this.GetNumRowsX(),r=n.retVal;return e=r-t.length,e}e=t.length}return e},e.prototype.CheckActivation=function(){var e=!1,t=this.GetActivatedFieldList(),n=this.GetSavedFieldArray(),i=n.length,s,o=t.length;for(var u=0;u<o;u++){s=this.GetFieldDefn(t[u]);if(!e&&s&&!r.IsTrue(s.IsCalculated)){for(var a=0;a<i;a++)if(t[u]===n[a])break;if(t[u]===n[u])continue;e=!0}}return e},e.prototype.SaveFieldArray=function(){var e=this.GetActivatedFieldList().splice(0);this.SetSavedFieldArray(e)},e.prototype.SaveCanMethodStates=function(e){var t={err:!1},n,r,i,s,o,u,a,f,l,c,h,p=this.IsActiveFieldListDirty(),d=this.GetBCState();if(e===P)return t;e===D&&(r=p,r!==d.m_bActiveFieldListDirty&&this.NotifyStateChanged("bActiveFieldListDirty",r)&&(d.m_bActiveFieldListDirty=r)),e===D&&(i=this.CanAssociate(),i!==d.m_bCanAssociate&&this.NotifyStateChanged("bCanAssociate",i)&&(d.m_bCanAssociate=i));if(e===D||e==="SAVE_BC_STATE_CANDELETE")t=this.CanDelete(),n=t,t={err:!1},s=n.retVal,s!==d.m_bCanDelete&&this.NotifyStateChanged("bCanDelete",s)&&(d.m_bCanDelete=s);return t={err:!1},e===D&&(o=this.CanInsert(!1),u=this.CanInsert(!0),o!==d.m_bCanInsert&&this.NotifyStateChanged("bCanInsert",o)&&(d.m_bCanInsert=o),u!==d.m_bCanInsertDynamic&&this.NotifyStateChanged("bCanInsertDynamic",u)&&(d.m_bCanInsertDynamic=u)),e===D&&(a=this.CanMergeRecords(),a!==d.m_bCanMergeRecords&&this.NotifyStateChanged("bCanMergeRecords",a)&&(d.m_bCanMergeRecords=a)),e===D&&(f=this.CanQuery(),f!==d.m_bCanQuery&&this.NotifyStateChanged("bCanQuery",f)&&(d.m_bCanQuery=f)),e===D&&(t=this.CanUpdateX(!1),n=t,l=n.retVal,t=this.CanUpdateX(!0),n=t,t={err:!1},c=n.retVal,l!==d.m_bCanUpdate&&this.NotifyStateChanged("bCanUpdate",l)&&(d.m_bCanUpdate=
l),c!==d.m_bCanUpdateDynamic&&(c?c=1:c=0,this.NotifyStateChanged("bCanUpdateDynamic",c)&&(d.m_bCanUpdateDynamic=c))),t={err:!1},e===D&&(h=this.HasAssocList(),h!==d.m_bHasAssocList&&this.NotifyStateChanged("bHasAssocList",h)&&(d.m_bHasAssocList=h)),this.SetBCState(d),t},e.prototype.HasPickList=function(e){var t=this.GetFieldDefn(e),n=!1;return t&&!r.IsEmpty(t.PickListName)&&(n=!0),n},e.prototype.IsPickAssocField=function(){},e.prototype.GetNextTokenConst=function(e){var t=0,n,i=0,s=0,o={};o.token="",o.next="";if(r.IsEmpty(e))return o;var u=e.charAt(0);while(u===" "||u==="	"||u==="\n")e=e.substring(1),u=e.charAt(0);u=e.charAt(i);if(u==='"'||u==="'"){n=u,u=e.charAt(++i);while((u!==n||e.charAt(i+1)===n)&&u!=="\0")u===n&&e.charAt(i+1)===n&&(u=e.charAt(++i)),u=e.charAt(++i);u=e.charAt(i),u===n&&i++}else{u=e.charAt(i++),s=e.length;while(u!==" "&&u!=="	"&&u!=="\n"&&u!=="\0"&&i<s)u=e.charAt(i++)}return o.token=e.substring(t,i-t),o.next=e.substring(i),o},e.prototype.LoadUserPropN=function(e,t,n,i,o,u){var a,f,l,c,h,p=null;l=e;for(a=0,f=0;a<100;a++,f++){a>0&&(l=e+" "+a),c=this.GetUserProperty(l);if(r.IsEmpty(c)){if(a===0||t.length&&f<10)continue;break}f=0;if(!n)t.push(c);else{p=c;var d=this.GetNextTokenConst(p);p=d.next,h=d.token,h=s.StripQuotes(h),t.push(h),d=this.GetNextTokenConst(p),p=d.next,h=d.token,d=this.GetNextTokenConst(p),p=d.next,h=d.token,h=s.StripQuotes(h),n.push(h),i&&(u&&(p.charAt(0)===","?u.push("Y"):u.push("N")),d=this.GetNextTokenConst(p),p=d.next,h=d.token,d=this.GetNextTokenConst(p),p=d.next,h=d.token,h=s.StripQuotes(h),i.push(h)),o&&(d=this.GetNextTokenConst(p),p=d.next,h=d.token,d=this.GetNextTokenConst(p),p=d.next,h=d.token,h=s.StripQuotes(h),o.push(h))}}},e.prototype.LoadOnFieldUpdateSet=function(e){var t,n,i,s,o,u,a,f,l,c=[],h=[],p=[],d=[],v=[],m=this.GetOnUpdSrcFldArray(),g=this.GetOnUpdDstFldArray(),y=this.GetOnUpdExprArray(),b=null,w=this.GetOnUpdConditionArray();if(!this.IsLoadOnFldUpdSet()){this.SetLoadOnFldUpd(!0),this.LoadUserPropN("On Field Update Set",c,h,p,d,v),n=c.length;for(t=0;t<n;t++){i=c[t],s=h[t];if(r.IsEmpty(i)||r.IsEmpty(s))continue;u=this.GetFieldDefn(i),a=this.GetFieldDefn(s),i!==s&&u&&a&&(o=null,r.IsEmpty(p[t])&&(r.IsEmpty(d[t])&&v[t]!=="Y"?p[t]="["+i+"]":p[t]='"'+p[t]+'"'),o={},o.m_expr=p[t],m.push(i),g.push(s),y.push(o),r.IsEmpty(d[t])?w.push(null):(o={},o.m_expr=d[t],w.push(o)))}}n=m.length;for(t=0;t<n;t++)e===m[t]&&(o=null,o=y[t],o!=null&&o.m_pQuery==null&&(f={},f.m_pSqlObj=b,f.ast=SiebelApp.Query.Parse(o.m_expr),o.m_pQuery=f,f=null),o=w[t],o!=null&&o.m_pQuery==null&&(l={},l.m_pSqlObj=b,l.ast=SiebelApp.Query.Parse(o.m_expr),o.m_pQuery=l,l=null));return!0},e.prototype.ValidatePickValue=function(e,t){var n={err:!1},i;if(!this.HasPickList(e))return n={err:"",retVal:!1},n;var s,u,a="",l,c,h=null,p=null,d=null,v=[];c=this.GetFieldDefn(e),l=c.PickListName,p=SiebelApp.S_App.Model.GetPickListDef(l);if(!p)return n={err:"",retVal:!1},n;u=p.IsBounded;var m=c.pickMap,g=m?m.length:0,y=p.NoInsert,b=yt.call(this,p,m);if(!u)return n={err:"",retVal:!1},n;var w;if(b||y){var E=SiebelApp.Metadata.GetBusCompDef(p.BC);w=c&&t&&p.TypeFld&&p.LOVType&&p.NoInsert&&E.TableName===o.get("LIST_OF_VAL_TABLE")}if(w){var S;for(var x=0;x<g;x++){d=m[x];if(d.FldName===e){S=d.PFldName;break}}for(x=0;x<g;x++){d=m[x];if(d.FldName!==e&&d.PFldName&&S!==d.PFldName){w=!1;break}}}if(w){i=n=f.GetPickListData(p,this,e);var T=i.retVal,N=T.length,C,k=!1;for(var L=0;L<N;L++){C=T[L];if(t===C){k=!0;break}}k?(n=this.SetFieldValueX(e,t,!0),T=null,i=n,n={err:!1},i.err?n=i:n={err:!1,retVal:!0}):(v.push(l),v.push(e),v.push(this.GetName()),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrBoundedPick",v,"","","",0,80),n={err:"SSAOMErrBoundedPick",retVal:!1})}else{n=this.GetPickList(e),i=n,n={err:!1};if(i.err)n=i;else{h=i.retVal;if(!h)return n={err:"",retVal:!1},n;s=this.CheckSpecialPickValue(e,t);if(s)return n={err:"",retVal:!1},h=null,n;if(c.pickMap.length===0)return SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrPickMapEmpty",v,"","","",0,80),n={err:"SSAOMErrPickMapEmpty",retVal:!1},h=null,n;if(!r.IsEmpty(t)){var A=c.pickMap.length;for(var O=0;O<A;O++){d=c.pickMap[O];if(d.IsConstrained)continue;if(d.FldName===e){a=d.PFldName;break}}n=h.SetFldSearchSpec(a,t),n=h.Execute(),i=n,function(t){n={err:!1};if(t.err)return v.push(l),v.push(e),v.push(this.GetName()),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrBoundedPick",v,"","","",0,80),n={err:"SSAOMErrBoundedPick",retVal:!1},h=null,n;n=h.Home(),t=n,n={err:!1},!t.err&&h.GetActiveRow()>-1&&h.GetWS().length===1?(n=h.PickCurrentRow(),t=n,n={err:!1},t.err?n={err:!0,retVal:!1}:n={err:!1,retVal:!0}):(v.push(l),v.push(e),v.push(this.GetName()),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrBoundedPick",v,"","","",0,80),n={err:"SSAOMErrBoundedPick",retVal:!1})}.call(this,i)}else n=h.PickNoRow(this,c),i=n,function(e){n={err:!1};if(!e.err)return n={err:"",retVal:!0},n;n=e}.call(this,i)}}return n},e.prototype.CheckSpecialPickValue=function(){return!1},e.prototype.GetPickList=function(e){var t={err:!1},n,i=!1,s,u="",a=function(){var e=!1;if(!u){e=!0;return}u.SetMasterBC(this);var n=r.IsTrue(l.TransPickList);n&&!r.IsEmpty(u.GetDefn().LanguageField)&&(t=u.SetFldSearchSpec(u.GetDefn().LanguageField,SiebelApp.S_App.Model.GetLanguage())),u.DeactivateFields();var i=h?h.length:0,s,o=0;for(var a=0;a<i;a++)s=h[a],s.IsConstrained&&o++,u.ActivateField(s.PFldName);u.SetSearchSpec("");var f=p.SrchSpec,c,d;if(o>0){var v=h.length,m=0;f&&(f="("+f+")");var g;d=function(){s=h[m];if(!s.IsConstrained)m++,m<v&&d.call(this);else{c=function(e){e.err||(g=e.retVal,r.IsEmpty(g)||(f?f=f+" AND (["+s.PFldName+'] = "'+g+'")':f="(["+s.PFldName+'] ="'+g+'")')),m++,m<v&&d.call(this)},t=this.FieldValue(s.FldName);var e=t;t={err:!1},c.call(this,e)}},m<v&&d.call(this)}var y=function(){u.SetSearchSpec(f),u.SetExecuted(!1),e=!1,d=null,c=null};if(o>0){var b=t;t={err:!1},y.call(this,b)}else y.call(this)},f=function(){a=null,t={err:i,retVal:u}};if(this.ValidateFieldDef(e)){var l=this
.GetFieldDefn(e);if(l){var c=l.PickListName,h=l.pickMap;if(!c)a.call(this);else{var p=SiebelApp.S_App.Model.GetPickListDef(c);if(!p)return s=[],i="SSASqlErrPickNotFound",s.push(c),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrPickNotFound",s,"","","",0,81),f.call(this),t;var d=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName());u=d.GetBusCompX(p.BC);if(u===null)i="SSAOMErrGetPickListBusComp",s=[],s.push(p.BC),s.push(e),s.push(this.GetName()),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrGetPickListBusComp",s,"","","",0,81),f.call(this);else{u.SetPickSrcField(e),u.SetSrcIdFld(e,this),u.SetBusCompType(o.get("BCTYPE_PICKLIST")),a.call(this);var v=t;t={err:!1},f.call(this,v)}}}else i=!0,f.call(this)}else i=!0,f.call(this);return t},e.prototype.SetSrcIdFld=function(e,t){var n=t.GetFieldDefn(e).pickMap;for(var r=0;r<n.length;r++)if(n[r].PFldName===w.get("SWE_ROW_ID_FIELD")){this.SetPickSrcIdFName(n[r].FldName);break}},e.prototype.PickNoRow=function(e,t){var n={err:!1},i,s=[];s=t.pickMap;var o=s.length,u=0,a=function(){r.IsTrue(s[u].IsConstrained)||(n=e.SetFieldValueX(s[u].FldName,"",!0)),i=n,n={err:!1};if(!i.err){u++;if(!(u<o)){n={err:!0,retVal:!1};return}a.call(this)}};return o&&a.call(this),n},e.prototype.SaveBusCompStates=function(e){var t,n,r=!1,i,s,o,u,a,f=this.GetBCState(),l,c=this.GetSelRowIdArray();if(e===P)return;if(e===D||e==="SAVE_BC_STATE_ROWNUMINFO"){i=W.call(this);var h=this.GetRowNum();h.retVal||(i=-1),i!==f.m_curRowNum&&this.NotifyStateChanged("curRowNum",i)&&(f.m_curRowNum=i);var p=this.GetNumRowsX();s=p.retVal,t=s>-1?1:0,t!==f.m_bNumRowsKnown&&this.NotifyStateChanged("bNumRowsKnown",t)&&(f.m_bNumRowsKnown=t),s!==f.m_numRows&&this.NotifyStateChanged("numRows",s)&&(f.m_numRows=s)}if(e===D||e==="SAVE_BC_STATE_SELINFO"){o=this.GetNumSelected(o),n=isNaN(o)?0:1,n!==f.m_bNumSelectedKnown&&this.NotifyStateChanged("bNumSelectedKnown",n)&&(f.m_bNumSelectedKnown=n),o!==f.m_numSelected&&this.NotifyStateChanged("numSelected",o)&&(f.m_numSelected=o),u=c.length,f.m_selRowIdArray=[],a=f.m_selRowIdArray.length;if(u===a){for(var d=0;d<u;d++)if(c[d]!==f.m_selRowIdArray[d])break;r=d===u?!0:!1}if(!r){f.m_selRowIdArray=[],this.NotifyNewSelIds();for(var v=0;v<u;v++)f.m_selRowIdArray.push(c[v])}}this.SetBCState(f)},e.prototype.WSGetBegRow=function(e,t){var n=this.GetNotifyInfoArray(),r=n[e];if(r)return r.GetBegRow(t);return},e.prototype.BeginQuery=function(){this.SetInQueryState(!0),this.NotifyBeginQuery()},e.prototype.UndoQuery=function(){this.SetInQueryState(!1);var e=this.GetFieldMap();for(var t in e)e[t].GetSearchSpec()&&e[t].SetSearchSpec("")},e.prototype.DoNewQueryText=function(e,t){var n=null,r="=",i;if(!e||!t)return n;var u=this.GetFieldDefn(e.GetFieldName()).DataType;if(u===o.get("DTYPE_UTCDATETIME")||u===w.get("DTYPE_TIME")||u=="10"){t.indexOf(">=")!="-1"&&(r=">=",t=t.replace(">=","")),t.indexOf("<=")!="-1"&&(r="<=",t=t.replace("<=","")),t.indexOf("<>")!="-1"&&(r="<>",t=t.replace("<>","")),t.indexOf(">")!="-1"&&(r=">",t=t.replace(">","")),t.indexOf("<")!="-1"&&(r="<",t=t.replace("<","")),t.indexOf("=")!="-1"&&(t=t.replace("=","")),t=t.trim();if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))t=t.substring(1,t.length-1),t=t.trim();var a=t;if(u===o.get("DTYPE_UTCDATETIME")||u==="10"){var f=this.GetField(e.GetFieldName()).GetDataType(),l=e.GetDisplayFormat(),c=SiebelApp.S_App.LocaleObject.GetDatum(f);SiebelApp.S_App.LocaleObject.FormattedToString(f,t,l),c.SetAsFormattedString(t,l),t=c.GetAsString(t);if(u===o.get("DTYPE_UTCDATETIME")){var h=new Date(t);if(a.length<=12)if(r=="<="||r==">")h.setDate(h.getDate()+1);else{if(r=="<>")return"("+this.DoNewQueryText(e,">"+a)+" OR "+this.DoNewQueryText(e,"<"+a)+")";if(r=="=")return"("+this.DoNewQueryText(e,">="+a)+" And "+this.DoNewQueryText(e,"<="+a)+")"}t=s.ToTS(h,!0),t=t.substr(6,4)+t.substr(0,2)+t.substr(3,2)+t.substr(11,2)+t.substr(14,2)+t.substr(17,2)}else t=t.substr(6,4)+t.substr(0,2)+t.substr(3,2)}else{var p=new SiebelApp.S_App.DatumTimeObject;p.SetAsFormattedString(t,e.GetDisplayFormat()),t=p.GetAsString()}r=r=="="?B:r,t=r==B?t.concat("%"):t,n=r+" "+"'"+t+"'",i="[",i+=e.GetFieldName(),i+="]",i+=" "+n;if(r=="<"||r=="<=")i="("+i+" And ["+e.GetFieldName()+"] <> '')";return i}return this.DoBldQueryText(e,t)},e.prototype.DoBldQueryText=function(e,t){var n=null,i;if(!e||!t)return n;if(this.GetFieldDefn(e.GetFieldName()).DataType==="10"||this.GetFieldDefn(e.GetFieldName()).DataType==="13"||this.GetFieldDefn(e.GetFieldName()).DataType==="12"){if(t.length>=8){var o,a="",f="",l="",c=!1,h=r.IsEmpty(e.GetDisplayFormat())?SiebelApp.S_App.LocaleObject.GetDateFormat().toUpperCase():e.GetDisplayFormat().toUpperCase();h=h.indexOf(" ")===-1?h:h.slice(0,h.indexOf(" "));switch(h){case"M/D/YYYY":o=t.split("/");if(o.length!==3){c=!0;break}a=bt(o[0]),f=bt(o[1]),l=o[2],t=l+a+f;break;case"DD/MM/YYYY":o=t.split("/");if(o.length!==3){c=!0;break}f=bt(o[0]),a=bt(o[1]),l=o[2],t=l+a+f;break;case"YYYY/M/D":o=t.split("/");if(o.length!==3){c=!0;break}l=o[0],a=bt(o[1]),f=bt(o[2]),t=l+a+f;break;case"D.M.YYYY":o=t.split(".");if(o.length!==3){c=!0;break}f=bt(o[0]),a=bt(o[1]),l=o[2],t=l+a+f;break;case"DD-MM-YYYY":o=t.split("-");if(o.length!==3){c=!0;break}f=bt(o[0]),a=bt(o[1]),l=o[2],t=l+a+f;break;case"DD.MM.YYYY":o=t.split(".");if(o.length!==3){c=!0;break}f=bt(o[0]),a=bt(o[1]),l=o[2],t=l+a+f;break;case"D/M/YYYY":o=t.split("/");if(o.length!==3){c=!0;break}f=bt(o[0]),a=bt(o[1]),l=o[2],t=l+a+f;break;case"D/MM/YYYY":o=t.split("/");if(o.length!==3){c=!0;break}f=bt(o[0]),a=bt(o[1]),l=o[2],t=l+a+f;break;case"YYYY/MM/DD":o=t.split("/");if(o.length!==3){c=!0;break}l=bt(o[0]),a=bt(o[1]),f=o[2],t=l+a+f;break;case"YYYY-MM-DD":o=t.split("-");if(o.length!==3){c=!0;break}l=bt(o[0]),a=bt(o[1]),f=o[2],t=l+a+f;break;case"D-M-YYYY":o=t.split("-");if(o.length!==3){c=!0;break}f=bt(o[0]),a=bt(o[1]),l=o[2],t=l+a+f;break;case"MM/DD/YYYY":o=t.split("/");if(o.length!==3){c=!0;break}a=bt(o[0]),f=bt(o[1]),l=o[2],t=l+a+f}c&&(s.CcfLogEvent([u,14,0,82]),i="["+e.GetName
()+"]"+"="+t);var p=new Date(t.substring(0,4),t.substring(4,6)-1,t.substring(6,8)),d=new Date,v=d.getTimezoneOffset();if(this.GetFieldDefn(e.GetFieldName()).DataType==="13"){var m=new Date(p.getFullYear(),p.getMonth(),p.getDate());m.setMinutes(m.getMinutes()+v);var g=new Date(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes());g.setHours(g.getHours()+24);var y=m.getDate()<10?"0"+m.getDate():""+m.getDate(),b=m.getHours()<10?"0"+m.getHours():""+m.getHours(),w=m.getMonth()+1;w=w<10?"0"+w:""+w;var E=g.getDate()<10?"0"+g.getDate():""+g.getDate(),S=g.getHours()<10?"0"+g.getHours():""+g.getHours(),x=g.getMonth()+1;x=x<10?"0"+x:""+x;var T=m.getFullYear()+""+w+""+y+""+b,N=g.getFullYear()+""+x+""+E+""+S;i="["+e.GetName()+"]"+" >= "+'"'+T+'"'+" && "+"["+e.GetName()+"]"+" <= "+'"'+N+'"'}else i="["+e.GetName()+"]"+"="+t}else s.CcfLogEvent([u,14,0,82]),i="["+e.GetName()+"]"+"="+t;return i}return t.indexOf("%")!==-1&&(t=t.replace(/\%/g,"\\\\%")),t.indexOf("_")!==-1&&(t=t.replace(/\_/g,"\\\\_")),t.indexOf("$")!==-1&&(t=t.replace(/\$/g,"\\\\$")),t.indexOf("?")!==-1&&(t=t.replace(/\?/g,"%")),t.indexOf("*")!==-1&&(t=t.replace(/\*/g,"%")),t=t.concat("%"),n=B+" "+'"'+t+'"',i="[",i+=e.GetFieldName(),i+="]",i+=" "+n,i},e.prototype.NotifyBeginQuery=function(){var e;if(this.IsNotifyEnabled()){var t=this.GetNotifyInfoArray(),n=t.length;for(var r=0;r<n;r++){e=t[r];if(e){var i=e.GetBusCompNotify();i&&i.NotifyBeginQuery()}}}},e.prototype.SetInQueryState=function(e){return this.IsInQueryState()!==e&&this.NotifyStateChanged("bInQueryState",e),d.SetInQueryState.call(this)},e.prototype.SqlDeleteRecord=function(e){var t={err:!1},n,n;if(this.IsVBC())n={err:!1};else{var i=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName()),s=[],o=[],u=this.GetLinkDef();if(u&&!r.IsEmpty(u.interTableName)){var a=this.GetParentBusComp(),f=a.GetActiveRow(),l=a.FindWorkSet(f);i=u.interTableName,s.push(u.interParentColName),s.push(u.interChildColName),o.push(l[u.srcFieldName]),o.push(e[u.destFieldName])}else s.push("Id"),o.push(e.Id);var c=SiebelApp.SqlBuilder.DeleteRecords(i,s,"AND"),h={};h.query=c,h.valList=o,this.SetLocalTxn(JSON.stringify(h)),n=t=SiebelApp.BrowserCacheMgr.Execute(c,o)}return t=n,t},e.prototype.DeleteRecordX=function(e,t){var n={err:!1},i;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.DeleteRecordX");var u,a={},f=CCFMiscUtil_CreatePropSet();a[x]=this.GetName(),a[T]=N,a[C]="DeleteRecord",a[O]=this;var l=r.IsEmpty(t)?!0:t;a[k]=L,i=n=SiebelApp.S_App.Model.InvokeRegisteredSvc(a,f),n={err:!1};if(!i.err){u=i.retVal;if(u.Outputargs&&u.Outputargs.GetProperty("Invoked")&&u.Outputargs.GetProperty("Invoked").toString()==="true"){var c=u.Outputargs.GetProperty("RetVal"),h=i.err;return c?n={err:h,retVal:c}:n={err:h,retVal:""},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.DeleteRecordX"),n}if(u&&u.Outputargs){u.Outputargs.SetType(L);var p=u.Outputargs.GetPropertyAsStr("bAddSyncQ");r.IsEmpty(p)||(l=p)}var d=!0,v="";this.CanDeferDelete()||(t=!1);if(!this.IsExecuted()||!this.CheckActiveRow()||!this.CanDeleteX())n={err:!0};this.NotifyDeleteRecord(!0,d);var m=z.call(this);v=this.FindWorkSet(m);if(!t)if(this.IsNewRecordPending())n=this.PostDeleteRecord(e,t);else{n=this.SqlDeleteRecord(v),i=n,n={err:!1};if(i.err)n=i;else if(this.IsVBC())n=this.PostDeleteRecord(e,t),a[k]=A,f.SetProperty("Record",JSON.stringify(v)),i=n=SiebelApp.S_App.Model.InvokeRegisteredSvc(a,f),n=i;else{var g=this.GetRecordCount();this.SetRecordCount(--g),this.SetOpType(o.get("DELETERECORD"));var y;n=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),v);var b=n;(function(o){n={err:!1};if(o.err)return n=o,n;y=o.retVal,this.SetTxnId(s.GetTempId()),n=this.SyncQRec(y);var u=n;n={err:!1};var c=u.retVal;this.SetNewTxn(c),l=r.IsTrue(l);var h=this.GetLinkDef();if(h&&h.interTableName){var p=this.GetParentBusComp(),d=p.GetActiveRow(),m=p.FindWorkSet(d);y=mt.call(this,m[h.srcFieldName],y)}this.UpdateSync(y,l),n=this.PostDeleteRecord(e,t),a[k]=A,f.SetProperty("Record",JSON.stringify(v)),i=n=SiebelApp.S_App.Model.InvokeRegisteredSvc(a,f),n=i}).call(this,b)}SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.DeleteRecordX")}}else n=i;return n},e.prototype.ScrollWorkSetByNum=function(e,t,n){var r={err:!1},i,s=this.IsNotifyEnabled(),o=!1,u=this.GetActiveRow(),a=0,f=0,l=0,c=t>=0?!0:!1;if(!this.IsExecuted())return r={err:!0},r;e=0;var h=this.GetNotifyInfoArray();if(e<h.length){var p=h[e];if(p){this.CheckActiveRow()||(r={err:!0});var d=this.GetWS().length,v=p.GetBegRow(n),m=p.GetSize(n);t>0?(a=d-(v+m),f=t-a):(a=v,f=t+a),r=this.ScrollWorkSet(f),i=r,r={err:!1},o=i.err,v=p.GetBegRow(n),m=p.GetSize(n),d=this.GetWS().length;if(o){if(o==="SSAOMErrScrollWorkSet")return r=i,r;v=d>m?d-m:0,p.SetBegRow(n,v),u=d-1}else i.retVal&&(l=i.retVal),t>0?a>t?v+=t:v+=a:a>-t?v+=t:v=0,p.SetBegRow(v,n),u-=l;p.SetCurrRow(v,n),o&&u!==this.GetActiveRow()&&(o=!1),l&&(u===this.GetActiveRow()&&!o&&(this.OnActiveRowChanged(),this.EventChangeRecord()),this.DisableNotify()),u!==this.GetActiveRow()?(this.SetActiveRow(u,null,n),r={err:!1},this.IsNotifyEnabled()&&(r=this.NotifyNewData())):r=this.UpdateLinks(!1),r={err:!1},l&&(s?this.EnableNotify():this.DisableNotify(),this.NotifyScrollData(c,l))}}else r={err:"SSAOMErrNotifyInfo"};return r},e.prototype.NextSet=function(e,t){var n={err:!1},r;this.FinishRecord();if(!this.IsExecuted())return n={err:!0},n;if(!this.CheckActiveRow())return n={err:!0},n;var i=0,s=0,o=this.GetNotifyInfoArray(),u=o[s],a=this.GetActiveRow(),f=this.IsNotifyEnabled(),l=!1,c=function(){if(i){a===this.GetActiveRow()&&!l&&(this.OnActiveRowChanged(),this.EventChangeRecord()),this.DisableNotify();var e=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");e=!1}a!==this.GetActiveRow()?n=this.SetActiveRow(a,null,this.GetName()):n=this.UpdateLinks(!1),r=n,n={err:!1};if(r.err){n={err:!0,retVal:r};return}if(i){f?this.EnableNotify():this.DisableNotify();var e=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");e=!1,n=this
.NotifyNewData(),r=n,function(e){n={err:!1};if(!e.err){n={err:!1,retVal:e};return}n={err:!0,retVal:e};return}.call(this,r)}};if(u){var h=u.GetBegRow(t),p=u.GetSize(t);a=this.GetActiveRow();var d=this.GetWS().length;i=h+2*p-d,i<0&&(i=0),i>0?(n=this.ScrollWorkSet(i),r=n,n={err:!1},r.err?(h=d>p?d-p:0,u.SetBegRow(h,t),u.SetCurrRow(h,t),a=d-1,l=!0):(h+=p-i,a+=p-i,u.SetBegRow(h,t)),u.SetCurrRow(h,t),l&&a!==this.GetActiveRow()&&(l=!1),c.call(this)):(h+=u.GetSize(t)-i,u.SetBegRow(h,t),a+=u.GetSize(t)-i,u.SetCurrRow(h,t),c.call(this))}return n},e.prototype.PriorSet=function(e,t){var n={err:!1},r;this.FinishRecord();if(!this.IsExecuted())return n={err:!0},n;if(!this.CheckActiveRow())return n={err:!0},n;var i=0,s=0,o=this.GetNotifyInfoArray(),u=o[s],a=this.GetActiveRow(),f=this.IsNotifyEnabled(),l=!1,c=function(){if(i){a===this.GetActiveRow()&&!l&&(this.OnActiveRowChanged(),this.EventChangeRecord()),this.DisableNotify();var e=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");e=!1}a!==this.GetActiveRow()?n=this.SetActiveRow(a,null,this.GetName()):n=this.UpdateLinks(!1),r=n,n={err:!1};if(r.err){n={err:!0,retVal:r};return}if(i){f?this.EnableNotify():this.DisableNotify();var e=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");e=!1,n=this.NotifyNewData(),r=n,function(e){n={err:!1};if(!e.err){n={err:!1,retVal:e};return}n={err:!0,retVal:e};return}.call(this,r)}};if(u){var h=u.GetBegRow(t),p=u.GetSize(t);a=this.GetActiveRow();var d=this.GetWS().length;i=h-p,i>0&&(i=0),i<0?(n=this.ScrollWorkSet(i),r=n,n={err:!1},r.err?(h=0,u.SetBegRow(h,t),u.SetCurrRow(h,t),a=0,l=!0):(h-=p- -i,a-=p- -i,u.SetBegRow(h,t)),u.SetCurrRow(h,t),l&&a!==this.GetActiveRow()&&(l=!1),c.call(this)):(h-=p- -i,a-=p- -i,u.SetBegRow(h,t),u.SetCurrRow(h,t),c.call(this))}return n},e.prototype.GetNextRecord=function(){var e={err:!1},t,n=this.GetCursor(),i=CCFMiscUtil_CreatePropSet(),s={};s[x]=this.GetName(),s[T]=N,s[C]="GetNextRecord",s[O]=this,s[k]=L,i.SetProperty("Cursor",n[0]),t=e=l.InvokeRegisteredSvc(s,i),e={err:!1};var o=t.retVal,u=t.err;e=t=wt.call(this,o.Outputargs);if(t&&(t.err||t.retVal))return e;if(this.IsVBC()||this.GetIsRelatedBC()){var a;return this.IsVBC()?a=this.GetVBCRecords():a=this.GetRelatedBCRecords(),n[0]+1>=a.length?e={err:!0}:(n[0]=n[0]+1,e={err:!1,retVal:a[n[0]]}),e}var f=this.GetQuerySearchSpec(),c=this.GetQuerySortSpec(),h=this.GetQueryFieldList(),p=this.GetQueryOrder();n[0]++;var d=[],v=this.GetExtObjProp("m_pCurLinkQueryDef");d.push(this.GetName()),v&&(r.IsEmpty(v.Defn.interTableName)||d.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(v.Defn.interTableName)));var m=SiebelApp.SqlBuilder.SelectRecordPopulateWS(d,f,h,c,p,n);t=e=SiebelApp.BrowserCacheMgr.SelectRecord(m),e={err:!1};if(t.err)e={err:!0},n[0]--;else{var g=t.retVal;if(!g||g.length===0)e={err:!0},n[0]--;else{s[k]=A,i.SetProperty("Record",JSON.stringify(g)),t=e=SiebelApp.S_App.Model.InvokeRegisteredSvc(s,i),e={err:!1},o=t.retVal,u=t.err;if(o.Outputargs&&o.Outputargs.GetProperty("Invoked")&&o.Outputargs.GetPropertyAsStr("Invoked")==="true"){var y=o.Outputargs.GetProperty("RetVal");y&&(g=JSON.parse(y))}e={err:u,retVal:g}}}return e},e.prototype.GetPriorRecord=function(e){var t={err:!1},n,i=this.GetCursor(),s=CCFMiscUtil_CreatePropSet(),o={};o[x]=this.GetName(),o[T]=N,o[C]="GetPriorRecord",o[O]=this,o[k]=L,s.SetProperty("Cursor",i[0]),n=t=l.InvokeRegisteredSvc(o,s),t={err:!1};var u=n.retVal,a=n.err;t=n=wt.call(this,u.Outputargs);if(n&&(n.err||n.retVal))return t;var f=e?e:this.GetWorkSetSize();if(i[0]<=0)return t={err:!0},t;var c=i[0];i[0]=i[0]-this.GetWS().length;if(i[0]<0)return i[0]=c,t={err:!0},t;if(this.IsVBC()||this.GetIsRelatedBC()){var h;return this.IsVBC()?h=this.GetVBCRecords():h=this.GetRelatedBCRecords(),t={err:!1,retVal:h[i[0]]},i[0]=i[0]+this.GetWS().length-1,t}var p=this.GetQuerySearchSpec(),d=this.GetQuerySortSpec(),v=this.GetQueryFieldList(),m=this.GetQueryOrder(),g=this,y=[],b=this.GetExtObjProp("m_pCurLinkQueryDef");y.push(g.GetName()),b&&(r.IsEmpty(b.Defn.interTableName)||y.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(b.Defn.interTableName)));var w=SiebelApp.SqlBuilder.SelectRecordPopulateWS(y,p,v,d,m,i);n=t=SiebelApp.BrowserCacheMgr.SelectRecord(w),t={err:!1};if(n.err)t=n,i[0]=c;else{var E=n.retVal;if(!E||E.length===0)t={err:!0},i[0]=c;else{e||f>this.GetRecordCount()?i[0]=c:(i[0]=i[0]+this.GetWS().length-1,this.SetCursor(i)),o[k]=A,s.SetProperty("Record",JSON.stringify(E)),n=t=SiebelApp.S_App.Model.InvokeRegisteredSvc(o,s),u=n.retVal,a=n.err;if(u.Outputargs&&u.Outputargs.GetProperty("Invoked")&&u.Outputargs.GetPropertyAsStr("Invoked")==="true"){var S=u.Outputargs.GetProperty("RetVal");S&&(E=JSON.parse(S))}t={err:!1,retVal:E}}}return t},e.prototype.ScrollWorkSet=function(e,t){var n={err:!1},r;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.ScrollWorkSet");if(e===0)return n={err:!1},n;if(!this.IsExecuted())return n={err:!0},n;t||(t=0);var i,s,o=!1,u=0,a,f;if(e>0){s=this.GetWS().length,i=this.FindWorkSet(s-1);if(!i)return n={err:"SSAOMErrScrollWorkSet"},n;f=function(){n=this.GetNextRecord(i),r=n,n={err:!1},a=r.err,i=r.retVal,!i||a?o=!0:(this.InsertWorkSet(this.GetWS().length,i),t++,this.DeleteWorkSet(0)),u++,u<e&&!o&&f.call(this)},u<e&&f.call(this),n={err:!1},!o||u>1?n={err:!1,retVal:t}:n={err:!0}}else{i=this.FindWorkSet(0,i);if(!i)return n={err:!0},n;f=function(){n=this.GetPriorRecord(),r=n,n={err:!1},a=r.err,i=r.retVal,!i||a?o=!0:(t--,this.InsertWorkSet(0,i),this.DeleteWorkSet(this.GetWS().length-1)),u++,u<-e&&!o&&f.call(this)},u<-e&&f.call(this),n={err:!1},!o||u>1?n={err:!1,retVal:t}:n={err:!0},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.ScrollWorkSet")}return n},e.prototype.PostDeleteRecord=function(e,t){var n={err:!1},r,i=!0,s=z.call(this);this.DeleteWorkSet(s);var o=this.GetWorkSetSize(),u=function(){this.GetWS().length===0?U.call(this,-1):s===-1?U.call(this,0):s===this.GetWS().length&&U.call(this,--s),this.SetCommitPending(!1),this.SetNewRecPending(!1),this.SetDeleteRecordPending
(!1),this.NotifyDeleteRecord(!1,i),this.UpdateLinks(!1),n={err:!1},this.OnActiveRowChanged()},a=this.GetCursor();a[0]--;if(this.GetWS().length===o-1){if(o>0){var f;n=this.GetNextRecord(),r=n,n={err:!1},f=r.retVal;var l=r.err;if(!l&&f)this.InsertWorkSet(this.GetWS().length,f);else if(r.err||!f)n=this.GetPriorRecord(),r=n,n={err:!1},l=r.err,f=r.retVal,!l&&f&&(a[0]++,this.InsertWorkSet(0,f));n={err:!1},u.call(this)}}else u.call(this);return n},e.prototype.GetCalcFields=function(){var e,t=this.GetDefn().Fields;for(var n in t)r.IsTrue(t[n].IsCalculated)&&e.push(t[n])},e.prototype.ClearToQuery=function(){this.SetSearchSpec("")},e.prototype.ActivateMultipleFields=function(e,t){if(e){var n=e.EnumProperties(!0),i=[];while(!r.IsEmpty(n))i.push(n),n=e.EnumProperties(!1);t&&this.UpdateDeactivateableFldList(i),this.ActivateFieldList(i)}},e.prototype.RefreshBusComp=function(){var e={err:!1},t,n=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName()),r=n.GetBusCompX(this.GetName()),i=r.IsExecuted();return i?(e=r.Execute(),t=e,e={err:!1},t.err||(e=r.Home(),t=e,function(t){e={err:!1};if(!t.err)return this.NotifyExecute(),e=this.NotifyNewData(),e={err:!1,retVal:""},e}.call(this,t)),e):(e={err:!1,retVal:""},e)},e.prototype.GetPicklistBusComp=function(e){var t=this.GetFieldDefn(e),n=t.PickListName;if(n){t=SiebelApp.S_App.Model.GetPickListDef(n);if(t){var r=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName()),i=r.GetBusComp(t.BC);return i.SetMasterBC(this),i.SetPickSrcField(e),i.SetSrcIdFld(e,this),i}return""}return""},e.prototype.RefreshRecord=function(){var e={err:!1},t,n=this.GetWS()[this.GetActiveRow()];e=this.FieldValue(w.get("SWE_ROW_ID_FIELD"),n),t=e,e={err:!1};if(!t.err){var r=t.retVal;if(r){var i=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName()),s=i.GetBusCompX(this.GetName()),o;o="[",o+=w.get("SWE_ROW_ID_FIELD"),o+="] = ",o+='"'+r+'"',s.SetSearchSpec(o),e=s.Execute(),t=e,e={err:!1},t.err||(e=s.Home(),t=e,function(t){e={err:!1};if(!t.err){var r=s.FindWorkSet(0);if(!r)return e={err:!1,retVal:""},i.EndLife(),i=null,s=null,e;var o=s.GetActivatedFieldList(),u;for(var a=0;a<o.length;a++){var f=o[a];n[SiebelApp.OfflineUtils.RemoveNonAlphaChars(f)]=r[SiebelApp.OfflineUtils.RemoveNonAlphaChars(f)]}return e={err:!1,retVal:n},l.ReleaseBO(i),s=null,e}}.call(this,t))}}return e},e.prototype.GetReqFieldsHasDefault=function(){var e=this.GetDefn().Fields,t=[];for(var n in e)(!r.IsEmpty(e[n].PostDefault)||!r.IsEmpty(e[n].PreDefault))&&t.push(n);return t},e.prototype.SetMultipleFieldValues=function(e){var t={err:!1},n;if(e){var i=e.EnumProperties(!0),s=[],o=[];while(!r.IsEmpty(i))s.push(i),o.push(e.GetPropertyAsStr(i)),i=e.EnumProperties(!1);var u=s.length,a=0,f=function(){t=this.SetFieldValueX(s[a],o[a]),n=t,t={err:!1},n.err?t=n:(a++,a<u&&f.call(this))};a<u&&f.call(this)}return t},e.prototype.GetMultipleFieldValues=function(e,t){var n={err:!1},i;if(e&&t){var s=e.EnumProperties(!0),o=[];while(!r.IsEmpty(s))o.push(s),s=e.EnumProperties(!1);var u=o.length,a=0,f=function(){n=this.FieldValue(o[a]),i=n,n={err:!1},i.err?n=i:(t.SetPropertyStr(o[a],i.retVal),a++,a<u&&f.call(this))};a<u&&f.call(this)}return n},e.prototype.GetLastErrCode=function(){return i.OfflineErrorObject.GetErrorCode()},e.prototype.GetLastErrText=function(){return i.OfflineErrorObject.GetErrorText()},e.prototype.SelectAll=function(){var e={err:!1},t,n=!1,r=this.GetMultiSelectMode();return!this.IsExecuted()||!this.CheckActiveRow()?(n=!0,e={err:n}):(this.SetMultiSelectMode(!0),this.SetInverseSelection(!0),this.SetSelRowIdArray([]),r||this.NotifySelModeChange(!0),this.NotifyChangeSelection()),e={err:n},e},SiebelApp.OfflineUtils.DefineExtentions(e,v,d)})(),typeof SiebelApp.S_App.OfflineBCInterface=="undefined"&&(SiebelJS.Namespace("SiebelApp.S_App.OfflineBCInterface"),SiebelApp.S_App.OfflineBCInterface=function(){function r(e){var t=e,n=this,r={GetParentBusComp:1,GetBusObj:2};for(var i in e)(function(){var t=i,s=e;return typeof e[t]=="function"&&!n[t]&&!r[t]&&(n[t]=function(){return s.constructor.prototype[t]?s.constructor.prototype[t].apply(s,arguments):s[t].apply(s,arguments)}),n[t]})();this.GetOfflineBC=function(){return t},this.GetParentBusComp=function(){var e=t.GetParentBusComp();if(e)return e.GetInterface()},this.GetBusObj=function(){var e=t.GetBusObj();if(e)return e.GetInterface()},this.EndLife=function(){t=null,n=null,r=null}}var e=SiebelApp.OfflineUtils,t=SiebelApp.Offlineconstants,n=t.get("LOG_EVT_CLIENT_SYS");return r.prototype.SetFieldValue=function(e,t,n,r,i){return this.GetOfflineBC().SetFieldValueX(e,t,n,r,i)},r.prototype.InvokeMethod=function(e,t){return this.GetOfflineBC().InvokeMethodX(e,t)},r.prototype.CanInvokeMethod=function(e){return this.GetOfflineBC().CanInvokeMethodX(e)},r.prototype.UpdateRecord=function(e){return this.GetOfflineBC().UpdateRecordX(e)},r.prototype.CanUpdate=function(e,t){return this.GetOfflineBC().CanUpdateX(e,t)},r.prototype.NewRecord=function(e,t,n){return this.GetOfflineBC().NewRecordX(e,t,n)},r.prototype.NextSelected=function(){return alert('Server Script Business Component interface method "NextSelected" is unsupported'),e.CcfLogEvent([n,111,0,116,this.GetName()]),0},r.prototype.GetIdValue=function(){return this.GetOfflineBC().GetIdValueX()},r.prototype.WSNextRecord=function(){return this.GetOfflineBC().WSNextRecordX()},r.prototype.WSHome=function(){return this.GetOfflineBC().WSHomeX()},r.prototype.DeleteRecord=function(e,t){return this.GetOfflineBC().DeleteRecordX(e,t)},r.prototype.Pick=function(){var e={err:!1},t,n=this.GetOfflineBC().GetMasterBC();return n?e=this.GetOfflineBC().PickCurrentRow():e={err:!0},e},r.prototype.ActivateField=function(e){var t=this.GetOfflineBC();return t.UpdateDeactivateableFldList([e]),t.ActivateField(e)},r.prototype.ActivateMultipleFields=function(e){return this.GetOfflineBC().ActivateMultipleFields(e,!0)},r.prototype.Associate=function(){return this.GetOfflineBC().AddAssociation()},r.prototype.ExecuteQuery=function(){return this.GetOfflineBC().Execute()},r.prototype
.ExecuteQuery2=function(t,r){alert('Server Script Business Component interface method "ExecuteQuery2" is unsupported'),e.CcfLogEvent([n,111,0,111,this.GetName()])},r.prototype.FirstRecord=function(){return this.GetOfflineBC().Home()},r.prototype.FirstSelected=function(){return alert('Server Script Business Component interface method "FirstSelected" is unsupported'),e.CcfLogEvent([n,111,0,117,this.GetName()]),!0},r.prototype.GetAssocBusComp=function(){return this.GetOfflineBC().GetAssocList()},r.prototype.GetFieldValue=function(e){var t=this.GetOfflineBC().FieldValue(e);return t.err?"":t.retVal},r.prototype.GetFormattedFieldValue=function(t){var r="";return alert('Server Script Business Component interface method "GetFormattedFieldValue" is unsupported'),e.CcfLogEvent([n,111,0,118,this.GetName()]),r},r.prototype.GetMultipleFieldValues=function(e,t){return this.GetOfflineBC().GetMultipleFieldValues(e,t)},r.prototype.SetMultipleFieldValues=function(e){return this.GetOfflineBC().SetMultipleFieldValues(e)},r.prototype.GetMVGBusComp=function(t){return alert('Server Script Business Component interface method "GetMVGBusComp" is unsupported'),e.CcfLogEvent([n,111,0,119,this.GetName()]),""},r.prototype.GetNamedSearch=function(t){return alert('Server Script Business Component interface method "GetNamedSearch" is unsupported'),e.CcfLogEvent([n,111,0,120,this.GetName()]),""},r.prototype.GetPicklistBusComp=function(e){return this.GetOfflineBC().GetPicklistBusComp(e)},r.prototype.Name=function(){return this.GetOfflineBC().GetName()},r.prototype.BusObject=function(){return this.GetOfflineBC().GetBusObj()},r.prototype.ParentBusComp=function(){return this.GetOfflineBC().GetParentBusComp()},r.prototype.CountRecords=function(){return this.GetOfflineBC().GetRecordCount()},r.prototype.SetSearchSpec=function(e,t){this.GetOfflineBC().SetFldSearchSpec(e,t)},r.prototype.GetSearchExpr=function(){return this.GetOfflineBC().GetSearchExpr()},r.prototype.GetSearchSpec=function(e){return this.GetOfflineBC().GetFldSearchSpec(e)},r.prototype.GetUserProperty=function(e){return this.GetOfflineBC().GetUserProperty(e)},r.prototype.GetViewMode=function(){return this.GetOfflineBC().GetViewMode()},r.prototype.GetNumRows=function(){return this.GetOfflineBC().GetNumRowsX()},r.prototype.ClearToQuery=function(){return this.GetOfflineBC().ClearToQuery()},r.prototype.DeactivateFields=function(){return this.GetOfflineBC().DeactivateFields()},r.prototype.LastRecord=function(){return alert('Server Script Business Component interface method "LastRecord" is unsupported'),e.CcfLogEvent([n,111,0,121,this.GetName()]),!1},r.prototype.PreviousRecord=function(){return alert('Server Script Business Component interface method "PreviousRecord" is unsupported'),e.CcfLogEvent([n,111,0,123,this.GetName()]),!1},r.prototype.RefineQuery=function(){alert('Server Script Business Component interface method "RefineQuery" is unsupported'),e.CcfLogEvent([n,111,0,115,this.GetName()])},r.prototype.SetFormattedFieldValue=function(t,r){alert('Server Script Business Component interface method "SetFormattedFieldValue" is unsupported'),e.CcfLogEvent([n,111,0,114,this.GetName()])},r.prototype.SetNamedSearch=function(t,r){alert('Server Script Business Component interface method "SetNamedSearch" is unsupported'),e.CcfLogEvent([n,111,0,113,this.GetName()])},r.prototype.SetUserProperty=function(t,r){alert('Server Script Business Component interface method "SetUserProperty" is unsupported'),e.CcfLogEvent([n,111,0,112,this.GetName()])},r.prototype.SetViewMode=function(e){this.GetOfflineBC().SetViewMode(e)},r.prototype.GetSortSpec=function(){return this.GetOfflineBC().GetQuerySortSpec()},r.prototype.SetSortSpec=function(e){this.GetOfflineBC().SetQuerySortSpec(e)},r}())}),SiebelApp.S_App.View&&function(){var e=SiebelApp.S_App.View,t=SiebelApp.Constants,n=SiebelApp.Offlineconstants,r=SiebelApp.Utils,i=SiebelApp.OfflineUtils,s={},o={};s.View=SiebelApp.S_App.View,s.ViewPro=SiebelApp.S_App.View.prototype,SiebelApp.S_App.View=function(){s.View.call(this);var e=[];this.GetBCBrokerList=function(){return e},this.AddToBCBrokerList=function(t){e.push(t)},this.ResetBCBrokerList=function(){e=[]};var t=this.GetActiveApplet;this.GetActiveApplet=function(){var e=SiebelApp.S_App.Model.GetIsInterFace();if(e<0||e===0)return t.call(this);var n=t.call(this);return n?n.GetInterface():t.call(this)}},SiebelApp.S_App.View.prototype=s.ViewPro,SiebelApp.S_App.View.prototype.constructor=s.View,s.EndLife=e.prototype.EndLife,s.GetBusObj=e.prototype.GetBusObj,s.GetApplet=e.prototype.GetApplet,e.prototype.ActivateFields=function(){var e={err:!1},t;SiebelApp.OfflineUtils.CcfLogEvent([n.get("LOG_EVT_CLIENT_SYS"),27,6,63,this.GetName()]);var r=this.GetAppletMap(),i=[],s=0;for(var o in r)r[o]&&(i[s]={execute:r[o].ActivateFields,executeScope:r[o]},s++);return $.eachAsyncOp(this,i),t=e,e=t,$.setReturnValue(e),e},e.prototype.SetNotifyObjData=function(e){var n={err:!1},r,i=this.GetBCBrokerList(),s=i.length,o=e.GetChildCount(),u=0,a=function(){var r=e.GetChild(u);if(r){var f=r.GetType();if(f===t.get("SWE_PST_BUSCOMP_INFO")){var l=r.GetValue(),c=0,h=function(){var e=i[c].GetBC(),t=e.GetVarName();l===t?i[c].GetObjInfo(r,!0):(c++,c<s&&h.call(this))};s>0&&h.call(this)}}n={err:!1},$.setReturnValue(n),u++,u<o&&a.call(this)};return u<o&&a.call(this),n},e.prototype.Populate=function(){var e={err:!1},t,r=this.GetAppletMap(),s="",o,u,a,f,l=[],c=0,h={};i.CcfLogEvent([n.get("LOG_EVT_CLIENT_SYS"),54,6,14,this.GetName()]);for(s in r)if(r[s]){a=r[s].GetBusComp();if(!a)continue;f=a.GetVarName(),o=this.GetBCBroker(a),u=r[s].GetRowListRowCount(),h[f]||(h[f]=0),a.GetWS().length<u&&h[f]<u&&(h[f]=u,l[c++]={execute:o.SetWorkSetSize,executeScope:o,preExecute:function(){var e=u,t=s;return function(){return[e,t]}}()})}l.length>0&&$.eachAsyncOp(this,l),e={err:!1},$.setReturnValue(e),this.ActivateFieldsInActivationBlock(),t=e,e={err:!1},$.setReturnValue(e);if(!t.err){var r=this.GetAppletMap(),p=[],d=0;for(var s in r)r[s]&&(p[d]={execute:r[s]
.Populate,executeScope:r[s]},d++);$.eachAsyncOp(this,p),t=e,p,r,l=null,e=t,$.setReturnValue(e)}else e=t,$.setReturnValue(e);return e},e.prototype.ActivateFieldsInActivationBlock=function(){var e=this.GetBusObj(),t=e.GetBCMap();e.BeginActivationBlock(t),e.EndActivationBlock()},e.prototype.InterpolateDyncUIPS=function(e){var t={err:!1},n,i=this.GetAppletMap(),s=e.GetChildCount(),o,u,a,f=function(){},l=0;return f=function(){o=e.GetChild(l),u=o.GetValue();if(!r.IsEmpty(u)){for(var n in i)if(i[n]&&i[n].GetVarName()===u){a=i[n].GetName(),i[a].InterpolatePS(o);break}t={err:!1},$.setReturnValue(t),l++,l<s&&f.call(this)}},f.call(this),t},e.prototype.ShowView=function(){},e.prototype.PickUpUIActiveFields=function(){},e.prototype.AddBCBroker=function(e,t){var n=this.GetBCBroker(e);return n||(n=new SiebelApp.S_App.BCBroker,n.Initialize(this.GetBusObj().GetZone(),e,t),this.AddToBCBrokerList(n)),n&&(n.AddReference(),e.GetNotifyInfoArray()[0].SetAppletArray(t)),n},e.prototype.GetBCBroker=function(e){var t,n,r=this.GetBCBrokerList().length;for(t=0;t<r;t++){n=this.GetBCBrokerList()[t];if(n.GetBC()===e)return n}return null},e.prototype.ResetNotifyPropSet=function(){var e=this.GetBCBrokerList(),t=e.length;for(var n=0;n<t;n++)e[n].ResetNotifyPropSet()},e.prototype.RemoveBCBroker=function(e){var t=this.GetBCBroker(e);if(t){t.RemoveReference();if(t.GetNumOfRefs()<=0){var n=this.GetBCBrokerList(),r=n.indexOf(t);n.splice(r,1),t=null}}},e.prototype.GetDefn=function(){return SiebelApp.Metadata.GetViewDef(this.GetName())},o.EndLife=function(){s.EndLife.call(this);var e=this.GetBCBrokerList(),t=e.length;for(var n=0;n<t;n++)e[0].EndLife(),e.splice(0,1);this.ResetBCBrokerList()},e.prototype.EnableGenerateNotifyInfo=function(e){var t=this.GetBCBrokerList(),n=t.length;for(var r=0;r<n;r++)t[r].EnableGenerateNotifyInfo(e)},e.prototype.GenerateExtraNotifyInfo=function(){var e={err:!1},t,n=[arguments[0]],r=function(){return n},i=this.GetAppletMap(),s=[],o=0;for(var u in i)i[u]&&(s[o]={execute:i[u].GenerateExtraNotifyInfo,executeScope:i[u],preExecute:r},o++);return $.eachAsyncOp(this,s),t=e,e=t,$.setReturnValue(e),e},e.prototype.GetNotifyPropSet=function(e){var t={err:!1},r;i.CcfLogEvent([n.get("LOG_EVT_CLIENT_SYS"),44,6,22,"View Name",this.GetName()]);var s=CCFMiscUtil_CreatePropSet(),o,u=this.GetBCBrokerList().length;this.GenerateExtraNotifyInfo(arguments[1]),t={err:!1},$.setReturnValue(t);var a=0,f=function(){o=this.GetBCBrokerList()[a],t=o.GetNotifyPropSet(),r=t,t={err:!1},$.setReturnValue(t);if(!r.err){var e=r.retVal,n=e.GetChildCount();if(n)for(var i=0;i<n;i++)s.AddChild(e.GetChild(i))}a++,a<u&&f.call(this)};return u?(f.call(this),r=t,t={err:!1},$.setReturnValue(t),r.err||(s.GetChildCount()&&(s.SetType("Notifications"),e.AddChild(s)),this.ResetNotifyPropSet()),t):t},o.GetBusObj=function(){var e=SiebelApp.S_App.Model.GetIsInterFace();if(e<0||e===0)return s.GetBusObj.call(this);var t=s.GetBusObj.call(this);return t?t.GetInterface():s.GetBusObj.call(this)},o.GetApplet=function(e){var t=SiebelApp.S_App.Model.GetIsInterFace();if(t<0||t===0)return s.GetApplet.call(this,e);var n=s.GetApplet.call(this,e);return n?n.GetInterface():s.GetApplet.call(this,e)},SiebelApp.OfflineUtils.DefineExtentions(e,o,s)}(),SiebelApp.S_App.Applet&&define("siebel/offline/applet",["siebel/offline/model"],function(){(function(){function _(e){if(!e.GetProperty(s)){var t=u.GetDyncPS(w,!1),n=CCFMiscUtil_CreatePropSet();n.SetType(e.GetType()),n.SetValue(e.GetValue()),n.SetProperty(s,!0);var i=[E,S,x,L];l.ProcessDPS(n,e,i,3,!1);var a=[T,N];l.ProcessDPS(n,e,a,2,!0);var f=e.GetChildByType(C);if(f){var c=e.FindChildPosition(C);e.RemoveChild(c)}var h=e.GetChildByType("cl"),p,d,v,m;if(h){var g=h.EnumChildren(!0),y=!1,b=!1;g||(y=!0);do if(g){var k=g.GetType();if(k==="c"){d=g.EnumChildren(!0),m=g.GetProperty(r.get("SWE_PROP_NAME"));if(d){p=d.GetProperty(r.get("SWE_METHOD_STR")),v=d.GetProperty(r.get("SWE_SHOW_POPUP_STR"));if(p==="NewRecord"){b=!0;break}}}}while((g=h.EnumChildren(!1))&&!y);if(b){var A=CCFMiscUtil_CreatePropSet();A.SetType(h.GetType()),A.SetValue(h.GetValue()),A.SetProperty(s,!0);var M=CCFMiscUtil_CreatePropSet();M.SetType(g.GetType()),M.SetValue(g.GetValue()),M.SetProperty(s,!0),M.SetProperty(r.get("SWE_PROP_NAME"),m);var _=CCFMiscUtil_CreatePropSet();_.SetType(d.GetType()),_.SetValue(d.GetValue()),_.SetProperty(s,!0),_.SetProperty(r.get("SWE_METHOD_STR"),p),_.SetProperty(r.get("SWE_SHOW_POPUP_STR"),v),M.AddChild(_),A.AddChild(M),n.AddChild(A)}}t.AddChild(n),u.SetDyncPS([w],[t],1);if(e.PropertyExists(r.get("SWE_PST_APPLET_MODE"))){var D=e.GetProperty(r.get("SWE_PST_APPLET_MODE"));D!==r.get("SWE_PST_APPLET_MODE_BASE")?e.SetPropertyStr(r.get("SWE_PROP_IS_EDIT"),"1"):e.SetPropertyStr(r.get("SWE_PROP_IS_EDIT"),"0")}}var P;O.ProcessObjectInfo.call(this,e);if(e.GetProperty(s)){P=this.GetControls();var H,B=this.GetBusComp(),j;B?j=B.GetActiveRow():j=-1;var F=this.GetName(),I=this.GetView().GetName(),q=window.localStorage.getItem("SRN"),R=SiebelApp.OfflineAppMgr.GetControlRegExpMap();for(var U in P)if(P[U]){var z=P[U];H=z.GetMethodPropSet(),H&&(H.SetPropertyStr(r.get("SWE_PROP_SESSION_RANDOM_NUMBER"),q),H.SetPropertyStr("SWEApplet",F),H.SetPropertyStr(r.get("SWE_ROW_STR"),j),H.SetPropertyStr("SWEView",I));if(z.GetSpanPrefix){var W=z.GetSpanPrefix(),X=z.GetInputName(),V=new RegExp("(("+W+"0)"+"|"+"("+W+"65535)"+")","ig");R[X]=V,V=null}}SiebelApp.OfflineAppMgr.SetControlRegExpMap(R)}else{var $=!1,J,K=CCFMiscUtil_CreatePropSet();P=this.GetDefn().control;for(var Q in P)if(P[Q]){J=P[Q];if(J){var G=J.htmlIconMap;if(G&&!o.IsEmpty(G)){K.SetPropertyStr(N,G),$=!0;var Y=SiebelApp.Metadata.GetMIcons(G),Z=Y.length,et=0,tt;for(var nt=0;nt<Z;nt++){var rt=Y[nt].Bitmap,it="";rt&&(rt=rt.replace(/\./g,"_"),rt=rt.replace(/ /g,"_"),rt=rt.toLowerCase(),it='<span class="siebui-icon-'+rt+'">'),tt=CCFMiscUtil_CreatePropSet();var st=SiebelApp.S_App.GetVirtualDir();st=st.concat("images/"),st=st.concat(Y[nt].FileName),st='<img src="'+st+'" '+"border="+'"'+et+'" '+"space="+'"'+et+'"'+" "+"hspace="+'"'+
et+'" '+">",st=it+st,tt.SetPropertyStr(N,Y[nt].IconName),tt.SetPropertyStr(r.get("SWE_PROP_ICON_IMG"),st),tt.SetType("i"),K.AddChild(tt)}}}}if(o.IsTrue($)){K.SetType("il");var ot=u.GetDyncPS(r.get("SWE_PST_APP_INFO"),!1);ot.AddChild(K)}}}function D(e){var t={err:!1},n,r=[];CCFMiscUtil_StringToArray(e.GetProperty(x),r);var i=r.length;if(i<2)return t;var s=0,u=function(e){if(!e.err){var t=e.retVal;r[s+1]=o.IsTrue(t)?"1":"0"}s<i-2&&(s+=2,f.call(this))},f=function(){var e=a.LookupStringCache(r[s]);t=this.CanInvokeMethodX(e);var n=t;t={err:!1},u.call(this,n)};f.call(this);var l=function(){e.SetProperty(x,CCFMiscUtil_ArrayToString(r)),u=null,r=null,f=null},c=t;return t={err:!1},l.call(this,c),t}function P(e){var t={err:!1},n,r=[];CCFMiscUtil_StringToArray(e.GetProperty(S),r);var i=r.length;if(i<2)return t;var s=0,u=function(e){var t;e.err?t=!1:t=e.retVal,r[s+1]=o.IsTrue(t)?"1":"0",s<i-2&&(s+=2,f.call(this))},f=function(){var e=a.LookupStringCache(r[s]);t=this.CanUpdateX(e);var n=t;t={err:!1},u.call(this,n)};f.call(this);var l=function(){e.SetProperty(S,CCFMiscUtil_ArrayToString(r)),u=null,r=null,f=null},c=t;return t={err:!1},l.call(this,c),t}function H(e){var t={err:!1},n,r="",i=[],s="",u=xt.call(this),a=u.length,f,l,c,h,p;if(a){l=CCFMiscUtil_CreatePropSet(),l.SetType("cn"),e.AddChild(l);var d=this.GetControls(),v=[];for(var m=0;m<a;m++)for(var g in d)if(d.hasOwnProperty(g)&&d[g].GetFieldName()===u[m]){v.push(d[g].GetName());break}var y=v.length;this.SetCanNavigateCtrlArray(v);var b=0;if(y>0){var w=0,E=this.GetBusComp(),S,x=this.GetNotComp(),T=!1;x=0,h=function(){i=[],S=this.GetDrillDown(d[v[w]].GetFieldName(),!0),s+="*",E&&E.CheckActiveRow()?(E.WSHomeX(x,this.GetName()),T=!0):T=!1,b=0,c=function(){t=this.CanNavigateX(S);var e=t;t={err:!1},f.call(this,e)},T&&c.call(this);var e=t;t={err:!1},p.call(this,e)},f=function(e){e.err||(r=o.IsTrue(e.retVal)?"1":"0",s+=r,i.push(r),T=E.WSNextRecordX(x,this.GetName()),T&&b<E.GetWS().length&&(b++,c.call(this)))},p=function(){b>0&&l.SetProperty(v[w],CCFMiscUtil_ArrayToString(i)),w++,w<y&&h.call(this)},h.call(this)}}return t={err:!1},this.SetCanNavigateStateStr(s),f=null,p=null,h=null,c=null,t}function B(){}function j(e){var t=this.GetBusComp(),n=this.GetNotIdComp();if(!t||n===-1)return;var r=t.WSGetBegRow(n,this.GetName());this.SetPrevBegRow(r),e.SetPropertyStr(E,r.toString())}function F(){var e=[],t=this.GetBusComp(),n=0,r=this.GetPrevBegRow();if(!t||n===-1)return;var i=t.WSGetBegRow(n,this.GetName());if(o.IsEmpty(i))return;r!==i&&(this.SetPrevBegRow(i),e.push(this.GetName()),e.push(i.toString()),t.NotifyGeneric("BegRow",e))}function I(){var e={err:!1},t,n=[],r=0,i=this.GetCanInvokeArray();if(o.IsEmpty(i))return e;var s=i.length,u=this.GetBusComp();if(s<=0||!u)return e;var a=!1;n.push(this.GetName());var f,l,c=function(e){e.err||(l=e.retVal,f=this.GetCanInvokeByName()[i[r]].bCanInvoke,o.IsEmpty(l)&&(l=f),l!==f&&(this.GetCanInvokeByName()[i[r]]={bCanInvoke:l},a=!0),n.push(String(r)),n.push(o.IsTrue(l)?"1":"0"),r++,r<s&&h.call(this))},h=function(){var t=i[r];e=this.CanInvokeMethodX(t);var n=e;e={err:!1},c.call(this,n)};h.call(this);var p=function(){a&&u.NotifyGeneric("SWEICanInvokeMethod",n),h=null,c=null},d=e;return e={err:!1},p.call(this,d),e}function q(){var e={err:!1},t,n=[],r=this.GetCanUpdateArray();if(o.IsEmpty(r))return e;var i=r.length,s=this.GetBusComp(),u=0;if(i<=0||!s)return e;var a=!1;n.push(this.GetName());var f=function(e){if(!e.err){var t=e.retVal,s=this.GetCanUpdateByName()[r[u]].bCanUpdate;o.IsTrue(t)!==o.IsTrue(s)&&(this.GetCanUpdateByName()[r[u]]={bCanUpdate:t},a=!0),n.push(String(u)),n.push(o.IsTrue(t)?"1":"0")}u++,u<i&&l.call(this)},l=function(){var t=r[u];e=this.CanUpdateX(t);var n=e;e={err:!1},f.call(this,n)};l.call(this);var c=function(){a&&s.NotifyGeneric("SWEICanUpdate",n),l=null,f=null},h=e;return e={err:!1},c.call(this,h),e}function R(){var e={err:!1},t,n="",r=[],i="",s=0,u=[],a=this.GetCanNavigateCtrlArray();s=a.length;var f=this.GetBusComp();u.push(this.GetName());if(!f||!s)return e;var l=0,c=this.GetNotComp();c=0;var h=!1,p=function(){r=[];var d=this.GetDrillDown(a[l],!0);i+="*",f&&f.CheckActiveRow()?(f.WSHomeX(c,this.GetName()),h=!0):h=!1;var v=0,m=function(){e=this.CanNavigateX(d),t=e,e={err:!1},t.err||(n=o.IsTrue(t.retVal)?"1":"0",i+=n,r.push(n),h=f.WSNextRecordX(c,this.GetName()),h&&v<f.GetWS().length&&(v++,m.call(this)))};h&&m.call(this),e={err:!1},v>0&&(u.push("*"+a[l]),u=u.concat(r)),l++,l<s&&p.call(this)};p.call(this),e={err:!1};var d=this.GetCanNavigateStateStr();return d!==i&&(d=i,this.NotifyGeneric("SWEICanNavigate",u)),e}function U(e,t){var n={err:!1},r;e||(n={err:!0,retVal:!1},$.setReturnValue(n));var s={};s.request=t.GetProperty("Request").toString();if(e==="NewRecord")return n=this.NewRecord(s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="CreateRecord")return n=this.CreateRecord(s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="GotoView"){var o=t.GetChild(0),u=o.GetProperty("SWETargetView");return SiebelApp.OfflineAppMgr.OnActionsGotoView(u),n={err:!1,retVal:!1},n}if(e==="EditRecord")return this.EditRecord(s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="WriteRecord")return n=ht.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="GetQuickPickInfo"){var a,l,h=this,p,d=this.GetActiveControl();d===null&&c.GetActiveRequestObj()&&c.GetActiveRequestObj().activeControl&&(d=c.GetActiveRequestObj().activeControl,this.SetActiveControl(d));if(h instanceof SiebelApp.S_App.ListApplet){a=d.GetInputName();var v=this.GetControlById(a),m;this.GetParentApplet()!==null?m=this.GetControlByName(i.get("STR_POPUP_QUERY_COMBO_BOX")):m=this.GetControlByName(i.get("STR_QUERY_COMBO_BOX")),v===m?dt.call(this,a):(a=d.GetFieldName(),l=d.GetApplet
().GetBusComp(),p=l.GetFieldMap()[a].GetDefn().PickListName,n=pt.call(this,p,a)),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n))}else a=d.GetFieldName(),l=d.GetApplet().GetBusComp(),p=l.GetFieldMap()[a].GetDefn().PickListName,n=pt.call(this,p,a),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n));return n}if(e==="EditField")return ot.call(this,s),$.callback(this,function(e){e.err?(n=e,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n))}),n;if(e==="ShowPopup")return n=this.MakePopup("ShowPopup",s),n={err:!1,retVal:!1},$.setReturnValue(n),n;if(e==="AddRecord")return n=ct.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="UndoRecord")return n=V.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="PickRecord")return n=J.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="PositionOnRow")return K.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="DeleteRecord")return n=Nt.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="PostChanges")return n=mt.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="ScrollNextData")return n=Q.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="ScrollPrevData")return n=G.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="GotoNextSet")return n=Y.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="GotoPreviousSet")return n=rt.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="ExecuteFrameQuery")return n=tt.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="CloseApplet")return this.ClosePopupApplet(),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="Find")return n=nt.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="GotoNext")return n=Z.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e==="GotoPrevious")return n=et.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n;if(e===i.get("SELECT_ALL")){var g=this.GetBusComp();return g&&(n=g.SelectAll()),r=n,f.PostActions(i.get("ACTION_RPC_COMPLETED")),n=r,$.setReturnValue(n),n}return e===i.get("NEWQUERY")?(n=this.NewQuery(s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n):e===i.get("UNDOQUERY")?(n=X.call(this,s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n):e===i.get("EXECUTE_QUERY")?(n=this.NewExecuteQuery(s),r=n,n={err:!1},$.setReturnValue(n),r.err?(n=r,$.setReturnValue(n)):(n={err:!1,retVal:!1},$.setReturnValue(n)),n):e.toLowerCase()===k.toLowerCase()?(bt.call(this,s),n={err:!1,retVal:!1},$.setReturnValue(n),n):(n={err:!1,retVal:!0},$.setReturnValue(n),n)}function z(){var e={err:!1},t;t=e;if(t.err)e=t;else{var n=this.GetBusComp();n.IsInQueryState()||(n.SetSearchSpec(""),n.Execute(),n.Home(),n.BeginQuery()),SiebelApp.RequestProcessor.SetLayoutState(i.get("QUERY_VIEW_INFO"),this.GetName()),this.PostLayoutAction(!1,i.get("NEWQUERY"),i.get("QUERY_VIEW_INFO"))}return e}function W(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionNewExecuteQuery");var r=this.GetBusComp(),s=c.GetActiveRequestObj(),o=s.SweCommands,u=s.SweCommands.SWEBCVals,f,l,h=[],p="",d=[];for(var v in o){var m=this.GetControlById(v);m&&o[v]&&(f=o[v],(f.endsWith("'")||f.endsWith('"'))&&(f.startsWith('"')||f.startsWith("'"))&&f.length>1&&(f=f.substring(1,f.length-1)),h.push(m.GetFieldName()),f=r.DoNewQueryText(m,f),p?p+=" And "+f:p=f)}if(u){var g=CCFMiscUtil_CreatePropSet();g.DecodeFromString(u);var y=g.GetChildByType("FieldValues");if(y){var b=y.GetProperty("ValueArray"),w=y.GetProperty("FieldArray"),E=[],S=[];CCFMiscUtil_StringToArray(b,E),CCFMiscUtil_StringToArray(w,S);var x=S.length;for(var T=0;T<x;T++){var m=this.GetControlById(S[T]);f=E[T];if(m&&h.includes(m.GetFieldName()))continue;if(m&&f){if(p.indexOf(m.GetFieldName())>0)continue;(f.endsWith("'")||f.endsWith('"'))&&(f.startsWith('"')||f.startsWith("'"))&&f.length>1&&(f=f.substring(1,f.length-1)),f=r.DoNewQueryText(m,f)}else f="["+S[T]+"] [~] '"+f+"%'";p?p+=" And "+f:p=f}}}r.SetSearchSpec(p),t=r.Execute();var N=r.GetFieldMap();for(var C in N)N[C].GetSearchSpec()&&N[C].SetSearchSpec("");return n=t,t=r.Home(),n.err||(this.PostLayoutAction(!1,i.get("GOTOVIEWCOLD"),i.get("VIEW_INFO")),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionNewExecuteQuery ")),t}function X(){var e={err:!1},t,n=this.GetBusComp();return n.ClearUpdates(),e=this.ImplicitCommit(),t=e,n&&n.UndoQuery(),e=n.Home(),t.err||this.PostLayoutAction(!1,i.get("GOTOVIEWCOLD"),i.get("VIEW_INFO")),e}function V(){var e={err:!1},t;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionCancelRecord ");var n=this.GetBusComp();n&&n.UndoQuery(),n&&n.IsCommitPending()&&(e=n.UndoRecord()),e={err:!1};var r=i.get("VIEW_INFO"),s=i.get("GOTOVIEWCOLD");return this.PostLayoutAction(!1,s,r),a.GetTimer()&&a.GetTimer
().EndTime("Applet.OnActionCancelRecord "),e}function J(){var e={err:!1},t;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionsPickRecord ");var n,r,i,s;n=this.GetBusComp(),r=this.GetParentApplet(),s=this.GetPickAppletSrcInfo().SrcAppletFld;if(s){i=r.GetBusComp(),n.SetPickSrcField(s),n.SetSrcIdFld(s,i),n.SetMasterBC(i),e=n.PickCurrentRow();if(i&&i.IsInQueryState()){var o=-1;o=i.GetActiveRow();if(o>=0){var u=i.FindWorkSet(o),f=i.FieldValue(s,u);f.err||i.GetFieldMap()[s].SetSearchSpec(f.retVal)}}}return e={err:!1},this.ClosePopupApplet(),a.GetTimer()&&(e={err:!1},a.GetTimer().EndTime("Applet.OnActionsPickRecord ")),e}function K(){f.PostActions(i.get("ACTION_RPC_CONTINUE"),"PositionOnRow")}function Q(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionsScrollNextData ");var r=SiebelApp.S_App.Model.GetScrollScaleFactor();return r=r?Math.ceil(this.GetRowListRowCount()/r):i.get("SCROLL_SCALE_CONSTANT"),t=this.ImplicitCommit(),n=t,t={err:!1},n.err?t=n:(t=st.call(this,r),n=t,t={err:!1},n.err?t=n:(this.GetBusComp()&&this.GetBusComp().WSHomeX(this.GetName()),this.PostLayoutAction(!0,e.methodName),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionsScrollNextData "))),t}function G(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionsScrollPrevData ");var r=SiebelApp.S_App.Model.GetScrollScaleFactor();return r=r?Math.ceil(this.GetRowListRowCount()/r):i.get("SCROLL_SCALE_CONSTANT"),r=-r,t=this.ImplicitCommit(),n=t,t={err:!1},n.err?t=n:(t=st.call(this,r),n=t,t={err:!1},n.err?t=n:(this.GetBusComp()&&this.GetBusComp().WSHomeX(this.GetName()),this.PostLayoutAction(!0,e.methodName),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionsScrollPrevData "))),t}function Y(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionsNextset "),t=this.ImplicitCommit(),n=t,t={err:!1};if(n.err)t=n;else{var r=!0;t=it.call(this,e,r),n=t,t={err:!1};var i=this.GetBusComp();i&&i.WSHomeX(0,this.GetName()),n.err?(t=n,$.setReturnValue(t)):(this.PostLayoutAction(!0,e.methodName),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionsNextset "))}return t}function Z(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionsNextrecord"),t=this.ImplicitCommit(),n=t,t={err:!1};if(n.err)t=n;else{var r=this.GetBusComp();this.GetBusComp()&&!this.GetBusComp().IsInQueryState()&&(t=r.NextRecord(),n=t,t={err:!1},n.err?t=n:(this.PostLayoutAction(!0,e.methodName),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionsNextrecord")))}return t}function et(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionsNextrecord"),t=this.ImplicitCommit(),n=t,t={err:!1};if(n.err)t=n;else{var r=this.GetBusComp();this.GetBusComp()&&!this.GetBusComp().IsInQueryState()&&(t=r.PriorRecord(),n=t,t={err:!1},n.err?t=n:(this.PostLayoutAction(!0,e.methodName),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionsNextrecord")))}return t}function tt(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.ExecuteQuery");var r=this.GetBusComp(),i=r.GetCursor();return i[0]=0,r.SetCursor(i),r.SetSearchSpec(""),r.IsInQueryState()||r.BeginQuery(),t=vt.call(this),n=t,t={err:!1},n.err?t=n:(t=r.Execute(),n=t,t={err:!1},n.err||(n=t,t={err:!1},n.err||(t=r.Home(),n=t,t={err:!1},n.err||(this.PostLayoutAction(!0,e.methodName),a.GetTimer()&&a.GetTimer().EndTime("Applet.ExecuteQuery"))))),t}function nt(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnQueryExecute");var r=this.GetBusComp();r.SetSearchSpec("");var i=this.GetControls(),s,o;this.GetParentApplet()!==null?(s=i.PopupQueryCombobox,o=i.PopupQuerySrchspec):(s=i.QueryComboBox,o=i.QuerySrchSpec);if(s&&o){var u=c.GetActiveRequestObj(),f=o.GetInputName(),l=s.GetInputName(),h=u.SweCommands[f],p=u.SweCommands[l],d,v;for(v in i)if(i[v].GetDisplayName()===p){d=i[v];break}h=r.DoBldQueryText(d,h),r.SetSearchSpec(h),t=r.Execute(),n=t,t={err:!1},n.err||(n=t,t={err:!1},n.err||(t=r.Home(),n=t,t={err:!1},n.err||(this.PostLayoutAction(!0,e.methodName),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnQueryExecute"))))}return t}function rt(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionsPreviousset "),t=this.ImplicitCommit(),n=t,t={err:!1};if(n.err)t=n;else{var r=!1;t=it.call(this,e,r),n=t,t={err:!1};var i=this.GetBusComp();i&&i.WSHomeX(0,this.GetName()),n.err?t=n:(this.PostLayoutAction(!0,e.methodName),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionsPreviousset "))}return t}function it(e,t){var n={err:!1},r;a.GetTimer()&&a.GetTimer().StartTime("Applet.DoNextPriorSet ");var i=this.GetBusComp(),s=i.GetActiveRow(),o=i.FindWorkSet(s);return o?(t?n=i.NextSet(e,this.GetName()):n=i.PriorSet(e,this.GetName()),r=n,n={err:!1},a.GetTimer()&&a.GetTimer().EndTime("Applet.DoNextPriorSet "),n=r,n):(n={err:!0,retVal:""},n)}function st(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.DoScrollData ");var r=this.GetBusComp();if(r){var n=r.GetRowNum();if(n.err==="SSAOMErrActiveRow")return t={err:!1},t;n.err?t=n:(t=r.ScrollWorkSetByNum(0,e,this.GetName()),n=t,t=n,a.GetTimer()&&a.GetTimer().EndTime("Applet.DoScrollData "))}else t={err:!1};return t}function ot(e){l.CcfLogEvent([A,44,4,16,"Name",this.GetDefn().Name]);var t=!1,n=this.GetActiveControl().GetName();this.CanUpdate(n)||(l.CcfLogEvent([A,47,4,24,n]),t=!0),this.ShowFieldDetail(t,e)}function ut(){var e={err:!1},t;return e=this.ImplicitCommit(),t=e,e={err:!1},t.err?e=t:(this.SetSavedModeState(r.get("SWE_PST_APPLET_MODE_NEW")),SiebelApp.RequestProcessor.SetLayoutState(i.get("NEW_VIEW_INFO"),this.GetName()),this.PostLayoutAction(!1,"NewRecord",i.get("NEW_VIEW_INFO"))),e}function at(){var e={err:!1},t;return e=this.ImplicitCommit(),t=e,e={err:!1},t.err?e=t:(this.SetSavedModeState(r.get("SWE_PST_APPLET_MODE_NEW")),SiebelApp.RequestProcessor.SetLayoutState(i.get("CREATE_VIEW_INFO"),this.GetName()),this.PostLayoutAction(!1,"CreateRecord",i.get("CREATE_VIEW_INFO"))),e}function ft(){var e={err:!1},t;return e=this.ImplicitCommit(),t=e,e={err:!1},t.err?e=t:(this.SetSavedModeState
(r.get("SWE_PST_APPLET_MODE_EDIT")),SiebelApp.RequestProcessor.SetLayoutState(i.get("EDIT_VIEW_INFO"),this.GetName()),this.PostLayoutAction(!1,"EditRecord",i.get("EDIT_VIEW_INFO"))),e}function lt(){var e={err:!1},t;return l.CcfLogEvent([A,44,4,17,"Name",this.GetDefn().Name]),a.GetTimer()&&a.GetTimer().StartTime("Applet.PostChangesForPopup "),vt.call(this,!1),e={err:!1},a.GetTimer()&&a.GetTimer().EndTime("Applet.PostChangesForPopup "),e}function ct(){var e={err:!1},t;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionAddRecord "),e=this.ImplicitCommit(),t=e,e={err:!1};if(t.err)e=t;else{var n=this.GetBusComp(),r=n.IsNotifyEnabled();r&&n.DisableNotifySys(),e=n.AssocSelection(),t=e,e={err:!1},t.err?e=t:(r&&n.EnableNotify(),this.ClosePopupApplet(),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionAddRecord "))}return e}function ht(){var e={err:!1},t;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionWriteRecord ");var n=this.GetBusComp();n.IsDeletePending()&&(e=n.WriteRecord()),e=this.CanWriteRecord(),t=e,e={err:!1};var r=t.retVal;if(!r)e={err:!1,retVal:!1};else{n.IsCommitPending()||(e=n.UpdateRecordX()),e=vt.call(this,!0),t=e,e={err:!1};if(!t.err){var s=!1;this.GetParentApplet()?s=!0:this.GetSavedModeState()!==this.GetMode()&&(s=!0);if(this.GetMode().toLowerCase()==="new"){var o=n.GetLinkDef();n.CanAssociate()&&o&&o.interParentColName&&n.AssocParent()}this.PostLayoutAction(s,i.get("GOTOVIEWCOLD"),i.get("VIEW_INFO")),this.SetSavedModeState(),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionWriteRecord ")}else this.ResetCtrls(),e={err:!0,retVal:!1}}return e}function pt(e,t){var n={err:!1},r;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionsGetQuickPickInfo ");var s={},o,u=this.GetBusComp();s.viewName=this.GetView().GetName(),s.appletName=this.GetName(),s.fieldName=this.GetActiveControl().GetInputName();if(u){o=u.GetPickListInfo(e,t),n=this.GetComboBoxOptions(e,t),r=n,n={err:!1};var l=r.retVal,c=[];s.LOV=l,c[0]="",c[1]=s.viewName,c[2]=s.appletName,c[3]=s.fieldName,c[4]="true",c[5]=o.NAME;var h=0;for(var p=6;p<6+l.length;p++)c[p]=l[h],h++;u.NotifyGeneric("GetQuickPickInfo",c),f.PostActions(i.get("ACTION_RPC_COMPLETED"),"GetQuickPickInfo"),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionsGetQuickPickInfo ")}return n}function dt(e){a.GetTimer()&&a.GetTimer().StartTime("Applet.GetQuickInfoForPopup ");var t=this.GetBusComp(),n=this,s,u=!1,l=[],c,h,p,d;n instanceof SiebelApp.S_App.ListApplet?h=this.GetListOfColumns():h=this.GetControls();for(c in h)if(h[c]){s=h[c],e=s.GetFieldName(),u=t.GetFieldDefn(e),p=s.GetUIType(),d=s.GetDisplayName();if(!u)continue;u=t.GetFieldDefn(e).DisableSearch,u=o.IsTrue(u);if(u||p===r.get("SWE_CTRL_CHECKBOX")||p===r.get("SWE_CTRL_DATE_TZ_PICK")||p===r.get("SWE_CTRL_DATE_TIME_PICK")||p===r.get("SWE_CTRL_DATE_PICK")||!d)continue;l.push(d)}var v=[];v[0]="",v[1]=n.GetView().GetName(),v[2]=n.GetName(),v[3]=e,v[4]="true",v[5]="";var m=0;for(var g=6;g<6+l.length;g++)v[g]=l[m],m++;t.NotifyGeneric("GetQuickPickInfo",v),f.PostActions(i.get("ACTION_RPC_COMPLETED"),"GetQuickPickInfo")}function vt(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("SiebelApp.S_App.Applet.PostChangesToBC");var i={},s,o=CCFMiscUtil_CreatePropSet();o.SetProperty("inputParam1",e);var f={};f[h]=this.GetName(),f[p]=y,f[d]="PostChangesToBC",f[b]=this,f[v]=m,t=u.InvokeRegisteredSvc(f,o),n=t,t={err:!1},i=n.retVal,s=n.err;if(i.Outputargs&&i.Outputargs.GetProperty("Invoked")&&i.Outputargs.GetProperty("Invoked").toString()==="true")return l.CcfLogEvent([A,45,4,23,f.ObjectName,f.ObjectType,f.ObjectMethod,f.ExtType]),t={err:n.err,retVal:i.Outputargs},t;var w,E=this.GetBusComp(),S=null,x=c.GetActiveRequestObj();x||(x=c.GetActiveRequestObj()),x||(x=c.GetActiveRequestObj());if(!x)return t={err:!0},t;if(E&&!E.IsInQueryState()){var T=-1;T=E.GetActiveRow();if(T===-1&&e&&E.IsDeletePending())return t=E.WriteRecord(),n=t,t={err:!1},$.setReturnvalue(n),t}var N=x.SweCommands[r.get("SWE_POST_ON_CHANGE_STR")];w=x.SweCommands.SWEBCVals;if(w!==undefined&&w!==null){var C=CCFMiscUtil_CreatePropSet();C.DecodeFromString(w);var k=SiebelApp.S_App.GetActiveView().GetBCBroker(E);E.IsInQueryState()||(t=k.InvokeMethod("SetFieldValue",C))}t={err:!1};var L=x.SweCommands,O=[];for(var M in L){var _=this.GetControlById(M);_&&O.push(M)}var D=O.length,P=0,H,B=function(){if(O[P]&&N===this.GetControlById(O[P]).GetFieldName())S=O[P];else if(O[P]){H=L[O[P]],t=gt.call(this,this.GetControlById(O[P]),H),n=t,t={err:!1};if(n.err){t=n;return}P++,P<D&&B.call(this)}};return B.call(this),n=t,function(n){t={err:!1};if(n.err)return t=n,t;S!==null&&(H=L[S],t=gt.call(this,this.GetControlById(S),H)),n=t,function(n){t={err:!1};if(n.err)return t=n,t;E&&!E.IsInQueryState()&&e&&E.IsCommitPending()&&(t=E.WriteRecord()),n=t,t={err:!1},n.err?t=n:(f[v]=g,t=u.InvokeRegisteredSvc(f,o),n=t,function(e){t={err:!1},a.GetTimer()&&a.GetTimer().EndTime("SiebelApp.S_App.Applet.prototype.PostChangesToBC"),i=e.retVal;if(i&&i.Outputargs)return t={err:e.err,retVal:i.Outputargs},t}.call(this,n))}.call(this,n)}.call(this,n),t}function mt(){var e={err:!1},t;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionPostChanges ");var n=c.GetActiveRequestObj(),s=n.SweCommands[r.get("SWE_POST_ON_CHANGE_STR")],o=n.SweCommands[r.get("SWE_POST_FORCE_STR")],u=this.GetBusComp();if((s||o==="Y")&&u)u.IsCommitPending()||(e=u.UpdateRecordX()),e=vt.call(this,!1),t=e,function(t){e={err:!1};if(t.err)return this.ResetCtrls(),e=t,e;f.PostActions(i.get("ACTION_RPC_COMPLETED"),"OnActionPostChanges"),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionPostChanges ")}.call(this,t);else{if(u&&!u.IsCommitPending()&&!u.IsInQueryState())return SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("IDS_SWE_NO_COMMIT_PENDING","","","","",4,71),e={err:"IDS_SWE_NO_COMMIT_PENDING"},e;e=vt.call(this,!1),t=e,e={err:!1};if(t.err)return this.ResetCtrls(),e=t,e;f.PostActions(i.get("ACTION_RPC_COMPLETED"),"OnActionPostChanges"),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionPostChanges ")}return e}function gt(e,t){
var n={err:!1},r,i=this.GetBusComp();if(e){n=this.CanUpdateX(e.GetName()),r=n,n={err:!1};if(r.retVal)if(i&&i.IsInQueryState()){t=i.DoBldQueryText(e,t);if(t===!1)return n={err:!0},n;i.SetSearchSpec(t)}else{if(i&&!i.IsExecuted())return n={err:!1,retVal:!0},n;var s;n=yt.call(this,e,t,!1),r=n,n={err:!1},r.err||(s=r.retVal,o.IsEmpty(s)||(t=s)),i&&!o.IsEmpty(e.GetFieldName())?(n=this.SetFieldValue(e,t),r=n,function(e){n={err:!1};if(e.err)return n=e,n;n={err:!1,retVal:!0}}.call(this,r)):n={err:!1,retVal:!0}}}return n}function yt(e,t,n){var r={err:!1},i,s,u=this.GetBusComp(),a=null;u&&(a=u.GetField(e.GetFieldName()));if(o.IsEmpty(a))return r={err:!1,retVal:t},r;var f=a.GetDataType(),l=e.GetDisplayFormat(),c=SiebelApp.S_App.LocaleObject.GetDatum(f);if(c&&!o.IsEmpty(t)){switch(f){case"number":var h=a.GetScale();SiebelApp.S_App.LocaleObject.SetScale(h);break;case"currency":r=St.call(this,e,c,n,f)}i=r,r={err:!1},i.err?r={err:!0,retVal:t}:(SiebelApp.S_App.LocaleObject.FormattedToString(f,t,l),c.SetAsFormattedString(t,l),s=SiebelApp.S_App.LocaleObject.HasErrorMsg(),t=c.GetAsString(t),r={err:!1,retVal:t})}else r={err:!1,retVal:t};return r}function bt(){var e=c.GetActiveRequestObj(),t=e.SweCommands.SWEField;if(o.IsEmpty(t))return;var n=this.GetControls(),r,i,s,u,a;i=t.lastIndexOf("_"),s=t.substring(0,i);for(var f in n)if(n.hasOwnProperty(f)){u=n[f].GetInputName(),i=u.lastIndexOf("_"),a=u.substring(0,i);if(s===a){r=n[f].GetFieldName();break}}if(o.IsEmpty(r))return;var l=this.GetDrillDown(r,!0);if(o.IsEmpty(l))return;return wt.call(this,l)}function wt(e){var t;if(o.IsEmpty(e))return;t=e.Dynamicdrilldown.length;if(t)return;return Et.call(this,e),!0}function Et(e){var t=e.viewname,n=o.IsEmpty(e.srcFieldName),r=n?"BS_DRILLDOWN":"BS_DRILLDOWNBYFIELD";return SiebelApp.OfflineAppMgr.BuildViewAsync(t,r,e),!0}function St(e,t,n,r){var i={err:!1},s,u,f=this.GetNotIdComp();t.SetAsString(null);var s,l=this.GetBusComp();if(o.IsEmpty(l))return i=s,i;var c=e.GetFieldName();if(o.IsEmpty(c))return i=s,i;n?i=u=l.WSFieldValue(f,c,this.GetName()):i=l.FieldValue(c),s=i,i={err:!1};if(!s.err){u=s.retVal,t.SetAsString(u);if(r==="currency"){var h=a.LookupStringCache(e.GetCurrField()),p=h.indexOf("|"),d,v;if(p>=0){var m=h.substring(p+1).indexOf("|")===-1?-1:h.substring(p+1).indexOf("|")+p;m<0&&(m=h.length);var g=h.substr(0,p);g.length!==0&&(n?i=d=l.WSFieldValue(f,g,this.GetName()):i=l.FieldValue(g),s=i,i={err:!1},s.err?i=s:(d=s.retVal,d?t.SetCurrency(d):t.SetCurrency(""),g=h.substr(p+1,m-p),g.length!==0&&(n?i=v=l.WSFieldValue(f,g,this.GetName()):i=l.FieldValue(g),s=i,i={err:!1},s.err?i=s:(v=s.retVal,o.IsEmpty(v)&&t.SetExchangeDate(v)))))}}}else i=s;return i}function xt(){var e=this.GetDefn().ddCtrlsArray;return o.IsEmpty(e)?[]:e}function Tt(e){var t={err:!1},n,r=this.GetBusComp();if(!r)return t;var i=r.GetActiveRow(),s;if(i>=0){var o,u=!1,a=0;r.SetPrevActiveRow(i);var f=this.GetNotIdComp();f=0;var n=r.WSGetCurrRow(f,this.GetName());if(!n.err){var l=n.retVal;r.WSHomeX(f,this.GetName()),s=this.GetRowSelectArr();var c=this.GetRowSelectArr().length===0?!0:!1,h=!0,p=function(){t=r.IsCurWSRecSelected(f,this.GetName()),n=t,t={err:!1},o=n.retVal,a<s.length?o!==s[a]&&(s[a]=o,u=!0):(s.push(o),u=!0),a++;var e=this.WSNextRecordX(f);!e.err&&e.retVal?p.call(this):i===0&&c&&s[0]===!0&&(u=!1)};h&&p.call(this),t={err:!1},r.WSSetCurrRow(0,l,this.GetName());if(window.localStorage.getItem("contextArray")){var d=JSON.parse(window.localStorage.getItem("contextArray")),v=d.length;for(var m=0;m<v;m++){var g=d[m].bc;if(r.GetName()===g&&r.GetWS()[i]){d[m].Id=r.GetWS()[i].Id,d[m].cursor=r.GetCursor()[0]-r.GetWS().length+1+r.GetActiveRow(),window.localStorage.setItem("contextArray",JSON.stringify(d));break}}}if(u){var y=[];y.push(this.GetName());for(var b=0;b<s.length;b++)y.push(s[b]?"1":"0");r.NotifyGeneric("SWEIRowSelection",y)}this.SetRowSelectArr(s),t={err:!1,retVal:!0}}}else t={err:!1,retVal:!0};return t}function Nt(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.OnActionsDeleteItem ");var r=this.GetBusComp();return t=r.CanDelete(),n=t,t={err:!1},!r||!n.retVal?(SiebelJS.Log("OnActionsDeleteItem: Failed to Delete Item .... "),t={err:n.err,retVal:!1},t):(r.SetDeleteRecordPending(!0),r.DeleteRecordX(e,!0),t={err:!1},this.PostLayoutAction(!0,e.methodName),a.GetTimer()&&a.GetTimer().EndTime("Applet.OnActionsDeleteItem "),t={err:n.err,retVal:!0},t)}var e=SiebelApp.S_App.Applet,t=SiebelApp.S_App.Applet,n=SiebelApp.S_App.Applet.prototype,r=SiebelApp.Constants,i=SiebelApp.Offlineconstants,s=i.get("IS_DYNAMIC"),o=SiebelJS.Dependency("SiebelApp.Utils"),u=SiebelApp.S_App.Model,a=SiebelApp.S_App,f=SiebelApp.OfflineAppMgr,l=SiebelApp.OfflineUtils,c=SiebelApp.AjaxRequestMgr,h=i.get("DOUIREG_OBJ_NAME"),p=i.get("DOUIREG_OBJ_TYPE"),d=i.get("DOUIREG_OBJ_MTHD"),v=i.get("DOUIREG_EXT_TYPE"),m=i.get("DOUIREG_EXT_TYPEPRE"),g=i.get("DOUIREG_EXT_TYPEPOST"),y=i.get("DOUIREG_OBJ_TYPEAPPLET"),b=i.get("DOUIREG_EXT_CONTEXT"),w=r.get("SWE_PST_VIEW_INFO"),E=r.get("SWE_PROP_BEGIN_ROW"),S=r.get("SWE_PROP_CAN_UPDATE"),x=r.get("SWE_PROP_CAN_INVOKE"),T=r.get("SWE_PST_BUSCOMP_INFO"),N=r.get("SWE_PROP_NAME"),C=r.get("SWE_PST_CAN_NAV_STATE"),k=r.get("SWE_CMD_DRILLDOWN_STR"),L=r.get("SWE_PROP_ROW_SELECTION"),A=i.get("LOG_EVT_CLIENT_SYS");SiebelApp.S_App.Applet=function(){t.call(this);var e=-1,n=null,r=!1,s=!1,o=!1,a=!1,f=0,l=[],c=!0,d="",v=null,m=[],g=!1,b,w,E;this.BackUpCtrls=function(e,t){w=e,E=t},this.ResetCtrls=function(){this.SetPrsrvControl(E),this.SetActiveControl(w)},this.GetInterface=function(){return v||(v=new SiebelApp.S_App.OfflineAppletInterface(this)),v},this.SetInPlaceEdit=function(e){g=e},this.GetInPlaceEdit=function(){return g},this.GetSavedModeState=function(){return b},this.SetSavedModeState=function(e){b=e},this.ResetInterface=function(){v&&v.EndLife(),v=null},this.GetCanNavigateStateStr=function(){return d},this.SetCanNavigateStateStr=function(e){d=e},this.GetCanNavigateCtrlArray=function(){return m},this.SetCanNavigateCtrlArray=function(e){m=e},this.GetNotComp=
function(){return n},this.SetNotComp=function(e){n=e},this.GetNotIdComp=function(){return e},this.SetNotIdComp=function(){e=-1},this.SetNoUpdate=function(e){r=e},this.SetNoDelete=function(e){o=e},this.SetNoInsert=function(e){s=e},this.SetNoMerge=function(e){a=e},this.GetNoUpdate=function(){return r},this.GetNoDelete=function(){return o},this.GetNoInsert=function(){return s},this.GetNoMerge=function(){return a},this.SetPrevBegRow=function(e){f=e},this.GetPrevBegRow=function(){return f},this.SetRowSelectArr=function(e){l=e},this.GetRowSelectArr=function(){return l},this.GetMultiSelect=function(){return c},this.SetMultiSelect=function(e){c=e};var S=!1;this.SetErrStatus=function(e){S=e},this.GetErrStatus=function(){return S};var x=this._EndLife;this._EndLife=function(){m=null,d=null,l=null,b=null,n=null;var e={};e[h]=this.GetName(),e[p]=y,e[i.get("DOUIREG_SRV_SCRIPT")]=!0,u.DeRegisterEvent(e),x.call(this),x=null}},SiebelApp.S_App.Applet.prototype=n,SiebelApp.S_App.Applet.prototype.constructor=SiebelApp.S_App.Applet;var O={};O.ProcessObjectInfo=e.prototype.ProcessObjectInfo,O.ProcessPickInfo=e.prototype.ProcessPickInfo,O.EndLife=e.prototype.EndLife,O.InvokeMethod=e.prototype.InvokeMethod,O.ProcessFormattedValue=e.prototype.ProcessFormattedValue,O.ProcessControlInfo=e.prototype.ProcessControlInfo;var M={};M.ProcessObjectInfo=function(e){var t=SiebelApp.OfflineAppMgr.GetStatus();if(t!==i.get("NEWLAYOUT")&&t!==i.get("NEWPOPUP")||!!e.GetProperty(s))_.call(this,e);else{if(t===i.get("NEWPOPUP")){var n=e.GetProperty(T);if(n===this.GetView().GetActiveApplet().GetBCId()){var r=SiebelApp.S_App.ActiveBusObject().MaxBCIndex();e.SetProperty(T,"S_BC"+r)}}this.DeclareFrame(e);if(typeof this.GetPickAppletSrcInfo!="undefined"){var o=this.GetBusComp();if(o){var a=this.GetPickAppletSrcInfo().SrcAppletFld,f=this.GetParentApplet().GetBusComp();o.SetSrcIdFld(a,f),o.SetPickAppletSrcInfo(this.GetPickAppletSrcInfo()),o.SetBusCompType(i.get("BCTYPE_PICKLIST")),a&&(o.SetPickSrcField(a),o.SetMasterBC(f))}}this.InitializeFrame(),this.SetInPlaceState()}var l={},c;l[h]=this.GetName(),l[p]=y,l[b]=this,l[v]=g,l[d]="loadevent",c=CCFMiscUtil_CreatePropSet();var m=u.InvokeRegisteredSvc(l,c,!0);return l[d]=SiebelApp.OfflineEvents[y].WebApplet_Load,c=CCFMiscUtil_CreatePropSet(),m=u.InvokeRegisteredSvc(l,c,!0),m},M.ProcessFormattedValue=function(e,t,n,i,s,o){var u={err:!1},a,f=this.SetFormattedValue(e,t);if(f===undefined){this.OnActionsSetFormattedValue(e,n,i,s,o,!0);var l=this.GetPrsrvControl(),c=this.GetActiveControl();return this.BackUpCtrls(c,l),u={err:!1},this.GetErrStatus()&&(o||(this.SetPrsrvControl(l),this.SetActiveControl(c)),this.OnActionsSetFormattedValue(e,n,i,s,o,!1),this.SetErrStatus(!1)),e&&e.GetUIType()===r.get("SWE_CTRL_PICK")?!1:!0}return this.OnActionsSetFormattedValue(e,n,i,s,o,f)},M.InvokeMethod=function(e,t,n){var r=O.InvokeMethod.call(this,e,t,n);if(e==="OnEnterKey")if(r===undefined||r===null)return!0;return r},M.ProcessPickInfo=function(e){var t=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetVarName();return e.SetValue(t),O.ProcessPickInfo.call(this,e)},M.ProcessControlInfo=function(e,t){if(e.GetProperty(s)){var n=this.GetControls(),i=SiebelApp.S_App.LookupStringCache(e.GetProperty(r.get("SWE_PROP_NAME"))),o=n[i];o!==undefined&&o.ProcessObjectInfo(e)}else O.ProcessControlInfo.call(this,e,t)},e.prototype.DeclareFrame=function(e){var t={err:!1},n,r={},i={};i[h]=e.GetProperty(N),i[p]=y,i[d]="DeclareFrame",i[b]=this;var o=CCFMiscUtil_CreatePropSet();o.AddChild(e),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("Applet.DeclareFrame"),i[v]=m;var n=u.InvokeRegisteredSvc(i,o,!0);r=n.retVal;if(r.Outputargs&&r.Outputargs.GetProperty("Invoked")&&r.Outputargs.GetProperty("Invoked").toString()==="true")return t={err:n.err,retVal:r.Outputargs},t;r.Outputargs&&o&&(r.Outputargs.SetType(m),o.AddChild(r.Outputargs)),_.call(this,e);if(!e.GetProperty(s)){var a=this.GetBusComp(),f=this.GetView();a!==null&&f!==null&&f.AddBCBroker(a,this.GetName())}return this.GetDefn()||l.CcfLogEvent([A,53,4,28,this.GetName(),this.GetDefn()]),this.SetNoUpdate(this.GetDefn().NoUpdate),this.SetNoInsert(this.GetDefn().NoInsert),this.SetNoDelete(this.GetDefn().NoDelete),this.SetNoMerge(this.GetDefn().NoMerge),i[v]=g,n=u.InvokeRegisteredSvc(i,o,!0),r=n.retVal,r&&r.Outputargs&&(t={err:n.err,retVal:r.Outputargs},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.DeclareFrame")),t},M.EndLife=function(){var e=this.GetNotIdComp();e!==-1&&(this.GetBusComp().UnRegNotifyObj(),this.SetNotIdComp(-1),this.SetNotComp(null)),this.ResetInterface(),O.EndLife.call(this,!0)},e.prototype.InitializeFrame=function(e){var t={err:!1},n,r={},i=CCFMiscUtil_CreatePropSet();i.AddChild(e),r[h]=this.GetName(),r[p]=y,r[d]="InitializeFrame",r[b]=this,r[v]=m;var n=u.InvokeRegisteredSvc(r,i,!0),s=n.retVal;if(s.Outputargs&&s.Outputargs.GetProperty("Invoked")&&s.Outputargs.GetProperty("Invoked").toString()==="true")return t={err:n.err,retVal:s.Outputargs},t;s.Outputargs&&i&&(s.Outputargs.SetType(m),i.AddChild(s.Outputargs));if(this.GetDefn().searchSpec){var o=this.GetBusComp();o&&this.GetName()&&(o.SetAppletSearchSpec(this.GetDefn().searchSpec),l.CcfLogEvent([A,31,4,10,o.GetName(),"AppletSearchSpec: ",this.GetDefn().searchSpec]))}return r[v]=g,n=u.InvokeRegisteredSvc(r,i,!0),s=n.retVal,s&&s.Outputargs?(t={err:n.err,retVal:s.Outputargs},t):t},e.prototype.SetInPlaceState=function(){var e=this.GetMode();e===r.get("SWE_PST_APPLET_MODE_EDIT")&&this.SetInPlaceEdit(!0)},e.prototype.ActivateFields=function(e){var t={err:!1},n;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("Applet.ActivateFields");var r={},i={},s=CCFMiscUtil_CreatePropSet();r[h]=this.GetName(),r[p]=y,r[d]="ActivateFields",r[b]=this,s.AddChild(e),r[v]=m,t=u.InvokeRegisteredSvc(r,s),n=t,t={err:!1},i=n.retVal;if(i.Outputargs&&i.Outputargs.GetProperty("Invoked")&&i.Outputargs.GetProperty("Invoked").toString()==="true")return t={err:n.err,retVal:i.Outputargs},t;i.Outputargs&&
(i.Outputargs.SetType(m),s.AddChild(i.Outputargs));var a=this.GetBusComp();if(!a)return t;var f=a.GetChildBCArray(),l=[],c,w=a.GetFieldMap(),E=f.length;for(var S=0;S<E;S++)c=f[S].GetLinkDef(),c&&(w[c.srcFieldName]||l.push(c.srcFieldName),o.IsEmpty(c.primeIdFieldName)||a.ActivateFieldList([c.primeIdFieldName]));l.length>0&&a.ActivateFieldList(l);var x=this.EnumUserProps(),T=[],N=-1,C=[],k;x&&(N=x.length);for(var L=0;L<N;L++)a.ActivateFieldList(T);C&&(k=C.length,k>0&&a.ActivateFieldList(C));var A=this.GetParentApplet();if(A&&A.GetDefn().AsocAplt&&A.GetDefn().AsocAplt===this.GetName()){var O=A.GetBusComp().GetActivatedFieldList();O&&O.length>0&&a.ActivateFieldList(O)}else if(A&&A.GetActiveControl()){var M=A.GetActiveControl().GetFieldName(),_,D=[],P,H=A.GetBusComp().GetFieldDefn(M);if(H&&H.PickListName&&H.pickMap){var B=H.pickMap.length,j;for(var F=0;F<B;F++)_=H.pickMap[F],D.push(_.PFldName);B>0&&this.GetBusComp().ActivateFieldList(D);for(var I=0;I<B;I++){_=H.pickMap[I];if(!_.IsConstrained)continue;t=A.GetBusComp().FieldValue(_.FldName),n=t,function(e){t={err:!1};if(e.err)return t=e,t;j=e.retVal,P="[",P+=_.PFldName,P+="] = ",P+='"'+j+'"',this.GetBusComp().SetSearchSpec(P),this.GetBusComp().SetExecuted(!1),t={err:!1,retVal:!0}}.call(this,n)}}}return a.ActivateFields(),r[v]=g,t=u.InvokeRegisteredSvc(r,s),n=t,function(e){t={err:!1},i=e.retVal;if(i&&i.Outputargs)return t={err:e.err,retVal:i.Outputargs},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.ActivateFields"),t}.call(this,n),t},e.prototype.Populate=function(){var e={err:!1},t;l.CcfLogEvent([A,44,4,14,"Name",this.GetDefn().Name]),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("Applet.Populate");var n={},r={},i=CCFMiscUtil_CreatePropSet();i.AddChild(r.Outputargs),n[h]=this.GetName(),n[p]=y,n[d]="Populate",n[b]=this,n[v]=m,e=u.InvokeRegisteredSvc(n,i),t=e,e={err:!1},r=t.retVal;if(r.Outputargs&&r.Outputargs.GetProperty("Invoked")&&r.Outputargs.GetProperty("Invoked").toString()==="true")return e={err:t.err,retVal:r.Outputargs},e;r.Outputargs&&(r.Outputargs.SetType(m),i.AddChild(r.Outputargs));var s=this.GetBusComp();if(!s)return e={err:!1},$.setReturnValue(e),e;var a=s.GetExtObjProp("isNewRecord"),f=s.GetExtObjProp("IsEditRecord"),c=s.IsExecuted(),w="",E=s.GetExtObjProp("reExecute");return a&&c&&(e=s.NewRecordX(!0,!1,null)),f&&c&&(e=s.UpdateRecordX(!0)),function(){e={err:!1},E=E?E:!1;var a=s.GetParentBusComp();if(!a){var f=s.GetChildBCArray(),l=f.length,h;for(var p=0;p<l;p++)h=f[p].GetLinkDef().srcFieldName,s.GetFieldMap()[h]||(s.ActivateField(h),E=!0)}s.SetExtObjProp("reExecute",E);if(c&&!E)return e;E&&c&&(e=w=s.GetIdValueX()),e=s.Execute(),t=e,e={err:!1},t.err?e=t:(E&&!o.IsEmpty(w)?e=s.PositionById(w):e=s.Home(),t=e,e={err:!1},t.err||(n[v]=g,e=u.InvokeRegisteredSvc(n,i),t=e,function(t){e={err:!1},r=t.retVal;if(r&&r.Outputargs)return e={err:t.err,retVal:r.Outputargs},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.Populate"),e}.call(this,t)))}.call(this),e},e.prototype.InterpolatePS=function(e){var t={err:!1},n,r=[D,P,H,B,j],i=0,s=r.length;e.SetPropertyStr(L);var o=function(){i++,i<s?u.call(this):(r=null,u=null,t=Tt.call(this,!0))},u=function(){r[i].call(this,e);var n=t;t={err:!1},o.call(this,n)};return u.call(this),t},e.prototype.GenerateExtraNotifyInfo=function(){var e={err:!1},t;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("Applet.GenerateExtraNotifyInfo");var n=arguments[0],s=SiebelApp.OfflineAppMgr.GetStatus(),u=o.DecodeFromQueryString(n),a=u.GetProperty(r.get("SWEJI"));if(!o.IsEmpty(a)||s===i.get("REFRESHLAYOUT")||s===i.get("NEWLAYOUT")||s===i.get("NEWPOPUP"))return e;I.call(this),q.call(this),R.call(this),Tt.call(this),e={err:!1},F.call(this);var f=this.GetPopupApplet();return f&&(e=f.GenerateExtraNotifyInfo(n)),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.GenerateExtraNotifyInfo"),e},e.prototype.CanNavigateX=function(e){var t={err:!1},n;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("Applet.CanNavigateX");var r={},i={},s=CCFMiscUtil_CreatePropSet();r[h]=this.GetName(),r[p]=y,r[d]="CanNavigateX",r[b]=this,s.SetPropertyStr("ddObj",e),r[v]=m,t=u.InvokeRegisteredSvc(r,s),n=t,t={err:!1},i=n.retVal;if(i.Outputargs&&i.Outputargs.GetProperty("Invoked")&&i.Outputargs.GetProperty("Invoked").toString()==="true")return t={err:n.err,retVal:i.Outputargs},t;i.Outputargs&&(i.Outputargs.SetType(m),s.AddChild(i.Outputargs));var o=0,a;if(!e)a=!1;else{var f=this.GetBusComp();f&&(o=f.GetActiveRow()),o>=0?a=!0:a=!1}return r[v]=g,t=u.InvokeRegisteredSvc(r,s),n=t,t={err:!1},$.setReturnValue(t),i=n.retVal,i&&i.Outputargs&&(SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanNavigateX"),a=i.Outputargs),t={err:n.err,retVal:a},t},e.prototype.PositionBaseAncestorFrame=function(){},e.prototype.GoBackToRecord=function(e){var t={err:!1},n;l.CcfLogEvent([A,44,4,15,"Name",this.GetDefn().Name]),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("Applet.GoBackToRecord");var i,s,o,u=this.GetBusComp(),a=l.JsonRecordSet(e),f=a.SweCommands.SWERowId;return u&&(s=u.GetExtObjProp("m_wsActiveRow"),o=u.FindWorkSet(s),o&&(t=u.FieldValue(r.get("SWE_ROW_ID_FIELD"),o),n=t,t={err:!1},n.err?t=n:(i=n.retVal,this.CheckActiveRowId(i,f)||(t=u.PositionById(f))),SiebelApp.S_App.GetTimer()&&(t={err:!1},SiebelApp.S_App.GetTimer().EndTime("Applet.GoBackToRecord")))),t},e.prototype.CanPostChangesToBC=function(e){var t={err:!1},n;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("Applet.CanPostChangesToBC");var r,i=CCFMiscUtil_CreatePropSet();i.SetProperty("inputParam1",e);var s={};s[h]=this.GetName(),s[p]=y,s[d]="CanPostChangesToBC",s[b]=this,s[v]=m,t=u.InvokeRegisteredSvc(s,i),n=t,t={err:!1};var o=n.retVal;if(o.Outputargs&&o.Outputargs.GetProperty("Invoked")&&o.Outputargs.GetProperty("Invoked").toString()==="true")return t={err:n.err,retVal:o.Outputargs},t;o.Outputargs&&i&&(o.Outputargs.SetType(m),i.AddChild(o.Outputargs
));if(e===null||e===undefined)return!1;e==="EditField"||e==="EditMail"||e==="ExecuteQuery"||e==="ExecuteNewQuery"||e==="PostChanges"||e==="WriteRecord"||e==="SaveEditRecord"||e==="PositionOnRow"||e==="UndoQuery"||e==="ShowPopup"||e==="ViewField"||e==="GetSMCUpdate"||e==="ExecuteFrameQuery"?r=!1:r=!0,s[v]=g,i.SetProperty("RetVal",r),t=u.InvokeRegisteredSvc(s,i),n=t,t={err:!1},$.setReturnValue(t);var a=n.err,f=n.retVal;return f.Outputargs&&(r=f.Outputargs),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanPostChangesToBC"),t={err:a,retVal:r},t},e.prototype.CanInvokeMethodX=function(e){var t={err:!1},n;if(!e)return t={err:!0,retVal:!1},t;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("Applet.CanInvokeMethodX");var r,s={},a;s[h]=this.GetName(),s[p]=y,s[d]="DoCanInvokeMethod",s[b]=this;var f=CCFMiscUtil_CreatePropSet();f.SetPropertyStr("MethodName",e),s[v]=m,t=u.InvokeRegisteredSvc(s,f),n=t,t={err:!1},r=n.retVal,a=n.err;if(r.Outputargs&&r.Outputargs.GetProperty("Invoked")&&r.Outputargs.GetProperty("Invoked").toString()==="true"){var l=r.Outputargs.GetProperty("RetVal").toString();return t={err:a,retVal:l},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t}r.Outputargs&&f&&(r.Outputargs.SetType(m),f.AddChild(r.Outputargs));var c=this.GetUserProperty("CanInvokeMethod: "+e);c=o.IsEmpty(c)?this.GetUserProperty("CanInvokeMethod:"+e):c;if(!o.IsEmpty(c)){if(c==="TRUE")return t={err:!1,retVal:!0},$.setReturnValue(t),t;if(c==="FALSE")return t={err:!1,retVal:!1},$.setReturnValue(t),t;var g=SiebelApp.Query.Parse(c),w=SiebelApp.Query.Evaluate(g,this.GetBusComp());return t={err:!1,retVal:w},t}var E=!1;switch(e){case i.get("NEWRECORD"):case i.get("COPYRECORD"):case i.get("CREATERECORD"):return t={err:!1,retVal:this.CanNewAndBOL(!0,!1)},t;case i.get("WRITERECORD"):case"ExplicitWriteRecord":t=this.CanWriteRecord(),E=!0;break;case i.get("SHOW_POPUP"):return t={err:!1,retVal:!0},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("UNDORECORD"):return t={err:!1,retVal:!0},$.setReturnValue(t),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("EXECUTEFRMQUERY"):case i.get("EXECUTE_QUERY"):return t=n=this.CanExecuteQuery(),t=n,SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("EDITRECORD"):if(!!this.GetInPlaceEdit())return t={err:!1,retVal:!1},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;t=this.CanUpdateX(),E=!0;break;case i.get("EXECUTESORT"):this.CanSort();break;case i.get("DELETERECORD"):t=this.CanDeleteRecord(),E=!0;break;case i.get("DELETERECORDS"):t=this.CanDeleteRecords(),E=!0;break;case i.get("DRILLDOWN"):case"DrillDown":return t={err:!1,retVal:!0},$.setReturnValue(t),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("EDIT_FIELD"):return t={err:!1,retVal:!0},$.setReturnValue(t),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("GO_TO_NEXT_SET"):return n=this.CanGotoNextSet(),t=n,$.setReturnValue(t),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("GO_TO_PRV_SET"):return n=this.CanGotoPreviousSet(),t=n,$.setReturnValue(t),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("SCROLL_NEXT_DATA"):return n=this.CanScrollNext(),t=n,$.setReturnValue(t),t;case i.get("SCROLL_PREV_DATA"):return n=this.CanScrollPrevious(),t=n,$.setReturnValue(t),t;case i.get("GOTOVIEW"):return t={err:!1,retVal:!0},$.setReturnValue(t),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("PICKRECORD"):t=this.CanPickRecord(),E=!0;break;case i.get("POSITION_ON_ROW"):var S=this.GetBusComp();if(!S)return t={err:!1,retVal:!1},t;return S.CheckActiveRow()?t={err:!1,retVal:!0}:t={err:!1,retVal:!1},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("SWE_POST_CHANGES"):return t={err:!1,retVal:!0},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case"ResetRecord":return t={err:!1,retVal:!0},$.setReturnValue(t),t;case"GetQuickPickInfo":return t={err:!1,retVal:!0},$.setReturnValue(t),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case"Refresh":return t={err:!1,retVal:!0},$.setReturnValue(t),t;case i.get("GO_TO_FST_SET"):return n=this.CanGotoFirstSet(),t=n,$.setReturnValue(t),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("GO_TO_LAST_SET"):return n=this.CanGotoLastSet(),t=n,$.setReturnValue(t),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("GO_TO_NEXT_REC"):this.CanGotoNextRecord(),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX");break;case i.get("GO_TO_PREVIOUS_REC"):return n=this.CanGotoPreviousRecord(),t=n,$.setReturnValue(t),SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX"),t;case i.get("ADDRECORD"):n=this.CanAddRecord(),t=n,$.setReturnValue(t);break;case i.get("SWE_CLOSE_APPLET"):n={err:!1,retVal:!0},t=n,$.setReturnValue(t);break;case i.get("GO_TO_NEXT"):n=this.CanGotoNextRecord(),t=n,$.setReturnValue(t);break;case i.get("GO_TO_PREV"):n=this.CanGotoPreviousRecord(),t=n,$.setReturnValue(t);break;case i.get("SELECT_ALL"):var x=this.CanSelectAll();t={err:!1,retVal:x};break;case i.get("NEWQUERY"):return t={err:!1,retVal:this.CanNewQuery()},t;case i.get("UNDOQUERY"):return t={err:!1,retVal:!0},t;default:this.GetBusComp()&&(t=this.GetBusComp().CanInvokeMethodX(e),E=!0)}return E&&(n=t,t=n,SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")),t},e.prototype
.CanSelectAll=function(){var e=!1,t=this.GetBusComp(),n=-1;return t&&t.IsNewRecordPending()?e=!1:(t&&!t.IsInQueryState()&&(n=t.GetActiveRow()),n!==-1&&(e=!0)),e},e.prototype.CanNewAndBOL=function(e,t){var n=this.GetBusComp();return n===null||n===undefined?(l.CcfLogEvent([A,37,4,13,"InserRecord","buscomp is undefined"]),!1):this.m_bNoInsert||this.IsMultiRecSelected()||n.IsInQueryState()?!1:e?n.HasAssocList()&&t?!this.m_cszAssocFrameName:n.CanInsert():n.GetSelection()>=0&&n.CanInsert()},e.prototype.CanNewQuery=function(){return this.GetParentApplet()?!1:!0},e.prototype.IsMultiRecSelected=function(){return this.GetBusComp().GetMultiSelectMode()},e.prototype.CanGotoNextSet=function(){var e=this.GetBusComp();if(e){var t=e.GetRecordCount(),n=e.GetCursor(),r=e.GetWS().length;if(n[0]<t-1)return{err:!1,retVal:!0};var i=e.GetNotifyInfoArray(),s=i[0],o=s.GetBegRow(this.GetName()),u=s.GetSize(this.GetName()),a=o+2*u-r;return a<=0?{err:!1,retVal:!0}:{err:!1,retVal:!1}}return{err:!1,retVal:!0}},e.prototype.CanGotoPreviousSet=function(){var e=this.GetBusComp();if(e){var t=e.GetCursor(),n=e.GetWS().length,r=e.GetNotifyInfoArray(),i=r[0],s=i.GetBegRow(this.GetName()),o=i.GetSize(this.GetName()),u=s-o;return u>=0?{err:!1,retVal:!0}:t[0]-n>=0?{err:!1,retVal:!0}:{err:!1,retVal:!1}}return{err:!1,retVal:!0}},e.prototype.CanGotoFirstSet=function(){return{err:!1,retVal:!0}},e.prototype.CanGotoLastSet=function(){return{err:!1,retVal:!0}},e.prototype.CanScrollNext=function(){var e=this.GetBusComp();if(e){var t=0,n,r=e.GetNumRowsX();n=r.retVal;if(!r.err)return r=this.GetWSEndRowNumX(),t=r.retVal,r.err?{err:!1,retVal:!0}:(t=r.retVal,t===-1||t===0?{err:!1,retVal:!1}:{err:!1,retVal:!0});r=this.GetWSEndRowNumX();if(!r.err){t=r.retVal;if(t<n)return{err:!1,retVal:!0}}return{err:!1,retVal:!1}}return{err:!1,retVal:!0}},e.prototype.CanScrollPrevious=function(){var e=this.GetBusComp();if(e){if(e.IsInQueryState())return{err:!1,retVal:!1};var t,n=this.GetWSStartRowNumX();t=n.retVal;if(!n.err&&t!==1){n=this.GetWSNumRows();var r=n.retVal,i=e.GetWS().length;if(r<=i)return{err:!1,retVal:!0}}return{err:!1,retVal:!1}}return{err:!1,retVal:!1}},e.prototype.CanGotoNextRecord=function(){var e=this.GetBusComp();if(e===null||e===undefined)return{err:!0,retVal:!1};if(e.IsInQueryState())return{err:!1,retVal:!1};var t=e.GetRecordCount(),n=e.GetCursor();return t===0||t===1?{err:!1,retVal:!1}:e.GetActiveRow()<e.GetWS().length-1?{err:!1,retVal:!0}:n[0]>=t-1?{err:!1,retVal:!1}:{err:!1,retVal:!0}},e.prototype.CanGotoPreviousRecord=function(){var e=this.GetBusComp();if(e===null||e===undefined)return{err:!0,retVal:!1};if(e.IsInQueryState())return{err:!1,retVal:!1};var t=e.GetRecordCount();if(t===0||t===1)return{err:!1,retVal:!1};if(e.GetActiveRow()>0)return{err:!1,retVal:!0};var n=e.GetCursor();return n[0]+1-e.GetWS().length<=0?{err:!1,retVal:!1}:{err:!1,retVal:!0}},e.prototype.CanDeleteRecord=function(){var e={err:!1},t,n=this.GetBusComp(),t={};t.err=!1,t.retVal=!1;if(this.GetNoDelete()||this.IsMultiRecSelected())e=t;else if(!n)t.err=!0,e=t;else if(n.IsInQueryState())t.retVal=!1,e=t;else{e=n.CanDelete();var r=e;e=r}return e},e.prototype.CanDeleteRecords=function(){var e={err:!1},t;return e={err:!1,retVal:!0},e},e.prototype.CanExecuteQuery=function(){var e={err:!1},t,n=this.GetBusComp(),t={};return t.err=!1,t.retVal=!1,n===null||n===undefined?(t.err=!0,e=t,e):(e={err:!1,retVal:!this.m_bNoExecuteQuery},e)},e.prototype.CanWriteRecord=function(){var e={err:!1},t,n=this.GetBusComp();if(n===null||n===undefined)return l.CcfLogEvent([A,37,4,13,"WriteRecord","buscomp is undefined"]),e;if(!n.CheckActiveRow())return e={err:!1,retVal:!1},e;if(n.IsInQueryState())return l.CcfLogEvent([A,37,4,13,"WriteRecord","buscomp is in Query Mode",n.GetName()]),e;if(!n.IsCommitPending()){if(!!this.m_bNoUpdate)return e={err:!1,retVal:!1},e;e=n.CanUpdateX(!0),t=e,e={err:!1},t.retVal?e={err:!1,retVal:!0}:e={err:!1,retVal:!1}}else e={err:!1,retVal:!0};return e},e.prototype.CanUpdateX=function(e){var t={err:!1},n;SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().StartTime("Applet.CanUpdateX");var r,i={};i[h]=this.GetName(),i[p]=y,i[d]="CanUpdate",i[b]=this;var s=CCFMiscUtil_CreatePropSet();s.SetPropertyStr("Field",e),i[v]=m,t=u.InvokeRegisteredSvc(i,s),n=t,t={err:!1},r=n.retVal;var a=n.err;if(r.Outputargs&&r.Outputargs.GetProperty("Invoked")&&r.Outputargs.GetProperty("Invoked").toString()==="true"){var f=r.Outputargs.GetProperty("RetVal").toString();return t={err:a,retVal:f},SiebelApp.S_App.GetTimer()&&SiebelApp.S_App.GetTimer().EndTime("Applet.CanUpdateX"),t}r.Outputargs&&s&&(r.Outputargs.SetType(m),s.AddChild(r.Outputargs));var l=this.GetBusComp();if(e!==undefined){var c=this.GetControlDef(e);if(c){if(o.IsEmpty(c.field))return t={err:!1,retVal:c.IsEditable},t;if(l&&l.IsInQueryState())return t={err:!1,retVal:!0},t;if(!c.IsEditable)return t={err:!1,retVal:!1},t}else{var g=this.GetControls();if(g.hasOwnProperty(e)){var w=g[e];if(o.IsEmpty(w.GetFieldName())){var E=w.IsEditEnabled();if(!E)return t={err:!1,retVal:!0},t}}}if(this.GetNoUpdate()&&l&&!l.IsNewRecordPending())return t={err:!1,retVal:!1},t;l?(t=l.CanUpdateX(!1,e),n=t,t=n):t={err:!1,retVal:!1}}else{var S;if(this.m_bNoUpdate)return t={err:!1,retVal:!1},t;if(l===null||l===undefined)return t={err:!1,retVal:!1},t;S=l.GetActiveRow(),S>=0?(t=l.CanUpdateX(!0),n=t,t={err:!1},n.retVal?t={err:!1,retVal:!0}:t={err:!1,retVal:!1}):t={err:!1,retVal:!1}}return t},e.prototype.CanSort=function(){return!1},e.prototype.CanAddRecord=function(){var e=this.GetBusComp(),t=e&&!e.IsInQueryState()&&e.CheckActiveRow();return{err:!1,retVal:t}},e.prototype.CanPickRecord=function(){var e={err:!1},t,n=this.GetBusComp(),r=this.GetParentApplet(),i=!1;if(r){var s=r.GetBusComp();if(s&&s.IsInQueryState()&&s.GetActiveRow()<0)return e={err:!1,retVal:!1},e}if(n&&!n.IsInQueryState()&&!n.GetMultiSelectMode()&&n.CheckActiveRow()&&r&&this.GetPickAppletSrcInfo){var o=this.GetPickAppletSrcInfo().SrcAppletFld;o?(e=r.CanUpdateX(o),t=e,i=t.retVal,e={err:!1,retVal:i}
):e={err:!1,retVal:i}}else e={err:!1,retVal:i};return e},e.prototype.InvokeMethodX=function(e,t){var n={err:!1},r;a.GetTimer()&&a.GetTimer().StartTime("Applet.prototype.InvokeMethodX ");var s,o={},c,w=[];return e?(o[h]=this.GetName(),o[p]=y,o[d]="DoInvokeMethod",o[b]=this,t.SetProperty("MethodName",e),o[v]=m,n=u.InvokeRegisteredSvc(o,t),r=n,n={err:!1},$.setReturnValue(n),s=r.retVal,c=r.err,c?(n={err:c,retVal:s.Outputargs},$.setReturnValue(n),n):s.Outputargs&&s.Outputargs.GetProperty("Invoked")&&s.Outputargs.GetProperty("Invoked").toString()==="true"?(l.CcfLogEvent([A,48,4,11,o[h],e,o.ExtType]),n={err:c,retVal:s.Outputargs},$.setReturnValue(n),(!f.GetPostedAction()||!f.GetPostedAction().Action)&&f.PostActions(i.get("ACTION_RPC_COMPLETED")),a.GetTimer()&&a.GetTimer().EndTime("Applet.prototype.InvokeMethodX "),n):(s.Outputargs&&t&&(s.Outputargs.SetType(m),t.AddChild(s.Outputargs)),n=U.call(this,e,t),$.callback(this,function(r){n={err:!1},$.setReturnValue(n);var l=r.retVal,c=r.err;if(c)return n={err:c,retVal:l},$.setReturnValue(n),n;l&&(this.GetBusComp()&&(n=this.GetBusComp().InvokeMethodX(e,t)),r=n,n={err:!1},$.setReturnValue(n),s=r.retVal,s&&(n={err:c,retVal:s.Outputargs},$.setReturnValue(n)),(!f.GetPostedAction()||!f.GetPostedAction().Action)&&f.PostActions(i.get("ACTION_RPC_COMPLETED"))),o[v]=g,t.SetProperty("RetVal",l),n=u.InvokeRegisteredSvc(o,t),r=n;var h=r.retVal.Outputargs;c=r.err,n={err:c,retVal:h},$.setReturnValue(n),a.GetTimer()&&a.GetTimer().EndTime("Applet.prototype.InvokeMethodX ")}),n)):(w.push(e),SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("AppletErrNoSuchMethod",w,"","","",4,11),n={err:"AppletErrNoSuchMethod",retVal:""},$.setReturnValue(n),n)},e.prototype.CreateRecord=function(e){var t={err:!1},n;return a.GetTimer()&&a.GetTimer().StartTime("Applet.prototype.CreateRecord"),this.GetBusComp().SetExtObjProp("isNewRecord",!0),t=at.call(this,e),a.GetTimer()&&(t={err:!1},a.GetTimer().EndTime("Applet.prototype.CreateRecord ")),t},e.prototype.NewRecord=function(e){var t={err:!1},n;a.GetTimer()&&a.GetTimer().StartTime("Applet.prototype.NewRecord ");var s=this.GetDefn(),u=s.AsocAplt,l=o.DecodeFromQueryString(e.request),c=l.GetProperty(r.get("SWE_SHOW_POPUP_STR")).toString(),h=this.GetParentApplet();if(!o.IsEmpty(u)&&c==="true")e.appletName=u,t=this.MakePopup("NewRecord",e);else if(h){this.ClosePopupApplet();var p=[];p.push(h.GetName()),p.push("CreateRecord"),h.GetBusComp().NotifyGeneric("SWEAInvokeMethod",p),f.PostActions(i.get("ACTION_RPC_COMPLETED"),"CreateRecord")}else this.GetBusComp().SetExtObjProp("isNewRecord",!0),t=ut.call(this,e);return a.GetTimer()&&(t={err:!1},a.GetTimer().EndTime("Applet.prototype.NewRecord ")),t},e.prototype.NewQuery=function(e){var t={err:!1},n;return a.GetTimer()&&a.GetTimer().StartTime("Applet.prototype.NewQuery "),t=z.call(this,e),a.GetTimer()&&(t={err:!1},a.GetTimer().EndTime("Applet.prototype.NewQuery ")),t},e.prototype.NewExecuteQuery=function(e){var t={err:!1},n;return a.GetTimer()&&a.GetTimer().StartTime("Applet.prototype.NewExecuteQuery "),t=W.call(this,e),a.GetTimer()&&(t={err:!1},a.GetTimer().EndTime("Applet.prototype.NewExecuteQuery ")),t},e.prototype.ShowFieldDetail=function(e,t){var n={err:!1},r;return l.CcfLogEvent([A,44,4,17,"Name",this.GetDefn().Name]),this.MakePopup("EditField",t,e),$.callback(this,function(){lt.call(this),n={err:!1},$.setReturnValue(n)}),n},e.prototype.EditRecord=function(e){this.GetBusComp().SetExtObjProp("IsEditRecord",!0);var t=this.GetBusComp().GetActiveRow(),n=this.GetBusComp().FindWorkSet(t);this.GetBusComp().SetOrigRecVal(n),ft.call(this,e)},e.prototype.MakePopup=function(e,t){var n={err:!1},r;l.CcfLogEvent([A,44,4,18,"methodName",e]);var s;switch(e){case"ShowPopup":s="puinf";var u=o.DecodeFromQueryString(t.request),a=u.GetProperty("SWETA").toString();f.SetContext("Applet",s,a);break;case i.get("NEWRECORD"):s=i.get("NEW_VIEW_INFO"),f.SetContext("Applet",s);break;case i.get("EDIT_FIELD"):var c=this.GetBusComp();c.IsDeletePending()&&(n=c.WriteRecord()),n={err:!1},$.setReturnValue(n),this.CreatePopup(e,t)}return n},e.prototype.CreatePopup=function(e){var t={err:!1},n;l.CcfLogEvent([A,44,4,19,"methodName",e]),a.GetTimer()&&a.GetTimer().StartTime("Applet.CreatePopup ");var r,s=this.GetActiveControl(),o=s.GetUIType();return o!=="Pick"?((!f.GetPostedAction()||!f.GetPostedAction().Action)&&f.PostActions(i.get("ACTION_RPC_COMPLETED")),l.CcfLogEvent([A,92,4,19,o]),t):(SiebelApp.BrowserCacheMgr.GetPickAppletInfo(this.GetView().GetName(),this.GetName(),s.GetName()),$.callback(this,function(t){var n=t.retVal;r=i.get("PICK_APLT_INFO");var o=n.PickApplet+"__"+this.GetName()+"__"+this.GetView().GetName();SiebelApp.RequestProcessor.SetPrevReqObj({reqType:e,searchVal:o}),f.SetContext("Applet",r,o);var u={};u.SrcApplet=this.GetName(),u.SrcAppletFld=s.GetFieldName(),f.SetPickAppletContext(u),a.GetTimer()&&a.GetTimer().EndTime("Applet.CreatePopup ")}),t)},e.prototype.GetWSEndRowNumX=function(){var e=0,t={};t.err=!1,t.retVal=e;var n=this.GetWSNumRows();if(!n.err){var r=n.retVal;return r<=0?t:(e=this.GetWSStartRowNumX(e).retVal,e+=r-1,t.retVal=e,t)}return t.err=!0,t},e.prototype.GetWSNumRows=function(){var e,t=0,n={};n.err=!1,n.retVal=t;if(!this.GetBusComp())return n;var r=this.GetBusComp(),i=this.GetName(),s=r.WSGetCurrRow(0,i);if(!s.err){e=s.retVal,r.WSHomeX(0,i);for(t=1;;t++)if(r.WSNextRecordX(0,i).err)break;return t>e?r.WSSetCurrRow(0,e,i):r.WSHomeX(0,i),n.retVal=t,n}return n.err=!0,n},e.prototype.GetWSStartRowNumX=function(){var e=0,t={};t.err=!1,t.retVal=e;if(!this.GetBusComp())return t;var n=this.GetBusComp(),r=n.GetRowNum(),i=r.err;if(i)return i==="SSAOMErrActiveRow"?(e=0,t.retVal=e,t):(t.err=!0,t);e=r.retVal;var s=n.GetActiveRow();return e-=s,t.retVal=e,t},e.prototype.WSNextRecordX=function(){var e=!1,t=this.GetBusComp(),n=this.GetNotIdComp();n=0;var r=t.WSNextRecordX(n,this.GetName()),i=r.err;if(!i)return e=!0,r.err="",r.retVal=e,r;if(i==="SSAOMErrEOWS")return r.err="",r.retVal=e,r;var s=[t];return r.err=i,r.retVal=s,r},e.
prototype.ClosePopupApplet=function(){var e,t=this.GetParentApplet();t.GetBusComp()&&(e=[],e.push(t.GetName()),t.NotifyDeletePopup(e)),f.PostActions(i.get("ACTION_RPC_CLOSE_POPUP")),this.SetRowSelectArr([])},e.prototype.NotifyDeletePopup=function(e){this.GetBusComp().NotifyGeneric(r.get("SWE_RPC_PROP_CLOSE_POPUP"),e)},e.prototype.SetDefaultShowMode=function(){},e.prototype.GetComboBoxOptions=function(e,t){var n={err:!1},r,i=this.GetBusComp();return n=i.GetQuickPickInfo(e,t),r=n,n=r,n},e.prototype.SetFieldValue=function(e,t){var n={err:!1},r,i,s=this.GetBusComp();if(!s)return n={err:!1},n;n=this.GetBusComp().FieldValue(e.GetFieldName()),r=n,n={err:!1};if(!r.err){i=r.retVal;if(i===t)return n={err:!1},n;n=this.GetBusComp().SetFieldValueX(e.GetFieldName(),t),r=n,function(e){n={err:!1};if(e.err)return n=e,n;this.GetSavedModeState()||this.commitPending||this.GetBusComp().NotifyStateChanged("cp",1)}.call(this,r)}return n},e.prototype.GetControlById=function(e){var t=this.GetControls(),n=this.GetSelection(),r;for(var i in t){var s=typeof t[i].GetSpanPrefix=="function"?t[i].GetSpanPrefix()+n:t[i].GetInputName();if(s===e){r=t[i];break}}return t=null,r},e.prototype.GetControlByName=function(e){var t=this.GetControls(),n;for(var r in t)if(t[r].GetName()===e){n=t[r];break}return t=null,n},e.prototype.CheckActiveRowId=function(e,t){return e&&e.match(t)?!0:!1},e.prototype.PrepareToInvokeMethod=function(e,t){var n={err:!1},s;l.CcfLogEvent([A,44,4,20,"methodName",e]),a.GetTimer()&&a.GetTimer().StartTime("Applet.PrepareToInvokeMethod "),this.PositionBaseAncestorFrame();var o=function(){var o=SiebelApp.AjaxRequestMgr.GetActiveRequestObj(),u=o.SweCommands;if(u.SWEReqRowId==="1"){if(e===i.get("POSITION_ON_ROW")){n=this.CanInvokeMethodX(e);var f=n;n={err:!1};if(!f.err&&f.retVal){var l=parseInt(u.SWEIgnoreCtrlShift,10),c=parseInt(u[r.get("SWE_ROW_STR")],10),h=parseInt(u.SWEControlClicked,10),p=parseInt(u.SWEShiftClicked,10);l||(n=this.GetBusComp().SelectRow(this.GetName(),c,h,p,!1))}}n=this.GoBackToRecord(t)}n=this.CanPostChangesToBC(e),s=n,n={err:!1},s.retVal&&(n=vt.call(this,!1)),s=n,n={err:!1},s.err&&e!=="UndoRecord"?n=s:(n=this.CanInvokeMethodX(e),s=n,n={err:!1},s.err||(n={err:!0}),a.GetTimer()&&a.GetTimer().EndTime("Applet.PrepareToInvokeMethod "))},u=n;return n={err:!1},o.call(this,u),n},e.prototype.GetDefn=function(){return SiebelApp.Metadata.GetAppletDef(this.GetName())},e.prototype.EnumUserProps=function(){var e=this.GetDefn(),t=null;if(e.userPropMap){t=[];var n=e.userPropMap;for(var r in n)n[r]&&t.push(r);return t}return null},e.prototype.GetUserProperty=function(e){return this.GetDefn().userPropMap?this.GetDefn().userPropMap[e]:""},e.prototype.GetControlDef=function(e){if(this.GetDefn().control){var t=this.GetDefn().control[e];if(t){if(!t.hasOwnProperty("IsEditable")){var n=t.name;n===r.get("SWE_QUERY_COMBO_BOX")||n===r.get("SWE_QUERY_SEARCH_SPEC")?this.GetBusComp()&&this.GetBusComp().CanQuery()?t.IsEditable=!0:t.IsEditable=!1:t.IsEditable=!t.ReadOnly;if(n===r.get("SWE_POPUP_QUERY_COMBO_BOX")||n===r.get("SWE_POPUP_QUERY_SEARCH_SPEC"))t.IsEditable=!0;this.GetDefn().control[e]=t}return t}}},e.prototype.GetDrillDown=function(e,t){var n=o.IsEmpty(t)?!1:t;if(!n)return this.GetDefn().drilldown?this.GetDefn().drilldown[e]:"";var r=this.GetDefn().drilldown;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i].hyperLinkField;s=l.RemoveNonAlphaChars(s),e=l.RemoveNonAlphaChars(e);if(s===e)return this.GetDefn().drilldown[i]}return""},e.prototype.SetFldSearchSpec=function(e,t){var n=e.GetName(),r=this.GetBusComp();r.ValidateFieldDef(n)&&r.SetFldSearchSpec(n,t)},e.prototype.PostLayoutAction=function(e,t,n){if(e){var r=SiebelApp.S_App.GetActiveView(),s=r.GetAppletMap(),o;for(var u in s)if(s[u]){o=s[u];if(o.GetBusComp()!==this.GetBusComp()||o===this)continue;if(o.GetSavedModeState()===o.GetMode()){e=!1,o.SetSavedModeState();break}}}e?SiebelApp.OfflineAppMgr.PostActions(i.get("ACTION_RPC_COMPLETED")):SiebelApp.OfflineAppMgr.PostActions(i.get("ACTION_RPC_REFRESH_VIEW"),t,n)},e.prototype.ImplicitCommit=function(){var e={err:!1},t,n=this.GetBusComp();return n&&(n.IsCommitPending()||n.IsDeletePending())&&(e=n.WriteRecord(),t=e,e=t),e},SiebelApp.OfflineUtils.DefineExtentions(e,M,O)})(),typeof SiebelApp.S_App.OfflineAppletInterface=="undefined"&&(SiebelApp.S_App.OfflineAppletInterface=function(){function e(e){var t=e,n=this,r={GetParentApplet:1};for(var i in t)t[i]&&function(){var t=i,s=e;return typeof e[t]=="function"&&!n[t]&&!r[t]&&(n[t]=function(){return s.constructor.prototype[t]?s.constructor.prototype[t].apply(s,arguments):s[t].apply(s,arguments)}),n[t]}();this.GetOfflineApplet=function(){return t},this.GetParentApplet=function(){var e=t.GetParentApplet();if(e)return e.GetInterface()},this.EndLife=function(){t=null,n=null,r=null}}return e.prototype.GetBusComp=function(){var e=SiebelApp.S_App.Model.GetIsInterFace(),t=this.GetOfflineApplet(),n=t.GetBusComp.call(t);return e>0&&n?n.GetInterface():t.GetBusComp.call(t)},e.prototype.InvokeMethod=function(e,t){return this.GetOfflineApplet().InvokeMethodX(e,t)},e.prototype.CanInvokeMethod=function(e){return this.GetOfflineApplet().CanInvokeMethodX(e)},e.prototype.CanUpdate=function(){return this.GetOfflineApplet().CanUpdateX()},e.prototype.CanNavigate=function(){return this.GetOfflineApplet().CanNavigateX()},e.prototype.BusComp=function(){return this.GetOfflineApplet().GetBusComp()},e.prototype.BusObj=function(){return this.GetOfflineApplet().GetBusComp().GetBusObj()},e.prototype.Name=function(){return this.GetOfflineApplet().GetName()},e.prototype.Mode=function(){return this.GetOfflineApplet().GetMode()},e.prototype.GetWSEndRowNum=function(){return this.GetOfflineApplet().GetWSEndRowNumX()},e.prototype.GetWSStartRowNum=function(){return this.GetOfflineApplet().GetWSStartRowNumX()},e}()),SiebelApp.S_App.ListApplet&&function(){var e={},t={},n=SiebelApp.S_App.ListApplet;e.SetOnLoadRowSelection=n.prototype.SetOnLoadRowSelection,t=function(t){if(!t.GetProperty(SiebelApp.Offlineconstants
.get("IS_DYNAMIC")))return;return e.SetOnLoadRowSelection.call(this,t)},SiebelApp.OfflineUtils.DefineExtentions(n,t,e)}()}),SiebelApp.S_App.AppletControl&&define("siebel/offline/appletcontrol",[],function(){(function(){function o(e,t){if(e.GetProperty(i.get("SWE_PROP_POPUP_TYPE"))===i.get("SWE_CTRL_MVG")){e.SetProperty(i.get("SWE_PROP_IS_EDIT"),"0"),e.SetProperty(i.get("SWE_PROP_POPUP_TYPE"),"");var n=SiebelApp.S_App.LookupStringCache(e.GetPropertyAsStr("n")),r=t.GetDefn().control[n];r&&(r.IsEditable=!1,t.GetDefn().control[n]=r)}}var e=SiebelApp.S_App.AppletControl,t=e.prototype,n={},r={};n.ProcessObjectInfo=t.ProcessObjectInfo,n.ProcessMethodProps=t.ProcessMethodProps;var i=SiebelApp.Constants,s=SiebelJS.Dependency("SiebelApp.Utils");r.ProcessObjectInfo=function(){var e={err:!1},t,r=this,s=r.GetApplet(),u=s instanceof SiebelApp.S_App.ListApplet,a=arguments[0],f=a.GetChildByType(i.get("SWE_PST_VALUE_SET"));if(f){var l=r.GetApplet().GetBusComp();if(l){var c=SiebelApp.S_App.LookupStringCache(a.GetPropertyAsStr(i.get("SWE_PROP_FLD_NAME")));if(c&&a.GetProperty(i.get("SWE_PROP_POPUP_TYPE"))!==i.get("SWE_CTRL_MVG")){var h=l.GetFieldDefn(c),p=h.PickListName,d=SiebelApp.S_App.Model.GetPickListDef(p);if(d&&d.IsBounded&&d.IsStatic){e=SiebelApp.BrowserCacheMgr.GetPickListData(d,l,c),t=e,e={err:!1};var v=t.retVal,m=v.length,g,y;f.Reset();for(var b=0;b<m;b++)g=CCFMiscUtil_CreatePropSet(),y=v[b],g.SetProperty("DisplayName",y),g.SetProperty("FieldValue",y),f.AddChild(g);f.SetType(i.get("SWE_PST_VALUE_SET"))}}}}return o.call(this,a,s),n.ProcessObjectInfo.apply(r,arguments),u&&$.type(r.IsSortable)==="function"&&(r.IsSortable=function(){return!1}),e},r.ProcessMethodProps=function(e){if(e.GetProperty(SiebelApp.Offlineconstants.get("IS_DYNAMIC"))){var t=e.GetProperty(i.get("SWE_METHOD_STR"));if(t==="NewRecord"){var r=this.GetMethodPropSet(),o=this.GetApplet().GetBusComp(),u=this.GetApplet().GetDefn(),a=u.AsocAplt,f=e.GetProperty(i.get("SWE_SHOW_POPUP_STR")),l=!1;o&&o.HasAssocList()&&!s.IsEmpty(a)&&(l=!0),f!==undefined&&(l||f==="true")&&r&&r.SetProperty(i.get("SWE_SHOW_POPUP_STR"),!0)}}else n.ProcessMethodProps.call(this,e)},SiebelApp.OfflineUtils.DefineExtentions(e,r,n)})()});var TheSiebelApplication=TheApplication;Object.defineProperty(window,"TheApplication",{value:TheSiebelApplication,writable:!1}),typeof SiebelApp.attachmentsvc=="undefined"&&(SiebelJS.Namespace("SiebelApp.attachmentsvc"),define("siebel/offline/attachmentsvc",["siebel/offline/model","siebel/offline/servicemodel","siebel/offline/pharmacallsvc"],function(){var e={},t=SiebelApp.Offlineconstants,n={};return e[t.get("DOUIREG_OBJ_NAME")]="Account Attachment List Applet - Mobile",e[t.get("DOUIREG_OBJ_TYPE")]=t.get("DOUIREG_OBJ_TYPEAPPLET"),e[t.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod",e[t.get("DOUIREG_SRVC_NAME")]="attachmentsvc",e[t.get("DOUIREG_SRVC_MTDH")]="AttcmntDoCanInvokeMethod",e[t.get("DOUIREG_EXT_TYPE")]=t.get("DOUIREG_EXT_TYPEPRE"),SiebelApp.S_App.Model.ServiceRegistry(e),e[t.get("DOUIREG_OBJ_NAME")]="Contact Attachment List Applet - Mobile",e[t.get("DOUIREG_OBJ_TYPE")]=t.get("DOUIREG_OBJ_TYPEAPPLET"),e[t.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod",e[t.get("DOUIREG_SRVC_NAME")]="attachmentsvc",e[t.get("DOUIREG_SRVC_MTDH")]="AttcmntDoCanInvokeMethod",e[t.get("DOUIREG_EXT_TYPE")]=t.get("DOUIREG_EXT_TYPEPRE"),SiebelApp.S_App.Model.ServiceRegistry(e),e[t.get("DOUIREG_OBJ_NAME")]="Account Attachment List Applet - Mobile",e[t.get("DOUIREG_OBJ_TYPE")]=t.get("DOUIREG_OBJ_TYPEAPPLET"),e[t.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod",e[t.get("DOUIREG_SRVC_NAME")]="attachmentsvc",e[t.get("DOUIREG_SRVC_MTDH")]="AttcmntDoInvokeMethod",e[t.get("DOUIREG_EXT_TYPE")]=t.get("DOUIREG_EXT_TYPEPRE"),SiebelApp.S_App.Model.ServiceRegistry(e),e[t.get("DOUIREG_OBJ_NAME")]="Contact Attachment List Applet - Mobile",e[t.get("DOUIREG_OBJ_TYPE")]=t.get("DOUIREG_OBJ_TYPEAPPLET"),e[t.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod",e[t.get("DOUIREG_SRVC_NAME")]="attachmentsvc",e[t.get("DOUIREG_SRVC_MTDH")]="AttcmntDoInvokeMethod",e[t.get("DOUIREG_EXT_TYPE")]=t.get("DOUIREG_EXT_TYPEPRE"),SiebelApp.S_App.Model.ServiceRegistry(e),e[t.get("DOUIREG_OBJ_NAME")]="Account Attachment List Applet - Mobile",e[t.get("DOUIREG_OBJ_TYPE")]=t.get("DOUIREG_OBJ_TYPEAPPLET"),e[t.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod",e[t.get("DOUIREG_SRVC_NAME")]="attachmentsvc",e[t.get("DOUIREG_SRVC_MTDH")]="AttcmntDoInvokeMethodPost",e[t.get("DOUIREG_EXT_TYPE")]=t.get("DOUIREG_EXT_TYPEPOST"),SiebelApp.S_App.Model.ServiceRegistry(e),e[t.get("DOUIREG_OBJ_NAME")]="Contact Attachment List Applet - Mobile",e[t.get("DOUIREG_OBJ_TYPE")]=t.get("DOUIREG_OBJ_TYPEAPPLET"),e[t.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod",e[t.get("DOUIREG_SRVC_NAME")]="attachmentsvc",e[t.get("DOUIREG_SRVC_MTDH")]="AttcmntDoInvokeMethodPost",e[t.get("DOUIREG_EXT_TYPE")]=t.get("DOUIREG_EXT_TYPEPOST"),SiebelApp.S_App.Model.ServiceRegistry(e),SiebelApp.attachmentsvc=function(){function e(e){}return SiebelJS.Extend(e,SiebelApp.ServiceModel),e.prototype.AttcmntDoCanInvokeMethod=function(e){var t={err:!1},n,r=CCFMiscUtil_CreatePropSet(),i=e.GetProperty("MethodName").toString(),s=this.GetContext(),o=s.GetBusComp(),u=o.GetMultiSelectMode(),a=o.GetSelRowIdArray();console.log("m_bInMultiSelMode:"+u+"&m_selRowIdArray:"+a.length),SiebelJS.Log("Invoked AttcmntDoCanInvokeMethod Method "+i);var f=localStorage.getItem("isAdfmContainer")?!0:!1;return i==="ShowUrlPopup"||i==="NewQuery"?(r.SetProperty("Invoked",!0),r.SetProperty("RetVal",!1)):i==="NewFileAttachment"||i==="DeleteRecord"||i==="EditRecord"?u?(r.SetProperty("Invoked",!0),r.SetProperty("RetVal",f&&!u)):(r.SetProperty("Invoked",!0),r.SetProperty("RetVal",f&&a.length<=1)):(r.SetProperty("Invoked",!0),r.SetProperty("RetVal",f)),t={err:!1,retVal:r},SiebelApp.S_App.uiStatus.Free(),t},e.prototype.AttcmntDoInvokeMethod=function(e){var t={err:!1},r,i=e.GetProperty("Request"),s=SiebelApp.Utils.DecodeFromQueryString(i),o=s.GetProperty("SWERowId"),u=e.GetProperty("MethodName").toString();SiebelJS.Log("Invoked AttcmntDoInvokeMethod Method "+
u);var a=this.GetContext(),f=a.GetView(),l=a.GetBusComp(),c=a.GetListOfColumns(),h=l.GetDefn(),p=h.userPropMap.DefaultPrefix,d=h.Fields,v=CCFMiscUtil_CreatePropSet();if(u=="NewRecord"){v.SetProperty("Invoked",!0),n.fname=unescape(s.GetPropertyAsStr("ATT_fname")),n.fsize=s.GetProperty("ATT_fsize"),n.fext=s.GetProperty("ATT_fext"),n.lname=s.GetProperty("ATT_lname"),n.fpath=s.GetProperty("ATT_fpath"),n.view=s.GetProperty("SWEActiveView"),n.applet=s.GetProperty("SWEActiveApplet"),n.bc=l.GetName(),n.bo=f.GetBusObj().GetName(),l.NewRecord();for(var m in d)m.toLowerCase().indexOf("filename")>-1?(l.SetFieldValue(m,n.fname),n.field=m):m.toLowerCase().indexOf("filesize")>-1?l.SetFieldValue(m,n.fsize):m.toLowerCase().indexOf("fileext")>-1?l.SetFieldValue(m,n.fext):m.toLowerCase().indexOf("fileautoupdflg")>-1?l.SetFieldValue(m,"N"):m.toLowerCase().indexOf("filedeferflg")>-1?l.SetFieldValue(m,"Y"):m.toLowerCase().indexOf("filedockstatflg")>-1&&l.SetFieldValue(m,"N");v.SetProperty("RetVal",t)}else u=="WriteRecord"?(l.IsNewRecordPending()&&(n.isNew=!0),v.SetProperty("Invoked",!1),v.SetProperty("RetVal",!1)):u.toLowerCase()==="drilldown"&&SiebelApp.AttachmentMgr?(SiebelApp.AttachmentMgr.ShowFile(o),v.SetProperty("Invoked",!0),v.SetProperty("RetVal",!1)):(v.SetProperty("Invoked",!1),v.SetProperty("RetVal",!1));return t={err:!1,retVal:v},SiebelApp.S_App.uiStatus.Free(),t},e.prototype.AttcmntDoInvokeMethodPost=function(e){var t={err:!1},r,i=e.GetProperty("Request"),s=SiebelApp.Utils.DecodeFromQueryString(i),o=CCFMiscUtil_CreatePropSet(),u=s.GetProperty("SWERowId"),a=e.GetProperty("MethodName").toString(),f=this.GetContext(),l=f.GetView(),c=f.GetBusComp(),h=f.GetListOfColumns(),p=c.GetDefn(),d=p.userPropMap.DefaultPrefix,v=p.Fields;if(a=="DeleteRecord")SiebelApp.AttachmentMgr.DeleteAttachments(u),o.SetProperty("Invoked",!0),o.SetProperty("RetVal",!1);else if(a=="WriteRecord"){var m={};m.id=u;for(var g in h)g.toLowerCase().indexOf("filename")>-1?(t=c.FieldValue(g),t.err||(m.fname=t.retVal)):g.toLowerCase().indexOf("filesize")>-1?(t=c.FieldValue(g),t.err||(m.fsize=t.retVal)):g.toLowerCase().indexOf("fileext")>-1&&(t=c.FieldValue(g),t.err||(m.fext=t.retVal));n.isNew?(t=c.FieldValue("Id"),m.id=t.retVal,m.lname=n.lname,m.field=n.field,m.view=s.GetProperty("SWEActiveView"),m.applet=s.GetProperty("SWEActiveApplet"),m.bc=c.GetName(),m.bo=l.GetBusObj().GetName(),m.attachmentBC=SiebelApp.OfflineUtils.RemoveNonAlphaChars(m.bc),SiebelApp.AttachmentMgr.AddNewAttachment(m),n.isNew=!1):SiebelApp.AttachmentMgr.UpdateAttachmentWithName(m),o.SetProperty("Invoked",!0),o.SetProperty("RetVal",t)}else o.SetProperty("Invoked",!1),o.SetProperty("RetVal",!1);return t={err:!1,retVal:o},SiebelApp.S_App.uiStatus.Free(),t},e}(),"SiebelAppFacade.attachmentsvc"})),define("siebel/offline/globalobjects",[],function(){var e="Server Script Clib interface method is unsupported",t=SiebelApp.OfflineUtils,n=SiebelApp.Offlineconstants.get("LOG_EVT_CLIENT_SYS");window.SElib={GetName:function(){return"SElib"},dynamicLink:function(e,r,i){return t.CcfLogEvent([n,111,18,161,this.GetName()]),alert("Server Script SElib interface method 'dynamicLink' is unsupported"),0},peek:function(e){return t.CcfLogEvent([n,111,18,162,this.GetName()]),alert("Server Script SElib interface method 'peek' is unsupported"),0},pointer:function(e){return t.CcfLogEvent([n,111,18,163,this.GetName()]),alert("Server Script SElib interface method 'pointer' is unsupported"),null},poke:function(e,r){return t.CcfLogEvent([n,111,18,164,this.GetName()]),alert("Server Script SElib interface method 'poke' is unsupported"),null}},window.COMCreateObject=function(e){return t.CcfLogEvent([n,111,20,278,"COMCreateObject"]),alert("Server Script Global interface method 'COMCreateObject' is unsupported"),0},window.undefine=function(e){return t.CcfLogEvent([n,111,20,279,"undefine"]),alert("Server Script Global interface method 'undefine' is unsupported"),0},window.getArrayLength=function(e,t){return typeof e!="undefined"?e.length:0},window.setArrayLength=function(e,t,n){arguments.length==3&&(n=arguments[2]),arguments.length==2&&(n=arguments[1]),typeof e!="undefined"&&(e.length=n)},window.Clib={GetName:function(){return"Clib"},memchr:function(r,i,s){return alert(e),t.CcfLogEvent([n,111,19,165,this.GetName()]),null},memcmp:function(r,i,s){return alert(e),t.CcfLogEvent([n,111,19,166,this.GetName()]),0},memcpy:function(r,i,s){alert(e),t.CcfLogEvent([n,111,19,167,this.GetName()])},memmove:function(r,i,s){alert(e),t.CcfLogEvent([n,111,19,168,this.GetName()])},memset:function(r,i,s){alert(e),t.CcfLogEvent([n,111,19,169,this.GetName()])},isalnum:function(r){return alert(e),t.CcfLogEvent([n,111,19,170,this.GetName()]),!1},isalpha:function(r){return alert(e),t.CcfLogEvent([n,111,19,171,this.GetName()]),!1},isascii:function(r){return alert(e),t.CcfLogEvent([n,111,19,172,this.GetName()]),!1},iscntrl:function(r){return alert(e),t.CcfLogEvent([n,111,19,173,this.GetName()]),!1},isdigit:function(r){return alert(e),t.CcfLogEvent([n,111,19,174,this.GetName()]),!1},isgraph:function(r){return alert(e),t.CcfLogEvent([n,111,19,175,this.GetName()]),!1},islower:function(r){return alert(e),t.CcfLogEvent([n,111,19,176,this.GetName()]),!1},isprint:function(r){return alert(e),t.CcfLogEvent([n,111,19,177,this.GetName()]),!1},ispunct:function(r){return alert(e),t.CcfLogEvent([n,111,19,178,this.GetName()]),!1},isspace:function(r){return alert(e),t.CcfLogEvent([n,111,19,179,this.GetName()]),!1},isupper:function(r){return alert(e),t.CcfLogEvent([n,111,19,180,this.GetName()]),!1},isxdigit:function(r){return alert(e),t.CcfLogEvent([n,111,19,181,this.GetName()]),!1},toascii:function(r){return alert(e),t.CcfLogEvent([n,111,19,182,this.GetName()]),!1},errno:0,clearerr:function(r){alert(e),t.CcfLogEvent([n,111,19,183,this.GetName()])},perror:function(r){return alert(e),t.CcfLogEvent([n,111,19,184,this.GetName()]),""},strerror:function(r){return alert(e),t.CcfLogEvent([n,111,19,185,this.GetName()]),Clib.errno},chdir:function(r){alert(e)
,t.CcfLogEvent([n,111,19,186,this.GetName()])},getcwd:function(){return alert(e),t.CcfLogEvent([n,111,19,187,this.GetName()]),""},fclose:function(r){alert(e),t.CcfLogEvent([n,111,19,188,this.GetName()])},feof:function(r){return alert(e),t.CcfLogEvent([n,111,19,189,this.GetName()]),0},fflush:function(r){return alert(e),t.CcfLogEvent([n,111,19,190,this.GetName()]),0},fgetc:function(r){return alert(e),t.CcfLogEvent([n,111,19,191,this.GetName()]),0},getc:function(r){return alert(e),t.CcfLogEvent([n,111,19,192,this.GetName()]),0},fgetpos:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,193,this.GetName()]),0},fgets:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,194,this.GetName()]),null},fopen:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,195,this.GetName()]),null},fprintf:function(r,i){alert(e),t.CcfLogEvent([n,111,19,196,this.GetName()])},fputc:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,197,this.GetName()]),null},putc:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,198,this.GetName()]),null},fputs:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,199,this.GetName()]),0},fread:function(r,i,s){return alert(e),t.CcfLogEvent([n,111,19,200,this.GetName()]),0},freopen:function(r,i,s){return alert(e),t.CcfLogEvent([n,111,19,201,this.GetName()]),null},fscanf:function(r,i,s,o){return alert(e),t.CcfLogEvent([n,111,19,202,this.GetName()]),null},fseek:function(r,i,s){return alert(e),t.CcfLogEvent([n,111,19,203,this.GetName()]),0},fsetpos:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,204,this.GetName()]),0},ftell:function(r){return alert(e),t.CcfLogEvent([n,111,19,205,this.GetName()]),-1},fwrite:function(r,i,s){return alert(e),t.CcfLogEvent([n,111,19,206,this.GetName()]),0},mkdir:function(r){return alert(e),t.CcfLogEvent([n,111,19,207,this.GetName()]),0},remove:function(r){return alert(e),t.CcfLogEvent([n,111,19,208,this.GetName()]),-1},rename:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,209,this.GetName()]),-1},rewind:function(r){alert(e),t.CcfLogEvent([n,111,19,210,this.GetName()])},rmdir:function(r){return alert(e),t.CcfLogEvent([n,111,19,211,this.GetName()]),-1},sscanf:function(){return alert(e),t.CcfLogEvent([n,111,19,212,this.GetName()]),0},tmpfile:function(){alert(e),t.CcfLogEvent([n,111,19,213,this.GetName()])},tmpnam:function(r){return alert(e),t.CcfLogEvent([n,111,19,214,this.GetName()]),""},ungetc:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,215,this.GetName()]),""},cosh:function(r){return alert(e),t.CcfLogEvent([n,111,19,216,this.GetName()]),null},div:function(r,i){alert(e),t.CcfLogEvent([n,111,19,217,this.GetName()])},ldiv:function(r,i){alert(e),t.CcfLogEvent([n,111,19,218,this.GetName()])},frexp:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,219,this.GetName()]),0},ldexp:function(r,i){alert(e),t.CcfLogEvent([n,111,19,220,this.GetName()])},modf:function(r,i){alert(e),t.CcfLogEvent([n,111,19,221,this.GetName()])},rand:function(){alert(e),t.CcfLogEvent([n,111,19,222,this.GetName()])},sinh:function(r){alert(e),t.CcfLogEvent([n,111,19,223,this.GetName()])},srand:function(r){alert(e),t.CcfLogEvent([n,111,19,224,this.GetName()])},tanh:function(r){alert(e),t.CcfLogEvent([n,111,19,225,this.GetName()])},rsprintf:function(){return alert(e),t.CcfLogEvent([n,111,19,226,this.GetName()]),0},sprintf:function(r,i,s){return alert(e),t.CcfLogEvent([n,111,19,227,this.GetName()]),0},strchr:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,228,this.GetName()]),null},strcspn:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,229,this.GetName()]),null},stricmp:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,230,this.GetName()]),null},strcmpi:function(r,i){return alert(e),t.CcfLogEvent([n,111,19,231,this.GetName()]),null},strlwr:function(r){return alert(e),t.CcfLogEvent([n,111,19,232,this.GetName()]),null},strncat:function(r,i,s){return alert(e),t.CcfLogEvent([n,111,19,233,this.GetName()]),null},strncmp:function(r,i,s){return alert(e),t.CcfLogEvent([n,111,19,234,this.GetName()]),null},strncmpi:function(r,i,s){alert(e),t.CcfLogEvent([n,111,19,235,this.GetName()])},strnicmp:function(r,i,s){alert(e),t.CcfLogEvent([n,111,19,236,this.GetName()])},strncpy:function(r,i,s){alert(e),t.CcfLogEvent([n,111,19,237,this.GetName()])},strpbrk:function(r,i){alert(e),t.CcfLogEvent([n,111,19,238,this.GetName()])},strrchr:function(r,i){alert(e),t.CcfLogEvent([n,111,19,239,this.GetName()])},strspn:function(r,i){alert(e),t.CcfLogEvent([n,111,19,240,this.GetName()])},strstr:function(r,i){alert(e),t.CcfLogEvent([n,111,19,241,this.GetName()])},strstri:function(r,i){alert(e),t.CcfLogEvent([n,111,19,242,this.GetName()])},tm_sec:0,tm_min:0,tm_hour:0,tm_mday:0,tm_mon:0,tm_year:0,tm_wday:0,tm_yday:0,tm_isdst:0,asctime:function(r){alert(e),t.CcfLogEvent([n,111,19,243,this.GetName()])},clock:function(){alert(e),t.CcfLogEvent([n,111,19,244,this.GetName()])},difftime:function(r,i){alert(e),t.CcfLogEvent([n,111,19,245,this.GetName()])},gmtime:function(r){alert(e),t.CcfLogEvent([n,111,19,246,this.GetName()])},localtime:function(r){alert(e),t.CcfLogEvent([n,111,19,247,this.GetName()])},mktime:function(r){alert(e),t.CcfLogEvent([n,111,19,248,this.GetName()])},tmpnam:function(){alert(e),t.CcfLogEvent([n,111,19,249,this.GetName()])},bsearch:function(r,i,s,o){alert(e),t.CcfLogEvent([n,111,19,250,this.GetName()])},getenv:function(r){alert(e),t.CcfLogEvent([n,111,19,251,this.GetName()])},putenv:function(r,i){alert(e),t.CcfLogEvent([n,111,19,252,this.GetName()])},qsort:function(r,i,s){alert(e),t.CcfLogEvent([n,111,19,253,this.GetName()])},system:function(r){alert(e),t.CcfLogEvent([n,111,19,254,this.GetName()])},abs:function(){return Math.abs.apply(this,arguments)},acos:function(){return Math.acos.apply(this,arguments)},asin:function(){return Math.asin.apply(this,arguments)},atan:function(){return Math.atan.apply(this,arguments)},atan2:function(){return Math.atan2.apply(this,arguments)},atof:function(){alert(e),t.CcfLogEvent([n,111,19,255,this.GetName()])},atoi:function(){alert
(e),t.CcfLogEvent([n,111,19,256,this.GetName()])},atol:function(){alert(e),t.CcfLogEvent([n,111,19,257,this.GetName()])},ceil:function(){return Math.ceil.apply(this,arguments)},cos:function(){return Math.cos.apply(this,arguments)},exp:function(){return Math.exp.apply(this,arguments)},fabs:function(){return Math.abs.apply(this,arguments)},floor:function(){return Math.floor.apply(this,arguments)},fmod:function(){alert(e),t.CcfLogEvent([n,111,19,258,this.GetName()])},labs:function(){return Math.abs.apply(this,arguments)},log:function(){return Math.log.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},min:function(){return Math.min.apply(this,arguments)},pow:function(){return Math.pow.apply(this,arguments)},sin:function(){return Math.sin.apply(this,arguments)},sqrt:function(){return Math.sqrt.apply(this,arguments)},strcat:function(){alert(e),t.CcfLogEvent([n,111,19,259,this.GetName()])},strcmp:function(){alert(e),t.CcfLogEvent([n,111,19,260,this.GetName()])},strcpy:function(){alert(e),t.CcfLogEvent([n,111,19,261,this.GetName()])},strlen:function(){alert(e),t.CcfLogEvent([n,111,19,262,this.GetName()])},strlwr:function(){alert(e),t.CcfLogEvent([n,111,19,263,this.GetName()])},strtod:function(){alert(e),t.CcfLogEvent([n,111,19,264,this.GetName()])},strtol:function(){alert(e),t.CcfLogEvent([n,111,19,265,this.GetName()])},strupr:function(){alert(e),t.CcfLogEvent([n,111,19,266,this.GetName()])},tan:function(){return Math.tan.apply(this,arguments)},tolower:function(){alert(e),t.CcfLogEvent([n,111,19,267,this.GetName()])},toupper:function(){alert(e),t.CcfLogEvent([n,111,19,268,this.GetName()])}},Buffer=function(e,r,i){var r,s,o,u,i;return this.GetName=function(){return"Buffer"},t.CcfLogEvent([n,111,15,270,this.GetName()]),alert("Server Script Buffer interface method 'Buffer' is unsupported"),this},Buffer.prototype.getString=function(e){return t.CcfLogEvent([n,111,15,271,this.GetName()]),alert("Server Script Buffer interface method 'getString' is unsupported"),""},Buffer.prototype.getValue=function(e,r){return t.CcfLogEvent([n,111,15,272,this.GetName()]),alert("Server Script Buffer interface method 'getValue' is unsupported"),0},Buffer.prototype.offset=function(e){return t.CcfLogEvent([n,111,15,273,this.GetName()]),alert("Server Script Buffer interface method '[]' is unsupported"),null},Buffer.prototype.putString=function(e){t.CcfLogEvent([n,111,15,274,this.GetName()]),alert("Server Script Buffer interface method 'putString' is unsupported")},Buffer.prototype.putValue=function(e,r,i){t.CcfLogEvent([n,111,15,275,this.GetName()]),alert("Server Script Buffer interface method 'putValue' is unsupported")},Buffer.prototype.subBuffer=function(e,r){return t.CcfLogEvent([n,111,15,276,this.GetName()]),alert("Server Script Buffer interface method 'subBuffer' is unsupported"),null},Buffer.prototype.toString=function(){return t.CcfLogEvent([n,111,15,277,this.GetName()]),alert("Server Script Buffer interface method 'toString' is unsupported"),""},window.PropertySet=function(){},SiebelJS.Extend(window.PropertySet,JSSPropertySet)});

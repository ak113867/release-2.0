/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.CalPresentationModel=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.CalPresentationModel"),define("siebel/calpmodel",[],function(){return SiebelAppFacade.CalPresentationModel=function(){function n(e){SiebelAppFacade.CalPresentationModel.superclass.constructor.call(this,e)}function r(e){var t=e.EnumProperties(!0);do this.AddProperty(t,e.GetProperty(t));while(t=e.EnumProperties(!1));i.call(this)}function i(){this.Get("Enable Monthly Time Display")||this.AddProperty("Enable Monthly Time Display","Always"),this.Get("Enable 5Day Time Display")||this.AddProperty("Enable 5Day Time Display","Off-interval"),this.Get("Enable Daily Time Display")||this.AddProperty("Enable Daily Time Display","Off-interval"),this.Get("SelectedDate")||this.AddProperty("SelectedDate",new Date)}function s(){var e=this.Get("Owner");this.Get("Is Multiple BC Calendar")==="Y"?this.AddProperty("Owner",""):e||this.AddProperty("Owner",this.Get("User Login Name"));var t=this.Get("Update List"),n=!1,r=!1;if(t==="")e===this.Get("User Login Name")&&(n=this.Get("No Insert")!=="Y",r=this.Get("No Update")!=="Y");else if(typeof t!="undefined"){var i=CCFMiscUtil_CreatePropSet();i.DecodeFromString(t),i.GetProperty(this.Get("Owner"))&&(n=this.Get("No Insert")!=="Y",r=this.Get("No Update")!=="Y")}this.AddProperty("CanInsert",n),this.AddProperty("CanUpdate",r)}function o(t){var n=t.GetProperty(e.get("SWE_PROP_NOTI_TYPE"));if(t.GetProperty(e.get("SWE_PROP_NOTI_TYPE"))==="HICalendarData"){var r=t.GetProperty(e.get("SWE_PROP_ARGS_ARRAY")),i=[];r&&CCFMiscUtil_StringToArray(r,i);var s=CCFMiscUtil_CreatePropSet();for(var o=0;o<i.length;o++)s.SetProperty(o.toString(),i[o]);this.ExecuteMethod("ParseEventInfoOUI",s)}}function u(e,t,n){var r=n.GetProperty("Status");r!=="Error"&&this.Get("UseCalendarPane")==="Y"&&this.SetProperty("NeedRefetchEvents",!0)}function a(e){var t=CCFMiscUtil_CreatePropSet();t.SetProperty("Data",e);var n=A(this.Get("CurViewShowDate"),!0);return t.SetProperty("CurrentDate",n),t.SetProperty("SelectedDate",this.Get("SelectedDate").getTime()),t}function f(e,t,n,r){var i=CCFMiscUtil_CreatePropSet();SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0});var s={async:!0,cb:function(){SiebelApp.S_App.uiStatus.Free()}};if(r&&!r.IsEmpty())i.SetProperty("Optional",r.EncodeAsString()),N.call(this)?this.ExecuteMethod("InvokeMethod","NewRecord",i,s):C.call(this)&&(i.SetProperty("MethodName","NewRecord"),this.ExecuteMethod("InvokeMethod","CalDragdropDM",i,s),SiebelApp.S_App.uiStatus.Free());else{var o=t+"|"+n;i.SetProperty("StartDate",e),i.SetProperty("Data",o),N.call(this)?this.ExecuteMethod("InvokeMethod","DragAndDrop",i,s):C.call(this)&&(i.SetProperty("MethodName","DragAndDrop"),$.callback(this,function(e){this.ExecuteMethod("InvokeMethod","CalDragdropDM",i),$.callback(this,function(e){this.ExecuteMethod("InvokeMethod","GetCalendarDataDM",this.ExecuteMethod("PopulatePropSet")),SiebelApp.S_App.uiStatus.Free()})}))}}function l(e,t,n,r,i){var s=A(e,!1),o=A(t,!1),u=CCFMiscUtil_CreatePropSet();u.SetProperty("NewStartDate",s),u.SetProperty("RowId",n),i==="eventResize"&&u.SetProperty("NewEndDate",o),r&&u.SetProperty("Optional",r.EncodeAsString()),N.call(this)?this.ExecuteMethod("InvokeMethod","UpdateRecord",u):C.call(this)&&(i!=="eventResize"&&o&&u.SetProperty("NewEndDate",o),this.ExecuteMethod("InvokeMethod","CalUpdateEventDM",u),$.callback(this,function(e){SiebelApp.S_App.uiStatus.Free(),this.ExecuteMethod("InvokeMethod","GetCalendarDataDM",this.ExecuteMethod("PopulatePropSet"))}))}function c(e,t,n,r){var i=CCFMiscUtil_CreatePropSet();SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0});var s={async:!0,cb:function(){SiebelApp.S_App.uiStatus.Free()}},o=new Date(t),u=new Date(n);i.SetProperty("StartDate",A(o,!1)),i.SetProperty("EndDate",A(u,!1)),i.SetProperty("CurrentDate",A(o,!1));if(e.length>0){var a=this.Get("DescriptionFieldLength");e=e.substring(0,a),i.SetProperty("Description",e)}else this.Get("UseCalendarPane")==="Y"&&!this.Get("OpenCalPane")&&this.SetProperty("OpenCalPane",!0);N.call(this)?this.ExecuteMethod("InvokeMethod","NewRecord",i,s):C.call(this)&&(i.SetProperty("MethodName","NewMeeting"),this.ExecuteMethod("InvokeMethod","CalNewEventDM",i),$.callback(this,function(e){SiebelApp.S_App.uiStatus.Free(),this.ExecuteMethod("InvokeMethod","GetCalendarDataDM",this.ExecuteMethod("PopulatePropSet"))}))}function h(e){var t;if(e==="Contact")t="NewProfCall";else if(e==="Account")t="NewAcctCall";else{if(e!=="Meeting")return;t="NewMeeting"}SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0});var n={async:!0,cb:function(){SiebelApp.S_App.uiStatus.Free()}},r=CCFMiscUtil_CreatePropSet(),i=this.Get("SelectedDate");r.SetProperty("StartDate",A(i,!1)),r.SetProperty("CurrentDateTime",A(new Date,!1)),N.call(this)?this.ExecuteMethod("InvokeMethod",t,r,n):C.call(this)&&(r.SetProperty("MethodName",t),this.ExecuteMethod("InvokeMethod","CalNewLSCallDM",r),SiebelApp.S_App.uiStatus.Free())}function p(e){if(!e)return;var t=CCFMiscUtil_CreatePropSet();t=a.call(this,e);if(N.call(this)){SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0});var n={async:!0,cb:function(){SiebelApp.S_App.uiStatus.Free()}};this.ExecuteMethod("InvokeMethod","DrillDown",t,n)}else C.call(this)&&this.ExecuteMethod("InvokeMethod","CalDrillDownDM",t)}function d(e){if(!e)return;var t=CCFMiscUtil_CreatePropSet();t.SetProperty("Data",e),SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0});var n={async:!0,cb:function(){SiebelApp.S_App.uiStatus.Free()}};this.ExecuteMethod("InvokeMethod","CalSelection",t,n),this.Get("UseCalendarPane")==="Y"&&!this.Get("OpenCalPane")&&this.SetProperty("OpenCalPane",!0)}function v(){var e=this.Get("CurViewStartDate"),t=A(e,!0),n=this.Get("CurViewEndDate"),r=A(n,!0),i=this.Get("CurViewShowDate"),s=A(i,!0),o=CCFMiscUtil_CreatePropSet();return o.SetProperty("ViewMode"
,this.Get("ViewMode")),o.SetProperty("ClippingCount","4"),o.SetProperty("SelectedDate",this.Get("SelectedDate").getTime()),o.SetProperty("StartDate",t),o.SetProperty("EndDate",r),o.SetProperty("CurrentDate",s),o.SetProperty("StretchCell",this.Get("StretchCell")),o.SetProperty("SelectedTimeZone",this.Get("Timezone")),o.SetProperty("SelectedUser",this.Get("Owner")),o}function m(e){var t=CCFMiscUtil_CreatePropSet(),n=CCFMiscUtil_CreatePropSet(),r=CCFMiscUtil_CreatePropSet(),i=t.DecodeFromString(e.GetProperty("0"));if(i===!1||t.type!=="OUICalendarData")return;N.call(this)?n=t:C.call(this)&&(n=L.call(this,t)),n.PropertyExists("ReturnStartDate")&&this.AddProperty("ReturnStartDate",n.GetProperty("ReturnStartDate")),n.PropertyExists("ViewMode")&&this.AddProperty("ViewMode",n.GetProperty("ViewMode")),n.PropertyExists("DescriptionFieldLength")&&this.AddProperty("DescriptionFieldLength",n.GetProperty("DescriptionFieldLength")),this.AddProperty("Timezone",n.GetProperty("SelectedTimeZone")),this.AddProperty("Owner",n.GetProperty("SelectedUser")),this.AddProperty("SelectedDate",new Date(parseInt(n.GetProperty("SelectedDate"),10)));var s=[];for(var o=0;o<n.GetChildCount("CalendarEvent");o++){r=n.GetChild(o);if(r.type!=="CalendarEvent")continue;var u=[],a=r.EnumProperties(!0);do u[a]=r.GetProperty(a);while(a=r.EnumProperties(!1));u.DisplayField=g.call(this,r),s.push(u)}this.AddProperty("EventInfo",s)}function g(e){var t=CCFMiscUtil_CreatePropSet(),n=[],r=e.GetChildCount("DisplayField");for(var i=0;i<r;i++){t=e.GetChild(i);if(t.type!=="DisplayField")continue;var s=[];s.Name=t.value,s.Sequence=t.GetProperty("Sequence"),s.FieldValue=t.GetProperty("FieldValue"),s.FieldColor=t.GetProperty("FieldColor"),s.ToolTip=t.GetProperty("ToolTip"),s.IconFile=t.GetProperty("IconFile");var o=t.GetProperty("DrillDown");o!==""&&(o=o.replace(/%2f/g,"/"),o=o.replace(/%23/g,"#")),s.DrillDown=o,n.push(s)}return n}function y(){var e={},t=parseInt(this.Get("Preferred Timeslot Interval"),10)||15,n=E.call(this,this.Get("Preferred Business Day Start Time")),r=E.call(this,this.Get("Preferred Business Day End Time"));return e.slotsPerHr=Math.floor(60/t),e.totalSlots=e.slotsPerHr*24,e.startWorkHrSlot=n*e.slotsPerHr,e.startWorkHrSlot=e.startWorkHrSlot<0?0:e.startWorkHrSlot,e.endWorkHrSlot=r*e.slotsPerHr,e.endWorkHrSlot=e.endWorkHrSlot>e.totalSlots?e.totalSlots:e.endWorkHrSlot,e}function b(e){var t={},n={},r,i=0,s,o=this.ExecuteMethod("HourDecimal",this.Get("Preferred Business Day Start Time")),u=this.ExecuteMethod("HourDecimal",this.Get("Preferred Business Day End Time"));e.sort(function(e,t){e.start-t.start});for(var a=0;a<e.length;a++){var f=new Date(e[a].start),l=new Date(e[a].end),c=f.toDateString(),h=f.getTime(),p=l.getTime();f.toDateString()===l.toDateString()&&f.getHours()+f.getMinutes()/60<=o&&l.getHours()+l.getMinutes()/60>=u&&typeof n[f.toDateString()]=="undefined"&&(n[f.toDateString()]=e[a]);if(f.toDateString()!==l.toDateString()){var d=new Date(f);while(d<l)(d.toDateString()===f.toDateString()&&d.getHours()+d.getMinutes()/60<=o||d.toDateString()!==f.toDateString()&&d.toDateString()!==l.toDateString()||d.toDateString()===l.toDateString()&&d.getHours()+d.getMinutes()/60>=u)&&typeof n[d.toDateString()]=="undefined"&&(n[d.toDateString()]=e[a]),d.setDate(d.getDate()+1)}c!==r&&(t[r]=s,r=c,s=0,i=0),f.getHours()<o&&h>i?h=h-f.getHours()*60*60*1e3-f.getMinutes()*60*1e3-f.getSeconds()*1e3+o*60*60*1e3:h<=i?h=i:f.getHours()>u&&(h=h-f.getHours()*60*60*1e3-f.getMinutes()*60*1e3-f.getSeconds()*1e3+o*60*60*1e3+864e5);if(p<i)continue;l.getHours()>u?i=p-l.getHours()*60*60*1e3-l.getMinutes()*60*1e3-l.getSeconds()*1e3+u*60*60*1e3:l.getHours()<o?i=p-l.getHours()*60*60*1e3-l.getMinutes()*60*1e3-l.getSeconds()*1e3+u*60*60*1e3-864e5:i=p,i-h>0&&(s+=i-h)}return t[r]=s,[t,n]}function w(e,t){var n,r,i,s,o,u,a=this.Get("EventInfo");if(a)for(var f=0;f<a.length;f++){i=a[f],s=new Date(i.Planned),o=new Date(i.PlannedCompletion),u=!S.call(this,s,o);if(!n||s.getHours()<n.getHours()||s.getHours()===n.getHours()&&s.getMinutes()<n.getMinutes())n=s;if(!r||o.getHours()>r.getHours()||o.getHours()===r.getHours()&&o.getMinutes()>r.getMinutes())r=o;u&&(s<e?(n.setHours(0),n.setMinutes(0)):(r.setHours(23),r.setMinutes(59)),o>=t?(r.setHours(23),r.setMinutes(59)):(n.setHours(0),n.setMinutes(0)))}this.AddProperty("EarliestEvent",n),this.AddProperty("LatestEvent",r)}function E(e){var t=e.split(SiebelApp.S_App.LocaleObject.GetDispTimeSeparator());if(t.length<2)return parseFloat(e);var n=parseInt(t[0],10),r=parseInt(t[1],10)/60;return n+r}function S(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function x(e,t){var n=SiebelJS.Dependency("SiebelApp.Utils");if(n.IsEmpty(e)||n.IsEmpty(t))return!1;var r=this.Get("ViewMode"),i=this.Get("Enable Monthly Time Display"),s=this.Get("Enable 5Day Time Display"),o=this.Get("Enable Daily Time Display");if(r==="2"&&i==="Off-interval"||r==="1"&&s==="Off-interval"||r==="0"&&o==="Off-interval"){if(typeof e=="undefined"||typeof t=="undefined")return!1;var u=parseInt(this.Get("Preferred Timeslot Interval"),10)||15;return e.getMinutes()%u===0&&t.getMinutes()%u===0?!1:!0}if(r==="2"&&i==="Always"||r==="1"&&s==="Always"||r==="0"&&o==="Always")return!0;if(r==="2"&&i==="Never"||r==="1"&&s==="Never"||r==="0"&&o==="Never")return!1}function T(e,t){var n={hour:"2-digit",minute:"2-digit"};return this.Get("24 Hour Flag")==="Y"?(n.hour12=!1,n.meridiem=!1):(n.hour12=!0,n.meridiem="short"),n}function N(){return!IsOfflineModeEnabled()||!SiebelApp.S_App.GetOfflineMode()}function C(){var e=SiebelApp.S_App.GetName();return!0}function k(){if(N.call(this)){SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0});var e={async:!this.Get("FirstLoad"),cb:function(){SiebelApp.S_App.uiStatus.Free()}};this.ExecuteMethod("InvokeMethod","GetCalendarDataOUI",this.ExecuteMethod("PopulatePropSet"),e),!this.Get("FirstLoad")&&this.Get("UseCalendarPane")==="Y"&&this.Get("OpenCalPane")&&this.SetProperty
("CloseCalPane",!0)}else C.call(this)&&this.ExecuteMethod("InvokeMethod","GetCalendarDataDM",this.ExecuteMethod("PopulatePropSet"))}function L(e){var t=CCFMiscUtil_CreatePropSet(),n=CCFMiscUtil_CreatePropSet(),r=CCFMiscUtil_CreatePropSet();n=this.ExecuteMethod("PopulatePropSet"),t.SetType("OUICalendarData"),t.SetProperty("ViewMode",n.GetProperty("ViewMode")),t.SetProperty("StartDate",n.GetProperty("StartDate")),t.SetProperty("EndDate",n.GetProperty("EndDate")),t.SetProperty("SelectedDate",n.GetProperty("SelectedDate")),t.SetProperty("SelectedUser",n.GetProperty("SelectedUser")),t.SetProperty("SelectedTimeZone",n.GetProperty("SelectedTimeZone")),t.SetProperty("SelectedFilter","");var i=e.GetChildCount();for(var s=0;s<i;s++){var o=CCFMiscUtil_CreatePropSet(),u=CCFMiscUtil_CreatePropSet();r=e.GetChild(s),o.SetType("CalendarEvent"),o.SetProperty("CalendarId",r.GetProperty("Id")),o.SetProperty("Buscomp",r.GetProperty("Buscomp")),o.SetProperty("Planned",r.GetProperty("Planned")),o.SetProperty("PlannedCompletion",r.GetProperty("PlannedCompletion")),o.SetProperty("AllDayFlag",r.GetProperty("AllDayFlag")),o.SetProperty("AllowAllDay",r.GetProperty("AllowAllDay"));var a=r.GetProperty("FIELD_LIST_DM").split(","),f=0,l=a.length;while(f<l){var c=a[f].trim();o.PropertyExists(c)||o.SetProperty(c,r.GetProperty(c)),f++}r.PropertyExists("ReadOnly")?o.SetProperty("ReadOnly",r.GetProperty("ReadOnly")):o.SetProperty("ReadOnly","N");var h=!1,p=r.GetProperty("Repeating Type");typeof p=="undefined"||p==="Non-Repeating"?o.SetProperty("Repeating","N"):(o.SetProperty("Repeating","Y"),o.SetProperty("ReadOnly","Y"),h=!0);var d=r.GetProperty("Status");o.SetProperty("Status",d),o.SetProperty("EventLegend",d),o.SetProperty("EventStyle",SiebelApp.S_App.Model.GetLovValName(d,"EVENT_STATUS")),u.SetType("DisplayField"),u.SetValue("Description");var v="%23",m=r.GetProperty("DD_FIELD_VAL_DM"),g=r.GetProperty("Buscomp"),y=r.GetProperty("TOOL_DESC_DM");u.SetProperty("FieldValue",r.GetProperty(y));var b="";typeof m!="undefined"&&m!==""&&(b="4"+v,b+=m.length.toString()+v+m,b+=g.length.toString()+v+g,b+=y.length.toString()+v+y,b+="1"+v+"N");var w="<br />",E="";if(r.PropertyExists("TOOL_TIP_FIELDS_DM")){var S=r.GetProperty("TOOL_TIP_FIELDS_DM").split(","),x=0,T=S.length;while(x<T){var N=S[x].trim();N==="Calc Act Cont Name"?E+="Name: "+r.GetProperty(N)+w:E+=N+": "+r.GetProperty(N)+w,x++}}u.SetProperty("DrillDown",b),u.SetProperty("IconFile",""),u.SetProperty("ToolTip",E),u.SetProperty("FieldColor",""),u.SetProperty("Sequence","1"),o.AddChild(u);var C=r.GetProperty("ICON_FIELD_DM");if(typeof C!="undefined"&&C!==""){var k=CCFMiscUtil_CreatePropSet();k.SetType("DisplayField"),k.SetValue("Type"),k.SetProperty("FieldValue",""),k.SetProperty("ToolTip",""),k.SetProperty("DrillDown",""),k.SetProperty("IconFile",C),o.AddChild(k)}if(h){var L=r.GetProperty("REPEAT_ICON_DM"),A=CCFMiscUtil_CreatePropSet();A.SetType("DisplayField"),A.SetValue("Repeat"),A.SetProperty("FieldValue",""),A.SetProperty("ToolTip","Repeat"),A.SetProperty("DrillDown",""),A.SetProperty("IconFile",L),o.AddChild(A)}t.AddChild(o)}return t}function A(e,t){var n=("0"+(e.getMonth()+1)).slice(-2)+"/"+("0"+e.getDate()).slice(-2)+"/"+e.getFullYear();return t||(n+=" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)),n}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=SiebelJS.Dependency("SiebelApp.Utils");return SiebelJS.Extend(n,SiebelAppFacade.PresentationModel),n.prototype.Init=function(){SiebelAppFacade.CalPresentationModel.superclass.Init.call(this),this.AddMethod("PopulatePropSet",v),this.AddMethod("UpdateUserPermission",s),this.AddMethod("ParseEventInfoOUI",m),this.AddMethod("GetSlotInfo",y),this.AddMethod("CalcEarliestAndLatestEventsInRange",w),this.AddMethod("GetCalendarData",k),this.AddMethod("IsConnected",N),this.AddMethod("CalcBusyHrsAndAllDay",b),this.AddMethod("HourDecimal",E),this.AddMethod("IsSameDay",S),this.AddMethod("IsTimeStampRequired",x),this.AddMethod("GetTimeStampFormat",T),this.AddMethod("ConvertDateToString",A),this.AttachEventHandler(e.get("PHYEVENT_DRILLDOWN_LIST"),function(e){p.call(this,e)}),this.AttachEventHandler("eventSelection",function(e){d.call(this,e)}),this.AttachEventHandler("eventResize",function(e,t,n,r){l.call(this,e,t,n,r,"eventResize")}),this.AttachEventHandler("eventDrop",function(e,t,n,r){l.call(this,e,t,n,r,"eventDrop")}),this.AttachEventHandler("externalDrop",function(e,t,n,r){f.call(this,e,t,n,r)}),this.AttachEventHandler("newEvent",function(e,t,n,r){c.call(this,e,t,n,r)}),this.AttachEventHandler("newLSCall",function(e){h.call(this,e)}),this.AttachNotificationHandler(e.get("SWE_PROP_BC_NOTI_GENERIC"),function(e){o.call(this,e)}),this.AttachNotificationHandler(e.get("SWE_PROP_BC_NOTI_EXECUTE"),function(e){!this.Get("FirstLoad")&&this.Get("UseCalendarPane")==="Y"&&this.Get("OpenCalPane")&&this.SetProperty("CloseCalPane",!0)}),this.AttachNotificationHandler(e.get("SWE_PROP_BC_NOTI_NEW_DATA_WS"),function(e){if(this.Get("UseCalendarPane")==="Y"){var n=e.GetProperty("f");!t.IsEmpty(n)&&n==="Repeating Type LIC"&&this.SetProperty("RefreshRepeatLayout",!0)}}),this.AttachNotificationHandler(e.get("SWE_PROP_BC_NOTI_NEW_DATA"),function(e){this.Get("QuickAdd")&&(this.ExecuteMethod("GetCalendarData"),this.SetProperty("QuickAdd",!1))}),this.AttachPostProxyExecuteBinding("ModifyInstance",u),this.AttachPostProxyExecuteBinding("ModifyAll",u),this.AttachPostProxyExecuteBinding("DeleteInstance",u),this.AttachPostProxyExecuteBinding("DeleteAll",u),this.AttachPostProxyExecuteBinding("Cancel",u)},n.prototype.Setup=function(t){SiebelAppFacade.CalPresentationModel.superclass.Setup.call(this,t);var n=t.EnumChildren(!0);do if(n.GetType()===e.get("SWE_PST_CNTRL_LIST")){var i=n.EnumChildren(!0);do if(i.GetType()===e.get("SWE_PST_CUSTOM_CTRL")){r.call(this,i.GetChild(0));break}while(i=n.EnumChildren(!1));break}while(n=t.EnumChildren(!1));var o=[this.Get("UISTR January"),this.Get("UISTR February"),this.Get("UISTR March"
),this.Get("UISTR April"),this.Get("UISTR May"),this.Get("UISTR June"),this.Get("UISTR July"),this.Get("UISTR August"),this.Get("UISTR September"),this.Get("UISTR October"),this.Get("UISTR November"),this.Get("UISTR December")],u=[this.Get("UISTR Jan"),this.Get("UISTR Feb"),this.Get("UISTR Mar"),this.Get("UISTR Apr"),this.Get("UISTR May"),this.Get("UISTR Jun"),this.Get("UISTR Jul"),this.Get("UISTR Aug"),this.Get("UISTR Sep"),this.Get("UISTR Oct"),this.Get("UISTR Nov"),this.Get("UISTR Dec")],a=[this.Get("UISTR Sunday"),this.Get("UISTR Monday"),this.Get("UISTR Tuesday"),this.Get("UISTR Wednesday"),this.Get("UISTR Thursday"),this.Get("UISTR Friday"),this.Get("UISTR Saturday")],f=[this.Get("UISTR Su"),this.Get("UISTR Mo"),this.Get("UISTR Tu"),this.Get("UISTR We"),this.Get("UISTR Th"),this.Get("UISTR Fr"),this.Get("UISTR Sa")];this.AddProperty("CurViewStartDate",new Date),this.AddProperty("CurViewEndDate",new Date),this.AddProperty("CurViewShowDate",new Date),this.AddProperty("EventInfo",[]),this.AddProperty("Timezone",this.Get("Default Timezone")),this.AddProperty("MonthStringArray",o),this.AddProperty("MonthShortStringArray",u),this.AddProperty("WeekDayStringArray",a),this.AddProperty("WeekDayShortStringArray",f),this.AddProperty("Owner",this.Get("Default User")),this.AddProperty("FirstLoad",!0),this.AddProperty("ForceWindowResize",!1),s.call(this),this.AddProperty("OpenCalPane",!1),this.AddProperty("NeedRefetchEvents",!1),this.AddProperty("QuickAdd",!1),this.AddProperty("RefreshRepeatLayout",!1),this.AddProperty("CloseCalPane",!1),this.AddProperty("SelectedEvent",{}),this.AddProperty("EventClickInProgress",!1),this.AddProperty("UseClientCalendarData",!1);var l=this.Get("UseCalendarPane");(l===undefined||l===null)&&this.AddProperty("UseCalendarPane","N")},n}(),"SiebelAppFacade.CalPresentationModel"}));

/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.WTObjectExplorer=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.WTObjectExplorer"),define("siebel/wtobjectexplorer",["siebel/basephyrenderer","3rdParty/fancytree/dist/jquery.fancytree.min.js","3rdParty/fancytree-ext.js"],function(){return SiebelAppFacade.WTObjectExplorer=function(){function L(){SiebelAppFacade.WTObjectExplorer.superclass.constructor.apply(this,arguments)}function A(e,t){return e.localeCompare(t)}function O(){return E.length||(M.call(this,b,E),E=E.sort(function(e,t){var n=e.title.toLowerCase(),r=t.title.toLowerCase();return n<r?-1:n>r?1:0})),E}function M(e,t){var n=e.length,r,i;for(var s=0;s<n;s++)i=e[s],r=i.children,r&&r.length&&M.call(this,r,t),i.title!==S&&t.push({title:i.title,folder:!1,fallBackView:i.fallBackView||"",topLevel:i.topLevel||!1,fv:i.fv,tv:i.tv})}function _(){return this.GetPM().Get("GetType")===t.get("SWE_PROP_NC_ID_SCREEN_CONTROL")}function D(e,t){var n="siebui-nav-tree",r=$("div#"+e+"."+n);if(t&&r.length===0){r=$('div[id="'+e+'"]');if(r.length){r=r.not(function(){return $(this).hasClass("siebui-nav-hb")}),r=r.eq(0);var i=(r.attr("class")||"").split(" ");for(var s=0,o=i.length;s<o;s++)i[s].indexOf("siebui-nav-")===0&&i[s]!==n&&r.removeClass(i[s]);r.addClass(n+" siebui-wt-objectexplorer")}}else r.length&&(r=r.eq(0));return r}function P(){$("#objectTree"+x+"Link").addClass("active"),$("#objectTree"+(x==="Type"?"Flat":"Type")+"Link").removeClass("active")}function H(e){var t=this.GetPM();if(t.Get("GetDataReload")===!0||e){var r=t.Get("GetSelectedTabLinkInfo")&&t.Get("GetSelectedLinkKey")?t.Get("GetSelectedTabLinkInfo")[t.Get("GetSelectedLinkKey")].viewName:SiebelApp.S_App.GetActiveView()?SiebelApp.S_App.GetActiveView().GetName():"";if(r&&b){var i={};x==="Flat"?i.children=O.call(this):i=b[0];var s=B.call(this,i,x==="Flat"?h:p,r),o;s?(o=s.replace(s.substring(0,s.lastIndexOf("|")+1),""),N!==o&&(N=o,j.call(this))):(s=B.call(this,w[0],x==="Flat"?h:p,r),s?(s=s.replace("Siebel Object|",""),o=s.replace(s.substring(0,s.lastIndexOf("|")+1),""),o!==N&&n.Confirm(l.replace("%1",o))&&(N=o,T=s+T,W.call(this,!0))):j.call(this,!1))}}}function B(e,t,n){var r="";if(e[t]===n)r=e.title;else{var i=e.children||[],s=null;for(var o=0,u=i.length;o<u;o++){s=B.call(this,i[o],t,n);if(s){r=e.title+"|"+s;break}}}return r}function j(e){e=e===!1?!1:!0;if(N){var t=$(".siebui-wt-objexp-tree").find("span.fancytree-title:contains('"+N+"')").filter(function(){return $(this).text()===N});if(t.length){var n=$.ui.fancytree.getNode(t[0]);n&&!n.isActive()&&n.setActive(),e||(n.setActive(!1),N="")}t=null}}function F(e){var r=e.GetProperty(t.get("SWE_WEBTOOLS_LANGUAGE_LIST")),i=e.GetProperty(t.get("SWE_WEBTOOLS_ACTIVE_LANGUAGE")),s=e.GetProperty(t.get("SWE_WEBTOOLS_LANGUAGE_CODE")),o=[],u=[],a,l,c="",h="";c='<div class="siebui-banner-btn siebui-wt-lang"><select id="wtlangctrl" class="siebui-appmenu-item ui-menubar-item">',CCFMiscUtil_StringToArray(s,o),CCFMiscUtil_StringToArray(r,u),l=u.length;for(a=0;a<l;a++)h=o[a],h+=" (",h+=u[a],h+=")",c+='<option value = "'+o[a]+'" '+(i==o[a]?"selected":"")+">"+h+" </option> <br>";c+="</select> </div>",$(".siebui-btn-grp-banner").length?$("#_sweappmenu").find(".siebui-btn-grp-banner").eq(0).prepend(c):$("#_sweappmenu").children("div").eq(0).append(c),$("#wtlangctrl").on("change",{ctx:this},function(e,r){var i=e.target.value,s;n.Alert(f),s=SiebelApp.S_App.GetService(t.get("SWE_OUI_CLIENT_PREF_SERVICE"));if(!n.IsEmpty(s)){var o=SiebelApp.S_App.NewPropertySet();o.SetProperty(t.get("SWE_WEBTOOLS_LANGUAGES"),i),s.InvokeMethod("SetWebToolsLanguage",o)}})}function I(e,t,n){var r=SiebelApp.S_App.GetService("Web Engine Client Preferences");if(r){var i=this,s=CCFMiscUtil_CreatePropSet(),o={};o.async=!0,o.scope=this,o.npr=!0,o.dic=!0,o.cb=function(){var t=arguments[2].GetChildByType("ResultSet");t=t?t.GetChild(0):t,t&&(t.SetProperty("bEnableOption",n),q.call(i,e,t,!0))},s.SetProperty("oetl",t),r.InvokeMethod("SetObjectExplorer",s,o)}}function q(e,t,r){T="";var i=n.IsTrue(t.GetProperty("bEnableOption"))||!1,s=[],o=[],u,a={title:S,folder:!0,expanded:!0},f=$.extend({},a),l=$.extend({},a);u=U.call(this,t),u[0].length>0&&(l.children=u[0],l.children&&(l.children.forEach(function(e,t,n){n[t].topLevel=!0}),l.children.sort(function(e,t){return A.call(this,e.title,t.title)}))),s.push(l),E=[],b=s,u[1].length>0&&(f.children=u[1],f.children&&f.children.sort(function(e,t){return A.call(this,e.title,t.title)})),o.push(f),w=o,r?this.Refresh(i):G.call(this,e.children(".siebui-wt-objexp-tree"),i)}function R(e){var t=SiebelApp.S_App.GetService("Web Engine Client Preferences");if(t){var n=this,r={};r.async=!0,r.scope=this,r.npr=!0,r.dic=!0,r.async=!0,r.cb=function(){q.call(n,e,arguments[2].GetChildByType("ResultSet").GetChild(0),!1)};var i=CCFMiscUtil_CreatePropSet();t.InvokeMethod("GetObjectExplorer",i,r)}}function U(e){var t=[[],[]],r,i,s,o,u=e.GetChildCount(),a,f;for(var l=0;l<u;l++){s=e.GetChild(l),a=s.GetProperty("name");if(a&&a==="Web Template File")continue;o=a&&a.indexOf("Manifest")>=0;if(n.IsTrue(s.GetProperty("oevi"))||o){r={title:a,fv:s.GetProperty(h),tv:s.GetProperty(p),folder:!0},T=T+"|"+a;var c=$.extend({},r);f=$.extend({selected:!0},r),s.GetChildCount()>0&&(i=U.call(this,s),i[0].length>0&&(c.children=i[0].slice(0)),i[1].length>0&&(f.children=i[1].slice(0))),c.children&&(c.children=c.children.sort(function(e,t){return A.call(this,e.title,t.title)})),f.children&&(f.children=f.children.sort(function(e,t){return A.call(this,e.title,t.title)})),t[0].push(c),o||t[1].push(f)}else r={title:a,fv:s.GetProperty(h),tv:s.GetProperty(p),folder:!0},f=$.extend({},r),s.GetChildCount()>0&&(i=U.call(this,s),i[1].length>0&&(f.children=i[1].slice(0))),f.children&&f.children.sort(function(e,t){return A.call(this,e.title,t.title)}),t[1].push(f)}return t}function z(){C=T,T="",W.call(this,!0,!0)}function W(e,t){var r=this.GetPM(),i=D.call(this,r.Get("GetType"),!0).children(".siebui-wt-objexp-tree"),s="",o=!0;if(e)s=T;else{var u=$.ui.fancytree.getTree(i).getSelectedNodes();u.forEach
(function(e){e.title!==S&&(s+=e.title+"|")});var a=i.find(".fancytree-partsel");for(var f=0,l=a.length;f<l;f++){var h=a.eq(f).find(".fancytree-title").text();h!==S&&s.indexOf(h+"|")<0&&(s+=h+"|")}s||(o=!1,n.Alert(c))}return o&&I.call(this,i,s,t),o}function X(e,t){t=t||!1;var n=this.GetPM(),r,i,s;r=D.call(this,n.Get("GetType"),!0).children(".siebui-wt-objexp-tree"),i=r.parent(),r.empty(),s=r,r.remove(),i.append(s),G.call(this,r,t),t||P.call(this,e)}function V(e){var r=null;return e?r=function(e,t){var n=!0,r=t.originalEvent.target?$(t.originalEvent.target).attr("class").indexOf("fancytree-title")>=0:!1,i=t.node;i.isActive()||i.setActive();if(r||i.title===S)n=!1;return n}:(r=function(e,r){var i=!0;if(r.node.title!==S){var s=r.node,o=r.originalEvent.target?$(r.originalEvent.target).attr("class").indexOf("fancytree-title")>=0:!1,u;s.data&&(u=x==="Flat"?s.data.fv:s.data.tv);if(u){if(!s.isActive()){var a=SiebelApp.S_App.GetActiveView()?SiebelApp.S_App.GetActiveView().GetName():"";if(a!==u){var f=CCFMiscUtil_CreatePropSet();f.SetProperty(t.get("SWE_ARG_KEEP_CONTEXT"),"1"),SiebelApp.S_App.GotoView(u,null,n.EncodeToQueryString(f))}}i=!o}}return i},r.bind(this)),r}function J(e){var t=null,n=this;return e?t=function(e,t){t.tree.visit(function(e){if(e.title===S)return $(e.span.children).removeClass("fancytree-checkbox"),!1})}:t=function(){j.call(n)},t}function K(e,t){t.node.visit(function(e){e.isExpanded()&&e.setExpanded(!1)})}function Q(e,t){var n=t.node,r=n.title+(n.isExpanded()?"-Collapse":"-Expand"),i=n.data.fv?x==="Flat"?n.data.fv:n.data.tv:r;$(n.span).find(".fancytree-title").attr({OT:g,RN:i,UN:n.title}).siblings(".fancytree-expander").attr({OT:"Tree",RN:n.isExpanded()?"Collapse":"Expand",id:r,"data-rowid":r}).siblings(".fancytree-checkbox").attr({OT:y,RN:t.node.title+"-Select","data-ua":!0})}function G(e,t){var n,r,i=this.GetPM().Get("placeholder").indexOf("_div")>0?!1:!0;x==="Flat"?r=O.call(this):(r=b,t&&(r=w)),e.length===1&&(n={autoCollapse:!1,imagePath:" ",checkbox:t?!0:!1,selectMode:3,_classNames:{nodeIcon:null},clickFolderMode:3,minExpandLevel:1,persist:!1,init:J(t),click:V(t),collapse:K},k&&(n.renderNode=Q),i&&$.extend(n,{source:r,expanded:!0}),e.fancytree(n))}var e=SiebelJS.Dependency("SiebelApp.S_App.LocaleObject"),t=SiebelJS.Dependency("SiebelApp.Constants"),n=SiebelJS.Dependency("SiebelApp.Utils"),r=e.GetLocalString("WT_OBJECT_TREE_FLAT"),i=e.GetLocalString("WT_OBJECT_TREE_TYPE"),s=e.GetLocalString("WT_OBJECT_TREE_SAVE"),o=e.GetLocalString("WT_OBJECT_TREE_EDIT"),u=e.GetLocalString("WT_OBJECT_TREE_UNDO"),a=e.GetLocalString("WT_OBJECT_TREE_DEFAULT"),f=e.GetLocalString("WT_LANGUAGE_CHANGE_ALERT"),l=e.GetLocalString("WT_OBJECT_TREE_NEW_OBJ_MSG"),c=e.GetLocalString("NO_OBJ_ERR_MSG"),h=t.get("SWE_WEBTOOLS_OBJECT_EXPLORER_FLAT_VIEW"),p=t.get("SWE_WEBTOOLS_OBJECT_EXPLORER_TYPE_VIEW"),d=t.get("SWE_PROP_AUTOM_OT"),v=t.get("SWE_PROP_AUTOM_RN"),m=t.get("SWE_PROP_AUTOM_UN"),g="Link",y="Link",b,w,E=[],S="Siebel Object",x="Type",T="",N="",C="",k=!1;return SiebelJS.Extend(L,SiebelAppFacade.BasePR),L.prototype.Init=function(){_.call(this)&&this.AttachPMBinding("Refresh",H),SiebelAppFacade.WTObjectExplorer.superclass.Init.apply(this,arguments)},L.prototype.ShowUI=function(){SiebelAppFacade.WTObjectExplorer.superclass.ShowUI.call(this);if(_.call(this)){k=n.IsTrue(SiebelApp.S_App.IsAutoOn());var e=this.GetPM(),t=e.Get("GetType"),s=D.call(this,t,!0),f=$('<div class="siebui-wt-objexp-panel"><ul class="siebui-wt-objexp-tab"><li><a id="objectTreeTypeLink" href="javascript:void(0)" '+(k?d+'="Button" '+v+'="ObjectExplorer-Type" ':"")+'class="active">'+i+"</a></li>"+'<li><a id="objectTreeFlatLink" href="javascript:void(0)" '+(k?d+'="Button" '+v+'="ObjectExplorer-Flat" ':"")+">"+r+"</a></li>"+"</ul>"+'<a id="objectTreeEditSaveLink" href="javascript:void(0)" '+(k?d+'="Button" '+v+'="ObjectExplorer-Edit" ':"")+' class="siebui-wt-objexp-edit" title="'+o+'"></a>'+'<a id="objectTreeCancelLink" href="javascript:void(0)" '+(k?d+'="Button" '+v+'="ObjectExplorer-Undo" ':"")+' class="siebui-wt-objexp-undo forcehide" title="'+u+'""></a>'+'<a id="objectTreeDefaultLink" href="javascript:void(0)" '+(k?d+'="Button" '+v+'="ObjectExplorer-Default" ':"")+' class="siebui-wt-objexp-default forcehide" title="'+a+'""></a>'+"</div>"+'<div class="siebui-wt-objexp-tree" ></div>');k&&s.attr({OT:"SiebScreenBar",RN:"SiebScreenTabs"}),s.prepend(f);var l=SiebelApp.S_App.GetWTLanguages();l!==null&&F.call(this,l),R.call(this,s,!1)}},L.prototype.BindEvents=function(){_.call(this)&&($("#objectTreeTypeLink").on("click",{ctx:this},function(e){x!=="Type"&&(x="Type",$("#objectTreeEditSaveLink").styleShow(),X.call(e.data.ctx,e))}),$("#objectTreeFlatLink").on("click",{ctx:this},function(e){x!=="Flat"&&(x="Flat",$("#objectTreeEditSaveLink").styleHide(),X.call(e.data.ctx,e))}),$("#objectTreeEditSaveLink").on("click",{ctx:this},function(e){$(this).hasClass("siebui-wt-objexp-edit")?($(this).removeClass("siebui-wt-objexp-edit").addClass("siebui-wt-objexp-save").attr({title:s,RN:k?"ObjectExplorer-Save":""}),$("#objectTreeFlatLink").addClass("siebui-flat-link-disabled"),X.call(e.data.ctx,e,!0),$("#objectTreeCancelLink").removeClass("forcehide"),$("#objectTreeDefaultLink").removeClass("forcehide")):W.call(e.data.ctx)&&($(this).removeClass("siebui-wt-objexp-save").addClass("siebui-wt-objexp-edit").attr({title:o,RN:k?"ObjectExplorer-Edit":""}),C="",$("#objectTreeFlatLink").removeClass("siebui-flat-link-disabled"),X.call(e.data.ctx,e,!1),$("#objectTreeCancelLink").addClass("forcehide"),$("#objectTreeDefaultLink").addClass("forcehide"))}),$("#objectTreeCancelLink").on("click",{ctx:this},function(e){C&&(T=C,W.call(e.data.ctx,!0)),C="",$("#objectTreeEditSaveLink").removeClass("siebui-wt-objexp-save").addClass("siebui-wt-objexp-edit").attr({title:o,RN:k?"ObjectExplorer-Edit":""}),$("#objectTreeFlatLink").removeClass("siebui-flat-link-disabled"),X.call(e.data.ctx,e,!1),$("#objectTreeCancelLink").addClass("forcehide"),$("#objectTreeDefaultLink").addClass("forcehide")
}),$("#objectTreeDefaultLink").on("click",{ctx:this},function(e){z.call(e.data.ctx)}))},L.prototype.Refresh=function(e){if(_.call(this)){var t=this.GetPM(),n=D.call(this,t.Get("GetType"),!0).children(".siebui-wt-objexp-tree"),r=$.ui.fancytree.getTree(n);e?X.call(this,"",e):r.getRootNode().length!==0&&r.reload(x==="Flat"?O.call(this):b)}},L}(),"SiebelAppFacade.WTObjectExplorer"}));

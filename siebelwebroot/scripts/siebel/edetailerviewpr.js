/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelApp.S_App.edetailerviewpr=="undefined"&&(Namespace("SiebelApp.S_App.edetailerviewpr"),define("siebel/edetailerviewpr",["siebel/viewpr","siebel/htmltmplmgr"],function(){return SiebelAppFacade.edetailerviewpr=function(){function r(e){SiebelAppFacade.edetailerviewpr.superclass.constructor.call(this,e)}function i(n){var r=n.GetPM(),i=r.Get("View"),s=r.Get("ChildComponentState"),o="#",u=o+s[0].id,a=SiebelAppFacade.ComponentMgr.FindComponent({id:r.Get("RelatedApplet")});if(a)var f=a.GetPM(),l=f.Get("GetRecordSet")[f.Get("GetSelection")];var c=!0,h=!0,p="Related",d=SiebelApp.S_App.IsAutoOn(),v=d==="true"?' rn="Related_Ctrl" un="Related" ot="Button"':" ",m=d==="true"?' rn="Player_Ctrl" un="Player" ot="Button"':" ",g=d==="true"?' rn="Contacts_Ctrl" un="Contacts" ot="Button"':" ",y=d==="true"?' rn="Done_Ctrl" un="Player" ot="Button"':" ",b="Contacts",w=r.Get("ChildComponentState");l?c=!0:c=!1;if(a)var E=e.GenerateMarkup({type:t,id:p+"_Ctrl",className:c?"appletButton siebui-related-applet-btn siebui-ui-related":"appletButtonDis siebui-ui-related",value:s[1].childLabel,attrs:'data-display="'+s[1].childLabel+'" tabindex="'+"0"+'" title="'+s[1].childLabel+'" '+'aria-label="'+s[1].childLabel+'" '+v+(c===!0?" ":'disabled="disabled"')});var S=e.GenerateMarkup({type:t,id:p+"_Ctrl",className:c?"appletButton siebui-related-applet-btn siebui-ui-related":"appletButtonDis siebui-ui-related",value:s[0].childLabel,attrs:'data-display="'+s[0].childLabel+'" tabindex="'+"0"+'" title="'+s[0].childLabel+'" '+'aria-label="'+s[0].childLabel+'" '+m+(c===!0?" ":'disabled="disabled"')}),x="<span class = 'siebui-edetail-related-container'>"+S+"</span>";if(E)var T="<span class = 'siebui-edetail-related-container'>"+E+"</span>";$(u).find(".siebui-applet-buttons").append(T),s[1]&&(u="#"+s[1].id,$(u).find(".siebui-applet-buttons").append(x));var N=SiebelApp.S_App.GetService("LS PCD Service"),C=SiebelApp.S_App.NewPropertySet(),k=SiebelApp.S_App.NewPropertySet(),L,A;if(N){var O={};O.async=!0,O.scope=this,O.npr=!0,O.selfbusy=!0,O.cb=function(){k=arguments[2],L=k.childArray[0].GetProperty("RetVal"),A=k.childArray[0].GetProperty("CrossIndRetVal");if(L==="Y"){SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode()&&(A="N");if(A==="N"&&s[2]){var n=e.GenerateMarkup({type:t,id:b+"_Ctrl",className:h?"appletButton":"FALSE",value:s[2].childLabel,attrs:'data-display="'+s[2].childLabel+'" tabindex="'+"0"+'" title="'+s[2].childLabel+'" '+'aria-label="'+s[2].childLabel+'" '+g+(h===!0?" ":'disabled="disabled"')});if(n)var r="<span class = 'AppletButtons siebui-add'>"+n+"</span>";$(o+w[0].id).find(".siebui-applet-buttons").append(r)}var i=e.GenerateMarkup({type:t,id:"Done_Ctrl",className:h?"appletButton":"FALSE",value:s[0].childLabel,attrs:'data-display="'+s[0].childLabel+'" tabindex="'+"0"+'" title="'+s[0].childLabel+'" '+'aria-label="'+s[0].childLabel+'" '+y+(h===!0?" ":'disabled="disabled"')}),u="<span class = 'siebui-ctrl-btn siebui-icon-done'>"+i+"</span>";w[2]&&$("#S_A"+w[2].id).find(".siebui-btn-grp-applet").prepend(u)}},N.InvokeMethod("GeteDetailingSysPref",C,O)}}var e=SiebelJS.Dependency("SiebelAppFacade.HTMLTemplateManager"),t="Button",n=SiebelJS.Dependency("SiebelApp.Constants");return SiebelJS.Extend(r,SiebelAppFacade.ViewPR),r.prototype.Init=function(){SiebelAppFacade.edetailerviewpr.superclass.Init.call(this),this.AttachPMBinding("ComponentStateChange",this.ComponentDisplay),this.AttachPMBinding("ButtonCanInvoke",this.RelItmCanInvoke)},r.prototype.ShowUI=function(){SiebelAppFacade.edetailerviewpr.superclass.ShowUI.call(this);var e=[],t=[];SiebelApp.S_App.IsRwd()?e=$("[id^=s_S_ASiebApplet_]"):e=$("[id^=s_S_A]");for(var n=0;n<e.length;n++)t[n]="#"+e[n].id;this.GetPM().ExecuteMethod("PrepareStateInfo",t),i(this)},r.prototype.RelItmCanInvoke=function(){var n=SiebelAppFacade.ComponentMgr.FindComponent({id:this.GetPM().Get("RelatedApplet")});if(n)var r=n.GetPM(),i=r.Get("GetRecordSet")[r.Get("GetSelection")];var s=!0;i?s=!0:s=!1;var o=this.GetPM().Get("ChildComponentState"),u="#"+o[0].id,a="Related",f=SiebelApp.S_App.IsAutoOn(),l=f==="true"?' rn="Related_Ctrl" un="Related" ot="Button"':" ",c=f==="true"?' rn="Player_Ctrl" un="Player" ot="Button"':" ",h=e.GenerateMarkup({type:t,id:a+"_Ctrl",className:s?"appletButton siebui-related-applet-btn siebui-ui-related":"appletButtonDis siebui-ui-related",value:o[1].childLabel,attrs:'data-display="'+o[1].childLabel+'" tabindex="'+"0"+'" title="'+o[1].childLabel+'" '+'aria-label="'+o[1].childLabel+'" '+l+(s===!0?" ":'disabled="disabled"')}),p=e.GenerateMarkup({type:t,id:a+"_Ctrl",className:s?"appletButton siebui-related-applet-btn siebui-ui-related":"appletButtonDis siebui-ui-related",value:o[0].childLabel,attrs:'data-display="'+o[0].childLabel+'" tabindex="'+"0"+'" title="'+o[0].childLabel+'" '+'aria-label="'+o[0].childLabel+'" '+c+(s===!0?" ":'disabled="disabled"')}),d="<span class = 'siebui-edetail-related-container'>"+p+"</span>",v="<span class = 'siebui-edetail-related-container'>"+h+"</span>";$(u).find(".siebui-edetail-related-container").replaceWith(v),u="#"+o[1].id,$(u).find(".siebui-edetail-related-container").replaceWith(d)},r.prototype.ComponentDisplay=function(e,t){var n="#s_"+e+"_div",r=SiebelAppFacade.ComponentMgr.FindComponent({id:this.GetPM().Get("RelatedApplet")});if(r)var i=r.GetPM();t===!0?($(n).parent().show(),i&&i.GetRenderer().BindData()):t===!1&&$(n).parent().hide(),$(".siebui-view-multi-column").remove()},r.prototype.BindEvents=function(){var e=this,t=this.id,n=e.GetPM().Get("ChildComponentState"),r="#",i="#s_";SiebelApp.S_App.IsRwd()?$("#SiebDetailView").hide():$("#s_svctrl_div").hide(),$(".siebui-ui-related").bind("click",{ctx:this},function(t){var n=t.data.ctx.GetPM();n.OnControlEvent("TabClick",this.id);var r=SiebelAppFacade.ComponentMgr.FindComponent({id:n.Get("PlayerApplet")}),i=SiebelAppFacade.ComponentMgr.FindComponent({id:n.Get("RelatedApplet")}),s=e.GetPM().Get("ChildComponentState"),o=r.GetPM();if(i)var u=i.GetPM(),a=u.Get("GetRecordSet").length
;var f=new Date,l=SiebelApp.S_App.GetService("LS PCD Service");if(s[0].displayState===!1){n.AddProperty("Mode","Related"),n.AddProperty("visited","N"),i&&(i.GetPR().ShowSelection(),i.GetPR().CanInvokeNavBar(u));var c={};c.async=!0,c.scope=this,c.npr=!0,c.selfbusy=!0,c.cb=function(){var e=f.getMonth()+1+"/"+f.getDate()+"/"+f.getFullYear()+" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds();n.AddProperty("RelatedStartTime",e),u&&u.ExecuteMethod("SetSesRecData")};if(l){var h="",p=o.ExecuteMethod("GetSesRecData"),d=n.Get("PlayerStartTime"),v=SiebelApp.S_App.NewPropertySet();v.SetProperty("MpiId",p.MpiId),v.SetProperty("StartTime",d),v.SetProperty("ThumbnailPath",p.ThumbnailPath),v.SetProperty("EndTime",h),v.SetProperty("ParentMPId",p.ParentMPId),v.SetProperty("ItemName",p.ItemName),v.SetProperty("ParentMPName",p.ParentMPName),v.SetProperty("ParentDsblMsgResponse",p.ParentDsblMsgResponse),v.SetProperty("LitFileExt",p.LitFileExt),v.SetProperty("LitFileRev",p.LitFileRev),v.SetProperty("LiteratureId",p.LiteratureId),v.SetProperty("ThumbnailExtension",p.ThumbnailExtension),v.SetProperty("ThumbnailId",p.ThumbnailId),v.SetProperty("ThumbnailRevId",p.ThumbnailRevId),n.Get("UpdatePlayer")==="N"?v.SetProperty("Mode","INSERT"):v.SetProperty("Mode","UPDATE"),n.AddProperty("LastUpdatedRec",p.MpiId),n.AddProperty("UpdatePlayer","N"),l.InvokeMethod("LogMsgPlanItemSesResponse",v,c)}}else{u&&u.ExecuteMethod("SetSesRecData");var v=SiebelApp.S_App.NewPropertySet();r.GetPR().CanInvokeNavBar(o);if(l){var h=f.getMonth()+1+"/"+f.getDate()+"/"+f.getFullYear()+" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds();if(u)var m=u.ExecuteMethod("GetSesRecData");var d=n.Get("RelatedStartTime");v.SetProperty("MpiId",m.MpiId),v.SetProperty("StartTime",d),v.SetProperty("ThumbnailPath",m.ThumbnailPath),v.SetProperty("EndTime",h),v.SetProperty("ParentMPId",m.ParentMPId),v.SetProperty("ItemName",m.ItemName),v.SetProperty("ParentMPName",m.ParentMPName),v.SetProperty("ParentDsblMsgResponse",m.ParentDsblMsgResponse),v.SetProperty("Mode","INSERT"),v.SetProperty("LitFileExt",m.LitFileExt),v.SetProperty("LitFileRev",m.LitFileRev),v.SetProperty("LiteratureId",m.LiteratureId),v.SetProperty("ThumbnailExtension",m.ThumbnailExtension),v.SetProperty("ThumbnailId",m.ThumbnailId),v.SetProperty("ThumbnailRevId",m.ThumbnailRevId),n.AddProperty("LastUpdatedRec",m.MpiId),o.ExecuteMethod("SetSesRecData"),n.AddProperty("Mode","Player"),n.AddProperty("UpdatePlayer","Y"),l.InvokeMethod("LogMsgPlanItemSesResponse",v)}}}),$(document).undelegate("#Contacts_Ctrl","click"),$(document).delegate("#Contacts_Ctrl","click",{ctx:this},function(e){$(".siebui-thread").hide(),$(r+n[0].id).hide(),$(r+n[1].id).hide(),$(i+n[2].id+"_div").removeClass("siebui-addcontact-applet"),$(r+n[2].id).show(),$(".siebui-form-applet-header").removeClass("siebui-view-player-top"),$(".siebui-form-applet-header").addClass("siebui-view-player-top-position"),$(".AppletMenu").show(),$("#Done_Ctrl").on("click",{ctx:this},function(e){$(r+n[2].id).hide(),$(i+n[2].id+"_div").addClass("siebui-addcontact-applet"),$(r+n[0].id).show(),$(".siebui-form-applet-header").addClass("siebui-view-player-top"),$(".siebui-form-applet-header").removeClass("siebui-view-player-top-position"),$(".AppletMenu").hide()})})},r}(),"SiebelAppFacade.edetailerviewpr"}()));

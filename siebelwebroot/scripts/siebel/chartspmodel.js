/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelAppFacade.ChartsPM=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.ChartsPM"),define("siebel/chartspmodel",["siebel/pmodel"],function(){return SiebelAppFacade.ChartsPM=function(){function g(){SiebelAppFacade.ChartsPM.superclass.constructor.apply(this,arguments)}function y(e,r){var i=CCFMiscUtil_CreatePropSet(),s=[t,n];s.indexOf(e)!==-1&&(i.SetProperty(SWE_METHOD_STR,e),this.ExecuteMethod(SWE_CMD_INVOKE_METHOD_STR,e,i))}function b(){return w.call(this),E.call(this)===!0?!0:!1}function w(){var e="",t=[],n=[],s=this.Get("ChartData");e=s.GetProperty(r),e!=null&&e.length!=0&&(CCFMiscUtil_StringToArray(e,t),this.SetProperty("Categories",t)),e=s.GetProperty(i),e!=null&&e.length!=0&&(CCFMiscUtil_StringToArray(e,n),this.SetProperty("Series",n))}function E(){var e="",t="",n="",r="",i,u,a=0,l,p=[],d=[],v=[],g=[],y=[],b=[],w=[],E=[],x=[],N=[],k=0,L=1,A=2;E=this.Get("Categories"),n=this.Get("ChartData"),r=this.Get("ChartDefn"),i=E.length;if(E==null||i==0)return!1;e=C.call(this,!1)===f?s:o,t=n.GetProperty(e);if(t==null||t.length==0)return!1;CCFMiscUtil_StringToArray(t,b);if(b.length!=i)return!1;t=null,t=r.GetProperty(m),CCFMiscUtil_StringToArray(t,p),t=r.GetProperty(CHPROP_ARR_LEGENDTEXT),CCFMiscUtil_StringToArray(t,d);for(D=0,a=p.length;D<a;D++)l=p[D].split(" "),g[D]=S(l[0],l[1],l[2]);var O=r.GetChild(3),M=O.GetProperty(CHPROP_MAX),_=O.GetProperty(CHPROP_MIN);for(var D=0;D<i;D++){var P=parseFloat(b[D]);if(P==0)return!1;y[D]=T.call(this,D,0,!1),w[D]=y[D]*100/P,w[D]>=M?v[D]=g[k]:w[D]>=_?v[D]=g[L]:v[D]=g[A]}var H=r.GetProperty(c),B=r.GetProperty(CHPROP_PICK_FUNCTION);CCFMiscUtil_StringToArray(B,N),PickFunctionName=H==h?N[1]:N[3];var j={};return j.CategoryPercent=w,j.CategoryColours=v,j.CategoryName=E,j.LegendColors=g,j.NumOfCategories=i,j.FunctionName=PickFunctionName,j.Quota=b,j.Revenue=y,j.CategoryField=r.GetProperty(CHPROP_CATEGORY_FIELD),j.AppTitle=r.GetChild(0).GetProperty(CHPROP_TITLE),j.LegendText=d,j.OutOfString=r.GetProperty(CHPROP_ARR_OUTOFSTRING),this.SetProperty("ChartDataMap",j),!0}function S(e,t,n){return"#"+x(e)+x(t)+x(n)}function x(e){var t=parseInt(e).toString(16);return t.length==1?"0"+t:t}function T(e,t,n){var r=0,i=null,s=null,o,u,a,f=[],l=[],c=0;if(e<0||t<0)return 0;f=this.Get("Categories"),u=this.Get("ChartData"),a=this.Get("ChartDefn");for(r=0,c=u.GetChildCount(null);r<c;r++){s=u.GetChild(r),o=s.GetValue();if(o!=null&&f[e]!=null&&o===f[e])break}if(r==u.GetChildCount(null))return 0;for(r=0;r<s.GetChildCount(null);r++)return i=s.GetChild(r),o=i.GetValue(),N.call(this,i,C.call(this,!1),n);return 0}function N(e,t,n){var r;return t==a?(r=e.GetProperty(p),r!=null&&r.length==0?0:r):(r=e.GetProperty(n?v:d),r!=null&&r.length==0?0:r)}function C(e){var t,n="";return t=this.Get("ChartDefn"),n=e?t.GetProperty(l):t.GetProperty(c),n==null||n.length==0||n==h?a:f}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=e.get("CHART_FUNNEL_DEF_METHOD"),n=e.get("CHART_FUNNEL_DATA_METHOD"),r=e.get("CHDATA_ARR_CATS"),i=e.get("CHDATA_ARR_SERIES"),s=e.get("CHDATA_FNL_ARR_QUOTAS"),o=e.get("CHDATA_FNL_ARR_UNITQUOTAS"),u=e.get("CHDEF_TITLE"),a=e.get("CH_FUNCTION_COUNT"),f=e.get("CH_FUNCTION_SUM"),l=e.get("CHDEF_FUNCTION2"),c=e.get("CHDEF_FUNCTION"),h=e.get("CH_PVAL_COUNT"),p=e.get("CHDATA_COUNT"),d=e.get("CHDATA_DATAPT"),v=e.get("CHDATA_DATAPT2"),m=e.get("CHPROP_ARR_BARCOLORS");return CHPROP_ARR_LEGENDTEXT=e.get("CHPROP_ARR_LEGENDTEXT"),SWE_PROP_BC_NOTI_GENERIC=e.get("SWE_PROP_BC_NOTI_GENERIC"),SWE_PROP_NOTI_TYPE=e.get("SWE_PROP_NOTI_TYPE"),SWE_PROP_ARGS_ARRAY=e.get("SWE_PROP_ARGS_ARRAY"),CHART_FUNNEL_DEF=e.get("CHART_FUNNEL_DEF"),CHART_FUNNEL_DATA=e.get("CHART_FUNNEL_DATA"),CHART_DEF=e.get("CHART_DEF"),CHART_DATA=e.get("CHART_DATA"),CHPROP_MAX=e.get("CHPROP_MAX"),CHPROP_MIN=e.get("CHPROP_MIN"),CHPROP_PICK_FUNCTION=e.get("CHPROP_PICK_FUNCTION"),CHPROP_CATEGORY_FIELD=e.get("CHPROP_CATEGORY_FIELD"),CHPROP_TITLE=e.get("CHPROP_TITLE"),SWE_CMD_INVOKE_METHOD_STR=e.get("SWE_CMD_INVOKE_METHOD_STR"),SWE_METHOD_STR=e.get("SWE_METHOD_STR"),CHPROP_ARR_OUTOFSTRING=e.get("CHPROP_ARR_OUTOFSTRING"),SiebelJS.Extend(g,SiebelAppFacade.PresentationModel),g.prototype.Init=function(){var e=!1,t=!1;SiebelAppFacade.ChartsPM.superclass.Init.apply(this),this.AddMethod("GetChartData",function(e){var t=this.Get("ChartDataMap");return t[e]}),this.AddMethod("NotifyServer",y),this.AddProperty("ChartType",""),this.AddProperty("RefreshChart",!1),this.AddProperty("ChartDataMap",{}),this.AddProperty("ChartDefn",""),this.AddProperty("ChartData",""),this.AddProperty("Categories",[]),this.AddProperty("Series",[]),this.AttachNotificationHandler(SWE_PROP_BC_NOTI_GENERIC,function(n){var r=n.GetProperty(SWE_PROP_NOTI_TYPE);if(r===CHART_FUNNEL_DEF){var i=n.GetProperty(SWE_PROP_ARGS_ARRAY);i=i.substr(i.indexOf("@"));var s=CCFMiscUtil_CreatePropSet();s.DecodeFromString(i);var o=s.GetChildByType(CHART_DEF);this.SetProperty("ChartDefn",o),this.SetProperty("ChartType",o.GetProperty(u)),o!==null&&(e=!0)}if(r===CHART_FUNNEL_DATA){var i=n.GetProperty(SWE_PROP_ARGS_ARRAY);i=i.substr(i.indexOf("@"));var s=CCFMiscUtil_CreatePropSet();s.DecodeFromString(i);var a=s.GetChildByType(CHART_DATA);this.SetProperty("ChartData",a),a!=null&&(t=!0)}e&&t?(this.SetProperty("RefreshChart",b.call(this)),e=!1,t=!1,SiebelJS.Log(this.Get("RefreshChart"))):this.SetProperty("RefreshChart",!1)})},g}(),SiebelAppFacade.ChartsPM}));

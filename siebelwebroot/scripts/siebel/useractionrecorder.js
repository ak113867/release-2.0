/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
typeof SiebelApp.UserActionRecorder=="undefined"&&(SiebelJS.Namespace("SiebelApp.UserActionRecorder"),SiebelApp.UserActionRecorder=function(){function f(){var i=[],u=0;this.SetRec=function(e){u=e===1||e===3,u||e===2?$(".siebui-toolbar-automation .siebui-toolbar-enable").addClass("siebui-automation-toolbar-highlight"):$(".siebui-toolbar-automation .siebui-toolbar-enable").removeClass("siebui-automation-toolbar-highlight")},this.GetRec=function(){return u},this.SetInvalidElState=function(n){var r=SiebelApp.S_App.GetService(t.get("SWE_OUI_CLIENT_PREF_SERVICE"));if(!e.IsEmpty(r)){var i=SiebelApp.S_App.NewPropertySet();i.SetProperty("Automation/ShowInvalidEl",n),r.InvokeMethod("SetPreferences",i,{npr:!1,async:!0,cb:function(){o=n}})}},this.GetInvalidElState=function(){if(o===null){var n=SiebelApp.S_App.GetService(t.get("SWE_OUI_CLIENT_PREF_SERVICE"));if(!e.IsEmpty(n)){var r=SiebelApp.S_App.NewPropertySet();r.SetProperty("Automation/ShowInvalidEl","");var i=n.InvokeMethod("GetPreferences",r);o=i&&i.GetChildByType("ResultSet")?i.GetChildByType("ResultSet").GetProperty("Automation/ShowInvalidEl"):!1,o=e.IsTrue(o)}}return o},this.SetPendingEvt=function(e,t){if(u){if(!s)if(i.length!==0&&!e.ua){var n=i.length-1,o=JSON.parse(JSON.stringify(i[n]));delete o.amCmd,delete o.eventName,delete o.eleClass,delete o.id,delete o.key,delete o.cmdStr,o.eleType!=="File Upload"&&delete o.value,delete o.isInputField,delete o.sendUPTData,delete o.status;var f=JSON.parse(JSON.stringify(e));delete f.amCmd,delete f.eventName,delete f.eleClass,delete f.id,delete f.key,delete f.cmdStr,f.eleType!=="File Upload"&&delete f.value,delete f.isInputField,delete f.sendUPTData,delete f.status,JSON.stringify(f)!==JSON.stringify(o)?e.parentRN!==""&&i.push(e):(i[n].cmdStr.length>0&&e.cmdStr.length===0&&(e.cmdStr=i[n].cmdStr),i[n]=e)}else e.parentRN!==""&&!r?i.push(e):e.parentRN!==""&&r&&e.eventName!=="change"&&i.push(e);r=e.cmdStr.length!==0,a=this.CanRecord(e),l.call(this,t,e)}},this.CanRecord=function(e){var t=!1;if(["click","change","drop","DragSource","DropTarget"].indexOf(e.eventName)>=0&&e.parentRN!==""||e.cmdStr)e.cmdStr&&this.SetCMDFlag(!0),t=!0,this.SetTimer();return t},this.GetPendingEvt=function(){return i},this.ResetPendingEvt=function(){i=[]},this.IsCommitPending=function(){return a},this.ResetCommitPending=function(){a=!1},this.ResetRecording=function(){i=[],a=!1},this.SetCMDFlag=function(e){n=e},this.GetCMDFlag=function(){return n},c.call(this)}function l(e,t){if((!$(e).attr("data-autom")&&!a&&$(e).is("input,button,select,li,ul,a,textarea,span,td,img")||a&&!e.attr("rn")||t.eleType=="drilldown")&&s){var n;if($(e).closest(".ui-jqgrid-view").length>0){var r=$(e).closest("td").index();e=e.closest("[class='ui-jqgrid-view']").find("table th:eq("+r+")").find("div"),e.attr("rn")||(e=e.parent())}if($(e).is("li,ul,span,td")&&!$(e).closest("a").length>0&&!$(e).parent().is("a")&&$(e).find("ot").length==0&&(!$(e).attr("class")||$(e).attr("class").indexOf("siebui-ctrl-link")==-1&&$(e).attr("class").indexOf("siebui-btn")==-1))return;if($(e).attr("id")&&$(e).attr("id").indexOf("_mb")>=0&&$(e).is("a")){var i="[name='"+$(e).attr("id").split("_mb")[0]+"']";n=$(i)}!e.attr("rn")&&(!$(e).attr("class")||$(e).attr("class").indexOf("siebui-nav-hb-btn")==-1)&&(!n||!n.attr("rn"))&&e.addClass("siebui-automation-elements-highlight")}}function c(){function o(){var e=arguments[0].detail.key,t="",n=arguments[0].detail.event,r=t.length,i={};t+=n.altKey?"alt":"",t+=n.shiftKey?t.length?"+shift":"shift":"",t+=n.ctrlKey?t.length?"+ctrl":"ctrl":"",t+=n.key?t.length?"+"+n.key:n.key:"",h($(n.target))&&(i.status="readonly"),SiebelApp.UserActionRecorder.CreateEvtObj?SiebelApp.UserActionRecorder.CreateEvtObj("keydown",$(n.target),e,t,"",i):SiebelJS.Debug("recordCmd: Function not available")}function a(){SiebelApp.UserActionRecorder.SetRec(Number(SiebelApp.S_App.GetRecordingState())),SiebelApp.EventManager.removeListner("postload",a,this)}function f(){var e,t,n={},r=SiebelApp.UserActionRecorder.GetPendingEvt();arguments[0].type==="EventDnD"?(r.length!==0&&r[r.length-1].eventName==="CustomControlEvent:Change"?r.pop():"",e=$("[un='"+arguments[0].event.id+"']"),n.value=arguments[0].event.start,SiebelApp.UserActionRecorder.CreateEvtObj("DragSource",e,null,null,!0,n),n.value=arguments[0].formattedDateTime,t=$("[un='"+arguments[0].event.id+"']"),SiebelApp.UserActionRecorder.CreateEvtObj("DropTarget",t,null,null,!0,n)):(e=$(arguments[0][0].draggedEl),n.rowid=e.attr("id"),SiebelApp.UserActionRecorder.CreateEvtObj("DragSource",e,null,null,!0,n),n={},n.value=arguments[0].formattedDateTime,t=$($("[data-time='"+arguments[0].formattedTime+"']").find("td")[0]),SiebelApp.UserActionRecorder.CreateEvtObj("DropTarget",t,null,null,!0,n))}window.addEventListener("click",function(e){var n;if($(e.target).attr("type")!=="text"&&!$(e.target).is("textarea")&&!$(e.target).is("select")&&!$(e.target).is("option")&&$(e.target).attr("rn")!==u){var r=$(e.target),o={},a,f="",l=!1;s&&(e.stopPropagation(),e.preventDefault()),n=$(e.target),i=n.closest("[data-licval]").length!==0&&n.closest("[role='combobox']").length>0?n.closest("[data-licval]").attr("data-licval"):!1;if(!n.attr("rn"))if(n.attr("data-autom")!==undefined){var c=n.attr("data-autom").split(":")[0],m=n.attr("data-autom").split(":")[1];n=n[c](m)}else if(n.children().attr("ot"))n=n.children();else if(n.parent().attr("ot"))n=n.parent();else if(n.parent().parent().attr("ot"))n=n.parent().parent();else if(n.parent().prev().attr("rn")&&n.attr("class").indexOf("drilldown")>-1){var g=n.parent().prev();o.ot=g.attr("ot"),o.rn=g.attr("rn")}else o=p(n);r.closest("[class='ui-jqgrid-view']").length>0&&["Expand","Collapse"].indexOf(o["rn"])==-1&&(o=d(r)),(e.shiftKey||e.ctrlKey)&&$(e.target).closest("[class='ui-jqgrid-view']").length>0&&(f=e.shiftKey?"shift+click":"ctrl+click"),o.value=n.val()||$(e.target).val()||o.value||"";if([t.get("SWE_CTRL_CHECKBOX"),t.get("SWE_PROP_ICON_MAP")].indexOf(o.ot||n.attr("ot"))!==-1&&(!o.jqGridColHeader||r.is(":checkbox"
))&&["shift+click","ctrl+click"].indexOf(f)===-1)return;(!$(e.target).is("button,a")&&!n.is("button,a")||["JText","JComboBox","Link"].indexOf(n.attr("ot")||o.ot)>-1)&&o["value"].length==0&&$(e.target).attr("ot")!=="Button"&&(o.value=$(e.target).text().trim()||""),l=v(n),l&&(o.value=l);if(n.attr("id")&&n.attr("id").indexOf("_mb")>=0&&n.is("a")&&!s){var m="[name='"+n.attr("id").split("_mb")[0]+"']",y=n.attr("rowid")||1;n=$(m).eq(y-1)}if(n.attr("class")&&n.attr("class").indexOf("drilldown")>=0||r.attr("class")&&r.attr("class").indexOf("drilldown")>=0)o.ot="drilldown";h($(e.target))&&(o.status="readonly"),r.closest("[ot='SiebApplet'],[ot='SiebListApplet'],[ot='SiebVisDropDown'],[ot='SiebApplicationMenu'],[ot='SiebScreenBar'],[ot='SiebAppletMenu'],[ot='SiebViewLink']").length!==0&&(a=!0,(r.closest("[ot='button'],[type='button']").length!==0||$(r).parent().is("a")||$(r).is("a")||r[0].tagName==="option"||r[0].type==="radio")&&SiebelApp.UserActionRecorder.CreateEvtObj&&SiebelApp.UserActionRecorder.SetTimer()),SiebelApp.UserActionRecorder.CreateEvtObj&&SiebelApp.UserActionRecorder.CreateEvtObj("click",n,null,f,a,o)}},!0),window.addEventListener("blur",function(e){$(e.target).data("falseRead")&&(e.stopPropagation(),e.preventDefault());if(SiebelApp.UserActionRecorder.GetPendingEvt){var t=SiebelApp.UserActionRecorder.GetPendingEvt();if(e&&($(e.target).attr("ot")==="JComboBox"&&(i||i==""||$(e.target).is("select"))||["JDateTimeZonePick","JDateTimePick","JDatePick","JCalculator"].indexOf($(e.target).attr("ot"))>=0&&t[t.length-1]&&["blur","click"].indexOf(t[t.length-1].eventName)!==-1)){var n=$(e.target),r={},s;n.closest("[class='ui-jqgrid-view']").length>0&&(r=d(n)),r.value=i||"",i&&n.data()&&n.data().uiAutoComplete?i=!1:n.data().uiAutocomplete&&(s=v.call(SiebelApp.UserActionRecorder,n)),i=!1,s&&(r.value=s);if(r.value&&r["value"].length==0||n.val()&&n.val().length==0)return;h(n)&&!n.data("falseRead")&&(r.status="readonly"),SiebelApp.UserActionRecorder.CreateEvtObj("blur",n,"","","",r);return}}},!0);var n=null;window.addEventListener("focus",function(e){n=e.target}),window.addEventListener("drop",function(e){var t=e.dataTransfer.files[0].name,n={};n.value=t;var r=$(e.target).closest(".siebui-applet-active").find(".siebui-ctrl-file");SiebelApp.UserActionRecorder.CreateEvtObj("drop",r,"","","",n);if(SiebelApp.UserActionRecorder.GetPendingEvt().length!==0){var i,s=this,o={};o.type="POST",i=CCFMiscUtil_CreatePropSet();if(E(i)){var u=S(i);SiebelApp.S_App.TriggerUPTEvent(u)}}}),window.addEventListener("change",function(e){s&&(e.stopPropagation(),e.preventDefault(),SiebelApp.UserActionRecorder.CreateEvtObj("change",$(e.target),"","",""));if(e&&$(e.target).attr("rn")&&(n===e.target||n===window||!n)&&$(e.target).attr("rn")!==u){var t={},r=$(e.target),i=!1;if(r.is("select")){var o=r.find(":selected");t.value=o.attr("rn")||o.val()||o.text()||r.val()||undefined}i=v(r),i&&(t.value=i),h(r)&&(t.status="readonly"),y.call(this,e.target,t,!1),SiebelApp.UserActionRecorder.CreateEvtObj("change",r,"","","",t)}},!0),SiebelApp.EventManager.addListner("CustomControlEvent:Change",function(e){var t={},n=$(e.target);t=d(n);var r=n.attr("data-autom")===undefined&&!t.rn?n.closest("[rn]"):n;if(!r.attr("rn")&&r.attr("data-autom")!==undefined)var i=r.attr("data-autom").split(":")[0],s=r.attr("data-autom").split(":")[1],r=r[i](s);t.value=r.val()||$(e.target).val()||t.value||"",SiebelApp.UserActionRecorder.CreateEvtObj&&SiebelApp.UserActionRecorder.CreateEvtObj("CustomControlEvent:Change",r,"","","",t)},!0),window.addEventListener("keydown",function(e){if(e){r=!1;var t=e.key,n=$(e.target),i={},s="";if([13,27,9,113].indexOf(e.which||e.keyCode)>=0){if(e&&$(e.target).attr("ot")==="JComboBox"){n.closest("[class='ui-jqgrid-view']").length>0&&(i=d(n)),(e.which||e.keyCode)==27&&(s="ESCAPE"),$($(e.target).data()).length>0&&$(e.target).data().uiAutocomplete!==undefined&&(i.value=v.call(SiebelApp.UserActionRecorder,$(e.target))),h($(e.target))&&(i.status="readonly"),SiebelApp.UserActionRecorder.CreateEvtObj&&SiebelApp.UserActionRecorder.CreateEvtObj("keydown",n,"",s,"",i);return}e.data=e.data||{},e.data.captured=!0,(e.which||e.keyCode)==27&&(s="ESCAPE"),(e.which||e.keyCode)==13&&(s="Enter"),h($(e.target))&&(i.status="readonly"),SiebelApp.UserActionRecorder.CreateEvtObj?SiebelApp.UserActionRecorder.CreateEvtObj("keydown",n,"",s,"",i):SiebelJS.Debug("Keydown: Function not available")}}},!0),SiebelApp.EventManager.addListner("recordCmd",o,this),SiebelApp.EventManager.addListner("postload",a,this),SiebelApp.EventManager.addListner("calendarDrop",f,this),$.event.special.drop={preDispatch:function(t,n){if(e.IsTrue(SiebelApp.S_App.IsAutoOn())&&SiebelApp.UserActionRecorder.GetRec()){var r,i,s={};r=$.ui.ddmanager.current.currentItem||$.ui.ddmanager.current.element,i=$(t.target).find("td.ui-state-highlight");if(i.length==0||r.length==0||r.is("th"))return;s.rowid=r.attr("id"),SiebelApp.UserActionRecorder.CreateEvtObj("DragSource",r,null,null,!0,s),s=d(i),s.value="",SiebelApp.UserActionRecorder.CreateEvtObj("DropTarget",i,null,null,!0,s)}}},$.event.special.mouseup={preDispatch:function(t,n){if(e.IsTrue(SiebelApp.S_App.IsAutoOn())&&SiebelApp.UserActionRecorder.GetRec()){var r,i,s={},o=SiebelApp.UserActionRecorder.GetPendingEvt(),u=o.length;r=$.ui.ddmanager.current?$.ui.ddmanager.current.currentItem||$.ui.ddmanager.current.element:$(),i=$();if(r.is("th")){var a=r.parent(),f=$(">th",a);$.each(f,function(e){if($(f[e]).attr("id")==undefined){i=f[e-1];return}}),r=$(r).find("div"),i=$(i).find("div");if(i.length==0||r.length==0)return;if(i.attr("rn")!==r.attr("rn")&&(!o[u-1]||o[u-1].eleRN!==i.attr("rn"))&&(!o[u-2]||o[u-2].eleRN!==r.attr("rn"))){SiebelApp.UserActionRecorder.CreateEvtObj("DragSource",r,null,null,!0,s),SiebelApp.UserActionRecorder.CreateEvtObj("DropTarget",i,null,null,!0,s);return}}}}},w.call(this)}function h(e){if(e.attr("readonly")&&e.attr("readonly").toLowerCase()==="readonly"||e.hasClass("siebui-list-textareactrl-nofocus"))return!0}function p(e){var t=
{},n=e.attr("class"),r=e.parent().attr("class");if(n&&n.indexOf("tree-plus")!==-1||r&&r.indexOf("jstree-closed")!==-1)t.rn=n.indexOf("jstree")!==-1&&n.indexOf("icon")==-1?"Select":"Expand",t.ot=e.parent().attr("class").indexOf("jstree-closed")!==-1?"Tree":"Hierarchy",t.rowid=e.parent().attr("id");else if(n&&n.indexOf("tree-minus")!==-1||r&&r.indexOf("jstree-open")!==-1)t.rn=n.indexOf("jstree")!==-1&&n.indexOf("icon")==-1?"Select":"Collapse",t.ot=e.parent().attr("class").indexOf("jstree-open")!==-1?"Tree":"Hierarchy",t.rowid=e.parent().attr("id");return t}function d(e){var t={};t.jqGridColHeader=e.closest(".ui-jqgrid-htable").length>0?!0:!1;if(!e.attr("rn")){colNo=$(e).closest("td").index()===-1?$(e).closest("th").index():$(e).closest("td").index();var n=e.closest("[class='ui-jqgrid-view']").find("table th:eq("+colNo+")").find("div");t.ot=e.attr("ot")||n.attr("ot"),t.rn=e.attr("rn")||n.attr("rn"),t.value=e[0].value||e.text(),t.status=e.is("td")?"readonly":undefined,t.rowid=g(e)}return t}function v(e){if(e.data().uiAutocomplete){var t=$(e.data().uiAutocomplete.bindings[1]).attr("id"),n=null;return $("#"+t).children().filter(function(){n=$(this).text()===e.val()?$(this).attr("data-licval"):n}),n}return e.attr("data-licval")}function m(e){return $(e).hasClass("ui-state-disabled")}function g(e){return e.closest("[role='row']").length>0?e.closest("[role='row']").attr("id"):null}function y(e,n,r){$(e).attr("ot")===t.get("SWE_CTRL_CHECKBOX")&&(n.value=!r&&e.checked||r&&!e.checked?"Y":"N")}function b(e){var t=!1;if(e.length>0){var n=e[e.length-1];!n.status&&(!n.value||(n.eleType||"").indexOf("File")!==-1)&&(t=!0)}return t}function w(){if(SiebelApp.S_App){var e=SiebelApp.S_App.constructor.prototype.CallServer,t=SiebelApp.S_App.constructor.prototype.SetDefaultArgs,n=SiebelApp.S_App.constructor.prototype.GotoView,r=SiebelApp.S_App.constructor.prototype.LogOff,i=SiebelApp.Utils.Confirm,s=SiebelApp.Utils.Alert;SiebelApp.S_App.constructor.prototype.CallServer=function(){var t=arguments[0];if(E(t)){var n=S(t);n&&t.SetProperty("UPT",n.EncodeAsString())}return e.apply(this,arguments)},SiebelApp.S_App.constructor.prototype.GotoView=function(){return this.isRec=SiebelApp.UserActionRecorder.IsCommitPending(),n.apply(this,arguments)},SiebelApp.S_App.constructor.prototype.SetDefaultArgs=function(){t.apply(this,arguments);if(this.isRec){var e=arguments[0];if(E(e)){var n=S(e);n&&e.SetProperty("UPT",n.EncodeAsString().split("&").join("%26"))}}return this.isRec=SiebelApp.UserActionRecorder.IsCommitPending(),t.apply(this,arguments)},SiebelApp.Utils.Confirm=function(){var e=i.apply(this,arguments),t=SiebelApp.UserActionRecorder,n=t.GetPendingEvt();if(t.IsCommitPending()&&b.call(this,n)){n[n.length-1].status=e?"OK":"Cancel",n[n.length-1].cmdStr.length>0?n[n.length-1].after=!0:"";var r,s={};s.type="POST",r=CCFMiscUtil_CreatePropSet();if(E(r)){var o=S(r);SiebelApp.S_App.TriggerUPTEvent(o)}}else{var u={};u.parentRN="confirm",u.status=e?"OK":"Cancel",u.value=arguments[0],u.ot="Confirm",t.CreateEvtObj("click",$(),"","","",u)}return e},SiebelApp.Utils.Alert=function(){var e=s.apply(this,arguments),t=SiebelApp.UserActionRecorder,n=t.GetPendingEvt();if(b.call(this,n))n[n.length-1].status="OK";else{var r={};r.parentRN="alert",r.status="OK",r.value=arguments[0],r.ot="Alert",SiebelApp.UserActionRecorder.CreateEvtObj("click",$(),"","","",r)}return e},SiebelApp.S_App.constructor.prototype.LogOff=function(){if(SiebelApp.UserActionRecorder.GetPendingEvt().length!==0){var e,t=this,n={};n.type="POST",e=CCFMiscUtil_CreatePropSet();if(E(e)){var i=S(e);SiebelApp.S_App.TriggerUPTEvent(i)}return r.apply(t,arguments)}return r.apply(this,arguments)}}}function E(e){var t=SiebelApp.UserActionRecorder,n=!1;if(["updateprefmsg","getalarminstances","processdebugmsg"].indexOf(e.GetProperty("SWEMethod")&&e.GetProperty("SWEMethod").toLowerCase())!==-1||["waitforcmd","getmessagecmd","caninvokemethod"].indexOf(e.GetProperty("SWECmd")&&e.GetProperty("SWECmd").toLowerCase())!==-1)return n;if(t&&t.IsCommitPending()){var r=e,i=t.GetPendingEvt(),s=i.length,o=s==0?{}:i[s-1],u=o.eventName,a=SiebelApp.S_App.GetActiveView().GetActiveApplet(),f,l,c;if(["click","change","drop","DragSource","DropTarget"].indexOf(u)>=0||o.cmdStr){f=o.id,l=o.eleType;var h=o.amCmd;c=l==="Button"?r.GetProperty("SWEField")+"_Ctrl":r.GetProperty("SWEField");var p=r.GetProperty("SWEIPS"),d=o.rnPresent,v=".*Command.*Browser Applet.*"+(a===null?"":a.GetName())+".*";d==1||c===f||h&&(p&&p.match(v)||t.GetCMDFlag())?n=!0:t.ResetCommitPending()}else o.key&&(t.GetCMDFlag()?n=!0:t.ResetCommitPending())}return e.GetProperty("Event Context")&&(n=!0),n}function S(n){var r=SiebelApp.UserActionRecorder,i=CCFMiscUtil_CreatePropSet(),s,o,u,a,f=r.GetPendingEvt()||[],l=f.length,c=l==0?"":f[l-1],h=c===""?"":c.eleRN,p=!1,d=!0;i.SetType(c===""?"":c.eventName),i.SetType("UPT"),i.SetProperty("Event Source","Recording"),n.GetProperty("Event Context")&&(i.SetProperty("Event Context",n.GetProperty("Event Context")),p=!0),o=CCFMiscUtil_CreatePropSet(),o.SetType("UPT Details"),a=0;for(var v=0,m=e.IsTrue(SiebelApp.S_App.IsInputCaptureEnabled());v<l;v++){var g=f[v],y=g.cmdStr.length==0?!1:!0;s=CCFMiscUtil_CreatePropSet();if([t.get("SWE_CTRL_DATE_TZ_PICK"),t.get("SWE_CTRL_DATE_TIME_PICK"),t.get("SWE_CTRL_DATE_PICK"),t.get("SWE_CTRL_CALC")].indexOf(g.eleType)!==-1&&g.eventName=="click"&&["ctrl+click","shift+click"].indexOf(g.cmdStr)==-1)continue;if(g.eleRN.length===0&&g.rowid===undefined||g.parentRN.length===0||g.eventName=="click"&&g.eleType==="JComboBox"&&!g.sendUPTData){if(g.cmdStr.length!==0||g.status&&g.status.length!==0)s.SetType("OUA"),s.SetProperty("ParentRN",g.parentRN),g.status!==undefined&&s.SetProperty("status",g.status),g.value&&(s.SetProperty("Value",g.value),s.SetProperty("OT",g.eleType)),s.SetProperty("Type",y==0?g.eventName:"Accelerator"),s.SetProperty("Operation",y==0?g.eventName:g.cmdStr),o.SetProperty("UASEQ"+ ++a,s.EncodeAsString()),p=!0}else d=!0,y&&!g.isInputField&&g.cmdStr.indexOf("click")==-1&&
(d=!1),d&&(s.SetType("EUA"),s.SetProperty("ParentRN",g.parentRN),s.SetProperty("CurrentRN",g.eleRN),s.SetProperty("OT",g.eleType),m&&s.SetProperty("Value",g.value),["DragSource","DropTarget"].indexOf(g.eventName)!==-1?s.SetProperty("Event",g.eventName):"",g.rowid!==undefined&&s.SetProperty("rowid",g.rowid),!g.after&&g.status!==undefined&&s.SetProperty("status",g.status),g.eleRN==="threadbar"&&s.SetProperty("id",g.id),o.SetProperty("UASEQ"+ ++a,s.EncodeAsString()),p=!0),y&&(s=CCFMiscUtil_CreatePropSet(),g.after&&s.SetProperty("status",g.status),s.SetType("OUA"),s.SetProperty("ParentRN",g.parentRN),s.SetProperty("Type","Accelerator"),s.SetProperty("Operation",g.cmdStr),o.SetProperty("UASEQ"+ ++a,s.EncodeAsString()),p=!0)}return p?(r.ResetRecording(),i.AddChild(o),i):!1}var e=SiebelJS.Dependency("SiebelApp.Utils"),t=SiebelJS.Dependency("SiebelApp.Constants"),n=!1,r=!1,i=!1,s=!1,o=null,u=null,a=!1;return f.prototype.SetTimer=function(){var e=this,t=function(){e.GetCMDFlag()&&e.SetCMDFlag(!1)};setTimeout(t,3)},f.prototype.NotifyStateChange=function(e){switch(e){case"StartRecording":this.ResetRecording(),this.SetRec(1),SiebelApp.UserActionRecorder.IdentifyInvalidEl();break;case"StopRecording":this.SetRec(0);break;case"PauseRecording":this.SetRec(2);break;case"ResumeRecording":this.SetRec(3),SiebelApp.UserActionRecorder.IdentifyInvalidEl()}},f.prototype.ShowHideAutomationApplet=function(){var e=$(".siebui-automation-applet");e.length&&(e.toggleClass("forcehide"),SiebelApp.EventManager.fireEvent("forceResize"),e=null)},f.prototype.IdentifyInvalidEl=function(){SiebelApp.UserActionRecorder.GetInvalidElState()&&(s=!0,$(":visible").each(function(){var e=this;$(e).each(function(){var e=document.createEvent("Events");$(this).attr("type")!=="text"&&!$(this).is("textarea")&&!$(this).is("select")&&!$(this).is("option")?e.initEvent("click",!0,!0):e.initEvent("change",!0,!0),e.type.length!==0&&this.dispatchEvent(e)})}),s=!1)},f.prototype.CreateEvtObj=function(e,t,n,r,i,s){var o={},a;u=null;if(t.closest(".siebui-automation-applet, .siebui-toolbar-automation-popup, .siebui-toolbar-automation").length&&r.length===0||m.call(this,t))return;t.attr("type")&&t.attr("type").toLowerCase()==="password"&&(s.value="*****"),s!==undefined&&s.status!==undefined&&(o.status=s.status),o.isInputField=t.prop("type")==="text"||t.is("textarea")||t.prop("type")==="checkbox",o.eventName=e,o.eleClass=t.attr("class")||"",s=s==undefined?[]:s,s!==undefined&&typeof s["class"]!="undefined"&&(o.eleClass=s["class"]),o.id=t.attr("id")||"",o.value=s.value===String.fromCharCode(160)?"":s.value||t.val()||"";if(e==="explicitClick"){var f={};e="click",u=t.attr("rn"),t.is(":checkbox")&&y.call(this,t.get(0),f,!0),o.value=f.value?f.value:o.value}o.key=n||"",o.cmdStr=r||"",o.eleType=s.ot||t.attr("ot")||"",o.eleRN=s.rn||t.attr("rn")||"";if(o.eleType==="File Upload"&&e==="click")return;o.eleRN===""&&t.closest("#siebui-threadbar").length>0&&t.is("a")&&(o.eleRN="threadbar",o.eleType="threadbar"),o.rnPresent=o.eleRN.length===0?!1:!0,o.parentRN=s.parentRN||"";if((o.eleRN.length>0||o.cmdStr.length>0||s.rowid)&&o.eleType!=="_sweview Frame"){var l=$('[ot="SiebScreenBar"]');a=t.closest("[ot='SiebScreenBar'],[ot='SiebDetailTabViewList'],[ot='SiebTabViewList'],[ot='SiebSubDetailTabViewList']"),a.length===0&&(a=t.parent().closest("[ot='SiebApplet'],[ot='SiebListApplet'],[ot='SiebApplicationMenu'],[ot='SiebAppletMenu'],[ot='SiebApplicationMenuBar'],[ot='SiebHirarchicalListApplet']"),a=a.length===0?t.parent().siblings("[ot='SiebApplicationMenuItem'],[ot='SiebApplicationMenu']"):a);if(a.length>0)o.parentRN=a.attr("rn")||"";else if(l.find(".fancytree-active,.siebui-active-navtab").length>0){var c=l.find(".fancytree-active,.siebui-active-navtab");o.parentRN=c.attr("rn")||c.parent().attr("rn")||""}else l.length>0&&(o.parentRN=l.attr("rn"));!o.parentRN&&t.data("data-autom-parent")&&(o.parentRN=t.data("data-autom-parent"))}["click","keydown","change","blur"].indexOf(e)>-1&&(t.closest("[role='gridcell']")[0]?(o.rowid=g(t),t.is("td")&&(o.sendUPTData=!0)):t.closest("[data-rowid]").length>0&&(o.rowid=t.closest("[data-rowid]").attr("data-rowid")),o.sendUPTData=o.sendUPTData||s.jqGridColHeader),s.rowid&&(o.rowid=s.rowid),o.amCmd=i||!1,t.attr("data-ua")=="true"&&(o.ua=!0),this.SetPendingEvt(o,t)},f.prototype.Display=function(){var e=this.GetPendingEvt(),t=e.length;for(var n=0;n<t;n++){var r=e[n];console.log("EventName: "+r.eventName+",  ElementClass: "+r.eleClass+",  ElemenRN: "+r.eleRN+",  Id: "+r.id+r.eleRN+",  Value: "+r.value+",  Key: "+r.key+",  CmdStr: "+r.cmdStr)}},new f}());

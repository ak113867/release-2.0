/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2024
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 24.2.0.0SIA[2024_02] */
function getIdInfo(e){var t="[~^^",n="^^~[",r=e.split(n),i=r.length,s,o="",u="",a="",f="",l="",c="",h="",p="",d="",v="",m="",g=new Array;for(var y=0;y<i;y++)s=r[y].split(t),s[0]==="GRPITEM"?o=s[1]:s[0]==="PROD"?f=s[1]:s[0]==="ORIG"?l=s[1]:s[0]==="INTID"?c=s[1]:s[0]==="FIELD"?h=s[1]:s[0]==="ATTTYPE"?d=s[1]:s[0]==="ATTVAL"?v=s[1]:s[0]==="DOMAIN"?m="Y":s[0]==="QUANTITYLIST"?f=s[1]:s[0]==="CHECKBOX"?f=s[1]:s[0]==="COMBOBOX"?f=s[1]:s[0]==="RADIO"?f=s[1]:s[0]==="PORT"?u=s[1]:s[0]==="PORTITEM"?a=s[1]:s[0]==="ATTR"?p=s[1]:s[0]==="PORTDOMAIN"&&(f=s[1]);return g.GRPITEM=o,g.PROD=f,g.ORIG=l,g.INTID=c,g.FIELD=h,g.ATTTYPE=d,g.ATTVAL=v,g.DOMAIN=m,g.PORT=u,g.PORTITEM=a,g.ATTR=p,g}function jqSelector(e){return e?e.replace(/([ ~!@#$%^&*|+=;:",.<>()^$\`\'\-\{\}\[\]\\\/\?])/g,"\\$1"):e||null}typeof SiebelAppFacade.ConfiguratorPresentationModel=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.ConfiguratorPresentationModel"),SiebelAppFacade.ConfiguratorPresentationModel=function(){function ConfiguratorPresentationModel(e){SiebelAppFacade.ConfiguratorPresentationModel.superclass.constructor.call(this,e)}function NotifyScheduler(e){e.GetProperty(PROP_NOTI_TYPE)==="ClosePopup"&&this.SetProperty("IsPickRecord",!0)}function AddItem(e,t,n,r){this.SetProperty("QEDirtyFlag",!0),AddItemHelper.call(this,e,t,n,r,"Y")}function AddItemHelper(e,t,n,r,i){var s=this.Get("DeferUpdate"),o=this.Get("DirtyIdLookUp"),u=this.Get("DirtyItemArray"),a=String(r);if(Number(a)==="NaN"){SiebelJS.Log("ConfiguratorPM Error - Invalid Quantity: "+a),_UnlockRequestQueue.call(this);return}if(s){var f=t,l;e==="Y"&&(f=t+"|"+n),o[f]===null||typeof o[f]=="undefined"?(l={},l.GRPITEM=t,l.ADDITEM=e,l.PROD=n,l.QTY=r,l.TYPEQTY=i,o[f]=l,u[u.length]=f):(l=o[f],l.GRPITEM=t,l.ADDITEM=e,l.PROD=n,l.QTY=r,l.TYPEQTY=i),_UnlockRequestQueue.call(this);return}var c=null;c=AddItemPSGenerator.call(this,e,t,n,r,i,!1);if(c!==null){var h,p;h=c.EncodeAsString(),p="SubmitRequest_"+h,_SubmitWithHiddenFrame.call(this,p)}else _UnlockRequestQueue.call(this)}function AddItemMin(e,t,n,r){this.SetProperty("QEDirtyFlag",!0),AddItemHelper.call(this,e,t,n,r,"")}function AddItemPSGenerator(e,t,n,r,i,s){var o=this.Get("ControlPS"),u=null,a=null,f=null,l="",c=String(r);if(Number(c)==="NaN"){SiebelJS.Log("ConfiguratorPM Error - Invalid Quantity : "+c),_UnlockRequestQueue.call(this);return}u=o.GetChildByType(t),a=u.GetChildByType("Domain"),l=a.GetProperty("Parent Path"),f=a.GetChildByType(n);if(f!==null||n==="none"){var h="",p,d,v="",m="",g="",y="",b="";if(n!=="none"){if(s&&typeof f.GetProperty("Path")!="undefined")return f.GetProperty("Quantity")!==r?SetItemQuantityPSGenerator.call(this,t,f.GetProperty("Path"),r,i):null;g=f.GetProperty("CxObjName"),y=f.GetProperty("Port Item Id"),version=f.GetProperty("Version"),m=f.GetProperty("List Price"),b=f.GetProperty("CxPortName"),isNaN(m)&&(m=""),v="",h=""}else y=a.GetProperty("Port Item Id");return inputPropSet=CCFMiscUtil_CreatePropSet(),inputPropSet.SetProperty("RequestType","AddItem"),inputPropSet.SetProperty("Name",g),inputPropSet.SetProperty("Parent Display Name",this.Get("ProductName")),inputPropSet.SetProperty("Port Display Name",b),inputPropSet.SetProperty("New Child Display Name",g),inputPropSet.SetProperty("ObjId",this.Get("ObjId")),inputPropSet.SetProperty("RootId",this.Get("RootId")),inputPropSet.SetProperty("Parent Path",l),inputPropSet.SetProperty("Prod Item Id",y),inputPropSet.SetProperty("Product Id",n),inputPropSet.SetProperty("Port Item Id",y),inputPropSet.SetProperty("Quantity",r),inputPropSet.SetProperty("List Price",m),inputPropSet.SetProperty("Current Price",v),inputPropSet.SetProperty("Version",this.Get("Version")),inputPropSet.SetProperty("AutoResolve",h),inputPropSet.SetProperty("AddItem",e),inputPropSet.SetProperty("SetTypeQty",i),this.SetProperty("CfgAnchorId",l+"_"+y),inputPropSet}return _UnlockRequestQueue.call(this),null}function CallService(e,t,n,r){var i=CCFMiscUtil_CreatePropSet();i.DecodeFromString(n),i.SetProperty("RequestType","CallService"),i.SetProperty("ServiceName",e),i.SetProperty("ServiceMethod",t),i.SetProperty("ServiceCallBackFunction",r),n=i.EncodeAsString(),strInvokeMethod="SubmitRequest_"+n,_SubmitWithHiddenFrame.call(this,strInvokeMethod)}function CfgInvokeMethod(name,id){var deferUpdate=this.Get("DeferUpdate"),dirtyItemArray=this.Get("DirtyItemArray");if(!(!deferUpdate||dirtyItemArray.length!==0||name!=="InteractMultiSelect"&&name!=="ResetMultiSelect")){_UnlockRequestQueue.call(this);return}if(deferUpdate&&dirtyItemArray.length>0){var inputPropSet=null;if(name==="InteractMultiSelect"){inputPropSet=_ProcessInteractPropSet.call(this);return}if(name==="ResetMultiSelect"){_RefreshUI.call(this);return}var sString=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_CXP_MULTISELECT_UI_INCOMPLETE");SiebelJS.Log("ConfiguratorPM Warning - "+sString),utils.Alert(sString),_UnlockRequestQueue.call(this);return}var qeButtonId=this.Get("QEButtonId"),qeButtonOffText=this.Get("QEButtonOffText"),qeButtonOnText=this.Get("QEButtonOnText"),isQuickEdit=this.Get("IsQuickEdit"),buttonText="";id===qeButtonId&&isQuickEdit===!0&&(this.SetProperty("UpdateQuickEdit"),this.Get("EngineState")===!0?name="EnableEngine":name="DisableEngine");var quickEditDirtyFlag=this.Get("QEDirtyFlag"),engineState=this.Get("EngineState");if(isQuickEdit&&name==="DoneConfig"&&quickEditDirtyFlag&&!engineState){var sString=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_CXP_QUICKEDIT_UI_INCOMPLETE");SiebelJS.Log("ConfiguratorPM Warning - "+sString),utils.Alert(sString),_UnlockRequestQueue.call(this);return}var preInvokeMethodArray=this.Get("PreInvokeMethod"),controlPS=this.Get("ControlPS"),grpItemId="",inputPropSet,outputPropSet,hiddenFrame,idInfo,methodParam,retVal=!0;preInvokeMethodArray[name]!==null&&typeof preInvokeMethodArray[name]!="undefined"&&(retVal=eval(preInvokeMethodArray[name]));if(retVal===!1)return;if(id!==null){idInfo=getIdInfo(id),idInfo.PORT!==""?grpItemId=idInfo.GRPITEM+_underscore+"PORT"+_pipe+idInfo.PORT:idInfo.PORTITEM!==""?
grpItemId=idInfo.GRPITEM+_underscore+"PORTITEM"+_pipe+idInfo.PORTITEM+_underscore+"INTID"+_pipe+idInfo.INTID:idInfo.ATTR!==""?grpItemId=idInfo.GRPITEM+_underscore+"ATTR"+_pipe+idInfo.ATTR:grpItemId=idInfo.GRPITEM,inputPropSet=controlPS.GetChildByType(grpItemId);if(name==="UndoLastRequest"||name==="RemoveFailedRequests"||name==="FinishIt"||name==="SyncInstance"||name==="CloseExplanation"||name==="GetDetailExpl"||name==="ClearTheStatus"||name==="CalculatePriceCX"||name==="DoneConfig"||name==="ExternalValidate"||name==="EnableEngine"||name==="DisableEngine"){var strInputArgs,inPS;inPS=CCFMiscUtil_CreatePropSet(),inPS.SetProperty("RequestType",name),strInputArgs=inPS.EncodeAsString(),strInvokeMethod="SubmitRequest_"+strInputArgs,name==="UndoLastRequest"||name==="ClearTheStatus"?_SubmitWithMainFrame.call(this,strInvokeMethod):_SubmitWithHiddenFrame.call(this,strInvokeMethod)}else if(name==="SetTopObj"){var prodPropSet=null,prodId="",path="",strInputArgs="",inPS=null;methodParam=inputPropSet.GetProperty("MethodParam");if(methodParam!==""&&typeof methodParam!="undefined"&&methodParam!==null){_SubmitWithMainFrame.call(this,name+"_"+methodParam);return}var domainPropSet=inputPropSet.GetChildByType("Domain");domainPropSet!==null&&typeof domainPropSet!="undefined"?prodPropSet=domainPropSet.GetChildByType(idInfo.PROD):prodPropSet=inputPropSet,prodId=path="",prodId=prodPropSet.GetProperty("Product Id"),path=prodPropSet.GetProperty("Path"),inPS=CCFMiscUtil_CreatePropSet(),inPS.SetProperty("Product Id",prodId),inPS.SetProperty("Path",path),strInputArgs=inPS.EncodeAsString(),strInvokeMethod=name+"_"+strInputArgs,_SubmitWithMainFrame.call(this,strInvokeMethod)}else methodParam=name==="PrevView"?"":inputPropSet.GetProperty("MethodParam"),methodParam!==null?_SubmitWithMainFrame.call(this,name+"_"+methodParam):_SubmitWithMainFrame.call(this,name)}else _SubmitWithMainFrame.call(this,name)}function EditField(e,t,n,r){var i=this.Get("ControlPS"),s=i.GetChildByType(e),o=CCFMiscUtil_CreatePropSet();this.SetProperty("QEDirtyFlag",!0);if(t==="Attribute"){var u=s.GetProperty("AttID");o.SetProperty("AttID",u)}else if(t==="CfgFieldList"){var a=null;a=s.GetChildByType("Domain"),a!==null&&typeof a!="undefined"&&(s=a);var f=s.GetProperty("Port Item Id");o.SetProperty("Port Item Id",f),o.SetProperty("Path",r),o.SetProperty("CfgFieldName",n)}var l=s.GetProperty("Parent Path"),c=s.GetProperty("Parent Product Id");o.SetProperty("Type",t),o.SetProperty("Parent Path",l),o.SetProperty("Parent Product Id",c),o.SetProperty(siebConsts.get("SWE_METHOD_STR"),"EditField"),o.SetProperty(siebConsts.get("SWE_FIELD_STR"),"DTYPE_TEXT"),o.SetProperty(siebConsts.get("SWE_SHOW_POPUP_STR"),"true"),o.SetProperty(siebConsts.get("SWE_HEIGHT_STR"),"100"),o.SetProperty(siebConsts.get("SWE_WIDTH_STR"),"300");var h=o.EncodeAsString(),p="EditField_"+h;_SubmitWithHiddenFrame.call(this,p)}function GetCfgUIInfo(){this.ExecuteMethod("InvokeMethod","GetCfgUIInfo",CCFMiscUtil_CreatePropSet(),!0)}function GetTemplateVarValue(e){var t=this.Get("TemplateVariables"),n=typeof t[e]=="undefined"?"":String(t[e]);return n}function GetExplanation(e,t,n){var r=this.Get("ControlPS"),i=r.GetChildByType(e).GetChildByType("Domain"),s=null;i===null?s=r.GetChildByType(e):s=i.GetChildByType(t);if(s!==null){var o,u;inputPropSet=CCFMiscUtil_CreatePropSet(),inputPropSet.SetProperty("RequestType","GetExpl"),inputPropSet.SetProperty("Path",s.GetProperty("Path")),o=inputPropSet.EncodeAsString(),u="SubmitRequest_"+o,_SubmitWithHiddenFrame.call(this,u)}else bCFG_ClientJSDebug&&SiebelJS.Log("ConfiguratorPM Error - Unable to find Cached Info"),_UnlockRequestQueue.call(this)}function InitializeUIFramework(e){var t=e.GetChildByType("CxProduct"),n=e.GetChildByType("CfgControls"),r=e.GetChildByType("CfgConflict"),i=e.GetChildByType("ProductHeaderImage"),s=t.GetProperty("Product Id"),o=t.GetProperty("CxObjName"),u=t.GetProperty("Version"),a=t.GetProperty("ObjId"),f=t.GetProperty("RootId"),l=t.GetProperty("CxRootPath"),c=t.GetProperty("CxInstSrvName"),h=t.GetProperty("Top RequireMoreChild"),p=t.GetChildByType("MissingRequiredAttr");typeof this.Get("TemplateVariables")=="undefined"&&this.AddProperty("TemplateVariables",new Array),typeof this.Get("IsQuickEdit")=="undefined"&&this.AddProperty("IsQuickEdit",!1),typeof this.Get("QEButtonId")=="undefined"&&this.AddProperty("QEButtonId",""),typeof this.Get("QEButtonOnText")=="undefined"&&this.AddProperty("QEButtonOnText",""),typeof this.Get("QEButtonOffText")=="undefined"&&this.AddProperty("QEButtonOffText",""),typeof this.Get("EngineState")=="undefined"&&this.AddProperty("EngineState",!1),typeof this.Get("QEDirtyFlag")=="undefined"&&this.AddProperty("QEDirtyFlag",!1),this.AddProperty("DirtyItemArray",new Array),this.AddProperty("DirtyIdLookUp",new Array),typeof this.Get("DeferUpdate")=="undefined"&&this.AddProperty("DeferUpdate",!1),this.AddProperty("IsDirtyQueue",!1),this.AddProperty("CalculateDynamicShowHide",!1),this.AddProperty("GrandChildAttrArray",new Array),this.AddProperty("GrandChildAttrRowIdArray",new Array),this.AddProperty("PreInvokeMethod",new Array),this.AddProperty("RequestLock",!1),this.AddProperty("RequestQueue",new Array),this.AddProperty("RequestQueueIndex",0),this.AddProperty("MaxMsg",3),this.AddProperty("CurMsg",0),this.AddProperty("RequestQueueTimeStamp",-requestQueueTimeOut),this.AddProperty("ObjId",a),this.AddProperty("ProductId",s),this.AddProperty("ProductName",o),this.AddProperty("RootId",f),this.AddProperty("RootIntId",l),this.AddProperty("Version",u),this.AddProperty("TopRequireMoreChild",h);var d=[];if(p!==null){var v,m;for(v=!0;(m=p.EnumProperties(v))!==null;v=!1)d.push(p.GetProperty(m)+":"+m)}this.AddProperty("MissingReqAttrArray",d),this.SetProperty("ProductPS",t),this.SetProperty("ControlPS",n),r!=null&&typeof r.GetProperty("CfgJSUpdateConflict")!="undefined"&&this.SetProperty("ShowConflict",r);if(typeof i!="undefined"&&i!==null){var g=i.GetProperty("RootProdId");this.Get("ProductId")===i.GetProperty("RootProdId"
)&&this.SetProperty("NewHeaderImage",i.GetProperty("NewImage"))}var y=e.GetProperty("SetQuickEdit");if(y==="Y"){this.SetProperty("IsQuickEdit",!0);var b=e.GetProperty("SetEngineState");this.SetProperty("EngineState",b==="Y"?!0:!1);var w=e.GetProperty("SetDirtyItemFlag");typeof w!="undefined"&&this.SetProperty("QEDirtyFlag",w==="Y"?!0:!1);var E=e.GetChildByType("QuickEditButton");if(typeof E!="undefined"){var S=e.GetProperty("IsCfgEngineEnabled"),x=S==="Y"?E.GetProperty("Cfg OFF"):E.GetProperty("Cfg ON"),T=S==="Y"?E.GetProperty("Cfg ON"):E.GetProperty("Cfg OFF");typeof x!="undefined"&&this.SetProperty("QEButtonOnText",x),typeof T!="undefined"&&this.SetProperty("QEButtonOffText",T)}}}function ProcessNotify(propSet){if(propSet===null)return;var type=propSet.GetProperty("Type"),msg=propSet.GetProperty("Message"),onYes=propSet.GetProperty("OnYesEval"),onNo=propSet.GetProperty("OnNoEval"),psTmp=CCFMiscUtil_CreatePropSet();type==="alert"?utils.Alert(msg)&&psTmp.DecodeFromString(onYes):type==="confirm"?utils.Confirm(msg)?psTmp.DecodeFromString(onYes):psTmp.DecodeFromString(onNo):type==="eval"&&psTmp.DecodeFromString(onYes);var methodName=psTmp.GetProperty("MethodName");if(methodName==="SetProperty"){var propName=psTmp.GetProperty("PropertyName"),propValue=psTmp.GetProperty("PropertyValue");this.SetProperty(propName,propValue)}else{var methodArgs=psTmp.GetProperty("MethodArgs"),evalStr='this.ExecuteMethod ( "'+methodName+'", '+methodArgs+" );";eval(evalStr)}}function ProcessResponse(ps){var bGetFirst,propName,propValue,childPS,strPS;if(ps.GetType()!=="OUI_SubmitRequest")return!1;for(bGetFirst=!0;(propName=ps.EnumProperties(bGetFirst))!==null;bGetFirst=!1)switch(propName){case"ServiceCallBackFunction":return propValue=ps.GetProperty(propName),eval(propValue),!0;case"RefreshMainPage":return _RefreshUI.call(this),!0;case"CalculateDynamicShowHide":RecalculateDynamicShowHide.call(this)}if((childPS=ps.GetChildByType("CfgNotify"))!==null){var propSet=childPS.GetChildByType("Notify");ProcessNotify.call(this,propSet)}if((childPS=ps.GetChildByType("CfgCanInvoke"))!==null){var propSet=childPS.GetChildByType("CanInvokeMethod");propSet!==null&&this.SetProperty("UpdateCanInvoke",propSet)}if((childPS=ps.GetChildByType("CfgExcludeItem"))!==null){var propSet=childPS.GetChildByType("Excluded");propSet!==null&&this.SetProperty("UpdateExcludedItems",propSet)}if((childPS=ps.GetChildByType("CfgSelectionInfo"))!==null){var propSet=childPS.GetChildByType("SelectionInfo");propSet!==null&&this.SetProperty("UpdateSelectionInfo",propSet)}if((childPS=ps.GetChildByType("CfgGenerics"))!==null){var propSet=childPS.GetChildByType("Generic Info");propSet!==null&&this.SetProperty("UpdateGenerics",propSet)}if((childPS=ps.GetChildByType("CfgRootProdInfo"))!==null){var propSet=childPS.GetChildByType("Delta Root");propSet!==null&&this.SetProperty("UpdateRootProdInfo",propSet)}if((childPS=ps.GetChildByType("CfgResource"))!==null){var propSet=childPS.GetChildByType("Resource");propSet!==null&&this.SetProperty("UpdateResources",propSet)}(childPS=ps.GetChildByType("CfgSignal"))!==null&&this.SetProperty("UpdateSignal",childPS),(childPS=ps.GetChildByType("CfgExplanation"))!==null&&this.SetProperty("ShowExplanation",childPS),(childPS=ps.GetChildByType("CfgConflict"))!==null&&this.SetProperty("ShowConflict",childPS);var missingReqAttrArray=[];if((childPS=ps.GetChildByType("CfgMissingReqAttr"))!==null){var i=0;for(bGetFirst=!0;(propName=childPS.EnumProperties(bGetFirst))!==null;bGetFirst=!1)propValue=childPS.GetProperty(propName),missingReqAttrArray.push(propValue+":"+propName),i++}this.SetProperty("MissingReqAttrArray",missingReqAttrArray)}function RecalculateDynamicShowHide(){this.SetProperty("CalculateDynamicShowHide",!0),_RefreshUI.call(this),this.SetProperty("CalculateDynamicShowHide",!1)}function RemoveItem(e,t){var n=this.Get("DeferUpdate"),r=this.Get("DirtyIdLookUp"),i=this.Get("DirtyItemArray");this.SetProperty("QEDirtyFlag",!0);if(n){var s=e+"|"+t;r[s]===null||typeof r[s]=="undefined"?(dirtyIdInfo={},dirtyIdInfo.GRPITEM=e,dirtyIdInfo.PROD=t,dirtyIdInfo.QTY="-1",r[s]=dirtyIdInfo,i[i.length]=s):(dirtyIdInfo=r[s],dirtyIdInfo.QTY="-1",dirtyIdInfo.GRPITEM=e,dirtyIdInfo.PROD=t),_UnlockRequestQueue.call(this);return}var o=RemoveItemPSGenerator.call(this,e,t);if(o!==null){var u,a;u=o.EncodeAsString(),a="SubmitRequest_"+u,_SubmitWithHiddenFrame.call(this,a)}else bCFG_ClientJSDebug&&SiebelJS.Log("ConfiguratorPM Error - Unable to find Cached Info"),_UnlockRequestQueue.call(this)}function RemoveItemPSGenerator(e,t){var n=this.Get("ControlPS").GetChildByType(e),r=n.GetChildByType("Domain"),i=r.GetChildByType(t);return i!==null?i.GetProperty("Path")===null||typeof i.GetProperty("Path")=="undefined"?null:(inputPropSet=CCFMiscUtil_CreatePropSet(),inputPropSet.SetProperty("RequestType","RemoveItem"),inputPropSet.SetProperty("Path",i.GetProperty("Path")),inputPropSet.SetProperty("Parent Display Name",this.Get("ProductName")),inputPropSet.SetProperty("Port Display Name",i.GetProperty("CxPortName")),inputPropSet.SetProperty("New Child Display Name",i.GetProperty("CxObjName")),inputPropSet.SetProperty("ObjId",this.Get("ObjId")),inputPropSet.SetProperty("Version",this.Get("Version")),inputPropSet.SetProperty("RootId",this.Get("RootId")),this.SetProperty("CfgAnchorId",i.GetProperty("Parent Path")+"_"+i.GetProperty("Port Item Id")),inputPropSet):(_UnlockRequestQueue.call(this),null)}function ReplaceItem(e,t){var n=this.Get("ControlPS"),r=this.Get("QEDirtyFlag"),i=null,s=null,o=null,u="";this.SetProperty("QEDirtyFlag",!0),controlPropset=n.GetChildByType(e),s=i.GetChildByType("Domain"),u=s.GetProperty("Parent Path"),o=s.GetChildByType(t);if(o!==null){var a,f;inputPropSet=CCFMiscUtil_CreatePropSet(),inputPropSet.SetProperty("RequestType","ReplaceItem"),inputPropSet.SetProperty("Path",o.GetProperty("Path")),inputPropSet.SetProperty("Product Id",t),inputPropSet.SetProperty("Prod Item Id",o.GetProperty("Port Item Id")),inputPropSet.SetProperty("Quantity","1"),inputPropSet
.SetProperty("List Price",o.GetProperty("List Price")),inputPropSet.SetProperty("Current Price","0"),inputPropSet.SetProperty("Parent Path",u),inputPropSet.SetProperty("AutoResolve",""),inputPropSet.SetProperty("Parent Display Name",this.Get("ProductName")),inputPropSet.SetProperty("Port Display Name",o.GetProperty("CxPortName")),inputPropSet.SetProperty("New Child Display Name",o.GetProperty("CxObjName")),inputPropSet.SetProperty("Version",this.Get("Version")),inputPropSet.SetProperty("ObjId",this.Get("ObjId")),inputPropSet.SetProperty("RootId",this.Get("RootId")),a=inputPropSet.EncodeAsString(),f="SubmitRequest_"+a,_SubmitWithHiddenFrame.call(this,f)}else bCFG_ClientJSDebug&&SiebelJS.Log("ConfiguratorPM Error - Unable to find Cached Info"),_UnlockRequestQueue.call(this)}function SetAttribute(e,t,n){var r=this.Get("ControlPS"),i=this.Get("DeferUpdate"),s=this.Get("DirtyIdLookUp"),o=this.Get("DirtyItemArray"),u=null;if(i){var a=e;s[a]===null||typeof s[a]=="undefined"?(dirtyIdInfo={},dirtyIdInfo.GRPITEM=e,dirtyIdInfo.TYPECODE=n,dirtyIdInfo.ATTVAL=t,s[a]=dirtyIdInfo,o[o.length]=a):(dirtyIdInfo=s[a],dirtyIdInfo.GRPITEM=e,dirtyIdInfo.TYPECODE=n,dirtyIdInfo.ATTVAL=t);var f=r.GetChildByType(e),l=f.GetProperty("AttName"),c=f.GetProperty("AttValue"),h=f.GetProperty("XA Id"),p=f.GetProperty("Type"),d=f.GetProperty("Parent Path");u=CCFMiscUtil_CreatePropSet(),u.SetProperty("AttName",l),u.SetProperty("AttValue",t),u.SetProperty("XA Id",h),u.SetProperty("Usage",p),u.SetProperty("AttValueOld",c),u.SetProperty("Parent Path",d),this.SetProperty("UpdateSelectionInfoForAttribute",u),f.SetProperty("AttValue",t),_UnlockRequestQueue.call(this);return}var v="",m="",d="";u=SetAttributePSGenerator.call(this,e,t,n),v=u.EncodeAsString(),m="SubmitRequest_"+v,this.SetProperty("QEDirtyFlag",!0),_SubmitWithHiddenFrame.call(this,m)}function SetAttributePSGenerator(e,t,n){var r=this.Get("ControlPS"),i="",s="",o="",u="",a=null,f=null,l="",c="",h="",p=r.GetChildByType(e);return s=p.GetProperty("AttName"),i=p.GetProperty("Attribute Display Name"),o=p.GetProperty("XA Id"),u=p.GetProperty("AttID"),h=p.GetProperty("Parent Path"),this.SetProperty("CfgAnchorId",h+"_"+u),a=CCFMiscUtil_CreatePropSet(),a.SetProperty("RequestType","ChangeAttribute"),a.SetProperty("Name",s),a.SetProperty("Id",u),a.SetProperty("ObjId",this.Get("ObjId")),a.SetProperty("RootId",this.Get("RootId")),a.SetProperty("Path",h),a.SetProperty("XA Id",o),a.SetProperty("Value",t),a.SetProperty("Version",this.Get("Version")),a.SetProperty("Property Type Code",n),a.SetProperty("Attribute Display Name",i),a.SetProperty("Parent Display Name",this.Get("ProductName")),a}function SetItemQuantity(e,t,n){SetItemQuantityHelper.call(this,e,t,n,"Y")}function SetItemQuantityHelper(e,t,n,r){var i=this.Get("DeferUpdate"),s=this.Get("DirtyIdLookUp"),o=this.Get("DirtyItemArray");if(i){var u=e+"|"+t,a;s[u]===null||typeof s[u]=="undefined"?(a={},a.GRPITEM=e,a.QTY=n,a.TYPEQTY=r,a.INTID=t,s[u]=a,o[o.length]=u):(a=s[u],a.GRPITEM=e,a.QTY=n,a.TYPEQTY=r,a.INTID=t),_UnlockRequestQueue.call(this);return}this.SetProperty("QEDirtyFlag",!0);var f=null;f=SetItemQuantityPSGenerator.call(this,e,t,n,r);var l=f.EncodeAsString(),c="SubmitRequest_"+l;_SubmitWithHiddenFrame.call(this,c)}function SetItemQuantityMin(e,t,n){SetItemQuantityHelper.call(this,e,t,n,"")}function SetItemQuantityPSGenerator(e,t,n,r){var i=this.Get("ControlPS"),s=null,o=i.GetChildByType(e),u=null,a=null,f="",l=0,c="",h="",p=null,d=!1;u=o.GetChildByType("Domain");if(u!==null&&typeof u!="undefined"){s=u,l=s.GetChildCount();for(d=!0;a=s.EnumChildren(d);d=!1){c="",c=a.GetProperty("Path");if(typeof c!="undefined"&&String(c)===t){p=a;break}}}else p=o;p!==null&&(h=p.GetProperty("CxPortName"),f=p.GetProperty("Name"));var v=CCFMiscUtil_CreatePropSet();return v.SetProperty("RequestType","ChangeQuantity"),v.SetProperty("ObjId",this.Get("ObjId")),v.SetProperty("RootId",this.Get("RootId")),v.SetProperty("Path",t),v.SetProperty("Quantity",n),v.SetProperty("Version",this.Get("Version")),v.SetProperty("Parent Display Name",this.Get("ProductName")),v.SetProperty("Port Display Name",h),v.SetProperty("New Child Display Name",f),v.SetProperty("SetTypeQty",r),this.SetProperty("CfgAnchorId",p.GetProperty("Parent Path")+"_"+p.GetProperty("Port Item Id")),v}function SubmitWithFrame(e,t){var n=-1,r=CCFMiscUtil_CreatePropSet();e.indexOf("SetTopObj")>=0||e.indexOf("ChangeCurrentObj")>=0?(this.SetProperty("CfgKeepAnchor",!1),this.SetProperty("CfgScrollTop",""),this.SetProperty("CfgAnchorId",""),this.SetProperty("CfgActiveElement","")):this.SetProperty("CfgKeepAnchor",!0),n=e.indexOf("_");if(n>=0){var i=e.substr(n+1);r.DecodeFromString(i)}try{_LockRequestQueue.call(this),t==="HiddenFrame"&&(e="Hidden"+e),this.ExecuteMethod("InvokeMethod",e,r,!0)}catch(s){SiebelJS.Log("ConfiguratorPM Error - "+s)}finally{_UnlockRequestQueue.call(this)}}function _ProcessInteractPropSet(){var e=this.Get("DirtyItemArray"),t=this.Get("DirtyIdLookUp"),n,r,i=null;if(e.length===0)return;var s=CCFMiscUtil_CreatePropSet(),o=CCFMiscUtil_CreatePropSet(),u=CCFMiscUtil_CreatePropSet();o.SetProperty("RequestType","InteractMultiSelect"),s.SetType("Interact Requests"),o.AddChild(s),u.SetType("Requests"),s.AddChild(u);for(var a=0;a<e.length;a++)n=e[a],r=t[n],t[n]=null,e[a]=null,r.ATTVAL!==null&&typeof r.ATTVAL!="undefined"?i=SetAttributePSGenerator.call(this,r.GRPITEM,r.ATTVAL,r.TYPECODE):r.INTID!==null&&typeof r.INTID!="undefined"?i=SetItemQuantityPSGenerator.call(this,r.GRPITEM,r.INTID,r.QTY,r.TYPEQTY):r.QTY==="-1"?i=RemoveItemPSGenerator.call(this,r.GRPITEM,r.PROD):i=AddItemPSGenerator.call(this,r.ADDITEM,r.GRPITEM,r.PROD,r.QTY,r.TYPEQTY,!0),i!==null&&(i.SetType("Request"),u.AddChild(i));t=t.splice(0,t.length),t.length=0,e=e.splice(0,e.length),e.length=0;var f=o.EncodeAsString(),l="SubmitRequest_"+f,c=u.GetChildCount();c>0?_SubmitWithMainFrame.call(this,l):_UnlockRequestQueue.call(this)}function _RefreshUI(){this.Get("CfgKeepAnchor")!=1?(this.SetProperty("CfgAnchorId",""),this.SetProperty
("CfgActiveElement","")):(this.SetProperty("CfgScrollTop",$("body").scrollTop()),typeof $(document.activeElement).attr("id")=="undefined"?this.SetProperty("CfgActiveElement",$(document.activeElement).attr("name")):this.SetProperty("CfgActiveElement",$(document.activeElement).attr("id"))),this.SetProperty("CfgKeepAnchor",!1);try{_SubmitWithMainFrame.call(this,"RefreshUI")}catch(e){SiebelJS.Log("ConfiguratorPM Error::_RefreshUI - "+e)}finally{}}function _SubmitToQueue(str){var bRequestLock=this.Get("RequestLock"),requestQueue=this.Get("RequestQueue"),requestQueueIndex=this.Get("RequestQueueIndex"),requestQueueTimeStamp=this.Get("RequestQueueTimeStamp");if(bRequestLock===!0||requestQueue.length-requestQueueIndex>0){requestQueue[requestQueue.length]=str;var now=new Date,curTimeStamp=now.getTime();if(requestQueueTimeStamp===-requestQueueTimeOut){requestQueueTimeStamp=curTimeStamp,this.SetProperty("RequestQueueTimeStamp",requestQueueTimeOut);return}curTimeStamp-requestQueueTimeStamp>=requestQueueTimeOut&&(this.SetProperty("RequestQueueIndex",requestQueue.length),this.SetProperty("RequestLock",!1),this.SetProperty("RequestQueueTimeStamp",-requestQueueTimeOut),_SubmitToQueue.call(this,"_RefreshUI.call(this)"),_SubmitToQueue.call(str))}else this.SetProperty("RequestLock",!0),eval(str)}function _SubmitWithHiddenFrame(e){this.ExecuteMethod("SubmitWithFrame",e,"HiddenFrame")}function _SubmitWithMainFrame(e){this.ExecuteMethod("SubmitWithFrame",e,"InstanceFrame")}function _LockRequestQueue(){this.SetProperty("RequestLock",!0)}function _UnlockRequestQueue(){var request="",requestQueue=this.Get("RequestQueue"),requestQueueIndex=this.Get("RequestQueueIndex");requestQueue.length-requestQueueIndex>0?(request=requestQueue[requestQueueIndex],requestQueue[requestQueueIndex]=null,requestQueueIndex++,requestQueue.length-requestQueueIndex<=0&&this.SetProperty("RequestLock",!1),eval(request)):this.SetProperty("RequestLock",!1),this.SetProperty("RequestQueueTimeStamp",-requestQueueTimeOut)}var consts=SiebelJS.Dependency("SiebelAppFacade.FacadeConstants"),siebConsts=SiebelJS.Dependency("SiebelApp.Constants"),BC_NOTI_GENERIC=siebConsts.get("SWE_PROP_BC_NOTI_GENERIC"),PROP_NOTI_TYPE=siebConsts.get("SWE_PROP_NOTI_TYPE"),_pipe="[~^^",_underscore="^^~[",requestQueueTimeOut=18e4;return SiebelJS.Extend(ConfiguratorPresentationModel,SiebelAppFacade.PresentationModel),ConfiguratorPresentationModel.prototype.Init=function(){SiebelAppFacade.ConfiguratorPresentationModel.superclass.Init.call(this),this.AddProperty("NewHeaderImage",null),this.AddProperty("RefreshSpanInnerHTML",null),this.AddProperty("ShowConflict",null),this.AddProperty("ShowExplanation",null),this.AddProperty("ShowMessage",null),this.AddProperty("ShowMessageDlg",null),this.AddProperty("UpdateCanInvoke",null),this.AddProperty("UpdateExcludedItems",null),this.AddProperty("UpdateGenerics",null),this.AddProperty("UpdateQuickEdit",null),this.AddProperty("UpdateResources",null),this.AddProperty("UpdateRootProdInfo",null),this.AddProperty("UpdateSelectionInfo",null),this.AddProperty("UpdateSelectionInfoForAttribute",null),this.AddProperty("UpdateSignal",null),this.AddProperty("CfgUIInfo",null),this.AddProperty("ControlPS",null),this.AddProperty("CfgKeepAnchor",!1),this.AddProperty("CfgAnchorId",""),this.AddProperty("CfgScrollTop",""),this.AddProperty("CfgActiveElement",""),this.AddMethod("AddItem",AddItem),this.AddMethod("AddItemMin",AddItemMin),this.AddMethod("CfgInvokeMethod",CfgInvokeMethod),this.AddMethod("EditField",EditField),this.AddMethod("GetCfgUIInfo",GetCfgUIInfo),this.AddMethod("GetExplanation",GetExplanation),this.AddMethod("GetTemplateVarValue",GetTemplateVarValue),this.AddMethod("ProcessInteractPropSet",_ProcessInteractPropSet),this.AddMethod("RefreshUI",_RefreshUI),this.AddMethod("RemoveItem",RemoveItem),this.AddMethod("ReplaceItem",ReplaceItem),this.AddMethod("SetAttribute",SetAttribute),this.AddMethod("SetItemQuantity",SetItemQuantity),this.AddMethod("SubmitWithFrame",SubmitWithFrame),this.AddMethod("CallService",CallService),this.AttachNotificationHandler(BC_NOTI_GENERIC,NotifyScheduler),this.AttachNotificationHandler(siebConsts.get("SWE_PROP_BC_NOTI_GENERIC"),function(e){var t=e.GetProperty("type"),n=e.GetProperty(siebConsts.get("SWE_PROP_ARGS_ARRAY")),r=[],i,s;n&&CCFMiscUtil_StringToArray(n,r);if(t.search("EvalJS")!==0)if(t.search("RefreshSpanInnerHTML")===0){var o=r[0];this.SetProperty("RefreshSpanInnerHTML",o)}else t.search("OUI_RefreshUI")===0?(i=CCFMiscUtil_CreatePropSet(),s=r[0],i.DecodeFromString(s),s!==""&&(InitializeUIFramework.call(this,i),this.SetProperty("CfgUIInfo",!0))):t.search("OUI_SubmitRequest")===0?(i=CCFMiscUtil_CreatePropSet(),s=r[0],i.DecodeFromString(s),s!==""&&ProcessResponse.call(this,i)):t.search("CfgUIInfo")===0?(s=r[0],s!==""&&(i=CCFMiscUtil_CreatePropSet(),i.DecodeFromString(s),InitializeUIFramework.call(this,i),this.SetProperty("CfgUIInfo",!0))):SiebelJS.Log("OpenUI_CFG::Unhandled Event::"+t)})},ConfiguratorPresentationModel}(),define("siebel/cfgpmodel",[],function(){return"SiebelAppFacade.ConfiguratorPresentationModel"}));
